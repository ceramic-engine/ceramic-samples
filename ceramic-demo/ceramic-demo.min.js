!function(re){"use strict";function c(){return Ti.__string_rec(this,"")}var a,x={},he={};function $extend(e,n){var t,i=Object.create(e);for(t in n)i[t]=n[t];return n.toString!==Object.prototype.toString&&(i.toString=n.toString),i}function f(){}function g(){}function h(){this._components=null,this.autoruns=null,this._lifecycleState=0,this.id=null}function i(){this.skewY=0,this.skewX=0,this.scaleY=1,this.scaleX=1,this.rotation=0,this.y=0,this.x=0,this.pivotY=0,this.pivotX=0}function j(e,n,t,i,s,r){null==r&&(r=0),null==s&&(s=0),null==i&&(i=1),null==t&&(t=0),null==n&&(n=0),this.a=e=null==e?1:e,this.b=n,this.c=t,this.d=i,this.tx=s,this.ty=r,this._aPrev=e,this._bPrev=n,this._cPrev=t,this._dPrev=i,this._txPrev=s,this._tyPrev=r,this.changed=!1,this.changedDirty=!1}function k(){this.availableItems=[]}function l(e,n,t){null==t&&(t=0),null==n&&(n=0),null==e&&(e=0),this.z=0,this.y=0,this.x=0,this.x=e,this.y=n,this.z=t}function m(){this.parent=null,this.children=null,this.computedClip=null,this.computedTouchable=!0,this.computedRenderTarget=null,this.computedDepth=0,this.computedAlpha=1,this.computedVisible=!0,this.matTY=0,this.matTX=0,this.matD=1,this.matC=0,this.matB=0,this.matA=1,this.flags=0,this.shader=null,this.transform=null,this.alpha=1,this.rotation=0,this.roundTranslation=-1,this._height=0,this._width=0,this.anchorY=0,this.anchorX=0,this.skewY=0,this.skewX=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,this.depthRange=1,this.depth=0,this.touchable=!0,this.visible=!0,this.blending=0,this.renderTarget=null,this.clipDirty=!0,this.touchableDirty=!0,this.visibilityDirty=!0,this.renderTargetDirty=!0,this.matrixDirty=!0,this.contentDirty=!0,this.translatesOnlyDirty=!1,this.translatesOnly=!0,this.inheritAlpha=!1,this.clip=null,this._numPointerOver=0,this._numPointerDown=0,this.multiTouch=!1,this.asMesh=null,this.asQuad=null,h.call(this),ae.app.pendingVisuals.push(this)}function n(){this.frameHeight=-1,this.frameWidth=-1,this.frameY=-1,this.frameX=-1,this._texture=null,this.tile=null,this.color=16777215,m.call(this),this.asQuad=this}function o(){this.sizeDirty=!1,n.call(this),this.flags|=16}function p(){}function q(){}function r(){this.paused=!1,this.autoUpdateWhenInactive=!1,this.autoUpdate=!0,this.isRootScene=!1,this.unobservedStatus=0,this.statusAutoruns=null,this._assetsFailure=!1,this._assetsTotal=0,this._assetsProgress=0,this._assets=null,this.observedDirty=!1,o.call(this),this.flags|=16,Gn.get_shared().all.push(this)}function s(){r.call(this)}function t(e,n){this.r=new RegExp(e,n.split("u").join(""))}(x["ceramic.Lazy"]=f).__name__="ceramic.Lazy",f.__isInterface__=!0,(x["tracker.Events"]=g).__name__="tracker.Events",g.__isInterface__=!0,(x["ceramic.Entity"]=h).__name__="ceramic.Entity",h.__interfaces__=[f,g],h.prototype={get_destroyed:function(){return this._lifecycleState<0},get_disposed:function(){return 1==this._lifecycleState},emitDispose:function(e){var n=0;if(null!=this.__cbOnDispose&&(n+=this.__cbOnDispose.length),null!=this.__cbOnceDispose&&(n+=this.__cbOnceDispose.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnDispose)for(var r=0,l=this.__cbOnDispose.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnDispose[a],++s):--n}if(null!=this.__cbOnceDispose){for(var h=null,c=null,r=0,l=this.__cbOnceDispose.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceDispose[a],this.__cbOnceDispose[a]=null,o=this.__cbOnceOwnerUnbindDispose[a],(this.__cbOnceOwnerUnbindDispose[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindDispose[a]),c.push(this.__cbOnceDispose[a]))}this.__cbOnceOwnerUnbindDispose=h,this.__cbOnceDispose=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onDispose:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event dispose because owner is destroyed!");var s=function(e){null!=t&&(i.offDispose(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindDispose&&(this.__cbOnOwnerUnbindDispose=[]),this.__cbOnOwnerUnbindDispose.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindDispose&&(this.__cbOnOwnerUnbindDispose=[]),this.__cbOnOwnerUnbindDispose.push(null);null==this.__cbOnDispose&&(this.__cbOnDispose=[]),this.__cbOnDispose.push(t)},onceDispose:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event dispose because owner is destroyed!");var s=function(e){null!=t&&(i.offDispose(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindDispose&&(this.__cbOnceOwnerUnbindDispose=[]),this.__cbOnceOwnerUnbindDispose.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindDispose&&(this.__cbOnceOwnerUnbindDispose=[]),this.__cbOnceOwnerUnbindDispose.push(null);null==this.__cbOnceDispose&&(this.__cbOnceDispose=[]),this.__cbOnceDispose.push(t)},offDispose:function(e){if(null!=e){var n;null!=this.__cbOnDispose&&-1!=(n=this.__cbOnDispose.indexOf(e))&&(this.__cbOnDispose.splice(n,1),null!=(r=this.__cbOnOwnerUnbindDispose[n])&&r(),this.__cbOnOwnerUnbindDispose.splice(n,1)),null!=this.__cbOnceDispose&&-1!=(n=this.__cbOnceDispose.indexOf(e))&&(this.__cbOnceDispose.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindDispose[n])&&r(),this.__cbOnceOwnerUnbindDispose.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDispose){for(var t=0,i=this.__cbOnOwnerUnbindDispose.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindDispose[s])&&r()}this.__cbOnOwnerUnbindDispose=null}if(null!=this.__cbOnceOwnerUnbindDispose){for(t=0,i=this.__cbOnceOwnerUnbindDispose.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindDispose[s])&&r()}this.__cbOnceOwnerUnbindDispose=null}this.__cbOnDispose=null,this.__cbOnceDispose=null}},listensDispose:function(){return null!=this.__cbOnDispose&&0<this.__cbOnDispose.length||null!=this.__cbOnceDispose&&0<this.__cbOnceDispose.length},emitDestroy:function(e){var n=0;if(null!=this.__cbOnDestroy&&(n+=this.__cbOnDestroy.length),null!=this.__cbOnceDestroy&&(n+=this.__cbOnceDestroy.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnDestroy)for(var r=0,l=this.__cbOnDestroy.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnDestroy[a],++s):--n}if(null!=this.__cbOnceDestroy){for(var h=null,c=null,r=0,l=this.__cbOnceDestroy.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceDestroy[a],this.__cbOnceDestroy[a]=null,o=this.__cbOnceOwnerUnbindDestroy[a],(this.__cbOnceOwnerUnbindDestroy[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindDestroy[a]),c.push(this.__cbOnceDestroy[a]))}this.__cbOnceOwnerUnbindDestroy=h,this.__cbOnceDestroy=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onDestroy:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event destroy because owner is destroyed!");var s=function(e){null!=t&&(i.offDestroy(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindDestroy&&(this.__cbOnOwnerUnbindDestroy=[]),this.__cbOnOwnerUnbindDestroy.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindDestroy&&(this.__cbOnOwnerUnbindDestroy=[]),this.__cbOnOwnerUnbindDestroy.push(null);null==this.__cbOnDestroy&&(this.__cbOnDestroy=[]),this.__cbOnDestroy.push(t)},onceDestroy:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event destroy because owner is destroyed!");var s=function(e){null!=t&&(i.offDestroy(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindDestroy&&(this.__cbOnceOwnerUnbindDestroy=[]),this.__cbOnceOwnerUnbindDestroy.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindDestroy&&(this.__cbOnceOwnerUnbindDestroy=[]),this.__cbOnceOwnerUnbindDestroy.push(null);null==this.__cbOnceDestroy&&(this.__cbOnceDestroy=[]),this.__cbOnceDestroy.push(t)},offDestroy:function(e){if(null!=e){var n;null!=this.__cbOnDestroy&&-1!=(n=this.__cbOnDestroy.indexOf(e))&&(this.__cbOnDestroy.splice(n,1),null!=(r=this.__cbOnOwnerUnbindDestroy[n])&&r(),this.__cbOnOwnerUnbindDestroy.splice(n,1)),null!=this.__cbOnceDestroy&&-1!=(n=this.__cbOnceDestroy.indexOf(e))&&(this.__cbOnceDestroy.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindDestroy[n])&&r(),this.__cbOnceOwnerUnbindDestroy.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDestroy){for(var t=0,i=this.__cbOnOwnerUnbindDestroy.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindDestroy[s])&&r()}this.__cbOnOwnerUnbindDestroy=null}if(null!=this.__cbOnceOwnerUnbindDestroy){for(t=0,i=this.__cbOnceOwnerUnbindDestroy.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindDestroy[s])&&r()}this.__cbOnceOwnerUnbindDestroy=null}this.__cbOnDestroy=null,this.__cbOnceDestroy=null}},listensDestroy:function(){return null!=this.__cbOnDestroy&&0<this.__cbOnDestroy.length||null!=this.__cbOnceDestroy&&0<this.__cbOnceDestroy.length},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-3,null!=this.autoruns)for(var e=0,n=this.autoruns.length;e<n;){var t=e++,i=this.autoruns[t];null!=i&&(this.autoruns[t]=null,i.destroy())}if(this.emitDestroy(this),null!=this._components){for(var s=null,r=this._components.h,l=Object.keys(r),a=l.length,h=0;h<a;){var c=l[h++];null==s?s=[c]:s.push(c)}if(null!=s)for(e=0;e<s.length;){c=s[e];++e,this.removeComponent(c)}}this.unbindEvents()}},dispose:function(){0==this._lifecycleState&&(this._lifecycleState=1,ae.app.disposedEntities.push(this)),this.emitDispose(this)},unbindEvents:function(){this.offDispose(),this.offDestroy()},autorun:function(e,n){if(this._lifecycleState<0)return null;var t=new se(e,n);if((n=e=null)==(t.owner=this).autoruns)this.autoruns=[t];else{for(var i=!1,s=0,r=this.autoruns.length;s<r;){var l=s++;if(null==this.autoruns[l]){this.autoruns[l]=t,i=!0;break}}i||this.autoruns.push(t)}return t.onDestroy(this,$bind(this,this.checkAutoruns)),t},checkAutoruns:function(e){for(var n=0,t=this.autoruns.length;n<t;){var i=n++,s=this.autoruns[i];null!=s&&s._lifecycleState<0&&(this.autoruns[i]=null)}},_autorunMarkedMethods:function(){},tween:function(e,n,t,i,s){return G.start(this,e,n,t,i,s)},eagerTween:function(e,n,t,i,s){return G.eagerStart(this,e,n,t,i,s)},className:function(){var e=Ti.getClass(this).__name__,n=e.lastIndexOf(".");return e=-1!=n?le.substr(e,n+1,null):e},toString:function(){var e=this.className();return null!=this.id?e+"("+this.id+")":""+e},clearComponents:function(){if(null!=this._components){for(var e=null,n=this._components.h,t=Object.keys(n),i=t.length,s=0;s<i;){var r=t[s++];null==e?e=[r]:e.push(r)}if(null!=e)for(var l=0;l<e.length;){r=e[l];++l,this.removeComponent(r)}}},get_components:function(){return this._components},set_components:function(e){if(this._components!=e){if(null!=this._components){s=this._components.h;for(var n=(r=Object.keys(s)).length,t=0;t<n;){var i=r[t++];null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)||this.removeComponent(i)}}if(null!=e){s=e.h;for(var s,r,n=(r=Object.keys(s)).length,t=0;t<n;){var l,i=r[t++],a=e.h[i];null!=this._components&&null!=(l=this._components.h[i])?l!=a&&(this.removeComponent(i),this.component(i,a)):this.component(i,a)}}this._components=e}return e},component:function(t,i,s){null==s&&(s=!1);var r=this;if(null==t&&null==i)throw Y.thrown("Invalid component() call: either `name` or `component` should be provided at least.");if(null==t){var e=Ti.getClass(i);if(t=e.__name__,null!=this._components&&Object.prototype.hasOwnProperty.call(this._components.h,t)){var n=t,l=1;for(t=n+"#"+l;Object.prototype.hasOwnProperty.call(this._components.h,t);)t=n+"#"+ ++l}}return null!=i?(null==this._components?this._components=new te:null!=(e=this._components.h[t])&&e.destroy(),(this._components.h[t]=i).setEntity(this),i.onceDestroy(this,function(e){var n;i.getEntity()==r&&i.setEntity(null),0<=r._lifecycleState&&r._components.h[t]==i&&(n=r._components,Object.prototype.hasOwnProperty.call(n.h,t))&&delete n.h[t],s&&null!=t&&P.setProperty(r,t,null)}),i.bindAsComponent(),i):null==this._components?null:this._components.h[t]},hasComponent:function(e){return null!=this.component(e)},removeComponent:function(e){var n,t=this._components.h[e];null!=t&&(n=this._components,Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e],t.destroy())},__class__:h,__properties__:{set_components:"set_components",get_components:"get_components",get_disposed:"get_disposed",get_destroyed:"get_destroyed"}},(x["ceramic.DecomposedTransform"]=i).__name__="ceramic.DecomposedTransform",i.prototype={toString:function(){return"(pos="+this.x+","+this.y+" pivot="+this.pivotX+","+this.pivotY+" rotation="+this.rotation+" scale="+(this.scaleX==this.scaleY?""+this.scaleX:this.scaleX+","+this.scaleY)+" skew="+this.skewX+","+this.skewY+")"},__class__:i},(x["ceramic.Transform"]=j).__name__="ceramic.Transform",j.__interfaces__=[g],j.prototype={emitChange:function(){var e=0;if(null!=this.__cbOnChange&&(e+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(e+=this.__cbOnceChange.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnChange)for(var s=0,r=this.__cbOnChange.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnChange[l],++i):--e}if(null!=this.__cbOnceChange){for(var a=null,h=null,s=0,r=this.__cbOnceChange.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceChange[l],this.__cbOnceChange[l]=null,c=this.__cbOnceOwnerUnbindChange[l],(this.__cbOnceOwnerUnbindChange[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindChange[l]),h.push(this.__cbOnceChange[l]))}this.__cbOnceOwnerUnbindChange=a,this.__cbOnceChange=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t),t=null}this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindChange[n])&&r(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindChange[n])&&r(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindChange[s])&&r()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindChange[s])&&r()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},computeChanged:function(){this.changedDirty&&(this.changed=this.tx!=this._txPrev||this.ty!=this._tyPrev||this.a!=this._aPrev||this.b!=this._bPrev||this.c!=this._cPrev||this.d!=this._dPrev,this.changedDirty=!1)},didEmitChange:function(){this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},cleanChangedState:function(){this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},clone:function(){return new j(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(e){var n=this.a*e.a+this.b*e.c,n=(this.b=this.a*e.b+this.b*e.d,this.a=n,this.c*e.a+this.d*e.c),n=(this.d=this.c*e.b+this.d*e.d,this.c=n,this.tx*e.a+this.ty*e.c+e.tx);this.ty=this.tx*e.b+this.ty*e.d+e.ty,this.tx=n,this.changedDirty=!0},decompose:function(e){return(e=null==e?new i:e).pivotX=0,e.pivotY=0,e.skewX=-Math.atan2(-this.c,this.d),e.skewY=Math.atan2(this.b,this.a),Math.abs(e.skewX+e.skewY)<1e-5&&(e.rotation=e.skewY,this.a<0&&0<=this.d&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skewX=0,e.skewY=0),e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d),e.x=this.tx,e.y=this.ty,e},setFromDecomposed:function(e){var n=e.x,t=e.y,i=e.scaleX,s=e.scaleY,r=e.rotation,l=e.skewX,a=e.skewY,h=e.pivotX,e=e.pivotY;null==e&&(e=0),null==h&&(h=0),null==a&&(a=0),null==l&&(l=0),null==r&&(r=0),null==s&&(s=1),null==i&&(i=1),null==t&&(t=0),null==n&&(n=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-h,this.ty+=-e,this.changedDirty=!0,0!=l&&(this.c=l*Math.PI/180),0!=a&&(this.b=a*Math.PI/180),0!=r&&(l=r*Math.PI/180,a=Math.cos(l),r=Math.sin(l),l=this.a*a-this.b*r,this.b=this.a*r+this.b*a,this.a=l,l=this.c*a-this.d*r,this.d=this.c*r+this.d*a,this.c=l,l=this.tx*a-this.ty*r,this.ty=this.tx*r+this.ty*a,this.tx=l,this.changedDirty=!0),this.tx+=h,this.ty+=e,this.changedDirty=!0,1==i&&1==s||(this.a*=i,this.b*=s,this.c*=i,this.d*=s,this.tx*=i,this.ty*=s,this.changedDirty=!0),this.tx+=n-h*i,this.ty+=t-e*s,this.changedDirty=!0},setFromValues:function(e,n,t,i,s,r,l,a,h){null==h&&(h=0),null==a&&(a=0),null==l&&(l=0),null==r&&(r=0),null==s&&(s=0),null==i&&(i=1),null==t&&(t=1),null==n&&(n=0),null==e&&(e=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-a,this.ty+=-h,this.changedDirty=!0,0!=r&&(this.c=r*Math.PI/180),0!=l&&(this.b=l*Math.PI/180),0!=s&&(r=s*Math.PI/180,l=Math.cos(r),s=Math.sin(r),r=this.a*l-this.b*s,this.b=this.a*s+this.b*l,this.a=r,r=this.c*l-this.d*s,this.d=this.c*s+this.d*l,this.c=r,r=this.tx*l-this.ty*s,this.ty=this.tx*s+this.ty*l,this.tx=r,this.changedDirty=!0),this.tx+=a,this.ty+=h,this.changedDirty=!0,1==t&&1==i||(this.a*=t,this.b*=i,this.c*=t,this.d*=i,this.tx*=t,this.ty*=i,this.changedDirty=!0),this.tx+=e-a*t,this.ty+=n-h*i,this.changedDirty=!0},setFromInterpolated:function(e,n,t){var s,r,l,a,h,c;0==t?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty):1==t?(this.a=n.a,this.b=n.b,this.c=n.c,this.d=n.d,this.tx=n.tx,this.ty=n.ty):((s=null==(s=j._decomposed1)?new i:s).pivotX=0,s.pivotY=0,s.skewX=-Math.atan2(-e.c,e.d),s.skewY=Math.atan2(e.b,e.a),Math.abs(s.skewX+s.skewY)<1e-5&&(s.rotation=s.skewY,e.a<0&&0<=e.d&&(s.rotation+=s.rotation<=0?Math.PI:-Math.PI),s.skewX=0,s.skewY=0),s.scaleX=Math.sqrt(e.a*e.a+e.b*e.b),s.scaleY=Math.sqrt(e.c*e.c+e.d*e.d),s.x=e.tx,s.y=e.ty,(s=null==(s=j._decomposed2)?new i:s).pivotX=0,s.pivotY=0,s.skewX=-Math.atan2(-n.c,n.d),s.skewY=Math.atan2(n.b,n.a),Math.abs(s.skewX+s.skewY)<1e-5&&(s.rotation=s.skewY,n.a<0&&0<=n.d&&(s.rotation+=s.rotation<=0?Math.PI:-Math.PI),s.skewX=0,s.skewY=0),s.scaleX=Math.sqrt(n.a*n.a+n.b*n.b),s.scaleY=Math.sqrt(n.c*n.c+n.d*n.d),s.x=n.tx,s.y=n.ty,j._decomposed1.pivotX+=(j._decomposed2.pivotX-j._decomposed1.pivotX)*t,j._decomposed1.pivotY+=(j._decomposed2.pivotY-j._decomposed1.pivotY)*t,j._decomposed1.rotation+=(j._decomposed2.rotation-j._decomposed1.rotation)*t,j._decomposed1.scaleX+=(j._decomposed2.scaleX-j._decomposed1.scaleX)*t,j._decomposed1.scaleY+=(j._decomposed2.scaleY-j._decomposed1.scaleY)*t,j._decomposed1.skewX+=(j._decomposed2.skewX-j._decomposed1.skewX)*t,j._decomposed1.skewY+=(j._decomposed2.skewY-j._decomposed1.skewY)*t,j._decomposed1.x+=(j._decomposed2.x-j._decomposed1.x)*t,j._decomposed1.y+=(j._decomposed2.y-j._decomposed1.y)*t,s=(e=j._decomposed1).x,n=e.y,t=e.scaleX,r=e.scaleY,h=e.rotation,c=e.skewX,a=e.skewY,l=e.pivotX,null==(e=e.pivotY)&&(e=0),null==l&&(l=0),null==a&&(a=0),null==c&&(c=0),null==h&&(h=0),null==r&&(r=1),null==t&&(t=1),null==n&&(n=0),null==s&&(s=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-l,this.ty+=-e,this.changedDirty=!0,0!=c&&(this.c=c*Math.PI/180),0!=a&&(this.b=a*Math.PI/180),0!=h&&(c=h*Math.PI/180,a=Math.cos(c),h=Math.sin(c),c=this.a*a-this.b*h,this.b=this.a*h+this.b*a,this.a=c,c=this.c*a-this.d*h,this.d=this.c*h+this.d*a,this.c=c,c=this.tx*a-this.ty*h,this.ty=this.tx*h+this.ty*a,this.tx=c,this.changedDirty=!0),this.tx+=l,this.ty+=e,this.changedDirty=!0,1==t&&1==r||(this.a*=t,this.b*=r,this.c*=t,this.d*=r,this.tx*=t,this.ty*=r,this.changedDirty=!0),this.tx+=s-l*t,this.ty+=n-e*r),this.changedDirty=!0},deltaTransformX:function(e,n){return e*this.a+n*this.c},deltaTransformY:function(e,n){return e*this.b+n*this.d},equals:function(e){return null!=e&&this.tx==e.tx&&this.ty==e.ty&&this.a==e.a&&this.b==e.b&&this.c==e.c&&this.d==e.d},identity:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0},invert:function(){var e,n=this.a*this.d-this.b*this.c;0==n?(this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty):(e=this.d*(n=1/n),this.d=this.a*n,this.a=e,this.b*=-n,this.c*=-n,e=-this.a*this.tx-this.c*this.ty,this.ty=-this.b*this.tx-this.d*this.ty,this.tx=e),this.changedDirty=!0},rotate:function(e){var n=Math.cos(e),e=Math.sin(e),t=this.a*n-this.b*e,t=(this.b=this.a*e+this.b*n,this.a=t,this.c*n-this.d*e),t=(this.d=this.c*e+this.d*n,this.c=t,this.tx*n-this.ty*e);this.ty=this.tx*e+this.ty*n,this.tx=t,this.changedDirty=!0},scale:function(e,n){this.a*=e,this.b*=n,this.c*=e,this.d*=n,this.tx*=e,this.ty*=n,this.changedDirty=!0},translate:function(e,n){this.tx+=e,this.ty+=n,this.changedDirty=!0},skew:function(e,n){var t=j._tmp,t=(t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.changedDirty=!0,Math.cos(n)),n=Math.sin(n),i=-Math.sin(e),e=Math.cos(e),t=(j._tmp.a=+t+-0*n,j._tmp.b=0*t+ +n,j._tmp.c=i+-0*e,j._tmp.d=0*i+ +e,j._tmp),n=this.a*t.a+this.b*t.c,i=(this.b=this.a*t.b+this.b*t.d,this.a=n,this.c*t.a+this.d*t.c),e=(this.d=this.c*t.b+this.d*t.d,this.c=i,this.tx*t.a+this.ty*t.c+t.tx);this.ty=this.tx*t.b+this.ty*t.d+t.ty,this.tx=e,this.changedDirty=!0},setRotation:function(e,n){null==n&&(n=1),this.a=Math.cos(e)*n,this.c=Math.sin(e)*n,this.b=-this.c,this.d=this.a,this.changedDirty=!0},setTo:function(e,n,t,i,s,r){this.a=e,this.b=n,this.c=t,this.d=i,this.tx=s,this.ty=r,this.changedDirty=!0},setToTransform:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this.changedDirty=!0},toString:function(){var e=j._decomposed1;return(e=null==e?new i:e).pivotX=0,e.pivotY=0,e.skewX=-Math.atan2(-this.c,this.d),e.skewY=Math.atan2(this.b,this.a),Math.abs(e.skewX+e.skewY)<1e-5&&(e.rotation=e.skewY,this.a<0&&0<=this.d&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skewX=0,e.skewY=0),e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d),e.x=this.tx,e.y=this.ty,"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+" "+L.string(j._decomposed1)+")"},transformX:function(e,n){return e*this.a+n*this.c+this.tx},transformY:function(e,n){return e*this.b+n*this.d+this.ty},unbindEvents:function(){this.offChange()},__class__:j},(x["ceramic.Pool"]=k).__name__="ceramic.Pool",k.prototype={get:function(){return 0<this.availableItems.length?this.availableItems.pop():null},recycle:function(e){this.availableItems.push(e)},clear:function(){0<this.availableItems.length&&(this.availableItems=[])},__class__:k},(x["ceramic.Point"]=l).__name__="ceramic.Point",l.get=function(e,n,t){null==t&&(t=0),null==n&&(n=0),null==e&&(e=0);var i=l.pool,i=0<i.availableItems.length?i.availableItems.pop():null;return null==i?i=new l(e,n,t):(i.x=e,i.y=n,i.z=t),i},l.prototype={toString:function(){return"Point("+this.x+", "+this.y+", "+this.z+")"},recycle:function(){this.x=0,this.y=0,this.z=0,l.pool.recycle(this)},__class__:l},(x["ceramic.Visual"]=m).__name__="ceramic.Visual",m.computeChildrenDepth=function(e){m._computeChildrenDepth0(e)},m._computeChildrenDepth0=function(e){var n=e.children;if(null!=n){for(var t=0,i=n.length;t<i;)(r=n[t++]).computedDepth=1e3*r.depth,m._computeChildrenDepth0(r);var s=e.depthRange;if(-1!=s){m._minDepth=9999999999,m._maxDepth=-9999999999;for(t=0,i=n.length;t<i;){var r=n[t++];m._computeMinMaxDepths0(r)}for(t=0,i=n.length;t<i;){r=n[t++];m._multiplyDepths0(r,e.computedDepth+Math.min(.01,1e3*s),Math.max(0,1e3*s-.01))}}}},m._computeChildrenDepth1=function(e){var n=e.children;if(null!=n){for(var t=0,i=n.length;t<i;)(r=n[t++]).computedDepth=1e3*r.depth,m._computeChildrenDepth0(r);var s=e.depthRange;if(-1!=s){m._minDepth=9999999999,m._maxDepth=-9999999999;for(t=0,i=n.length;t<i;){var r=n[t++];m._computeMinMaxDepths0(r)}for(t=0,i=n.length;t<i;){r=n[t++];m._multiplyDepths0(r,e.computedDepth+Math.min(.01,1e3*s),Math.max(0,1e3*s-.01))}}}},m._computeChildrenDepthApplyDepthRange=function(e,n){var t=e.depthRange;if(-1!=t){m._minDepth=9999999999,m._maxDepth=-9999999999;for(var i=0,s=n.length;i<s;){var r=n[i++];m._computeMinMaxDepths0(r)}for(i=0,s=n.length;i<s;){r=n[i++];m._multiplyDepths0(r,e.computedDepth+Math.min(.01,1e3*t),Math.max(0,1e3*t-.01))}}},m.computeMinMaxDepths=function(e){m._computeMinMaxDepths0(e)},m._computeMinMaxDepths0=function(e){var n=e.computedDepth,t=(n<m._minDepth&&(m._minDepth=n),m._maxDepth<n+1&&(m._maxDepth=n+1),e.children);if(null!=t)for(var i=0,s=t.length;i<s;){var r=t[i++];m._computeMinMaxDepths0(r)}},m._computeMinMaxDepths1=function(e){var n=e.computedDepth,t=(n<m._minDepth&&(m._minDepth=n),m._maxDepth<n+1&&(m._maxDepth=n+1),e.children);if(null!=t)for(var i=0,s=t.length;i<s;){var r=t[i++];m._computeMinMaxDepths0(r)}},m.multiplyDepths=function(e,n,t){m._multiplyDepths0(e,n,t)},m._multiplyDepths0=function(e,n,t){e.computedDepth=m._maxDepth==m._minDepth?n+.5*t:n+(e.computedDepth-m._minDepth)/(m._maxDepth-m._minDepth)*t;var i=e.children;if(null!=i)for(var s=0,r=i.length;s<r;){var l=i[s++];m._multiplyDepths0(l,n,t)}},m._multiplyDepths1=function(e,n,t){e.computedDepth=m._maxDepth==m._minDepth?n+.5*t:n+(e.computedDepth-m._minDepth)/(m._maxDepth-m._minDepth)*t;var i=e.children;if(null!=i)for(var s=0,r=i.length;s<r;){var l=i[s++];m._multiplyDepths0(l,n,t)}},m.__super__=h,m.prototype=$extend(h.prototype,{emitPointerDown:function(e){var n=0;if(null!=this.__cbOnPointerDown&&(n+=this.__cbOnPointerDown.length),null!=this.__cbOncePointerDown&&(n+=this.__cbOncePointerDown.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPointerDown)for(var r=0,l=this.__cbOnPointerDown.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPointerDown[a],++s):--n}if(null!=this.__cbOncePointerDown){for(var h=null,c=null,r=0,l=this.__cbOncePointerDown.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePointerDown[a],this.__cbOncePointerDown[a]=null,o=this.__cbOnceOwnerUnbindPointerDown[a],(this.__cbOnceOwnerUnbindPointerDown[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPointerDown[a]),c.push(this.__cbOncePointerDown[a]))}this.__cbOnceOwnerUnbindPointerDown=h,this.__cbOncePointerDown=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerDown because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(null);null==this.__cbOnPointerDown&&(this.__cbOnPointerDown=[]),this.__cbOnPointerDown.push(t)},oncePointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerDown because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(null);null==this.__cbOncePointerDown&&(this.__cbOncePointerDown=[]),this.__cbOncePointerDown.push(t)},offPointerDown:function(e){if(null!=e){var n;null!=this.__cbOnPointerDown&&-1!=(n=this.__cbOnPointerDown.indexOf(e))&&(this.__cbOnPointerDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPointerDown[n])&&r(),this.__cbOnOwnerUnbindPointerDown.splice(n,1)),null!=this.__cbOncePointerDown&&-1!=(n=this.__cbOncePointerDown.indexOf(e))&&(this.__cbOncePointerDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPointerDown[n])&&r(),this.__cbOnceOwnerUnbindPointerDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindPointerDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPointerDown[s])&&r()}this.__cbOnOwnerUnbindPointerDown=null}if(null!=this.__cbOnceOwnerUnbindPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindPointerDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPointerDown[s])&&r()}this.__cbOnceOwnerUnbindPointerDown=null}this.__cbOnPointerDown=null,this.__cbOncePointerDown=null}},listensPointerDown:function(){return null!=this.__cbOnPointerDown&&0<this.__cbOnPointerDown.length||null!=this.__cbOncePointerDown&&0<this.__cbOncePointerDown.length},emitPointerUp:function(e){var n=0;if(null!=this.__cbOnPointerUp&&(n+=this.__cbOnPointerUp.length),null!=this.__cbOncePointerUp&&(n+=this.__cbOncePointerUp.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPointerUp)for(var r=0,l=this.__cbOnPointerUp.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPointerUp[a],++s):--n}if(null!=this.__cbOncePointerUp){for(var h=null,c=null,r=0,l=this.__cbOncePointerUp.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePointerUp[a],this.__cbOncePointerUp[a]=null,o=this.__cbOnceOwnerUnbindPointerUp[a],(this.__cbOnceOwnerUnbindPointerUp[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPointerUp[a]),c.push(this.__cbOncePointerUp[a]))}this.__cbOnceOwnerUnbindPointerUp=h,this.__cbOncePointerUp=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerUp because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(null);null==this.__cbOnPointerUp&&(this.__cbOnPointerUp=[]),this.__cbOnPointerUp.push(t)},oncePointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerUp because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(null);null==this.__cbOncePointerUp&&(this.__cbOncePointerUp=[]),this.__cbOncePointerUp.push(t)},offPointerUp:function(e){if(null!=e){var n;null!=this.__cbOnPointerUp&&-1!=(n=this.__cbOnPointerUp.indexOf(e))&&(this.__cbOnPointerUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPointerUp[n])&&r(),this.__cbOnOwnerUnbindPointerUp.splice(n,1)),null!=this.__cbOncePointerUp&&-1!=(n=this.__cbOncePointerUp.indexOf(e))&&(this.__cbOncePointerUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPointerUp[n])&&r(),this.__cbOnceOwnerUnbindPointerUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindPointerUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPointerUp[s])&&r()}this.__cbOnOwnerUnbindPointerUp=null}if(null!=this.__cbOnceOwnerUnbindPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindPointerUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPointerUp[s])&&r()}this.__cbOnceOwnerUnbindPointerUp=null}this.__cbOnPointerUp=null,this.__cbOncePointerUp=null}},listensPointerUp:function(){return null!=this.__cbOnPointerUp&&0<this.__cbOnPointerUp.length||null!=this.__cbOncePointerUp&&0<this.__cbOncePointerUp.length},emitPointerOver:function(e){var n=0;if(null!=this.__cbOnPointerOver&&(n+=this.__cbOnPointerOver.length),null!=this.__cbOncePointerOver&&(n+=this.__cbOncePointerOver.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPointerOver)for(var r=0,l=this.__cbOnPointerOver.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPointerOver[a],++s):--n}if(null!=this.__cbOncePointerOver){for(var h=null,c=null,r=0,l=this.__cbOncePointerOver.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePointerOver[a],this.__cbOncePointerOver[a]=null,o=this.__cbOnceOwnerUnbindPointerOver[a],(this.__cbOnceOwnerUnbindPointerOver[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPointerOver[a]),c.push(this.__cbOncePointerOver[a]))}this.__cbOnceOwnerUnbindPointerOver=h,this.__cbOncePointerOver=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPointerOver:function(n,t){var i=this;if(null==this.__cbOnPointerOver&&null==this.__cbOncePointerOver&&(ae.app.screen.visualsListenPointerOver=!0),null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerOver because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerOver(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPointerOver&&(this.__cbOnOwnerUnbindPointerOver=[]),this.__cbOnOwnerUnbindPointerOver.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPointerOver&&(this.__cbOnOwnerUnbindPointerOver=[]),this.__cbOnOwnerUnbindPointerOver.push(null);null==this.__cbOnPointerOver&&(this.__cbOnPointerOver=[]),this.__cbOnPointerOver.push(t)},oncePointerOver:function(n,t){var i=this;if(null==this.__cbOnPointerOver&&null==this.__cbOncePointerOver&&(ae.app.screen.visualsListenPointerOver=!0),null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerOver because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerOver(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPointerOver&&(this.__cbOnceOwnerUnbindPointerOver=[]),this.__cbOnceOwnerUnbindPointerOver.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPointerOver&&(this.__cbOnceOwnerUnbindPointerOver=[]),this.__cbOnceOwnerUnbindPointerOver.push(null);null==this.__cbOncePointerOver&&(this.__cbOncePointerOver=[]),this.__cbOncePointerOver.push(t)},offPointerOver:function(e){if(null!=e){var n;null!=this.__cbOnPointerOver&&-1!=(n=this.__cbOnPointerOver.indexOf(e))&&(this.__cbOnPointerOver.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPointerOver[n])&&r(),this.__cbOnOwnerUnbindPointerOver.splice(n,1)),null!=this.__cbOncePointerOver&&-1!=(n=this.__cbOncePointerOver.indexOf(e))&&(this.__cbOncePointerOver.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPointerOver[n])&&r(),this.__cbOnceOwnerUnbindPointerOver.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerOver){for(var t=0,i=this.__cbOnOwnerUnbindPointerOver.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPointerOver[s])&&r()}this.__cbOnOwnerUnbindPointerOver=null}if(null!=this.__cbOnceOwnerUnbindPointerOver){for(t=0,i=this.__cbOnceOwnerUnbindPointerOver.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPointerOver[s])&&r()}this.__cbOnceOwnerUnbindPointerOver=null}this.__cbOnPointerOver=null,this.__cbOncePointerOver=null}},listensPointerOver:function(){return null!=this.__cbOnPointerOver&&0<this.__cbOnPointerOver.length||null!=this.__cbOncePointerOver&&0<this.__cbOncePointerOver.length},emitPointerOut:function(e){var n=0;if(null!=this.__cbOnPointerOut&&(n+=this.__cbOnPointerOut.length),null!=this.__cbOncePointerOut&&(n+=this.__cbOncePointerOut.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPointerOut)for(var r=0,l=this.__cbOnPointerOut.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPointerOut[a],++s):--n}if(null!=this.__cbOncePointerOut){for(var h=null,c=null,r=0,l=this.__cbOncePointerOut.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePointerOut[a],this.__cbOncePointerOut[a]=null,o=this.__cbOnceOwnerUnbindPointerOut[a],(this.__cbOnceOwnerUnbindPointerOut[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPointerOut[a]),c.push(this.__cbOncePointerOut[a]))}this.__cbOnceOwnerUnbindPointerOut=h,this.__cbOncePointerOut=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPointerOut:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerOut because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerOut(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPointerOut&&(this.__cbOnOwnerUnbindPointerOut=[]),this.__cbOnOwnerUnbindPointerOut.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPointerOut&&(this.__cbOnOwnerUnbindPointerOut=[]),this.__cbOnOwnerUnbindPointerOut.push(null);null==this.__cbOnPointerOut&&(this.__cbOnPointerOut=[]),this.__cbOnPointerOut.push(t)},oncePointerOut:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerOut because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerOut(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPointerOut&&(this.__cbOnceOwnerUnbindPointerOut=[]),this.__cbOnceOwnerUnbindPointerOut.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPointerOut&&(this.__cbOnceOwnerUnbindPointerOut=[]),this.__cbOnceOwnerUnbindPointerOut.push(null);null==this.__cbOncePointerOut&&(this.__cbOncePointerOut=[]),this.__cbOncePointerOut.push(t)},offPointerOut:function(e){if(null!=e){var n;null!=this.__cbOnPointerOut&&-1!=(n=this.__cbOnPointerOut.indexOf(e))&&(this.__cbOnPointerOut.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPointerOut[n])&&r(),this.__cbOnOwnerUnbindPointerOut.splice(n,1)),null!=this.__cbOncePointerOut&&-1!=(n=this.__cbOncePointerOut.indexOf(e))&&(this.__cbOncePointerOut.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPointerOut[n])&&r(),this.__cbOnceOwnerUnbindPointerOut.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerOut){for(var t=0,i=this.__cbOnOwnerUnbindPointerOut.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPointerOut[s])&&r()}this.__cbOnOwnerUnbindPointerOut=null}if(null!=this.__cbOnceOwnerUnbindPointerOut){for(t=0,i=this.__cbOnceOwnerUnbindPointerOut.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPointerOut[s])&&r()}this.__cbOnceOwnerUnbindPointerOut=null}this.__cbOnPointerOut=null,this.__cbOncePointerOut=null}},listensPointerOut:function(){return null!=this.__cbOnPointerOut&&0<this.__cbOnPointerOut.length||null!=this.__cbOncePointerOut&&0<this.__cbOncePointerOut.length},emitFocus:function(){var e=0;if(null!=this.__cbOnFocus&&(e+=this.__cbOnFocus.length),null!=this.__cbOnceFocus&&(e+=this.__cbOnceFocus.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFocus)for(var s=0,r=this.__cbOnFocus.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnFocus[l],++i):--e}if(null!=this.__cbOnceFocus){for(var a=null,h=null,s=0,r=this.__cbOnceFocus.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceFocus[l],this.__cbOnceFocus[l]=null,c=this.__cbOnceOwnerUnbindFocus[l],(this.__cbOnceOwnerUnbindFocus[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFocus[l]),h.push(this.__cbOnceFocus[l]))}this.__cbOnceOwnerUnbindFocus=a,this.__cbOnceFocus=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event focus because owner is destroyed!");var s=function(e){null!=t&&(i.offFocus(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(null);null==this.__cbOnFocus&&(this.__cbOnFocus=[]),this.__cbOnFocus.push(t)},onceFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event focus because owner is destroyed!");var s=function(e){null!=t&&(i.offFocus(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(null);null==this.__cbOnceFocus&&(this.__cbOnceFocus=[]),this.__cbOnceFocus.push(t)},offFocus:function(e){if(null!=e){var n;null!=this.__cbOnFocus&&-1!=(n=this.__cbOnFocus.indexOf(e))&&(this.__cbOnFocus.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFocus[n])&&r(),this.__cbOnOwnerUnbindFocus.splice(n,1)),null!=this.__cbOnceFocus&&-1!=(n=this.__cbOnceFocus.indexOf(e))&&(this.__cbOnceFocus.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFocus[n])&&r(),this.__cbOnceOwnerUnbindFocus.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFocus){for(var t=0,i=this.__cbOnOwnerUnbindFocus.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFocus[s])&&r()}this.__cbOnOwnerUnbindFocus=null}if(null!=this.__cbOnceOwnerUnbindFocus){for(t=0,i=this.__cbOnceOwnerUnbindFocus.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFocus[s])&&r()}this.__cbOnceOwnerUnbindFocus=null}this.__cbOnFocus=null,this.__cbOnceFocus=null}},listensFocus:function(){return null!=this.__cbOnFocus&&0<this.__cbOnFocus.length||null!=this.__cbOnceFocus&&0<this.__cbOnceFocus.length},emitBlur:function(){var e=0;if(null!=this.__cbOnBlur&&(e+=this.__cbOnBlur.length),null!=this.__cbOnceBlur&&(e+=this.__cbOnceBlur.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBlur)for(var s=0,r=this.__cbOnBlur.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnBlur[l],++i):--e}if(null!=this.__cbOnceBlur){for(var a=null,h=null,s=0,r=this.__cbOnceBlur.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceBlur[l],this.__cbOnceBlur[l]=null,c=this.__cbOnceOwnerUnbindBlur[l],(this.__cbOnceOwnerUnbindBlur[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBlur[l]),h.push(this.__cbOnceBlur[l]))}this.__cbOnceOwnerUnbindBlur=a,this.__cbOnceBlur=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event blur because owner is destroyed!");var s=function(e){null!=t&&(i.offBlur(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(null);null==this.__cbOnBlur&&(this.__cbOnBlur=[]),this.__cbOnBlur.push(t)},onceBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event blur because owner is destroyed!");var s=function(e){null!=t&&(i.offBlur(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(null);null==this.__cbOnceBlur&&(this.__cbOnceBlur=[]),this.__cbOnceBlur.push(t)},offBlur:function(e){if(null!=e){var n;null!=this.__cbOnBlur&&-1!=(n=this.__cbOnBlur.indexOf(e))&&(this.__cbOnBlur.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBlur[n])&&r(),this.__cbOnOwnerUnbindBlur.splice(n,1)),null!=this.__cbOnceBlur&&-1!=(n=this.__cbOnceBlur.indexOf(e))&&(this.__cbOnceBlur.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBlur[n])&&r(),this.__cbOnceOwnerUnbindBlur.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBlur){for(var t=0,i=this.__cbOnOwnerUnbindBlur.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBlur[s])&&r()}this.__cbOnOwnerUnbindBlur=null}if(null!=this.__cbOnceOwnerUnbindBlur){for(t=0,i=this.__cbOnceOwnerUnbindBlur.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBlur[s])&&r()}this.__cbOnceOwnerUnbindBlur=null}this.__cbOnBlur=null,this.__cbOnceBlur=null}},listensBlur:function(){return null!=this.__cbOnBlur&&0<this.__cbOnBlur.length||null!=this.__cbOnceBlur&&0<this.__cbOnceBlur.length},willListenPointerOver:function(){ae.app.screen.visualsListenPointerOver=!0},get_isPointerDown:function(){return 0<this._numPointerDown},get_isPointerOver:function(){return 0<this._numPointerOver},set_clip:function(e){if(this.clip!=e&&(this.clip=e,this.clipDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.clipDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_clipDirty(!0)}}return e},set_inheritAlpha:function(e){if(this.inheritAlpha!=e&&(this.inheritAlpha=e,this.visibilityDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.visibilityDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_visibilityDirty(!0)}}return e},stop:function(){},set_contentDirty:function(e){return(this.contentDirty=e)&&(ae.app.visualsContentDirty=!0),e},set_matrixDirty:function(e){if((this.matrixDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_matrixDirty(!0)}return e},set_renderTargetDirty:function(e){if(this.renderTargetDirty=e){if(this.clipDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;if((a=this.children[i]).clipDirty=!0,null!=a.children)for(var s=0,r=a.children.length;s<r;){var l=s++;a.children[l].set_clipDirty(!0)}}if(null!=this.children)for(n=0,t=this.children.length;n<t;){var a,i=n++;(a=this.children[i]).set_renderTargetDirty(!0)}}return e},set_visibilityDirty:function(e){if((this.visibilityDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_visibilityDirty(!0)}return e},set_touchableDirty:function(e){if((this.touchableDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_touchableDirty(!0)}return e},set_clipDirty:function(e){if((this.clipDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_clipDirty(!0)}return e},set_renderTarget:function(e){if(this.renderTarget!=e){if(this.renderTarget=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;if((a=this.children[i]).matrixDirty=!0,null!=a.children)for(var s=0,r=a.children.length;s<r;){var l=s++;(h=a.children[l]).set_matrixDirty(!0)}}if(this.renderTargetDirty=!0,this.clipDirty=!0,null!=this.children)for(n=0,t=this.children.length;n<t;){i=n++;if((a=this.children[i]).clipDirty=!0,null!=a.children)for(s=0,r=a.children.length;s<r;){l=s++;(h=a.children[l]).set_clipDirty(!0)}}if(null!=this.children)for(n=0,t=this.children.length;n<t;){var a,i=n++;if((a=this.children[i]).renderTargetDirty=!0,a.clipDirty=!0,null!=a.children)for(s=0,r=a.children.length;s<r;){var h,l=s++;if((h=a.children[l]).clipDirty=!0,null!=h.children)for(var c=0,o=h.children.length;c<o;){var u=c++,_=h.children[u];if(_.clipDirty=!0,null!=_.children)for(var d=0,b=_.children.length;d<b;){var p=d++;_.children[p].set_clipDirty(!0)}}}if(null!=a.children)for(var f=0,O=a.children.length;f<O;){var g=f++;a.children[g].set_renderTargetDirty(!0)}}}return e},set_blending:function(e){return this.blending=e},set_visible:function(e){if(this.visible!=e&&(this.visible=e,this.visibilityDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.visibilityDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_visibilityDirty(!0)}}return e},set_touchable:function(e){if(this.touchable!=e&&(this.touchable=e,this.touchableDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.touchableDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_touchableDirty(!0)}}return e},set_depth:function(e){return this.depth!=e&&(this.depth=e,ae.app.hierarchyDirty=!0),e},set_depthRange:function(e){return this.depthRange!=e&&(this.depthRange=e,ae.app.hierarchyDirty=!0),e},set_x:function(e){if(this.x!=e&&(this.x=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},set_y:function(e){if(this.y!=e&&(this.y=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},set_scaleX:function(e){if(this.scaleX!=e){if(this.scaleX=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},set_scaleY:function(e){if(this.scaleY!=e){if(this.scaleY=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},set_skewX:function(e){if(this.skewX!=e){if(this.skewX=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},set_skewY:function(e){if(this.skewY!=e){if(this.skewY=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},set_anchorX:function(e){if(this.anchorX!=e&&(this.anchorX=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},set_anchorY:function(e){if(this.anchorY!=e&&(this.anchorY=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},get_width:function(){return this._width},set_width:function(e){if(this._width!=e&&(this._width=e,0!=this.anchorX)&&(this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},get_height:function(){return this._height},set_height:function(e){if(this._height!=e&&(this._height=e,0!=this.anchorY)&&(this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},set_roundTranslation:function(e){if(this.roundTranslation!=e&&(this.roundTranslation=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},set_rotation:function(e){if(this.rotation!=e){if(this.rotation=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},set_alpha:function(e){if(this.alpha!=e&&(this.alpha=e,this.visibilityDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.visibilityDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_visibilityDirty(!0)}}return e},get_translateX:function(){return null!=this.transform?this.transform.tx:0},set_translateX:function(e){return 0==e?null!=this.transform&&0!=this.transform.tx&&(this.transform.tx=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new j),this.transform.tx!=e&&(this.transform.tx=e,this.transform.changedDirty=!0)),e},get_translateY:function(){return null!=this.transform?this.transform.ty:0},set_translateY:function(e){return 0==e?null!=this.transform&&0!=this.transform.ty&&(this.transform.ty=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new j),this.transform.ty!=e&&(this.transform.ty=e,this.transform.changedDirty=!0)),e},set_transform:function(e){if(this.transform!=e&&(null!=this.transform&&this.transform.offChange($bind(this,this.transformDidChange)),this.transform=e,null!=this.transform&&this.transform.onChange(this,$bind(this,this.transformDidChange)),this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}return e},set_shader:function(e){return this.shader=e},flag:function(e,n){e+=16;return null!=n?(this.flags=n?this.flags|1<<e:this.flags&~(1<<e),n):(this.flags&(n=1<<e))==n},internalFlag:function(e,n){return null!=n?(this.flags=n?this.flags|1<<e:this.flags&~(1<<e),n):(this.flags&(n=1<<e))==n},get_active:function(){return 1!=(1&this.flags)},set_active:function(e){return e!=(1!=(1&this.flags))&&(this.flags=e?-2&this.flags:1|this.flags,e?(this.set_visible(2==(2&this.flags)),this.set_touchable(4==(4&this.flags))):(this.flags=this.visible?2|this.flags:-3&this.flags,this.flags=this.touchable?4|this.flags:-5&this.flags,this.set_visible(!1),this.set_touchable(!1))),e},size:function(e,n){this.set_width(e),this.set_height(n)},anchor:function(e,n){this.set_anchorX(e),this.set_anchorY(n)},pos:function(e,n){this.set_x(e),this.set_y(n)},_scale:function(e,n){this.set_scaleX(e),this.set_scaleY(n)},skew:function(e,n){this.set_skewX(e),this.set_skewY(n)},translate:function(e,n){0==e?null!=this.transform&&0!=this.transform.tx&&(this.transform.tx=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new j),this.transform.tx!=e&&(this.transform.tx=e,this.transform.changedDirty=!0)),0==n?null!=this.transform&&0!=this.transform.ty&&(this.transform.ty=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new j),this.transform.ty!=n&&(this.transform.ty=n,this.transform.changedDirty=!0))},anchorKeepPosition:function(e,n){var t,i;this.anchorX==e&&this.anchorY==n||(this.visualToScreen(0,0,m._point,!1),null!=this.parent&&this.parent.screenToVisual(m._point.x,m._point.y,m._point,!1),t=m._point.x,i=m._point.y,this.set_anchorX(e),this.set_anchorY(n),this.visualToScreen(0,0,m._point,!1),null!=this.parent&&this.parent.screenToVisual(m._point.x,m._point.y,m._point,!1),this.set_x(this.x+(t-m._point.x)),this.set_y(this.y+(i-m._point.y)))},childWithId:function(e,n){if(null==n&&(n=!0),null!=this.children){for(var t=0,i=this.children.length;t<i;){var s=t++;if((r=this.children[s]).id==e)return r}if(n)for(t=0,i=this.children.length;t<i;){var r,s=t++,l=(r=this.children[s]).childWithId(e,!0);if(null!=l)return l}}return null},childWithType:function(e,n){if(null==n&&(n=!0),null!=this.children){for(var t=0,i=this.children.length;t<i;){var s=t++,r=this.children[s];if(Ti.__instanceof(r,e))return r}if(n)for(t=0,i=this.children.length;t<i;){var s=t++,l=(r=this.children[s]).childWithType(e,!0);if(null!=l)return l}}return null},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),ae.app.screen.unobservedFocusedVisual==this&&ae.app.screen.set_focusedVisual(null),ae.app.destroyedVisuals.push(this),null!=this.parent&&this.parent.remove(this),null!=this.transform&&this.set_transform(null),this.clear(),this.visibilityDirty=!1,this.computedVisible=!1)},clear:function(){if(null!=this.children&&0<this.children.length){for(var e=this.children.length,n=w.pool(e),t=n.get(),i=0,s=e;i<s;){var r=i++;t.vector[r]=this.children[r]}for(i=0,s=e;i<s;){r=i++;t.vector[r].destroy()}this.children=null,n.release(t)}},transformDidChange:function(){if(this.matrixDirty=!0,null!=this.children)for(var e=0,n=this.children.length;e<n;){var t=e++,i=this.children[t];if(i.matrixDirty=!0,null!=i.children)for(var s=0,r=i.children.length;s<r;){var l=s++;i.children[l].set_matrixDirty(!0)}}},computeMatrix:function(){null!=this.parent&&this.parent.matrixDirty&&this.parent.computeMatrix();var e,n,t,i,s=m._matrix,r=(s.a=1,s.b=0,s.c=0,s.d=1,s.tx=0,s.ty=0,s.changedDirty=!0,this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1),this.get_width()),l=this.get_height();this.translatesOnly?(m._matrix.tx+=this.x-this.anchorX*r,m._matrix.ty+=this.y-this.anchorY*l):((s=m._matrix).tx+=-this.anchorX*r,s.ty+=-this.anchorY*l,s.changedDirty=!0,1==this.scaleX&&1==this.scaleY||(r=this.scaleX,l=this.scaleY,(s=m._matrix).a*=r,s.b*=l,s.c*=r,s.d*=l,s.tx*=r,s.ty*=l,s.changedDirty=!0),0==this.skewX&&0==this.skewY||(s=m._matrix,r=.017453292519943295*this.skewX,l=.017453292519943295*this.skewY,(e=j._tmp).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0,e=Math.cos(l),l=Math.sin(l),n=-Math.sin(r),r=Math.cos(r),j._tmp.a=+e+-0*l,j._tmp.b=0*e+ +l,j._tmp.c=n+-0*r,j._tmp.d=0*n+ +r,n=s.a*(e=j._tmp).a+s.b*e.c,s.b=s.a*e.b+s.b*e.d,s.a=n,t=s.c*e.a+s.d*e.c,s.d=s.c*e.b+s.d*e.d,s.c=t,i=s.tx*e.a+s.ty*e.c+e.tx,s.ty=s.tx*e.b+s.ty*e.d+e.ty,s.tx=i,s.changedDirty=!0),0!=this.rotation&&(s=m._matrix,l=.017453292519943295*this.rotation,r=Math.cos(l),e=Math.sin(l),n=s.a*r-s.b*e,s.b=s.a*e+s.b*r,s.a=n,t=s.c*r-s.d*e,s.d=s.c*e+s.d*r,s.c=t,i=s.tx*r-s.ty*e,s.ty=s.tx*e+s.ty*r,s.tx=i,s.changedDirty=!0),(s=m._matrix).tx+=this.x,s.ty+=this.y,s.changedDirty=!0),null!=this.transform&&(n=m._matrix.a*this.transform.a+m._matrix.b*this.transform.c,m._matrix.b=m._matrix.a*this.transform.b+m._matrix.b*this.transform.d,m._matrix.a=n,t=m._matrix.c*this.transform.a+m._matrix.d*this.transform.c,m._matrix.d=m._matrix.c*this.transform.b+m._matrix.d*this.transform.d,m._matrix.c=t,i=m._matrix.tx*this.transform.a+m._matrix.ty*this.transform.c+this.transform.tx,m._matrix.ty=m._matrix.tx*this.transform.b+m._matrix.ty*this.transform.d+this.transform.ty,m._matrix.tx=i),null!=this.parent&&null==this.renderTarget&&(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD?(m._matrix.tx+=this.parent.matTX,m._matrix.ty+=this.parent.matTY):(i=(this.translatesOnly&&null==this.transform?(m._matrix.a=this.parent.matA,m._matrix.b=this.parent.matB,m._matrix.c=this.parent.matC,m._matrix.d=this.parent.matD):(n=m._matrix.a*this.parent.matA+m._matrix.b*this.parent.matC,m._matrix.b=m._matrix.a*this.parent.matB+m._matrix.b*this.parent.matD,m._matrix.a=n,t=m._matrix.c*this.parent.matA+m._matrix.d*this.parent.matC,m._matrix.d=m._matrix.c*this.parent.matB+m._matrix.d*this.parent.matD,m._matrix.c=t),m._matrix.tx*this.parent.matA+m._matrix.ty*this.parent.matC+this.parent.matTX),m._matrix.ty=m._matrix.tx*this.parent.matB+m._matrix.ty*this.parent.matD+this.parent.matTY,m._matrix.tx=i)),this.matA=m._matrix.a,this.matB=m._matrix.b,this.matC=m._matrix.c,this.matD=m._matrix.d,this.matTX=m._matrix.tx,this.matTY=m._matrix.ty,0<this.roundTranslation&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},computeTranslatesOnly:function(){this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1},doComputeMatrix:function(){this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1);var e,n,t,i,s,r=this.get_width(),l=this.get_height();this.translatesOnly?(m._matrix.tx+=this.x-this.anchorX*r,m._matrix.ty+=this.y-this.anchorY*l):((n=m._matrix).tx+=-this.anchorX*r,n.ty+=-this.anchorY*l,n.changedDirty=!0,1==this.scaleX&&1==this.scaleY||(r=this.scaleX,l=this.scaleY,(n=m._matrix).a*=r,n.b*=l,n.c*=r,n.d*=l,n.tx*=r,n.ty*=l,n.changedDirty=!0),0==this.skewX&&0==this.skewY||(n=m._matrix,r=.017453292519943295*this.skewX,l=.017453292519943295*this.skewY,(e=j._tmp).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0,e=Math.cos(l),l=Math.sin(l),t=-Math.sin(r),r=Math.cos(r),j._tmp.a=+e+-0*l,j._tmp.b=0*e+ +l,j._tmp.c=t+-0*r,j._tmp.d=0*t+ +r,t=n.a*(e=j._tmp).a+n.b*e.c,n.b=n.a*e.b+n.b*e.d,n.a=t,i=n.c*e.a+n.d*e.c,n.d=n.c*e.b+n.d*e.d,n.c=i,s=n.tx*e.a+n.ty*e.c+e.tx,n.ty=n.tx*e.b+n.ty*e.d+e.ty,n.tx=s,n.changedDirty=!0),0!=this.rotation&&(n=m._matrix,l=.017453292519943295*this.rotation,r=Math.cos(l),e=Math.sin(l),t=n.a*r-n.b*e,n.b=n.a*e+n.b*r,n.a=t,i=n.c*r-n.d*e,n.d=n.c*e+n.d*r,n.c=i,s=n.tx*r-n.ty*e,n.ty=n.tx*e+n.ty*r,n.tx=s,n.changedDirty=!0),(n=m._matrix).tx+=this.x,n.ty+=this.y,n.changedDirty=!0),null!=this.transform&&(t=m._matrix.a*this.transform.a+m._matrix.b*this.transform.c,m._matrix.b=m._matrix.a*this.transform.b+m._matrix.b*this.transform.d,m._matrix.a=t,i=m._matrix.c*this.transform.a+m._matrix.d*this.transform.c,m._matrix.d=m._matrix.c*this.transform.b+m._matrix.d*this.transform.d,m._matrix.c=i,s=m._matrix.tx*this.transform.a+m._matrix.ty*this.transform.c+this.transform.tx,m._matrix.ty=m._matrix.tx*this.transform.b+m._matrix.ty*this.transform.d+this.transform.ty,m._matrix.tx=s),null!=this.parent&&null==this.renderTarget&&(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD?(m._matrix.tx+=this.parent.matTX,m._matrix.ty+=this.parent.matTY):(s=(this.translatesOnly&&null==this.transform?(m._matrix.a=this.parent.matA,m._matrix.b=this.parent.matB,m._matrix.c=this.parent.matC,m._matrix.d=this.parent.matD):(t=m._matrix.a*this.parent.matA+m._matrix.b*this.parent.matC,m._matrix.b=m._matrix.a*this.parent.matB+m._matrix.b*this.parent.matD,m._matrix.a=t,i=m._matrix.c*this.parent.matA+m._matrix.d*this.parent.matC,m._matrix.d=m._matrix.c*this.parent.matB+m._matrix.d*this.parent.matD,m._matrix.c=i),m._matrix.tx*this.parent.matA+m._matrix.ty*this.parent.matC+this.parent.matTX),m._matrix.ty=m._matrix.tx*this.parent.matB+m._matrix.ty*this.parent.matD+this.parent.matTY,m._matrix.tx=s)),this.matA=m._matrix.a,this.matB=m._matrix.b,this.matC=m._matrix.c,this.matD=m._matrix.d,this.matTX=m._matrix.tx,this.matTY=m._matrix.ty,0<this.roundTranslation&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},_hits:function(e,n,t){if(!t){if(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget){var i=this.parent;if(null!=i)do{if(null!=i.asQuad&&i instanceof en){var s=i;if(s.get_renderTexture()==this.computedRenderTarget&&(null==Kn.matchedHitVisual||s.hitVisual==Kn.matchedHitVisual))return s.visualInContentHits(this,e,n)}}while(null!=(i=i.parent));return!1}if(null!=Kn.matchedHitVisual&&Kn.matchedHitVisual!=this)return!1}this.matrixDirty&&this.computeMatrix();t=m._matrix;t.a=this.matA,t.b=this.matB,t.c=this.matC,t.d=this.matD,t.tx=this.matTX,t.ty=this.matTY,t.changedDirty=!0;var r,l=(t=m._matrix).a*t.d-t.b*t.c;return 0==l?(t.a=t.b=t.c=t.d=0,t.tx=-t.tx,t.ty=-t.ty):(r=t.d*(l=1/l),t.d=t.a*l,t.a=r,t.b*=-l,t.c*=-l,r=-t.a*t.tx-t.c*t.ty,t.ty=-t.b*t.tx-t.d*t.ty,t.tx=r),t.changedDirty=!0,this.hitTest(e,n,m._matrix)},hitTest:function(e,n,t){var i=e*t.a+n*t.c+t.tx,e=e*t.b+n*t.d+t.ty;return 0<=i&&i<this.get_width()&&0<=e&&e<this.get_height()},get_isHitVisual:function(){return 8==(8&this.flags)},set_isHitVisual:function(e){return this.flags=e?8|this.flags:-9&this.flags,e},interceptPointerDown:function(e,n,t,i,s){return!1},interceptPointerOver:function(e,n,t){return!1},screenToVisual:function(e,n,t,i){if(null==i&&(i=!0),this.matrixDirty&&this.computeMatrix(),i&&(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget)){var s=this.parent;if(null!=s)do{if(null!=s.asQuad&&s instanceof en){var r,l,a=s;if(a.get_renderTexture()==this.computedRenderTarget)return a.screenToVisual(e,n,t),(u=m._matrix).a=this.matA,u.b=this.matB,u.c=this.matC,u.d=this.matD,u.tx=this.matTX,u.ty=this.matTY,u.changedDirty=!0,0==(h=(a=m._matrix).a*a.d-a.b*a.c)?(a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty):(c=a.d*(h=1/h),a.d=a.a*h,a.a=c,a.b*=-h,a.c*=-h,o=-a.a*a.tx-a.c*a.ty,a.ty=-a.b*a.tx-a.d*a.ty,a.tx=o),a.changedDirty=!0,a=t.x,r=t.y,t.x=a*(l=m._matrix).a+r*l.c+l.tx,void(t.y=a*(l=m._matrix).b+r*l.d+l.ty)}}while(null!=(s=s.parent))}(u=m._matrix).a=this.matA,u.b=this.matB,u.c=this.matC,u.d=this.matD,u.tx=this.matTX,u.ty=this.matTY,u.changedDirty=!0;0==(h=(u=m._matrix).a*u.d-u.b*u.c)?(u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty):(c=u.d*(h=1/h),u.d=u.a*h,u.a=c,u.b*=-h,u.c*=-h,o=-u.a*u.tx-u.c*u.ty,u.ty=-u.b*u.tx-u.d*u.ty,u.tx=o),u.changedDirty=!0;var h,c,o,u=m._matrix,u=(t.x=e*u.a+n*u.c+u.tx,m._matrix);t.y=e*u.b+n*u.d+u.ty},visualToScreen:function(e,n,t,i){if(null==i&&(i=!0),this.matrixDirty&&this.computeMatrix(),i&&(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget)){var s=this.parent;if(null!=s)do{if(null!=s.asQuad&&s instanceof en){var r,l=s;if(l.get_renderTexture()==this.computedRenderTarget)return(a=m._matrix).a=this.matA,a.b=this.matB,a.c=this.matC,a.d=this.matD,a.tx=this.matTX,a.ty=this.matTY,a.changedDirty=!0,t.x=e*(r=m._matrix).a+n*r.c+r.tx,t.y=e*(r=m._matrix).b+n*r.d+r.ty,void l.visualToScreen(t.x,t.y,t)}}while(null!=(s=s.parent))}(a=m._matrix).a=this.matA,a.b=this.matB,a.c=this.matC,a.d=this.matD,a.tx=this.matTX,a.ty=this.matTY,a.changedDirty=!0;var a=m._matrix,a=(t.x=e*a.a+n*a.c+a.tx,m._matrix);t.y=e*a.b+n*a.d+a.ty},visualToTransform:function(e){this.matrixDirty&&this.computeMatrix(),e.a=this.matA,e.b=this.matB,e.c=this.matC,e.d=this.matD,e.tx=this.matTX,e.ty=this.matTY,e.changedDirty=!0},computeVisibility:function(){(this._lifecycleState<0||(null!=this.parent&&this.parent.visibilityDirty&&this.parent.computeVisibility(),this.computedVisible=this.visible,this.computedAlpha=this.alpha,this.computedVisible&&(null!=this.parent&&(this.parent.computedVisible||!this.parent.inheritAlpha&&this.parent.visible&&(null==this.parent.parent||this.parent.parent.computedVisible)||(this.computedVisible=!1),this.inheritAlpha)&&(this.computedAlpha*=this.parent.computedAlpha),0==this.computedAlpha)&&4!=this.blending))&&(this.computedVisible=!1),this.visibilityDirty=!1},computeClip:function(){this.renderTargetDirty&&this.computeRenderTarget(),null!=this.parent&&this.parent.clipDirty&&this.parent.computeClip(),this.computedClip=this.clip,null==this.computedClip&&null!=this.parent&&null!=this.parent.computedClip&&this.computedRenderTarget==this.parent.computedRenderTarget&&(this.computedClip=this.parent.computedClip),this.clipDirty=!1},computeTouchable:function(){null!=this.parent&&this.parent.touchableDirty&&this.parent.computeTouchable(),this.computedTouchable=this.touchable,this.computedTouchable&&null!=this.parent&&!this.parent.computedTouchable&&(this.computedTouchable=!1),this.touchableDirty=!1},computeRenderTarget:function(){null!=this.parent&&this.parent.renderTargetDirty&&this.parent.computeRenderTarget();this.computedRenderTarget;this.computedRenderTarget=this.renderTarget,null==this.computedRenderTarget&&null!=this.parent&&null!=this.parent.computedRenderTarget&&(this.computedRenderTarget=this.parent.computedRenderTarget),this.renderTargetDirty=!1},computeContent:function(){this.contentDirty=!1},autoChildrenDepth:function(e,n){null==n&&(n=1);var t=e=null==e?1:e;if(null!=this.children)for(var i=0,s=this.children.length;i<s;){var r=i++;this.children[r].set_depth(t),t+=n}},sortChildrenByDepth:function(){var e;null!=this.children&&0<this.children.length&&(e=this.children,jn.rec(e,0,e.length))},normalizeChildrenDepth:function(e,n){null==n&&(n=1),null==e&&(e=1),null!=this.children&&0<this.children.length&&(this.sortChildrenByDepth(),this.autoChildrenDepth())},hasIndirectParent:function(e){for(var n=this.parent;null!=n;){if(n==e)return!0;n=n.parent}return!1},firstParentWithClass:function(e){for(var n=this.parent;null!=n;){if(Ti.__instanceof(n,e))return n;n=n.parent}return null},add:function(e){if(e==this)throw Y.thrown("A visual cannot add itself as child!");if(null==e)throw Y.thrown("A visual cannot add a null child!");if(e._lifecycleState<0)throw Y.thrown("A visual cannot add an already destroyed child!");if(e.parent!=this){if(ae.app.hierarchyDirty=!0,null!=e.parent&&e.parent.remove(e),e.parent=this,e.visibilityDirty=!0,null!=e.children)for(var n=0,t=e.children.length;n<t;){var i=n++;if((O=e.children[i]).visibilityDirty=!0,null!=O.children)for(var s=0,r=O.children.length;s<r;){var l=s++;(g=O.children[l]).set_visibilityDirty(!0)}}if(e.matrixDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((O=e.children[i]).matrixDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){l=s++;(g=O.children[l]).set_matrixDirty(!0)}}if(e.renderTargetDirty=!0,e.clipDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((O=e.children[i]).clipDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){l=s++;(g=O.children[l]).set_clipDirty(!0)}}if(null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((O=e.children[i]).renderTargetDirty=!0,O.clipDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){l=s++;if((g=O.children[l]).clipDirty=!0,null!=g.children)for(var a=0,h=g.children.length;a<h;){var c=a++,o=g.children[c];if(o.clipDirty=!0,null!=o.children)for(var u=0,_=o.children.length;u<_;){var d=u++;o.children[d].set_clipDirty(!0)}}}if(null!=O.children)for(var b=0,p=O.children.length;b<p;){var f=b++;O.children[f].set_renderTargetDirty(!0)}}if(null==this.children&&(this.children=[]),this.children.push(e),this.clipDirty=!0,null!=this.children)for(n=0,t=this.children.length;n<t;){var O,i=n++;if((O=this.children[i]).clipDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){var g,l=s++;(g=O.children[l]).set_clipDirty(!0)}}}},addBefore:function(e,n){if(e==this)throw Y.thrown("A visual cannot add itself as child!");if(null==e)throw Y.thrown("A visual cannot add a null child!");if(e._lifecycleState<0)throw Y.thrown("A visual cannot add an already destroyed child!");if(null==n)throw Y.thrown("Reference visual cannot be null!");if(n.parent!=this)throw Y.thrown("Reference visual must be a child of this visual!");if(ae.app.hierarchyDirty=!0,e.parent==this){var t=this.children.indexOf(e);-1!=t&&this.children.splice(t,1)}else{if(null!=e.parent&&e.parent.remove(e),e.parent=this,e.visibilityDirty=!0,null!=e.children)for(var i=0,s=e.children.length;i<s;){var r=i++;if((m=e.children[r]).visibilityDirty=!0,null!=m.children)for(var l=0,a=m.children.length;l<a;){var h=l++;(w=m.children[h]).set_visibilityDirty(!0)}}if(e.matrixDirty=!0,null!=e.children)for(i=0,s=e.children.length;i<s;){r=i++;if((m=e.children[r]).matrixDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){h=l++;(w=m.children[h]).set_matrixDirty(!0)}}if(e.renderTargetDirty=!0,e.clipDirty=!0,null!=e.children)for(i=0,s=e.children.length;i<s;){r=i++;if((m=e.children[r]).clipDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){h=l++;(w=m.children[h]).set_clipDirty(!0)}}if(null!=e.children)for(i=0,s=e.children.length;i<s;){r=i++;if((m=e.children[r]).renderTargetDirty=!0,m.clipDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){h=l++;if((w=m.children[h]).clipDirty=!0,null!=w.children)for(var c=0,o=w.children.length;c<o;){var u=c++,_=w.children[u];if(_.clipDirty=!0,null!=_.children)for(var d=0,b=_.children.length;d<b;){var p=d++;_.children[p].set_clipDirty(!0)}}}if(null!=m.children)for(var f=0,O=m.children.length;f<O;){var g=f++;m.children[g].set_renderTargetDirty(!0)}}}null==this.children&&(this.children=[]);t=this.children.indexOf(n);if(-1!=t?this.children.splice(t,0,e):this.children.push(e),this.clipDirty=!0,null!=this.children)for(i=0,s=this.children.length;i<s;){var m,r=i++;if((m=this.children[r]).clipDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){var w,h=l++;(w=m.children[h]).set_clipDirty(!0)}}},addAfter:function(e,n){if(e==this)throw Y.thrown("A visual cannot add itself as child!");if(null==e)throw Y.thrown("A visual cannot add a null child!");if(e._lifecycleState<0)throw Y.thrown("A visual cannot add an already destroyed child!");if(null==n)throw Y.thrown("Reference visual cannot be null!");if(n.parent!=this)throw Y.thrown("Reference visual must be a child of this visual!");if(ae.app.hierarchyDirty=!0,e.parent==this){var t=this.children.indexOf(e);-1!=t&&this.children.splice(t,1)}else{if(null!=e.parent&&e.parent.remove(e),e.parent=this,e.visibilityDirty=!0,null!=e.children)for(var i=0,s=e.children.length;i<s;){var r=i++;if((m=e.children[r]).visibilityDirty=!0,null!=m.children)for(var l=0,a=m.children.length;l<a;){var h=l++;(w=m.children[h]).set_visibilityDirty(!0)}}if(e.matrixDirty=!0,null!=e.children)for(i=0,s=e.children.length;i<s;){r=i++;if((m=e.children[r]).matrixDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){h=l++;(w=m.children[h]).set_matrixDirty(!0)}}if(e.renderTargetDirty=!0,e.clipDirty=!0,null!=e.children)for(i=0,s=e.children.length;i<s;){r=i++;if((m=e.children[r]).clipDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){h=l++;(w=m.children[h]).set_clipDirty(!0)}}if(null!=e.children)for(i=0,s=e.children.length;i<s;){r=i++;if((m=e.children[r]).renderTargetDirty=!0,m.clipDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){h=l++;if((w=m.children[h]).clipDirty=!0,null!=w.children)for(var c=0,o=w.children.length;c<o;){var u=c++,_=w.children[u];if(_.clipDirty=!0,null!=_.children)for(var d=0,b=_.children.length;d<b;){var p=d++;_.children[p].set_clipDirty(!0)}}}if(null!=m.children)for(var f=0,O=m.children.length;f<O;){var g=f++;m.children[g].set_renderTargetDirty(!0)}}}null==this.children&&(this.children=[]);t=this.children.indexOf(n);if(-1!=t?this.children.splice(t+1,0,e):this.children.push(e),this.clipDirty=!0,null!=this.children)for(i=0,s=this.children.length;i<s;){var m,r=i++;if((m=this.children[r]).clipDirty=!0,null!=m.children)for(l=0,a=m.children.length;l<a;){var w,h=l++;(w=m.children[h]).set_clipDirty(!0)}}},remove:function(e){if(ae.app.hierarchyDirty=!0,null!=this.children){if(-1!=this.children.indexOf(e)?this.children.splice(this.children.indexOf(e),1):ae.app.logger.warning("Cannot remove visual "+L.string(e)+", index is -1",{fileName:"../../../../ceramic/runtime/src/ceramic/Visual.hx",lineNumber:3091,className:"ceramic.Visual",methodName:"remove"}),e.parent=null,e.visibilityDirty=!0,null!=e.children)for(var n=0,t=e.children.length;n<t;){var i=n++;if((O=e.children[i]).visibilityDirty=!0,null!=O.children)for(var s=0,r=O.children.length;s<r;){var l=s++;(g=O.children[l]).set_visibilityDirty(!0)}}if(e.matrixDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((O=e.children[i]).matrixDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){l=s++;(g=O.children[l]).set_matrixDirty(!0)}}if(e.renderTargetDirty=!0,e.clipDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((O=e.children[i]).clipDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){l=s++;(g=O.children[l]).set_clipDirty(!0)}}if(null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((O=e.children[i]).renderTargetDirty=!0,O.clipDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){l=s++;if((g=O.children[l]).clipDirty=!0,null!=g.children)for(var a=0,h=g.children.length;a<h;){var c=a++,o=g.children[c];if(o.clipDirty=!0,null!=o.children)for(var u=0,_=o.children.length;u<_;){var d=u++;o.children[d].set_clipDirty(!0)}}}if(null!=O.children)for(var b=0,p=O.children.length;b<p;){var f=b++;O.children[f].set_renderTargetDirty(!0)}}if(e.clipDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){var O,i=n++;if((O=e.children[i]).clipDirty=!0,null!=O.children)for(s=0,r=O.children.length;s<r;){var g,l=s++;(g=O.children[l]).set_clipDirty(!0)}}}},contains:function(e,n){null==n&&(n=!1);for(var t=e.parent;null!=t;){if(t==this)return!0;if(t=t.parent,!n)break}return!1},computeBounds:function(){if(null==this.children)this._width=0,this._height=0;else{for(var e=999999999,n=999999999,t=-999999999.9,i=-999999999.9,s=new l,r=0,a=this.children.length;r<a;){var h=r++;if((w=this.children[h]).visible)if(null!=w.asMesh){var c=w.asMesh,o=0,u=0,_=0;if(null!=c.vertices32)for(var d=c.vertices32,b=d.length;o<b;)u=d[o],_=d[o+1],w.visualToScreen(u,_,s,!1),s.x>t&&(t=s.x),s.y>i&&(i=s.y),s.x<e&&(e=s.x),s.y<n&&(n=s.y),o+=2;else for(var p=c.vertices,f=p.length;o<f;)u=p[o],_=p[o+1],w.visualToScreen(u,_,s,!1),s.x>t&&(t=s.x),s.y>i&&(i=s.y),s.x<e&&(e=s.x),s.y<n&&(n=s.y),o+=2}else w.visualToScreen(0,0,s,!1),s.x>t&&(t=s.x),s.y>i&&(i=s.y),s.x<e&&(e=s.x),s.y<n&&(n=s.y),w.visualToScreen(w.get_width(),0,s,!1),s.x>t&&(t=s.x),s.y>i&&(i=s.y),s.x<e&&(e=s.x),s.y<n&&(n=s.y),w.visualToScreen(0,w.get_height(),s,!1),s.x>t&&(t=s.x),s.y>i&&(i=s.y),s.x<e&&(e=s.x),s.y<n&&(n=s.y),w.visualToScreen(w.get_width(),w.get_height(),s,!1),s.x>t&&(t=s.x),s.y>i&&(i=s.y),s.x<e&&(e=s.x),s.y<n&&(n=s.y)}this.visualToScreen(0,0,s,!1);var O,g=s.x,m=s.y;if(this.screenToVisual(e,n,s,!1),e=s.x,n=s.y,this.screenToVisual(t,i,s,!1),(t=s.x)<e&&(O=e,e=t,t=O),(i=s.y)<n&&(O=n,n=i,i=O),this._width=t-e,this._height=i-n,this.set_anchorX(0!=this._width?-e/this._width:0),this.set_anchorY(0!=this._height?-n/this._height:0),this.screenToVisual(g,m,s,!1),this.set_x(s.x-this._width*this.anchorX),this.set_y(s.y-this._height*this.anchorY),this.matrixDirty=!0,null!=this.children)for(r=0,a=this.children.length;r<a;){var w,h=r++;if((w=this.children[h]).matrixDirty=!0,null!=w.children)for(var v=0,y=w.children.length;v<y;){o=v++;w.children[o].set_matrixDirty(!0)}}}},bindToNativeScreenSize:function(){var t=this;ae.app.screen.reverseMatrix.onChange(this,$bind(this,this._bindToNativeScreenSizeCallback)),ae.app.onPreUpdate(this,function(e){var n;t.get_width()==J.app.screenWidth&&t.get_height()==J.app.screenHeight||(n=J.app.screenHeight,t.set_width(J.app.screenWidth),t.set_height(n))}),this._bindToNativeScreenSizeCallback()},_bindToNativeScreenSizeCallback:function(){null==this.transform&&this.set_transform(new j);(e=this.transform).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0;var e=this.transform,n=J.app.screenDensity,t=J.app.screenDensity,e=(e.a*=n,e.b*=t,e.c*=n,e.d*=t,e.tx*=n,e.ty*=t,e.changedDirty=!0,this.transform),n=ae.app.screen.reverseMatrix,t=e.a*n.a+e.b*n.c,t=(e.b=e.a*n.b+e.b*n.d,e.a=t,e.c*n.a+e.d*n.c),t=(e.d=e.c*n.b+e.d*n.d,e.c=t,e.tx*n.a+e.ty*n.c+n.tx),n=(e.ty=e.tx*n.b+e.ty*n.d+n.ty,e.tx=t,e.changedDirty=!0,this.transform.changedDirty=!0,J.app.screenHeight);this.set_width(J.app.screenWidth),this.set_height(n)},bindToScreenSize:function(e){null==e&&(e=1);var n=this;ae.app.screen.onResize(this,function(){n._bindToScreenSizeCallback(e)}),this._bindToScreenSizeCallback(e)},_bindToScreenSizeCallback:function(e){var n=ae.app.screen.height*e;this.set_width(ae.app.screen.width*e),this.set_height(n)},bindToTargetSize:function(){ae.app.screen.onResize(this,$bind(this,this._bindToTargetSizeCallback)),this._bindToTargetSizeCallback()},_bindToTargetSizeCallback:function(){var e=ae.app.screen.height;this.set_width(ae.app.screen.width),this.set_height(e)},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offPointerDown(),this.offPointerUp(),this.offPointerOver(),this.offPointerOut(),this.offFocus(),this.offBlur()},__class__:m,__properties__:$extend(h.prototype.__properties__,{set_isHitVisual:"set_isHitVisual",get_isHitVisual:"get_isHitVisual",set_active:"set_active",get_active:"get_active",set_shader:"set_shader",set_transform:"set_transform",set_translateY:"set_translateY",get_translateY:"get_translateY",set_translateX:"set_translateX",get_translateX:"get_translateX",set_alpha:"set_alpha",set_rotation:"set_rotation",set_roundTranslation:"set_roundTranslation",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_anchorY:"set_anchorY",set_anchorX:"set_anchorX",set_skewY:"set_skewY",set_skewX:"set_skewX",set_scaleY:"set_scaleY",set_scaleX:"set_scaleX",set_y:"set_y",set_x:"set_x",set_depthRange:"set_depthRange",set_depth:"set_depth",set_touchable:"set_touchable",set_visible:"set_visible",set_blending:"set_blending",set_renderTarget:"set_renderTarget",set_clipDirty:"set_clipDirty",set_touchableDirty:"set_touchableDirty",set_visibilityDirty:"set_visibilityDirty",set_renderTargetDirty:"set_renderTargetDirty",set_matrixDirty:"set_matrixDirty",set_contentDirty:"set_contentDirty",set_inheritAlpha:"set_inheritAlpha",set_clip:"set_clip",get_isPointerOver:"get_isPointerOver",get_isPointerDown:"get_isPointerDown"})}),(x["ceramic.Quad"]=n).__name__="ceramic.Quad",n.__super__=m,n.prototype=$extend(m.prototype,{get_transparent:function(){return 16==(16&this.flags)},set_transparent:function(e){return this.flags=e?16|this.flags:-17&this.flags,e},set_tile:function(e){var n;return this.tile!=e&&(null==(this.tile=e)?this._texture!=(n=null)&&this._set_texture(n):(this._texture!=e.texture&&(n=e.texture,this._texture!=n)&&this._set_texture(n),this.frameX=e.frameX+e.edgeInset,this.frameY=e.frameY+e.edgeInset,n=e.frameWidth-2*e.edgeInset,this.frameWidth!=n&&-1!=(this.frameWidth=n)&&this.set_width(n),n=e.frameHeight-2*e.edgeInset,this.frameHeight!=n&&-1!=(this.frameHeight=n)&&this.set_height(n),this.set_width(e.frameWidth),this.set_height(e.frameHeight),n=e.rotateFrame,this.flags=n?32|this.flags:-33&this.flags)),e},get_texture:function(){return this._texture},set_texture:function(e){return this._texture!=e&&this._set_texture(e),e},_set_texture:function(e){var n;null!=this._texture&&(this._texture.offDestroy($bind(this,this.textureDestroyed)),null!=this._texture.asset)&&this._texture.asset.release(),null==(this._texture=e)?(this.frameX=-1,(this.frameY=-1)!=this.frameWidth&&(this.frameWidth=-1),-1!=this.frameHeight&&(this.frameHeight=-1)):(n=null!=this.tile?(this.frameX=this.tile.frameX,this.frameY=this.tile.frameY,n=this.tile.frameWidth,this.frameWidth!=n&&-1!=(this.frameWidth=n)&&this.set_width(n),this.tile.frameHeight):(this.frameX=0,this.frameY=0,n=e.width,this.frameWidth!=n&&-1!=(this.frameWidth=n)&&this.set_width(n),e.height),this.frameHeight!=n&&-1!=(this.frameHeight=n)&&this.set_height(n),e.onDestroy(this,$bind(this,this.textureDestroyed)),null!=e.asset&&e.asset.retain())},set_frameWidth:function(e){return this.frameWidth!=e&&-1!=(this.frameWidth=e)&&this.set_width(e),e},set_frameHeight:function(e){return this.frameHeight!=e&&-1!=(this.frameHeight=e)&&this.set_height(e),e},get_rotateFrame:function(){return 32==(32&this.flags)},set_rotateFrame:function(e){return this.flags=e?32|this.flags:-33&this.flags,e},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this._texture&&this._set_texture(null),this._lifecycleState=-1,m.prototype.destroy.call(this))},frame:function(e,n,t,i){this.frameX=e,this.frameY=n,this.frameWidth!=t&&-1!=(this.frameWidth=t)&&this.set_width(t),this.frameHeight!=i&&-1!=(this.frameHeight=i)&&this.set_height(i)},isRegular:function(){this.matrixDirty&&this.computeMatrix();var e=this.get_width(),n=this.get_height();return this.matC*n==0&&this.matB*e==0&&this.matC*n==0&&this.matB*e==0},computeMatrix:function(){null!=this.parent&&this.parent.matrixDirty&&this.parent.computeMatrix();var e,t,i,s,r=n._matrix,l=(r.a=1,r.b=0,r.c=0,r.d=1,r.tx=0,r.ty=0,r.changedDirty=!0,this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1),this.get_width()),a=this.get_height();this.translatesOnly?(m._matrix.tx+=this.x-this.anchorX*l,m._matrix.ty+=this.y-this.anchorY*a):((r=m._matrix).tx+=-this.anchorX*l,r.ty+=-this.anchorY*a,r.changedDirty=!0,1==this.scaleX&&1==this.scaleY||(l=this.scaleX,a=this.scaleY,(r=m._matrix).a*=l,r.b*=a,r.c*=l,r.d*=a,r.tx*=l,r.ty*=a,r.changedDirty=!0),0==this.skewX&&0==this.skewY||(r=m._matrix,l=.017453292519943295*this.skewX,a=.017453292519943295*this.skewY,(e=j._tmp).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0,e=Math.cos(a),a=Math.sin(a),t=-Math.sin(l),l=Math.cos(l),j._tmp.a=+e+-0*a,j._tmp.b=0*e+ +a,j._tmp.c=t+-0*l,j._tmp.d=0*t+ +l,t=r.a*(e=j._tmp).a+r.b*e.c,r.b=r.a*e.b+r.b*e.d,r.a=t,i=r.c*e.a+r.d*e.c,r.d=r.c*e.b+r.d*e.d,r.c=i,s=r.tx*e.a+r.ty*e.c+e.tx,r.ty=r.tx*e.b+r.ty*e.d+e.ty,r.tx=s,r.changedDirty=!0),0!=this.rotation&&(r=m._matrix,a=.017453292519943295*this.rotation,l=Math.cos(a),e=Math.sin(a),t=r.a*l-r.b*e,r.b=r.a*e+r.b*l,r.a=t,i=r.c*l-r.d*e,r.d=r.c*e+r.d*l,r.c=i,s=r.tx*l-r.ty*e,r.ty=r.tx*e+r.ty*l,r.tx=s,r.changedDirty=!0),(r=m._matrix).tx+=this.x,r.ty+=this.y,r.changedDirty=!0),null!=this.transform&&(t=m._matrix.a*this.transform.a+m._matrix.b*this.transform.c,m._matrix.b=m._matrix.a*this.transform.b+m._matrix.b*this.transform.d,m._matrix.a=t,i=m._matrix.c*this.transform.a+m._matrix.d*this.transform.c,m._matrix.d=m._matrix.c*this.transform.b+m._matrix.d*this.transform.d,m._matrix.c=i,s=m._matrix.tx*this.transform.a+m._matrix.ty*this.transform.c+this.transform.tx,m._matrix.ty=m._matrix.tx*this.transform.b+m._matrix.ty*this.transform.d+this.transform.ty,m._matrix.tx=s),null!=this.parent&&null==this.renderTarget&&(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD?(m._matrix.tx+=this.parent.matTX,m._matrix.ty+=this.parent.matTY):(s=(this.translatesOnly&&null==this.transform?(m._matrix.a=this.parent.matA,m._matrix.b=this.parent.matB,m._matrix.c=this.parent.matC,m._matrix.d=this.parent.matD):(t=m._matrix.a*this.parent.matA+m._matrix.b*this.parent.matC,m._matrix.b=m._matrix.a*this.parent.matB+m._matrix.b*this.parent.matD,m._matrix.a=t,i=m._matrix.c*this.parent.matA+m._matrix.d*this.parent.matC,m._matrix.d=m._matrix.c*this.parent.matB+m._matrix.d*this.parent.matD,m._matrix.c=i),m._matrix.tx*this.parent.matA+m._matrix.ty*this.parent.matC+this.parent.matTX),m._matrix.ty=m._matrix.tx*this.parent.matB+m._matrix.ty*this.parent.matD+this.parent.matTY,m._matrix.tx=s)),this.matA=m._matrix.a,this.matB=m._matrix.b,this.matC=m._matrix.c,this.matD=m._matrix.d,this.matTX=m._matrix.tx,this.matTY=m._matrix.ty,0<this.roundTranslation&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},textureDestroyed:function(e){null!=this._texture&&this._set_texture(null),this.set_tile(null)},__class__:n,__properties__:$extend(m.prototype.__properties__,{set_rotateFrame:"set_rotateFrame",get_rotateFrame:"get_rotateFrame",set_frameHeight:"set_frameHeight",set_frameWidth:"set_frameWidth",set_texture:"set_texture",get_texture:"get_texture",set_tile:"set_tile",set_transparent:"set_transparent",get_transparent:"get_transparent"})}),(x["ceramic.Layer"]=o).__name__="ceramic.Layer",o.__super__=n,o.prototype=$extend(n.prototype,{emitResize:function(e,n){this.willEmitResize(e,n);var t=0;if(null!=this.__cbOnResize&&(t+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(t+=this.__cbOnceResize.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnResize)for(var l=0,a=this.__cbOnResize.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnResize[h],++r):--t}if(null!=this.__cbOnceResize){for(var c=null,o=null,l=0,a=this.__cbOnceResize.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceResize[h],this.__cbOnceResize[h]=null,u=this.__cbOnceOwnerUnbindResize[h],(this.__cbOnceOwnerUnbindResize[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindResize[h]),o.push(this.__cbOnceResize[h]))}this.__cbOnceOwnerUnbindResize=c,this.__cbOnceResize=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s),s=null}this.didEmitResize(e,n)},onResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event resize because owner is destroyed!");var s=function(e){null!=t&&(i.offResize(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(t)},onceResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event resize because owner is destroyed!");var s=function(e){null!=t&&(i.offResize(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(t)},offResize:function(e){if(null!=e){var n;null!=this.__cbOnResize&&-1!=(n=this.__cbOnResize.indexOf(e))&&(this.__cbOnResize.splice(n,1),null!=(r=this.__cbOnOwnerUnbindResize[n])&&r(),this.__cbOnOwnerUnbindResize.splice(n,1)),null!=this.__cbOnceResize&&-1!=(n=this.__cbOnceResize.indexOf(e))&&(this.__cbOnceResize.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindResize[n])&&r(),this.__cbOnceOwnerUnbindResize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindResize[s])&&r()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindResize[s])&&r()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&0<this.__cbOnResize.length||null!=this.__cbOnceResize&&0<this.__cbOnceResize.length},emitResizeIfNeeded:function(){this._lifecycleState<0||!this.sizeDirty||(this.sizeDirty=!1,this.emitResize(this.get_width(),this.get_height()))},willEmitResize:function(e,n){},didEmitResize:function(e,n){},set_width:function(e){return this._width==e||(n.prototype.set_width.call(this,e),this.sizeDirty)||(this.sizeDirty=!0,ae.app._onceImmediate($bind(this,this.emitResizeIfNeeded))),e},set_height:function(e){return this._height==e||(n.prototype.set_height.call(this,e),this.sizeDirty)||(this.sizeDirty=!0,ae.app._onceImmediate($bind(this,this.emitResizeIfNeeded))),e},unbindEvents:function(){n.prototype.unbindEvents.call(this),this.offResize()},__class__:o}),(x["ceramic.Preloadable"]=p).__name__="ceramic.Preloadable",p.__isInterface__=!0,p.prototype={__class__:p},(x["tracker.Observable"]=q).__name__="tracker.Observable",q.__isInterface__=!0,(x["ceramic.Scene"]=r).__name__="ceramic.Scene",r.__interfaces__=[p,q],r.__super__=o,r.prototype=$extend(o.prototype,{emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnObservedDirty)for(var l=0,a=this.__cbOnObservedDirty.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnObservedDirty[h],++r):--t}if(null!=this.__cbOnceObservedDirty){for(var c=null,o=null,l=0,a=this.__cbOnceObservedDirty.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,u=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindObservedDirty[h]),o.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=c,this.__cbOnceObservedDirty=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(r=this.__cbOnOwnerUnbindObservedDirty[n])&&r(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindObservedDirty[n])&&r(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindObservedDirty[s])&&r()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindObservedDirty[s])&&r()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},emitReplace:function(e){var n=0;if(null!=this.__cbOnReplace&&(n+=this.__cbOnReplace.length),null!=this.__cbOnceReplace&&(n+=this.__cbOnceReplace.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnReplace)for(var r=0,l=this.__cbOnReplace.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnReplace[a],++s):--n}if(null!=this.__cbOnceReplace){for(var h=null,c=null,r=0,l=this.__cbOnceReplace.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceReplace[a],this.__cbOnceReplace[a]=null,o=this.__cbOnceOwnerUnbindReplace[a],(this.__cbOnceOwnerUnbindReplace[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindReplace[a]),c.push(this.__cbOnceReplace[a]))}this.__cbOnceOwnerUnbindReplace=h,this.__cbOnceReplace=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onReplace:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replace because owner is destroyed!");var s=function(e){null!=t&&(i.offReplace(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReplace&&(this.__cbOnOwnerUnbindReplace=[]),this.__cbOnOwnerUnbindReplace.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReplace&&(this.__cbOnOwnerUnbindReplace=[]),this.__cbOnOwnerUnbindReplace.push(null);null==this.__cbOnReplace&&(this.__cbOnReplace=[]),this.__cbOnReplace.push(t)},onceReplace:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replace because owner is destroyed!");var s=function(e){null!=t&&(i.offReplace(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReplace&&(this.__cbOnceOwnerUnbindReplace=[]),this.__cbOnceOwnerUnbindReplace.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReplace&&(this.__cbOnceOwnerUnbindReplace=[]),this.__cbOnceOwnerUnbindReplace.push(null);null==this.__cbOnceReplace&&(this.__cbOnceReplace=[]),this.__cbOnceReplace.push(t)},offReplace:function(e){if(null!=e){var n;null!=this.__cbOnReplace&&-1!=(n=this.__cbOnReplace.indexOf(e))&&(this.__cbOnReplace.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReplace[n])&&r(),this.__cbOnOwnerUnbindReplace.splice(n,1)),null!=this.__cbOnceReplace&&-1!=(n=this.__cbOnceReplace.indexOf(e))&&(this.__cbOnceReplace.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReplace[n])&&r(),this.__cbOnceOwnerUnbindReplace.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplace){for(var t=0,i=this.__cbOnOwnerUnbindReplace.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReplace[s])&&r()}this.__cbOnOwnerUnbindReplace=null}if(null!=this.__cbOnceOwnerUnbindReplace){for(t=0,i=this.__cbOnceOwnerUnbindReplace.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReplace[s])&&r()}this.__cbOnceOwnerUnbindReplace=null}this.__cbOnReplace=null,this.__cbOnceReplace=null}},listensReplace:function(){return null!=this.__cbOnReplace&&0<this.__cbOnReplace.length||null!=this.__cbOnceReplace&&0<this.__cbOnceReplace.length},get_status:function(){var e,n,t=this.unobservedStatus;return null!=se.current&&(e=se.current,null!=(n=this.statusAutoruns)||(n=se.getAutorunArray(),null!=(this.statusAutoruns=n)))&&e.bindToAutorunArray(n),t},set_status:function(e){var n=this.unobservedStatus;return n!=(this.unobservedStatus=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitStatusChange(e,n),null!=(n=this.statusAutoruns))&&(this.statusAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateStatus:function(){var e=this.unobservedStatus,e=(this.emitStatusChange(e,e),this.statusAutoruns);null!=e&&(this.statusAutoruns=null,se.invalidateAutorunArray(e))},emitStatusChange:function(e,n){var t=0;if(null!=this.__cbOnStatusChange&&(t+=this.__cbOnStatusChange.length),null!=this.__cbOnceStatusChange&&(t+=this.__cbOnceStatusChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnStatusChange)for(var l=0,a=this.__cbOnStatusChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnStatusChange[h],++r):--t}if(null!=this.__cbOnceStatusChange){for(var c=null,o=null,l=0,a=this.__cbOnceStatusChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceStatusChange[h],this.__cbOnceStatusChange[h]=null,u=this.__cbOnceOwnerUnbindStatusChange[h],(this.__cbOnceOwnerUnbindStatusChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindStatusChange[h]),o.push(this.__cbOnceStatusChange[h]))}this.__cbOnceOwnerUnbindStatusChange=c,this.__cbOnceStatusChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event statusChange because owner is destroyed!");var s=function(e){null!=t&&(i.offStatusChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(null);null==this.__cbOnStatusChange&&(this.__cbOnStatusChange=[]),this.__cbOnStatusChange.push(t)},onceStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event statusChange because owner is destroyed!");var s=function(e){null!=t&&(i.offStatusChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(null);null==this.__cbOnceStatusChange&&(this.__cbOnceStatusChange=[]),this.__cbOnceStatusChange.push(t)},offStatusChange:function(e){if(null!=e){var n;null!=this.__cbOnStatusChange&&-1!=(n=this.__cbOnStatusChange.indexOf(e))&&(this.__cbOnStatusChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindStatusChange[n])&&r(),this.__cbOnOwnerUnbindStatusChange.splice(n,1)),null!=this.__cbOnceStatusChange&&-1!=(n=this.__cbOnceStatusChange.indexOf(e))&&(this.__cbOnceStatusChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindStatusChange[n])&&r(),this.__cbOnceOwnerUnbindStatusChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStatusChange){for(var t=0,i=this.__cbOnOwnerUnbindStatusChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindStatusChange[s])&&r()}this.__cbOnOwnerUnbindStatusChange=null}if(null!=this.__cbOnceOwnerUnbindStatusChange){for(t=0,i=this.__cbOnceOwnerUnbindStatusChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindStatusChange[s])&&r()}this.__cbOnceOwnerUnbindStatusChange=null}this.__cbOnStatusChange=null,this.__cbOnceStatusChange=null}},listensStatusChange:function(){return null!=this.__cbOnStatusChange&&0<this.__cbOnStatusChange.length||null!=this.__cbOnceStatusChange&&0<this.__cbOnceStatusChange.length},get_assets:function(){var i=this;return null==this._assets&&0<=this._lifecycleState&&(this._assets=new ne,this._assets.loadMethod=1,this._assets.scheduleMethod=1,this._assets.delayBetweenXAssets=4,this._assets.onProgress(this,function(e,n,t){i._assetsProgress=e,i._assetsTotal=n}),this._assets.onceComplete(this,function(e){e||(i._assetsFailure=!0)})),this._assets},set_assets:function(e){return this._assets=e},_boot:function(){var e,n;0!=this.get_status()?(e=ae.app.logger,n=this.get_status(),e.warning("Scene already booted! (status: "+(null==n?"null":Wn.toString(n))+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:151,className:"ceramic.Scene",methodName:"_boot"})):(this.set_status(1),this.preload(),this.set_status(2),null!=this._assets&&this._assets.hasAnythingToLoad()?(this._assets.onceComplete(this,$bind(this,this._handleAssetsComplete)),this._assets.load(!1,{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:162,className:"ceramic.Scene",methodName:"_boot"})):this.load($bind(this,this.internalCreate)))},internalCreate:function(){this.set_status(3);try{this.create(),this.fadeIn($bind(this,this._fadeInDone))}catch(e){jt.lastError=e;var n=Y.caught(e).unwrap();Qe.handleUncaughtError(n)}},_fadeInDone:function(){},_handleAssetsComplete:function(e){e?ae.app._onceImmediateWithOwner(this,$bind(this,this.internalLoad)):ae.app.logger.error("Failed to load all scene assets!",{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:196,className:"ceramic.Scene",methodName:"_handleAssetsComplete"})},internalLoad:function(){this.load($bind(this,this.internalCreate))},willEmitResize:function(e,n){this.resize(e,n)},preload:function(){},load:function(e){0<=this._lifecycleState&&e()},create:function(){},ready:function(){},update:function(e){},resize:function(e,n){},_fadeIn:function(e){e()},_fadeOut:function(e){e()},fadeIn:function(e){var n=this;this.set_status(4),this._fadeIn(function(){n.set_status(5),0<=n._lifecycleState&&(n.ready(),e())})},fadeOut:function(e){var n=this;this.set_status(6),this._fadeOut(function(){n.set_status(7),0<=n._lifecycleState&&e()})},isReady:function(){switch(this.get_status()){case 0:case 1:case 2:case 3:case 4:return!1;case 5:return!0;case 6:case 7:return!1}},scheduleOnceReady:function(t,i){var s=this;if(this._lifecycleState<0)return ae.app.logger.warning("Cannot schedule callback on destroyed scene",{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:363,className:"ceramic.Scene",methodName:"scheduleOnceReady"}),!1;switch(this.get_status()){case 0:case 1:case 2:case 3:case 4:return this.onceStatusChange(t,function(e,n){s.scheduleOnceReady(t,i)}),!0;case 5:return i(),!0;case 6:case 7:var e=ae.app.logger,n=this.get_status();return e.warning("Cannot schedule callback on scene with status: "+(null==n?"null":Wn.toString(n)),{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:380,className:"ceramic.Scene",methodName:"scheduleOnceReady"}),!1}},requestPreloadUpdate:function(e){var n=1<=this._assetsTotal?this._assetsTotal:1;if(this._assetsFailure)e(this._assetsProgress,n,-1);else switch(this.get_status()){case 0:e(0,0,0);break;case 1:case 2:e(this._assetsProgress,n,1);break;case 3:e(n,n,1);break;case 4:case 5:case 6:case 7:e(n,n,2)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,le.remove(Gn.get_shared().all,this),null!=this._assets&&(this._assets.destroy(),this._assets=null),this._lifecycleState=-1,o.prototype.destroy.call(this))},unbindEvents:function(){o.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offStatusChange(),this.offReplace()},__class__:r,__properties__:$extend(o.prototype.__properties__,{set_assets:"set_assets",get_assets:"get_assets",set_status:"set_status",get_status:"get_status"})}),(x.Demo=s).__name__="Demo",s.__super__=r,s.prototype=$extend(r.prototype,{preload:function(){this.get_assets()._add(ue.CERAMIC,null,null);var e=this.get_assets(),n=Ri,t=n.__name__.split("."),i=t.pop(),s=(i=i.charAt(0).toLowerCase()+le.substr(i,1,null),0<t.length?t.join("_")+"_"+i:i),r=new zn(s,null,null),e=(r.shaderClass=n,e.addAsset(r),this.get_assets()),s=(i=(i=(t=(n=Mi).__name__.split(".")).pop()).charAt(0).toLowerCase()+le.substr(i,1,null),0<t.length?t.join("_")+"_"+i:i),e=((r=new zn(s,null,null)).shaderClass=n,e.addAsset(r),this.get_assets()),s=(i=(i=(t=(n=ki).__name__.split(".")).pop()).charAt(0).toLowerCase()+le.substr(i,1,null),0<t.length?t.join("_")+"_"+i:i);(r=new zn(s,null,null)).shaderClass=n,e.addAsset(r)},create:function(){var e=this.get_width()/2,n=this.get_height()/2;this.demoShapes(0,0,e,n,1),this.demoTint(e,0,e,n,2),this.demoTextures(0,n,e,n,3),this.demoClip(e,n,e,n,4)},demoShapes:function(e,t,s,r,i){function Hu(e){var n=(_=(_+e)%d)/d,t=.5*(Math.sin(n*Math.PI*2)+1),i=G.ease(je.QUART_EASE_IN_OUT,t),e=(b=(b+e)%p)/p,e=.5*(Math.sin(e*Math.PI*2)+1),e=G.ease(je.QUART_EASE_IN_OUT,e);a.set_rotation(360*n),h.points[0]=.1*s*i,h.points[1]=.2*r*i,h.points[2]=.1*s+.1*s*i,h.points[3]=.4*r,h.points[4]=.25*s-.1*s*i,h.points[5]=.1*r,h.points[6]=.4*s-.16*s*i,h.points[7]=.3*r-.01*r*i,h.contentDirty=!0,ae.app.visualsContentDirty=!0,c.set_angle(360*e),c.set_skewX(15+10*t),o.set_rotation(90*i-20),o.set_width(.22*s*(.5+.5*i)),o.set_height(.12*r*(.5+.5*i)),u.set_radius(s*(.1-.05*i)),u.transform.tx=s*(.04*i),u.transform.changedDirty=!0}var l=new n,i=(l.set_x(0),l.set_y(0),l.set_width(s),l.set_height(r),l.set_depth(i),l.color=6208345,this.add(l),new qn),a=(i.set_content("SHAPES"),i.set_align(Zn.CENTER),i.set_color(16777215),i.set_anchorX(.5),i.set_anchorY(.5),i.set_x(.5*s),i.set_y(.06*r),i.set_depth(100),i.set_pointSize(16),l.add(i),new n),h=(a.set_anchorX(.5),a.set_anchorY(.5),a.color=16777215,a.set_rotation(-33),a.set_width(.2*s),a.set_height(.2*r),a.set_x(.25*s),a.set_y(.3*r),a.set_depth(2),l.add(a),new Dn),c=(h.set_color(16777215),2!=h.thickness&&(h.thickness=2,h.contentDirty=!0,ae.app.visualsContentDirty=!0),h.set_depth(3),h.set_x(.1*s),h.set_y(.5*r),h.points=[],h.contentDirty=!0,ae.app.visualsContentDirty=!0,l.add(h),new De),i=(c.set_radius(0),Fe.OUTSIDE),o=(c.borderPosition!=i&&(c.borderPosition=i,c.contentDirty=!0,ae.app.visualsContentDirty=!0),c.set_thickness(.12*s),c.set_x(.75*s),c.set_y(.75*r),c.set_depth(4),c.set_color(16777215),l.add(c),new Pe),i=(16777215!=o.borderColor&&(o.borderColor=16777215,o.autoComputeColors)&&o.computeColors(),Fe.OUTSIDE),u=(o.borderPosition!=i&&(o.borderPosition=i,o.autoComputeVertices)&&o.computeVertices(),2!=o.borderSize&&(o.borderSize=2,o.autoComputeVertices)&&o.computeVertices(),o.set_anchorX(.5),o.set_anchorY(.5),o.set_width(0),o.set_height(0),o.set_x(.6*s),o.set_y(.3*r),o.set_depth(5),o.set_transform(new j),l.add(o),new De),i=Fe.OUTSIDE,_=(u.borderPosition!=i&&(u.borderPosition=i,u.contentDirty=!0,ae.app.visualsContentDirty=!0),u.set_thickness(2),u.set_angle(360),u.set_x(.8*s),u.set_y(.4*r),u.set_depth(6),u.set_color(16777215),u.set_transform(o.transform),l.add(u),0),d=5,b=0,p=.5*d;ae.app.onUpdate(this,Hu),Hu(0)},demoTint:function(e,t,i,s,r){function ev(e){var n=2*(.5+(e=(u=(u+e)%_)/_))%1,e=(a.color=A.fromHSB(360*e,1,1),A.fromHSB(360*e,1,1)),e=(Sn.setDarkColor(c,e),A.fromHSB(360*(1-n),1,1)),n=A.fromHSB(360*n,1,1);o.set_color(e),Sn.setDarkColor(o,n)}var l=new n,e=(l.set_x(e),l.set_y(t),l.set_width(i),l.set_height(s),l.set_depth(r),l.color=5992067,this.add(l),new qn),r=(e.set_content("TINT COLORS"),e.set_align(Zn.CENTER),e.set_color(16777215),e.set_anchorX(.5),e.set_anchorY(.5),e.set_x(.5*i),e.set_y(.06*s),e.set_depth(100),e.set_pointSize(16),l.add(e),.25*i),a=new n,e=this.get_assets().texture(ue.CERAMIC),h=(a._texture!=e&&a._set_texture(e),a.set_width(r),a.set_height(r),a.set_anchorX(.5),a.set_anchorY(.5),a.set_x(.25*i),a.set_y(.39*s),a.set_depth(1),l.add(a),new qn),t=(h.set_content("tint (standard)"),h.set_align(Zn.CENTER),h.set_color(16777215),h.set_anchorX(.5),h.set_anchorY(.5),a.y-.22*s),c=(h.set_x(a.x),h.set_y(t),h.set_depth(99),h.set_pointSize(14),l.add(h),new Ce),e=this.get_assets().texture(ue.CERAMIC),h=(c.texture!=e&&(null!=c.texture&&(c.texture.offDestroy($bind(c,c.textureDestroyed)),null!=c.texture.asset)&&c.texture.asset.release(),c.texture=e,null!=c.texture)&&(c.texture.onDestroy(c,$bind(c,c.textureDestroyed)),null!=c.texture.asset)&&c.texture.asset.retain(),c.set_color(16777215),c.set_shader(this.get_assets()._shaderFromClass(ki)),Sn.createQuad(c,r,r),c.set_anchorX(.5),c.set_anchorY(.5),c.set_x(.75*i),c.set_y(.39*s),c.set_depth(1),l.add(c),new qn),t=(h.set_content("tint black"),h.set_align(Zn.CENTER),h.set_color(16777215),h.set_anchorX(.5),h.set_anchorY(.5),c.y-.22*s),o=(h.set_x(c.x),h.set_y(t),h.set_depth(99),h.set_pointSize(14),l.add(h),new Ce),e=this.get_assets().texture(ue.CERAMIC),h=(o.texture!=e&&(null!=o.texture&&(o.texture.offDestroy($bind(o,o.textureDestroyed)),null!=o.texture.asset)&&o.texture.asset.release(),o.texture=e,null!=o.texture)&&(o.texture.onDestroy(o,$bind(o,o.textureDestroyed)),null!=o.texture.asset)&&o.texture.asset.retain(),o.set_color(16777215),o.set_shader(this.get_assets()._shaderFromClass(ki)),Sn.createQuad(o,r,r),o.set_anchorX(.5),o.set_anchorY(.5),o.set_x(.5*i),o.set_y(.75*s),o.set_depth(1),l.add(o),new qn),t=(h.set_content("dual tint"),h.set_align(Zn.CENTER),h.set_color(16777215),h.set_anchorX(.5),h.set_anchorY(.5),o.y-.22*s),u=(h.set_x(o.x),h.set_y(t),h.set_depth(99),h.set_pointSize(14),l.add(h),0),_=5;ae.app.onUpdate(this,ev),ev(0)},demoTextures:function(e,t,i,s,r){var l=new n,r=(l.set_x(e),l.set_y(t),l.set_width(i),l.set_height(s),l.set_depth(r),l.color=12212414,this.add(l),new qn),a=(r.set_content("TEXTURES & FILTERS"),r.set_align(Zn.CENTER),r.set_color(16777215),r.set_anchorX(.5),r.set_anchorY(.5),r.set_x(.5*i),r.set_y(.06*s),r.set_depth(100),r.set_pointSize(16),l.add(r),new n),r=this.get_assets().texture(ue.CERAMIC),t=(a._texture!=r&&a._set_texture(r),a.set_width(.2*i),a.set_height(.2*i),a.set_anchorX(.5),a.set_anchorY(.5),a.set_renderTarget(new In(.2*i|0,.2*i|0)),.5*a.renderTarget.height),h=(a.set_x(.5*a.renderTarget.width),a.set_y(t),ae.app.onUpdate(a,function(e){a.set_rotation(33*(C.sinRatio(ut.now)-.5)),a.set_scaleX(.4+.6*G.ease(je.QUAD_EASE_IN_OUT,C.sinRatio(.25*ut.now)))}),new n),r=a.renderTarget,c=(h._texture!=r&&h._set_texture(r),h.set_width(.2*i),h.set_height(.2*i),h.set_anchorX(.5),h.set_anchorY(.5),h.set_x(.28*i),h.set_y(.35*s),l.add(h),new qn),t=(c.set_content("original"),c.set_align(Zn.CENTER),c.set_color(16777215),c.set_anchorX(.5),c.set_anchorY(.5),h.y-.18*s),o=(c.set_x(h.x),c.set_y(t),c.set_depth(99),c.set_pointSize(14),l.add(c),new n),h=(o.set_anchorX(.5),o.set_anchorY(.5),o.set_depth(1),.5),c=81*(h=null==h?.5:h)+174|0,u=160*h+95|0,h=70*h+185|0,_=0,d=(o.color=((_&65535|(255<c?255:c<0?0:c)<<16)&16711935|(255<u?255:u<0?0:u)<<8)&16776960|(255<h?255:h<0?0:h),l.add(o),new n),r=a.renderTarget,t=(d._texture!=r&&d._set_texture(r),d.set_anchorX(.5),d.set_anchorY(.5),d.set_x(.72*i),d.set_y(.35*s),d.set_depth(2),l.add(d),d.y),_=(o.set_x(d.x),o.set_y(t),d.get_width()),c=d.get_height(),u=(o.set_width(_),o.set_height(c),ae.app.onUpdate(o,function(e){var n=35+25*C.cosRatio(.25*ut.now);o.set_skewX(n),d.set_skewX(n)}),new qn),t=(u.set_content("render to texture"),u.set_align(Zn.CENTER),u.set_color(16777215),u.set_anchorX(.5),u.set_anchorY(.5),d.y-.18*s),h=(u.set_x(d.x),u.set_y(t),u.set_depth(99),u.set_pointSize(14),l.add(u),new n),r=this.get_assets().texture(ue.CERAMIC),u=(h._texture!=r&&h._set_texture(r),h.set_width(.2*i),h.set_height(.2*i),h.set_anchorX(.5),h.set_anchorY(.5),new en),_=1.25*h.get_width(),c=1.25*h.get_height(),e=(u.set_width(_),u.set_height(c),u.set_x(.28*i),u.set_y(.75*s),u.set_anchorX(.5),u.set_anchorY(.5),l.add(u),.5*u.get_width()),t=.5*u.get_height(),b=(h.set_x(e),h.set_y(t),u.content.add(h),this.get_assets()._shaderFromClass(Mi)),h=(ae.app.backend.shaders,b.backendItem.uniforms.setVector2("resolution",a.renderTarget.width*a.renderTarget.density,a.renderTarget.height*a.renderTarget.density),u.set_shader(b),ae.app.onUpdate(b,function(e){var n=Math.sin(ut.now%1*Math.PI*2)+1;ae.app.backend.shaders;b.backendItem.uniforms.setVector2("blurSize",n,n)}),new qn),t=(h.set_content("blur filter"),h.set_align(Zn.CENTER),h.set_color(16777215),h.set_anchorX(.5),h.set_anchorY(.5),u.y-.18*s),p=(h.set_x(u.x),h.set_y(t),h.set_depth(99),h.set_pointSize(14),l.add(h),new n),r=this.get_assets().texture(ue.CERAMIC),u=(p._texture!=r&&p._set_texture(r),p.set_width(.2*i),p.set_height(.2*i),p.set_anchorX(.5),p.set_anchorY(.5),new en),_=1.5*p.get_width(),c=1.5*p.get_height(),e=(u.set_width(_),u.set_height(c),u.set_x(.72*i),u.set_y(.75*s),u.set_anchorX(.5),u.set_anchorY(.5),l.add(u),.5*u.get_width()),t=.5*u.get_height(),f=(p.set_x(e),p.set_y(t),u.content.add(p),this.get_assets()._shaderFromClass(Ri).clone()),h=(ae.app.backend.shaders,f.backendItem.uniforms.setVector2("resolution",a.renderTarget.width*a.renderTarget.density,a.renderTarget.height*a.renderTarget.density),u.set_shader(f),ae.app.backend.shaders,f.backendItem.uniforms.setVector3("glowColor",1,1,0),ae.app.backend.shaders,f.backendItem.uniforms.setFloat("glowIntensity",1),ae.app.backend.shaders,f.backendItem.uniforms.setFloat("glowThreshold",.5),ae.app.onUpdate(f,function(e){var n=2+3*G.ease(je.QUAD_EASE_IN_OUT,C.sinRatio(ut.now)),t=1+G.ease(je.QUAD_EASE_IN_OUT,C.cosRatio(ut.now)),i=.75+.25*C.cosRatio(ut.now);ae.app.backend.shaders,f.backendItem.uniforms.setFloat("glowSize",n),ae.app.backend.shaders;f.backendItem.uniforms.setFloat("glowIntensity",t),p.set_scaleX(i),p.set_scaleY(i)}),new qn),t=(h.set_content("glow & scale"),h.set_align(Zn.CENTER),h.set_color(16777215),h.set_anchorX(.5),h.set_anchorY(.5),u.y-.18*s);h.set_x(u.x),h.set_y(t),h.set_depth(99),h.set_pointSize(14),l.add(h)},demoClip:function(e,t,i,s,r){var l=new n,e=(l.set_x(e),l.set_y(t),l.set_width(i),l.set_height(s),l.set_depth(r),l.color=5267392,this.add(l),new qn),a=(e.set_content("POLYGON CLIPPING"),e.set_align(Zn.CENTER),e.set_color(16777215),e.set_anchorX(.5),e.set_anchorY(.5),e.set_x(.5*i),e.set_y(.06*s),e.set_depth(100),e.set_pointSize(16),l.add(e),new n),h=(a.set_width(.4*i),a.set_height(.1*i),a.set_x(.5*i),a.set_y(.5*s),a.set_rotation(33),a.set_visible(!1),l.add(a),new n),c=(h.set_width(.4*i),h.set_height(.1*i),h.set_x(.5*i),h.set_y(.5*s),h.set_rotation(33),h.set_visible(!1),l.add(h),new n),t=this.get_assets().texture(ue.CERAMIC),o=(c._texture!=t&&c._set_texture(t),c.set_width(.5*i),c.set_height(.5*i),c.set_anchorX(.5),c.set_anchorY(.5),c.set_x(.5*i),c.set_y(.5*s),c.set_depth(20),l.add(c),new n),t=this.get_assets().texture(ue.CERAMIC);if(o._texture!=t&&o._set_texture(t),o.set_width(.5*i),o.set_height(.5*i),o.set_anchorX(.5),o.set_anchorY(.5),o.set_x(.5*i),o.set_y(.5*s),o.set_depth(21),l.add(o),c.clip!=a&&(c.clip=a,c.clipDirty=!0,null!=c.children))for(var u=0,_=c.children.length;u<_;){var d=u++;if((O=c.children[d]).clipDirty=!0,null!=O.children)for(var b=0,p=O.children.length;b<p;){var f=b++;O.children[f].set_clipDirty(!0)}}if(o.clip!=h&&(o.clip=h,o.clipDirty=!0,null!=o.children))for(u=0,_=o.children.length;u<_;){var O,d=u++;if((O=o.children[d]).clipDirty=!0,null!=O.children)for(b=0,p=O.children.length;b<p;){f=b++;O.children[f].set_clipDirty(!0)}}ae.app.onUpdate(this,function(e){a.set_rotation((a.rotation+100*e)%360),h.set_rotation((h.rotation+200*e)%360)})},__class__:s});function v(e){h.call(this),e.settings.antialiasing=0,e.settings.set_background(0),e.settings.set_targetWidth(640),e.settings.set_targetHeight(480),e.settings.resizable=!0,e.settings.set_scaling(Hn.FIT),e.settings.orientation=12,e.settings.set_fullscreen(!1),e.settings.set_targetDensity(2),ae.app.onceReady(this,$bind(this,this.ready))}function y(){this.b=""}function z(){}function B(){}function D(e){this.nodeType=e,this.children=[],this.attributeMap=new te}function F(){}function H(){}function I(){this.loadedAudioRetainCount=new te,this.loadedAudioResources=new te,this.loadingAudioCallbacks=new te,this.nextSamplesBufferIndex=0}function M(){}function N(){this.clipboard=new be,this.textInput=new we,this.input=new Oe,this.screen=new ge,this.shaders=new me,this.textures=new ye,this.binaries=new de,this.texts=new ve,this.draw=new $,this.audio=new I,this.info=new fe,this.io=new pe}function O(){}function Q(){}function R(e){this.gamepadsEnabled=!0,this.gamepadGyroValues=new vn,this.gamepadAxisValues=new bn,this.gamepadPressedValues=new ke,this.gamepadButtonMapping=new ke,this.gamepadAxisToButton=new ke,this.swapXyGamepads=new ke(16,.5,!1),this.swapAbGamepads=new ke(16,.5,!1),this.removedGamepads=new ke(16,.5,!1),this.activeGamepads=new ke(16,.5,!1),this.mouseY=0,this.mouseX=0,this.mouseDownButtons=new ke(16,.5,!1),this.touchIndexes=new ke,this.touches=new ke,this.lastHeight=-1,this.lastWidth=-1,this.lastDensity=-1,this.handleReady=e,this.configureGamepadMapping()}function S(){}function U(){}function W(){}function X(){}function Z(){}function _(){}function ba(){}function ca(){}function ea(){this.id=null}function fa(){this.gpuShader=null,this.uniforms=null,this.textures=null,this.attributes=null,this.fragSource=null,this.vertSource=null,ea.call(this)}function ga(){this.isBatchingMultiTexture=!1,this.customAttributes=null,fa.call(this)}function ha(){}function ja(){}function la(){}function oa(){}function ra(){}function sa(){this.bestY=-1,this.bestX=-1,this.bestContactScore=-1,this.bestLongSideFit=-1,this.bestShortSideFit=-1,this.bestAreaFit=-1,this.bestNode=null}function ta(e,n,t){this.rect=e,this.primaryScore=n,this.secondaryScore=t}function ua(e,n,t){null==t&&(t=!0),null==n&&(n=0),null==e&&(e=0),this._bestFitPosition=new sa,this.freeRectangles=[],this.usedRectangles=[],this.binWidth=e,this.binHeight=n,this.binAllowFlip=t,t=new Ue(0,0,e,n),this.freeRectangles.push(t)}function va(e,n){this.width=e,this.height=n}function xa(){this.rects=[]}function Ea(){}function Fa(e,n,t,i){this.customExtensions=null,this.hotReload=!1,this.handleTexturesDensityChange=!1,this.unobservedStatus=Se.NONE,this.statusAutoruns=null,this.refCount=0,this.assets=null,this.density=1,this.observedDirty=!1,h.call(this),this.kind=e,this.options=null!=i?i:{},this.set_name(n),this.set_variant(t),this.computePath()}function Ma(){this.paramsAcquired=!1,this.paramsChanged=!1,this.params=[],this.active=!0,this.bus=-1,h.call(this),this.filterId=Ma._nextFilterId++,this._initDefaultParamValues()}function Na(e,n){this.params=[],this.active=!0,this.bus=-1,this.filterId=e,this.bus=n}function Pa(){}function Qa(e){null==e&&(e=.1),this.pending=[],this.stop=!1,this.runsInBackground=!1,this.checkInterval=.1,h.call(this),this.checkInterval=.1}function Ra(e,n,t,i){if(this.quadratic=!1,this.cached=!1,this.linearEasing=!1,this.cached&&this.removeFromCache(this.mX1,this.mY1,this.mX2,this.mY2),null==t||null==i?(this.quadratic=!0,this.mQuadraticX1=e,this.mQuadraticX2=t,this.mX1=Ra.TWO_THIRD*e,this.mY1=Ra.TWO_THIRD*n,this.mX2=1+Ra.TWO_THIRD*(e-1),this.mY2=1+Ra.TWO_THIRD*(n-1)):(this.quadratic=!1,this.mX1=e,this.mY1=n,this.mX2=t,this.mY2=i),this.mX1==this.mY1&&this.mX2==this.mY2)this.linearEasing=!0;else{this.linearEasing=!1,null==this.sampleValues&&(this.sampleValues=[]);for(var s=0,r=Ra.SPLINE_TABLE_SIZE;s<r;){var l=s++,a=l*Ra.SAMPLE_STEP_SIZE,h=this.mX1,c=this.mX2;this.sampleValues[l]=(((1-3*c+3*h)*a+(3*c-6*h))*a+3*h)*a}}}function Ta(e,n){if(this._preRenderingPages=null,this.preRenderedPages=null,this.pageShaders=null,this.pages=new vn(16,.5,!0),h.call(this),this.set_fontData(e),null==e)throw Y.thrown("BitmapFont: fontData is null");if(null==n)throw Y.thrown("BitmapFont: pages is null");null!=e.distanceField&&(this.pageShaders=new ei);for(var t=0,i=e.pages;t<i.length;){var s,r=i[t],l=(++t,r.file),l=(null!=e.path&&0<e.path.length&&"."!=e.path&&(l=An.join([e.path,r.file])),n.h[l]);if(null==l)throw Y.thrown("BitmapFont: missing texture for file "+r.file);l.set_filter(e.smooth||null!=e.distanceField?at.LINEAR:at.NEAREST),this.pages.set(r.id,l),null!=e.distanceField&&(s=ae.app.assets._shaderFromClass(Pi).clone(),ae.app.backend.shaders,s.backendItem.uniforms.setFloat("pxRange",e.distanceField.distanceRange),ae.app.backend.shaders,s.backendItem.uniforms.setVector2("texSize",l.width*l.density,l.height*l.density),this.pageShaders.h[r.id]=s)}}function Ua(e,n,t,i,s,r,l,a,h){this.id=e,this.x=n,this.y=t,this.width=i,this.height=s,this.xOffset=r,this.yOffset=l,this.xAdvance=a,this.page=h}function Va(e,n,t,i,s,r,l,a,h,c,o,u,_,d){this.rawFontData=null,this.needsReparsing=!1,this.aa=!0,this.smooth=!0,this.face=e,this.path=n,this.pointSize=t,this.baseSize=i,this.chars=s,this.charCount=r,this.distanceField=l,this.pages=a,this.lineHeight=h,this.kernings=c,null!=o&&(this.smooth=o),null!=u&&(this.aa=u),null!=_&&(this.needsReparsing=_),null!=d&&(this.rawFontData=d)}function Wa(e,n){this.id=e,this.file=n}function Xa(e,n){this.fieldType=e,this.distanceRange=n}function Ya(){}function b0(e,n){this.index=b0._nextIndex++,this.id=null!=e?e:"id"+b0._nextId++,this.name=n}function e0(){}function g0(){}function p0(){}function t0(){}function C0(e){null!=e&&(this.value=e)}function D0(e){this.fragmentComponents=null,this.ready=!1,this.timeline=null,this.pendingLoads=0,this.autoUpdateTimeline=!0,this.resizable=!1,this.fragmentData=null,this.fps=30,this.assets=null,o.call(this),this.assets=e,this.entities=[],this.items=[]}function H0(){}function I0(){this.glyphAdvance=-1,this.glyphY=-1,this.glyphX=-1,this.code=-1,this.line=-1,this.posInLine=-1,this.index=-1,this.glyph=null,this.char=null,n.call(this)}function cb(){}function fb(){this.tmpY=0,this.tmpX=0,this.outY=0,this.outX=0,this.bY=0,this.bX=0,this.aY=0,this.aX=0,this.miterY=0,this.miterX=0,this.tangentY=0,this.tangentX=0}function gb(){this._points=null,this._started=!1,this._lastFlip=-1,this._normalY=0,this._normalX=0,this._hasNormal=!1,this.capEndY=0,this.capEndX=0,this.miterY=0,this.miterX=0,this.tangentY=0,this.tangentX=0,this.lineBY=0,this.lineBX=0,this.lineAY=0,this.lineAX=0,this.tmpY=0,this.tmpX=0,this.canLoop=!1,this.cap=Ei.BUTT,this.join=Ai.MITER,this.thickness=1,this.miterLimit=10}function nb(){}function Bb(){this.lateUpdateOrder=0,this.earlyUpdateOrder=0,this.autoUpdate=!0,this.name=null,h.call(this),ae.app.systems.addSystem(this)}function Gb(e,n,t){this.usedTextures=null,this.textureSlots=null,this.backendItem=null,h.call(this);var i=null!=n?n:[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")];if(this.baseAttributes=[].concat(i),null!=e)for(var s=0,r=e.length;s<r;){var l=e[s++];i.push(l)}this.attributes=i,this.customAttributes=e,this.textureIdAttribute=t}function Jb(){}function Mb(e){this.pitch=1,this.pan=0,this.volume=.5,this.group=0,this.bus=0,h.call(this),this.backendItem=e}function Ub(){}function Vb(){this.asset=null,this.regions=[],this.pages=[],h.call(this)}function Wb(){this.pages=[],this.pendingRegions=[],this.filter=at.LINEAR,this.spacing=1,this.atlas=null,h.call(this)}function a1(e,n,t,i,s,r,l){null==l&&(l=0),null==r&&(r=!1),this.texture=e,this.frameX=n,this.frameY=t,this.frameWidth=i,this.frameHeight=s,this.rotateFrame=r,this.edgeInset=l}function d1(e,n,t,i,s,r){null==r&&(r=1),null==s&&(s=16),null==i&&(i=16),null==t&&(t=-1),null==n&&(n=-1),this.maxPixelTextureHeight=0,this.maxPixelTextureWidth=0,this.numRows=0,this.numCols=0,this.nextPacker=null,h.call(this),this.padWidth=i,this.padHeight=s,this.margin=r,this.maxPixelTextureWidth=n,this.maxPixelTextureHeight=t,-1==n&&(n=2048/ae.app.screen.get_texturesDensity()|0),-1==t&&(t=2048/ae.app.screen.get_texturesDensity()|0);for(var n=0|Math.min(n,2048/ae.app.screen.get_texturesDensity()),t=0|Math.min(t,2048/ae.app.screen.get_texturesDensity()),l=(this.texture=new In(n,t),e?(this.texture.autoRender=!0,this.texture.clearOnRender=!0):(this.texture.autoRender=!1,this.texture.clearOnRender=!1),this.areas=[],this.texture.width),a=this.texture.height,c=r,o=r;o+s<a;){for(;c+i<l;)this.areas.push(null),c+=i+2*r,0==this.numRows&&this.numCols++;c=0,o+=s+2*r,this.numRows++}}function g1(e,n){this.easing=je.NONE,this.index=e,this.easing=n}function h1(e,n,t){g1.call(this,n,t),this.value=e}function i1(){this.keyframeAfterIndex=-1,this.keyframeBeforeIndex=-1,this.after=null,this.before=null,this.keyframes=[],this.position=0,this.timeline=null,this.locked=!1,this.loop=!1,this.autoFitSize=!0,this.size=0,h.call(this)}function j1(){this.value=!1,i1.call(this)}function k1(e,n,t){g1.call(this,n,t),this.value=e}function l1(){this.value=16777215,i1.call(this)}function m1(){this.value=0,i1.call(this)}function n1(e,n,t){g1.call(this,n,t),this.value=e}function o1(){this.value=[],i1.call(this)}function p1(e,n,t){g1.call(this,n,t),this.value=e}function q1(){this.value=0,i1.call(this)}function E1(){}function F1(){}function G1(){}function H1(e){null==e&&(e=.05),this.pending=[],this.stop=!1,this.runsInBackground=!1,this.checkInterval=e}function N1(){}function O1(e,n,t,i,s,r,l){this.pixels=null,this.sourceBitsPerPixel=4,this.bitsPerPixel=4,this.heightActual=0,this.widthActual=0,this.height=0,this.width=0,null!=e&&(this.width=e),null!=n&&(this.height=n),null!=t&&(this.widthActual=t),null!=i&&(this.heightActual=i),null!=s&&(this.bitsPerPixel=s),null!=r&&(this.sourceBitsPerPixel=r),null!=l&&(this.pixels=l)}function T1(){}function ac(){}function bc(e,n,t,i,s,r,l,a){this.isStream=null,this.format=null,this.bitsPerSample=null,this.channels=null,this.duration=null,this.length=null,this.rate=null,(this.id=null)!=e&&(this.id=e),null!=n&&(this.rate=n),null!=t&&(this.length=t),null!=i&&(this.duration=i),null!=s&&(this.channels=s),null!=r&&(this.bitsPerSample=r),null!=l&&(this.format=l),null!=a&&(this.isStream=a)}function cc(e,n){this.destroyed=!1,this.isStream=!1,this.format=0,this.bitsPerSample=16,this.channels=1,this.duration=0,this.length=0,this.rate=44100,this.id="AudioData",this.app=e,null!=n.id&&(this.id=n.id),null!=n.rate&&(this.rate=n.rate),null!=n.length&&(this.length=n.length),null!=n.format&&(this.format=n.format),null!=n.channels&&(this.channels=n.channels),null!=n.bitsPerSample&&(this.bitsPerSample=n.bitsPerSample),null!=n.isStream&&(this.isStream=n.isStream),null!=n.duration&&(this.duration=n.duration)}function fc(e,n){this.destroyed=!1,this.source=e,this.handle=n}function ic(e){this.app=e}function jc(e){this.app=e}function kc(e){this.app=e}function lc(e){this.name=null,this.app=e}function tc(e,n){this.texture=e,this.slot=n}function yc(){}function Ac(){}function Oc(){}function Tc(){}function w2(e,n,t){this.xml=n,this.message=e,this.position=t,this.lineNumber=1;for(var i=this.positionAtLine=0,s=t;i<s;){var r=i++,r=n.charCodeAt(r);10==r?(this.lineNumber++,this.positionAtLine=0):13!=r&&this.positionAtLine++}}function z2(){}function D2(){}function G2(){}function H2(){G2.call(this)}function M2(e,n,t){Gb.call(this,e,n,t)}function N2(e,n,t){Gb.call(this,e,n,t)}function O2(e,n,t){Gb.call(this,e,n,t)}function P2(e,n,t){Gb.call(this,e,n,t)}function Q2(e,n,t){Gb.call(this,e,n,t)}function R2(e,n,t){Gb.call(this,e,n,t)}function S2(e,n,t){Gb.call(this,e,n,t)}function W2(){G2.call(this)}function Y2(){W2.call(this)}function Z2(){H2.call(this)}function _2(){W2.call(this)}function ad(){H2.call(this)}function cd(){W2.call(this)}function dd(){H2.call(this)}function fd(){W2.call(this)}function gd(){H2.call(this)}function id(){W2.call(this)}function jd(){H2.call(this)}function ld(){W2.call(this)}function md(){H2.call(this)}function nd(){}function pd(){}(x.EReg=t).__name__="EReg",t.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&0<=e&&e<this.r.m.length)return this.r.m[e];throw Y.thrown("EReg::matched")},__class__:t};var le=function(){},P=((x.HxOverrides=le).__name__="HxOverrides",le.strDate=function(e){switch(e.length){case 8:var n=e.split(":"),t=new Date;return t.setTime(0),t.setUTCHours(n[0]),t.setUTCMinutes(n[1]),t.setUTCSeconds(n[2]),t;case 10:n=e.split("-");return new Date(n[0],n[1]-1,n[2],0,0,0);case 19:t=(n=e.split(" "))[0].split("-"),n=n[1].split(":");return new Date(t[0],t[1]-1,t[2],n[0],n[1],n[2]);default:throw Y.thrown("Invalid date format : "+e)}},le.cca=function(e,n){e=e.charCodeAt(n);if(e==e)return e},le.substr=function(e,n,t){if(null==t)t=e.length;else if(t<0){if(0!=n)return"";t=e.length+t}return e.substr(n,t)},le.remove=function(e,n){n=e.indexOf(n);return-1!=n&&(e.splice(n,1),!0)},le.now=function(){return Date.now()},Math.__name__="Math",(x.Project=v).__name__="Project",v.__super__=h,v.prototype=$extend(h.prototype,{ready:function(){ae.app.get_scenes().set_main(new s)},__class__:v}),function(){}),L=((x.Reflect=P).__name__="Reflect",P.field=function(e,n){try{return e[n]}catch(e){return jt.lastError=e,null}},P.getProperty=function(e,n){var t;return null==e?null:!!e.__properties__&&(t=e.__properties__["get_"+n])?e[t]():e[n]},P.setProperty=function(e,n,t){var i,s=!!e.__properties__&&(i=e.__properties__["set_"+n]);s?e[i](t):e[n]=t},P.fields=function(e){var n=[];if(null!=e){var t,i=Object.prototype.hasOwnProperty;for(t in e)"__id__"!=t&&"hx__closures__"!=t&&i.call(e,t)&&n.push(t)}return n},P.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},P.deleteField=function(e,n){return!!Object.prototype.hasOwnProperty.call(e,n)&&(delete e[n],!0)},function(){}),ce=((x.Std=L).__name__="Std",L.string=function(e){return Ti.__string_rec(e,"")},L.parseInt=function(e){e=parseInt(e);return isNaN(e)?null:e},(x.StringBuf=y).__name__="StringBuf",y.prototype={__class__:y},(x.StringTools=z).__name__="StringTools",z.htmlEscape=function(e,n){for(var t="",i=0,s=e;i<s.length;){var r=i++,l=(e=s).charCodeAt(r),a=(l=55296<=l&&l<=56319?l-55232<<10|1023&e.charCodeAt(1+r):l,65536<=l&&++i,l);switch(a){case 34:t+=n?"&quot;":String.fromCodePoint(a);break;case 38:t+="&amp;";break;case 39:t+=n?"&#039;":String.fromCodePoint(a);break;case 60:t+="&lt;";break;case 62:t+="&gt;";break;default:t+=String.fromCodePoint(a)}}return t},z.startsWith=function(e,n){return e.length>=n.length&&0==e.lastIndexOf(n,0)},z.endsWith=function(e,n){var t=n.length,i=e.length;return t<=i&&e.indexOf(n,i-t)==i-t},z.isSpace=function(e,n){e=le.cca(e,n);return 8<e&&e<14||32==e},z.ltrim=function(e){for(var n=e.length,t=0;t<n&&z.isSpace(e,t);)++t;return 0<t?le.substr(e,t,n-t):e},z.rtrim=function(e){for(var n=e.length,t=0;t<n&&z.isSpace(e,n-t-1);)++t;return 0<t?le.substr(e,0,n-t):e},z.trim=function(e){return z.ltrim(z.rtrim(e))},z.replace=function(e,n,t){return e.split(n).join(t)},z.hex=function(e,n){for(var t="";t="0123456789ABCDEF".charAt(15&e)+t,0<(e>>>=4););if(null!=n)for(;t.length<n;)t="0"+t;return t},he.ValueType={__ename__:"ValueType",__constructs__:null,TNull:{_hx_name:"TNull",_hx_index:0,__enum__:"ValueType",toString:c},TInt:{_hx_name:"TInt",_hx_index:1,__enum__:"ValueType",toString:c},TFloat:{_hx_name:"TFloat",_hx_index:2,__enum__:"ValueType",toString:c},TBool:{_hx_name:"TBool",_hx_index:3,__enum__:"ValueType",toString:c},TObject:{_hx_name:"TObject",_hx_index:4,__enum__:"ValueType",toString:c},TFunction:{_hx_name:"TFunction",_hx_index:5,__enum__:"ValueType",toString:c},TClass:((a=function(e){return{_hx_index:6,c:e,__enum__:"ValueType",toString:c}})._hx_name="TClass",a.__params__=["c"],a),TEnum:((a=function(e){return{_hx_index:7,e:e,__enum__:"ValueType",toString:c}})._hx_name="TEnum",a.__params__=["e"],a),TUnknown:{_hx_name:"TUnknown",_hx_index:8,__enum__:"ValueType",toString:c}}),oe=(ce.__constructs__=[ce.TNull,ce.TInt,ce.TFloat,ce.TBool,ce.TObject,ce.TFunction,ce.TClass,ce.TEnum,ce.TUnknown],(x.Type=B).__name__="Type",B.createInstance=function(e,n){return new(Function.prototype.bind.apply(e,[null].concat(n)))},B.createEnum=function(e,n,t){var i=P.field(e,n);if(null==i)throw Y.thrown("No such constructor "+n);if(P.isFunction(i)){if(null==t)throw Y.thrown("Constructor "+n+" need parameters");return i.apply(e,t)}if(null!=t&&0!=t.length)throw Y.thrown("Constructor "+n+" does not need parameters");return i},B.typeof=function(e){switch(typeof e){case"boolean":return ce.TBool;case"function":return e.__name__||e.__ename__?ce.TObject:ce.TFunction;case"number":return Math.ceil(e)==e%2147483648?ce.TInt:ce.TFloat;case"object":var n;return null==e?ce.TNull:null!=(n=e.__enum__)?ce.TEnum(he[n]):null!=(n=Ti.getClass(e))?ce.TClass(n):ce.TObject;case"string":return ce.TClass(String);case"undefined":return ce.TNull;default:return ce.TUnknown}},B.enumParameters=function(e){var n=he[e.__enum__].__constructs__[e._hx_index].__params__;if(null==n)return[];for(var t=[],i=0;i<n.length;){var s=n[i];++i,t.push(e[s])}return t},{}),ne=(oe.toString=function(e){switch(e){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}},(x.Xml=D).__name__="Xml",D.parse=function(e){return Ci.parse(e)},D.createElement=function(e){var n=new D(D.Element);if(n.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":oe.toString(n.nodeType)));return n.nodeName=e,n},D.createPCData=function(e){var n=new D(D.PCData);if(n.nodeType==D.Document||n.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":oe.toString(n.nodeType)));return n.nodeValue=e,n},D.createCData=function(e){var n=new D(D.CData);if(n.nodeType==D.Document||n.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":oe.toString(n.nodeType)));return n.nodeValue=e,n},D.createComment=function(e){var n=new D(D.Comment);if(n.nodeType==D.Document||n.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":oe.toString(n.nodeType)));return n.nodeValue=e,n},D.createDocType=function(e){var n=new D(D.DocType);if(n.nodeType==D.Document||n.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":oe.toString(n.nodeType)));return n.nodeValue=e,n},D.createProcessingInstruction=function(e){var n=new D(D.ProcessingInstruction);if(n.nodeType==D.Document||n.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":oe.toString(n.nodeType)));return n.nodeValue=e,n},D.createDocument=function(){return new D(D.Document)},D.prototype={get:function(e){if(this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));return this.attributeMap.h[e]},set:function(e,n){if(this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));this.attributeMap.h[e]=n},exists:function(e){if(this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,e)},attributes:function(){if(this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));return new si(this.attributeMap.h)},elements:function(){if(this.nodeType!=D.Document&&this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));for(var e=[],n=0,t=this.children;n<t.length;){var i=t[n];++n,i.nodeType==D.Element&&e.push(i)}return new ui(e)},elementsNamed:function(e){if(this.nodeType!=D.Document&&this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));for(var n=[],t=0,i=this.children;t<i.length;){var s,r=i[t];if(++t,r.nodeType==D.Element){if(r.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==r.nodeType?"null":oe.toString(r.nodeType)));s=r.nodeName==e}else s=!1;s&&n.push(r)}return new ui(n)},firstElement:function(){if(this.nodeType!=D.Document&&this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));for(var e=0,n=this.children;e<n.length;){var t=n[e];if(++e,t.nodeType==D.Element)return t}return null},addChild:function(e){if(this.nodeType!=D.Document&&this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));null!=e.parent&&e.parent.removeChild(e),this.children.push(e),e.parent=this},removeChild:function(e){if(this.nodeType!=D.Document&&this.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":oe.toString(this.nodeType)));return!!le.remove(this.children,e)&&!(e.parent=null)},toString:function(){return Di.print(this)},__class__:D},function(){this.hotReload=!1,this.pendingAtlasPackers=null,this.atlasPacker=null,this.parent=null,this.reloadOnTextureDensityChange=!0,this.delayBetweenXAssets=-1,this.scheduleMethod=1,this.loadMethod=2,this.defaultImageOptions=null,this.runtimeAssets=null,this.immediate=new an,this.assetsByKindAndName=new te,this.addedAssets=[],h.call(this),ne.instances.push(this)}),ue=((x["ceramic.Assets"]=ne).__name__="ceramic.Assets",ne.flushAllInstancesImmediate=function(){for(var e=ne.instances.length,n=0,t=e;n<t;){var i=n++;ne._instances[i]=ne.instances[i]}for(n=0,t=e;n<t;){var i=n++,s=ne._instances[i];ne._instances[i]=null,0<=s._lifecycleState&&s.immediate.flush()}},ne.decodePath=function(e){return new Te(e)},ne.addAssetKind=function(e,n,t,i,s){var r=ne.customAssetKinds,n=new Ye(e,n,t,i,s);r.h[e]=n},ne.getAssetsPath=function(){return Rn.getAssetsPath()},ne.assetNameFromPath=function(e){for(var n=ne.allByName.h,t=Object.keys(n),i=t.length,s=0;s<i;)for(var r=t[s++],l=ne.allByName.h[r],a=0,h=l.length;a<h;)if(l[a++]==e)return r;return null},ne.realAssetPath=function(e,n){return null!=n?null!=n.path?An.join([n.path,e]):e:e},ne.incrementReloadCount=function(e){e=An.normalize(e),null==ne.reloadCountByRealAssetPath&&(ne.reloadCountByRealAssetPath=new te),Object.prototype.hasOwnProperty.call(ne.reloadCountByRealAssetPath.h,e)?ne.reloadCountByRealAssetPath.h[e]+=1:ne.reloadCountByRealAssetPath.h[e]=1},ne.getReloadCount=function(e){return e=An.normalize(e),null!=ne.reloadCountByRealAssetPath&&Object.prototype.hasOwnProperty.call(ne.reloadCountByRealAssetPath.h,e)?ne.reloadCountByRealAssetPath.h[e]:0},ne.__super__=h,ne.prototype=$extend(h.prototype,{emitComplete:function(e){var n=0;if(null!=this.__cbOnComplete&&(n+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(n+=this.__cbOnceComplete.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnComplete)for(var r=0,l=this.__cbOnComplete.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnComplete[a],++s):--n}if(null!=this.__cbOnceComplete){for(var h=null,c=null,r=0,l=this.__cbOnceComplete.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceComplete[a],this.__cbOnceComplete[a]=null,o=this.__cbOnceOwnerUnbindComplete[a],(this.__cbOnceOwnerUnbindComplete[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindComplete[a]),c.push(this.__cbOnceComplete[a]))}this.__cbOnceOwnerUnbindComplete=h,this.__cbOnceComplete=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event complete because owner is destroyed!");var s=function(e){null!=t&&(i.offComplete(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(t)},onceComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event complete because owner is destroyed!");var s=function(e){null!=t&&(i.offComplete(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(t)},offComplete:function(e){if(null!=e){var n;null!=this.__cbOnComplete&&-1!=(n=this.__cbOnComplete.indexOf(e))&&(this.__cbOnComplete.splice(n,1),null!=(r=this.__cbOnOwnerUnbindComplete[n])&&r(),this.__cbOnOwnerUnbindComplete.splice(n,1)),null!=this.__cbOnceComplete&&-1!=(n=this.__cbOnceComplete.indexOf(e))&&(this.__cbOnceComplete.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindComplete[n])&&r(),this.__cbOnceOwnerUnbindComplete.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindComplete[s])&&r()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindComplete[s])&&r()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&0<this.__cbOnComplete.length||null!=this.__cbOnceComplete&&0<this.__cbOnceComplete.length},emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnUpdate)for(var r=0,l=this.__cbOnUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnUpdate[a],++s):--n}if(null!=this.__cbOnceUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,o=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),c.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindUpdate[n])&&r(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindUpdate[n])&&r(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindUpdate[s])&&r()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindUpdate[s])&&r()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},emitProgress:function(e,n,t){var i=0;if(null!=this.__cbOnProgress&&(i+=this.__cbOnProgress.length),null!=this.__cbOnceProgress&&(i+=this.__cbOnceProgress.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnProgress)for(var a=0,h=this.__cbOnProgress.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnProgress[c],++l):--i}if(null!=this.__cbOnceProgress){for(var o=null,u=null,a=0,h=this.__cbOnceProgress.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceProgress[c],this.__cbOnceProgress[c]=null,_=this.__cbOnceOwnerUnbindProgress[c],(this.__cbOnceOwnerUnbindProgress[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindProgress[c]),u.push(this.__cbOnceProgress[c]))}this.__cbOnceOwnerUnbindProgress=o,this.__cbOnceProgress=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onProgress:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event progress because owner is destroyed!");var s=function(e){null!=t&&(i.offProgress(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindProgress&&(this.__cbOnOwnerUnbindProgress=[]),this.__cbOnOwnerUnbindProgress.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindProgress&&(this.__cbOnOwnerUnbindProgress=[]),this.__cbOnOwnerUnbindProgress.push(null);null==this.__cbOnProgress&&(this.__cbOnProgress=[]),this.__cbOnProgress.push(t)},onceProgress:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event progress because owner is destroyed!");var s=function(e){null!=t&&(i.offProgress(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindProgress&&(this.__cbOnceOwnerUnbindProgress=[]),this.__cbOnceOwnerUnbindProgress.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindProgress&&(this.__cbOnceOwnerUnbindProgress=[]),this.__cbOnceOwnerUnbindProgress.push(null);null==this.__cbOnceProgress&&(this.__cbOnceProgress=[]),this.__cbOnceProgress.push(t)},offProgress:function(e){if(null!=e){var n;null!=this.__cbOnProgress&&-1!=(n=this.__cbOnProgress.indexOf(e))&&(this.__cbOnProgress.splice(n,1),null!=(r=this.__cbOnOwnerUnbindProgress[n])&&r(),this.__cbOnOwnerUnbindProgress.splice(n,1)),null!=this.__cbOnceProgress&&-1!=(n=this.__cbOnceProgress.indexOf(e))&&(this.__cbOnceProgress.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindProgress[n])&&r(),this.__cbOnceOwnerUnbindProgress.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindProgress){for(var t=0,i=this.__cbOnOwnerUnbindProgress.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindProgress[s])&&r()}this.__cbOnOwnerUnbindProgress=null}if(null!=this.__cbOnceOwnerUnbindProgress){for(t=0,i=this.__cbOnceOwnerUnbindProgress.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindProgress[s])&&r()}this.__cbOnceOwnerUnbindProgress=null}this.__cbOnProgress=null,this.__cbOnceProgress=null}},listensProgress:function(){return null!=this.__cbOnProgress&&0<this.__cbOnProgress.length||null!=this.__cbOnceProgress&&0<this.__cbOnceProgress.length},emitAssetFilesChange:function(e,n){var t=0;if(null!=this.__cbOnAssetFilesChange&&(t+=this.__cbOnAssetFilesChange.length),null!=this.__cbOnceAssetFilesChange&&(t+=this.__cbOnceAssetFilesChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnAssetFilesChange)for(var l=0,a=this.__cbOnAssetFilesChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnAssetFilesChange[h],++r):--t}if(null!=this.__cbOnceAssetFilesChange){for(var c=null,o=null,l=0,a=this.__cbOnceAssetFilesChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceAssetFilesChange[h],this.__cbOnceAssetFilesChange[h]=null,u=this.__cbOnceOwnerUnbindAssetFilesChange[h],(this.__cbOnceOwnerUnbindAssetFilesChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindAssetFilesChange[h]),o.push(this.__cbOnceAssetFilesChange[h]))}this.__cbOnceOwnerUnbindAssetFilesChange=c,this.__cbOnceAssetFilesChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onAssetFilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event assetFilesChange because owner is destroyed!");var s=function(e){null!=t&&(i.offAssetFilesChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindAssetFilesChange&&(this.__cbOnOwnerUnbindAssetFilesChange=[]),this.__cbOnOwnerUnbindAssetFilesChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindAssetFilesChange&&(this.__cbOnOwnerUnbindAssetFilesChange=[]),this.__cbOnOwnerUnbindAssetFilesChange.push(null);null==this.__cbOnAssetFilesChange&&(this.__cbOnAssetFilesChange=[]),this.__cbOnAssetFilesChange.push(t)},onceAssetFilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event assetFilesChange because owner is destroyed!");var s=function(e){null!=t&&(i.offAssetFilesChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindAssetFilesChange&&(this.__cbOnceOwnerUnbindAssetFilesChange=[]),this.__cbOnceOwnerUnbindAssetFilesChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindAssetFilesChange&&(this.__cbOnceOwnerUnbindAssetFilesChange=[]),this.__cbOnceOwnerUnbindAssetFilesChange.push(null);null==this.__cbOnceAssetFilesChange&&(this.__cbOnceAssetFilesChange=[]),this.__cbOnceAssetFilesChange.push(t)},offAssetFilesChange:function(e){if(null!=e){var n;null!=this.__cbOnAssetFilesChange&&-1!=(n=this.__cbOnAssetFilesChange.indexOf(e))&&(this.__cbOnAssetFilesChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindAssetFilesChange[n])&&r(),this.__cbOnOwnerUnbindAssetFilesChange.splice(n,1)),null!=this.__cbOnceAssetFilesChange&&-1!=(n=this.__cbOnceAssetFilesChange.indexOf(e))&&(this.__cbOnceAssetFilesChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindAssetFilesChange[n])&&r(),this.__cbOnceOwnerUnbindAssetFilesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindAssetFilesChange){for(var t=0,i=this.__cbOnOwnerUnbindAssetFilesChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindAssetFilesChange[s])&&r()}this.__cbOnOwnerUnbindAssetFilesChange=null}if(null!=this.__cbOnceOwnerUnbindAssetFilesChange){for(t=0,i=this.__cbOnceOwnerUnbindAssetFilesChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindAssetFilesChange[s])&&r()}this.__cbOnceOwnerUnbindAssetFilesChange=null}this.__cbOnAssetFilesChange=null,this.__cbOnceAssetFilesChange=null}},listensAssetFilesChange:function(){return null!=this.__cbOnAssetFilesChange&&0<this.__cbOnAssetFilesChange.length||null!=this.__cbOnceAssetFilesChange&&0<this.__cbOnceAssetFilesChange.length},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),le.remove(ne.instances,this);for(var e,n=0,t=[].concat(this.addedAssets);n<t.length;){var i=t[n];++n,i.offDestroy($bind(this,this.assetDestroyed)),i.destroy()}if(this.addedAssets=null,(this.assetsByKindAndName=null)!=this.atlasPacker&&(e=this.atlasPacker,this.atlasPacker=null,e.destroy()),null!=this.pendingAtlasPackers)for(var s=this.pendingAtlasPackers,n=(this.pendingAtlasPackers=null,0),t=s.length;n<t;)s[n++].destroy()}},flush:function(){for(var e=0,n=[].concat(this.addedAssets);e<n.length;){var t=n[e];++e,0==t.refCount&&t.destroy()}},hasAsset:function(e){return-1!=this.addedAssets.indexOf(e)},_add:function(e,n,t){var i="string"==typeof e?e:P.field(e,"_id"),s=i.indexOf(":");if(-1==s)throw Y.thrown("Assets: invalid asset id: "+e);var r=le.substr(i,0,s),l=le.substr(i,s+1,null);switch(r){case"atlas":this.addAtlas(l,n,t);break;case"binary":this.addBinary(l,n,t);break;case"database":this.addDatabase(l,n,t);break;case"font":this.addFont(l,n,t);break;case"fragments":this.addFragments(l,n,t);break;case"image":this.addImage(l,n,t);break;case"shader":this.addShader(l,n,t);break;case"sound":this.addSound(l,n,t);break;case"text":this.addText(l,n,t);break;default:if(!Object.prototype.hasOwnProperty.call(ne.customAssetKinds.h,r))throw Y.thrown("Assets: invalid asset kind ("+r+") for id: "+e);ne.customAssetKinds.h[r].add(this,l,n,t)}},addAll:function(e){ae.app.backend.info;for(var n,t,i=["png","jpg","jpeg"],s=["txt","json","fnt","atlas"],r=(null!=fe._soundExtensions||(fe._soundExtensions=[],O=new Audio,d=null!=re.navigator?re.navigator.userAgent:"",t=fe.RE_OPERA.match(d)&&parseInt(fe.RE_OPERA.matched(0).split("/")[1],10)<33,n=-1!=d.indexOf("Safari")&&-1==d.indexOf("Chrome"),d=fe.RE_SAFARI_VERSION.match(d),n&&d&&parseInt(fe.RE_SAFARI_VERSION.matched(1),10),null!=(n=O.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=n&&""!=n&&fe._soundExtensions.push("ogg"),d=O.canPlayType("audio/mpeg;"),n=O.canPlayType("audio/mp3;"),!t&&(null!=d&&"no"!=d&&""!=d||null!=n&&"no"!=n&&""!=n)&&fe._soundExtensions.push("mp3"),t=O.canPlayType("audio/x-flac;"),d=O.canPlayType("audio/flac;"),(null!=t&&"no"!=t&&""!=t||null!=d&&"no"!=d&&""!=d)&&fe._soundExtensions.push("flac"),n=O.canPlayType('audio/wav; codecs="1"'),t=O.canPlayType("audio/wav;"),(null!=n&&"no"!=n&&""!=n||null!=t&&"no"!=t&&""!=t)&&fe._soundExtensions.push("wav")),[].concat(fe._soundExtensions)),l=["frag","vert"],a=["fnt","ttf","otf"],h=["atlas"],c=["csv"],o=["fragments"],u=[],_=[],d=ne.customAssetKinds.h,k=d,b=Object.keys(d),B=b.length,p=0;p<B;){var f=k[b[p++]];u.push(f.extensions),_.push(f.add)}for(var O=ne.allByName,N=d=(O=null!=this.runtimeAssets?this.runtimeAssets.getLists().allByName:O).h,g=Object.keys(d),L=g.length,m=0;m<L;){var w=g[m++],v=w,y=N[w];if(null!=e){for(var U=!1,x=0,W=y.length;x<W;){var G=x++;if(e.match(y[G])){U=!0;break}}if(!U)continue}for(var C=An.extension(y[0]),D=!1,T=0,K=i.length;T<K;)if(i[T++]==C){this.addImage(v),D=!0;break}if(!D)for(var S=0,H=r.length;S<H;)if(r[S++]==C){this.addSound(v),D=!0;break}if(!D)for(var E=0,V=l.length;E<V;)if(l[E++]==C){this.addShader(v),D=!0;break}if(!D)for(var A=0,z=a.length;A<z;)if(a[A++]==C){this.addFont(v),D=!0;break}if(!D)for(var M=0,Y=h.length;M<Y;)if(h[M++]==C){this.addAtlas(v),D=!0;break}if(!D)for(var R=0,X=c.length;R<X;)if(c[R++]==C){this.addDatabase(v),D=!0;break}if(!D)for(var P=0,j=o.length;P<j;)if(o[P++]==C){this.addFragments(v),D=!0;break}if(!D)for(var F=0,Q=u.length;F<Q;){for(var I=F++,$=u[I],q=0,Z=$.length;q<Z;)if($[q++]==C){(0,_[I])(this,null,v,null),D=!0;break}if(D)break}if(!D)for(var J=0,ee=s.length;J<ee;)if(s[J++]==C){this.addText(v),D=!0;break}}},addImage:function(e,n,t){z.startsWith(e,"image:")&&(e=le.substr(e,6,null)),this.addAsset(new ln(e,n,t))},addFont:function(e,n,t){z.startsWith(e,"font:")&&(e=le.substr(e,5,null)),this.addAsset(new nn(e,n,t))},addAtlas:function(e,n,t){z.startsWith(e,"atlas:")&&(e=le.substr(e,6,null)),this.addAsset(new Ee(e,n,t))},addText:function(e,n,t){z.startsWith(e,"text:")&&(e=le.substr(e,5,null)),this.addAsset(new Jn(e,n,t))},addBinary:function(e,n,t){z.startsWith(e,"binary:")&&(e=le.substr(e,7,null)),this.addAsset(new Re(e,n,t))},addSound:function(e,n,t){z.startsWith(e,"sound:")&&(e=le.substr(e,6,null)),this.addAsset(new Qn(e,n,t))},addDatabase:function(e,n,t){z.startsWith(e,"database:")&&(e=le.substr(e,9,null)),this.addAsset(new Xe(e,n,t))},addFragments:function(e,n,t){z.startsWith(e,"fragments:")&&(e=le.substr(e,10,null)),this.addAsset(new tn(e,n,t))},addShader:function(e,n,t){z.startsWith(e,"shader:")&&(e=le.substr(e,7,null)),this.addAsset(new zn(e,n,t))},addAsset:function(e){Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,e.kind)||(t=this.assetsByKindAndName,i=e.kind,n=new te,t.h[i]=n);var n,t=this.assetsByKindAndName.h[e.kind],i=(e instanceof ln&&(e.defaultImageOptions=this.defaultImageOptions),t.h[e.fullName]);if(null!=i){if(i==e)return ae.app.logger.warning("Cannot add asset "+L.string(e)+" because it is already added for name: "+e.fullName+".",{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:540,className:"ceramic.Assets",methodName:"addAsset"}),i;ae.app.logger.info("Replace "+L.string(i)+" with "+L.string(e),{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:537,className:"ceramic.Assets",methodName:"addAsset"}),this.removeAsset(i)}return e.onDestroy(this,$bind(this,this.assetDestroyed)),null!=(t.h[e.fullName]=e).owner&&e.owner!=this&&e.owner.removeAsset(e),this.addedAssets.push(e),e.owner=this,e.set_runtimeAssets(this.runtimeAssets),e.set_hotReload(this.hotReload),i},assetDestroyed:function(e){for(var n=null,t=0,i=this.addedAssets;t<i.length;){var s=i[t];++t,s._lifecycleState<0&&(n=null==n?[]:n).push(s)}if(null!=n)for(t=0;t<n.length;){s=n[t];++t,this.removeAsset(s)}},imageAsset:function(e,n){return this.asset(e,"image",n)},fontAsset:function(e,n){return this.asset(e,"font",n)},atlasAsset:function(e,n){return this.asset(e,"atlas",n)},textAsset:function(e,n){return this.asset(e,"text",n)},soundAsset:function(e,n){return this.asset(e,"sound",n)},databaseAsset:function(e,n){return this.asset(e,"database",n)},fragmentsAsset:function(e,n){return this.asset(e,"fragments",n)},asset:function(e,n,t){var i="string"==typeof e?e:P.field(e,"_id"),s=i.indexOf(":"),r=i;return-1!=s&&(r=i.substring(s+1),n=i.substring(0,s)),null!=t&&(r+=":"+t),null==n||null==(i=this.assetsByKindAndName.h[n])||null==(s=i.h[r])?null!=this.parent?this.parent.asset(e,n,t):null:s},removeAsset:function(e){e.offDestroy($bind(this,this.assetDestroyed));var n=this.assetsByKindAndName.h[e.kind],t=n.h[e.fullName];if(e!=t)throw Y.thrown("Cannot remove asset "+L.string(e)+" if it was not added at the first place (existing: "+L.string(t)+").");le.remove(this.addedAssets,e);t=e.fullName;Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t],e.owner=null},moveAll:function(e){for(var n=[].concat(this.addedAssets),t=0,i=n.length;t<i;){var s=n[t++];this.removeAsset(s),e.addAsset(s)}},hasAnythingToLoad:function(){for(var e=0,n=this.addedAssets.length;e<n;){var t=e++;if(this.addedAssets[t].get_status()==Se.NONE)return!0}return!1},countAssetsWithStatus:function(e){for(var n=0,t=(this.addedAssets,0),i=this.addedAssets.length;t<i;){var s=t++;this.addedAssets[s].get_status()==e&&++n}return n},load:function(e,t){null==e&&(e=!0);for(var i=this,s=0,r=0,l=!0,n=[].concat(this.addedAssets),a=0;a<n.length;){var h=[n[a]];++a,h[0].get_status()==Se.NONE&&(h[0].onceComplete(this,function(n){return function(e){e||(l=!1,ae.app.logger.error("Failed to load asset "+n[0].name+" ("+L.string(n[0])+")",t)),--r,i.emitProgress(s-r,s,l),0==r&&i._prepareComplete(l)}}(h)),r+=1,s+=1)}if(0<r){if(2==this.scheduleMethod){for(var c=[],a=0;a<n.length;){var o=n[a];++a,o.get_status()==Se.NONE&&c.push(o)}this._loadNextSerial(c,0)}else if(0<this.delayBetweenXAssets){for(c=[],a=0;a<n.length;){o=n[a];++a,o.get_status()==Se.NONE&&c.push(o)}this._loadNextParallel(c,0)}else for(a=0;a<n.length;){o=n[a];++a,o.get_status()==Se.NONE&&o.load()}this.immediate.flush()}else e&&ae.app.logger.warning("There was no asset to load.",t),this._prepareComplete(!0)},_prepareComplete:function(e){var n=this;null!=this.pendingAtlasPackers&&0<this.pendingAtlasPackers.length?this._packNextAtlasPacker(function(){n._prepareComplete(e)}):this.emitComplete(!0)},_packNextAtlasPacker:function(n){this.pendingAtlasPackers.shift().pack(function(e){n()})},addPendingAtlasPacker:function(e){null==this.pendingAtlasPackers&&(this.pendingAtlasPackers=[]),-1==this.pendingAtlasPackers.indexOf(e)&&this.pendingAtlasPackers.push(e)},_loadNextSerial:function(n,t){var i=this,e=n.shift();e.get_status()==Se.NONE?(e.load(),e.onceComplete(this,function(e){i._assetCompleteSerial(e,n,t)})):0<n.length&&this._loadNextSerial(n,t)},_assetCompleteSerial:function(e,n,t){var i=this;t+=1,0<n.length&&(0<this.delayBetweenXAssets&&0<t&&t%this.delayBetweenXAssets==0?ae.app.onceXUpdates(this,2,function(){i._loadNextSerial(n,t)}):this._loadNextSerial(n,t))},_loadNextParallel:function(e,n){var t=this;0<e.length&&(1<(n+=1)&&n%this.delayBetweenXAssets==0?ae.app.onceXUpdates(this,2,function(){e.shift().load(),t._loadNextParallel(e,n)}):(e.shift().load(),this._loadNextParallel(e,n)))},ensure:function(e,n,t,i){var s=this.asset(e,null,n),r=null;null==(r=null==s?(this._add(e,n,t),this.asset(e,null,n)):s)?i(null):r.get_status()==Se.READY?i(r):r.get_status()==Se.LOADING||r.get_status()==Se.NONE?(r.onceComplete(null,function(e){i(e?r:null)}),r.get_status()==Se.NONE&&this.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:941,className:"ceramic.Assets",methodName:"ensure"})):i(null)},ensureImage:function(e,n,t,i){z.startsWith(e,"image:")||(e="image:"+e),this.ensure(e,n,t,function(e){i(e instanceof ln?e:null)})},ensureFont:function(e,n,t,i){z.startsWith(e,"font:")||(e="font:"+e),this.ensure(e,n,t,function(e){i(e instanceof nn?e:null)})},ensureAtlas:function(e,n,t,i){z.startsWith(e,"atlas:")||(e="atlas:"+e),this.ensure(e,n,t,function(e){i(e instanceof Ee?e:null)})},ensureText:function(e,n,t,i){z.startsWith(e,"text:")||(e="text:"+e),this.ensure(e,n,t,function(e){i(e instanceof Jn?e:null)})},ensureSound:function(e,n,t,i){z.startsWith(e,"sound:")||(e="sound:"+e),this.ensure(e,n,t,function(e){i(e instanceof Qn?e:null)})},ensureDatabase:function(e,n,t,i){z.startsWith(e,"database:")||(e="database:"+e),this.ensure(e,n,t,function(e){i(e instanceof Xe?e:null)})},texture:function(e,n){var t=e;return z.startsWith(t,"image:")&&(t=le.substr(t,6,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"image")||null==(t=this.assetsByKindAndName.h.image.h[t])?null!=this.parent?this.parent.texture(e,n):null:t.get_texture()},font:function(e,n){var t=e;return z.startsWith(t,"font:")&&(t=le.substr(t,5,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"font")||null==(t=this.assetsByKindAndName.h.font.h[t])?null!=this.parent?this.parent.font(e,n):null:t.get_font()},atlas:function(e,n){var t=e;return z.startsWith(t,"atlas:")&&(t=le.substr(t,6,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"atlas")||null==(t=this.assetsByKindAndName.h.atlas.h[t])?null!=this.parent?this.parent.atlas(e,n):null:t.get_atlas()},sound:function(e,n){var t=e;return z.startsWith(t,"sound:")&&(t=le.substr(t,6,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"sound")||null==(t=this.assetsByKindAndName.h.sound.h[t])?null!=this.parent?this.parent.sound(e,n):null:t.get_sound()},text:function(e,n){var t=e;return z.startsWith(t,"text:")&&(t=le.substr(t,5,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"text")||null==(t=this.assetsByKindAndName.h.text.h[t])?null!=this.parent?this.parent.text(e,n):null:t.get_text()},bytes:function(e,n){var t=e;return z.startsWith(t,"binary:")&&(t=le.substr(t,7,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"binary")||null==(t=this.assetsByKindAndName.h.binary.h[t])?null!=this.parent?this.parent.bytes(e,n):null:t.get_bytes()},_shaderFromClass:function(e){var e=e.__name__.split("."),n=(n=e.pop()).charAt(0).toLowerCase()+le.substr(n,1,null),e=0<e.length?e.join("_")+"_"+n:n;return this._shader("shader:"+e,null)},_shader:function(e,n){var t=e;return z.startsWith(t,"shader:")&&(t=le.substr(t,7,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"shader")||null==(t=this.assetsByKindAndName.h.shader.h[t])?null!=this.parent?this.parent._shader(e,n):null:t.get_shader()},database:function(e,n){var t=e;return z.startsWith(t,"database:")&&(t=le.substr(t,9,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"database")||null==(t=this.assetsByKindAndName.h.database.h[t])?null!=this.parent?this.parent.database(e,n):null:t.get_database()},fragments:function(e,n){var t=e;return z.startsWith(t,"fragments:")&&(t=le.substr(t,10,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"fragments")||null==(t=this.assetsByKindAndName.h.fragments.h[t])?null!=this.parent?this.parent.fragments(e,n):null:t.get_fragments()},iterator:function(){for(var e=[],n=this.assetsByKindAndName.h,t=n,i=Object.keys(n),s=i.length,r=0;r<s;)for(var l=n=t[i[r++]].h,a=Object.keys(n),h=a.length,c=0;c<h;){var o=l[a[c++]];e.push(o)}return new ui(e)},set_hotReload:function(e){if(this.hotReload!=e){this.hotReload=e;for(var n=0,t=this.addedAssets;n<t.length;){var i=t[n];++n,i.set_hotReload(e)}}return e},watchDirectory:function(d,e){null==e&&(e=!0);var b=this;if(null!=this.runtimeAssets)throw Y.thrown("There is already an instance of RuntimeAssets assigned. Cannot watch a directory, which also need its own instance");if(null==d)throw Y.thrown("Cannot watch directory when using web target! (unless using electron runner and `ceramic_use_electron` define)");null==this.defaultImageOptions&&(this.defaultImageOptions={}),this.defaultImageOptions.premultiplyAlpha=!0,e&&this.set_hotReload(e),this.runtimeAssets=Ln.fromPath(d);var n=new Ot;return n.watchDirectory(d),n.onDirectoryChange(this,function(e,n,t){if(null==b.runtimeAssets?ae.app.logger.warning("Missing instance of RuntimeAssets when watched directory changed (path: "+d+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:1307,className:"ceramic.Assets",methodName:"watchDirectory"}):b.runtimeAssets.reset(Je.getFlatDirectory(d),d),null==ne.lastModifiedByRealAssetPath){ne.lastModifiedByRealAssetPath=new te;for(var i=c=t.h,s=(o=Object.keys(c)).length,r=0;r<s;){var l=_=o[r++],a=i[_],h=ne.realAssetPath(l,b.runtimeAssets);ne.lastModifiedByRealAssetPath.h[h]=a}}for(var c,o,u=new te,i=c=n.h,s=(o=Object.keys(c)).length,r=0;r<s;){var _,l=_=o[r++],a=i[_],h=ne.realAssetPath(l,b.runtimeAssets);u.h[h]=a,Object.prototype.hasOwnProperty.call(ne.lastModifiedByRealAssetPath.h,h)&&a!=ne.lastModifiedByRealAssetPath.h[h]&&ne.incrementReloadCount(h)}ne.lastModifiedByRealAssetPath=u,b.emitAssetFilesChange(n,t)}),this.onDestroy(n,function(e){n.destroy()}),n},inheritRuntimeAssetsFromAssets:function(e){this.runtimeAssets=e.runtimeAssets,this.defaultImageOptions=e.defaultImageOptions},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offComplete(),this.offUpdate(),this.offProgress(),this.offAssetFilesChange()},__class__:ne,__properties__:$extend(h.prototype.__properties__,{set_hotReload:"set_hotReload"})}),(x["assets.AllAssets"]=F).__name__="assets.AllAssets",F.bind=function(){ne.all=F.all,ne.allDirs=F.allDirs,ne.allDirsByName=F.allDirsByName,ne.allByName=F.allByName},function(){}),_e=((x["assets.Images"]=ue).__name__="assets.Images",(x["spec.Audio"]=H).__name__="spec.Audio",H.__isInterface__=!0,H.prototype={__class__:H},(x["backend.Audio"]=I).__name__="backend.Audio",I.__interfaces__=[H],I._clayFilterCreate=function(e,n){var t;if(t=I.activeBusFilters.length>e&&null!=(t=I.activeBusFilters[e])&&t,I.activeBusFilters[e]=!0,!t&&I.busFilterReadyCallbacks.length>e&&0<I.busFilterReadyCallbacks[e].length){for(var i=[];0<I.busFilterReadyCallbacks[e].length;)i.push(I.busFilterReadyCallbacks[e].shift());I._notifyCallbacksInMainThread(i)}},I._notifyCallbacksInMainThread=function(i){Nn.runInMain(function(){for(var e=0,n=i.length;e<n;){var t=e++;(0,i[t])()}})},I._clayFilterDestroy=function(e,n){I.activeBusFilters[e]=!1},I.prototype={load:function(c,e,n){function nI(e){function wI(){n(e),n=null}null!=r?r.push(wI):ae.app._onceImmediate(wI)}var t,i,o=this,s=null!=e&&2==e.loadMethod,r=null!=e?e.immediate:null,e=null!=e&&1==e.stream,l=z.startsWith(c,"http://")||z.startsWith(c,"https://");An.isAbsolute(c)||l||(c=An.join([ae.app.settings.assetsPath,c])),Object.prototype.hasOwnProperty.call(this.loadedAudioResources.h,c)?(this.loadedAudioRetainCount.h[c]+=1,t=this.loadedAudioResources.h[c],nI(t)):Object.prototype.hasOwnProperty.call(this.loadingAudioCallbacks.h,c)?this.loadingAudioCallbacks.h[c].push(function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(o.loadedAudioRetainCount.h,c)?o.loadedAudioRetainCount.h[c]:0,o.loadedAudioRetainCount.h[c]=n+1),nI(e)}):(t=c,l||-1!=(i=t.indexOf("?"))&&(t=le.substr(t,0,i)),this.loadingAudioCallbacks.h[c]=[function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(o.loadedAudioRetainCount.h,c)?o.loadedAudioRetainCount.h[c]:0,o.loadedAudioRetainCount.h[c]=n+1),nI(e)}],i=l?t:J.app.assets.fullPath(t),J.app.audio.loadData(i,e,null,!s,function(e){if(null==e)for(var n=o.loadingAudioCallbacks.h[c],t=o.loadingAudioCallbacks,i=(Object.prototype.hasOwnProperty.call(t.h,c)&&delete t.h[c],0);i<n.length;){var s=n[i];++i;try{s(null)}catch(e){jt.lastError=e;s=[Y.caught(e).unwrap()];ae.app._onceImmediate(function(e){return function(){throw Y.thrown(e[0])}}(s))}}else for(var r=new Tt(J.app,e),l=(o.loadedAudioResources.h[c]=r,o.loadingAudioCallbacks.h[c]),t=o.loadingAudioCallbacks,a=(Object.prototype.hasOwnProperty.call(t.h,c)&&delete t.h[c],0);a<l.length;){var h=l[a];++a,h(r)}}),null!=r?r.push(yt.flush):ae.app._onceImmediate(yt.flush))},createFromSamplesBuffer:function(e,n,t,i,s){var r="samples:"+this.nextSamplesBufferIndex++,e=J.app.audio.dataFromPCM(r,e,n,t,i,s);return null!=e?(n=new Tt(J.app,e),this.loadedAudioResources.h[r]=n,this.loadedAudioRetainCount.h[r]=1,n):null},getDuration:function(e){return e.getDuration()},resumeAudioContext:function(e){var n=J.app.audio;if(null!=n)try{n.context.resume().then(function(){e(!0)},function(){e(!1)})}catch(e){jt.lastError=e;n=Y.caught(e).unwrap();ae.app.logger.error("Failed to resume audio context: "+L.string(n),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:242,className:"backend.Audio",methodName:"resumeAudioContext"})}},supportsHotReloadPath:function(){return!0},destroy:function(e){for(var n=null,t=this.loadedAudioResources.h,i=t,s=Object.keys(t),r=s.length,l=0;l<r;){var a=s[l++];i[a]==e&&(n=a)}null==n?ae.app.logger.error("Failed to destroy audio resource: "+L.string(e)+" because id could not be resolved",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:284,className:"backend.Audio",methodName:"destroy"}):1<this.loadedAudioRetainCount.h[n]?--this.loadedAudioRetainCount.h[n]:(t=this.loadedAudioResources,Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],t=this.loadedAudioRetainCount,Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],e.destroy())},mute:function(e){return-1},play:function(e,n,t,i,s,r,l){var a;return null==l&&(l=0),null==s&&(s=0),null==i&&(i=1),null==t&&(t=0),null==n&&(n=.5),J.app.audio.active?((e=e).data.isStream&&(i=1,t=s=0),a=(r=(a=null)==r?!1:r)?J.app.audio.loop(e,n,!1,l):J.app.audio.play(e,n,!1,l),0!=t&&J.app.audio.pan(a,t),1!=i&&J.app.audio.pitch(a,i),0!=s&&J.app.audio.position(a,s),a):-1},pause:function(e){J.app.audio.active&&null!=e&&-1!=e&&J.app.audio.pause(e)},resume:function(e){J.app.audio.active&&null!=e&&-1!=e&&J.app.audio.unPause(e)},stop:function(e){J.app.audio.active&&null!=e&&-1!=e&&null!=e&&-1!=e&&J.app.audio.stop(e)},getVolume:function(e){return!J.app.audio.active||null==e||-1==e?0:J.app.audio.volumeOf(e)},setVolume:function(e,n){J.app.audio.active&&null!=e&&-1!=e&&J.app.audio.volume(e,n)},getPan:function(e){return!J.app.audio.active||null==e||-1==e?0:J.app.audio.panOf(e)},setPan:function(e,n){var t;!J.app.audio.active||null==e||-1==e||null!=(t=J.app.audio.instanceOf(e))&&t.source.data.isStream||J.app.audio.pan(e,n)},getPitch:function(e){return!J.app.audio.active||null==e||-1==e?1:J.app.audio.pitchOf(e)},setPitch:function(e,n){var t;!J.app.audio.active||null==e||-1==e||null!=(t=J.app.audio.instanceOf(e))&&t.source.data.isStream||J.app.audio.pitch(e,n)},getPosition:function(e){return!J.app.audio.active||null==e||-1==e?0:J.app.audio.positionOf(e)},setPosition:function(e,n){var t;!J.app.audio.active||null==e||-1==e||null!=(t=J.app.audio.instanceOf(e))&&t.source.data.isStream||J.app.audio.position(e,n)},addFilter:function(e,n,t){var i=new ft(function(){t(e)}),s=i.callback(),i=i.callback(),r=!1,l=I.filterIdsByBus[e],a=(null==l&&(I.filterIdsByBus[e]=l=[],r=!0),n.workletClass()),h=(l.push(new _e(n.filterId,null,null,a,n)),function(){J.app.audio.addBusFilterWorklet(e,n.filterId,a,function(){s()})});r&&J.app.audio.createBusFilter("audio-worklets.min.js",e,function(e,n){I._clayFilterCreate(e,n),null!=h&&(e=h,h=null,e())},I._clayFilterDestroy),I.activeBusFilters.length>e&&null!=(l=I.activeBusFilters[e])&&l?i():(null==I.busFilterReadyCallbacks[e]&&(I.busFilterReadyCallbacks[e]=[]),I.busFilterReadyCallbacks[e].push(i))},removeFilter:function(e,n){var t=I.filterIdsByBus[e];if(null!=t){for(var i=-1,s=0,r=t.length;s<r;){var l=s++,a=t[l];if(a.id==n){i=l,0;break}}-1!=i&&t.splice(i,1)}J.app.audio.destroyBusFilterWorklet(e,n)},filterParamsChanged:function(e,n){var t=I.filterIdsByBus[e];if(null!=t)for(var i=0,s=0,r=t.length;s<r;){var l=t[s++],a=l.filter;if(l.id==n){for(var h=0,c=a.numParams();h<c;){var o=h++;J.app.audio.setWorkletParameterByIndexWhenReady(e,i,a.params[o]),++i}break}i+=a.numParams()}},__class__:I},function(e,n,t,i,s){this.worklet=null,this.paramsDirty=!0,this.id=e,null!=n&&(this.paramsDirty=n),null!=t&&(this.worklet=t),this.workletClass=i,this.filter=s}),de=((x["backend.AudioFilterInfo"]=_e).__name__="backend.AudioFilterInfo",_e.prototype={__class__:_e},(x["spec.Backend"]=M).__name__="spec.Backend",M.__isInterface__=!0,M.prototype={__class__:M},(x["backend.Backend"]=N).__name__="backend.Backend",N.__interfaces__=[M,g],N.prototype={init:function(e){},setTargetFps:function(e){J.app.config.updateRate=0<e?1/e:0},emitReady:function(){var e=0;if(null!=this.__cbOnReady&&(e+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(e+=this.__cbOnceReady.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReady)for(var s=0,r=this.__cbOnReady.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnReady[l],++i):--e}if(null!=this.__cbOnceReady){for(var a=null,h=null,s=0,r=this.__cbOnceReady.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceReady[l],this.__cbOnceReady[l]=null,c=this.__cbOnceOwnerUnbindReady[l],(this.__cbOnceOwnerUnbindReady[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReady[l]),h.push(this.__cbOnceReady[l]))}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReady[n])&&r(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReady[n])&&r(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReady[s])&&r()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReady[s])&&r()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnUpdate)for(var r=0,l=this.__cbOnUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnUpdate[a],++s):--n}if(null!=this.__cbOnceUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,o=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),c.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindUpdate[n])&&r(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindUpdate[n])&&r(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindUpdate[s])&&r()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindUpdate[s])&&r()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},emitRender:function(){var e=0;if(null!=this.__cbOnRender&&(e+=this.__cbOnRender.length),null!=this.__cbOnceRender&&(e+=this.__cbOnceRender.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnRender)for(var s=0,r=this.__cbOnRender.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnRender[l],++i):--e}if(null!=this.__cbOnceRender){for(var a=null,h=null,s=0,r=this.__cbOnceRender.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceRender[l],this.__cbOnceRender[l]=null,c=this.__cbOnceOwnerUnbindRender[l],(this.__cbOnceOwnerUnbindRender[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindRender[l]),h.push(this.__cbOnceRender[l]))}this.__cbOnceOwnerUnbindRender=a,this.__cbOnceRender=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onRender:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event render because owner is destroyed!");var s=function(e){null!=t&&(i.offRender(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindRender&&(this.__cbOnOwnerUnbindRender=[]),this.__cbOnOwnerUnbindRender.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindRender&&(this.__cbOnOwnerUnbindRender=[]),this.__cbOnOwnerUnbindRender.push(null);null==this.__cbOnRender&&(this.__cbOnRender=[]),this.__cbOnRender.push(t)},onceRender:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event render because owner is destroyed!");var s=function(e){null!=t&&(i.offRender(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindRender&&(this.__cbOnceOwnerUnbindRender=[]),this.__cbOnceOwnerUnbindRender.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindRender&&(this.__cbOnceOwnerUnbindRender=[]),this.__cbOnceOwnerUnbindRender.push(null);null==this.__cbOnceRender&&(this.__cbOnceRender=[]),this.__cbOnceRender.push(t)},offRender:function(e){if(null!=e){var n;null!=this.__cbOnRender&&-1!=(n=this.__cbOnRender.indexOf(e))&&(this.__cbOnRender.splice(n,1),null!=(r=this.__cbOnOwnerUnbindRender[n])&&r(),this.__cbOnOwnerUnbindRender.splice(n,1)),null!=this.__cbOnceRender&&-1!=(n=this.__cbOnceRender.indexOf(e))&&(this.__cbOnceRender.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindRender[n])&&r(),this.__cbOnceOwnerUnbindRender.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindRender){for(var t=0,i=this.__cbOnOwnerUnbindRender.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindRender[s])&&r()}this.__cbOnOwnerUnbindRender=null}if(null!=this.__cbOnceOwnerUnbindRender){for(t=0,i=this.__cbOnceOwnerUnbindRender.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindRender[s])&&r()}this.__cbOnceOwnerUnbindRender=null}this.__cbOnRender=null,this.__cbOnceRender=null}},listensRender:function(){return null!=this.__cbOnRender&&0<this.__cbOnRender.length||null!=this.__cbOnceRender&&0<this.__cbOnceRender.length},canRender:function(){return!0},unbindEvents:function(){this.offReady(),this.offUpdate(),this.offRender()},__class__:N},(x["spec.Binaries"]=O).__name__="spec.Binaries",O.__isInterface__=!0,O.prototype={__class__:O},function(){this.loadingBinaryCallbacks=new te}),be=((x["backend.Binaries"]=de).__name__="backend.Binaries",de.__interfaces__=[O],de.prototype={load:function(l,e,n){function CM(e){function IM(){n(e),n=null}null!=s?s.push(IM):ae.app._onceImmediate(IM)}var t,i,a=this,s=null!=e?e.immediate:null,e=z.startsWith(l,"http://")||z.startsWith(l,"https://");An.isAbsolute(l)||e||(l=An.join([ae.app.settings.assetsPath,l])),Object.prototype.hasOwnProperty.call(this.loadingBinaryCallbacks.h,l)?this.loadingBinaryCallbacks.h[l].push(function(e){CM(e)}):(this.loadingBinaryCallbacks.h[l]=[],t=l,e||-1!=(i=t.indexOf("?"))&&(t=le.substr(t,0,i)),i=e?t:J.app.assets.fullPath(t),J.app.io.loadData(i,!0,null,function(e){if(null==e)if(null!=(s=a.loadingBinaryCallbacks.h[l]))for(var n=a.loadingBinaryCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,l)&&delete n.h[l],CM(null),0);t<s.length;){var i=s[t];++t,i(null)}else CM(null);else{var s,r=new hi(new Uint8Array(e.buffer));if(null!=(s=a.loadingBinaryCallbacks.h[l]))for(n=a.loadingBinaryCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,l)&&delete n.h[l],CM(r),0);t<s.length;){i=s[t];++t,i(r)}else CM(r)}}),null!=s?s.push(yt.flush):ae.app._onceImmediate(yt.flush))},supportsHotReloadPath:function(){return!0},__class__:de},(x["clay.Events"]=Q).__name__="clay.Events",Q.prototype={ready:function(){},tick:function(e){},render:function(){},freeze:function(){},unfreeze:function(){},keyDown:function(e,n,t,i,s,r){},keyUp:function(e,n,t,i,s,r){},text:function(e,n,t,i,s,r){},mouseMove:function(e,n,t,i,s,r){},mouseDown:function(e,n,t,i,s){},mouseUp:function(e,n,t,i,s){},mouseWheel:function(e,n,t,i){},touchDown:function(e,n,t,i,s,r){},touchUp:function(e,n,t,i,s,r){},touchMove:function(e,n,t,i,s,r){},gamepadAxis:function(e,n,t,i){},gamepadDown:function(e,n,t,i){},gamepadUp:function(e,n,t,i){},gamepadGyro:function(e,n,t,i,s){},gamepadDevice:function(e,n,t,i){},windowEvent:function(e,n,t,i,s){},appEvent:function(e){},audioEvent:function(e,n){},__class__:Q},(x["backend.ClayEvents"]=R).__name__="backend.ClayEvents",R.__super__=Q,R.prototype=$extend(Q.prototype,{configureGamepadMapping:function(){},ready:function(){this.backend=ae.app.backend,this.lastDensity=J.app.screenDensity,this.lastWidth=J.app.screenWidth,this.lastHeight=J.app.screenHeight,this.handleReady(),this.backend.emitReady()},tick:function(e){this.triggerResizeIfNeeded(),this.backend.emitUpdate(e)},render:function(){this.backend.emitRender()},triggerResizeIfNeeded:function(){var e=J.app.screenDensity,n=J.app.screenWidth,t=J.app.screenHeight;this.lastDensity==e&&this.lastWidth==n&&this.lastHeight==t||(this.lastDensity=e,this.lastWidth=n,this.lastHeight=t,this.backend.screen.emitResize())},appEvent:function(e){switch(e){case 0:break;case 11:ae.app.emitTerminate();break;case 12:ae.app.emitLowMemory();break;case 13:ae.app.emitBeginEnterBackground();break;case 14:ae.app.emitFinishEnterBackground();break;case 15:ae.app.emitBeginEnterForeground();break;case 16:ae.app.emitFinishEnterForeground()}},mouseDown:function(e,n,t,i,s){this.mouseDownButtons.intMap.h.hasOwnProperty(0|t)&&this.mouseUp(e,n,t,i,s),this.mouseX=e/J.app.screenDensity,this.mouseY=n/J.app.screenDensity,this.mouseDownButtons.set(t,1),this.backend.screen.emitMouseDown(t,this.mouseX,this.mouseY)},mouseUp:function(e,n,t,i,s){this.mouseDownButtons.intMap.h.hasOwnProperty(0|t)&&(this.mouseX=e/J.app.screenDensity,this.mouseY=n/J.app.screenDensity,this.mouseDownButtons.remove(t),this.backend.screen.emitMouseUp(t,this.mouseX,this.mouseY))},mouseMove:function(e,n,t,i,s,r){this.mouseX=e/J.app.screenDensity,this.mouseY=n/J.app.screenDensity,this.backend.screen.emitMouseMove(this.mouseX,this.mouseY)},mouseWheel:function(e,n,t,i){this.backend.screen.emitMouseWheel(e,n)},touchDown:function(e,n,t,i,s,r){for(var l=0;this.touchIndexes.intMap.h.hasOwnProperty(0|l);)++l;this.touches.set(s,l),this.touchIndexes.set(l,s),this.backend.screen.emitTouchDown(l,e*this.lastWidth,n*this.lastHeight)},touchUp:function(e,n,t,i,s,r){this.touches.intMap.h.hasOwnProperty(0|s)||this.touchDown(e,n,t,i,s,r);t=this.touches.intMap.h[0|s],i=null!=t?t:0;this.backend.screen.emitTouchUp(i,e*this.lastWidth,n*this.lastHeight),this.touches.remove(s),this.touchIndexes.remove(i)},touchMove:function(e,n,t,i,s,r){this.touches.intMap.h.hasOwnProperty(0|s)||this.touchDown(e,n,t,i,s,r);t=this.touches.intMap.h[0|s];this.backend.screen.emitTouchMove(null!=t?t:0,e*this.lastWidth,n*this.lastHeight)},keyDown:function(e,n,t,i,s,r){this.backend.input.emitKeyDown(new Cn(e,n)),this.backend.textInput.handleKeyDown(e,n)},keyUp:function(e,n,t,i,s,r){this.backend.input.emitKeyUp(new Cn(e,n)),this.backend.textInput.handleKeyUp(e,n)},_configureGamepad:function(e,n){null!=n&&(-1!=(n=n.toLowerCase()).indexOf(" vendor: 057e ")||z.startsWith(n,"057e-")||-1!=n.indexOf("retroid pocket controller"))?(this.swapAbGamepads.set(e,1),this.swapXyGamepads.set(e,1)):(this.swapAbGamepads.set(e,0),this.swapXyGamepads.set(e,0))},gamepadAxis:function(e,n,t,i){var s,r;this.gamepadsEnabled&&(this.activeGamepads.intMap.h.hasOwnProperty(0|e)||this.removedGamepads.intMap.h.hasOwnProperty(0|e)||(this.activeGamepads.set(e,1),s=J.app.runtime.getGamepadName(e),this._configureGamepad(e,s),this.backend.input.emitGamepadEnable(e,s)),this.gamepadAxisToButton.intMap.h.hasOwnProperty(0|n)&&(s=null!=(r=this.gamepadAxisToButton.intMap.h[0|n])?r:0,.5<=t?1!=(null!=(r=this.gamepadPressedValues.intMap.h[32*e+s|0])?r:0)&&(this.gamepadPressedValues.set(32*e+s,1),this.backend.input.emitGamepadDown(e,s)):1==(null!=(r=this.gamepadPressedValues.intMap.h[32*e+s|0])?r:0)&&(this.gamepadPressedValues.set(32*e+s,0),this.backend.input.emitGamepadUp(e,s))),s=null!=(r=this.gamepadAxisValues.intMap.h[32*e+n|0])?r:0,r=Math.round(100*t)/100,.01<Math.abs(s-r))&&(this.gamepadAxisValues.set(32*e+n,r),this.backend.input.emitGamepadAxis(e,n,r))},gamepadDown:function(e,n,t,i){if(this.gamepadsEnabled){if(!this.activeGamepads.intMap.h.hasOwnProperty(0|e)&&!this.removedGamepads.intMap.h.hasOwnProperty(0|e)){this.activeGamepads.set(e,1);for(var s=0;s<32;){var r=s++;this.gamepadPressedValues.set(32*e+r,0)}var l=J.app.runtime.getGamepadName(e);this._configureGamepad(e,l),this.backend.input.emitGamepadEnable(e,l)}0!=(n=this.gamepadButtonMapping.intMap.h.hasOwnProperty(0|n)?null!=(t=this.gamepadButtonMapping.intMap.h[0|n])?t:0:n)&&1!=n||0!=(null!=(t=this.swapAbGamepads.intMap.h[0|e])?t:0)&&(n=1==n?0:1),2!=n&&3!=n||0!=(null!=(t=this.swapXyGamepads.intMap.h[0|e])?t:0)&&(n=2==n?3:2),1!=(null!=(t=this.gamepadPressedValues.intMap.h[32*e+n|0])?t:0)&&(this.gamepadPressedValues.set(32*e+n,1),this.backend.input.emitGamepadDown(e,n))}},gamepadUp:function(e,n,t,i){if(this.gamepadsEnabled){if(!this.activeGamepads.intMap.h.hasOwnProperty(0|e)&&!this.removedGamepads.intMap.h.hasOwnProperty(0|e)){this.activeGamepads.set(e,1);for(var s=0;s<32;){var r=s++;this.gamepadPressedValues.set(32*e+r,0)}var l=J.app.runtime.getGamepadName(e);this._configureGamepad(e,l),this.backend.input.emitGamepadEnable(e,l)}0!=(n=this.gamepadButtonMapping.intMap.h.hasOwnProperty(0|n)?null!=(t=this.gamepadButtonMapping.intMap.h[0|n])?t:0:n)&&1!=n||0!=(null!=(t=this.swapAbGamepads.intMap.h[0|e])?t:0)&&(n=1==n?0:1),2!=n&&3!=n||0!=(null!=(t=this.swapXyGamepads.intMap.h[0|e])?t:0)&&(n=2==n?3:2),1==(null!=(t=this.gamepadPressedValues.intMap.h[32*e+n|0])?t:0)&&(this.gamepadPressedValues.set(32*e+n,0),this.backend.input.emitGamepadUp(e,n))}},gamepadGyro:function(e,n,t,i,s){if(this.gamepadsEnabled){if(!this.activeGamepads.intMap.h.hasOwnProperty(0|e)&&!this.removedGamepads.intMap.h.hasOwnProperty(0|e)){this.activeGamepads.set(e,1);for(var r=0;r<32;){var l=r++;this.gamepadPressedValues.set(32*e+l,0)}var a=J.app.runtime.getGamepadName(e);this._configureGamepad(e,a),this.backend.input.emitGamepadEnable(e,a)}a=.23225806451612904;this.backend.input.emitGamepadGyro(e,n*a,t*a,i*a)}},gamepadDevice:function(n,e,t,i){var s=this;if(this.gamepadsEnabled)if(2==t){if(this.activeGamepads.intMap.h.hasOwnProperty(0|n)){for(var r=0;r<32;){var l=r++,a=this.gamepadPressedValues.intMap.h[32*n+l|0];1==(null!=a?a:0)&&(this.backend.input.emitGamepadUp(n,l),this.gamepadPressedValues.set(32*n+l,0))}this.backend.input.emitGamepadDisable(n),this.activeGamepads.remove(n),this.removedGamepads.set(n,1),ae.app.onceUpdate(null,function(e){s.removedGamepads.remove(n)})}}else if(1==t&&!this.activeGamepads.intMap.h.hasOwnProperty(0|n)){this.activeGamepads.set(n,1);for(r=0;r<32;){l=r++;this.gamepadPressedValues.set(32*n+l,0)}this.removedGamepads.remove(n);e=J.app.runtime.getGamepadName(n);this._configureGamepad(n,e),this.backend.input.emitGamepadEnable(n,e)}},text:function(e,n,t,i,s,r){this.backend.textInput.inputActive&&this.backend.textInput.handleTextInput(e)},windowEvent:function(e,n,t,i,s){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:break;case 15:ae.app.settings.set_fullscreen(!0);break;case 16:ae.app.settings.set_fullscreen(!1)}},__class__:R}),(x["spec.Clipboard"]=S).__name__="spec.Clipboard",S.__isInterface__=!0,S.prototype={__class__:S},function(){this.didBindBrowserClipboard=!1,this.didLogBrowserClipboardWriteWarning=!1,this.didLogBrowserClipboardReadWarning=!1,this.clipboardText=null}),$=((x["backend.Clipboard"]=be).__name__="backend.Clipboard",be.__interfaces__=[S],be.prototype={bindBrowserClipboard:function(){var e=this;this.didBindBrowserClipboard=!0,this.readBrowserClipboard(),window.addEventListener("focus",function(){e.readBrowserClipboard()})},readBrowserClipboard:function(){var n=this,t=re.navigator;try{t.clipboard.readText().then(function(e){n.clipboardText!=e&&(n.clipboardText=e)})}catch(e){jt.lastError=e;t=Y.caught(e).unwrap();this.didLogBrowserClipboardReadWarning||(this.didLogBrowserClipboardReadWarning=!0,ae.app.logger.warning("Failed to read browser clipboard: "+L.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Clipboard.hx",lineNumber:107,className:"backend.Clipboard",methodName:"readBrowserClipboard"}))}},writeBrowserClipboard:function(e){var n=re.navigator;try{n.clipboard.writeText(e).then(function(){})}catch(e){jt.lastError=e;n=Y.caught(e).unwrap();this.didLogBrowserClipboardWriteWarning||(this.didLogBrowserClipboardWriteWarning=!0,ae.app.logger.warning("Failed to write browser clipboard: "+L.string(n),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Clipboard.hx",lineNumber:133,className:"backend.Clipboard",methodName:"writeBrowserClipboard"}))}},getText:function(){return this.clipboardText},setText:function(e){this.clipboardText=e,this.didBindBrowserClipboard&&this.writeBrowserClipboard(e)},__class__:be},(x["spec.Draw"]=U).__name__="spec.Draw",U.__isInterface__=!0,U.prototype={__class__:U},function(){this.renderer=new kn,this.renderer=new kn,$._batcher=new It}),pe=((x["backend.Draw"]=$).__name__="backend.Draw",$.__interfaces__=[U],$.prototype={get_batcher:function(){return $._batcher},set_batcher:function(e){return $._batcher=e},begin:function(){},end:function(){},draw:function(e){this.renderer.render(!0,e)},swap:function(){},initBuffers:function(){$._activeTextureSlot=0;var e=$._batcher,e=(e._buffersIndex=-1,e.prepareNextBuffers(),ae.app.defaultWhiteTexture.backendItem);It.defaultTextureId=e.textureId},beginRender:function(){$._batcher;ee.gl.enableVertexAttribArray(0),ee.gl.enableVertexAttribArray(1),ee.gl.enableVertexAttribArray(2)},endRender:function(){},clear:function(){$._batcher;J._graphics.clear(($._whiteTransparentColor>>16&255)/255,($._whiteTransparentColor>>8&255)/255,(255&$._whiteTransparentColor)/255,$._whiteTransparentColor>>24&255,!1),null!=$._currentRenderTarget&&($._didUpdateCurrentRenderTarget=!0)},clearAndApplyBackground:function(){var e=ae.app.settings.get_background();$._batcher;J._graphics.clear((e>>16&255)/255,(e>>8&255)/255,(255&e)/255,1,!1),null!=$._currentRenderTarget&&($._didUpdateCurrentRenderTarget=!0)},enableBlending:function(){$._batcher,J._graphics;ee.gl.enable(3042)},disableBlending:function(){$._batcher,J._graphics;ee.gl.disable(3042)},setActiveTexture:function(e){$._activeTextureSlot=e;var n=$._batcher;if((n=J._graphics)._activeTextureSlot!=e){for(n._activeTextureSlot=e;n._boundTexture2D.length<=n._activeTextureSlot;)n._boundTexture2D.push(null);ee.gl.activeTexture(33984+e)}},setPrimitiveType:function(e){$._batcher._primitiveType=1==(2==e?1:0)?1:4},getActiveTexture:function(){return $._activeTextureSlot},setRenderTarget:function(e,n){var t,i,s,r,l,a,h,c,o,u,_,d,b,p,f,O,g,m,w,v,y,U;null==n&&(n=!1),$._currentRenderTarget==e&&!n||(null!=$._currentRenderTarget&&$._currentRenderTarget!=e&&$._didUpdateCurrentRenderTarget&&1<(n=$._currentRenderTarget.backendItem).antialiasing&&(U=$._batcher,J._graphics.blitRenderTargetBuffers(n.renderTarget,n.width,n.height)),$._currentRenderTarget=e,$._didUpdateCurrentRenderTarget=!0,null!=e?(n=e.backendItem,U=$._batcher,n=n.renderTarget,U=J._graphics,null!=n?(U.bindFramebuffer((t=n).framebuffer),U.bindRenderbuffer(t.renderbuffer)):(U.bindFramebuffer(null),U.bindRenderbuffer(null)),f=((r=e.width)+(i=0))/(c=r-i),O=((s=0)+(l=e.height))/(o=s-l),_=((h=-1e3)+(a=1e3))/(u=h-a),(v=$._projectionMatrix)[0]=2/c,v[4]=0,v[8]=0,v[12]=-f,v[1]=0,v[5]=2/o,v[9]=0,v[13]=-O,v[2]=0,v[6]=0,v[10]=-2/u,v[14]=-_,v[3]=0,v[7]=0,v[11]=0,v[15]=1,(U=$._renderTargetTransform).a=1,U.b=0,U.c=0,U.d=1,U.tx=0,U.ty=0,U.changedDirty=!0,U=$._renderTargetTransform,n=e.density,d=e.density,U.a*=n,U.b*=d,U.c*=n,U.d*=d,U.tx*=n,U.ty*=d,U.changedDirty=!0,d=e.density,b=e.width,p=e.height,null==(n=-1)&&(n=1),null!=(y=$._renderTargetTransform)?((U=$._modelViewTransform).a=y.a,U.b=y.b,U.c=y.c,U.d=y.d,U.tx=y.tx,U.ty=y.ty,U.changedDirty=!0,0==(g=(U=$._modelViewTransform).a*U.d-U.b*U.c)?(U.a=U.b=U.c=U.d=0,U.tx=-U.tx,U.ty=-U.ty):(m=U.d*(g=1/g),U.d=U.a*g,U.a=m,U.b*=-g,U.c*=-g,w=-U.a*U.tx-U.c*U.ty,U.ty=-U.b*U.tx-U.d*U.ty,U.tx=w)):((U=$._modelViewTransform).a=1,U.b=0,U.c=0,U.d=1,U.tx=0,U.ty=0),U.changedDirty=!0,f=$._modelViewTransform.tx,O=$._modelViewTransform.ty,(U=$._modelViewTransform).tx+=-f,U.ty+=-O,U.changedDirty=!0,(U=$._modelViewTransform).a*=d,U.b*=d,U.c*=d,U.d*=d,U.tx*=d,U.ty*=d,U.changedDirty=!0,(U=$._modelViewTransform).tx+=f,U.ty+=O,U.changedDirty=!0,-1==n&&((U=$._modelViewTransform).tx+=.5*-b,U.ty+=.5*-p,U.changedDirty=!0,(U=$._modelViewTransform).a*=1,U.b*=-1,U.c*=1,U.d*=-1,U.tx*=1,U.ty*=-1,U.changedDirty=!0,(U=$._modelViewTransform).tx+=.5*b,U.ty+=.5*p,U.changedDirty=!0),0==(g=(U=$._modelViewTransform).a*U.d-U.b*U.c)?(U.a=U.b=U.c=U.d=0,U.tx=-U.tx,U.ty=-U.ty):(m=U.d*(g=1/g),U.d=U.a*g,U.a=m,U.b*=-g,U.c*=-g,w=-U.a*U.tx-U.c*U.ty,U.ty=-U.b*U.tx-U.d*U.ty,U.tx=w),U.changedDirty=!0,v=$._modelViewMatrix,y=$._modelViewTransform,v[0]=y.a,v[4]=y.c,v[8]=0,v[12]=y.tx,v[1]=y.b,v[5]=y.d,v[9]=0,v[13]=y.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,$._viewportDensity=e.density,$._viewportWidth=e.width*$._viewportDensity,$._viewportHeight=e.height*$._viewportDensity,U=$._batcher,U=J._graphics,ee.gl.viewport(0,0,e.width*e.density|0,e.height*e.density|0),e.clearOnRender&&(U=$._batcher,J._graphics.clear(($._blackTransparentColor>>16&255)/255,($._blackTransparentColor>>8&255)/255,(255&$._blackTransparentColor)/255,($._blackTransparentColor>>24&255)/255,!1),$._didUpdateCurrentRenderTarget=!0)):(U=$._batcher,U=J._graphics,(e=null)!=e?(U.bindFramebuffer((t=e).framebuffer),U.bindRenderbuffer(t.renderbuffer)):(U.bindFramebuffer(null),U.bindRenderbuffer(null)),f=((r=J.app.screenWidth)+(i=0))/(c=r-i),O=((s=0)+(l=J.app.screenHeight))/(o=s-l),_=((h=-1e3)+(a=1e3))/(u=h-a),(v=$._projectionMatrix)[0]=2/c,v[4]=0,v[8]=0,v[12]=-f,v[1]=0,v[5]=2/o,v[9]=0,v[13]=-O,v[2]=0,v[6]=0,v[10]=-2/u,v[14]=-_,v[3]=0,v[7]=0,v[11]=0,v[15]=1,d=J.app.screenDensity,b=J.app.screenWidth,p=J.app.screenHeight,null!=(y=ae.app.screen.matrix)?((U=$._modelViewTransform).a=y.a,U.b=y.b,U.c=y.c,U.d=y.d,U.tx=y.tx,U.ty=y.ty,U.changedDirty=!0,0==(g=(U=$._modelViewTransform).a*U.d-U.b*U.c)?(U.a=U.b=U.c=U.d=0,U.tx=-U.tx,U.ty=-U.ty):(m=U.d*(g=1/g),U.d=U.a*g,U.a=m,U.b*=-g,U.c*=-g,w=-U.a*U.tx-U.c*U.ty,U.ty=-U.b*U.tx-U.d*U.ty,U.tx=w)):((U=$._modelViewTransform).a=1,U.b=0,U.c=0,U.d=1,U.tx=0,U.ty=0),U.changedDirty=!0,f=$._modelViewTransform.tx,O=$._modelViewTransform.ty,(U=$._modelViewTransform).tx+=-f,U.ty+=-O,U.changedDirty=!0,(U=$._modelViewTransform).a*=d,U.b*=d,U.c*=d,U.d*=d,U.tx*=d,U.ty*=d,U.changedDirty=!0,(U=$._modelViewTransform).tx+=f,U.ty+=O,U.changedDirty=!0,0==(g=(U=$._modelViewTransform).a*U.d-U.b*U.c)?(U.a=U.b=U.c=U.d=0,U.tx=-U.tx,U.ty=-U.ty):(m=U.d*(g=1/g),U.d=U.a*g,U.a=m,U.b*=-g,U.c*=-g,w=-U.a*U.tx-U.c*U.ty,U.ty=-U.b*U.tx-U.d*U.ty,U.tx=w),U.changedDirty=!0,v=$._modelViewMatrix,y=$._modelViewTransform,v[0]=y.a,v[4]=y.c,v[8]=0,v[12]=y.tx,v[1]=y.b,v[5]=y.d,v[9]=0,v[13]=y.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,$._viewportDensity=J.app.screenDensity,$._viewportWidth=J.app.screenWidth*$._viewportDensity,$._viewportHeight=J.app.screenHeight*$._viewportDensity,U=$._batcher,U=J._graphics,ee.gl.viewport(0,0,0|$._viewportWidth,0|$._viewportHeight)))},useShader:function(e){$._activeShader=e;var n=$._batcher,n=(J._graphics.projectionMatrix=$._projectionMatrix,$._batcher),t=(J._graphics.modelViewMatrix=$._modelViewMatrix,ae.app.backend.shaders),i=0,s=$._activeShader.customAttributes;if(null!=s)for(var r=0,l=s.length;r<l;)i+=s[r++].size;var a=i,t=t.canBatchWithMultipleTextures($._activeShader);$._batcher._customAttributes=null!=$._activeShader?$._activeShader.customAttributes:null,(n=$._batcher)._floatAttributesSize=a,n._batchMultiTexture=t,n._vertexSize=3+n._floatAttributesSize+(n._batchMultiTexture?1:0),n._posSize=n._vertexSize,n._vertexSize<4&&(n._vertexSize=4),n._maxVerts=0|Math.floor(65536/n._vertexSize),0==n._numPos&&(n._numIndices=0,n._numPos=0,n._numUVs=0,n._numColors=0,n._posIndex=0,n._uvIndex=0,n._colorIndex=0),e.activate()},setBlendFuncSeparate:function(e,n,t,i){$._batcher,J._graphics;ee.gl.blendFuncSeparate(e,n,t,i)},beginDrawQuad:function(e){},endDrawQuad:function(){},beginDrawMesh:function(e){},endDrawMesh:function(){},enableScissor:function(e,n,t,i){var s=$._viewportDensity,r=$._modelViewTransform,l=(e*r.a+n*r.c+r.tx)*s,a=(e*(r=$._modelViewTransform).b+n*r.d+r.ty)*s,h=((e+t)*(r=$._modelViewTransform).a+(n+i)*r.c+r.tx)*s,e=((e+t)*(r=$._modelViewTransform).b+(n+i)*r.d+r.ty)*s;null!=$._currentRenderTarget?(r=$._batcher,n=$._viewportHeight-a,ee.gl.enable(3089),ee.gl.scissor(Math.round(l),Math.round(n),Math.round(h-l),Math.round(a-e))):(r=$._batcher,n=$._viewportHeight-e,ee.gl.enable(3089),ee.gl.scissor(Math.round(l),Math.round(n),Math.round(h-l),Math.round(e-a)))},disableScissor:function(){$._batcher;ee.gl.disable(3089)},drawWithStencilTest:function(){$._batcher;ee.gl.stencilFunc(514,1,255),ee.gl.stencilMask(0),ee.gl.colorMask(!0,!0,!0,!0),ee.gl.enable(2960)},drawWithoutStencilTest:function(){$._batcher;ee.gl.stencilFunc(519,1,255),ee.gl.stencilMask(255),ee.gl.colorMask(!0,!0,!0,!0),ee.gl.disable(2960)},beginDrawingInStencilBuffer:function(){$._drawingInStencilBuffer=!0;$._batcher;ee.gl.stencilMask(255),ee.gl.clearStencil(255),ee.gl.clear(1024),ee.gl.enable(2960),ee.gl.stencilOp(7680,7680,7681),ee.gl.stencilFunc(519,1,255),ee.gl.stencilMask(255),ee.gl.colorMask(!1,!1,!1,!1)},endDrawingInStencilBuffer:function(){$._drawingInStencilBuffer=!1},bindTexture:function(e){var n=$._batcher,e=e.textureId;(n=J._graphics)._boundTexture2D[n._activeTextureSlot]!=e&&(n._boundTexture2D[n._activeTextureSlot]=e,ee.gl.bindTexture(3553,e))},bindNoTexture:function(){var e=$._batcher,e=J._graphics,n=It.defaultTextureId;e._boundTexture2D[e._activeTextureSlot]!=n&&(e._boundTexture2D[e._activeTextureSlot]=n,ee.gl.bindTexture(3553,n))},textureBackendItemMatchesId:function(e,n){return e.textureId==n},getTextureId:function(e){return e.textureId},getTextureWidth:function(e){return e.width},getTextureHeight:function(e){return e.height},getTextureWidthActual:function(e){return e.widthActual},getTextureHeightActual:function(e){return e.heightActual},updateProjectionMatrix:function(e,n){var t=+e,i=0-n,e=(e+0)/t,n=(0+n)/i,s=$._projectionMatrix;s[0]=2/t,s[4]=0,s[8]=0,s[12]=-e,s[1]=0,s[5]=2/i,s[9]=0,s[13]=-n,s[2]=0,s[6]=0,s[10]=.001,s[14]=0,s[3]=0,s[7]=0,s[11]=0,s[15]=1},updateViewMatrix:function(e,n,t,i,s){null==s&&(s=1),null!=i?((a=$._modelViewTransform).a=i.a,a.b=i.b,a.c=i.c,a.d=i.d,a.tx=i.tx,a.ty=i.ty,a.changedDirty=!0,0==(h=(a=$._modelViewTransform).a*a.d-a.b*a.c)?(a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty):(c=a.d*(h=1/h),a.d=a.a*h,a.a=c,a.b*=-h,a.c*=-h,o=-a.a*a.tx-a.c*a.ty,a.ty=-a.b*a.tx-a.d*a.ty,a.tx=o)):((a=$._modelViewTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0),a.changedDirty=!0;var r=$._modelViewTransform.tx,l=$._modelViewTransform.ty,a=$._modelViewTransform;a.tx+=-r,a.ty+=-l,a.changedDirty=!0,(a=$._modelViewTransform).a*=e,a.b*=e,a.c*=e,a.d*=e,a.tx*=e,a.ty*=e,a.changedDirty=!0,(a=$._modelViewTransform).tx+=r,a.ty+=l,a.changedDirty=!0,-1==s&&((a=$._modelViewTransform).tx+=.5*-n,a.ty+=.5*-t,a.changedDirty=!0,(a=$._modelViewTransform).a*=1,a.b*=-1,a.c*=1,a.d*=-1,a.tx*=1,a.ty*=-1,a.changedDirty=!0,(a=$._modelViewTransform).tx+=.5*n,a.ty+=.5*t,a.changedDirty=!0);0==(h=(a=$._modelViewTransform).a*a.d-a.b*a.c)?(a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty):(c=a.d*(h=1/h),a.d=a.a*h,a.a=c,a.b*=-h,a.c*=-h,o=-a.a*a.tx-a.c*a.ty,a.ty=-a.b*a.tx-a.d*a.ty,a.tx=o),a.changedDirty=!0;var h,c,o,e=$._modelViewMatrix,i=$._modelViewTransform;e[0]=i.a,e[4]=i.c,e[8]=0,e[12]=i.tx,e[1]=i.b,e[5]=i.d,e[9]=0,e[13]=i.ty,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1},matrixIdentity:function(e){e[0]=1,e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=1,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1},setMatrixToTransform:function(e,n){e[0]=n.a,e[4]=n.c,e[8]=0,e[12]=n.tx,e[1]=n.b,e[5]=n.d,e[9]=0,e[13]=n.ty,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1},getNumPos:function(){return $._batcher._numPos},putPos:function(e,n,t){var i=$._batcher;i._posList[i._posIndex]=e,i._posList[i._posIndex+1]=n,i._posList[i._posIndex+2]=t,i._posIndex+=3,i._numPos++},putPosAndTextureSlot:function(e,n,t,i){var s=$._batcher;s._posList[s._posIndex]=e,s._posList[s._posIndex+1]=n,s._posList[s._posIndex+2]=t,s._posList[s._posIndex+3]=i,s._posIndex+=4,s._numPos++},beginFloatAttributes:function(){},putFloatAttribute:function(e,n){var t=$._batcher;t._posList[t._posIndex+e]=n},endFloatAttributes:function(){var e=$._batcher;e._posIndex+=e._floatAttributesSize},putIndice:function(e){var n=$._batcher;n._indiceList[n._numIndices]=e,n._numIndices++},putUVs:function(e,n){var t=$._batcher;t._uvList[t._uvIndex]=e,t._uvList[t._uvIndex+1]=n,t._uvIndex+=2,t._numUVs++},putColor:function(e,n,t,i){var s=$._batcher;s._colorList[s._colorIndex]=e,s._colorList[s._colorIndex+1]=n,s._colorList[s._colorIndex+2]=t,s._colorList[s._colorIndex+3]=i,s._colorIndex+=4,s._numColors++},hasAnythingToFlush:function(){return 0<$._batcher._numPos},shouldFlush:function(e,n,t){var i=$._batcher;return!(i._numPos+e<=i._maxVerts)||16384<i._numIndices+n},remainingVertices:function(){var e=$._batcher;return e._maxVerts-e._numPos},remainingIndices:function(){return 16384-$._batcher._numIndices},flush:function(){$._batcher.flush(),null!=$._currentRenderTarget&&($._didUpdateCurrentRenderTarget=!0)},__class__:$,__properties__:{set_batcher:"set_batcher",get_batcher:"get_batcher"}},(x["backend.ElectronRunner"]=W).__name__="backend.ElectronRunner",(x["spec.IO"]=X).__name__="spec.IO",X.__isInterface__=!0,X.prototype={__class__:X},function(){}),fe=((x["backend.IO"]=pe).__name__="backend.IO",pe.__interfaces__=[X],pe.prototype={initKeyValueIfNeeded:function(){},saveString:function(n,e){try{var t=window.localStorage;if(null==t)return ae.app.logger.error("Cannot save string: localStorage not supported on this browser",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:274,className:"backend.IO",methodName:"saveString"}),!1;t.setItem(n,rn.encode(e))}catch(e){jt.lastError=e;t=Y.caught(e).unwrap();return ae.app.logger.error("Failed to save string (key="+n+"): "+L.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:281,className:"backend.IO",methodName:"saveString"}),!1}return!0},appendString:function(n,e){try{var t=window.localStorage;if(null==t)return ae.app.logger.error("Cannot append string: localStorage not supported on this browser",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:294,className:"backend.IO",methodName:"appendString"}),!1;var i=t.getItem(n);null==i?t.setItem(n,rn.encode(e)):t.setItem(n,i+rn.encode(e))}catch(e){jt.lastError=e;t=Y.caught(e).unwrap();return ae.app.logger.error("Failed to append string (key="+n+"): "+L.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:307,className:"backend.IO",methodName:"appendString"}),!1}return!0},readString:function(n){try{var e,t=window.localStorage;return null==t?(ae.app.logger.error("Cannot read string: localStorage not supported on this browser",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:320,className:"backend.IO",methodName:"readString"}),null):null!=(e=t.getItem(n))?rn.decode(e):null}catch(e){jt.lastError=e;t=Y.caught(e).unwrap();return ae.app.logger.error("Failed to read string (key="+n+"): "+L.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:328,className:"backend.IO",methodName:"readString"}),null}},__class__:pe},(x["spec.Info"]=Z).__name__="spec.Info",Z.__isInterface__=!0,Z.prototype={__class__:Z},function(){}),Oe=((x["backend.Info"]=fe).__name__="backend.Info",fe.__interfaces__=[Z],fe.prototype={storageDirectory:function(){return null},imageExtensions:function(){return["png","jpg","jpeg"]},textExtensions:function(){return["txt","json","fnt","atlas"]},soundExtensions:function(){var e,n,t,i;return null==fe._soundExtensions&&(fe._soundExtensions=[],e=new Audio,n=null!=re.navigator?re.navigator.userAgent:"",i=fe.RE_OPERA.match(n)&&parseInt(fe.RE_OPERA.matched(0).split("/")[1],10)<33,t=-1!=n.indexOf("Safari")&&-1==n.indexOf("Chrome"),n=fe.RE_SAFARI_VERSION.match(n),t&&n&&parseInt(fe.RE_SAFARI_VERSION.matched(1),10),null!=(t=e.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=t&&""!=t&&fe._soundExtensions.push("ogg"),n=e.canPlayType("audio/mpeg;"),t=e.canPlayType("audio/mp3;"),!i&&(null!=n&&"no"!=n&&""!=n||null!=t&&"no"!=t&&""!=t)&&fe._soundExtensions.push("mp3"),i=e.canPlayType("audio/x-flac;"),n=e.canPlayType("audio/flac;"),(null!=i&&"no"!=i&&""!=i||null!=n&&"no"!=n&&""!=n)&&fe._soundExtensions.push("flac"),t=e.canPlayType('audio/wav; codecs="1"'),i=e.canPlayType("audio/wav;"),null!=t&&"no"!=t&&""!=t||null!=i&&"no"!=i&&""!=i)&&fe._soundExtensions.push("wav"),[].concat(fe._soundExtensions)},shaderExtensions:function(){return["frag","vert"]},__class__:fe},(x["spec.Input"]=_).__name__="spec.Input",_.__isInterface__=!0,function(){}),ge=((x["backend.Input"]=Oe).__name__="backend.Input",Oe.__interfaces__=[_,g],Oe.prototype={emitKeyDown:function(e){var n=0;if(null!=this.__cbOnKeyDown&&(n+=this.__cbOnKeyDown.length),null!=this.__cbOnceKeyDown&&(n+=this.__cbOnceKeyDown.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnKeyDown)for(var r=0,l=this.__cbOnKeyDown.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnKeyDown[a],++s):--n}if(null!=this.__cbOnceKeyDown){for(var h=null,c=null,r=0,l=this.__cbOnceKeyDown.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceKeyDown[a],this.__cbOnceKeyDown[a]=null,o=this.__cbOnceOwnerUnbindKeyDown[a],(this.__cbOnceOwnerUnbindKeyDown[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindKeyDown[a]),c.push(this.__cbOnceKeyDown[a]))}this.__cbOnceOwnerUnbindKeyDown=h,this.__cbOnceKeyDown=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyDown because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(null);null==this.__cbOnKeyDown&&(this.__cbOnKeyDown=[]),this.__cbOnKeyDown.push(t)},onceKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyDown because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(null);null==this.__cbOnceKeyDown&&(this.__cbOnceKeyDown=[]),this.__cbOnceKeyDown.push(t)},offKeyDown:function(e){if(null!=e){var n;null!=this.__cbOnKeyDown&&-1!=(n=this.__cbOnKeyDown.indexOf(e))&&(this.__cbOnKeyDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindKeyDown[n])&&r(),this.__cbOnOwnerUnbindKeyDown.splice(n,1)),null!=this.__cbOnceKeyDown&&-1!=(n=this.__cbOnceKeyDown.indexOf(e))&&(this.__cbOnceKeyDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindKeyDown[n])&&r(),this.__cbOnceOwnerUnbindKeyDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyDown){for(var t=0,i=this.__cbOnOwnerUnbindKeyDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindKeyDown[s])&&r()}this.__cbOnOwnerUnbindKeyDown=null}if(null!=this.__cbOnceOwnerUnbindKeyDown){for(t=0,i=this.__cbOnceOwnerUnbindKeyDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindKeyDown[s])&&r()}this.__cbOnceOwnerUnbindKeyDown=null}this.__cbOnKeyDown=null,this.__cbOnceKeyDown=null}},listensKeyDown:function(){return null!=this.__cbOnKeyDown&&0<this.__cbOnKeyDown.length||null!=this.__cbOnceKeyDown&&0<this.__cbOnceKeyDown.length},emitKeyUp:function(e){var n=0;if(null!=this.__cbOnKeyUp&&(n+=this.__cbOnKeyUp.length),null!=this.__cbOnceKeyUp&&(n+=this.__cbOnceKeyUp.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnKeyUp)for(var r=0,l=this.__cbOnKeyUp.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnKeyUp[a],++s):--n}if(null!=this.__cbOnceKeyUp){for(var h=null,c=null,r=0,l=this.__cbOnceKeyUp.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceKeyUp[a],this.__cbOnceKeyUp[a]=null,o=this.__cbOnceOwnerUnbindKeyUp[a],(this.__cbOnceOwnerUnbindKeyUp[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindKeyUp[a]),c.push(this.__cbOnceKeyUp[a]))}this.__cbOnceOwnerUnbindKeyUp=h,this.__cbOnceKeyUp=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyUp because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(null);null==this.__cbOnKeyUp&&(this.__cbOnKeyUp=[]),this.__cbOnKeyUp.push(t)},onceKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyUp because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(null);null==this.__cbOnceKeyUp&&(this.__cbOnceKeyUp=[]),this.__cbOnceKeyUp.push(t)},offKeyUp:function(e){if(null!=e){var n;null!=this.__cbOnKeyUp&&-1!=(n=this.__cbOnKeyUp.indexOf(e))&&(this.__cbOnKeyUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindKeyUp[n])&&r(),this.__cbOnOwnerUnbindKeyUp.splice(n,1)),null!=this.__cbOnceKeyUp&&-1!=(n=this.__cbOnceKeyUp.indexOf(e))&&(this.__cbOnceKeyUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindKeyUp[n])&&r(),this.__cbOnceOwnerUnbindKeyUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyUp){for(var t=0,i=this.__cbOnOwnerUnbindKeyUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindKeyUp[s])&&r()}this.__cbOnOwnerUnbindKeyUp=null}if(null!=this.__cbOnceOwnerUnbindKeyUp){for(t=0,i=this.__cbOnceOwnerUnbindKeyUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindKeyUp[s])&&r()}this.__cbOnceOwnerUnbindKeyUp=null}this.__cbOnKeyUp=null,this.__cbOnceKeyUp=null}},listensKeyUp:function(){return null!=this.__cbOnKeyUp&&0<this.__cbOnKeyUp.length||null!=this.__cbOnceKeyUp&&0<this.__cbOnceKeyUp.length},emitGamepadAxis:function(e,n,t){var i=0;if(null!=this.__cbOnGamepadAxis&&(i+=this.__cbOnGamepadAxis.length),null!=this.__cbOnceGamepadAxis&&(i+=this.__cbOnceGamepadAxis.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnGamepadAxis)for(var a=0,h=this.__cbOnGamepadAxis.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnGamepadAxis[c],++l):--i}if(null!=this.__cbOnceGamepadAxis){for(var o=null,u=null,a=0,h=this.__cbOnceGamepadAxis.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceGamepadAxis[c],this.__cbOnceGamepadAxis[c]=null,_=this.__cbOnceOwnerUnbindGamepadAxis[c],(this.__cbOnceOwnerUnbindGamepadAxis[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindGamepadAxis[c]),u.push(this.__cbOnceGamepadAxis[c]))}this.__cbOnceOwnerUnbindGamepadAxis=o,this.__cbOnceGamepadAxis=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadAxis(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(null);null==this.__cbOnGamepadAxis&&(this.__cbOnGamepadAxis=[]),this.__cbOnGamepadAxis.push(t)},onceGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadAxis(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(null);null==this.__cbOnceGamepadAxis&&(this.__cbOnceGamepadAxis=[]),this.__cbOnceGamepadAxis.push(t)},offGamepadAxis:function(e){if(null!=e){var n;null!=this.__cbOnGamepadAxis&&-1!=(n=this.__cbOnGamepadAxis.indexOf(e))&&(this.__cbOnGamepadAxis.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadAxis[n])&&r(),this.__cbOnOwnerUnbindGamepadAxis.splice(n,1)),null!=this.__cbOnceGamepadAxis&&-1!=(n=this.__cbOnceGamepadAxis.indexOf(e))&&(this.__cbOnceGamepadAxis.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadAxis[n])&&r(),this.__cbOnceOwnerUnbindGamepadAxis.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadAxis){for(var t=0,i=this.__cbOnOwnerUnbindGamepadAxis.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadAxis[s])&&r()}this.__cbOnOwnerUnbindGamepadAxis=null}if(null!=this.__cbOnceOwnerUnbindGamepadAxis){for(t=0,i=this.__cbOnceOwnerUnbindGamepadAxis.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadAxis[s])&&r()}this.__cbOnceOwnerUnbindGamepadAxis=null}this.__cbOnGamepadAxis=null,this.__cbOnceGamepadAxis=null}},listensGamepadAxis:function(){return null!=this.__cbOnGamepadAxis&&0<this.__cbOnGamepadAxis.length||null!=this.__cbOnceGamepadAxis&&0<this.__cbOnceGamepadAxis.length},emitGamepadDown:function(e,n){var t=0;if(null!=this.__cbOnGamepadDown&&(t+=this.__cbOnGamepadDown.length),null!=this.__cbOnceGamepadDown&&(t+=this.__cbOnceGamepadDown.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnGamepadDown)for(var l=0,a=this.__cbOnGamepadDown.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnGamepadDown[h],++r):--t}if(null!=this.__cbOnceGamepadDown){for(var c=null,o=null,l=0,a=this.__cbOnceGamepadDown.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceGamepadDown[h],this.__cbOnceGamepadDown[h]=null,u=this.__cbOnceOwnerUnbindGamepadDown[h],(this.__cbOnceOwnerUnbindGamepadDown[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadDown[h]),o.push(this.__cbOnceGamepadDown[h]))}this.__cbOnceOwnerUnbindGamepadDown=c,this.__cbOnceGamepadDown=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDown because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(null);null==this.__cbOnGamepadDown&&(this.__cbOnGamepadDown=[]),this.__cbOnGamepadDown.push(t)},onceGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDown because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(null);null==this.__cbOnceGamepadDown&&(this.__cbOnceGamepadDown=[]),this.__cbOnceGamepadDown.push(t)},offGamepadDown:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDown&&-1!=(n=this.__cbOnGamepadDown.indexOf(e))&&(this.__cbOnGamepadDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadDown[n])&&r(),this.__cbOnOwnerUnbindGamepadDown.splice(n,1)),null!=this.__cbOnceGamepadDown&&-1!=(n=this.__cbOnceGamepadDown.indexOf(e))&&(this.__cbOnceGamepadDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadDown[n])&&r(),this.__cbOnceOwnerUnbindGamepadDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDown){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadDown[s])&&r()}this.__cbOnOwnerUnbindGamepadDown=null}if(null!=this.__cbOnceOwnerUnbindGamepadDown){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadDown[s])&&r()}this.__cbOnceOwnerUnbindGamepadDown=null}this.__cbOnGamepadDown=null,this.__cbOnceGamepadDown=null}},listensGamepadDown:function(){return null!=this.__cbOnGamepadDown&&0<this.__cbOnGamepadDown.length||null!=this.__cbOnceGamepadDown&&0<this.__cbOnceGamepadDown.length},emitGamepadUp:function(e,n){var t=0;if(null!=this.__cbOnGamepadUp&&(t+=this.__cbOnGamepadUp.length),null!=this.__cbOnceGamepadUp&&(t+=this.__cbOnceGamepadUp.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnGamepadUp)for(var l=0,a=this.__cbOnGamepadUp.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnGamepadUp[h],++r):--t}if(null!=this.__cbOnceGamepadUp){for(var c=null,o=null,l=0,a=this.__cbOnceGamepadUp.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceGamepadUp[h],this.__cbOnceGamepadUp[h]=null,u=this.__cbOnceOwnerUnbindGamepadUp[h],(this.__cbOnceOwnerUnbindGamepadUp[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadUp[h]),o.push(this.__cbOnceGamepadUp[h]))}this.__cbOnceOwnerUnbindGamepadUp=c,this.__cbOnceGamepadUp=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadUp because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(null);null==this.__cbOnGamepadUp&&(this.__cbOnGamepadUp=[]),this.__cbOnGamepadUp.push(t)},onceGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadUp because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(null);null==this.__cbOnceGamepadUp&&(this.__cbOnceGamepadUp=[]),this.__cbOnceGamepadUp.push(t)},offGamepadUp:function(e){if(null!=e){var n;null!=this.__cbOnGamepadUp&&-1!=(n=this.__cbOnGamepadUp.indexOf(e))&&(this.__cbOnGamepadUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadUp[n])&&r(),this.__cbOnOwnerUnbindGamepadUp.splice(n,1)),null!=this.__cbOnceGamepadUp&&-1!=(n=this.__cbOnceGamepadUp.indexOf(e))&&(this.__cbOnceGamepadUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadUp[n])&&r(),this.__cbOnceOwnerUnbindGamepadUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadUp){for(var t=0,i=this.__cbOnOwnerUnbindGamepadUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadUp[s])&&r()}this.__cbOnOwnerUnbindGamepadUp=null}if(null!=this.__cbOnceOwnerUnbindGamepadUp){for(t=0,i=this.__cbOnceOwnerUnbindGamepadUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadUp[s])&&r()}this.__cbOnceOwnerUnbindGamepadUp=null}this.__cbOnGamepadUp=null,this.__cbOnceGamepadUp=null}},listensGamepadUp:function(){return null!=this.__cbOnGamepadUp&&0<this.__cbOnGamepadUp.length||null!=this.__cbOnceGamepadUp&&0<this.__cbOnceGamepadUp.length},emitGamepadGyro:function(e,n,t,i){var s=0;if(null!=this.__cbOnGamepadGyro&&(s+=this.__cbOnGamepadGyro.length),null!=this.__cbOnceGamepadGyro&&(s+=this.__cbOnceGamepadGyro.length),0<s){var r=w.pool(s),l=r.get(),a=0;if(null!=this.__cbOnGamepadGyro)for(var h=0,c=this.__cbOnGamepadGyro.length;h<c;){var o=h++;!0?(l.vector[a]=this.__cbOnGamepadGyro[o],++a):--s}if(null!=this.__cbOnceGamepadGyro){for(var u=null,_=null,h=0,c=this.__cbOnceGamepadGyro.length;h<c;){var d,o=h++;!0?(l.vector[a]=this.__cbOnceGamepadGyro[o],this.__cbOnceGamepadGyro[o]=null,d=this.__cbOnceOwnerUnbindGamepadGyro[o],(this.__cbOnceOwnerUnbindGamepadGyro[o]=null)!=d&&d(),++a):(--s,null==u&&(u=[],_=[],0),u.push(this.__cbOnceOwnerUnbindGamepadGyro[o]),_.push(this.__cbOnceGamepadGyro[o]))}this.__cbOnceOwnerUnbindGamepadGyro=u,this.__cbOnceGamepadGyro=_}for(h=0,c=s;h<c;){a=h++;(0,l.vector[a])(e,n,t,i)}r.release(l)}},onGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadGyro(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(null);null==this.__cbOnGamepadGyro&&(this.__cbOnGamepadGyro=[]),this.__cbOnGamepadGyro.push(t)},onceGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadGyro(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(null);null==this.__cbOnceGamepadGyro&&(this.__cbOnceGamepadGyro=[]),this.__cbOnceGamepadGyro.push(t)},offGamepadGyro:function(e){if(null!=e){var n;null!=this.__cbOnGamepadGyro&&-1!=(n=this.__cbOnGamepadGyro.indexOf(e))&&(this.__cbOnGamepadGyro.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadGyro[n])&&r(),this.__cbOnOwnerUnbindGamepadGyro.splice(n,1)),null!=this.__cbOnceGamepadGyro&&-1!=(n=this.__cbOnceGamepadGyro.indexOf(e))&&(this.__cbOnceGamepadGyro.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadGyro[n])&&r(),this.__cbOnceOwnerUnbindGamepadGyro.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadGyro){for(var t=0,i=this.__cbOnOwnerUnbindGamepadGyro.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadGyro[s])&&r()}this.__cbOnOwnerUnbindGamepadGyro=null}if(null!=this.__cbOnceOwnerUnbindGamepadGyro){for(t=0,i=this.__cbOnceOwnerUnbindGamepadGyro.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadGyro[s])&&r()}this.__cbOnceOwnerUnbindGamepadGyro=null}this.__cbOnGamepadGyro=null,this.__cbOnceGamepadGyro=null}},listensGamepadGyro:function(){return null!=this.__cbOnGamepadGyro&&0<this.__cbOnGamepadGyro.length||null!=this.__cbOnceGamepadGyro&&0<this.__cbOnceGamepadGyro.length},emitGamepadEnable:function(e,n){var t=0;if(null!=this.__cbOnGamepadEnable&&(t+=this.__cbOnGamepadEnable.length),null!=this.__cbOnceGamepadEnable&&(t+=this.__cbOnceGamepadEnable.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnGamepadEnable)for(var l=0,a=this.__cbOnGamepadEnable.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnGamepadEnable[h],++r):--t}if(null!=this.__cbOnceGamepadEnable){for(var c=null,o=null,l=0,a=this.__cbOnceGamepadEnable.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceGamepadEnable[h],this.__cbOnceGamepadEnable[h]=null,u=this.__cbOnceOwnerUnbindGamepadEnable[h],(this.__cbOnceOwnerUnbindGamepadEnable[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadEnable[h]),o.push(this.__cbOnceGamepadEnable[h]))}this.__cbOnceOwnerUnbindGamepadEnable=c,this.__cbOnceGamepadEnable=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadEnable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(null);null==this.__cbOnGamepadEnable&&(this.__cbOnGamepadEnable=[]),this.__cbOnGamepadEnable.push(t)},onceGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadEnable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(null);null==this.__cbOnceGamepadEnable&&(this.__cbOnceGamepadEnable=[]),this.__cbOnceGamepadEnable.push(t)},offGamepadEnable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadEnable&&-1!=(n=this.__cbOnGamepadEnable.indexOf(e))&&(this.__cbOnGamepadEnable.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadEnable[n])&&r(),this.__cbOnOwnerUnbindGamepadEnable.splice(n,1)),null!=this.__cbOnceGamepadEnable&&-1!=(n=this.__cbOnceGamepadEnable.indexOf(e))&&(this.__cbOnceGamepadEnable.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadEnable[n])&&r(),this.__cbOnceOwnerUnbindGamepadEnable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadEnable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadEnable.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadEnable[s])&&r()}this.__cbOnOwnerUnbindGamepadEnable=null}if(null!=this.__cbOnceOwnerUnbindGamepadEnable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadEnable.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadEnable[s])&&r()}this.__cbOnceOwnerUnbindGamepadEnable=null}this.__cbOnGamepadEnable=null,this.__cbOnceGamepadEnable=null}},listensGamepadEnable:function(){return null!=this.__cbOnGamepadEnable&&0<this.__cbOnGamepadEnable.length||null!=this.__cbOnceGamepadEnable&&0<this.__cbOnceGamepadEnable.length},emitGamepadDisable:function(e){var n=0;if(null!=this.__cbOnGamepadDisable&&(n+=this.__cbOnGamepadDisable.length),null!=this.__cbOnceGamepadDisable&&(n+=this.__cbOnceGamepadDisable.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnGamepadDisable)for(var r=0,l=this.__cbOnGamepadDisable.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnGamepadDisable[a],++s):--n}if(null!=this.__cbOnceGamepadDisable){for(var h=null,c=null,r=0,l=this.__cbOnceGamepadDisable.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceGamepadDisable[a],this.__cbOnceGamepadDisable[a]=null,o=this.__cbOnceOwnerUnbindGamepadDisable[a],(this.__cbOnceOwnerUnbindGamepadDisable[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindGamepadDisable[a]),c.push(this.__cbOnceGamepadDisable[a]))}this.__cbOnceOwnerUnbindGamepadDisable=h,this.__cbOnceGamepadDisable=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDisable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(null);null==this.__cbOnGamepadDisable&&(this.__cbOnGamepadDisable=[]),this.__cbOnGamepadDisable.push(t)},onceGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDisable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(null);null==this.__cbOnceGamepadDisable&&(this.__cbOnceGamepadDisable=[]),this.__cbOnceGamepadDisable.push(t)},offGamepadDisable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDisable&&-1!=(n=this.__cbOnGamepadDisable.indexOf(e))&&(this.__cbOnGamepadDisable.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadDisable[n])&&r(),this.__cbOnOwnerUnbindGamepadDisable.splice(n,1)),null!=this.__cbOnceGamepadDisable&&-1!=(n=this.__cbOnceGamepadDisable.indexOf(e))&&(this.__cbOnceGamepadDisable.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadDisable[n])&&r(),this.__cbOnceOwnerUnbindGamepadDisable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDisable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDisable.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadDisable[s])&&r()}this.__cbOnOwnerUnbindGamepadDisable=null}if(null!=this.__cbOnceOwnerUnbindGamepadDisable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDisable.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadDisable[s])&&r()}this.__cbOnceOwnerUnbindGamepadDisable=null}this.__cbOnGamepadDisable=null,this.__cbOnceGamepadDisable=null}},listensGamepadDisable:function(){return null!=this.__cbOnGamepadDisable&&0<this.__cbOnGamepadDisable.length||null!=this.__cbOnceGamepadDisable&&0<this.__cbOnceGamepadDisable.length},startGamepadRumble:function(e,n,t,i){J.app.runtime.startGamepadRumble(e,n,t,i)},stopGamepadRumble:function(e){J.app.runtime.stopGamepadRumble(e)},unbindEvents:function(){this.offKeyDown(),this.offKeyUp(),this.offGamepadAxis(),this.offGamepadDown(),this.offGamepadUp(),this.offGamepadGyro(),this.offGamepadEnable(),this.offGamepadDisable()},__class__:Oe},(x["backend.Main"]=ba).__name__="backend.Main",ba.main=function(){ba.events=new R(ba.ready),new J(ba.configure,ba.events)},ba.configure=function(i){var n;if(i.window.backgroundSleep=.016666666666666666,i.render.webgl.version=2,-1<re.navigator.userAgent.toLowerCase().indexOf(" electron/"))try{var e=require("@electron/remote").require("./app.js");e.isCeramicRunner&&(W.electronRunner=e)}catch(e){jt.lastError=e}null!=W.electronRunner&&(document.getElementsByTagName("html")[0].className+=" in-electron-runner",Tn._hasElectronRunner=!0,n=console.log,console.log=function(e){W.electronRunner.consoleLog(e),n(e)},window.addEventListener("error",function(e){for(var e=e.error,n=(e instanceof qt&&e.get_stack(),null!=e?(""+e.stack).split("\n"):[]),t=n.length-1,i=-1!=navigator.platform.indexOf("Win");0<=t;){var s=n[t],s=z.ltrim(s);s=z.replace(s,"http://localhost:"+L.string(W.electronRunner.serverPort)+"/file:"+(i?"/":""),""),s=z.replace(s,"http://localhost:"+L.string(W.electronRunner.serverPort)+"/",L.string(W.electronRunner.appFiles)+"/"),W.electronRunner.consoleLog("[error] "+s),--t}}));var e=ae.init(),s=(ba.project=new v(e),ba.app=ae.app,i.runtime.preventDefaultMouseWheel=e.settings.get_preventDefaultMouseWheel(),ba.app.settings.onPreventDefaultMouseWheelChange(ba.app,function(e,n){i.runtime.preventDefaultMouseWheel=e||0<ba.app.numBlockingDefaultScroll}),i.runtime.preventDefaultTouches=e.settings.get_preventDefaultTouches(),ba.app.settings.onPreventDefaultTouchesChange(ba.app,function(e,n){i.runtime.preventDefaultTouches=e||0<ba.app.numBlockingDefaultScroll}),ba.app.numBlockingDefaultScroll);ba.app.onPostUpdate(ba.app,function(e){var n,t=ba.app.numBlockingDefaultScroll;s!=t&&(s=t,n=ba.app.settings.get_preventDefaultTouches()||0<t,i.runtime.preventDefaultTouches=n,n=ba.app.settings.get_preventDefaultMouseWheel()||0<t,i.runtime.preventDefaultMouseWheel=n)}),null==W.electronRunner&&ba.app.settings.get_fullscreen()&&ba.app.settings.set_fullscreen(!1),i.render.antialiasing=ba.app.settings.antialiasing,0<ba.app.settings.get_windowWidth()?i.window.width=ba.app.settings.get_windowWidth():0<ba.app.settings.get_targetWidth()&&(i.window.width=ba.app.settings.get_targetWidth()),0<ba.app.settings.get_windowHeight()?i.window.height=ba.app.settings.get_windowHeight():0<ba.app.settings.get_targetHeight()&&(i.window.height=ba.app.settings.get_targetHeight()),i.window.fullscreen=ba.app.settings.get_fullscreen(),i.window.resizable=ba.app.settings.resizable,i.window.title=ba.app.settings.get_title(),i.render.stencil=2,i.render.depth=16,ba.configureOrientation(),null!=ba.app.settings.backend.webParent?i.runtime.windowParent=ba.app.settings.backend.webParent:i.runtime.windowParent=window.document.getElementById("ceramic-app"),i.runtime.mouseUseBrowserWindowEvents=!0,ba.app.settings.backend.allowDefaultKeys&&(i.runtime.preventDefaultKeys=[]),ba.containerElId=null!=ba.app.settings.backend.webParent?ba.app.settings.backend.webParent.id:"ceramic-app",ba.containerWidth=0,ba.containerHeight=0,ba.containerPixelRatio=0,window.document.body.classList.add("ceramic-invisible"),window.requestAnimationFrame(ba._updateContainerSizeIfNeeded),null!=W.electronRunner&&(null!=W.electronRunner.ceramicSettings&&W.electronRunner.ceramicSettings({trace:function(e){},title:ba.app.settings.get_title(),fullscreen:ba.app.settings.get_fullscreen(),resizable:ba.app.settings.resizable,targetWidth:0<ba.app.settings.get_windowWidth()?ba.app.settings.get_windowWidth():ba.app.settings.get_targetWidth(),targetHeight:0<ba.app.settings.get_windowHeight()?ba.app.settings.get_windowHeight():ba.app.settings.get_targetHeight()}),null!=W.electronRunner.listenFullscreen)&&W.electronRunner.listenFullscreen(function(e){ae.app.settings.set_fullscreen(!0)},function(e){ae.app.settings.set_fullscreen(!1)})},ba._updateContainerSizeIfNeeded=function(e){null==e&&(e=.016);var e=window.document.getElementById(ba.containerElId),n=window.document.getElementById("app");if(null!=e&&null!=n){var t,i=e.offsetWidth,e=e.offsetHeight,s=window.performance.now()/1e3;if(-1!=ba.lastResizeTime&&(i!=ba.lastNewWidth||e!=ba.lastNewHeight))return-1==ba.lastNewWidth&&-1==ba.lastNewHeight||window.document.body.classList.add("ceramic-invisible"),ba.lastResizeTime=s,ba.lastNewWidth=i,ba.lastNewHeight=e,void window.requestAnimationFrame(ba._updateContainerSizeIfNeeded);if(-1!=ba.lastResizeTime&&s-ba.lastResizeTime<.1)return void window.requestAnimationFrame(ba._updateContainerSizeIfNeeded);i==ba.containerWidth&&e==ba.containerHeight&&window.devicePixelRatio==ba.containerPixelRatio||(ba.containerWidth=i,ba.containerHeight=e,ba.containerPixelRatio=window.devicePixelRatio,n.style.width=ba.containerWidth+"px",n.style.height=ba.containerHeight+"px",n.width=Math.round(ba.containerWidth*window.devicePixelRatio),n.height=Math.round(ba.containerHeight*window.devicePixelRatio),ba.resizing++,-1!=ba.lastResizeTime&&window.document.body.classList.add("ceramic-invisible"),t=function(){0==ba.resizing&&ba.readyToDisplay&&window.document.body.classList.remove("ceramic-invisible")},window.setTimeout(function(){ba.resizing--,t()},100),ba.lastResizeTime=s)}window.requestAnimationFrame(ba._updateContainerSizeIfNeeded)},ba._appLoaderCheckDisplayReady=function(e){ba._displayReady?e():ba._pendingDisplayReadyDone=e},ba.ready=function(){ba.app.backend.io.initKeyValueIfNeeded(),ba._displayReady=!1,ba.app.loaders.push(ba._appLoaderCheckDisplayReady),J._graphics.loadExtensions(),null!=W.electronRunner&&W.electronRunner.ceramicReady();var n=null,n=window.setInterval(function(){var e=null!=ba.app.settings.backend.webParent?ba.app.settings.backend.webParent.id:"ceramic-app",e=window.document.getElementById(e);window.document.getElementById("app").offsetWidth==e.offsetWidth&&(ba.readyToDisplay=!0,window.clearInterval(n)),ba.readyToDisplay&&(0==ba.resizing&&window.document.body.classList.remove("ceramic-invisible"),ba._displayReady=!0,null!=ba._pendingDisplayReadyDone)&&(e=ba._pendingDisplayReadyDone,ba._pendingDisplayReadyDone=null,e())},500)},ba.configureOrientation=function(){},(x["spec.Screen"]=ca).__name__="spec.Screen",ca.__isInterface__=!0,ca.prototype={__class__:ca},function(){this.nextScreenshotIndex=0,this.didTryResumeAudioContext=!1}),me=((x["backend.Screen"]=ge).__name__="backend.Screen",ge.__interfaces__=[ca,g],ge.prototype={emitResize:function(){var e=0;if(null!=this.__cbOnResize&&(e+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(e+=this.__cbOnceResize.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnResize)for(var s=0,r=this.__cbOnResize.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnResize[l],++i):--e}if(null!=this.__cbOnceResize){for(var a=null,h=null,s=0,r=this.__cbOnceResize.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceResize[l],this.__cbOnceResize[l]=null,c=this.__cbOnceOwnerUnbindResize[l],(this.__cbOnceOwnerUnbindResize[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindResize[l]),h.push(this.__cbOnceResize[l]))}this.__cbOnceOwnerUnbindResize=a,this.__cbOnceResize=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event resize because owner is destroyed!");var s=function(e){null!=t&&(i.offResize(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(t)},onceResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event resize because owner is destroyed!");var s=function(e){null!=t&&(i.offResize(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(t)},offResize:function(e){if(null!=e){var n;null!=this.__cbOnResize&&-1!=(n=this.__cbOnResize.indexOf(e))&&(this.__cbOnResize.splice(n,1),null!=(r=this.__cbOnOwnerUnbindResize[n])&&r(),this.__cbOnOwnerUnbindResize.splice(n,1)),null!=this.__cbOnceResize&&-1!=(n=this.__cbOnceResize.indexOf(e))&&(this.__cbOnceResize.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindResize[n])&&r(),this.__cbOnceOwnerUnbindResize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindResize[s])&&r()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindResize[s])&&r()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&0<this.__cbOnResize.length||null!=this.__cbOnceResize&&0<this.__cbOnceResize.length},emitMouseDown:function(e,n,t){this.tryResumeAudioContextIfNeeded();var i=0;if(null!=this.__cbOnMouseDown&&(i+=this.__cbOnMouseDown.length),null!=this.__cbOnceMouseDown&&(i+=this.__cbOnceMouseDown.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnMouseDown)for(var a=0,h=this.__cbOnMouseDown.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnMouseDown[c],++l):--i}if(null!=this.__cbOnceMouseDown){for(var o=null,u=null,a=0,h=this.__cbOnceMouseDown.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceMouseDown[c],this.__cbOnceMouseDown[c]=null,_=this.__cbOnceOwnerUnbindMouseDown[c],(this.__cbOnceOwnerUnbindMouseDown[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindMouseDown[c]),u.push(this.__cbOnceMouseDown[c]))}this.__cbOnceOwnerUnbindMouseDown=o,this.__cbOnceMouseDown=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseDown because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(null);null==this.__cbOnMouseDown&&(this.__cbOnMouseDown=[]),this.__cbOnMouseDown.push(t)},onceMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseDown because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(null);null==this.__cbOnceMouseDown&&(this.__cbOnceMouseDown=[]),this.__cbOnceMouseDown.push(t)},offMouseDown:function(e){if(null!=e){var n;null!=this.__cbOnMouseDown&&-1!=(n=this.__cbOnMouseDown.indexOf(e))&&(this.__cbOnMouseDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseDown[n])&&r(),this.__cbOnOwnerUnbindMouseDown.splice(n,1)),null!=this.__cbOnceMouseDown&&-1!=(n=this.__cbOnceMouseDown.indexOf(e))&&(this.__cbOnceMouseDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseDown[n])&&r(),this.__cbOnceOwnerUnbindMouseDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseDown){for(var t=0,i=this.__cbOnOwnerUnbindMouseDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseDown[s])&&r()}this.__cbOnOwnerUnbindMouseDown=null}if(null!=this.__cbOnceOwnerUnbindMouseDown){for(t=0,i=this.__cbOnceOwnerUnbindMouseDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseDown[s])&&r()}this.__cbOnceOwnerUnbindMouseDown=null}this.__cbOnMouseDown=null,this.__cbOnceMouseDown=null}},listensMouseDown:function(){return null!=this.__cbOnMouseDown&&0<this.__cbOnMouseDown.length||null!=this.__cbOnceMouseDown&&0<this.__cbOnceMouseDown.length},emitMouseUp:function(e,n,t){var i=0;if(null!=this.__cbOnMouseUp&&(i+=this.__cbOnMouseUp.length),null!=this.__cbOnceMouseUp&&(i+=this.__cbOnceMouseUp.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnMouseUp)for(var a=0,h=this.__cbOnMouseUp.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnMouseUp[c],++l):--i}if(null!=this.__cbOnceMouseUp){for(var o=null,u=null,a=0,h=this.__cbOnceMouseUp.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceMouseUp[c],this.__cbOnceMouseUp[c]=null,_=this.__cbOnceOwnerUnbindMouseUp[c],(this.__cbOnceOwnerUnbindMouseUp[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindMouseUp[c]),u.push(this.__cbOnceMouseUp[c]))}this.__cbOnceOwnerUnbindMouseUp=o,this.__cbOnceMouseUp=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseUp because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(null);null==this.__cbOnMouseUp&&(this.__cbOnMouseUp=[]),this.__cbOnMouseUp.push(t)},onceMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseUp because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(null);null==this.__cbOnceMouseUp&&(this.__cbOnceMouseUp=[]),this.__cbOnceMouseUp.push(t)},offMouseUp:function(e){if(null!=e){var n;null!=this.__cbOnMouseUp&&-1!=(n=this.__cbOnMouseUp.indexOf(e))&&(this.__cbOnMouseUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseUp[n])&&r(),this.__cbOnOwnerUnbindMouseUp.splice(n,1)),null!=this.__cbOnceMouseUp&&-1!=(n=this.__cbOnceMouseUp.indexOf(e))&&(this.__cbOnceMouseUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseUp[n])&&r(),this.__cbOnceOwnerUnbindMouseUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseUp){for(var t=0,i=this.__cbOnOwnerUnbindMouseUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseUp[s])&&r()}this.__cbOnOwnerUnbindMouseUp=null}if(null!=this.__cbOnceOwnerUnbindMouseUp){for(t=0,i=this.__cbOnceOwnerUnbindMouseUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseUp[s])&&r()}this.__cbOnceOwnerUnbindMouseUp=null}this.__cbOnMouseUp=null,this.__cbOnceMouseUp=null}},listensMouseUp:function(){return null!=this.__cbOnMouseUp&&0<this.__cbOnMouseUp.length||null!=this.__cbOnceMouseUp&&0<this.__cbOnceMouseUp.length},emitMouseWheel:function(e,n){var t=0;if(null!=this.__cbOnMouseWheel&&(t+=this.__cbOnMouseWheel.length),null!=this.__cbOnceMouseWheel&&(t+=this.__cbOnceMouseWheel.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnMouseWheel)for(var l=0,a=this.__cbOnMouseWheel.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnMouseWheel[h],++r):--t}if(null!=this.__cbOnceMouseWheel){for(var c=null,o=null,l=0,a=this.__cbOnceMouseWheel.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceMouseWheel[h],this.__cbOnceMouseWheel[h]=null,u=this.__cbOnceOwnerUnbindMouseWheel[h],(this.__cbOnceOwnerUnbindMouseWheel[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseWheel[h]),o.push(this.__cbOnceMouseWheel[h]))}this.__cbOnceOwnerUnbindMouseWheel=c,this.__cbOnceMouseWheel=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseWheel because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseWheel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(null);null==this.__cbOnMouseWheel&&(this.__cbOnMouseWheel=[]),this.__cbOnMouseWheel.push(t)},onceMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseWheel because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseWheel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(null);null==this.__cbOnceMouseWheel&&(this.__cbOnceMouseWheel=[]),this.__cbOnceMouseWheel.push(t)},offMouseWheel:function(e){if(null!=e){var n;null!=this.__cbOnMouseWheel&&-1!=(n=this.__cbOnMouseWheel.indexOf(e))&&(this.__cbOnMouseWheel.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseWheel[n])&&r(),this.__cbOnOwnerUnbindMouseWheel.splice(n,1)),null!=this.__cbOnceMouseWheel&&-1!=(n=this.__cbOnceMouseWheel.indexOf(e))&&(this.__cbOnceMouseWheel.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseWheel[n])&&r(),this.__cbOnceOwnerUnbindMouseWheel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseWheel){for(var t=0,i=this.__cbOnOwnerUnbindMouseWheel.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseWheel[s])&&r()}this.__cbOnOwnerUnbindMouseWheel=null}if(null!=this.__cbOnceOwnerUnbindMouseWheel){for(t=0,i=this.__cbOnceOwnerUnbindMouseWheel.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseWheel[s])&&r()}this.__cbOnceOwnerUnbindMouseWheel=null}this.__cbOnMouseWheel=null,this.__cbOnceMouseWheel=null}},listensMouseWheel:function(){return null!=this.__cbOnMouseWheel&&0<this.__cbOnMouseWheel.length||null!=this.__cbOnceMouseWheel&&0<this.__cbOnceMouseWheel.length},emitMouseMove:function(e,n){var t=0;if(null!=this.__cbOnMouseMove&&(t+=this.__cbOnMouseMove.length),null!=this.__cbOnceMouseMove&&(t+=this.__cbOnceMouseMove.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnMouseMove)for(var l=0,a=this.__cbOnMouseMove.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnMouseMove[h],++r):--t}if(null!=this.__cbOnceMouseMove){for(var c=null,o=null,l=0,a=this.__cbOnceMouseMove.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceMouseMove[h],this.__cbOnceMouseMove[h]=null,u=this.__cbOnceOwnerUnbindMouseMove[h],(this.__cbOnceOwnerUnbindMouseMove[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseMove[h]),o.push(this.__cbOnceMouseMove[h]))}this.__cbOnceOwnerUnbindMouseMove=c,this.__cbOnceMouseMove=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseMove because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(null);null==this.__cbOnMouseMove&&(this.__cbOnMouseMove=[]),this.__cbOnMouseMove.push(t)},onceMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseMove because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(null);null==this.__cbOnceMouseMove&&(this.__cbOnceMouseMove=[]),this.__cbOnceMouseMove.push(t)},offMouseMove:function(e){if(null!=e){var n;null!=this.__cbOnMouseMove&&-1!=(n=this.__cbOnMouseMove.indexOf(e))&&(this.__cbOnMouseMove.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseMove[n])&&r(),this.__cbOnOwnerUnbindMouseMove.splice(n,1)),null!=this.__cbOnceMouseMove&&-1!=(n=this.__cbOnceMouseMove.indexOf(e))&&(this.__cbOnceMouseMove.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseMove[n])&&r(),this.__cbOnceOwnerUnbindMouseMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseMove){for(var t=0,i=this.__cbOnOwnerUnbindMouseMove.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseMove[s])&&r()}this.__cbOnOwnerUnbindMouseMove=null}if(null!=this.__cbOnceOwnerUnbindMouseMove){for(t=0,i=this.__cbOnceOwnerUnbindMouseMove.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseMove[s])&&r()}this.__cbOnceOwnerUnbindMouseMove=null}this.__cbOnMouseMove=null,this.__cbOnceMouseMove=null}},listensMouseMove:function(){return null!=this.__cbOnMouseMove&&0<this.__cbOnMouseMove.length||null!=this.__cbOnceMouseMove&&0<this.__cbOnceMouseMove.length},emitTouchDown:function(e,n,t){this.tryResumeAudioContextIfNeeded();var i=0;if(null!=this.__cbOnTouchDown&&(i+=this.__cbOnTouchDown.length),null!=this.__cbOnceTouchDown&&(i+=this.__cbOnceTouchDown.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnTouchDown)for(var a=0,h=this.__cbOnTouchDown.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnTouchDown[c],++l):--i}if(null!=this.__cbOnceTouchDown){for(var o=null,u=null,a=0,h=this.__cbOnceTouchDown.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceTouchDown[c],this.__cbOnceTouchDown[c]=null,_=this.__cbOnceOwnerUnbindTouchDown[c],(this.__cbOnceOwnerUnbindTouchDown[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindTouchDown[c]),u.push(this.__cbOnceTouchDown[c]))}this.__cbOnceOwnerUnbindTouchDown=o,this.__cbOnceTouchDown=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchDown because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(null);null==this.__cbOnTouchDown&&(this.__cbOnTouchDown=[]),this.__cbOnTouchDown.push(t)},onceTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchDown because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(null);null==this.__cbOnceTouchDown&&(this.__cbOnceTouchDown=[]),this.__cbOnceTouchDown.push(t)},offTouchDown:function(e){if(null!=e){var n;null!=this.__cbOnTouchDown&&-1!=(n=this.__cbOnTouchDown.indexOf(e))&&(this.__cbOnTouchDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTouchDown[n])&&r(),this.__cbOnOwnerUnbindTouchDown.splice(n,1)),null!=this.__cbOnceTouchDown&&-1!=(n=this.__cbOnceTouchDown.indexOf(e))&&(this.__cbOnceTouchDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTouchDown[n])&&r(),this.__cbOnceOwnerUnbindTouchDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchDown){for(var t=0,i=this.__cbOnOwnerUnbindTouchDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTouchDown[s])&&r()}this.__cbOnOwnerUnbindTouchDown=null}if(null!=this.__cbOnceOwnerUnbindTouchDown){for(t=0,i=this.__cbOnceOwnerUnbindTouchDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTouchDown[s])&&r()}this.__cbOnceOwnerUnbindTouchDown=null}this.__cbOnTouchDown=null,this.__cbOnceTouchDown=null}},listensTouchDown:function(){return null!=this.__cbOnTouchDown&&0<this.__cbOnTouchDown.length||null!=this.__cbOnceTouchDown&&0<this.__cbOnceTouchDown.length},emitTouchUp:function(e,n,t){var i=0;if(null!=this.__cbOnTouchUp&&(i+=this.__cbOnTouchUp.length),null!=this.__cbOnceTouchUp&&(i+=this.__cbOnceTouchUp.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnTouchUp)for(var a=0,h=this.__cbOnTouchUp.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnTouchUp[c],++l):--i}if(null!=this.__cbOnceTouchUp){for(var o=null,u=null,a=0,h=this.__cbOnceTouchUp.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceTouchUp[c],this.__cbOnceTouchUp[c]=null,_=this.__cbOnceOwnerUnbindTouchUp[c],(this.__cbOnceOwnerUnbindTouchUp[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindTouchUp[c]),u.push(this.__cbOnceTouchUp[c]))}this.__cbOnceOwnerUnbindTouchUp=o,this.__cbOnceTouchUp=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchUp because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(null);null==this.__cbOnTouchUp&&(this.__cbOnTouchUp=[]),this.__cbOnTouchUp.push(t)},onceTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchUp because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(null);null==this.__cbOnceTouchUp&&(this.__cbOnceTouchUp=[]),this.__cbOnceTouchUp.push(t)},offTouchUp:function(e){if(null!=e){var n;null!=this.__cbOnTouchUp&&-1!=(n=this.__cbOnTouchUp.indexOf(e))&&(this.__cbOnTouchUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTouchUp[n])&&r(),this.__cbOnOwnerUnbindTouchUp.splice(n,1)),null!=this.__cbOnceTouchUp&&-1!=(n=this.__cbOnceTouchUp.indexOf(e))&&(this.__cbOnceTouchUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTouchUp[n])&&r(),this.__cbOnceOwnerUnbindTouchUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchUp){for(var t=0,i=this.__cbOnOwnerUnbindTouchUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTouchUp[s])&&r()}this.__cbOnOwnerUnbindTouchUp=null}if(null!=this.__cbOnceOwnerUnbindTouchUp){for(t=0,i=this.__cbOnceOwnerUnbindTouchUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTouchUp[s])&&r()}this.__cbOnceOwnerUnbindTouchUp=null}this.__cbOnTouchUp=null,this.__cbOnceTouchUp=null}},listensTouchUp:function(){return null!=this.__cbOnTouchUp&&0<this.__cbOnTouchUp.length||null!=this.__cbOnceTouchUp&&0<this.__cbOnceTouchUp.length},emitTouchMove:function(e,n,t){var i=0;if(null!=this.__cbOnTouchMove&&(i+=this.__cbOnTouchMove.length),null!=this.__cbOnceTouchMove&&(i+=this.__cbOnceTouchMove.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnTouchMove)for(var a=0,h=this.__cbOnTouchMove.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnTouchMove[c],++l):--i}if(null!=this.__cbOnceTouchMove){for(var o=null,u=null,a=0,h=this.__cbOnceTouchMove.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceTouchMove[c],this.__cbOnceTouchMove[c]=null,_=this.__cbOnceOwnerUnbindTouchMove[c],(this.__cbOnceOwnerUnbindTouchMove[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindTouchMove[c]),u.push(this.__cbOnceTouchMove[c]))}this.__cbOnceOwnerUnbindTouchMove=o,this.__cbOnceTouchMove=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchMove because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(null);null==this.__cbOnTouchMove&&(this.__cbOnTouchMove=[]),this.__cbOnTouchMove.push(t)},onceTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchMove because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(null);null==this.__cbOnceTouchMove&&(this.__cbOnceTouchMove=[]),this.__cbOnceTouchMove.push(t)},offTouchMove:function(e){if(null!=e){var n;null!=this.__cbOnTouchMove&&-1!=(n=this.__cbOnTouchMove.indexOf(e))&&(this.__cbOnTouchMove.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTouchMove[n])&&r(),this.__cbOnOwnerUnbindTouchMove.splice(n,1)),null!=this.__cbOnceTouchMove&&-1!=(n=this.__cbOnceTouchMove.indexOf(e))&&(this.__cbOnceTouchMove.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTouchMove[n])&&r(),this.__cbOnceOwnerUnbindTouchMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchMove){for(var t=0,i=this.__cbOnOwnerUnbindTouchMove.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTouchMove[s])&&r()}this.__cbOnOwnerUnbindTouchMove=null}if(null!=this.__cbOnceOwnerUnbindTouchMove){for(t=0,i=this.__cbOnceOwnerUnbindTouchMove.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTouchMove[s])&&r()}this.__cbOnceOwnerUnbindTouchMove=null}this.__cbOnTouchMove=null,this.__cbOnceTouchMove=null}},listensTouchMove:function(){return null!=this.__cbOnTouchMove&&0<this.__cbOnTouchMove.length||null!=this.__cbOnceTouchMove&&0<this.__cbOnceTouchMove.length},willEmitMouseDown:function(e,n,t){this.tryResumeAudioContextIfNeeded()},willEmitTouchDown:function(e,n,t){this.tryResumeAudioContextIfNeeded()},tryResumeAudioContextIfNeeded:function(){this.didTryResumeAudioContext||(this.didTryResumeAudioContext=!0,ae.app.backend.audio.resumeAudioContext(function(e){e?ae.app.logger.success("Did resume audio context",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Screen.hx",lineNumber:115,className:"backend.Screen",methodName:"tryResumeAudioContextIfNeeded"}):ae.app.logger.error("Failed to resume audio context",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Screen.hx",lineNumber:118,className:"backend.Screen",methodName:"tryResumeAudioContextIfNeeded"})}))},getWidth:function(){return J.app.screenWidth},getHeight:function(){return J.app.screenHeight},getDensity:function(){return J.app.screenDensity},setBackground:function(e){},setWindowTitle:function(e){J.app.runtime.setWindowTitle(e)},setWindowFullscreen:function(e){null!=W.electronRunner&&null!=W.electronRunner.setFullscreen?W.electronRunner.setFullscreen(e):J.app.runtime.setWindowFullscreen(e)||ae.app.settings.set_fullscreen(!e)},screenshotToTexture:function(t){var i=this;J.app.runtime.window.toBlob(function(e){e.arrayBuffer().then(function(e){e=new Uint8Array(e,0,e.byteLength);J.app.assets.imageFromBytes(e,"png",4,!0,function(e){var n;null!=e?(n="screenshot:"+i.nextScreenshotIndex++,(e=Et.fromImage(e)).id=n,e.init(),t(e)):t(null)})})},"image/png")},screenshotToPng:function(n,t){J.app.runtime.window.toBlob(function(e){e.arrayBuffer().then(function(e){e=new hi(new Uint8Array(new Uint8Array(e,0,e.byteLength).buffer));null!=n?(Je.saveBytes(n,e),t()):t(e)})},"image/png")},screenshotToPixels:function(n){J.app.runtime.window.toBlob(function(e){e.arrayBuffer().then(function(e){e=new Uint8Array(e,0,e.byteLength);J.app.assets.imageFromBytes(e,"png",4,!1,function(e){null!=e?n(e.pixels,e.width,e.height):n(null,0,0)})})},"image/png")},unbindEvents:function(){this.offResize(),this.offMouseDown(),this.offMouseUp(),this.offMouseWheel(),this.offMouseMove(),this.offTouchDown(),this.offTouchUp(),this.offTouchMove()},__class__:ge},(x["clay.Resource"]=ea).__name__="clay.Resource",ea.prototype={__class__:ea},(x["clay.graphics.Shader"]=fa).__name__="clay.graphics.Shader",fa.__super__=ea,fa.prototype=$extend(ea.prototype,{init:function(){if(this.gpuShader=J._graphics.createShader(this.vertSource,this.fragSource,this.attributes,this.textures),null==this.gpuShader)throw Y.thrown("Failed to create shader (id="+this.id+")");this.uniforms=new Mt(this.gpuShader)},activate:function(){var e=J._graphics,n=this.gpuShader,e=(e._boundProgram!=n.program&&(e._boundProgram=n.program,ee.gl.useProgram(n.program)),J._graphics),t=this.gpuShader,i=ee.gl.getUniformLocation(t.program,"projectionMatrix"),s=e.projectionMatrix,n=(e._boundProgram!=(n=t).program&&(e._boundProgram=n.program,ee.gl.useProgram(n.program)),ee.gl.uniformMatrix4fv(i,!1,s),t),i=ee.gl.getUniformLocation(n.program,"modelViewMatrix"),s=e.modelViewMatrix;e._boundProgram!=(n=t).program&&(e._boundProgram=n.program,ee.gl.useProgram(n.program)),ee.gl.uniformMatrix4fv(i,!1,s),null!=this.uniforms&&this.uniforms.apply()},destroy:function(){J._graphics.deleteShader(this.gpuShader)},__class__:fa}),(x["backend.ShaderImpl"]=ga).__name__="backend.ShaderImpl",ga.__super__=fa,ga.prototype=$extend(fa.prototype,{clone:function(){var e=new ga;return e.vertSource=this.vertSource,e.fragSource=this.fragSource,e.customAttributes=this.customAttributes,e.isBatchingMultiTexture=this.isBatchingMultiTexture,e.attributes=this.attributes,e.textures=this.textures,e.init(),e},__class__:ga}),(x["spec.Shaders"]=ha).__name__="spec.Shaders",ha.__isInterface__=!0,ha.prototype={__class__:ha},function(){}),we=((x["backend.Shaders"]=me).__name__="backend.Shaders",me.__interfaces__=[ha],me.prototype={load:function(e,n,t,i,s){function q1a(e){ae.app._onceImmediate(function(){s(e),s=null})}var r=this,l=z.startsWith(e,"http://")||z.startsWith(e,"https://"),a=(An.isAbsolute(e)||l||(e=An.join([ae.app.settings.assetsPath,e])),An.withoutExtension(e));null!=i?this.tryLoadShader(a+"_mt8",n,t,i,!0,function(e){null!=e?(e.isBatchingMultiTexture=!0,q1a(e)):r.tryLoadShader(a,n,t,i,!1,function(e){null!=e&&(e.isBatchingMultiTexture=!1),q1a(e)})}):this.tryLoadShader(a,n,t,i,!1,function(e){null!=e&&(e.isBatchingMultiTexture=!1),q1a(e)})},tryLoadShader:function(e,a,h,c,o,u){var _=this,n=e+".frag",e=J.app.assets.fullPath(e+".vert"),t=J.app.assets.fullPath(n);J.app.io.loadData(e,!0,!0,function(e){var l;null==e?u(null):(l=new hi(new Uint8Array(e.buffer)).toString(),J.app.io.loadData(t,!0,!0,function(e){if(null==e)u(null);else{var e=new hi(new Uint8Array(e.buffer)).toString(),n=[];if(null!=a)for(var t=0,i=a.length;t<i;){var s=t++;n.push(a[s].name)}if(o&&null!=c&&n.push(c.name),null!=h)for(t=0,i=h.length;t<i;){s=t++;n.push(h[s].name)}var r=new ga;r.attributes=n,r.textures=o?_.buildMultiTextures():["mainTex"],r.vertSource=l,r.fragSource=e,r.customAttributes=h;try{r.init(),u(r)}catch(t){jt.lastError=t,u(null)}}}))})},buildMultiTextures:function(){var e=["mainTex"];return e.push("tex1"),e.push("tex2"),e.push("tex3"),e.push("tex4"),e.push("tex5"),e.push("tex6"),e.push("tex7"),e.push("tex8"),e},destroy:function(e){e.destroy()},clone:function(e){return e.clone()},setInt:function(e,n,t){e.uniforms.setInt(n,t)},setFloat:function(e,n,t){e.uniforms.setFloat(n,t)},setVec2:function(e,n,t,i){e.uniforms.setVector2(n,t,i)},setVec3:function(e,n,t,i,s){e.uniforms.setVector3(n,t,i,s)},setVec4:function(e,n,t,i,s,r){e.uniforms.setVector4(n,t,i,s,r)},setFloatArray:function(e,n,t){e.uniforms.setFloatArray(n,new Float32Array(t))},setTexture:function(e,n,t,i){e.uniforms.setTexture(n,t,i)},setMat2:function(e,n,t,i,s,r){e.uniforms.setMatrix2(n,new Float32Array([t,i,s,r]))},setMat3:function(e,n,t,i,s,r,l,a,h,c,o){e.uniforms.setMatrix3(n,new Float32Array([t,i,s,r,l,a,h,c,o]))},setMat4:function(e,n,t,i,s,r,l,a,h,c,o,u,_,d,b,p,f,O){e.uniforms.setMatrix4(n,new Float32Array([t,i,s,r,l,a,h,c,o,u,_,d,b,p,f,O]))},customFloatAttributesSize:function(e){var n=0,t=e.customAttributes;if(null!=t)for(var i=0,s=t.length;i<s;)n+=t[i++].size;return n},maxIfStatementsByFragmentShader:function(){return 8},canBatchWithMultipleTextures:function(e){return e.isBatchingMultiTexture},supportsHotReloadPath:function(){return!0},__class__:me},(x["spec.TextInput"]=ja).__name__="spec.TextInput",ja.__isInterface__=!0,ja.prototype={__class__:ja},function(){this.inputRectH=0,this.inputRectW=0,this.inputRectY=0,this.inputRectX=0,this.inputActive=!1}),ve=((x["backend.TextInput"]=we).__name__="backend.TextInput",we.__interfaces__=[ja],we.prototype={start:function(e,n,t,i,s){this.inputActive||(this.inputRectX=0|n,this.inputRectY=0|t,this.inputRectW=0|Math.max(1,i),this.inputRectH=0|Math.max(1,s),this.inputActive=!0)},stop:function(){this.inputActive&&(this.inputRectX=0,this.inputRectY=0,this.inputRectW=0,this.inputRectH=0,this.inputActive=!1)},handleTextInput:function(e){" "!=e&&ae.app.textInput.appendText(e)},handleKeyDown:function(e,n){this.inputActive&&(42==n?ae.app.textInput.backspace():44==n?ae.app.textInput.space():40==n?ae.app.textInput.enter():88==n?ae.app.textInput.kpEnter():41==n?ae.app.textInput.escape():80==n?ae.app.textInput.moveLeft():79==n?ae.app.textInput.moveRight():82==n?ae.app.textInput.moveUp():81==n&&ae.app.textInput.moveDown()),225==n?ae.app.textInput.lshiftDown():229==n?ae.app.textInput.rshiftDown():224==n?ae.app.textInput.lctrlDown():228==n?ae.app.textInput.rctrlDown():227==n?ae.app.textInput.lmetaDown():231==n&&ae.app.textInput.rmetaDown()},handleKeyUp:function(e,n){225==n?ae.app.textInput.lshiftUp():229==n?ae.app.textInput.rshiftUp():224==n?ae.app.textInput.lctrlUp():228==n?ae.app.textInput.rctrlUp():227==n?ae.app.textInput.lmetaUp():231==n&&ae.app.textInput.rmetaUp()},__class__:we},(x["spec.Texts"]=la).__name__="spec.Texts",la.__isInterface__=!0,la.prototype={__class__:la},function(){this.loadingTextCallbacks=new te}),ye=((x["backend.Texts"]=ve).__name__="backend.Texts",ve.__interfaces__=[la],ve.prototype={load:function(l,e,n){function A2a(e){function G2a(){n(e),n=null}null!=r?r.push(G2a):ae.app._onceImmediate(G2a)}var t,i,a=this,s=null!=e&&2==e.loadMethod,r=null!=e?e.immediate:null,e=z.startsWith(l,"http://")||z.startsWith(l,"https://");An.isAbsolute(l)||e||(l=An.join([ae.app.settings.assetsPath,l])),Object.prototype.hasOwnProperty.call(this.loadingTextCallbacks.h,l)?this.loadingTextCallbacks.h[l].push(function(e){A2a(e)}):(this.loadingTextCallbacks.h[l]=[],t=l,e||-1!=(i=t.indexOf("?"))&&(t=le.substr(t,0,i)),i=e?t:J.app.assets.fullPath(t),J.app.io.loadData(i,!0,!s,function(e){if(null==e)if(null!=(s=a.loadingTextCallbacks.h[l]))for(var n=a.loadingTextCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,l)&&delete n.h[l],A2a(null),0);t<s.length;){var i=s[t];++t,i(null)}else A2a(null);else{var s,r=new hi(new Uint8Array(e.buffer)).toString();if(null!=(s=a.loadingTextCallbacks.h[l]))for(n=a.loadingTextCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,l)&&delete n.h[l],A2a(r),0);t<s.length;){i=s[t];++t,i(r)}else A2a(r)}}),null!=r?r.push(yt.flush):ae.app._onceImmediate(yt.flush))},supportsHotReloadPath:function(){return!0},__class__:ve},(x["spec.Textures"]=oa).__name__="spec.Textures",oa.__isInterface__=!0,oa.prototype={__class__:oa},function(){this.loadedTexturesRetainCount=new te,this.loadedTextures=new te,this.loadingTextureCallbacks=new te,this.nextBytesIndex=0,this.nextPixelsIndex=0,this.nextRenderIndex=0}),e=((x["backend.Textures"]=ye).__name__="backend.Textures",ye.__interfaces__=[oa],ye.computeMaxTextureSizeIfNeeded=function(){-1==ye._maxTextureSize&&(ye._maxTextureSize=J._graphics.getMaxTextureSize())},ye.computeMaxTexturesByBatchIfNeeded=function(){-1==ye._maxTexturesByBatch&&(ye._maxTexturesByBatch=J._graphics.getMaxTextureUnits())},ye.prototype={load:function(l,e,n){function U2a(e){function bda(){n(e),n=null}null!=r?r.push(bda):ae.app._onceImmediate(bda)}var t,i,a,h,c=this,s=null!=e&&2==e.loadMethod,r=null!=e?e.immediate:null,o=z.startsWith(l,"http://")||z.startsWith(l,"https://");An.isAbsolute(l)||o||(l=An.join([ae.app.settings.assetsPath,l])),Object.prototype.hasOwnProperty.call(this.loadedTextures.h,l)?(this.loadedTexturesRetainCount.h[l]+=1,t=this.loadedTextures.h[l],U2a(t)):Object.prototype.hasOwnProperty.call(this.loadingTextureCallbacks.h,l)?this.loadingTextureCallbacks.h[l].push(function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(c.loadedTexturesRetainCount.h,l)?c.loadedTexturesRetainCount.h[l]:0,c.loadedTexturesRetainCount.h[l]=n+1),U2a(e)}):(t=l,o||-1!=(i=t.indexOf("?"))&&(t=le.substr(t,0,i)),this.loadingTextureCallbacks.h[l]=[function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(c.loadedTexturesRetainCount.h,l)?c.loadedTexturesRetainCount.h[l]:0,c.loadedTexturesRetainCount.h[l]=n+1),U2a(e)}],i=o?t:J.app.assets.fullPath(t),a=!0,null!=e&&null!=e.premultiplyAlpha&&(a=e.premultiplyAlpha),h=function(){for(var e=c.loadingTextureCallbacks.h[l],n=c.loadingTextureCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,l)&&delete n.h[l],0);t<e.length;){var i=e[t];++t;try{i(null)}catch(e){jt.lastError=e;i=[Y.caught(e).unwrap()];ae.app._onceImmediate(function(e){return function(){throw Y.thrown(e[0])}}(i))}}},J.app.assets.loadImage(i,null,!s,function(e){if(null==e)h();else{var n=null;try{if(null==(n=Et.fromImage(e,a)))return void h();n.id=l,n.init()}catch(s){jt.lastError=s;var t=Y.caught(s).unwrap();return ae.app.logger.error("Failed to create texture: "+L.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:153,className:"backend.Textures",methodName:"load"}),void h()}c.loadedTextures.h[l]=n;for(var i=c.loadingTextureCallbacks.h[l],e=c.loadingTextureCallbacks,s=(Object.prototype.hasOwnProperty.call(e.h,l)&&delete e.h[l],0);s<i.length;){var r=i[s];++s;try{r(n)}catch(e){jt.lastError=e;t=[Y.caught(e).unwrap()];ae.app._onceImmediate(function(e){return function(){throw Y.thrown(e[0])}}(t))}}}}),null!=r?r.push(yt.flush):ae.app._onceImmediate(yt.flush))},loadFromBytes:function(e,n,t,i){function Eda(e){function Jda(){i(e),i=null}null!=l?l.push(Jda):ae.app._onceImmediate(Jda)}var s=this,r="bytes:"+this.nextBytesIndex++,l=(null!=t&&t.loadMethod,null!=t?t.immediate:null),a=!0;null!=t&&null!=t.premultiplyAlpha&&(a=t.premultiplyAlpha);J.app.assets.imageFromBytes(new Uint8Array(e.b.bufferValue),n,null,null,function(n){if(null==n)Eda(null);else{var e=null;try{if(null==(e=Et.fromImage(n,a)))return void Eda(null);e.id=r,e.init()}catch(e){jt.lastError=e;n=Y.caught(e).unwrap();return ae.app.logger.error("Failed to create texture: "+L.string(n),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:240,className:"backend.Textures",methodName:"loadFromBytes"}),void Eda(null)}s.loadedTexturesRetainCount.h[r]=1,Eda(e)}}),null!=l?l.push(yt.flush):ae.app._onceImmediate(yt.flush)},supportsHotReloadPath:function(){return!0},createTexture:function(e,n,t){var i="pixels:"+this.nextPixelsIndex++,s=new Et;return s.id=i,s.width=e,s.height=n,s.pixels=t,s.init(),this.loadedTexturesRetainCount.h[i]=1,s},createRenderTarget:function(e,n,t,i,s){var r="render:"+this.nextRenderIndex++,l=J.app.runtime.webglVersion,a=new At;return a.id=r,a.width=e,a.height=n,a.depth=t,a.stencil=i,a.antialiasing=2<=l?s:0,a.init(),this.loadedTexturesRetainCount.h[r]=1,a},fetchTexturePixels:function(e,n){var t=e.width,i=e.height;return null==n&&(n=new Uint8Array(t*i*4)),e.fetch(n),n},submitTexturePixels:function(e,n){e.submit(n)},destroyTexture:function(e){var n,t=e.id;1<this.loadedTexturesRetainCount.h[t]?--this.loadedTexturesRetainCount.h[t]:(n=this.loadedTextures,Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t],n=this.loadedTexturesRetainCount,Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t],e.destroy())},getTextureId:function(e){return e.textureId},getTextureWidth:function(e){return e.width},getTextureHeight:function(e){return e.height},getTextureWidthActual:function(e){return e.widthActual},getTextureHeightActual:function(e){return e.heightActual},getTextureIndex:function(e){return e.index},setTextureFilter:function(e,n){switch(n._hx_index){case 0:e.set_filterMin(9729),e.set_filterMag(9729);break;case 1:e.set_filterMin(9728),e.set_filterMag(9728)}},setTextureWrapS:function(e,n){switch(n){case 0:e.set_wrapS(33071);break;case 1:e.set_wrapS(10497);break;case 2:e.set_wrapS(33648)}},setTextureWrapT:function(e,n){switch(n){case 0:e.set_wrapT(33071);break;case 1:e.set_wrapT(10497);break;case 2:e.set_wrapT(33648)}},maxTextureWidth:function(){return-1==ye._maxTextureSize&&(ye._maxTextureSize=J._graphics.getMaxTextureSize()),ye._maxTextureSize},maxTextureHeight:function(){return-1==ye._maxTextureSize&&(ye._maxTextureSize=J._graphics.getMaxTextureSize()),ye._maxTextureSize},maxTexturesByBatch:function(){return-1==ye._maxTexturesByBatch&&(ye._maxTexturesByBatch=J._graphics.getMaxTextureUnits()),ye._maxTexturesByBatch},textureToPng:function(e,n,t,i){null==n&&(n=!0);var s=this.fetchTexturePixels(e);e.id;n&&Pn.reversePremultiplyAlpha(s),J.app.assets.pixelsToPngData(e.width,e.height,s,function(e){null!=e?null!=t?(Je.saveBytes(t,new hi(new Uint8Array(e.buffer))),i()):i(new hi(new Uint8Array(e.buffer))):(ae.app.logger.warning("Failed to get PNG data from texture",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:686,className:"backend.Textures",methodName:"textureToPng"}),i(null))})},pixelsToPng:function(e,n,t,i,s){J.app.assets.pixelsToPngData(e,n,t,function(e){null!=e?null!=i?(Je.saveBytes(i,new hi(new Uint8Array(e.buffer))),s()):s(new hi(new Uint8Array(e.buffer))):(ae.app.logger.warning("Failed to get PNG data from pixels",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:716,className:"backend.Textures",methodName:"pixelsToPng"}),s(null))})},__class__:ye},he["backend.VisualItem"]={__ename__:"backend.VisualItem",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"backend.VisualItem",toString:c},QUAD:{_hx_name:"QUAD",_hx_index:1,__enum__:"backend.VisualItem",toString:c},MESH:{_hx_name:"MESH",_hx_index:2,__enum__:"backend.VisualItem",toString:c}}),Ue=(e.__constructs__=[e.NONE,e.QUAD,e.MESH],(x["binpacking.IOccupancy"]=ra).__name__="binpacking.IOccupancy",ra.__isInterface__=!0,ra.prototype={__class__:ra},(x["binpacking.MaxRectsPackerBestFitPosition"]=sa).__name__="binpacking.MaxRectsPackerBestFitPosition",sa.prototype={__class__:sa},(x["binpacking.MaxRectsPackerRectScore"]=ta).__name__="binpacking.MaxRectsPackerRectScore",ta.prototype={__class__:ta},(x["binpacking.MaxRectsPacker"]=ua).__name__="binpacking.MaxRectsPacker",ua.__interfaces__=[ra],ua.prototype={insert:function(e,n,t){var i;switch(t){case 1:i=this.findPositionForNewNodeBestShortSideFit(e,n,this._bestFitPosition).bestNode;break;case 2:i=this.findPositionForNewNodeBestLongSideFit(e,n,this._bestFitPosition).bestNode;break;case 3:i=this.findPositionForNewNodeBestAreaFit(e,n,this._bestFitPosition).bestNode;break;case 4:i=this.findPositionForNewNodeBottomLeft(e,n,this._bestFitPosition).bestNode;break;case 5:i=this.findPositionForNewNodeContactPoint(e,n,this._bestFitPosition).bestNode}if(null==i||0==i.width||0==i.height)return null;for(var s=this.freeRectangles.length,r=0;r<s;)this.splitFreeNode(this.freeRectangles[r],i)&&(this.freeRectangles.splice(r,1),--r,--s),++r;return this.pruneFreeList(),this.usedRectangles.push(i),i},occupancy:function(){if(0==this.usedRectangles.length)return 0;for(var e=0,n=0,t=this.usedRectangles.length;n<t;){var i=n++;e+=this.usedRectangles[i].width*this.usedRectangles[i].height}return e/(this.binWidth*this.binHeight)},scoreRect:function(e,n,t){var i=new Ue,s=1073741823,r=1073741823;switch(t){case 1:var l,i=(l=this.findPositionForNewNodeBestShortSideFit(e,n,this._bestFitPosition)).bestNode,s=l.bestShortSideFit,r=l.bestLongSideFit;break;case 2:i=(l=this.findPositionForNewNodeBestLongSideFit(e,n,this._bestFitPosition)).bestNode,s=l.bestLongSideFit,r=l.bestLongSideFit;break;case 3:i=(l=this.findPositionForNewNodeBestAreaFit(e,n,this._bestFitPosition)).bestNode,s=l.bestAreaFit,r=l.bestShortSideFit;break;case 4:i=(l=this.findPositionForNewNodeBottomLeft(e,n,this._bestFitPosition)).bestNode,s=l.bestY,r=l.bestX;break;case 5:i=(l=this.findPositionForNewNodeContactPoint(e,n,this._bestFitPosition)).bestNode,s=-l.bestContactScore}return 0==i.height&&(r=s=1073741823),new ta(i,s,r)},contactPointScoreNode:function(e,n,t,i){for(var s=0,r=(0!=e&&e+t!=this.binWidth||(s+=i),0!=n&&n+i!=this.binHeight||(s+=t),0),l=this.usedRectangles.length;r<l;){var a=r++;this.usedRectangles[a].x!=e+t&&this.usedRectangles[a].x+this.usedRectangles[a].width!=e||(s+=0|this.commonIntervalLength(this.usedRectangles[a].y,this.usedRectangles[a].height,n,n+i)),this.usedRectangles[a].y!=n+i&&this.usedRectangles[a].y+this.usedRectangles[a].height!=n||(s+=0|this.commonIntervalLength(this.usedRectangles[a].x,this.usedRectangles[a].x+this.usedRectangles[a].width,e,e+t))}return s},findPositionForNewNodeBottomLeft:function(e,n,t){for(var i=new Ue,s=1073741823,r=1073741823,l=0,a=this.freeRectangles.length;l<a;){var h,c=l++;this.freeRectangles[c].width>=e&&this.freeRectangles[c].height<r&&(h=this.freeRectangles[c].y+n|0,i.x=this.freeRectangles[c].x,i.y=this.freeRectangles[c].y,i.width=e,i.height=n,s=h,r=0|this.freeRectangles[c].x),this.binAllowFlip&&this.freeRectangles[c].width>=n&&this.freeRectangles[c].height>=e&&(h=this.freeRectangles[c].y+n|0,i.x=this.freeRectangles[c].x,i.y=this.freeRectangles[c].y,i.width=e,i.height=n,s=h,r=0|this.freeRectangles[c].x)}return t.bestNode=i,t.bestY=s,t.bestX=r,t},findPositionForNewNodeBestShortSideFit:function(e,n,t){for(var i=new Ue,s=1073741823,r=1073741823,l=0,a=this.freeRectangles.length;l<a;){var h,c,o,u,_=l++;this.freeRectangles[_].width>=e&&this.freeRectangles[_].height>=n&&(o=Math.abs(this.freeRectangles[_].width-e),h=Math.abs(this.freeRectangles[_].height-n),c=Math.min(o,h),o=Math.max(o,h),c<s||c==s&&o<r)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=e,i.height=n,s=0|c,r=0|o),this.binAllowFlip&&this.freeRectangles[_].width>=n&&this.freeRectangles[_].height>=e&&(h=Math.abs(this.freeRectangles[_].width-n),c=Math.abs(this.freeRectangles[_].height-e),o=Math.min(h,c),u=Math.max(h,c),o<s||o==s&&u<r)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=n,i.height=e,i.flipped=!i.flipped,s=0|o,r=0|u)}return t.bestNode=i,t.bestShortSideFit=s,t.bestLongSideFit=r,t},findPositionForNewNodeBestLongSideFit:function(e,n,t){for(var i=new Ue,s=1073741823,r=1073741823,l=0,a=this.freeRectangles.length;l<a;){var h,c,o,u,_=l++;this.freeRectangles[_].width>=e&&this.freeRectangles[_].height>=n&&(o=Math.abs(this.freeRectangles[_].width-e),h=Math.abs(this.freeRectangles[_].height-n),c=Math.min(o,h),(o=Math.max(o,h))<r||o==r&&c<s)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=e,i.height=n,s=0|c,r=0|o),this.binAllowFlip&&this.freeRectangles[_].width>=n&&this.freeRectangles[_].height>=e&&(h=Math.abs(this.freeRectangles[_].width-e),c=Math.abs(this.freeRectangles[_].height-n),o=Math.min(h,c),(u=Math.max(h,c))<r||u==r&&o<s)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=n,i.height=e,i.flipped=!i.flipped,s=0|o,r=0|u)}return t.bestNode=i,t.bestShortSideFit=s,t.bestLongSideFit=r,t},findPositionForNewNodeBestAreaFit:function(e,n,t){for(var i=new Ue,s=1073741823,r=1073741823,l=0,a=this.freeRectangles.length;l<a;){var h,c,o,u=l++,_=this.freeRectangles[u].width*this.freeRectangles[u].height-e*n;this.freeRectangles[u].width>=e&&this.freeRectangles[u].height>=n&&(c=Math.abs(this.freeRectangles[u].width-e),h=Math.abs(this.freeRectangles[u].height-n),c=Math.min(c,h),_<s||_==s&&c<r)&&(i.x=this.freeRectangles[u].x,i.y=this.freeRectangles[u].y,i.width=e,i.height=n,r=0|c,s=0|_),this.binAllowFlip&&this.freeRectangles[u].width>=n&&this.freeRectangles[u].height>=e&&(h=Math.abs(this.freeRectangles[u].width-n),c=Math.abs(this.freeRectangles[u].height-e),o=Math.min(h,c),_<s||_==s&&o<r)&&(i.x=this.freeRectangles[u].x,i.y=this.freeRectangles[u].y,i.width=n,i.height=e,i.flipped=!i.flipped,r=0|o,s=0|_)}return t.bestNode=i,t.bestAreaFit=s,t.bestShortSideFit=r,t},findPositionForNewNodeContactPoint:function(e,n,t){for(var i=new Ue,s=-1,r=0,l=this.freeRectangles.length;r<l;){var a,h=r++;this.freeRectangles[h].width>=e&&this.freeRectangles[h].height>=n&&s<(a=this.contactPointScoreNode(0|this.freeRectangles[h].x,0|this.freeRectangles[h].y,e,n))&&(i.x=this.freeRectangles[h].x,i.y=this.freeRectangles[h].y,i.width=e,i.height=n,s=a),this.freeRectangles[h].width>=n&&this.freeRectangles[h].height>=e&&s<(a=this.contactPointScoreNode(0|this.freeRectangles[h].x,0|this.freeRectangles[h].y,n,e))&&(i.x=this.freeRectangles[h].x,i.y=this.freeRectangles[h].y,i.width=n,i.height=e,i.flipped=!i.flipped,s=a)}return t.bestNode=i,t.bestContactScore=s,t},splitFreeNode:function(e,n){var t;return!(n.x>=e.x+e.width||n.x+n.width<=e.x||n.y>=e.y+e.height||n.y+n.height<=e.y||(n.x<e.x+e.width&&n.x+n.width>e.x&&(n.y>e.y&&n.y<e.y+e.height&&((t=new Ue(e.x,e.y,e.width,e.height)).height=n.y-t.y,this.freeRectangles.push(t)),n.y+n.height<e.y+e.height)&&((t=new Ue(e.x,e.y,e.width,e.height)).y=n.y+n.height,t.height=e.y+e.height-(n.y+n.height),this.freeRectangles.push(t)),n.y<e.y+e.height&&n.y+n.height>e.y&&(n.x>e.x&&n.x<e.x+e.width&&((t=new Ue(e.x,e.y,e.width,e.height)).width=n.x-t.x,this.freeRectangles.push(t)),n.x+n.width<e.x+e.width)&&((t=new Ue(e.x,e.y,e.width,e.height)).x=n.x+n.width,t.width=e.x+e.width-(n.x+n.width),this.freeRectangles.push(t)),0))},pruneFreeList:function(){for(var e=0;e<this.freeRectangles.length;){for(var n=e+1;n<this.freeRectangles.length;){var t=this.freeRectangles[e],i=this.freeRectangles[n];if(t.x>=i.x&&t.y>=i.y&&t.x+t.width<=i.x+i.width&&t.y+t.height<=i.y+i.height){this.freeRectangles.splice(e,1),--e;break}t=this.freeRectangles[n],i=this.freeRectangles[e];t.x>=i.x&&t.y>=i.y&&t.x+t.width<=i.x+i.width&&t.y+t.height<=i.y+i.height?this.freeRectangles.splice(n,1):++n}++e}},commonIntervalLength:function(e,n,t,i){return n<t||i<e?0:(n<i?n:i)-(t<e?e:t)},__class__:ua},(x["binpacking.RectSize"]=va).__name__="binpacking.RectSize",va.prototype={__class__:va},function(e,n,t,i,s){null==s&&(s=!1),null==i&&(i=0),null==t&&(t=0),null==n&&(n=0),this.x=e=null==e?0:e,this.y=n,this.width=t,this.height=i,this.flipped=s}),ae=((x["binpacking.Rect"]=Ue).__name__="binpacking.Rect",Ue.prototype={clone:function(){return new Ue(this.x,this.y,this.width,this.height)},isContainedIn:function(e){return this.x>=e.x&&this.y>=e.y&&this.x+this.width<=e.x+e.width&&this.y+this.height<=e.y+e.height},__class__:Ue},(x["binpacking.DisjointRectCollection"]=xa).__name__="binpacking.DisjointRectCollection",xa.rectsDisjoint=function(e,n){return e.x+e.width<=n.x||n.x+n.width<=e.x||e.y+e.height<=n.y||n.y+n.height<=e.y},xa.prototype={add:function(e){if(0!=e.width&&0!=e.height){if(!this.disjoint(e))return!1;this.rects.push(e)}return!0},clear:function(){this.rects=[]},disjoint:function(e){if(0!=e.width&&0!=e.height)for(var n=0,t=this.rects.length;n<t;){var i=n++;if(!xa.rectsDisjoint(this.rects[i],e))return!1}return!0},__class__:xa},function(){this.info={name:"ceramic-demo",collections:{},version:"1.0",package:null,author:"Jeremy Faivre",displayName:"Ceramic Demo"},this._computeRenderTexturesPriorityQueue=[],this.numBlockingDefaultScroll=0,this.disposedEntities=[],this.beginUpdateCallbacks=[],this.visualsContentDirty=!1,this.hierarchyDirty=!1,this.lazyScenes=!0,this.timelines=new ot,this.converters=new te,this.textInput=null,this.persistent=null,this.projectDir=null,this.defaultFont=null,this.defaultWhiteTexture=null,this.defaultTexturedShader=null,this.renderTextures=[],this.groups=[],this.destroyedVisuals=[],this.pendingVisuals=[],this.visuals=[],this.logger=new Tn,this.frame=0,this._computeFps=new Be,this.inUpdate=!1,this._xUpdatesToCallNow=[],this._xUpdatesHandlers=[],this._xUpdatesHandlersPool=new k,this.loaders=[],this.postFlushImmediateCallbacksLen=0,this.postFlushImmediateCallbacksCapacity=0,this.postFlushImmediateCallbacks=[],this.immediateCallbacksLen=0,this.immediateCallbacksCapacity=0,this.immediateCallbacks=[],h.call(this),ae.app=this,Nn.init(),Bi.backend=new pt,this.settings=new Vn,this.screen=new Kn,this.audio=new Ae,this.input=new cn,this.systems=new $n,this.assets=new ne,this.backend=new N,this.backend.onceReady(this,$bind(this,this.backendReady)),this.backend.init(this)}),xe=((x["ceramic.App"]=ae).__name__="ceramic.App",ae.__properties__={get_app:"get_app"},ae.get_app=function(){return ae.app},ae.oncePreInit=function(e){null==ae.preInitCallbacks&&(ae.preInitCallbacks=[]),ae.preInitCallbacks.push(e)},ae.init=function(){return F.bind(),new ae,new hn(ae.app.settings)},ae.__super__=h,ae.prototype=$extend(h.prototype,{emitReady:function(){var e=0;if(null!=this.__cbOnReady&&(e+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(e+=this.__cbOnceReady.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReady)for(var s=0,r=this.__cbOnReady.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnReady[l],++i):--e}if(null!=this.__cbOnceReady){for(var a=null,h=null,s=0,r=this.__cbOnceReady.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceReady[l],this.__cbOnceReady[l]=null,c=this.__cbOnceOwnerUnbindReady[l],(this.__cbOnceOwnerUnbindReady[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReady[l]),h.push(this.__cbOnceReady[l]))}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReady[n])&&r(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReady[n])&&r(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReady[s])&&r()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReady[s])&&r()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnUpdate)for(var r=0,l=this.__cbOnUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnUpdate[a],++s):--n}if(null!=this.__cbOnceUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,o=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),c.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindUpdate[n])&&r(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindUpdate[n])&&r(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindUpdate[s])&&r()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindUpdate[s])&&r()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},emitPreUpdate:function(e){var n=0;if(null!=this.__cbOnPreUpdate&&(n+=this.__cbOnPreUpdate.length),null!=this.__cbOncePreUpdate&&(n+=this.__cbOncePreUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPreUpdate)for(var r=0,l=this.__cbOnPreUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPreUpdate[a],++s):--n}if(null!=this.__cbOncePreUpdate){for(var h=null,c=null,r=0,l=this.__cbOncePreUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePreUpdate[a],this.__cbOncePreUpdate[a]=null,o=this.__cbOnceOwnerUnbindPreUpdate[a],(this.__cbOnceOwnerUnbindPreUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPreUpdate[a]),c.push(this.__cbOncePreUpdate[a]))}this.__cbOnceOwnerUnbindPreUpdate=h,this.__cbOncePreUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPreUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event preUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offPreUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPreUpdate&&(this.__cbOnOwnerUnbindPreUpdate=[]),this.__cbOnOwnerUnbindPreUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPreUpdate&&(this.__cbOnOwnerUnbindPreUpdate=[]),this.__cbOnOwnerUnbindPreUpdate.push(null);null==this.__cbOnPreUpdate&&(this.__cbOnPreUpdate=[]),this.__cbOnPreUpdate.push(t)},oncePreUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event preUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offPreUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPreUpdate&&(this.__cbOnceOwnerUnbindPreUpdate=[]),this.__cbOnceOwnerUnbindPreUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPreUpdate&&(this.__cbOnceOwnerUnbindPreUpdate=[]),this.__cbOnceOwnerUnbindPreUpdate.push(null);null==this.__cbOncePreUpdate&&(this.__cbOncePreUpdate=[]),this.__cbOncePreUpdate.push(t)},offPreUpdate:function(e){if(null!=e){var n;null!=this.__cbOnPreUpdate&&-1!=(n=this.__cbOnPreUpdate.indexOf(e))&&(this.__cbOnPreUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPreUpdate[n])&&r(),this.__cbOnOwnerUnbindPreUpdate.splice(n,1)),null!=this.__cbOncePreUpdate&&-1!=(n=this.__cbOncePreUpdate.indexOf(e))&&(this.__cbOncePreUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPreUpdate[n])&&r(),this.__cbOnceOwnerUnbindPreUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPreUpdate){for(var t=0,i=this.__cbOnOwnerUnbindPreUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPreUpdate[s])&&r()}this.__cbOnOwnerUnbindPreUpdate=null}if(null!=this.__cbOnceOwnerUnbindPreUpdate){for(t=0,i=this.__cbOnceOwnerUnbindPreUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPreUpdate[s])&&r()}this.__cbOnceOwnerUnbindPreUpdate=null}this.__cbOnPreUpdate=null,this.__cbOncePreUpdate=null}},listensPreUpdate:function(){return null!=this.__cbOnPreUpdate&&0<this.__cbOnPreUpdate.length||null!=this.__cbOncePreUpdate&&0<this.__cbOncePreUpdate.length},emitPostUpdate:function(e){var n=0;if(null!=this.__cbOnPostUpdate&&(n+=this.__cbOnPostUpdate.length),null!=this.__cbOncePostUpdate&&(n+=this.__cbOncePostUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPostUpdate)for(var r=0,l=this.__cbOnPostUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPostUpdate[a],++s):--n}if(null!=this.__cbOncePostUpdate){for(var h=null,c=null,r=0,l=this.__cbOncePostUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePostUpdate[a],this.__cbOncePostUpdate[a]=null,o=this.__cbOnceOwnerUnbindPostUpdate[a],(this.__cbOnceOwnerUnbindPostUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPostUpdate[a]),c.push(this.__cbOncePostUpdate[a]))}this.__cbOnceOwnerUnbindPostUpdate=h,this.__cbOncePostUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPostUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event postUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offPostUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPostUpdate&&(this.__cbOnOwnerUnbindPostUpdate=[]),this.__cbOnOwnerUnbindPostUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPostUpdate&&(this.__cbOnOwnerUnbindPostUpdate=[]),this.__cbOnOwnerUnbindPostUpdate.push(null);null==this.__cbOnPostUpdate&&(this.__cbOnPostUpdate=[]),this.__cbOnPostUpdate.push(t)},oncePostUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event postUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offPostUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPostUpdate&&(this.__cbOnceOwnerUnbindPostUpdate=[]),this.__cbOnceOwnerUnbindPostUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPostUpdate&&(this.__cbOnceOwnerUnbindPostUpdate=[]),this.__cbOnceOwnerUnbindPostUpdate.push(null);null==this.__cbOncePostUpdate&&(this.__cbOncePostUpdate=[]),this.__cbOncePostUpdate.push(t)},offPostUpdate:function(e){if(null!=e){var n;null!=this.__cbOnPostUpdate&&-1!=(n=this.__cbOnPostUpdate.indexOf(e))&&(this.__cbOnPostUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPostUpdate[n])&&r(),this.__cbOnOwnerUnbindPostUpdate.splice(n,1)),null!=this.__cbOncePostUpdate&&-1!=(n=this.__cbOncePostUpdate.indexOf(e))&&(this.__cbOncePostUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPostUpdate[n])&&r(),this.__cbOnceOwnerUnbindPostUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPostUpdate){for(var t=0,i=this.__cbOnOwnerUnbindPostUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPostUpdate[s])&&r()}this.__cbOnOwnerUnbindPostUpdate=null}if(null!=this.__cbOnceOwnerUnbindPostUpdate){for(t=0,i=this.__cbOnceOwnerUnbindPostUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPostUpdate[s])&&r()}this.__cbOnceOwnerUnbindPostUpdate=null}this.__cbOnPostUpdate=null,this.__cbOncePostUpdate=null}},listensPostUpdate:function(){return null!=this.__cbOnPostUpdate&&0<this.__cbOnPostUpdate.length||null!=this.__cbOncePostUpdate&&0<this.__cbOncePostUpdate.length},emitDefaultAssetsLoad:function(e){var n=0;if(null!=this.__cbOnDefaultAssetsLoad&&(n+=this.__cbOnDefaultAssetsLoad.length),null!=this.__cbOnceDefaultAssetsLoad&&(n+=this.__cbOnceDefaultAssetsLoad.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnDefaultAssetsLoad)for(var r=0,l=this.__cbOnDefaultAssetsLoad.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnDefaultAssetsLoad[a],++s):--n}if(null!=this.__cbOnceDefaultAssetsLoad){for(var h=null,c=null,r=0,l=this.__cbOnceDefaultAssetsLoad.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceDefaultAssetsLoad[a],this.__cbOnceDefaultAssetsLoad[a]=null,o=this.__cbOnceOwnerUnbindDefaultAssetsLoad[a],(this.__cbOnceOwnerUnbindDefaultAssetsLoad[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindDefaultAssetsLoad[a]),c.push(this.__cbOnceDefaultAssetsLoad[a]))}this.__cbOnceOwnerUnbindDefaultAssetsLoad=h,this.__cbOnceDefaultAssetsLoad=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onDefaultAssetsLoad:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event defaultAssetsLoad because owner is destroyed!");var s=function(e){null!=t&&(i.offDefaultAssetsLoad(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindDefaultAssetsLoad&&(this.__cbOnOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnOwnerUnbindDefaultAssetsLoad.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindDefaultAssetsLoad&&(this.__cbOnOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnOwnerUnbindDefaultAssetsLoad.push(null);null==this.__cbOnDefaultAssetsLoad&&(this.__cbOnDefaultAssetsLoad=[]),this.__cbOnDefaultAssetsLoad.push(t)},onceDefaultAssetsLoad:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event defaultAssetsLoad because owner is destroyed!");var s=function(e){null!=t&&(i.offDefaultAssetsLoad(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindDefaultAssetsLoad&&(this.__cbOnceOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnceOwnerUnbindDefaultAssetsLoad.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindDefaultAssetsLoad&&(this.__cbOnceOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnceOwnerUnbindDefaultAssetsLoad.push(null);null==this.__cbOnceDefaultAssetsLoad&&(this.__cbOnceDefaultAssetsLoad=[]),this.__cbOnceDefaultAssetsLoad.push(t)},offDefaultAssetsLoad:function(e){if(null!=e){var n;null!=this.__cbOnDefaultAssetsLoad&&-1!=(n=this.__cbOnDefaultAssetsLoad.indexOf(e))&&(this.__cbOnDefaultAssetsLoad.splice(n,1),null!=(r=this.__cbOnOwnerUnbindDefaultAssetsLoad[n])&&r(),this.__cbOnOwnerUnbindDefaultAssetsLoad.splice(n,1)),null!=this.__cbOnceDefaultAssetsLoad&&-1!=(n=this.__cbOnceDefaultAssetsLoad.indexOf(e))&&(this.__cbOnceDefaultAssetsLoad.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindDefaultAssetsLoad[n])&&r(),this.__cbOnceOwnerUnbindDefaultAssetsLoad.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDefaultAssetsLoad){for(var t=0,i=this.__cbOnOwnerUnbindDefaultAssetsLoad.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindDefaultAssetsLoad[s])&&r()}this.__cbOnOwnerUnbindDefaultAssetsLoad=null}if(null!=this.__cbOnceOwnerUnbindDefaultAssetsLoad){for(t=0,i=this.__cbOnceOwnerUnbindDefaultAssetsLoad.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindDefaultAssetsLoad[s])&&r()}this.__cbOnceOwnerUnbindDefaultAssetsLoad=null}this.__cbOnDefaultAssetsLoad=null,this.__cbOnceDefaultAssetsLoad=null}},listensDefaultAssetsLoad:function(){return null!=this.__cbOnDefaultAssetsLoad&&0<this.__cbOnDefaultAssetsLoad.length||null!=this.__cbOnceDefaultAssetsLoad&&0<this.__cbOnceDefaultAssetsLoad.length},emitCriticalError:function(e,n){var t=0;if(null!=this.__cbOnCriticalError&&(t+=this.__cbOnCriticalError.length),null!=this.__cbOnceCriticalError&&(t+=this.__cbOnceCriticalError.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnCriticalError)for(var l=0,a=this.__cbOnCriticalError.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnCriticalError[h],++r):--t}if(null!=this.__cbOnceCriticalError){for(var c=null,o=null,l=0,a=this.__cbOnceCriticalError.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceCriticalError[h],this.__cbOnceCriticalError[h]=null,u=this.__cbOnceOwnerUnbindCriticalError[h],(this.__cbOnceOwnerUnbindCriticalError[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindCriticalError[h]),o.push(this.__cbOnceCriticalError[h]))}this.__cbOnceOwnerUnbindCriticalError=c,this.__cbOnceCriticalError=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onCriticalError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event criticalError because owner is destroyed!");var s=function(e){null!=t&&(i.offCriticalError(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindCriticalError&&(this.__cbOnOwnerUnbindCriticalError=[]),this.__cbOnOwnerUnbindCriticalError.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindCriticalError&&(this.__cbOnOwnerUnbindCriticalError=[]),this.__cbOnOwnerUnbindCriticalError.push(null);null==this.__cbOnCriticalError&&(this.__cbOnCriticalError=[]),this.__cbOnCriticalError.push(t)},onceCriticalError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event criticalError because owner is destroyed!");var s=function(e){null!=t&&(i.offCriticalError(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindCriticalError&&(this.__cbOnceOwnerUnbindCriticalError=[]),this.__cbOnceOwnerUnbindCriticalError.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindCriticalError&&(this.__cbOnceOwnerUnbindCriticalError=[]),this.__cbOnceOwnerUnbindCriticalError.push(null);null==this.__cbOnceCriticalError&&(this.__cbOnceCriticalError=[]),this.__cbOnceCriticalError.push(t)},offCriticalError:function(e){if(null!=e){var n;null!=this.__cbOnCriticalError&&-1!=(n=this.__cbOnCriticalError.indexOf(e))&&(this.__cbOnCriticalError.splice(n,1),null!=(r=this.__cbOnOwnerUnbindCriticalError[n])&&r(),this.__cbOnOwnerUnbindCriticalError.splice(n,1)),null!=this.__cbOnceCriticalError&&-1!=(n=this.__cbOnceCriticalError.indexOf(e))&&(this.__cbOnceCriticalError.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindCriticalError[n])&&r(),this.__cbOnceOwnerUnbindCriticalError.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindCriticalError){for(var t=0,i=this.__cbOnOwnerUnbindCriticalError.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindCriticalError[s])&&r()}this.__cbOnOwnerUnbindCriticalError=null}if(null!=this.__cbOnceOwnerUnbindCriticalError){for(t=0,i=this.__cbOnceOwnerUnbindCriticalError.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindCriticalError[s])&&r()}this.__cbOnceOwnerUnbindCriticalError=null}this.__cbOnCriticalError=null,this.__cbOnceCriticalError=null}},listensCriticalError:function(){return null!=this.__cbOnCriticalError&&0<this.__cbOnCriticalError.length||null!=this.__cbOnceCriticalError&&0<this.__cbOnceCriticalError.length},emitBeginEnterBackground:function(){var e=0;if(null!=this.__cbOnBeginEnterBackground&&(e+=this.__cbOnBeginEnterBackground.length),null!=this.__cbOnceBeginEnterBackground&&(e+=this.__cbOnceBeginEnterBackground.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginEnterBackground)for(var s=0,r=this.__cbOnBeginEnterBackground.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnBeginEnterBackground[l],++i):--e}if(null!=this.__cbOnceBeginEnterBackground){for(var a=null,h=null,s=0,r=this.__cbOnceBeginEnterBackground.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceBeginEnterBackground[l],this.__cbOnceBeginEnterBackground[l]=null,c=this.__cbOnceOwnerUnbindBeginEnterBackground[l],(this.__cbOnceOwnerUnbindBeginEnterBackground[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginEnterBackground[l]),h.push(this.__cbOnceBeginEnterBackground[l]))}this.__cbOnceOwnerUnbindBeginEnterBackground=a,this.__cbOnceBeginEnterBackground=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onBeginEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginEnterBackground because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginEnterBackground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBeginEnterBackground&&(this.__cbOnOwnerUnbindBeginEnterBackground=[]),this.__cbOnOwnerUnbindBeginEnterBackground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBeginEnterBackground&&(this.__cbOnOwnerUnbindBeginEnterBackground=[]),this.__cbOnOwnerUnbindBeginEnterBackground.push(null);null==this.__cbOnBeginEnterBackground&&(this.__cbOnBeginEnterBackground=[]),this.__cbOnBeginEnterBackground.push(t)},onceBeginEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginEnterBackground because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginEnterBackground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBeginEnterBackground&&(this.__cbOnceOwnerUnbindBeginEnterBackground=[]),this.__cbOnceOwnerUnbindBeginEnterBackground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBeginEnterBackground&&(this.__cbOnceOwnerUnbindBeginEnterBackground=[]),this.__cbOnceOwnerUnbindBeginEnterBackground.push(null);null==this.__cbOnceBeginEnterBackground&&(this.__cbOnceBeginEnterBackground=[]),this.__cbOnceBeginEnterBackground.push(t)},offBeginEnterBackground:function(e){if(null!=e){var n;null!=this.__cbOnBeginEnterBackground&&-1!=(n=this.__cbOnBeginEnterBackground.indexOf(e))&&(this.__cbOnBeginEnterBackground.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBeginEnterBackground[n])&&r(),this.__cbOnOwnerUnbindBeginEnterBackground.splice(n,1)),null!=this.__cbOnceBeginEnterBackground&&-1!=(n=this.__cbOnceBeginEnterBackground.indexOf(e))&&(this.__cbOnceBeginEnterBackground.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBeginEnterBackground[n])&&r(),this.__cbOnceOwnerUnbindBeginEnterBackground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEnterBackground){for(var t=0,i=this.__cbOnOwnerUnbindBeginEnterBackground.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBeginEnterBackground[s])&&r()}this.__cbOnOwnerUnbindBeginEnterBackground=null}if(null!=this.__cbOnceOwnerUnbindBeginEnterBackground){for(t=0,i=this.__cbOnceOwnerUnbindBeginEnterBackground.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBeginEnterBackground[s])&&r()}this.__cbOnceOwnerUnbindBeginEnterBackground=null}this.__cbOnBeginEnterBackground=null,this.__cbOnceBeginEnterBackground=null}},listensBeginEnterBackground:function(){return null!=this.__cbOnBeginEnterBackground&&0<this.__cbOnBeginEnterBackground.length||null!=this.__cbOnceBeginEnterBackground&&0<this.__cbOnceBeginEnterBackground.length},emitFinishEnterBackground:function(){var e=0;if(null!=this.__cbOnFinishEnterBackground&&(e+=this.__cbOnFinishEnterBackground.length),null!=this.__cbOnceFinishEnterBackground&&(e+=this.__cbOnceFinishEnterBackground.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishEnterBackground)for(var s=0,r=this.__cbOnFinishEnterBackground.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnFinishEnterBackground[l],++i):--e}if(null!=this.__cbOnceFinishEnterBackground){for(var a=null,h=null,s=0,r=this.__cbOnceFinishEnterBackground.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceFinishEnterBackground[l],this.__cbOnceFinishEnterBackground[l]=null,c=this.__cbOnceOwnerUnbindFinishEnterBackground[l],(this.__cbOnceOwnerUnbindFinishEnterBackground[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishEnterBackground[l]),h.push(this.__cbOnceFinishEnterBackground[l]))}this.__cbOnceOwnerUnbindFinishEnterBackground=a,this.__cbOnceFinishEnterBackground=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onFinishEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishEnterBackground because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishEnterBackground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFinishEnterBackground&&(this.__cbOnOwnerUnbindFinishEnterBackground=[]),this.__cbOnOwnerUnbindFinishEnterBackground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFinishEnterBackground&&(this.__cbOnOwnerUnbindFinishEnterBackground=[]),this.__cbOnOwnerUnbindFinishEnterBackground.push(null);null==this.__cbOnFinishEnterBackground&&(this.__cbOnFinishEnterBackground=[]),this.__cbOnFinishEnterBackground.push(t)},onceFinishEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishEnterBackground because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishEnterBackground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFinishEnterBackground&&(this.__cbOnceOwnerUnbindFinishEnterBackground=[]),this.__cbOnceOwnerUnbindFinishEnterBackground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFinishEnterBackground&&(this.__cbOnceOwnerUnbindFinishEnterBackground=[]),this.__cbOnceOwnerUnbindFinishEnterBackground.push(null);null==this.__cbOnceFinishEnterBackground&&(this.__cbOnceFinishEnterBackground=[]),this.__cbOnceFinishEnterBackground.push(t)},offFinishEnterBackground:function(e){if(null!=e){var n;null!=this.__cbOnFinishEnterBackground&&-1!=(n=this.__cbOnFinishEnterBackground.indexOf(e))&&(this.__cbOnFinishEnterBackground.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFinishEnterBackground[n])&&r(),this.__cbOnOwnerUnbindFinishEnterBackground.splice(n,1)),null!=this.__cbOnceFinishEnterBackground&&-1!=(n=this.__cbOnceFinishEnterBackground.indexOf(e))&&(this.__cbOnceFinishEnterBackground.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFinishEnterBackground[n])&&r(),this.__cbOnceOwnerUnbindFinishEnterBackground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishEnterBackground){for(var t=0,i=this.__cbOnOwnerUnbindFinishEnterBackground.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFinishEnterBackground[s])&&r()}this.__cbOnOwnerUnbindFinishEnterBackground=null}if(null!=this.__cbOnceOwnerUnbindFinishEnterBackground){for(t=0,i=this.__cbOnceOwnerUnbindFinishEnterBackground.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFinishEnterBackground[s])&&r()}this.__cbOnceOwnerUnbindFinishEnterBackground=null}this.__cbOnFinishEnterBackground=null,this.__cbOnceFinishEnterBackground=null}},listensFinishEnterBackground:function(){return null!=this.__cbOnFinishEnterBackground&&0<this.__cbOnFinishEnterBackground.length||null!=this.__cbOnceFinishEnterBackground&&0<this.__cbOnceFinishEnterBackground.length},emitBeginEnterForeground:function(){var e=0;if(null!=this.__cbOnBeginEnterForeground&&(e+=this.__cbOnBeginEnterForeground.length),null!=this.__cbOnceBeginEnterForeground&&(e+=this.__cbOnceBeginEnterForeground.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginEnterForeground)for(var s=0,r=this.__cbOnBeginEnterForeground.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnBeginEnterForeground[l],++i):--e}if(null!=this.__cbOnceBeginEnterForeground){for(var a=null,h=null,s=0,r=this.__cbOnceBeginEnterForeground.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceBeginEnterForeground[l],this.__cbOnceBeginEnterForeground[l]=null,c=this.__cbOnceOwnerUnbindBeginEnterForeground[l],(this.__cbOnceOwnerUnbindBeginEnterForeground[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginEnterForeground[l]),h.push(this.__cbOnceBeginEnterForeground[l]))}this.__cbOnceOwnerUnbindBeginEnterForeground=a,this.__cbOnceBeginEnterForeground=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onBeginEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginEnterForeground because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginEnterForeground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBeginEnterForeground&&(this.__cbOnOwnerUnbindBeginEnterForeground=[]),this.__cbOnOwnerUnbindBeginEnterForeground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBeginEnterForeground&&(this.__cbOnOwnerUnbindBeginEnterForeground=[]),this.__cbOnOwnerUnbindBeginEnterForeground.push(null);null==this.__cbOnBeginEnterForeground&&(this.__cbOnBeginEnterForeground=[]),this.__cbOnBeginEnterForeground.push(t)},onceBeginEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginEnterForeground because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginEnterForeground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBeginEnterForeground&&(this.__cbOnceOwnerUnbindBeginEnterForeground=[]),this.__cbOnceOwnerUnbindBeginEnterForeground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBeginEnterForeground&&(this.__cbOnceOwnerUnbindBeginEnterForeground=[]),this.__cbOnceOwnerUnbindBeginEnterForeground.push(null);null==this.__cbOnceBeginEnterForeground&&(this.__cbOnceBeginEnterForeground=[]),this.__cbOnceBeginEnterForeground.push(t)},offBeginEnterForeground:function(e){if(null!=e){var n;null!=this.__cbOnBeginEnterForeground&&-1!=(n=this.__cbOnBeginEnterForeground.indexOf(e))&&(this.__cbOnBeginEnterForeground.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBeginEnterForeground[n])&&r(),this.__cbOnOwnerUnbindBeginEnterForeground.splice(n,1)),null!=this.__cbOnceBeginEnterForeground&&-1!=(n=this.__cbOnceBeginEnterForeground.indexOf(e))&&(this.__cbOnceBeginEnterForeground.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBeginEnterForeground[n])&&r(),this.__cbOnceOwnerUnbindBeginEnterForeground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEnterForeground){for(var t=0,i=this.__cbOnOwnerUnbindBeginEnterForeground.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBeginEnterForeground[s])&&r()}this.__cbOnOwnerUnbindBeginEnterForeground=null}if(null!=this.__cbOnceOwnerUnbindBeginEnterForeground){for(t=0,i=this.__cbOnceOwnerUnbindBeginEnterForeground.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBeginEnterForeground[s])&&r()}this.__cbOnceOwnerUnbindBeginEnterForeground=null}this.__cbOnBeginEnterForeground=null,this.__cbOnceBeginEnterForeground=null}},listensBeginEnterForeground:function(){return null!=this.__cbOnBeginEnterForeground&&0<this.__cbOnBeginEnterForeground.length||null!=this.__cbOnceBeginEnterForeground&&0<this.__cbOnceBeginEnterForeground.length},emitFinishEnterForeground:function(){var e=0;if(null!=this.__cbOnFinishEnterForeground&&(e+=this.__cbOnFinishEnterForeground.length),null!=this.__cbOnceFinishEnterForeground&&(e+=this.__cbOnceFinishEnterForeground.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishEnterForeground)for(var s=0,r=this.__cbOnFinishEnterForeground.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnFinishEnterForeground[l],++i):--e}if(null!=this.__cbOnceFinishEnterForeground){for(var a=null,h=null,s=0,r=this.__cbOnceFinishEnterForeground.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceFinishEnterForeground[l],this.__cbOnceFinishEnterForeground[l]=null,c=this.__cbOnceOwnerUnbindFinishEnterForeground[l],(this.__cbOnceOwnerUnbindFinishEnterForeground[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishEnterForeground[l]),h.push(this.__cbOnceFinishEnterForeground[l]))}this.__cbOnceOwnerUnbindFinishEnterForeground=a,this.__cbOnceFinishEnterForeground=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onFinishEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishEnterForeground because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishEnterForeground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFinishEnterForeground&&(this.__cbOnOwnerUnbindFinishEnterForeground=[]),this.__cbOnOwnerUnbindFinishEnterForeground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFinishEnterForeground&&(this.__cbOnOwnerUnbindFinishEnterForeground=[]),this.__cbOnOwnerUnbindFinishEnterForeground.push(null);null==this.__cbOnFinishEnterForeground&&(this.__cbOnFinishEnterForeground=[]),this.__cbOnFinishEnterForeground.push(t)},onceFinishEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishEnterForeground because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishEnterForeground(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFinishEnterForeground&&(this.__cbOnceOwnerUnbindFinishEnterForeground=[]),this.__cbOnceOwnerUnbindFinishEnterForeground.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFinishEnterForeground&&(this.__cbOnceOwnerUnbindFinishEnterForeground=[]),this.__cbOnceOwnerUnbindFinishEnterForeground.push(null);null==this.__cbOnceFinishEnterForeground&&(this.__cbOnceFinishEnterForeground=[]),this.__cbOnceFinishEnterForeground.push(t)},offFinishEnterForeground:function(e){if(null!=e){var n;null!=this.__cbOnFinishEnterForeground&&-1!=(n=this.__cbOnFinishEnterForeground.indexOf(e))&&(this.__cbOnFinishEnterForeground.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFinishEnterForeground[n])&&r(),this.__cbOnOwnerUnbindFinishEnterForeground.splice(n,1)),null!=this.__cbOnceFinishEnterForeground&&-1!=(n=this.__cbOnceFinishEnterForeground.indexOf(e))&&(this.__cbOnceFinishEnterForeground.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFinishEnterForeground[n])&&r(),this.__cbOnceOwnerUnbindFinishEnterForeground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishEnterForeground){for(var t=0,i=this.__cbOnOwnerUnbindFinishEnterForeground.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFinishEnterForeground[s])&&r()}this.__cbOnOwnerUnbindFinishEnterForeground=null}if(null!=this.__cbOnceOwnerUnbindFinishEnterForeground){for(t=0,i=this.__cbOnceOwnerUnbindFinishEnterForeground.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFinishEnterForeground[s])&&r()}this.__cbOnceOwnerUnbindFinishEnterForeground=null}this.__cbOnFinishEnterForeground=null,this.__cbOnceFinishEnterForeground=null}},listensFinishEnterForeground:function(){return null!=this.__cbOnFinishEnterForeground&&0<this.__cbOnFinishEnterForeground.length||null!=this.__cbOnceFinishEnterForeground&&0<this.__cbOnceFinishEnterForeground.length},emitBeginSortVisuals:function(){var e=0;if(null!=this.__cbOnBeginSortVisuals&&(e+=this.__cbOnBeginSortVisuals.length),null!=this.__cbOnceBeginSortVisuals&&(e+=this.__cbOnceBeginSortVisuals.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginSortVisuals)for(var s=0,r=this.__cbOnBeginSortVisuals.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnBeginSortVisuals[l],++i):--e}if(null!=this.__cbOnceBeginSortVisuals){for(var a=null,h=null,s=0,r=this.__cbOnceBeginSortVisuals.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceBeginSortVisuals[l],this.__cbOnceBeginSortVisuals[l]=null,c=this.__cbOnceOwnerUnbindBeginSortVisuals[l],(this.__cbOnceOwnerUnbindBeginSortVisuals[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginSortVisuals[l]),h.push(this.__cbOnceBeginSortVisuals[l]))}this.__cbOnceOwnerUnbindBeginSortVisuals=a,this.__cbOnceBeginSortVisuals=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onBeginSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginSortVisuals because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginSortVisuals(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBeginSortVisuals&&(this.__cbOnOwnerUnbindBeginSortVisuals=[]),this.__cbOnOwnerUnbindBeginSortVisuals.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBeginSortVisuals&&(this.__cbOnOwnerUnbindBeginSortVisuals=[]),this.__cbOnOwnerUnbindBeginSortVisuals.push(null);null==this.__cbOnBeginSortVisuals&&(this.__cbOnBeginSortVisuals=[]),this.__cbOnBeginSortVisuals.push(t)},onceBeginSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginSortVisuals because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginSortVisuals(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBeginSortVisuals&&(this.__cbOnceOwnerUnbindBeginSortVisuals=[]),this.__cbOnceOwnerUnbindBeginSortVisuals.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBeginSortVisuals&&(this.__cbOnceOwnerUnbindBeginSortVisuals=[]),this.__cbOnceOwnerUnbindBeginSortVisuals.push(null);null==this.__cbOnceBeginSortVisuals&&(this.__cbOnceBeginSortVisuals=[]),this.__cbOnceBeginSortVisuals.push(t)},offBeginSortVisuals:function(e){if(null!=e){var n;null!=this.__cbOnBeginSortVisuals&&-1!=(n=this.__cbOnBeginSortVisuals.indexOf(e))&&(this.__cbOnBeginSortVisuals.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBeginSortVisuals[n])&&r(),this.__cbOnOwnerUnbindBeginSortVisuals.splice(n,1)),null!=this.__cbOnceBeginSortVisuals&&-1!=(n=this.__cbOnceBeginSortVisuals.indexOf(e))&&(this.__cbOnceBeginSortVisuals.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBeginSortVisuals[n])&&r(),this.__cbOnceOwnerUnbindBeginSortVisuals.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginSortVisuals){for(var t=0,i=this.__cbOnOwnerUnbindBeginSortVisuals.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBeginSortVisuals[s])&&r()}this.__cbOnOwnerUnbindBeginSortVisuals=null}if(null!=this.__cbOnceOwnerUnbindBeginSortVisuals){for(t=0,i=this.__cbOnceOwnerUnbindBeginSortVisuals.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBeginSortVisuals[s])&&r()}this.__cbOnceOwnerUnbindBeginSortVisuals=null}this.__cbOnBeginSortVisuals=null,this.__cbOnceBeginSortVisuals=null}},listensBeginSortVisuals:function(){return null!=this.__cbOnBeginSortVisuals&&0<this.__cbOnBeginSortVisuals.length||null!=this.__cbOnceBeginSortVisuals&&0<this.__cbOnceBeginSortVisuals.length},emitFinishSortVisuals:function(){var e=0;if(null!=this.__cbOnFinishSortVisuals&&(e+=this.__cbOnFinishSortVisuals.length),null!=this.__cbOnceFinishSortVisuals&&(e+=this.__cbOnceFinishSortVisuals.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishSortVisuals)for(var s=0,r=this.__cbOnFinishSortVisuals.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnFinishSortVisuals[l],++i):--e}if(null!=this.__cbOnceFinishSortVisuals){for(var a=null,h=null,s=0,r=this.__cbOnceFinishSortVisuals.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceFinishSortVisuals[l],this.__cbOnceFinishSortVisuals[l]=null,c=this.__cbOnceOwnerUnbindFinishSortVisuals[l],(this.__cbOnceOwnerUnbindFinishSortVisuals[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishSortVisuals[l]),h.push(this.__cbOnceFinishSortVisuals[l]))}this.__cbOnceOwnerUnbindFinishSortVisuals=a,this.__cbOnceFinishSortVisuals=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onFinishSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishSortVisuals because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishSortVisuals(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFinishSortVisuals&&(this.__cbOnOwnerUnbindFinishSortVisuals=[]),this.__cbOnOwnerUnbindFinishSortVisuals.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFinishSortVisuals&&(this.__cbOnOwnerUnbindFinishSortVisuals=[]),this.__cbOnOwnerUnbindFinishSortVisuals.push(null);null==this.__cbOnFinishSortVisuals&&(this.__cbOnFinishSortVisuals=[]),this.__cbOnFinishSortVisuals.push(t)},onceFinishSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishSortVisuals because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishSortVisuals(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFinishSortVisuals&&(this.__cbOnceOwnerUnbindFinishSortVisuals=[]),this.__cbOnceOwnerUnbindFinishSortVisuals.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFinishSortVisuals&&(this.__cbOnceOwnerUnbindFinishSortVisuals=[]),this.__cbOnceOwnerUnbindFinishSortVisuals.push(null);null==this.__cbOnceFinishSortVisuals&&(this.__cbOnceFinishSortVisuals=[]),this.__cbOnceFinishSortVisuals.push(t)},offFinishSortVisuals:function(e){if(null!=e){var n;null!=this.__cbOnFinishSortVisuals&&-1!=(n=this.__cbOnFinishSortVisuals.indexOf(e))&&(this.__cbOnFinishSortVisuals.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFinishSortVisuals[n])&&r(),this.__cbOnOwnerUnbindFinishSortVisuals.splice(n,1)),null!=this.__cbOnceFinishSortVisuals&&-1!=(n=this.__cbOnceFinishSortVisuals.indexOf(e))&&(this.__cbOnceFinishSortVisuals.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFinishSortVisuals[n])&&r(),this.__cbOnceOwnerUnbindFinishSortVisuals.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishSortVisuals){for(var t=0,i=this.__cbOnOwnerUnbindFinishSortVisuals.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFinishSortVisuals[s])&&r()}this.__cbOnOwnerUnbindFinishSortVisuals=null}if(null!=this.__cbOnceOwnerUnbindFinishSortVisuals){for(t=0,i=this.__cbOnceOwnerUnbindFinishSortVisuals.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFinishSortVisuals[s])&&r()}this.__cbOnceOwnerUnbindFinishSortVisuals=null}this.__cbOnFinishSortVisuals=null,this.__cbOnceFinishSortVisuals=null}},listensFinishSortVisuals:function(){return null!=this.__cbOnFinishSortVisuals&&0<this.__cbOnFinishSortVisuals.length||null!=this.__cbOnceFinishSortVisuals&&0<this.__cbOnceFinishSortVisuals.length},emitBeginDraw:function(){var e=0;if(null!=this.__cbOnBeginDraw&&(e+=this.__cbOnBeginDraw.length),null!=this.__cbOnceBeginDraw&&(e+=this.__cbOnceBeginDraw.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginDraw)for(var s=0,r=this.__cbOnBeginDraw.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnBeginDraw[l],++i):--e}if(null!=this.__cbOnceBeginDraw){for(var a=null,h=null,s=0,r=this.__cbOnceBeginDraw.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceBeginDraw[l],this.__cbOnceBeginDraw[l]=null,c=this.__cbOnceOwnerUnbindBeginDraw[l],(this.__cbOnceOwnerUnbindBeginDraw[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginDraw[l]),h.push(this.__cbOnceBeginDraw[l]))}this.__cbOnceOwnerUnbindBeginDraw=a,this.__cbOnceBeginDraw=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onBeginDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginDraw because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginDraw(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBeginDraw&&(this.__cbOnOwnerUnbindBeginDraw=[]),this.__cbOnOwnerUnbindBeginDraw.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBeginDraw&&(this.__cbOnOwnerUnbindBeginDraw=[]),this.__cbOnOwnerUnbindBeginDraw.push(null);null==this.__cbOnBeginDraw&&(this.__cbOnBeginDraw=[]),this.__cbOnBeginDraw.push(t)},onceBeginDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginDraw because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginDraw(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBeginDraw&&(this.__cbOnceOwnerUnbindBeginDraw=[]),this.__cbOnceOwnerUnbindBeginDraw.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBeginDraw&&(this.__cbOnceOwnerUnbindBeginDraw=[]),this.__cbOnceOwnerUnbindBeginDraw.push(null);null==this.__cbOnceBeginDraw&&(this.__cbOnceBeginDraw=[]),this.__cbOnceBeginDraw.push(t)},offBeginDraw:function(e){if(null!=e){var n;null!=this.__cbOnBeginDraw&&-1!=(n=this.__cbOnBeginDraw.indexOf(e))&&(this.__cbOnBeginDraw.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBeginDraw[n])&&r(),this.__cbOnOwnerUnbindBeginDraw.splice(n,1)),null!=this.__cbOnceBeginDraw&&-1!=(n=this.__cbOnceBeginDraw.indexOf(e))&&(this.__cbOnceBeginDraw.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBeginDraw[n])&&r(),this.__cbOnceOwnerUnbindBeginDraw.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginDraw){for(var t=0,i=this.__cbOnOwnerUnbindBeginDraw.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBeginDraw[s])&&r()}this.__cbOnOwnerUnbindBeginDraw=null}if(null!=this.__cbOnceOwnerUnbindBeginDraw){for(t=0,i=this.__cbOnceOwnerUnbindBeginDraw.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBeginDraw[s])&&r()}this.__cbOnceOwnerUnbindBeginDraw=null}this.__cbOnBeginDraw=null,this.__cbOnceBeginDraw=null}},listensBeginDraw:function(){return null!=this.__cbOnBeginDraw&&0<this.__cbOnBeginDraw.length||null!=this.__cbOnceBeginDraw&&0<this.__cbOnceBeginDraw.length},emitFinishDraw:function(){var e=0;if(null!=this.__cbOnFinishDraw&&(e+=this.__cbOnFinishDraw.length),null!=this.__cbOnceFinishDraw&&(e+=this.__cbOnceFinishDraw.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishDraw)for(var s=0,r=this.__cbOnFinishDraw.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnFinishDraw[l],++i):--e}if(null!=this.__cbOnceFinishDraw){for(var a=null,h=null,s=0,r=this.__cbOnceFinishDraw.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceFinishDraw[l],this.__cbOnceFinishDraw[l]=null,c=this.__cbOnceOwnerUnbindFinishDraw[l],(this.__cbOnceOwnerUnbindFinishDraw[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishDraw[l]),h.push(this.__cbOnceFinishDraw[l]))}this.__cbOnceOwnerUnbindFinishDraw=a,this.__cbOnceFinishDraw=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onFinishDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishDraw because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishDraw(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFinishDraw&&(this.__cbOnOwnerUnbindFinishDraw=[]),this.__cbOnOwnerUnbindFinishDraw.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFinishDraw&&(this.__cbOnOwnerUnbindFinishDraw=[]),this.__cbOnOwnerUnbindFinishDraw.push(null);null==this.__cbOnFinishDraw&&(this.__cbOnFinishDraw=[]),this.__cbOnFinishDraw.push(t)},onceFinishDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishDraw because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishDraw(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFinishDraw&&(this.__cbOnceOwnerUnbindFinishDraw=[]),this.__cbOnceOwnerUnbindFinishDraw.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFinishDraw&&(this.__cbOnceOwnerUnbindFinishDraw=[]),this.__cbOnceOwnerUnbindFinishDraw.push(null);null==this.__cbOnceFinishDraw&&(this.__cbOnceFinishDraw=[]),this.__cbOnceFinishDraw.push(t)},offFinishDraw:function(e){if(null!=e){var n;null!=this.__cbOnFinishDraw&&-1!=(n=this.__cbOnFinishDraw.indexOf(e))&&(this.__cbOnFinishDraw.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFinishDraw[n])&&r(),this.__cbOnOwnerUnbindFinishDraw.splice(n,1)),null!=this.__cbOnceFinishDraw&&-1!=(n=this.__cbOnceFinishDraw.indexOf(e))&&(this.__cbOnceFinishDraw.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFinishDraw[n])&&r(),this.__cbOnceOwnerUnbindFinishDraw.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishDraw){for(var t=0,i=this.__cbOnOwnerUnbindFinishDraw.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFinishDraw[s])&&r()}this.__cbOnOwnerUnbindFinishDraw=null}if(null!=this.__cbOnceOwnerUnbindFinishDraw){for(t=0,i=this.__cbOnceOwnerUnbindFinishDraw.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFinishDraw[s])&&r()}this.__cbOnceOwnerUnbindFinishDraw=null}this.__cbOnFinishDraw=null,this.__cbOnceFinishDraw=null}},listensFinishDraw:function(){return null!=this.__cbOnFinishDraw&&0<this.__cbOnFinishDraw.length||null!=this.__cbOnceFinishDraw&&0<this.__cbOnceFinishDraw.length},emitLowMemory:function(){var e=0;if(null!=this.__cbOnLowMemory&&(e+=this.__cbOnLowMemory.length),null!=this.__cbOnceLowMemory&&(e+=this.__cbOnceLowMemory.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnLowMemory)for(var s=0,r=this.__cbOnLowMemory.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnLowMemory[l],++i):--e}if(null!=this.__cbOnceLowMemory){for(var a=null,h=null,s=0,r=this.__cbOnceLowMemory.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceLowMemory[l],this.__cbOnceLowMemory[l]=null,c=this.__cbOnceOwnerUnbindLowMemory[l],(this.__cbOnceOwnerUnbindLowMemory[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindLowMemory[l]),h.push(this.__cbOnceLowMemory[l]))}this.__cbOnceOwnerUnbindLowMemory=a,this.__cbOnceLowMemory=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onLowMemory:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event lowMemory because owner is destroyed!");var s=function(e){null!=t&&(i.offLowMemory(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindLowMemory&&(this.__cbOnOwnerUnbindLowMemory=[]),this.__cbOnOwnerUnbindLowMemory.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindLowMemory&&(this.__cbOnOwnerUnbindLowMemory=[]),this.__cbOnOwnerUnbindLowMemory.push(null);null==this.__cbOnLowMemory&&(this.__cbOnLowMemory=[]),this.__cbOnLowMemory.push(t)},onceLowMemory:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event lowMemory because owner is destroyed!");var s=function(e){null!=t&&(i.offLowMemory(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindLowMemory&&(this.__cbOnceOwnerUnbindLowMemory=[]),this.__cbOnceOwnerUnbindLowMemory.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindLowMemory&&(this.__cbOnceOwnerUnbindLowMemory=[]),this.__cbOnceOwnerUnbindLowMemory.push(null);null==this.__cbOnceLowMemory&&(this.__cbOnceLowMemory=[]),this.__cbOnceLowMemory.push(t)},offLowMemory:function(e){if(null!=e){var n;null!=this.__cbOnLowMemory&&-1!=(n=this.__cbOnLowMemory.indexOf(e))&&(this.__cbOnLowMemory.splice(n,1),null!=(r=this.__cbOnOwnerUnbindLowMemory[n])&&r(),this.__cbOnOwnerUnbindLowMemory.splice(n,1)),null!=this.__cbOnceLowMemory&&-1!=(n=this.__cbOnceLowMemory.indexOf(e))&&(this.__cbOnceLowMemory.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindLowMemory[n])&&r(),this.__cbOnceOwnerUnbindLowMemory.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindLowMemory){for(var t=0,i=this.__cbOnOwnerUnbindLowMemory.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindLowMemory[s])&&r()}this.__cbOnOwnerUnbindLowMemory=null}if(null!=this.__cbOnceOwnerUnbindLowMemory){for(t=0,i=this.__cbOnceOwnerUnbindLowMemory.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindLowMemory[s])&&r()}this.__cbOnceOwnerUnbindLowMemory=null}this.__cbOnLowMemory=null,this.__cbOnceLowMemory=null}},listensLowMemory:function(){return null!=this.__cbOnLowMemory&&0<this.__cbOnLowMemory.length||null!=this.__cbOnceLowMemory&&0<this.__cbOnceLowMemory.length},emitTerminate:function(){var e=0;if(null!=this.__cbOnTerminate&&(e+=this.__cbOnTerminate.length),null!=this.__cbOnceTerminate&&(e+=this.__cbOnceTerminate.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnTerminate)for(var s=0,r=this.__cbOnTerminate.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnTerminate[l],++i):--e}if(null!=this.__cbOnceTerminate){for(var a=null,h=null,s=0,r=this.__cbOnceTerminate.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceTerminate[l],this.__cbOnceTerminate[l]=null,c=this.__cbOnceOwnerUnbindTerminate[l],(this.__cbOnceOwnerUnbindTerminate[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindTerminate[l]),h.push(this.__cbOnceTerminate[l]))}this.__cbOnceOwnerUnbindTerminate=a,this.__cbOnceTerminate=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onTerminate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event terminate because owner is destroyed!");var s=function(e){null!=t&&(i.offTerminate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTerminate&&(this.__cbOnOwnerUnbindTerminate=[]),this.__cbOnOwnerUnbindTerminate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTerminate&&(this.__cbOnOwnerUnbindTerminate=[]),this.__cbOnOwnerUnbindTerminate.push(null);null==this.__cbOnTerminate&&(this.__cbOnTerminate=[]),this.__cbOnTerminate.push(t)},onceTerminate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event terminate because owner is destroyed!");var s=function(e){null!=t&&(i.offTerminate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTerminate&&(this.__cbOnceOwnerUnbindTerminate=[]),this.__cbOnceOwnerUnbindTerminate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTerminate&&(this.__cbOnceOwnerUnbindTerminate=[]),this.__cbOnceOwnerUnbindTerminate.push(null);null==this.__cbOnceTerminate&&(this.__cbOnceTerminate=[]),this.__cbOnceTerminate.push(t)},offTerminate:function(e){if(null!=e){var n;null!=this.__cbOnTerminate&&-1!=(n=this.__cbOnTerminate.indexOf(e))&&(this.__cbOnTerminate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTerminate[n])&&r(),this.__cbOnOwnerUnbindTerminate.splice(n,1)),null!=this.__cbOnceTerminate&&-1!=(n=this.__cbOnceTerminate.indexOf(e))&&(this.__cbOnceTerminate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTerminate[n])&&r(),this.__cbOnceOwnerUnbindTerminate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTerminate){for(var t=0,i=this.__cbOnOwnerUnbindTerminate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTerminate[s])&&r()}this.__cbOnOwnerUnbindTerminate=null}if(null!=this.__cbOnceOwnerUnbindTerminate){for(t=0,i=this.__cbOnceOwnerUnbindTerminate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTerminate[s])&&r()}this.__cbOnceOwnerUnbindTerminate=null}this.__cbOnTerminate=null,this.__cbOnceTerminate=null}},listensTerminate:function(){return null!=this.__cbOnTerminate&&0<this.__cbOnTerminate.length||null!=this.__cbOnceTerminate&&0<this.__cbOnceTerminate.length},_onceImmediateWithOwner:function(e,n){this._onceImmediate(function(){(null==e||0<=e._lifecycleState)&&n()})},_onceImmediate:function(e){if(null==e)throw Y.thrown("Immediate callback should not be null!");this.immediateCallbacksLen<this.immediateCallbacksCapacity?(this.immediateCallbacks[this.immediateCallbacksLen]=e,this.immediateCallbacksLen++):(this.immediateCallbacks[this.immediateCallbacksLen++]=e,this.immediateCallbacksCapacity++)},_oncePostFlushImmediateWithOwner:function(e,n,t){this._oncePostFlushImmediate(function(){(null==e||0<=e._lifecycleState)&&n()},t)},_oncePostFlushImmediate:function(n,e){var t=this;e?ae.app._onceImmediate(function(){var e=!1;t._oncePostFlushImmediate(n,e=null==e?!0:e)}):0==this.immediateCallbacksLen?n():this.postFlushImmediateCallbacksLen<this.postFlushImmediateCallbacksCapacity?(this.postFlushImmediateCallbacks[this.postFlushImmediateCallbacksLen]=n,this.postFlushImmediateCallbacksLen++):(this.postFlushImmediateCallbacks[this.postFlushImmediateCallbacksLen++]=n,this.postFlushImmediateCallbacksCapacity++)},flushImmediate:function(){for(var e=!1;0<this.immediateCallbacksLen;){for(var e=!0,n=(c=w.pool(this.immediateCallbacksLen)).get(),t=this.immediateCallbacksLen,i=this.immediateCallbacksLen=0,s=t;i<s;){var r=i++;n.vector[r]=this.immediateCallbacks[r],this.immediateCallbacks[r]=null}for(var l=0,a=t;l<a;){var h=l++;(0,n.vector[h])()}c.release(n)}if(0<this.postFlushImmediateCallbacksLen){for(var c,n=(c=w.pool(this.postFlushImmediateCallbacksLen)).get(),t=this.postFlushImmediateCallbacksLen,i=this.postFlushImmediateCallbacksLen=0,s=t;i<s;){r=i++;n.vector[r]=this.postFlushImmediateCallbacks[r],this.postFlushImmediateCallbacks[r]=null}for(i=0,s=t;i<s;){r=i++;(0,n.vector[r])()}c.release(n)}return e},onceXUpdates:function(e,n,t){for(var i=this._xUpdatesHandlersPool,s=0<i.availableItems.length?i.availableItems.pop():null,r=((s=null==s?new xe:s).owner=e,s.numUpdates=n,s.callback=t,!1),l=0,a=this._xUpdatesHandlers.length;l<a;){var h=l++;if(null==this._xUpdatesHandlers[h]){this._xUpdatesHandlers[h]=s,r=!0;break}}r||this._xUpdatesHandlers.push(s)},offXUpdates:function(e){for(var n=!1,t=0,i=this._xUpdatesHandlers.length;t<i;){var s=t++,r=this._xUpdatesHandlers[s];r.callback==e&&(r.reset(),this._xUpdatesHandlersPool.recycle(r),n=!(this._xUpdatesHandlers[s]=null))}n&&this.cleanXUpdatesNullValues()},tickOnceXUpdates:function(){for(var e=0,n=!1,t=0,i=this._xUpdatesHandlers.length;t<i;){var s,r=t++,l=this._xUpdatesHandlers[r];null!=l&&(l.numUpdates--,l.numUpdates<=0)&&((null==(s=l.owner)||0<=s._lifecycleState)&&(this._xUpdatesToCallNow[e]=l.callback,++e),n=!(this._xUpdatesHandlers[r]=null))}if(0<e)for(t=0,i=e;t<i;){var r=t++,a=this._xUpdatesToCallNow[r];this._xUpdatesToCallNow[r]=null,a()}n&&this.cleanXUpdatesNullValues()},cleanXUpdatesNullValues:function(){for(var e=0,n=0,t=this._xUpdatesHandlers.length;e<t;){do{}while(null==this._xUpdatesHandlers[e]&&(++n,++e<t));0!=n&&e<t&&(this._xUpdatesHandlers[e-n]=this._xUpdatesHandlers[e]),++e}var i=this._xUpdatesHandlers,s=t-n;if(i.length!=s)if(i.length>s)i.splice(s,i.length-s);else for(var r=i;r.length<s;)r.push(null)},get_computedFps:function(){return this._computeFps.fps},get_scenes:function(){return this.lazyScenes&&(this.lazyScenes=!1,this.scenes=Gn.get_shared()),this.scenes},set_scenes:function(e){return this.scenes=e},quit:function(){Rn.quit()},backendReady:function(){var n=this;if(this.backend.onUpdate(this,$bind(this,this.updatePreReady)),this.persistent=new Mn("app"),this.textInput=new et,this.bindSettings(),this.screen.backendReady(),null!=ae.preInitCallbacks){for(var e=0,t=[].concat(ae.preInitCallbacks);e<t.length;){var i=t[e];++e,i()}ae.preInitCallbacks=null}this.initFieldConverters(),null!=this.settings.collections&&this.initCollections(this.settings.collections(),this.settings.appInfo);var s=this.assets,r=this.settings.defaultShader,l=r.__name__.split("."),a=l.pop(),h=(a=a.charAt(0).toLowerCase()+le.substr(a,1,null),0<l.length?l.join("_")+"_"+a:a),c=new zn(h,null,null),s=(c.shaderClass=r,s.addAsset(c),this.assets),h=(a=(a=(l=(r=Pi).__name__.split(".")).pop()).charAt(0).toLowerCase()+le.substr(a,1,null),0<l.length?l.join("_")+"_"+a:a),s=((c=new zn(h,null,null)).shaderClass=r,s.addAsset(c),this.assets),h=(a=(a=(l=(r=Fi).__name__.split(".")).pop()).charAt(0).toLowerCase()+le.substr(a,1,null),0<l.length?l.join("_")+"_"+a:a);(c=new zn(h,null,null)).shaderClass=r,s.addAsset(c),this.assets.onceComplete(this,function(e){n.assets._add(n.settings.defaultFont,null,null),n.assets._add("image:white",null,null),n.assets.onceComplete(n,function(e){e?(n.defaultFont=n.assets.font(n.settings.defaultFont),n.defaultWhiteTexture=n.assets.texture("image:white"),e=n.assets._shaderFromClass(n.settings.defaultShader),n.defaultTexturedShader=e,n.logger.success("Default assets loaded.",{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:922,className:"ceramic.App",methodName:"backendReady"}),n.assetsLoaded()):ae.app.logger.error("Failed to load default assets.",{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:925,className:"ceramic.App",methodName:"backendReady"})}),n.emitDefaultAssetsLoad(n.assets),n.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:933,className:"ceramic.App",methodName:"backendReady"}),n.assets.immediate.flush(),n.flushImmediate()}),this.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:939,className:"ceramic.App",methodName:"backendReady"}),this.assets.immediate.flush(),this.flushImmediate()},bindSettings:function(){this.settings.onTargetFpsChange(this,function(e,n){ae.app.backend.setTargetFps(e)}),ae.app.backend.setTargetFps(this.settings.get_targetFps())},initFieldConverters:function(){var e=this.converters,n=new ze,e=(e.h["ceramic.Texture"]=n,this.converters),n=new Ge,e=(e.h["ceramic.BitmapFont"]=n,this.converters),n=new Ke,e=(e.h["ceramic.FragmentData"]=n,this.converters),n=new Le,e=(e.h["ceramic.Color"]=n,this.converters),n=new Ve,e=(e.h["Map<String,String>"]=n,this.converters),n=new Ve,e=(e.h["Map<String,Bool>"]=n,this.converters),n=new Ve,e=(e.h["ceramic.ReadOnlyMap<String,String>"]=n,this.converters),n=new Ve,e=(e.h["ceramic.ReadOnlyMap<String,Bool>"]=n,this.converters),n=new Ne,e=(e.h["Array<Float>"]=n,this.converters),n=new Ne,e=(e.h["Array<Int>"]=n,this.converters),n=new Ne,e=(e.h["Array<String>"]=n,this.converters),n=new Ne,e=(e.h["ceramic.ReadOnlyArray<Float>"]=n,this.converters),n=new Ne,e=(e.h["ceramic.ReadOnlyArray<Int>"]=n,this.converters),n=new Ne,e=(e.h["ceramic.ReadOnlyArray<String>"]=n,this.converters),n=new We,e=(e.h["Map<String,ceramic.Component>"]=n,this.converters),n=new We,e=(e.h["ceramic.ReadOnlyMap<String,ceramic.Component>"]=n,this.converters),n=new He;e.h["ceramic.IntBoolMap"]=n},initCollections:function(p,f){for(var O=this,e=(null==f&&(f=this.info),Object.create(null)),n=0,t=0,i=P.fields(f.collections);t<i.length;)for(var s=i[t],r=(++t,0),l=P.fields(P.field(f.collections,s));r<l.length;){var a=l[r],a=(++r,P.field(P.field(f.collections,s),a));"string"==typeof a||null==(a=a.data)||Object.prototype.hasOwnProperty.call(e,a)||(e[a]=!0,this.assets.addDatabase(a),++n)}0<n&&this.assets.onceComplete(this,function(e){for(var n=0,t=P.fields(f.collections);n<t.length;)for(var i=t[n],s=(++n,0),r=P.fields(P.field(f.collections,i));s<r.length;){var l=r[s],a=(++s,P.field(P.field(f.collections,i),l));if("string"!=typeof a){var h=a.data;if(null!=h){for(var c=O.assets.database(h),o=P.field(p,l),h=a.type,u=x[h],_=0;_<c.length;){var d=c[_],b=(++_,B.createInstance(u,[null,null]));b.setRawData(d),o.push(b)}o.synchronize()}}}})},assetsLoaded:function(){this.runNextLoader()},runNextLoader:function(){0<this.loaders.length?this.loaders.shift()($bind(this,this.runNextLoader)):(this.loaders=null,this.runReady())},runReady:function(){var s=this;Rn.postAppInit(),this.emitReady(),this.screen.resize(),this.backend.offUpdate($bind(this,this.updatePreReady)),this.backend.onUpdate(this,$bind(this,this.update)),this.backend.onRender(this,$bind(this,this.render)),this.backend.input.onKeyDown(this,function(e){s.beginUpdateCallbacks.push(function(){s.input.emitKeyDown(e)})}),this.backend.input.onKeyUp(this,function(e){s.beginUpdateCallbacks.push(function(){s.input.emitKeyUp(e)})}),this.backend.input.onGamepadEnable(this,function(e,n){s.beginUpdateCallbacks.push(function(){s.input.emitGamepadEnable(e,n)})}),this.backend.input.onGamepadDisable(this,function(e){s.beginUpdateCallbacks.push(function(){s.input.emitGamepadDisable(e)})}),this.backend.input.onGamepadDown(this,function(e,n){s.beginUpdateCallbacks.push(function(){s.input.emitGamepadDown(e,n)})}),this.backend.input.onGamepadUp(this,function(e,n){s.beginUpdateCallbacks.push(function(){s.input.emitGamepadUp(e,n)})}),this.backend.input.onGamepadGyro(this,function(e,n,t,i){s.beginUpdateCallbacks.push(function(){s.input.emitGamepadGyro(e,n,t,i)})}),this.backend.input.onGamepadAxis(this,function(e,n,t){s.beginUpdateCallbacks.push(function(){s.input.emitGamepadAxis(e,n,t)})})},updatePreReady:function(e){ne.flushAllInstancesImmediate(),this.flushImmediate()},update:function(e){999999999<++this.frame&&(this.frame-=999999999);var n=e;if(n>this.settings.get_maxDelta()&&(n=this.settings.get_maxDelta()),0<=this.settings.get_overrideDelta()&&(n=this.settings.get_overrideDelta()),this._computeFps.addFrame(n),this.delta=n,this.realDelta=e,ut.update(n,e),Nn.tick(),this.screen.updatePointerOverState(n),this.inUpdate=!0,this.screen.resetDeltas(),this.input.resetDeltas(),0<this.beginUpdateCallbacks.length)for(var t=this.beginUpdateCallbacks,i=(this.beginUpdateCallbacks=[],0);i<t.length;){var s=t[i];++i,s()}for(this.emitPreUpdate(n),this.systems.earlyUpdate(n),ne.flushAllInstancesImmediate(),this.flushImmediate(),0<n&&(G.tick(n),this.flushImmediate()),this.emitUpdate(n),this.tickOnceXUpdates(),this.flushImmediate(),this.systems.lateUpdate(n),this.emitPostUpdate(n),this.flushImmediate();0<this.disposedEntities.length;)this.disposedEntities.shift().destroy();this.syncPendingVisuals();var r,l=this.visuals,a=0,h=!1;do{this.visualsContentDirty=!1;(O=this.screen.matrix).changedDirty&&(O.changed=O.tx!=O._txPrev||O.ty!=O._tyPrev||O.a!=O._aPrev||O.b!=O._bPrev||O.c!=O._cPrev||O.d!=O._dPrev,O.changedDirty=!1),this.screen.matrix.changed&&this.screen.matrix.emitChange();for(var i=0,c=l.length;i<c;)0<=(v=l[f=i++])._lifecycleState&&(v.touchableDirty&&v.computeTouchable(),v.contentDirty)&&(v.visibilityDirty&&v.computeVisibility(),v.computedVisible)&&v.computeContent();for(var o=0,u=l.length;o<u;){var _=l[o++];0<=_._lifecycleState&&null!=_.transform&&((x=_.transform).changedDirty&&(x.changed=x.tx!=x._txPrev||x.ty!=x._tyPrev||x.a!=x._aPrev||x.b!=x._bPrev||x.c!=x._cPrev||x.d!=x._dPrev,x.changedDirty=!1),_.transform.changed)&&_.transform.emitChange()}if(9999<a++){if(h&&this.visualsContentDirty)throw Y.thrown("Failed to update visuals because flushImmediate() is being called continuously and visuals content stays dirty.");if(h)throw Y.thrown("Failed to update visuals because flushImmediate() is being called continuously.");for(var d=0,b=l.length;d<b;){var p=l[d++];if(0<=p._lifecycleState&&p.contentDirty)throw Y.thrown("Failed to update visuals because visuals content stays dirty. ("+L.string(p)+")")}}}while(h=this.flushImmediate(),r=this.syncPendingVisuals(),h||this.visualsContentDirty||r);for(i=0,c=this.renderTextures.length;i<c;){var f=i++;null!=(M=this.renderTextures[f]).dependingTextures&&M.dependingTextures.clear()}for(i=0,c=l.length;i<c;){var O,g,m,w,v=l[f=i++];if(0<=v._lifecycleState)if(v.renderTargetDirty&&v.computeRenderTarget(),v.matrixDirty&&v.computeMatrix(),v.visibilityDirty&&v.computeVisibility(),v.computedVisible)if(v.clipDirty&&v.computeClip(),null!=v.computedRenderTarget)if(null!=v.asQuad){if(null!=v.asQuad._texture&&(O=v.computedRenderTarget,g=v.asQuad._texture,null==O.dependingTextures&&(O.dependingTextures=new ke),I=O.dependingTextures.intMap.h[0|g.index],O.dependingTextures.set(g.index,(null!=I?I:0)+1)),null!=v.shader&&null!=v.shader.usedTextures)for(var y=v.shader.usedTextures,o=0,u=y.length;o<u;){var U=o++,x=v.computedRenderTarget,U=y[U],C=(null==x.dependingTextures&&(x.dependingTextures=new ke),x.dependingTextures.intMap.h[0|U.index]);x.dependingTextures.set(U.index,(null!=C?C:0)+1)}}else if(null!=v.asMesh)if(null!=v.asMesh.texture&&(g=v.computedRenderTarget,m=v.asMesh.texture,null==g.dependingTextures&&(g.dependingTextures=new ke),w=g.dependingTextures.intMap.h[0|m.index],g.dependingTextures.set(m.index,(null!=w?w:0)+1)),null!=v.shader&&null!=v.shader.usedTextures)for(var D=v.shader.usedTextures,d=0,b=D.length;d<b;){var T=d++,S=v.computedRenderTarget,T=D[T],E=(null==S.dependingTextures&&(S.dependingTextures=new ke),S.dependingTextures.intMap.h[0|T.index]);S.dependingTextures.set(T.index,(null!=E?E:0)+1)}}this.computeHierarchy();var A=this.renderTextures;if(0!=A.length){for(var M,R=A.length,i=0,c=R;i<c;)(M=A[f=i++]).priority=0;for(i=0,c=R;i<c;)for(var P=A[f=i++],o=0,u=R;o<u;){var F=A[o++];null!=P.dependingTextures&&0<(null!=(I=P.dependingTextures.intMap.h[0|F.index])?I:0)&&F.priority<=P.priority&&(F.priority=P.priority+1)}for(i=0,c=R;i<c;)for(P=A[f=i++],o=0,u=R;o<u;){var I,F=A[o++];null!=P.dependingTextures&&0<(null!=(I=P.dependingTextures.intMap.h[0|F.index])?I:0)&&F.priority<=P.priority&&(F.priority=P.priority+1)}}this.syncDestroyedVisuals();l=this.visuals;this.emitBeginSortVisuals(),Xn.rec(l,0,l.length),this.emitFinishSortVisuals(),this.inUpdate=!1},render:function(){this.emitBeginDraw(),this.backend.draw.draw(this.visuals),this.emitFinishDraw(),G.endFrame()},addVisual:function(e){this.pendingVisuals.push(e)},removeVisual:function(e){this.destroyedVisuals.push(e)},syncPendingVisuals:function(){if(0<this.pendingVisuals.length){for(;0<this.pendingVisuals.length;)this.visuals.push(this.pendingVisuals.pop());return this.hierarchyDirty=!0}return!1},syncDestroyedVisuals:function(){if(0<this.destroyedVisuals.length){for(var e=0,n=0,t=this.visuals.length;e<t;){do{}while(this.visuals[e]._lifecycleState<0&&(++n,++e<t));0!=n&&e<t&&(this.visuals[e-n]=this.visuals[e]),++e}var i=this.destroyedVisuals;if(0!=i.length)if(0<i.length)i.splice(0,i.length);else for(var s=i;s.length<0;)s.push(null);var r=t-n;if((i=this.visuals).length!=r)if(i.length>r)i.splice(r,i.length-r);else for(s=i;s.length<r;)s.push(null);this.hierarchyDirty=!0}},updateVisuals:function(e){var n,t=0,i=!1;do{this.visualsContentDirty=!1;(b=this.screen.matrix).changedDirty&&(b.changed=b.tx!=b._txPrev||b.ty!=b._tyPrev||b.a!=b._aPrev||b.b!=b._bPrev||b.c!=b._cPrev||b.d!=b._dPrev,b.changedDirty=!1),this.screen.matrix.changed&&this.screen.matrix.emitChange();for(var s=0,r=e.length;s<r;)0<=(g=e[_=s++])._lifecycleState&&(g.touchableDirty&&g.computeTouchable(),g.contentDirty)&&(g.visibilityDirty&&g.computeVisibility(),g.computedVisible)&&g.computeContent();for(var l=0,a=e.length;l<a;){var h=e[l++];0<=h._lifecycleState&&null!=h.transform&&((v=h.transform).changedDirty&&(v.changed=v.tx!=v._txPrev||v.ty!=v._tyPrev||v.a!=v._aPrev||v.b!=v._bPrev||v.c!=v._cPrev||v.d!=v._dPrev,v.changedDirty=!1),h.transform.changed)&&h.transform.emitChange()}if(9999<t++){if(i&&this.visualsContentDirty)throw Y.thrown("Failed to update visuals because flushImmediate() is being called continuously and visuals content stays dirty.");if(i)throw Y.thrown("Failed to update visuals because flushImmediate() is being called continuously.");for(var c=0,o=e.length;c<o;){var u=e[c++];if(0<=u._lifecycleState&&u.contentDirty)throw Y.thrown("Failed to update visuals because visuals content stays dirty. ("+L.string(u)+")")}}}while(i=this.flushImmediate(),n=this.syncPendingVisuals(),i||this.visualsContentDirty||n);for(s=0,r=this.renderTextures.length;s<r;){var _=s++,d=this.renderTextures[_];null!=d.dependingTextures&&d.dependingTextures.clear()}for(s=0,r=e.length;s<r;){var b,p,f,O,g=e[_=s++];if(0<=g._lifecycleState)if(g.renderTargetDirty&&g.computeRenderTarget(),g.matrixDirty&&g.computeMatrix(),g.visibilityDirty&&g.computeVisibility(),g.computedVisible)if(g.clipDirty&&g.computeClip(),null!=g.computedRenderTarget)if(null!=g.asQuad){if(null!=g.asQuad._texture&&(b=g.computedRenderTarget,p=g.asQuad._texture,null==b.dependingTextures&&(b.dependingTextures=new ke),f=b.dependingTextures.intMap.h[0|p.index],b.dependingTextures.set(p.index,(null!=f?f:0)+1)),null!=g.shader&&null!=g.shader.usedTextures)for(var m=g.shader.usedTextures,l=0,a=m.length;l<a;){var w=l++,v=g.computedRenderTarget,w=m[w],y=(null==v.dependingTextures&&(v.dependingTextures=new ke),v.dependingTextures.intMap.h[0|w.index]);v.dependingTextures.set(w.index,(null!=y?y:0)+1)}}else if(null!=g.asMesh)if(null!=g.asMesh.texture&&(p=g.computedRenderTarget,f=g.asMesh.texture,null==p.dependingTextures&&(p.dependingTextures=new ke),O=p.dependingTextures.intMap.h[0|f.index],p.dependingTextures.set(f.index,(null!=O?O:0)+1)),null!=g.shader&&null!=g.shader.usedTextures)for(var U=g.shader.usedTextures,c=0,o=U.length;c<o;){var x=c++,C=g.computedRenderTarget,x=U[x],D=(null==C.dependingTextures&&(C.dependingTextures=new ke),C.dependingTextures.intMap.h[0|x.index]);C.dependingTextures.set(x.index,(null!=D?D:0)+1)}}},computeHierarchy:function(){if(this.hierarchyDirty){for(var e=0,n=this.visuals.length;e<n;){var t=e++,t=this.visuals[t];0<=t._lifecycleState&&null==t.parent&&(t.computedDepth=1e3*t.depth,null!=t.children)&&m._computeChildrenDepth0(t)}this.hierarchyDirty=!1}},computeRenderTexturesPriority:function(e){if(0!=e.length){for(var n=e.length,t=0,i=n;t<i;)e[t++].priority=0;for(t=0,i=n;t<i;)for(var s=e[t++],r=0,l=n;r<l;){var a=e[r++];null!=s.dependingTextures&&0<(null!=(h=s.dependingTextures.intMap.h[0|a.index])?h:0)&&a.priority<=s.priority&&(a.priority=s.priority+1)}for(t=0,i=n;t<i;)for(s=e[t++],r=0,l=n;r<l;){var h,a=e[r++];null!=s.dependingTextures&&0<(null!=(h=s.dependingTextures.intMap.h[0|a.index])?h:0)&&a.priority<=s.priority&&(a.priority=s.priority+1)}}},sortVisuals:function(e){this.emitBeginSortVisuals(),Xn.rec(e,0,e.length),this.emitFinishSortVisuals()},group:function(e,n){null==n&&(n=!0);for(var t=0,i=this.groups.length;t<i;){var s=t++,s=this.groups[s];if(s.id==e)return s}return n?new sn(e):null},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offReady(),this.offUpdate(),this.offPreUpdate(),this.offPostUpdate(),this.offDefaultAssetsLoad(),this.offCriticalError(),this.offBeginEnterBackground(),this.offFinishEnterBackground(),this.offBeginEnterForeground(),this.offFinishEnterForeground(),this.offBeginSortVisuals(),this.offFinishSortVisuals(),this.offBeginDraw(),this.offFinishDraw(),this.offLowMemory(),this.offTerminate()},__class__:ae,__properties__:$extend(h.prototype.__properties__,{set_scenes:"set_scenes",get_scenes:"get_scenes",get_computedFps:"get_computedFps"})}),function(){this.callback=null,this.numUpdates=-1,this.owner=null}),Ce=((x["ceramic.AppXUpdatesHandler"]=xe).__name__="ceramic.AppXUpdatesHandler",xe.prototype={reset:function(){this.owner=null,this.numUpdates=-1,this.callback=null},__class__:xe},function(){this.uvs=[],this.texture=null,this.floatColors=null,this.colors=[],this.indices=[],this.vertices32=null,this.vertices=[],this.complexHit=!1,this.customFloatAttributesSize=0,this.colorMapping=0,m.call(this),this.asMesh=this}),De=((x["ceramic.Mesh"]=Ce).__name__="ceramic.Mesh",Ce.__super__=m,Ce.prototype=$extend(m.prototype,{destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.texture&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.release(),(this.texture=null)!=this.texture)&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.retain(),this._lifecycleState=-1,m.prototype.destroy.call(this))},get_color:function(){var e,n,t,i;return null!=this.floatColors&&3<=this.floatColors.length?(n=this.floatColors[0],t=this.floatColors[1],i=this.floatColors[2],16776960&(16711935&(65535&0|(255<(e=Math.round(255*n))?255:e<0?0:e)<<16)|(255<(e=Math.round(255*t))?255:e<0?0:e)<<8)|(255<(e=Math.round(255*i))?255:e<0?0:e)):null!=this.colors&&0<this.colors.length?16776960&(16711935&(65535&0|(255<(n=(e=this.colors[0])>>16&255)?255:n<0?0:n)<<16)|(255<(t=e>>8&255)?255:t<0?0:t)<<8)|(255<(i=255&e)?255:i<0?0:i):16777215},set_color:function(e){var n;return null!=this.floatColors?(this.floatColors[0]=(e>>16&255)/255,this.floatColors[1]=(e>>8&255)/255,this.floatColors[2]=(255&e)/255,this.floatColors[3]=1):(null==this.colors&&(this.colors=[]),this.colors[0]=(0|e)-16777216&16777215|((n=255)<(n=null==n?255:n)?255:n<0?0:n)<<24),e},set_texture:function(e){return this.texture!=e&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.release(),this.texture=e,null!=this.texture&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset))&&this.texture.asset.retain(),e},textureDestroyed:function(e){null!=this.texture&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.release(),(this.texture=null)!=this.texture)&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.retain()},hitTest:function(e,n,t){if(this.complexHit){var i,s,r,l,a,h,c,o,u,_=e*t.a+n*t.c+t.tx,d=e*t.b+n*t.d+t.ty,b=2+this.customFloatAttributesSize,p=0,f=0,O=this.indices.length/3|0;if(null!=this.vertices32)for(;p<O;){s=this.indices[f],++f,r=this.indices[f],++f,l=this.indices[f],++f,a=this.vertices32[i=s*b],++i,h=this.vertices32[i],c=this.vertices32[i=r*b],++i,o=this.vertices32[i],u=this.vertices32[i=l*b],++i;var g,w=(_-u)*(o-(g=this.vertices32[i]))-(c-u)*(d-g),v=(_-a)*(g-h)-(u-a)*(d-h),y=0<(U=(_-c)*(h-o)-(a-c)*(d-o))||0<w||0<v;if(!(U<0||w<0||v<0)||!y)return!0;++p}else for(;p<O;){s=this.indices[f],++f,r=this.indices[f],++f,l=this.indices[f],++f,a=this.vertices[i=s*b],++i,h=this.vertices[i],c=this.vertices[i=r*b],++i,o=this.vertices[i],u=this.vertices[i=l*b],++i;var U,w=(_-u)*(o-(g=this.vertices[i]))-(c-u)*(d-g),v=(_-a)*(g-h)-(u-a)*(d-h),y=0<(U=(_-c)*(h-o)-(a-c)*(d-o))||0<w||0<v;if(!(U<0||w<0||v<0)||!y)return!0;++p}return!1}return m.prototype.hitTest.call(this,e,n,t)},set_shader:function(e){return null!=(this.shader=e)&&(this.customFloatAttributesSize=e.customFloatAttributesSize),e},computeSize:function(){if(null!=this.vertices32&&2<=this.vertices32.length){var e=0,n=0,t=0,i=this.vertices32.length-1;if(0<this.customFloatAttributesSize)for(;t<i;)e<(r=this.vertices32[t])&&(e=r),++t,n<(l=this.vertices32[t])&&(n=l),t+=1+this.customFloatAttributesSize;else for(;t<i;)e<(r=this.vertices32[t])&&(e=r),++t,n<(l=this.vertices32[t])&&(n=l),++t;var s=Math.round(1e3*n)/1e3;this.set_width(Math.round(1e3*e)/1e3),this.set_height(s)}else if(null!=this.vertices&&2<=this.vertices.length){var r,l,e=0,n=0,t=0,i=this.vertices.length-1;if(0<this.customFloatAttributesSize)for(;t<i;)e<(r=this.vertices[t])&&(e=r),++t,n<(l=this.vertices[t])&&(n=l),t+=1+this.customFloatAttributesSize;else for(;t<i;)e<(r=this.vertices[t])&&(e=r),++t,n<(l=this.vertices[t])&&(n=l),++t;s=Math.round(1e3*n)/1e3;this.set_width(Math.round(1e3*e)/1e3),this.set_height(s)}else this.set_width(0),this.set_height(0)},grid:function(e,n,t,i){for(var s,r=(t=-1==(t=null==t?-1:t)?this._width:t)/e,l=(i=-1==(i=null==i?-1:i)?this._height:i)/n,a=0,h=0,c=0,o=n+1;c<o;)for(var u=c++,_=u*l,d=0,b=e+1;d<b;){var p=d++;this.vertices[a]=p*r,++a,this.vertices[a]=_,++a,0<u&&0<p&&(this.indices[h]=p=(u-1)*(e+1)+p-1,++h,this.indices[h]=1+p,++h,this.indices[h]=p+(e+1),++h,this.indices[h]=1+p,++h,this.indices[h]=p+(e+1),++h,this.indices[h]=p+(e+1)+1,++h)}if(this.vertices.length>a&&(s=this.vertices).length!=a)if(s.length>a)s.splice(a,s.length-a);else for(var f=s;f.length<a;)f.push(null);if(this.indices.length>h&&(s=this.indices).length!=h)if(s.length>h)s.splice(h,s.length-h);else for(f=s;f.length<h;)f.push(null)},gridFromTexture:function(e,n,t){null==t&&(t=this.texture),this.grid(e,n,t.width,t.height);for(var i=0,s=1/e,r=1/n,l=0,a=n+1;l<a;)for(var h=l++*r,c=(this.uvs[i]=0,this.uvs[++i]=h,++i,1),o=e+1;c<o;){var u=c++;this.uvs[i]=u*s,++i,this.uvs[i]=h,++i}if(this.uvs.length>i){t=this.uvs;if(t.length!=i)if(t.length>i)t.splice(i,t.length-i);else for(var _=t;_.length<i;)_.push(null)}},__class__:Ce,__properties__:$extend(m.prototype.__properties__,{set_texture:"set_texture",set_color:"set_color",get_color:"get_color"})}),function(){this.thickness=16,this.borderPosition=Fe.MIDDLE,this.angle=270,this.radius=64,this.sides=32,Ce.call(this),this.set_anchorX(.5),this.set_anchorY(.5)}),w=((x["ceramic.Arc"]=De).__name__="ceramic.Arc",De.__super__=Ce,De.prototype=$extend(Ce.prototype,{set_sides:function(e){return this.sides!=e&&(this.sides=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_radius:function(e){return this.radius!=e&&(this.radius=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_angle:function(e){return this.angle!=e&&(this.angle=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_borderPosition:function(e){return this.borderPosition!=e&&(this.borderPosition=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_thickness:function(e){return this.thickness!=e&&(this.thickness=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},computeContent:function(){var e=this.radius,n=this.angle,t=this.thickness,i=this.borderPosition,s=Math.ceil(this.sides*n/360),r=this.indices;if(0!=r.length)if(0<r.length)r.splice(0,r.length);else for(var l=r;l.length<0;)l.push(null);var a,h,c=1.5*Math.PI,o=.017453292519943295*n/s;switch(i._hx_index){case 0:a=-t;break;case 1:a=0;break;case 2:a=.5*-t}switch(i._hx_index){case 0:h=0;break;case 1:h=t;break;case 2:h=.5*t}if(null!=this.vertices32)for(var u=this.vertices32,i=4*(s+(360!=n?1:0)),_=(u.length!=i&&(u=new Float32Array(i),this.vertices32=u),0),d=0,b=s+(360!=n?1:0);d<b;){var p=d++,f=(e+a)*(v=Math.cos(c+o*p)),O=(e+a)*(m=Math.sin(c+o*p));u[_++]=e+f,u[_++]=e+O,O=(e+h)*m,u[_++]=e+(f=(e+h)*v),u[_++]=e+O,0<p&&(r.push(w=2*(p-1)),r.push(w+1),r.push(w+2),r.push(w+1),r.push(w+2),r.push(w+3))}else{var g=this.vertices;if(0!=g.length)if(0<g.length)g.splice(0,g.length);else for(l=g;l.length<0;)l.push(null);for(d=0,b=s+(360!=n?1:0);d<b;){var m,w,p=d++,v=Math.cos(c+o*p);O=(e+a)*(m=Math.sin(c+o*p)),g.push(e+(f=(e+a)*v)),g.push(e+O),O=(e+h)*m,g.push(e+(f=(e+h)*v)),g.push(e+O),0<p&&(r.push(w=2*(p-1)),r.push(w+1),r.push(w+2),r.push(w+1),r.push(w+2),r.push(w+3))}}360==n&&(r.push(w=2*(s-1)),r.push(w+1),r.push(0),r.push(w+1),r.push(0),r.push(1)),this.set_width(2*this.radius),this.set_height(2*this.radius),this.contentDirty=!1},__class__:De,__properties__:$extend(Ce.prototype.__properties__,{set_thickness:"set_thickness",set_borderPosition:"set_borderPosition",set_angle:"set_angle",set_radius:"set_radius",set_sides:"set_sides"})}),function(e){this.nextFree=0,this.arrays=null,this.arrayLengths=e}),Te=((x["ceramic.ArrayPool"]=w).__name__="ceramic.ArrayPool",w.pool=function(e){return e<=10?w.dynPool10:e<=100?w.dynPool100:e<=1e3?w.dynPool1000:e<=1e4?w.dynPool10000:e<=1e5?w.dynPool100000:(w.didNotifyLargePool||(w.didNotifyLargePool=!0,ut.schedule(null,.5,function(){w.didNotifyLargePool=!1},-1),ae.app.logger.warning("You should avoid asking a pool for arrays with more than 100000 elements (asked: "+e+") because it needs allocating a temporary one-time pool each time for that.",{fileName:"../../../../ceramic/runtime/src/ceramic/ArrayPool.hx",lineNumber:86,className:"ceramic.ArrayPool",methodName:"pool"})),new w(e))},w.prototype={get:function(){null==this.arrays?this.arrays=new Bn(w.ALLOC_STEP):this.nextFree>=this.arrays.length&&(e=this.arrays).set_length(e.length+w.ALLOC_STEP);var e=this.arrays.vector[this.nextFree];for(null==e&&(e=new Bn(this.arrayLengths),this.arrays.vector[this.nextFree]=e),e._poolIndex=this.nextFree;;){if(this.nextFree++,this.nextFree==this.arrays.length)break;var n=this.arrays.vector[this.nextFree];if(null==n)break;if(-1==n._poolIndex)break}return e},release:function(e){for(var n=e._poolIndex,t=(e._poolIndex=-1,this.nextFree>n&&(this.nextFree=n),0),i=e.length;t<i;){var s=t++;e.vector[s]=null}},__class__:w},(x["ceramic.Assert"]=Ea).__name__="ceramic.Assert",(x["ceramic.Asset"]=Fa).__name__="ceramic.Asset",Fa.__interfaces__=[q],Fa.__super__=h,Fa.prototype=$extend(h.prototype,{emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnObservedDirty)for(var l=0,a=this.__cbOnObservedDirty.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnObservedDirty[h],++r):--t}if(null!=this.__cbOnceObservedDirty){for(var c=null,o=null,l=0,a=this.__cbOnceObservedDirty.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,u=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindObservedDirty[h]),o.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=c,this.__cbOnceObservedDirty=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(r=this.__cbOnOwnerUnbindObservedDirty[n])&&r(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindObservedDirty[n])&&r(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindObservedDirty[s])&&r()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindObservedDirty[s])&&r()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},emitComplete:function(e){e&&null!=this.owner&&this.owner.emitUpdate(this);var n=0;if(null!=this.__cbOnComplete&&(n+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(n+=this.__cbOnceComplete.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnComplete)for(var r=0,l=this.__cbOnComplete.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnComplete[a],++s):--n}if(null!=this.__cbOnceComplete){for(var h=null,c=null,r=0,l=this.__cbOnceComplete.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceComplete[a],this.__cbOnceComplete[a]=null,o=this.__cbOnceOwnerUnbindComplete[a],(this.__cbOnceOwnerUnbindComplete[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindComplete[a]),c.push(this.__cbOnceComplete[a]))}this.__cbOnceOwnerUnbindComplete=h,this.__cbOnceComplete=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event complete because owner is destroyed!");var s=function(e){null!=t&&(i.offComplete(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(t)},onceComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event complete because owner is destroyed!");var s=function(e){null!=t&&(i.offComplete(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(t)},offComplete:function(e){if(null!=e){var n;null!=this.__cbOnComplete&&-1!=(n=this.__cbOnComplete.indexOf(e))&&(this.__cbOnComplete.splice(n,1),null!=(r=this.__cbOnOwnerUnbindComplete[n])&&r(),this.__cbOnOwnerUnbindComplete.splice(n,1)),null!=this.__cbOnceComplete&&-1!=(n=this.__cbOnceComplete.indexOf(e))&&(this.__cbOnceComplete.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindComplete[n])&&r(),this.__cbOnceOwnerUnbindComplete.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindComplete[s])&&r()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindComplete[s])&&r()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&0<this.__cbOnComplete.length||null!=this.__cbOnceComplete&&0<this.__cbOnceComplete.length},get_status:function(){var e,n,t=this.unobservedStatus;return null!=se.current&&(e=se.current,null!=(n=this.statusAutoruns)||(n=se.getAutorunArray(),null!=(this.statusAutoruns=n)))&&e.bindToAutorunArray(n),t},set_status:function(e){var n=this.unobservedStatus;return n!=(this.unobservedStatus=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitStatusChange(e,n),null!=(n=this.statusAutoruns))&&(this.statusAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateStatus:function(){var e=this.unobservedStatus,e=(this.emitStatusChange(e,e),this.statusAutoruns);null!=e&&(this.statusAutoruns=null,se.invalidateAutorunArray(e))},emitStatusChange:function(e,n){var t=0;if(null!=this.__cbOnStatusChange&&(t+=this.__cbOnStatusChange.length),null!=this.__cbOnceStatusChange&&(t+=this.__cbOnceStatusChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnStatusChange)for(var l=0,a=this.__cbOnStatusChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnStatusChange[h],++r):--t}if(null!=this.__cbOnceStatusChange){for(var c=null,o=null,l=0,a=this.__cbOnceStatusChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceStatusChange[h],this.__cbOnceStatusChange[h]=null,u=this.__cbOnceOwnerUnbindStatusChange[h],(this.__cbOnceOwnerUnbindStatusChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindStatusChange[h]),o.push(this.__cbOnceStatusChange[h]))}this.__cbOnceOwnerUnbindStatusChange=c,this.__cbOnceStatusChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event statusChange because owner is destroyed!");var s=function(e){null!=t&&(i.offStatusChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(null);null==this.__cbOnStatusChange&&(this.__cbOnStatusChange=[]),this.__cbOnStatusChange.push(t)},onceStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event statusChange because owner is destroyed!");var s=function(e){null!=t&&(i.offStatusChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(null);null==this.__cbOnceStatusChange&&(this.__cbOnceStatusChange=[]),this.__cbOnceStatusChange.push(t)},offStatusChange:function(e){if(null!=e){var n;null!=this.__cbOnStatusChange&&-1!=(n=this.__cbOnStatusChange.indexOf(e))&&(this.__cbOnStatusChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindStatusChange[n])&&r(),this.__cbOnOwnerUnbindStatusChange.splice(n,1)),null!=this.__cbOnceStatusChange&&-1!=(n=this.__cbOnceStatusChange.indexOf(e))&&(this.__cbOnceStatusChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindStatusChange[n])&&r(),this.__cbOnceOwnerUnbindStatusChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStatusChange){for(var t=0,i=this.__cbOnOwnerUnbindStatusChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindStatusChange[s])&&r()}this.__cbOnOwnerUnbindStatusChange=null}if(null!=this.__cbOnceOwnerUnbindStatusChange){for(t=0,i=this.__cbOnceOwnerUnbindStatusChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindStatusChange[s])&&r()}this.__cbOnceOwnerUnbindStatusChange=null}this.__cbOnStatusChange=null,this.__cbOnceStatusChange=null}},listensStatusChange:function(){return null!=this.__cbOnStatusChange&&0<this.__cbOnStatusChange.length||null!=this.__cbOnceStatusChange&&0<this.__cbOnceStatusChange.length},load:function(){this.set_status(Se.BROKEN),ae.app.logger.error("This asset as no load implementation.",{fileName:"../../../../ceramic/runtime/src/ceramic/Asset.hx",lineNumber:168,className:"ceramic.Asset",methodName:"load"}),this.emitComplete(!1)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),null!=this.owner&&(this.owner.removeAsset(this),this.owner=null),null!=this.assets&&(this.assets.destroy(),this.assets=null))},computePath:function(e,n,t){if(null==t&&null!=this.runtimeAssets&&(t=this.runtimeAssets),null==e)switch(this.kind){case"atlas":e=["atlas"];break;case"database":e=["csv"];break;case"font":e=["fnt","ttf","otf"];break;case"fragments":e=["fragments"];break;case"image":e=["png","jpg","jpeg"];break;case"shader":e=["frag","vert"];break;case"sound":var i,s,r,l;ae.app.backend.info;e=(null!=fe._soundExtensions||(fe._soundExtensions=[],i=new Audio,s=null!=re.navigator?re.navigator.userAgent:"",l=fe.RE_OPERA.match(s)&&parseInt(fe.RE_OPERA.matched(0).split("/")[1],10)<33,r=-1!=s.indexOf("Safari")&&-1==s.indexOf("Chrome"),s=fe.RE_SAFARI_VERSION.match(s),r&&s&&parseInt(fe.RE_SAFARI_VERSION.matched(1),10),null!=(r=i.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=r&&""!=r&&fe._soundExtensions.push("ogg"),s=i.canPlayType("audio/mpeg;"),r=i.canPlayType("audio/mp3;"),!l&&(null!=s&&"no"!=s&&""!=s||null!=r&&"no"!=r&&""!=r)&&fe._soundExtensions.push("mp3"),l=i.canPlayType("audio/x-flac;"),s=i.canPlayType("audio/flac;"),(null!=l&&"no"!=l&&""!=l||null!=s&&"no"!=s&&""!=s)&&fe._soundExtensions.push("flac"),r=i.canPlayType('audio/wav; codecs="1"'),l=i.canPlayType("audio/wav;"),(null!=r&&"no"!=r&&""!=r||null!=l&&"no"!=l&&""!=l)&&fe._soundExtensions.push("wav")),[].concat(fe._soundExtensions));break;case"text":e=["txt","json","fnt","atlas"];break;default:e=null}null!=e&&null!=n||Object.prototype.hasOwnProperty.call(ne.customAssetKinds.h,this.kind)&&(u=ne.customAssetKinds.h[this.kind],null==e&&(e=u.extensions),null==n)&&(n=u.dir),null==e&&(e=[]),null!=this.customExtensions&&(e=e.concat(this.customExtensions)),null==n&&(n=!1);var a=ae.app.screen.get_texturesDensity(),h=null,c=[],o=null,u=n?(null!=t?t.getLists():ne).allDirsByName:(null!=t?t.getLists():ne).allByName,_=this.name;if(null==h&&null!=_&&An.isAbsolute(_)&&(h=_),0<e.length){for(var d=0;d<e.length;){var b=e[d];if(++d,z.endsWith(_,"."+b)){_=le.substr(_,0,_.length-b.length-1);break}}var p=!1;if(Object.prototype.hasOwnProperty.call(u.h,_))for(var f=u.h[_],d=0;d<e.length;){for(var b=e[d],O=(++d,99999999999),g=0;g<f.length;){var m,w=f[g],w=(++g,ne.decodePath(w));w.extension==b&&(p||(m=Math.abs(a-w.density))<O&&(O=m,w.density,h=w.path,o=w),c.push(w.path))}null!=h&&(p=!0)}}if(null==h&&(h=_),this.allPaths=c,this.set_path(h),null!=o&&null!=o.flags)for(var n=o.flags.h,v=Object.keys(n),y=v.length,U=0;U<y;){var x=v[U++];Object.prototype.hasOwnProperty.call(this.options,x)||(this.options[x]=o.flags.h[x])}},set_path:function(e){return this.path!=e&&(this.get_status()==Se.READY&&this.set_status(Se.NONE),this.path=e,this.density=null==e?1:ne.decodePath(e).density),e},set_name:function(e){return this.name!=e&&(this.name=e,this.fullName=null!=this.variant?e+":"+this.variant:e,this.id="asset:"+this.kind+":"+this.fullName),e},set_variant:function(e){return this.variant==e?e:(this.variant=e,this.fullName=null!=e?this.name+":"+e:this.name,this.id="asset:"+this.kind+":"+this.fullName,this.name)},set_runtimeAssets:function(e){return this.runtimeAssets!=e&&(this.runtimeAssets=e,this.computePath()),e},set_handleTexturesDensityChange:function(e){return this.handleTexturesDensityChange!=e&&((this.handleTexturesDensityChange=e)?ae.app.screen.onTexturesDensityChange(this,$bind(this,this.texturesDensityDidChange)):ae.app.screen.offTexturesDensityChange($bind(this,this.texturesDensityDidChange))),e},texturesDensityDidChange:function(e,n){},set_hotReload:function(e){return this.hotReload!=e&&((this.hotReload=e)?this.owner.onAssetFilesChange(this,$bind(this,this.assetFilesDidChange)):this.owner.offAssetFilesChange($bind(this,this.assetFilesDidChange))),e},assetFilesDidChange:function(e,n){},toString:function(){var e=this.className();return null!=this.path&&""!=z.trim(this.path)?e+"("+this.fullName+" "+this.path+")":e+"("+this.fullName+")"},willEmitComplete:function(e){e&&null!=this.owner&&this.owner.emitUpdate(this)},retain:function(){this.refCount++},release:function(){0==this.refCount?ae.app.logger.warning("Called release() on asset "+L.string(this)+" when its refCount is already 0 (destroyed="+L.string(this._lifecycleState<0)+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Asset.hx",lineNumber:506,className:"ceramic.Asset",methodName:"release"}):this.refCount--},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offStatusChange(),this.offComplete()},__class__:Fa,__properties__:$extend(h.prototype.__properties__,{set_hotReload:"set_hotReload",set_handleTexturesDensityChange:"set_handleTexturesDensityChange",set_status:"set_status",get_status:"get_status",set_runtimeAssets:"set_runtimeAssets",set_path:"set_path",set_variant:"set_variant",set_name:"set_name"})}),function(e){var n=(this.path=e).lastIndexOf("."),t=(this.extension=le.substr(e,n+1,null).toLowerCase(),le.substr(e,0,n)),i=t.lastIndexOf("@");if(-(this.density=1)==i)i=n;else for(var s=0,r=le.substr(t,i+1,null).split("+");s<r.length;){var l,a=r[s],h=(++s,!0);z.endsWith(a,"x")&&(l=parseFloat(le.substr(a,0,a.length-1)),isNaN(l)||(this.density=l,h=!1)),h&&(null==this.flags&&(this.flags=new te),-1==(l=a.indexOf("="))?this.flags.h[a]=!0:(h=le.substr(a,0,l),a=le.substr(a,l+1,null),this.flags.h[h]=a))}this.name=le.substr(e,0,Math.min(i,n))}),Se=((x["ceramic.AssetPathInfo"]=Te).__name__="ceramic.AssetPathInfo",Te.prototype={toString:function(){return""+L.string({extension:this.extension,name:this.name,path:this.path,density:this.density})},__class__:Te},he["ceramic.AssetStatus"]={__ename__:"ceramic.AssetStatus",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"ceramic.AssetStatus",toString:c},LOADING:{_hx_name:"LOADING",_hx_index:1,__enum__:"ceramic.AssetStatus",toString:c},READY:{_hx_name:"READY",_hx_index:2,__enum__:"ceramic.AssetStatus",toString:c},BROKEN:{_hx_name:"BROKEN",_hx_index:3,__enum__:"ceramic.AssetStatus",toString:c}}),Ee=(Se.__constructs__=[Se.NONE,Se.LOADING,Se.READY,Se.BROKEN],function(e,n,t){this.parseAtlas=null,this.unobservedText=null,this.textAutoruns=null,this.unobservedAtlas=null,this.atlasAutoruns=null,Fa.call(this,"atlas",e,n,t),this.set_handleTexturesDensityChange(!0),this.assets=new ne}),Ae=((x["ceramic.AtlasAsset"]=Ee).__name__="ceramic.AtlasAsset",Ee.__super__=Fa,Ee.prototype=$extend(Fa.prototype,{emitReplaceAtlas:function(e,n){var t=0;if(null!=this.__cbOnReplaceAtlas&&(t+=this.__cbOnReplaceAtlas.length),null!=this.__cbOnceReplaceAtlas&&(t+=this.__cbOnceReplaceAtlas.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnReplaceAtlas)for(var l=0,a=this.__cbOnReplaceAtlas.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnReplaceAtlas[h],++r):--t}if(null!=this.__cbOnceReplaceAtlas){for(var c=null,o=null,l=0,a=this.__cbOnceReplaceAtlas.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceReplaceAtlas[h],this.__cbOnceReplaceAtlas[h]=null,u=this.__cbOnceOwnerUnbindReplaceAtlas[h],(this.__cbOnceOwnerUnbindReplaceAtlas[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindReplaceAtlas[h]),o.push(this.__cbOnceReplaceAtlas[h]))}this.__cbOnceOwnerUnbindReplaceAtlas=c,this.__cbOnceReplaceAtlas=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onReplaceAtlas:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceAtlas because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceAtlas(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReplaceAtlas&&(this.__cbOnOwnerUnbindReplaceAtlas=[]),this.__cbOnOwnerUnbindReplaceAtlas.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReplaceAtlas&&(this.__cbOnOwnerUnbindReplaceAtlas=[]),this.__cbOnOwnerUnbindReplaceAtlas.push(null);null==this.__cbOnReplaceAtlas&&(this.__cbOnReplaceAtlas=[]),this.__cbOnReplaceAtlas.push(t)},onceReplaceAtlas:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceAtlas because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceAtlas(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReplaceAtlas&&(this.__cbOnceOwnerUnbindReplaceAtlas=[]),this.__cbOnceOwnerUnbindReplaceAtlas.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReplaceAtlas&&(this.__cbOnceOwnerUnbindReplaceAtlas=[]),this.__cbOnceOwnerUnbindReplaceAtlas.push(null);null==this.__cbOnceReplaceAtlas&&(this.__cbOnceReplaceAtlas=[]),this.__cbOnceReplaceAtlas.push(t)},offReplaceAtlas:function(e){if(null!=e){var n;null!=this.__cbOnReplaceAtlas&&-1!=(n=this.__cbOnReplaceAtlas.indexOf(e))&&(this.__cbOnReplaceAtlas.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReplaceAtlas[n])&&r(),this.__cbOnOwnerUnbindReplaceAtlas.splice(n,1)),null!=this.__cbOnceReplaceAtlas&&-1!=(n=this.__cbOnceReplaceAtlas.indexOf(e))&&(this.__cbOnceReplaceAtlas.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReplaceAtlas[n])&&r(),this.__cbOnceOwnerUnbindReplaceAtlas.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceAtlas){for(var t=0,i=this.__cbOnOwnerUnbindReplaceAtlas.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReplaceAtlas[s])&&r()}this.__cbOnOwnerUnbindReplaceAtlas=null}if(null!=this.__cbOnceOwnerUnbindReplaceAtlas){for(t=0,i=this.__cbOnceOwnerUnbindReplaceAtlas.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReplaceAtlas[s])&&r()}this.__cbOnceOwnerUnbindReplaceAtlas=null}this.__cbOnReplaceAtlas=null,this.__cbOnceReplaceAtlas=null}},listensReplaceAtlas:function(){return null!=this.__cbOnReplaceAtlas&&0<this.__cbOnReplaceAtlas.length||null!=this.__cbOnceReplaceAtlas&&0<this.__cbOnceReplaceAtlas.length},get_atlas:function(){var e,n,t=this.unobservedAtlas;return null!=se.current&&(e=se.current,null!=(n=this.atlasAutoruns)||(n=se.getAutorunArray(),null!=(this.atlasAutoruns=n)))&&e.bindToAutorunArray(n),t},set_atlas:function(e){var n=this.unobservedAtlas;return n!=(this.unobservedAtlas=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitAtlasChange(e,n),null!=(n=this.atlasAutoruns))&&(this.atlasAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateAtlas:function(){var e=this.unobservedAtlas,e=(this.emitAtlasChange(e,e),this.atlasAutoruns);null!=e&&(this.atlasAutoruns=null,se.invalidateAutorunArray(e))},emitAtlasChange:function(e,n){var t=0;if(null!=this.__cbOnAtlasChange&&(t+=this.__cbOnAtlasChange.length),null!=this.__cbOnceAtlasChange&&(t+=this.__cbOnceAtlasChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnAtlasChange)for(var l=0,a=this.__cbOnAtlasChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnAtlasChange[h],++r):--t}if(null!=this.__cbOnceAtlasChange){for(var c=null,o=null,l=0,a=this.__cbOnceAtlasChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceAtlasChange[h],this.__cbOnceAtlasChange[h]=null,u=this.__cbOnceOwnerUnbindAtlasChange[h],(this.__cbOnceOwnerUnbindAtlasChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindAtlasChange[h]),o.push(this.__cbOnceAtlasChange[h]))}this.__cbOnceOwnerUnbindAtlasChange=c,this.__cbOnceAtlasChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onAtlasChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event atlasChange because owner is destroyed!");var s=function(e){null!=t&&(i.offAtlasChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindAtlasChange&&(this.__cbOnOwnerUnbindAtlasChange=[]),this.__cbOnOwnerUnbindAtlasChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindAtlasChange&&(this.__cbOnOwnerUnbindAtlasChange=[]),this.__cbOnOwnerUnbindAtlasChange.push(null);null==this.__cbOnAtlasChange&&(this.__cbOnAtlasChange=[]),this.__cbOnAtlasChange.push(t)},onceAtlasChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event atlasChange because owner is destroyed!");var s=function(e){null!=t&&(i.offAtlasChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindAtlasChange&&(this.__cbOnceOwnerUnbindAtlasChange=[]),this.__cbOnceOwnerUnbindAtlasChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindAtlasChange&&(this.__cbOnceOwnerUnbindAtlasChange=[]),this.__cbOnceOwnerUnbindAtlasChange.push(null);null==this.__cbOnceAtlasChange&&(this.__cbOnceAtlasChange=[]),this.__cbOnceAtlasChange.push(t)},offAtlasChange:function(e){if(null!=e){var n;null!=this.__cbOnAtlasChange&&-1!=(n=this.__cbOnAtlasChange.indexOf(e))&&(this.__cbOnAtlasChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindAtlasChange[n])&&r(),this.__cbOnOwnerUnbindAtlasChange.splice(n,1)),null!=this.__cbOnceAtlasChange&&-1!=(n=this.__cbOnceAtlasChange.indexOf(e))&&(this.__cbOnceAtlasChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindAtlasChange[n])&&r(),this.__cbOnceOwnerUnbindAtlasChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindAtlasChange){for(var t=0,i=this.__cbOnOwnerUnbindAtlasChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindAtlasChange[s])&&r()}this.__cbOnOwnerUnbindAtlasChange=null}if(null!=this.__cbOnceOwnerUnbindAtlasChange){for(t=0,i=this.__cbOnceOwnerUnbindAtlasChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindAtlasChange[s])&&r()}this.__cbOnceOwnerUnbindAtlasChange=null}this.__cbOnAtlasChange=null,this.__cbOnceAtlasChange=null}},listensAtlasChange:function(){return null!=this.__cbOnAtlasChange&&0<this.__cbOnAtlasChange.length||null!=this.__cbOnceAtlasChange&&0<this.__cbOnceAtlasChange.length},get_text:function(){var e,n,t=this.unobservedText;return null!=se.current&&(e=se.current,null!=(n=this.textAutoruns)||(n=se.getAutorunArray(),null!=(this.textAutoruns=n)))&&e.bindToAutorunArray(n),t},set_text:function(e){var n=this.unobservedText;return n!=(this.unobservedText=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextChange(e,n),null!=(n=this.textAutoruns))&&(this.textAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateText:function(){var e=this.unobservedText,e=(this.emitTextChange(e,e),this.textAutoruns);null!=e&&(this.textAutoruns=null,se.invalidateAutorunArray(e))},emitTextChange:function(e,n){var t=0;if(null!=this.__cbOnTextChange&&(t+=this.__cbOnTextChange.length),null!=this.__cbOnceTextChange&&(t+=this.__cbOnceTextChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTextChange)for(var l=0,a=this.__cbOnTextChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTextChange[h],++r):--t}if(null!=this.__cbOnceTextChange){for(var c=null,o=null,l=0,a=this.__cbOnceTextChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTextChange[h],this.__cbOnceTextChange[h]=null,u=this.__cbOnceOwnerUnbindTextChange[h],(this.__cbOnceOwnerUnbindTextChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTextChange[h]),o.push(this.__cbOnceTextChange[h]))}this.__cbOnceOwnerUnbindTextChange=c,this.__cbOnceTextChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(null);null==this.__cbOnTextChange&&(this.__cbOnTextChange=[]),this.__cbOnTextChange.push(t)},onceTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(null);null==this.__cbOnceTextChange&&(this.__cbOnceTextChange=[]),this.__cbOnceTextChange.push(t)},offTextChange:function(e){if(null!=e){var n;null!=this.__cbOnTextChange&&-1!=(n=this.__cbOnTextChange.indexOf(e))&&(this.__cbOnTextChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTextChange[n])&&r(),this.__cbOnOwnerUnbindTextChange.splice(n,1)),null!=this.__cbOnceTextChange&&-1!=(n=this.__cbOnceTextChange.indexOf(e))&&(this.__cbOnceTextChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTextChange[n])&&r(),this.__cbOnceOwnerUnbindTextChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextChange){for(var t=0,i=this.__cbOnOwnerUnbindTextChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTextChange[s])&&r()}this.__cbOnOwnerUnbindTextChange=null}if(null!=this.__cbOnceOwnerUnbindTextChange){for(t=0,i=this.__cbOnceOwnerUnbindTextChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTextChange[s])&&r()}this.__cbOnceOwnerUnbindTextChange=null}this.__cbOnTextChange=null,this.__cbOnceTextChange=null}},listensTextChange:function(){return null!=this.__cbOnTextChange&&0<this.__cbOnTextChange.length||null!=this.__cbOnceTextChange&&0<this.__cbOnceTextChange.length},load:function(){for(var u=this,_=(null!=this.owner&&(this.assets.inheritRuntimeAssetsFromAssets(this.owner),this.assets.loadMethod=this.owner.loadMethod,this.assets.scheduleMethod=this.owner.scheduleMethod,this.assets.delayBetweenXAssets=this.owner.delayBetweenXAssets),[]),h=this.assets.iterator();h.hasNext();){var e=h.next();_.push(e)}this.set_status(Se.LOADING),null==this.path?(ae.app.logger.warning("Cannot load atlas asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:127,className:"ceramic.AtlasAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1)):(ae.app.logger.info("Load atlas "+this.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:133,className:"ceramic.AtlasAsset",methodName:"load"}),this.assets.runtimeAssets=this.runtimeAssets,(h=new Jn(this.name)).set_handleTexturesDensityChange(!1),this.assets.addAsset(h),h.set_path(this.path),this.assets.onceComplete(this,function(e){if(u.set_text(h.get_text()),null!=u.get_text())try{for(var c=null!=u.parseAtlas?u.parseAtlas(u.get_text()):st.parse(u.get_text()),o=(c.id="atlas:"+u.path,[]),n=0,t=c.pages.length;n<t;){var i=n++,s=c.pages[i].get_name(),r=An.directory(u.path),l=(null!=r&&0<r.length&&(s=An.join([r,s])),ne.decodePath(s)),a=new ln(l.name);a.set_handleTexturesDensityChange(!1),a.set_path(l.path),u.assets.addAsset(a),o.push(a)}u.assets.onceComplete(u,function(e){if(e){for(var n=0,t=o.length;n<t;){var i=n++,s=(h=o[i]).get_texture();null!=s&&s.set_filter(c.pages[i].get_filter()),c.pages[i].set_texture(s)}c.computeFrames();var r=u.get_atlas();if((c.asset=u).set_atlas(c),null!=r){u.emitReplaceAtlas(u.get_atlas(),r);for(n=0,t=[].concat(ae.app.visuals);n<t.length;){var l,a=t[n];++n,0<=a._lifecycleState&&null!=a.asQuad&&null!=(a=a.asQuad).tile&&a.tile instanceof lt&&null!=(l=a.tile)&&l.atlas==r&&(null!=(l=l.name)&&null!=(l=c.region(l))?a.set_tile(l):a.set_tile(null))}r.asset=null,r.destroy()}for(n=0;n<_.length;){var h=_[n];++n,h instanceof ln&&-1!=o.indexOf(h)||h.destroy()}u.set_status(Se.READY),u.emitComplete(!0),u.handleTexturesDensityChange&&u.checkTexturesDensity()}else u.set_status(Se.BROKEN),ae.app.logger.error("Failed to load textures for atlas at path: "+u.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:261,className:"ceramic.AtlasAsset",methodName:"load"}),u.emitComplete(!1)}),u.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:267,className:"ceramic.AtlasAsset",methodName:"load"})}catch(n){jt.lastError=n,u.set_status(Se.BROKEN),ae.app.logger.error("Failed to decode atlas data at path: "+u.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:271,className:"ceramic.AtlasAsset",methodName:"load"}),u.emitComplete(!1)}else u.set_status(Se.BROKEN),ae.app.logger.error("Failed to load atlas data at path: "+u.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:277,className:"ceramic.AtlasAsset",methodName:"load"}),u.emitComplete(!1)}),this.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:282,className:"ceramic.AtlasAsset",methodName:"load"}))},texturesDensityDidChange:function(e,n){this.get_status()==Se.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var e;null!=this.owner&&this.owner.reloadOnTextureDensityChange&&(e=this.path,this.computePath(),e!=this.path)&&(ae.app.logger.info("Reload atlas ("+e+" -> "+this.path+")",{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:316,className:"ceramic.AtlasAsset",methodName:"checkTexturesDensity"}),this.load())},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload atlas (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:343,className:"ceramic.AtlasAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),null!=this.get_atlas()&&(this.get_atlas().destroy(),this.set_atlas(null)))},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offReplaceAtlas(),this.offAtlasChange(),this.offTextChange()},__class__:Ee,__properties__:$extend(Fa.prototype.__properties__,{set_text:"set_text",get_text:"get_text",set_atlas:"set_atlas",get_atlas:"get_atlas"})}),function(){this.busFilters=[],h.call(this),this.mixers=new vn,this.mixers.exists(0)||this.mixers.set(0,new Me(0))}),Me=((x["ceramic.Audio"]=Ae).__name__="ceramic.Audio",Ae.__super__=h,Ae.prototype=$extend(h.prototype,{initMixerIfNeeded:function(e){this.mixers.exists(e)||this.mixers.set(e,new Me(e))},mixer:function(e){this.mixers.exists(e)||this.mixers.set(e,new Me(e));var n=this.mixers,t=n._keys.intMap.h[0|e];return 2<=(e=null!=t?t:0)?n.values[e-2]:vn.RET_NULL},addFilter:function(e,n){if((n=null==n?0:n)<0)throw Y.thrown("Invalid bus "+n+", must be 0 or higher");for(-1!=e.bus&&this._removeFilter(e,e.bus);this.busFilters.length<=n;)this.busFilters.push([]);this.busFilters[n].push(e),e.attach(n),ae.app.backend.audio.addFilter(n,e,$bind(e,e.emitReady));for(var t=0,i=this.busFilters[n].length;t<i;){var s=t++;ae.app.backend.audio.filterParamsChanged(n,this.busFilters[n][s].filterId)}},removeFilter:function(e,n){this._removeFilter(e,n)},_removeFilter:function(e,n){if(!((n=null==n?e.bus:n)<0||n>=this.busFilters.length)){var t=this.busFilters[n].indexOf(e);if(-1!=t){e.detach(n),this.busFilters[n].splice(t,1),ae.app.backend.audio.removeFilter(n,e.filterId);for(var i=0,s=this.busFilters[n].length;i<s;){var r=i++;ae.app.backend.audio.filterParamsChanged(n,this.busFilters[n][r].filterId)}}}},filters:function(e){e=this.busFilters[e];return e=null!=e?[].concat(e):[]},clearFilters:function(e){if(e<this.busFilters.length)for(var n=this.busFilters[e];0<n.length;)this._removeFilter(n[n.length-1],e)},__class__:Ae}),(x["ceramic.AudioFilter"]=Ma).__name__="ceramic.AudioFilter",Ma.__super__=h,Ma.prototype=$extend(h.prototype,{emitReady:function(e){var n=0;if(null!=this.__cbOnReady&&(n+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(n+=this.__cbOnceReady.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnReady)for(var r=0,l=this.__cbOnReady.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnReady[a],++s):--n}if(null!=this.__cbOnceReady){for(var h=null,c=null,r=0,l=this.__cbOnceReady.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceReady[a],this.__cbOnceReady[a]=null,o=this.__cbOnceOwnerUnbindReady[a],(this.__cbOnceOwnerUnbindReady[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindReady[a]),c.push(this.__cbOnceReady[a]))}this.__cbOnceOwnerUnbindReady=h,this.__cbOnceReady=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReady[n])&&r(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReady[n])&&r(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReady[s])&&r()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReady[s])&&r()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},getBool:function(e){e=this.params[e];return null!=e&&0!=e},getInt:function(e){e=this.params[e];return null!=e?0|e:0},getFloat:function(e){e=this.params[e];return null!=e?e:0},setBool:function(e,n){var t=!this.paramsAcquired,i=(t&&this.acquireParams(),this.params[e]),n=n?1:0;(this.params[e]=n)!=i&&(this.paramsChanged=!0),t&&this.releaseParams()},setInt:function(e,n){var t=!this.paramsAcquired,i=(t&&this.acquireParams(),this.params[e]);(this.params[e]=n)!=i&&(this.paramsChanged=!0),t&&this.releaseParams()},setFloat:function(e,n){var t=!this.paramsAcquired,i=(t&&this.acquireParams(),this.params[e]);(this.params[e]=n)!=i&&(this.paramsChanged=!0),t&&this.releaseParams()},acquireParams:function(){this.paramsChanged=!1,this.paramsAcquired=!0},releaseParams:function(){var e=this.paramsChanged;this.paramsChanged=!1,this.paramsAcquired=!1,e&&0<=this.bus&&ae.app.backend.audio.filterParamsChanged(this.bus,this.filterId)},_initDefaultParamValues:function(){},attach:function(e){this.bus=e},detach:function(e){this.bus=-1},numParams:function(){return 0},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,-1!=this.bus&&ae.app.audio.removeFilter(this),this._lifecycleState=-1,h.prototype.destroy.call(this))},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offReady()},__class__:Ma}),(x["ceramic.AudioFilterWorklet"]=Na).__name__="ceramic.AudioFilterWorklet",Na.prototype={getBool:function(e){e=this.params[e];return null!=e&&0!=e},getInt:function(e){e=this.params[e];return null!=e?0|e:0},getFloat:function(e){e=this.params[e];return null!=e?e:0},numParams:function(){return 0},__class__:Na},function(e){this.mute=!1,this.pitch=1,this.pan=0,this.volume=.5,h.call(this),this.index=e}),Re=((x["ceramic.AudioMixer"]=Me).__name__="ceramic.AudioMixer",Me.__super__=h,Me.prototype=$extend(h.prototype,{__class__:Me}),(x["ceramic.AutoCollections"]=Pa).__name__="ceramic.AutoCollections",Pa.__isInterface__=!0,(x["ceramic.BackgroundQueue"]=Qa).__name__="ceramic.BackgroundQueue",Qa.__super__=h,Qa.prototype=$extend(h.prototype,{schedule:function(e){ae.app._onceImmediate(e)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),this.stop=!0)},__class__:Qa}),(x["ceramic.BezierEasing"]=Ra).__name__="ceramic.BezierEasing",Ra.quadraticToCubicCP1=function(e){return Ra.TWO_THIRD*e},Ra.quadraticToCubicCP2=function(e){return 1+Ra.TWO_THIRD*(e-1)},Ra.cacheKey=function(e,n,t,i){return 0|1e4*e+1e5*n+1e6*t+1e7*i},Ra.clearCache=function(){Ra.cachedInstances=null,Ra.numCachedInstances=0},Ra.get=function(e,n,t,i){var s=null==t||null==i,r=s?Ra.TWO_THIRD*e:e,l=s?Ra.TWO_THIRD*n:n,a=s?1+Ra.TWO_THIRD*(e-1):t,h=s?1+Ra.TWO_THIRD*(n-1):i,c=null,s=0|1e4*r+1e5*l+1e6*a+1e7*h,o=Ra.cachedInstances=null==Ra.cachedInstances?new vn:Ra.cachedInstances,u=o._keys.intMap.h[0|s],u=null!=u?u:0,_=2<=u?o.values[u-2]:vn.RET_NULL;if(null==_)Ra.CACHE_SIZE<=Ra.numCachedInstances&&Ra.clearCache(),c=new Ra(r,l,a,h),Ra.cachedInstances.set(s,[c]),Ra.numCachedInstances++;else{for(var d=_.length-1;0<=d;){var b=_[d];if(b.mX1==r&&b.mY1==l&&b.mX2==a&&b.mY2==h){c=b;break}--d}null==c&&((c=new Ra(e,n,t,i)).cached=!0,_.push(c))}return c},Ra.prototype={configure:function(e,n,t,i){if(this.cached&&this.removeFromCache(this.mX1,this.mY1,this.mX2,this.mY2),null==t||null==i?(this.quadratic=!0,this.mQuadraticX1=e,this.mQuadraticX2=t,this.mX1=Ra.TWO_THIRD*e,this.mY1=Ra.TWO_THIRD*n,this.mX2=1+Ra.TWO_THIRD*(e-1),this.mY2=1+Ra.TWO_THIRD*(n-1)):(this.quadratic=!1,this.mX1=e,this.mY1=n,this.mX2=t,this.mY2=i),this.mX1==this.mY1&&this.mX2==this.mY2)this.linearEasing=!0;else{this.linearEasing=!1,null==this.sampleValues&&(this.sampleValues=[]);for(var s=0,r=Ra.SPLINE_TABLE_SIZE;s<r;){var l=s++,a=l*Ra.SAMPLE_STEP_SIZE,h=this.mX1,c=this.mX2;this.sampleValues[l]=(((1-3*c+3*h)*a+(3*c-6*h))*a+3*h)*a}}},ease:function(e){if(this.linearEasing)return e;if(0==e)return 0;if(1==e)return 1;for(var n=0,t=1,i=Ra.SPLINE_TABLE_SIZE-1;t!=i&&this.sampleValues[t]<=e;)n+=Ra.SAMPLE_STEP_SIZE,++t;var s,r=n+(e-this.sampleValues[--t])/(this.sampleValues[t+1]-this.sampleValues[t])*Ra.SAMPLE_STEP_SIZE,l=this.mX1,a=this.mX2,h=3*(1-3*a+3*l)*r*r+2*(3*a-6*l)*r+3*l;if(Ra.NEWTON_MIN_SLOPE<=h)s=this.newtonRaphsonIterate(e,r,this.mX1,this.mX2);else if(0==h)s=r;else{for(var c,o,u=n,_=n+Ra.SAMPLE_STEP_SIZE,d=this.mX1,b=this.mX2,p=0;0<(c=(((1-3*b+3*d)*(o=u+(_-u)/2)+(3*b-6*d))*o+3*d)*o-e)?_=o:u=o,Math.abs(c)>Ra.SUBDIVISION_PRECISION&&++p<Ra.SUBDIVISION_MAX_ITERATIONS;);s=o}l=this.mY1;return(((1-3*(a=this.mY2)+3*l)*s+(3*a-6*l))*s+3*l)*s},getTForX:function(e){for(var n=0,t=1,i=Ra.SPLINE_TABLE_SIZE-1;t!=i&&this.sampleValues[t]<=e;)n+=Ra.SAMPLE_STEP_SIZE,++t;var s=n+(e-this.sampleValues[--t])/(this.sampleValues[t+1]-this.sampleValues[t])*Ra.SAMPLE_STEP_SIZE,r=this.mX1,l=this.mX2,l=3*(1-3*l+3*r)*s*s+2*(3*l-6*r)*s+3*r;if(Ra.NEWTON_MIN_SLOPE<=l)return this.newtonRaphsonIterate(e,s,this.mX1,this.mX2);if(0==l)return s;for(var a,h,c=n,o=n+Ra.SAMPLE_STEP_SIZE,u=this.mX1,_=this.mX2,d=0;0<(a=(((1-3*_+3*u)*(h=c+(o-c)/2)+(3*_-6*u))*h+3*u)*h-e)?o=h:c=h,Math.abs(a)>Ra.SUBDIVISION_PRECISION&&++d<Ra.SUBDIVISION_MAX_ITERATIONS;);return h},calcBezier:function(e,n,t){return(((1-3*t+3*n)*e+(3*t-6*n))*e+3*n)*e},getSlope:function(e,n,t){return 3*(1-3*t+3*n)*e*e+2*(3*t-6*n)*e+3*n},binarySubdivide:function(e,n,t,i,s){for(var r,l,a=0;0<(r=(((1-3*s+3*i)*(l=n+(t-n)/2)+(3*s-6*i))*l+3*i)*l-e)?t=l:n=l,Math.abs(r)>Ra.SUBDIVISION_PRECISION&&++a<Ra.SUBDIVISION_MAX_ITERATIONS;);return l},newtonRaphsonIterate:function(e,n,t,i){for(var s=0,r=Ra.NEWTON_ITERATIONS;s<r;){s++;var l=3*(1-3*i+3*t)*n*n+2*(3*i-6*t)*n+3*t;if(0==l)return n;n-=((((1-3*i+3*t)*n+(3*i-6*t))*n+3*t)*n-e)/l}return n},A:function(e,n){return 1-3*n+3*e},B:function(e,n){return 3*n-6*e},C:function(e){return 3*e},removeFromCache:function(e,n,t,i){this.cached=!1;e=0|1e4*e+1e5*n+1e6*t+1e7*i;null!=Ra.cachedInstances&&null!=(t=2<=(i=null!=(t=(n=Ra.cachedInstances)._keys.intMap.h[0|e])?t:0)?n.values[i-2]:vn.RET_NULL)&&(1==t.length&&t[0]==this?Ra.cachedInstances.remove(e):le.remove(t,this))},__class__:Ra},function(e,n,t){this.unobservedBytes=null,this.bytesAutoruns=null,Fa.call(this,"binary",e,n,t)}),Pe=((x["ceramic.BinaryAsset"]=Re).__name__="ceramic.BinaryAsset",Re.__super__=Fa,Re.prototype=$extend(Fa.prototype,{get_bytes:function(){var e,n,t=this.unobservedBytes;return null!=se.current&&(e=se.current,null!=(n=this.bytesAutoruns)||(n=se.getAutorunArray(),null!=(this.bytesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_bytes:function(e){var n=this.unobservedBytes;return n!=(this.unobservedBytes=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitBytesChange(e,n),null!=(n=this.bytesAutoruns))&&(this.bytesAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateBytes:function(){var e=this.unobservedBytes,e=(this.emitBytesChange(e,e),this.bytesAutoruns);null!=e&&(this.bytesAutoruns=null,se.invalidateAutorunArray(e))},emitBytesChange:function(e,n){var t=0;if(null!=this.__cbOnBytesChange&&(t+=this.__cbOnBytesChange.length),null!=this.__cbOnceBytesChange&&(t+=this.__cbOnceBytesChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnBytesChange)for(var l=0,a=this.__cbOnBytesChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnBytesChange[h],++r):--t}if(null!=this.__cbOnceBytesChange){for(var c=null,o=null,l=0,a=this.__cbOnceBytesChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceBytesChange[h],this.__cbOnceBytesChange[h]=null,u=this.__cbOnceOwnerUnbindBytesChange[h],(this.__cbOnceOwnerUnbindBytesChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindBytesChange[h]),o.push(this.__cbOnceBytesChange[h]))}this.__cbOnceOwnerUnbindBytesChange=c,this.__cbOnceBytesChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onBytesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event bytesChange because owner is destroyed!");var s=function(e){null!=t&&(i.offBytesChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBytesChange&&(this.__cbOnOwnerUnbindBytesChange=[]),this.__cbOnOwnerUnbindBytesChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBytesChange&&(this.__cbOnOwnerUnbindBytesChange=[]),this.__cbOnOwnerUnbindBytesChange.push(null);null==this.__cbOnBytesChange&&(this.__cbOnBytesChange=[]),this.__cbOnBytesChange.push(t)},onceBytesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event bytesChange because owner is destroyed!");var s=function(e){null!=t&&(i.offBytesChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBytesChange&&(this.__cbOnceOwnerUnbindBytesChange=[]),this.__cbOnceOwnerUnbindBytesChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBytesChange&&(this.__cbOnceOwnerUnbindBytesChange=[]),this.__cbOnceOwnerUnbindBytesChange.push(null);null==this.__cbOnceBytesChange&&(this.__cbOnceBytesChange=[]),this.__cbOnceBytesChange.push(t)},offBytesChange:function(e){if(null!=e){var n;null!=this.__cbOnBytesChange&&-1!=(n=this.__cbOnBytesChange.indexOf(e))&&(this.__cbOnBytesChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBytesChange[n])&&r(),this.__cbOnOwnerUnbindBytesChange.splice(n,1)),null!=this.__cbOnceBytesChange&&-1!=(n=this.__cbOnceBytesChange.indexOf(e))&&(this.__cbOnceBytesChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBytesChange[n])&&r(),this.__cbOnceOwnerUnbindBytesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBytesChange){for(var t=0,i=this.__cbOnOwnerUnbindBytesChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBytesChange[s])&&r()}this.__cbOnOwnerUnbindBytesChange=null}if(null!=this.__cbOnceOwnerUnbindBytesChange){for(t=0,i=this.__cbOnceOwnerUnbindBytesChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBytesChange[s])&&r()}this.__cbOnceOwnerUnbindBytesChange=null}this.__cbOnBytesChange=null,this.__cbOnceBytesChange=null}},listensBytesChange:function(){return null!=this.__cbOnBytesChange&&0<this.__cbOnBytesChange.length||null!=this.__cbOnceBytesChange&&0<this.__cbOnceBytesChange.length},load:function(){var n=this;if(this.set_status(Se.LOADING),null==this.path)ae.app.logger.warning("Cannot load binary asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:79,className:"ceramic.BinaryAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1);else{var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.options)for(var t=0,i=P.fields(this.options);t<i.length;){var s=i[t];++t,e[s]=P.field(this.options,s)}var r=this.path,l=ne.realAssetPath(r,this.runtimeAssets),a=ne.getReloadCount(l);0<a&&(l+="?hot="+a,r+="?hot="+a),ae.app.logger.info("Load binary "+r,{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:105,className:"ceramic.BinaryAsset",methodName:"load"}),ae.app.backend.binaries.load(l,e,function(e){null!=e?(n.set_bytes(e),n.set_status(Se.READY),n.emitComplete(!0)):(n.set_status(Se.BROKEN),ae.app.logger.error("Failed to load binary at path: "+n.path,{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:115,className:"ceramic.BinaryAsset",methodName:"load"}),n.emitComplete(!1))})}},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload binary (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:144,className:"ceramic.BinaryAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),this.set_bytes(null))},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offBytesChange()},__class__:Re,__properties__:$extend(Fa.prototype.__properties__,{set_bytes:"set_bytes",get_bytes:"get_bytes"})}),(x["ceramic.BitmapFont"]=Ta).__name__="ceramic.BitmapFont",Ta.__super__=h,Ta.prototype=$extend(h.prototype,{set_fontData:function(e){return null!=(this.fontData=e)&&(this.spaceChar=e.chars.get(32),null==e.chars.get(160))&&e.chars.set(160,this.spaceChar),e},get_face:function(){return this.fontData.face},set_face:function(e){return this.fontData.face=e},get_pointSize:function(){return this.fontData.pointSize},set_pointSize:function(e){return this.fontData.pointSize=e},get_baseSize:function(){return this.fontData.baseSize},set_baseSize:function(e){return this.fontData.baseSize=e},get_chars:function(){return this.fontData.chars},set_chars:function(e){return this.fontData.chars=e},get_charCount:function(){return this.fontData.charCount},set_charCount:function(e){return this.fontData.charCount=e},get_lineHeight:function(){return this.fontData.lineHeight},set_lineHeight:function(e){return this.fontData.lineHeight=e},get_kernings:function(){return this.fontData.kernings},set_kernings:function(e){return this.fontData.kernings=e},get_msdf:function(){return null!=this.fontData.distanceField&&"msdf"==this.fontData.distanceField.fieldType},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),null!=this.pages){for(var e=this.pages.iterableKeys,n=0,t=e.length;n<t;){var i=n++;(l=this.pages.get(e[i])).destroy()}this.pages=null}if(null!=this.pageShaders){for(var s=this.pageShaders.iterator();s.hasNext();)s.next().destroy();this.pageShaders=null}if(null!=this.preRenderedPages){for(var r=this.preRenderedPages.iterator();r.hasNext();)for(var l=r.next().iterator();l.hasNext();)l.next().destroy();this.preRenderedPages=null}}},needsToPreRenderAtSize:function(e){if(null==this.preRenderedPages||!this.preRenderedPages.h.hasOwnProperty(e))return!0;for(var n=this.preRenderedPages.h[e],t=0,i=this.pages.iterableKeys;t<i.length;){var s=i[t];if(++t,!n.h.hasOwnProperty(s))return!0}return!1},preRenderAtSize:function(e,n){for(var t=0,i=0,s=this.pages.iterableKeys;i<s.length;){var r=s[i];++i,t+=1,this.preRenderPage(r,e,function(){0==--t&&(n(),n=null)})}},preRenderPage:function(e,t,i){var s,r=this;if((null==this.preRenderedPages&&(this.preRenderedPages=new ei),null!=this._preRenderingPages)&&null!=(s=this._preRenderingPages.h[t]))return void(null!=(l=s.h[e])&&l.push(i));null==this._preRenderingPages&&(this._preRenderingPages=new ei),null==(s=this._preRenderingPages.h[t])&&(s=new ei,this._preRenderingPages.h[t]=s);null==(l=s.h[e])&&(l=[],s.h[e]=l);var l,a=this.preRenderedPages.h[t],h=this.pages.get(e);if(null==h)throw Y.thrown("Invalid bitmap font page with id "+e);var c=t/this.fontData.pointSize,o=Math.ceil(h.width*h.density*c),c=Math.ceil(h.width*h.density*c),u=new In(o,c,1),_=(u.clearOnRender=!0,u.autoRender=!1,new n);_._texture!=h&&_._set_texture(h),_.set_width(o),_.set_height(c),_.set_shader(null!=this.pageShaders?this.pageShaders.h[e]:null),_.set_visible(!1),null!=a&&a.h.hasOwnProperty(e)&&a.h[e].destroy(),u.stamp(_,function(){for(_.destroy(),(_=null)==a&&(a=new ei,r.preRenderedPages.h[t]=a),a.h[e]=u,i(),i=null,s.remove(e);0<l.length;)l.shift()(),0})},kerning:function(e,n){var e=this.fontData.kernings.get(e);return null!=e&&e.intMap.h.hasOwnProperty(0|n)&&null!=(e=e.intMap.h[0|n])?e:0},__class__:Ta,__properties__:$extend(h.prototype.__properties__,{get_msdf:"get_msdf",set_kernings:"set_kernings",get_kernings:"get_kernings",set_lineHeight:"set_lineHeight",get_lineHeight:"get_lineHeight",set_charCount:"set_charCount",get_charCount:"get_charCount",set_chars:"set_chars",get_chars:"get_chars",set_baseSize:"set_baseSize",get_baseSize:"get_baseSize",set_pointSize:"set_pointSize",get_pointSize:"get_pointSize",set_face:"set_face",get_face:"get_face",set_fontData:"set_fontData"})}),(x["ceramic.BitmapFontCharacter"]=Ua).__name__="ceramic.BitmapFontCharacter",Ua.prototype={__class__:Ua},(x["ceramic.BitmapFontData"]=Va).__name__="ceramic.BitmapFontData",Va.prototype={__class__:Va},(x["ceramic.BitmapFontDataPage"]=Wa).__name__="ceramic.BitmapFontDataPage",Wa.prototype={__class__:Wa},(x["ceramic.BitmapFontDistanceFieldData"]=Xa).__name__="ceramic.BitmapFontDistanceFieldData",Xa.prototype={__class__:Xa},(x["ceramic.BitmapFontParser"]=Ya).__name__="ceramic.BitmapFontParser",Ya.parse=function(e,n,t){if(0==e.length)throw Y.thrown("BitmapFont: fontData is 0 length");if(z.startsWith(z.trim(e),"<"))try{e=Ya.convertXmlFontData(e)}catch(h){jt.lastError=h;var i=Y.caught(h).unwrap();throw Y.thrown("BitmapFont: invalid xml font data specified for parser: "+L.string(i))}var s=!1,r=e;if(-1!=e.indexOf("CONSTRUCT 3")&&-1!=e.indexOf("Character width:")){s=!0;try{e=Ya.convertConstruct3FontData(e,null!=n?n:"font.png",t)}catch(h){jt.lastError=h;i=Y.caught(h).unwrap();throw Y.thrown("BitmapFont: invalid Construct 3 font data specified for parser: "+L.string(i))}}var l=new Va(null,".",0,0,new vn,0,null,[],0,new vn,!0,!0,!1,null),a=(s&&null==t&&(l.needsReparsing=!0,l.rawFontData=r),z.replace(z.replace(e,"\r",""),"\t"," ").split("\n"));if(0==a.length)throw Y.thrown("BitmapFont: invalid font data specified for parser.");n=a[0];if("info"!=le.substr(z.ltrim(n),0,4))throw Y.thrown("BitmapFont: invalid font data specified for parser. Format should be plain ascii text .fnt file only currently.");for(var h=0;h<a.length;){var c=a[h];++h,Ya.parseLine(c,l)}return a=null,Ya.ensureSpaceCharacter(l),l},Ya.convertXmlFontData=function(e){for(var n="",t=D.parse(e).firstElement().elements();t.hasNext();){var i=t.next();if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));switch(i.nodeName){case"chars":case"pages":if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));if("chars"==i.nodeName){if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));n+=L.string(i.nodeName);for(var s=i.attributes();s.hasNext();){var r=s.next(),l=i.get(r);null!=l&&(n=(n+=" ")+L.string(r)+"=","face"==r||"char"==r||"file"==r||-1!=l.indexOf(" ")||-1!=l.indexOf('"')||-1!=l.indexOf("=")?n+=L.string(JSON.stringify(l)):n+=L.string(l))}n+="\n"}for(var a=i.elements();a.hasNext();){var h=a.next();if(h.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==h.nodeType?"null":oe.toString(h.nodeType)));n+=L.string(h.nodeName);for(var c=h.attributes();c.hasNext();){var o=c.next(),u=h.get(o);null!=u&&(n=(n+=" ")+L.string(o)+"=","face"==o||"char"==o||"file"==o||-1!=u.indexOf(" ")||-1!=u.indexOf('"')||-1!=u.indexOf("=")?n+=L.string(JSON.stringify(u)):n+=L.string(u))}n+="\n"}break;default:if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));n+=L.string(i.nodeName);for(var _=i.attributes();_.hasNext();){var d=_.next(),b=i.get(d);null!=b&&(n=(n+=" ")+L.string(d)+"=","face"==d||"char"==d||"file"==d||-1!=b.indexOf(" ")||-1!=b.indexOf('"')||-1!=b.indexOf("=")?n+=L.string(JSON.stringify(b)):n+=L.string(b))}n+="\n"}}return n},Ya.convertConstruct3FontData=function(e,n,t){for(var i="",s=e.split("\n"),r=0,l=0,a=0,h="",c=[],o=0;o<s.length;){var u=z.trim(s[o]);if(-1!=u.indexOf("Character width:"))r=L.parseInt(z.trim(u.split(":")[1]));else if(-1!=u.indexOf("Character height:"))l=L.parseInt(z.trim(u.split(":")[1]));else if(-1!=u.indexOf("Character spacing:"))a=L.parseInt(z.trim(u.split(":")[1]));else if("Character set:"==u)for(++o;o<s.length;){var _=z.trim(s[o]);if(0<_.length){h=_;break}++o}else if("Spacing data:"==u&&++o<s.length){u=z.trim(s[o]);try{c=JSON.parse(u)}catch(p){jt.lastError=p,c=[]}}++o}for(var d,b=Object.create(null),p=0;p<c.length;){var f=c[p];if(++p,2<=f.length)for(var O=0|f[0],g=L.string(f[1]),m=0,w=g.length;m<w;){var v=m++;b[g.charAt(v)]=O}}t=(e=null!=t?(0==(d=Math.floor(t/r))&&(d=1),y=h.length,t):(y=h.length,(d=Math.ceil(Math.sqrt(y)))*r),Math.ceil(y/d)*l),i=(i=(i=(i=(i=(i=(i=(i=(i+='info face="Construct3Font" size=')+L.string(null==l?"null":""+l)+' bold=0 italic=0 charset="" unicode=1 stretchH=100 smooth=0 aa=0 padding=0,0,0,0 spacing=')+L.string(null==a?"null":""+a)+",")+L.string(null==a?"null":""+a)+"\ncommon lineHeight=")+L.string(L.string(l+a))+" base=")+L.string(null==l?"null":""+l)+" scaleW=")+L.string(null==e?"null":""+e)+" scaleH=")+L.string(null==t?"null":""+t)+' pages=1 packed=0\npage id=0 file="')+(null==n?"null":""+n)+'"\n';for(var y=h.length,p=(-1==h.indexOf(" ")&&Object.prototype.hasOwnProperty.call(b," ")&&++y,i=(i+="chars count=")+L.string(null==y?"null":""+y)+"\n",0),m=h.length;p<m;)var o=p++,U=h.charAt(o),x=le.cca(h,o),U=Object.prototype.hasOwnProperty.call(b,U)?b[U]:r,C=o%d*r,D=Math.floor(o/d)*l,i=(i=(i=(i=(i=(i=(i+="char id=")+L.string(null==x?"null":""+x)+" x=")+L.string(null==C?"null":""+C)+" y=")+L.string(null==D?"null":""+D)+" width=")+L.string(null==U?"null":""+U)+" height=")+L.string(null==l?"null":""+l)+" xoffset=0 yoffset=0 xadvance=")+L.string(L.string(U+a))+" page=0\n";return-1==h.indexOf(" ")&&Object.prototype.hasOwnProperty.call(b," ")&&(e=b[" "],t=le.cca(" ",0),i=(i=(i+="char id=")+L.string(null==t?"null":""+t)+" x=0 y=0 width=0 height=0 xoffset=0 yoffset=0 xadvance=")+L.string(L.string(e+a))+" page=0\n"),i},Ya.parseLine=function(e,n){var t=new te;switch(Ya.extractLineTokens(e,t)){case"char":var i=new Ua(L.parseInt(t.h.id),parseFloat(t.h.x),parseFloat(t.h.y),parseFloat(t.h.width),parseFloat(t.h.height),parseFloat(t.h.xoffset),parseFloat(t.h.yoffset),parseFloat(t.h.xadvance),L.parseInt(t.h.page));n.chars.set(i.id,i);break;case"chars":n.charCount=L.parseInt(t.h.count);break;case"common":n.lineHeight=parseFloat(t.h.lineHeight),n.baseSize=parseFloat(t.h.base);break;case"distanceField":var i=t.h.fieldType,s=L.parseInt(t.h.distanceRange);n.distanceField=new Xa(i,s);break;case"info":var r=(h=t.h.face).length;34==le.cca(h,0)&&34==le.cca(h,r-1)&&(h=h.substring(1,r-1)),n.face=h,n.pointSize=parseFloat(t.h.size),Object.prototype.hasOwnProperty.call(t.h,"smooth")&&(n.smooth="1"==t.h.smooth||"true"==t.h.smooth),Object.prototype.hasOwnProperty.call(t.h,"aa")&&(n.aa="1"==t.h.aa||"true"==t.h.aa);break;case"kerning":var i=L.parseInt(t.h.first),s=L.parseInt(t.h.second),l=parseFloat(t.h.amount),a=n.kernings.get(i);null==a&&(a=new bn,n.kernings.set(i,a)),a.set(s,l);break;case"page":var h,r=(h=t.h.file).length;34==le.cca(h,0)&&34==le.cca(h,r-1)&&(h=h.substring(1,r-1)),n.pages.push(new Wa(L.parseInt(t.h.id),z.trim(h)))}},Ya.extractLineTokens=function(e,n){for(var t=0,i=e.length,s=null,r=null,l=null,a=!1;t<i;){var h=le.cca(e,t);if(a){if(92==h?(h=le.cca(e,t),++t):34==h&&(a=!1),null==l)throw Y.thrown("Invalid bitmap font line: "+e);l.b+=L.string(e.charAt(t))}else if(32==h)null!=l&&(null==s?s=l.b:null==r?(r=l.b,n.h[r]=null):n.h[r]=l.b,l=r=null);else if(null==r&&61==h){if(null==l)throw Y.thrown("Invalid bitmap font line: "+e);r=l.b,l=null}else 34==h&&(a=!0),(l=null==l?new y:l).b+=L.string(e.charAt(t));++t}return null!=l&&(null==s?s=l.b:null==r?(r=l.b,n.h[r]=null):n.h[r]=l.b,l=r=null),s},Ya.unquote=function(e){var n=e.length;return e=34==le.cca(e,0)&&34==le.cca(e,n-1)?e.substring(1,n-1):e},Ya.ensureSpaceCharacter=function(e){if(!e.chars.exists(32)){for(var n=!0,t=-1,i=0,s=null!=(f=(d=e.chars).iterableKeys)?f.length:-1;i<s;){var r=i++,l=d.iterableKeys[r],a=d.get(l);if(t<0)t=a.xAdvance;else if(a.xAdvance!=t){n=!1;break}}var h=0;if(n&&0<t)h=t;else{for(var c=[110,101,111,97,114],o=0,u=0;u<c.length;){var _=c[u];++u,e.chars.exists(_)&&(h+=(a=e.chars.get(_)).xAdvance,++o)}if(0<o)h=h/o*.4;else{for(var d,b=0,p=0,i=0,s=null!=(f=(d=e.chars).iterableKeys)?f.length:-1;i<s;){r=i++,l=d.iterableKeys[r];b+=(a=d.get(l)).xAdvance,++p}h=0<p?b/p*.4:e.baseSize/3}}var f=new Ua(32,0,0,0,0,0,0,h,0);e.chars.set(32,f)}},function(){this.borderRightColor=-1,this.borderLeftColor=-1,this.borderBottomColor=-1,this.borderTopColor=-1,this.borderColor=8421504,this.borderRightSize=-1,this.borderLeftSize=-1,this.borderBottomSize=-1,this.borderTopSize=-1,this.borderSize=1,this.borderPosition=Fe.INSIDE,this.autoComputeColors=!0,this.autoComputeVertices=!0,Ce.call(this),this.colorMapping=1,this.vertices=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.indices=[0,1,2,2,1,3,3,1,5,5,1,7,4,5,6,6,5,7,0,2,6,6,2,4],this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.computeVertices()}),Fe=((x["ceramic.Border"]=Pe).__name__="ceramic.Border",Pe.__super__=Ce,Pe.prototype=$extend(Ce.prototype,{set_autoComputeVertices:function(e){return this.autoComputeVertices!=e&&(this.autoComputeVertices=e)&&this.computeVertices(),e},set_autoComputeColors:function(e){return this.autoComputeColors!=e&&(this.autoComputeColors=e)&&this.computeColors(),e},set_width:function(e){return Ce.prototype.set_width.call(this,e),this.autoComputeVertices&&this.computeVertices(),e},set_height:function(e){return Ce.prototype.set_height.call(this,e),this.autoComputeVertices&&this.computeVertices(),e},set_borderPosition:function(e){return this.borderPosition!=e&&(this.borderPosition=e,this.autoComputeVertices)&&this.computeVertices(),e},set_borderSize:function(e){return this.borderSize!=e&&(this.borderSize=e,this.autoComputeVertices)&&this.computeVertices(),e},set_borderTopSize:function(e){return this.borderTopSize!=e&&(this.borderTopSize=e,this.autoComputeVertices)&&this.computeVertices(),e},set_borderBottomSize:function(e){return this.borderBottomSize!=e&&(this.borderBottomSize=e,this.autoComputeVertices)&&this.computeVertices(),e},set_borderLeftSize:function(e){return this.borderLeftSize!=e&&(this.borderLeftSize=e,this.autoComputeVertices)&&this.computeVertices(),e},set_borderRightSize:function(e){return this.borderRightSize!=e&&(this.borderRightSize=e,this.autoComputeVertices)&&this.computeVertices(),e},set_borderColor:function(e){return this.borderColor!=e&&(this.borderColor=e,this.autoComputeColors)&&this.computeColors(),e},set_borderTopColor:function(e){return this.borderTopColor!=e&&(this.borderTopColor=e,this.autoComputeColors)&&this.computeColors(),e},set_borderBottomColor:function(e){return this.borderBottomColor!=e&&(this.borderBottomColor=e,this.autoComputeColors)&&this.computeColors(),e},set_borderLeftColor:function(e){return this.borderLeftColor!=e&&(this.borderLeftColor=e,this.autoComputeColors)&&this.computeColors(),e},set_borderRightColor:function(e){return this.borderRightColor!=e&&(this.borderRightColor=e,this.autoComputeColors)&&this.computeColors(),e},computeColors:function(){var e=(0|(-1!=this.borderTopColor?this.borderTopColor:this.borderColor))-16777216,e=e&16777215|-16777216,n=(0|(-1!=this.borderBottomColor?this.borderBottomColor:this.borderColor))-16777216&16777215|-16777216,t=(0|(-1!=this.borderLeftColor?this.borderLeftColor:this.borderColor))-16777216&16777215|-16777216,i=(0|(-1!=this.borderRightColor?this.borderRightColor:this.borderColor))-16777216&16777215|-16777216;this.colors[0]=e,this.colors[1]=e,this.colors[2]=e,this.colors[3]=e,this.colors[4]=e,this.colors[5]=e,this.colors[6]=i,this.colors[7]=i,this.colors[8]=i,this.colors[9]=i,this.colors[10]=i,this.colors[11]=i,this.colors[12]=n,this.colors[13]=n,this.colors[14]=n,this.colors[15]=n,this.colors[16]=n,this.colors[17]=n,this.colors[18]=t,this.colors[19]=t,this.colors[20]=t,this.colors[21]=t,this.colors[22]=t,this.colors[23]=t},computeVertices:function(){var e=.5,n=.5,t=(this.borderPosition==Fe.OUTSIDE?(e=1,n=0):this.borderPosition==Fe.INSIDE&&(e=0,n=1),0<=this.borderLeftSize?this.borderLeftSize:this.borderSize),i=e*t,t=n*t,s=0<=this.borderTopSize?this.borderTopSize:this.borderSize,r=e*s,s=n*s,l=0<=this.borderRightSize?this.borderRightSize:this.borderSize,a=e*l,l=n*l,h=0<=this.borderBottomSize?this.borderBottomSize:this.borderSize,e=e*h,n=n*h,h=this.get_width(),c=this.get_height(),o=(this.vertices[0]=-i,this.vertices[1]=-r,h+a);this.vertices[2]=o,this.vertices[3]=-r,this.vertices[4]=t,this.vertices[5]=s,this.vertices[6]=h-l,this.vertices[7]=s,this.vertices[8]=t,this.vertices[9]=c-n,this.vertices[10]=h-l,this.vertices[11]=c-n,this.vertices[12]=-i,this.vertices[13]=c+e,this.vertices[14]=h+a,this.vertices[15]=c+e},__class__:Pe,__properties__:$extend(Ce.prototype.__properties__,{set_borderRightColor:"set_borderRightColor",set_borderLeftColor:"set_borderLeftColor",set_borderBottomColor:"set_borderBottomColor",set_borderTopColor:"set_borderTopColor",set_borderColor:"set_borderColor",set_borderRightSize:"set_borderRightSize",set_borderLeftSize:"set_borderLeftSize",set_borderBottomSize:"set_borderBottomSize",set_borderTopSize:"set_borderTopSize",set_borderSize:"set_borderSize",set_borderPosition:"set_borderPosition",set_autoComputeColors:"set_autoComputeColors",set_autoComputeVertices:"set_autoComputeVertices"})}),he["ceramic.BorderPosition"]={__ename__:"ceramic.BorderPosition",__constructs__:null,INSIDE:{_hx_name:"INSIDE",_hx_index:0,__enum__:"ceramic.BorderPosition",toString:c},OUTSIDE:{_hx_name:"OUTSIDE",_hx_index:1,__enum__:"ceramic.BorderPosition",toString:c},MIDDLE:{_hx_name:"MIDDLE",_hx_index:2,__enum__:"ceramic.BorderPosition",toString:c}}),Ie=(Fe.__constructs__=[Fe.INSIDE,Fe.OUTSIDE,Fe.MIDDLE],function(){this.combinedCollectionLastChanges=null,this.combinedCollections=null,this.filter=null,this.byId=null,this.entriesDirty=!1,this.indexDirty=!0,this.entries=[],this.lastChange=0,this.internalId=Ie._nextInternalId++}),ke=((x["ceramic.CollectionImpl"]=Ie).__name__="ceramic.CollectionImpl",Ie.__interfaces__=[g],Ie.prototype={get_length:function(){if(null!=this.combinedCollections&&Ie._lastCheckedCombined!=this){for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}Ie._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries.length},pushAll:function(e){for(var n=0;n<e.length;){var t=e[n];++n,this.entries.push(t)}this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,Ie._lastCheckedCombined=null},clear:function(){var e=this.entries.length;0<e&&this.entries.splice(0,e),this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,Ie._lastCheckedCombined=null},push:function(e){this.entries.push(e),this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,Ie._lastCheckedCombined=null},remove:function(e){le.remove(this.entries,e),this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,Ie._lastCheckedCombined=null},synchronize:function(){this.entriesDirty&&this.computeEntries(),this.indexDirty&&this.computeIndex()},get:function(e){if(null==e)throw Y.thrown("Cannot get a collection entry with a null id!");if(null!=this.combinedCollections&&Ie._lastCheckedCombined!=this){for(var n=0,t=this.combinedCollections.length;n<t;){var i=n++,s=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=s.lastChange){this.entriesDirty=!0;break}}Ie._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.indexDirty&&this.computeIndex(),this.byId.h[e]},getByIndex:function(e){if(null!=this.combinedCollections&&Ie._lastCheckedCombined!=this){for(var n=0,t=this.combinedCollections.length;n<t;){var i=n++,s=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=s.lastChange){this.entriesDirty=!0;break}}Ie._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries[e]},indexOfId:function(e){e=this.get(e);return null==e?-1:this.indexOf(e)},indexOf:function(e){if(null!=this.combinedCollections&&Ie._lastCheckedCombined!=this){for(var n=0,t=this.combinedCollections.length;n<t;){var i=n++,s=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=s.lastChange){this.entriesDirty=!0;break}}Ie._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries.indexOf(e)},iterator:function(){if(null!=this.combinedCollections&&Ie._lastCheckedCombined!=this){for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}Ie._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),new ui(this.entries)},checkCombined:function(){if(null!=this.combinedCollections&&Ie._lastCheckedCombined!=this){for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}Ie._lastCheckedCombined=this}},computeIndex:function(){this.entriesDirty&&this.computeEntries(),this.byId=new te;for(var e=0,n=this.entries;e<n.length;){var t=n[e];++e,Object.prototype.hasOwnProperty.call(this.byId.h,t.id)||(this.byId.h[t.id]=t)}this.indexDirty=!1},computeEntries:function(){this.entries=[];for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(null!=i.combinedCollections&&Ie._lastCheckedCombined!=i){for(var s=0,r=i.combinedCollections.length;s<r;){var l=s++,a=i.combinedCollections[l];if(i.combinedCollectionLastChanges[l]!=a.lastChange){i.entriesDirty=!0;break}}Ie._lastCheckedCombined=i}i.entriesDirty&&i.computeEntries();for(var h=0,c=i.entries;h<c.length;){var o=c[h++];this.entries.push(o)}this.combinedCollectionLastChanges[t]=i.lastChange}null!=this.filter&&(this.entries=this.filter(this.entries)),this.entriesDirty=!1,this.indexDirty=!0,Ie._lastCheckedCombined!=this&&(Ie._lastCheckedCombined=null)},__class__:Ie,__properties__:{get_length:"get_length"}},(x["ceramic.CollectionEntry"]=b0).__name__="ceramic.CollectionEntry",b0.prototype={setRawData:function(e){for(var n=Ti.getClass(this),t=n.__name__,i=qe.types(t),t=i.h,s=Object.keys(t),r=s.length,l=0;l<r;){var a=s[l++],h=i.h[a];if(Object.prototype.hasOwnProperty.call(e,a)){var c=P.field(e,a),o=null;if(!this.setRawField(a,c)){var u=n.__name__;if(Ze._hasMeta(n,u,a,"skipEmpty",!0)){if(null==c)continue;if("string"==typeof c)if(0==c.length)continue}if(null==h){var _=z.trim((""+L.string(c)).toLowerCase()),d=he[h];if(null!=d){for(var b=0,p=d.__constructs__,f=new Array(p.length),O=0,g=p.length;O<g;){var m=O++;f[m]=p[m]._hx_name}for(var w=f;b<w.length;){var v=w[b];if(++b,v.toLowerCase()==_){o=B.createEnum(d,v);break}}}}else switch(h){case"Bool":o="boolean"==typeof c?c:""!=(c=z.trim((""+L.string(c)).toLowerCase()))&&"0"!=c&&"false"!=c&&"no"!=c;break;case"Float":"number"==typeof c&&(0|c)===c||"number"==typeof c?o=c:null!=(o=parseFloat(z.replace(""+L.string(c),",",".")))&&!isNaN(o)||(o=0);break;case"String":o=null==c||"null"==c?null:""+L.string(c);break;case"Int":case"ceramic.Color":"number"==typeof c&&(0|c)===c||"number"==typeof c?o=0|c:null!=(o=L.parseInt(""+L.string(c)))&&!isNaN(o)||(o=0);break;default:var y=z.trim((""+L.string(c)).toLowerCase()),U=he[h];if(null!=U){for(var x=0,C=U.__constructs__,D=new Array(C.length),T=0,S=C.length;T<S;){var E=T++;D[E]=C[E]._hx_name}for(var A=D;x<A.length;){var M=A[x];if(++x,M.toLowerCase()==y){o=B.createEnum(U,M);break}}}}this[a]=o}}}},setRawField:function(e,n){return!1},__class__:b0},function(e,n,t){null==t&&(t=!1),null==n&&(n=.5),null==e&&(e=16),this.size=0,this.iterableKeysUsed=null,this.iterableKeys=null,this.intMap=new ei,t&&(this.iterableKeys=[],this.iterableKeysUsed=new ke(16,.5,!1))}),A=((x["ceramic.IntIntMap"]=ke).__name__="ceramic.IntIntMap",ke.prototype={clear:function(){this.intMap.h={},this.size=0,null!=this.iterableKeys&&(this.iterableKeys=[],this.iterableKeysUsed=new ke(16,.5,!1))},exists:function(e){return this.intMap.h.hasOwnProperty(0|e)},set:function(e,n){null!=this.iterableKeys&&0==(null!=(t=this.iterableKeysUsed.intMap.h[0|e])?t:0)&&(this.iterableKeysUsed.set(e,1),this.iterableKeys.push(e));var t=0|e;return this.intMap.h.hasOwnProperty(t)||this.size++,this.intMap.h[t]=0|n,n},get:function(e){e=this.intMap.h[0|e];return null!=e?e:0},remove:function(e){var n,t=0|e,i=0;return null!=this.iterableKeys&&0!=(null!=(n=this.iterableKeysUsed.intMap.h[0|e])?n:0)&&(this.iterableKeysUsed.set(e,0),this.iterableKeys.splice(this.iterableKeys.indexOf(e),1)),this.intMap.h.hasOwnProperty(t)&&(i=this.intMap.h[t],this.size--),this.intMap.remove(t),i},getInline:function(e){e=this.intMap.h[0|e];return null!=e?e:0},existsInline:function(e){return this.intMap.h.hasOwnProperty(0|e)},copy:function(){var e=new ke;return e.intMap=this.intMap.copy(),e.size=this.size,e.iterableKeys=null!=this.iterableKeys?this.iterableKeys.slice():null,e.iterableKeysUsed=null!=this.iterableKeysUsed?on.copy(this.iterableKeysUsed):null,e},iterator:function(){return new gn(this)},keys:function(){return new mn(this)},keyValueIterator:function(){return new wn(this)},__class__:ke},{}),Be=(A.__properties__={set_lightnessHSLuv:"set_lightnessHSLuv",get_lightnessHSLuv:"get_lightnessHSLuv",set_saturationHSLuv:"set_saturationHSLuv",get_saturationHSLuv:"get_saturationHSLuv",set_hueHSLuv:"set_hueHSLuv",get_hueHSLuv:"get_hueHSLuv",set_lightness:"set_lightness",get_lightness:"get_lightness",set_brightness:"set_brightness",get_brightness:"get_brightness",set_saturation:"set_saturation",get_saturation:"get_saturation",set_hue:"set_hue",get_hue:"get_hue",set_black:"set_black",get_black:"get_black",set_yellow:"set_yellow",get_yellow:"get_yellow",set_magenta:"set_magenta",get_magenta:"get_magenta",set_cyan:"set_cyan",get_cyan:"get_cyan",set_blueFloat:"set_blueFloat",get_blueFloat:"get_blueFloat",set_greenFloat:"set_greenFloat",get_greenFloat:"get_greenFloat",set_redFloat:"set_redFloat",get_redFloat:"get_redFloat",set_blue:"set_blue",get_blue:"get_blue",set_green:"set_green",get_green:"get_green",set_red:"set_red",get_red:"get_red"},A.toAlphaColor=function(e){e=(0|e)-16777216;return e&16777215|-16777216},A.random=function(e,n){null==n&&(n=.5),null==e&&(e=.5);var t=360*Math.random(),e=Math.random()*(1-e)+e,n=Math.random()*(1-n)+n;return A.fromHSB(t,e,n)},A.fromInt=function(e){return null==e?0:e},A.fromRGB=function(e,n,t){var i=0;return((i&65535|(255<e?255:e<0?0:e)<<16)&16711935|(255<n?255:n<0?0:n)<<8)&16776960|(255<t?255:t<0?0:t)},A.fromRGBFloat=function(e,n,t){var i=0,e=(i=i&65535|(255<(e=Math.round(255*e))?255:e<0?0:e)<<16,Math.round(255*n)),e=(i=i&16711935|(255<e?255:e<0?0:e)<<8,Math.round(255*t));return i=i&16776960|(255<e?255:e<0?0:e)},A.fromCMYK=function(e,n,t,i){var s=0,e=(1-e)*(1-i),e=(s=s&65535|(255<(r=Math.round(255*e))?255:r<0?0:r)<<16,(1-n)*(1-i)),r=Math.round(255*e),e=(1-t)*(1-i);return s=(s=s&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<(r=Math.round(255*e))?255:r<0?0:r)},A.fromHSB=function(e,n,t){var i=0,n=t*n,s=t-n,t=e,r=n,e=(t%=360)/60,l=r*(1-Math.abs(e%2-1))+s;switch(r+=s,0|e){case 0:i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16;var a=Math.round(255*l),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s)),i=i&16776960|(255<a?255:a<0?0:a);break;case 1:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));i=i&16776960|(255<a?255:a<0?0:a);break;case 2:a=(i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*r)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));i=i&16776960|(255<a?255:a<0?0:a);break;case 3:a=(i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a);break;case 4:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a);break;case 5:a=(i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));i=i&16776960|(255<a?255:a<0?0:a)}return i},A.fromHSL=function(e,n,t){var i=0,n=(1-Math.abs(2*t-1))*n,s=t-n/2,t=e,r=n,e=(t%=360)/60,l=r*(1-Math.abs(e%2-1))+s;switch(r+=s,0|e){case 0:i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16;var a=Math.round(255*l),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s)),i=i&16776960|(255<a?255:a<0?0:a);break;case 1:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));i=i&16776960|(255<a?255:a<0?0:a);break;case 2:a=(i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*r)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));i=i&16776960|(255<a?255:a<0?0:a);break;case 3:a=(i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a);break;case 4:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a);break;case 5:a=(i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));i=i&16776960|(255<a?255:a<0?0:a)}return i},A.fromString=function(e){var n,t,i=null;if(e=z.trim(e),z.startsWith(e,"0x"))i=h=null==(h=L.parseInt(e.substring(0,8)))?0:h;else if(z.startsWith(e,"#"))i=9<=e.length?(t="0x"+e.substring(1,9),16776960&(16711935&(65535&0|(255<(n=(s=L.parseInt(t))>>16&255)?255:n<0?0:n)<<16)|(255<(n=s>>8&255)?255:n<0?0:n)<<8)|(255<(n=255&s)?255:n<0?0:n)):(t="0x"+e.substring(1,7),h=null==(h=L.parseInt(t))?0:h);else{e=e.toUpperCase();for(var s=A.colorLookup.h,r=Object.keys(s),l=r.length,a=0;a<l;){var h,c=r[a++];if(c==e){i=h=null==(h=A.colorLookup.h[c])?0:h;break}}}return i},A.getHSBColorWheel=function(){for(var e=[],n=0;n<360;){var t=n++;e.push(A.fromHSB(t,1,1))}return e},A.interpolate=function(e,n,t){var i=((n>>16&255)-(e>>16&255))*(t=null==t?.5:t)+(e>>16&255)|0,s=((n>>8&255)-(e>>8&255))*t+(e>>8&255)|0,n=((255&n)-(255&e))*t+(255&e)|0,t=0;return((t&65535|(255<i?255:i<0?0:i)<<16)&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<n?255:n<0?0:n)},A.gradient=function(e,n,t,i){for(var s=[],r=(null==i&&(i=function(e){return e}),0),l=t;r<l;){var a=r++,h=i(a/(t-1)),c=((n>>16&255)-(e>>16&255))*(h=null==h?.5:h)+(e>>16&255)|0,o=((n>>8&255)-(e>>8&255))*h+(e>>8&255)|0,h=((255&n)-(255&e))*h+(255&e)|0,u=0;s[a]=((u&65535|(255<c?255:c<0?0:c)<<16)&16711935|(255<o?255:o<0?0:o)<<8)&16776960|(255<h?255:h<0?0:h)}return s},A.multiply=function(e,n){var t=(e>>8&255)/255*((n>>8&255)/255),i=(255&e)/255*((255&n)/255),s=0,e=(s=s&65535|(255<(e=Math.round(255*((e>>16&255)/255*((n>>16&255)/255))))?255:e<0?0:e)<<16,Math.round(255*t)),e=(s=s&16711935|(255<e?255:e<0?0:e)<<8,Math.round(255*i));return s=s&16776960|(255<e?255:e<0?0:e)},A.add=function(e,n){var t=(e>>16&255)+(n>>16&255),i=(e>>8&255)+(n>>8&255),e=(255&e)+(255&n),n=0;return((n&65535|(255<t?255:t<0?0:t)<<16)&16711935|(255<i?255:i<0?0:i)<<8)&16776960|(255<e?255:e<0?0:e)},A.subtract=function(e,n){var t=(e>>16&255)-(n>>16&255),i=(e>>8&255)-(n>>8&255),e=(255&e)-(255&n),n=0;return((n&65535|(255<t?255:t<0?0:t)<<16)&16711935|(255<i?255:i<0?0:i)<<8)&16776960|(255<e?255:e<0?0:e)},A.toHexString=function(e,n){return((n=null==n?!0:n)?"0x":"")+z.hex(e>>16&255,2)+z.hex(e>>8&255,2)+z.hex(255&e,2)},A.toWebString=function(e){var n=!1;return"#"+((n=null==n?!0:n)?"0x":"")+z.hex(e>>16&255,2)+z.hex(e>>8&255,2)+z.hex(255&e,2)},A.getColorInfo=function(e){var n="0x"+z.hex(e>>16&255,2)+z.hex(e>>8&255,2)+z.hex(255&e,2)+"\n";return(n+="red: "+(e>>16&255)+" green: "+(e>>8&255)+" blue: "+(255&e)+"\n")+("hue: "+A.roundDecimal(A.get_hue(e),2)+" saturation: "+A.roundDecimal((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),2)+" brightness: "+A.roundDecimal(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),2)+" lightness: "+A.roundDecimal((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))+Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/2,2))},A.getDarkened=function(e,n){var t=(n=null==n?.2:n)<0?0:n,i=(n=1<t?1:t,e),s=(Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))+Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/2*(1-n),t=A.get_hue(i),e=(1-Math.abs(2*s-1))*((Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))-Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))),r=s-e/2,n=t,l=e,t=(n%=360)/60,a=l*(1-Math.abs(t%2-1))+r;switch(l+=r,0|t){case 0:s=(i=i&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,Math.round(255*a)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r)),i=i&16776960|(255<s?255:s<0?0:s);break;case 1:s=(i=i&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*l)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));i=i&16776960|(255<s?255:s<0?0:s);break;case 2:s=(i=i&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*l)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));i=i&16776960|(255<s?255:s<0?0:s);break;case 3:s=(i=i&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*a)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*l));i=i&16776960|(255<s?255:s<0?0:s);break;case 4:s=(i=i&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*r)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*l));i=i&16776960|(255<s?255:s<0?0:s);break;case 5:s=(i=i&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,Math.round(255*r)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));i=i&16776960|(255<s?255:s<0?0:s)}return i},A.getLightened=function(e,n){var t=(n=null==n?.2:n)<0?0:n,i=(n=1<t?1:t,e),s=(Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))+Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/2+(1-(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))+Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/2)*n,t=A.get_hue(i),e=(1-Math.abs(2*s-1))*((Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))-Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))),r=s-e/2,n=t,l=e,t=(n%=360)/60,a=l*(1-Math.abs(t%2-1))+r;switch(l+=r,0|t){case 0:s=(i=i&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,Math.round(255*a)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r)),i=i&16776960|(255<s?255:s<0?0:s);break;case 1:s=(i=i&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*l)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));i=i&16776960|(255<s?255:s<0?0:s);break;case 2:s=(i=i&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*l)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));i=i&16776960|(255<s?255:s<0?0:s);break;case 3:s=(i=i&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*a)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*l));i=i&16776960|(255<s?255:s<0?0:s);break;case 4:s=(i=i&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*r)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*l));i=i&16776960|(255<s?255:s<0?0:s);break;case 5:s=(i=i&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,Math.round(255*r)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));i=i&16776960|(255<s?255:s<0?0:s)}return i},A.getInverted=function(e){var n=255-(e>>16&255),t=255-(e>>8&255),e=255-(255&e),i=0;i=16776960&(i=16711935&(i=0|(255<n?255:n<0?0:n)<<16)|(255<t?255:t<0?0:t)<<8)|(255<e?255:e<0?0:e);return i},A.setRGB=function(e,n,t,i){return e=(e=(e=e&65535|(255<n?255:n<0?0:n)<<16)&16711935|(255<t?255:t<0?0:t)<<8)&16776960|(255<i?255:i<0?0:i)},A.setRGBFloat=function(e,n,t,i){e=65535&e|(255<(n=Math.round(255*n))?255:n<0?0:n)<<16;n=Math.round(255*t),e=16711935&e|(255<n?255:n<0?0:n)<<8,n=Math.round(255*i);return e=e&16776960|(255<n?255:n<0?0:n)},A.setCMYK=function(e,n,t,i,s){var n=(1-n)*(1-s),n=(e=e&65535|(255<(r=Math.round(255*n))?255:r<0?0:r)<<16,(1-t)*(1-s)),r=Math.round(255*n),n=(1-i)*(1-s);return e=(e=e&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<(r=Math.round(255*n))?255:r<0?0:r)},A.setHSB=function(e,n,t,i){var t=i*t,s=i-t,i=n,r=t,n=(i%=360)/60,l=r*(1-Math.abs(n%2-1))+s;switch(r+=s,0|n){case 0:e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16;var a=Math.round(255*l),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a)}return e},A.setHSL=function(e,n,t,i){var t=(1-Math.abs(2*i-1))*t,s=i-t/2,i=n,r=t,n=(i%=360)/60,l=r*(1-Math.abs(n%2-1))+s;switch(r+=s,0|n){case 0:e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16;var a=Math.round(255*l),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a)}return e},A.setHSChromaMatch=function(e,n,t,i,s){var n=(n%=360)/60,r=i*(1-Math.abs(n%2-1))+s;switch(i+=s,0|n){case 0:e=e&65535|(255<(l=Math.round(255*i))?255:l<0?0:l)<<16;var l=Math.round(255*r),l=(e=e&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*s));e=e&16776960|(255<l?255:l<0?0:l);break;case 1:l=(e=e&65535|(255<(l=Math.round(255*r))?255:l<0?0:l)<<16,Math.round(255*i)),l=(e=e&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*s));e=e&16776960|(255<l?255:l<0?0:l);break;case 2:l=(e=e&65535|(255<(l=Math.round(255*s))?255:l<0?0:l)<<16,Math.round(255*i)),l=(e=e&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*r));e=e&16776960|(255<l?255:l<0?0:l);break;case 3:l=(e=e&65535|(255<(l=Math.round(255*s))?255:l<0?0:l)<<16,Math.round(255*r)),l=(e=e&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*i));e=e&16776960|(255<l?255:l<0?0:l);break;case 4:l=(e=e&65535|(255<(l=Math.round(255*r))?255:l<0?0:l)<<16,Math.round(255*s)),l=(e=e&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*i));e=e&16776960|(255<l?255:l<0?0:l);break;case 5:l=(e=e&65535|(255<(l=Math.round(255*i))?255:l<0?0:l)<<16,Math.round(255*s)),l=(e=e&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*r));e=e&16776960|(255<l?255:l<0?0:l)}return e},A._new=function(e){return e=null==e?0:e},A.get_red=function(e){return e>>16&255},A.get_green=function(e){return e>>8&255},A.get_blue=function(e){return 255&e},A.get_redFloat=function(e){return(e>>16&255)/255},A.get_greenFloat=function(e){return(e>>8&255)/255},A.get_blueFloat=function(e){return(255&e)/255},A.set_red=function(e,n){return e=e&65535|(255<n?255:n<0?0:n)<<16,n},A.set_green=function(e,n){return e=e&16711935|(255<n?255:n<0?0:n)<<8,n},A.set_blue=function(e,n){return e=e&16776960|(255<n?255:n<0?0:n),n},A.set_redFloat=function(e,n){var t=Math.round(255*n);return e=e&65535|(255<t?255:t<0?0:t)<<16,n},A.set_greenFloat=function(e,n){var t=Math.round(255*n);return e=e&16711935|(255<t?255:t<0?0:t)<<8,n},A.set_blueFloat=function(e,n){var t=Math.round(255*n);return e=e&16776960|(255<t?255:t<0?0:t),n},A.get_cyan=function(e){return(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},A.get_magenta=function(e){return(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},A.get_yellow=function(e){return(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},A.get_black=function(e){return 1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},A.set_cyan=function(e,n){var t=(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),s=1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),r=(1-n)*(1-s),r=(e=e&65535|(255<(l=Math.round(255*r))?255:l<0?0:l)<<16,(1-t)*(1-s)),l=Math.round(255*r),r=(1-i)*(1-s);return e=(e=e&16711935|(255<l?255:l<0?0:l)<<8)&16776960|(255<(l=Math.round(255*r))?255:l<0?0:l),n},A.set_magenta=function(e,n){var t=(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),s=(1-(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)))*(1-i),s=(e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(1-n)*(1-i)),r=Math.round(255*s),s=(1-t)*(1-i);return e=(e=e&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<(r=Math.round(255*s))?255:r<0?0:r),n},A.set_yellow=function(e,n){var t=(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),s=(1-(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)))*(1-i),s=(e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(1-t)*(1-i)),r=Math.round(255*s),s=(1-n)*(1-i);return e=(e=e&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<(r=Math.round(255*s))?255:r<0?0:r),n},A.set_black=function(e,n){var t=(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),s=(1-(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)))*(1-n),s=(e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(1-t)*(1-n)),r=Math.round(255*s),s=(1-i)*(1-n);return e=(e=e&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<(r=Math.round(255*s))?255:r<0?0:r),n},A.get_hue=function(e){var n=0;return(n=0!=Math.atan2(Math.sqrt(3)*((e>>8&255)/255-(255&e)/255),(e>>16&255)/255*2-(e>>8&255)/255-(255&e)/255)?180/Math.PI*Math.atan2(Math.sqrt(3)*((e>>8&255)/255-(255&e)/255),(e>>16&255)/255*2-(e>>8&255)/255-(255&e)/255):n)<0?n+360:n},A.get_brightness=function(e){return Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},A.get_saturation=function(e){return(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},A.get_lightness=function(e){return(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))+Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/2},A.set_hue=function(e,n){var t=Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=t*((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))),s=t-i,t=n,r=i,i=(t%=360)/60,l=r*(1-Math.abs(i%2-1))+s;switch(r+=s,0|i){case 0:e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16;var a=Math.round(255*l),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a)}return n},A.set_saturation=function(e,n){var t=A.get_hue(e),i=Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),s=i*n,r=i-s,i=t,l=s,t=(i%=360)/60,a=l*(1-Math.abs(t%2-1))+r;switch(l+=r,0|t){case 0:e=e&65535|(255<(h=Math.round(255*l))?255:h<0?0:h)<<16;var h=Math.round(255*a),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*r));e=e&16776960|(255<h?255:h<0?0:h);break;case 1:h=(e=e&65535|(255<(h=Math.round(255*a))?255:h<0?0:h)<<16,Math.round(255*l)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*r));e=e&16776960|(255<h?255:h<0?0:h);break;case 2:h=(e=e&65535|(255<(h=Math.round(255*r))?255:h<0?0:h)<<16,Math.round(255*l)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*a));e=e&16776960|(255<h?255:h<0?0:h);break;case 3:h=(e=e&65535|(255<(h=Math.round(255*r))?255:h<0?0:h)<<16,Math.round(255*a)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*l));e=e&16776960|(255<h?255:h<0?0:h);break;case 4:h=(e=e&65535|(255<(h=Math.round(255*a))?255:h<0?0:h)<<16,Math.round(255*r)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*l));e=e&16776960|(255<h?255:h<0?0:h);break;case 5:h=(e=e&65535|(255<(h=Math.round(255*l))?255:h<0?0:h)<<16,Math.round(255*r)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*a));e=e&16776960|(255<h?255:h<0?0:h)}return n},A.set_brightness=function(e,n){var t=A.get_hue(e),i=n*((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))),s=n-i,r=i,i=(t%=360)/60,l=r*(1-Math.abs(i%2-1))+s;switch(r+=s,0|i){case 0:e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16;var a=Math.round(255*l),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a)}return n},A.set_lightness=function(e,n){var t=A.get_hue(e),i=(1-Math.abs(2*n-1))*((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))),s=n-i/2,r=i,i=(t%=360)/60,l=r*(1-Math.abs(i%2-1))+s;switch(r+=s,0|i){case 0:e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16;var a=Math.round(255*l),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a)}return n},A.maxColor=function(e){return Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},A.minColor=function(e){return Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255))},A.boundChannel=function(e,n){return 255<n?255:n<0?0:n},A.roundDecimal=function(e,n){for(var t=1,i=0,s=n;i<s;){i++;t*=10}return Math.round(e*t)/t},A.bound=function(e,n,t){n=null!=n&&e<n?n:e;return null!=t&&t<n?t:n},A.toString=function(e){return-1==e?"NONE":"0x"+z.hex(e>>16&255,2)+z.hex(e>>8&255,2)+z.hex(255&e,2)},A.get_hueHSLuv=function(e){var n,t=A._hsluvCacheMap.intMap.h[0|e],t=null!=t?t:0;return 0==t&&(t=1+(A._hsluvCacheValues.length/3|0),A._hsluvCacheMap.set(e,t),null==(n=A._hsluvResult)&&(n=[0,0,0]),A._hsluvTuple[0]=(e>>16&255)/255,A._hsluvTuple[1]=(e>>8&255)/255,A._hsluvTuple[2]=(255&e)/255,ie.rgbToHsluv(A._hsluvTuple,n),n[1]*=.01,n[2]*=.01,A._hsluvCacheValues.push(A._hsluvResult[0]),A._hsluvCacheValues.push(A._hsluvResult[1]),A._hsluvCacheValues.push(A._hsluvResult[2])),A._hsluvCacheValues[3*(t-1)]},A.set_hueHSLuv=function(e,n){var t=A.get_saturationHSLuv(e),i=A.get_lightnessHSLuv(e);if(A._hsluvTuple[0]=n,A._hsluvTuple[1]=100*t,A._hsluvTuple[2]=100*i,.001<i){ie.hsluvToRgb(A._hsluvTuple,A._hsluvResult);var s=A._hsluvResult[0];s<0&&(s=0);e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(s=A._hsluvResult[1])<0&&(s=0);var r=Math.round(255*s),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,(s=A._hsluvResult[2])<0&&(s=0),Math.round(255*s));e=e&16776960|(255<r?255:r<0?0:r)}else{var s=(1-Math.abs(2*i-1))*t,l=i-s/2,t=n,a=s,i=(t%=360)/60,h=a*(1-Math.abs(i%2-1))+l;switch(a+=l,0|i){case 0:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 1:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 2:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r);break;case 3:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 4:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 5:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r)}}return n},A.get_saturationHSLuv=function(e){var n,t=A._hsluvCacheMap.intMap.h[0|e],t=null!=t?t:0;return 0==t&&(t=1+(A._hsluvCacheValues.length/3|0),A._hsluvCacheMap.set(e,t),null==(n=A._hsluvResult)&&(n=[0,0,0]),A._hsluvTuple[0]=(e>>16&255)/255,A._hsluvTuple[1]=(e>>8&255)/255,A._hsluvTuple[2]=(255&e)/255,ie.rgbToHsluv(A._hsluvTuple,n),n[1]*=.01,n[2]*=.01,A._hsluvCacheValues.push(A._hsluvResult[0]),A._hsluvCacheValues.push(A._hsluvResult[1]),A._hsluvCacheValues.push(A._hsluvResult[2])),A._hsluvCacheValues[3*(t-1)+1]},A.set_saturationHSLuv=function(e,n){var t=A.get_hueHSLuv(e),i=A.get_lightnessHSLuv(e);if(A._hsluvTuple[0]=t,A._hsluvTuple[1]=100*n,A._hsluvTuple[2]=100*i,.001<i){ie.hsluvToRgb(A._hsluvTuple,A._hsluvResult);var s=A._hsluvResult[0];s<0&&(s=0);e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(s=A._hsluvResult[1])<0&&(s=0);var r=Math.round(255*s),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,(s=A._hsluvResult[2])<0&&(s=0),Math.round(255*s));e=e&16776960|(255<r?255:r<0?0:r)}else{var s=(1-Math.abs(2*i-1))*n,l=i-s/2,i=t,a=s,t=(i%=360)/60,h=a*(1-Math.abs(t%2-1))+l;switch(a+=l,0|t){case 0:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 1:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 2:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r);break;case 3:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 4:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 5:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r)}}return n},A.get_lightnessHSLuv=function(e){var n,t=A._hsluvCacheMap.intMap.h[0|e],t=null!=t?t:0;return 0==t&&(t=1+(A._hsluvCacheValues.length/3|0),A._hsluvCacheMap.set(e,t),null==(n=A._hsluvResult)&&(n=[0,0,0]),A._hsluvTuple[0]=(e>>16&255)/255,A._hsluvTuple[1]=(e>>8&255)/255,A._hsluvTuple[2]=(255&e)/255,ie.rgbToHsluv(A._hsluvTuple,n),n[1]*=.01,n[2]*=.01,A._hsluvCacheValues.push(A._hsluvResult[0]),A._hsluvCacheValues.push(A._hsluvResult[1]),A._hsluvCacheValues.push(A._hsluvResult[2])),A._hsluvCacheValues[3*(t-1)+2]},A.set_lightnessHSLuv=function(e,n){var t=A.get_hueHSLuv(e),i=A.get_saturationHSLuv(e);if(A._hsluvTuple[0]=t,A._hsluvTuple[1]=100*i,A._hsluvTuple[2]=100*n,.001<n){ie.hsluvToRgb(A._hsluvTuple,A._hsluvResult);var s=A._hsluvResult[0];s<0&&(s=0);e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(s=A._hsluvResult[1])<0&&(s=0);var r=Math.round(255*s),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,(s=A._hsluvResult[2])<0&&(s=0),Math.round(255*s));e=e&16776960|(255<r?255:r<0?0:r)}else{var s=(1-Math.abs(2*n-1))*i,l=n-s/2,i=t,a=s,t=(i%=360)/60,h=a*(1-Math.abs(t%2-1))+l;switch(a+=l,0|t){case 0:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 1:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 2:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r);break;case 3:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 4:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 5:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r)}}return n},A._getOrCreateCachedHSLuvComponent=function(e,n){var t,i=A._hsluvCacheMap.intMap.h[0|e],i=null!=i?i:0;return 0==i&&(i=1+(A._hsluvCacheValues.length/3|0),A._hsluvCacheMap.set(e,i),null==(t=A._hsluvResult)&&(t=[0,0,0]),A._hsluvTuple[0]=(e>>16&255)/255,A._hsluvTuple[1]=(e>>8&255)/255,A._hsluvTuple[2]=(255&e)/255,ie.rgbToHsluv(A._hsluvTuple,t),t[1]*=.01,t[2]*=.01,A._hsluvCacheValues.push(A._hsluvResult[0]),A._hsluvCacheValues.push(A._hsluvResult[1]),A._hsluvCacheValues.push(A._hsluvResult[2])),A._hsluvCacheValues[3*(i-1)+n]},A.fromHSLuv=function(e,n,t){var i=0;if(A._hsluvTuple[0]=e,A._hsluvTuple[1]=100*n,A._hsluvTuple[2]=100*t,.001<t){ie.hsluvToRgb(A._hsluvTuple,A._hsluvResult);var s=A._hsluvResult[0];s<0&&(s=0);i=i&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(s=A._hsluvResult[1])<0&&(s=0);var r=Math.round(255*s),r=(i=i&16711935|(255<r?255:r<0?0:r)<<8,(s=A._hsluvResult[2])<0&&(s=0),Math.round(255*s)),i=i&16776960|(255<r?255:r<0?0:r)}else{var s=(1-Math.abs(2*t-1))*n,l=t-s/2,n=e,a=s,t=(n%=360)/60,h=a*(1-Math.abs(t%2-1))+l;switch(a+=l,0|t){case 0:r=(i=i&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*h)),r=(i=i&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));i=i&16776960|(255<r?255:r<0?0:r);break;case 1:r=(i=i&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*a)),r=(i=i&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));i=i&16776960|(255<r?255:r<0?0:r);break;case 2:r=(i=i&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*a)),r=(i=i&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));i=i&16776960|(255<r?255:r<0?0:r);break;case 3:r=(i=i&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*h)),r=(i=i&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));i=i&16776960|(255<r?255:r<0?0:r);break;case 4:r=(i=i&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*l)),r=(i=i&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));i=i&16776960|(255<r?255:r<0?0:r);break;case 5:r=(i=i&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*l)),r=(i=i&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));i=i&16776960|(255<r?255:r<0?0:r)}}return i},A.setHSLuv=function(e,n,t,i){if(A._hsluvTuple[0]=n,A._hsluvTuple[1]=100*t,A._hsluvTuple[2]=100*i,.001<i){ie.hsluvToRgb(A._hsluvTuple,A._hsluvResult);var s=A._hsluvResult[0];s<0&&(s=0);e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(s=A._hsluvResult[1])<0&&(s=0);var r=Math.round(255*s),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,(s=A._hsluvResult[2])<0&&(s=0),Math.round(255*s));e=e&16776960|(255<r?255:r<0?0:r)}else{var s=(1-Math.abs(2*i-1))*t,l=i-s/2,t=n,a=s,i=(t%=360)/60,h=a*(1-Math.abs(i%2-1))+l;switch(a+=l,0|i){case 0:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 1:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 2:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*a)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r);break;case 3:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*h)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 4:r=(e=e&65535|(255<(r=Math.round(255*h))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*a));e=e&16776960|(255<r?255:r<0?0:r);break;case 5:r=(e=e&65535|(255<(r=Math.round(255*a))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*h));e=e&16776960|(255<r?255:r<0?0:r)}}return e},A.getHSLuv=function(e,n){return null==n&&(n=[0,0,0]),A._hsluvTuple[0]=(e>>16&255)/255,A._hsluvTuple[1]=(e>>8&255)/255,A._hsluvTuple[2]=(255&e)/255,ie.rgbToHsluv(A._hsluvTuple,n),n[1]*=.01,n[2]*=.01,n},(x["ceramic.Component"]=e0).__name__="ceramic.Component",e0.__isInterface__=!0,e0.prototype={__class__:e0},function(e){null==e&&(e=10),this.fps=0,this.index=0,this.size=e,this.frames=[];for(var n=0,t=e;n<t;){n++;this.frames.push(0)}}),Ne=((x["ceramic.ComputeFps"]=Be).__name__="ceramic.ComputeFps",Be.prototype={addFrame:function(e){this.frames[this.index]=e,this.index=(this.index+1)%this.size;for(var n=0,t=0,i=this.size;t<i;){var s=t++;n+=this.frames[s]}n=0<n?this.size/n:0,this.fps=Math.round(Math.min(999,n))},__class__:Be},(x["ceramic.ConvertField"]=g0).__name__="ceramic.ConvertField",g0.__isInterface__=!0,g0.prototype={__class__:g0},function(){}),Le=((x["ceramic.ConvertArray"]=Ne).__name__="ceramic.ConvertArray",Ne.__interfaces__=[g0],Ne.prototype={basicToField:function(e,n,t,i,s){s(null==i?null:[].concat(i))},fieldToBasic:function(e,n,t){return null==t?null:[].concat(t)},__class__:Ne},function(){this.preferStringBasic=!1}),We=((x["ceramic.ConvertColor"]=Le).__name__="ceramic.ConvertColor",Le.__interfaces__=[g0],Le.prototype={basicToField:function(e,n,t,i,s){s(null!=i?"string"==typeof i?A.fromString(i):0|i:0)},fieldToBasic:function(e,n,t){var i;return this.preferStringBasic?"#"+((i=null==(i=!1)?!0:i)?"0x":"")+z.hex(t>>16&255,2)+z.hex(t>>8&255,2)+z.hex(255&t,2):t},__class__:Le},function(){}),Ge=((x["ceramic.ConvertComponentMap"]=We).__name__="ceramic.ConvertComponentMap",We.__interfaces__=[g0],We.prototype={basicToField:function(e,n,t,i,s){if(null==i)s(null);else{for(var r=new te,l=0,a=P.fields(i);l<a.length;){var h=a[l];++l,i[h];ae.app.logger.error("Not using component initializers anymore. Need to implement event based solution!",{fileName:"../../../../ceramic/runtime/src/ceramic/ConvertComponentMap.hx",lineNumber:71,className:"ceramic.ConvertComponentMap",methodName:"basicToField"})}s(r)}},fieldToBasic:function(e,n,t){if(null==t)return null;for(var i={},s=t.h,r=Object.keys(s),l=r.length,a=0;a<l;){var h=r[a++],c=t.h[h];null!=c&&null!=c.initializerName&&(i[h]=c.initializerName)}return i},__class__:We},function(){}),Ke=((x["ceramic.ConvertFont"]=Ge).__name__="ceramic.ConvertFont",Ge.__interfaces__=[g0],Ge.prototype={basicToField:function(e,n,t,i,s){null!=i?i==ae.app.defaultFont.asset.name?s(ae.app.defaultFont):t.ensureFont(i,null,null,function(e){s(null!=e?e.get_font():null)}):s(null)},fieldToBasic:function(e,n,t){return null==t||null==t.asset?null:t.asset.name},__class__:Ge},function(){}),He=((x["ceramic.ConvertFragmentData"]=Ke).__name__="ceramic.ConvertFragmentData",Ke.__interfaces__=[g0],Ke.prototype={basicToField:function(e,n,t,i,s){s(i)},fieldToBasic:function(e,n,t){return t},__class__:Ke},function(){}),Ve=((x["ceramic.ConvertIntBoolMap"]=He).__name__="ceramic.ConvertIntBoolMap",He.__interfaces__=[g0],He.prototype={basicToField:function(e,n,t,i,s){if(null==i)s(null);else{for(var r=new ke(16,.5,!1),l=0,a=P.fields(i);l<a.length;){var h=a[l];++l,r.set(L.parseInt(h),P.field(i,h)?1:0)}s(r)}},fieldToBasic:function(e,n,t){return null==t?null:(ae.app.logger.warning("ConvertIntBoolMap.fieldToBasic() not implemented!",{fileName:"../../../../ceramic/runtime/src/ceramic/ConvertIntBoolMap.hx",lineNumber:92,className:"ceramic.ConvertIntBoolMap",methodName:"fieldToBasic"}),{})},__class__:He},function(){}),ze=((x["ceramic.ConvertMap"]=Ve).__name__="ceramic.ConvertMap",Ve.__interfaces__=[g0],Ve.prototype={basicToField:function(e,n,t,i,s){if(null==i)s(null);else{for(var r=new te,l=0,a=P.fields(i);l<a.length;){var h=a[l];++l,r.h[h]=i[h]}s(r)}},fieldToBasic:function(e,n,t){if(null==t)return null;for(var i={},s=t.h,r=Object.keys(s),l=r.length,a=0;a<l;){var h=r[a++];i[h]=t.h[h]}return i},__class__:Ve},function(){}),Ye=((x["ceramic.ConvertTexture"]=ze).__name__="ceramic.ConvertTexture",ze.__interfaces__=[g0],ze.prototype={basicToField:function(e,n,t,i,s){null!=i?t.ensureImage(i,null,null,function(e){s(null!=e?e.get_texture():null)}):s(null)},fieldToBasic:function(e,n,t){return null==t||null==t.asset?null:t.asset.name},__class__:ze},(x["ceramic.Csv"]=p0).__name__="ceramic.Csv",p0.parse=function(e){for(var n="",t=0,i="",s=(e=z.trim(e)).length,r=!1,l="",a=[];t<s;)if(i=e.charAt(t),r)'"'==i?'""'==i+e.charAt(t+1)?(l+='"',t+=2):(r=!1,++t):(l+=i,++t);else{if("\n"==i){++t;break}""==l&&'"'==i?r=!0:""==n?","==i||";"==i?(n=i,a.push(z.replace(l,"\r","")),l=""):l+=i:i==n?(a.push(z.replace(l,"\r","")),l=""):l+=i,++t}""!=l&&a.push(z.replace(l,"\r",""));for(var r=!1,l="",h={},c=!1,o=[],u=0,_="",d=-1;t<s;)i=e.charAt(t),r?'"'==i?'""'==i+e.charAt(t+1)?(l+='"',t+=2):(r=!1,++t):(l+=i,++t):("\n"==i?(null!=(_=a[u++])?(h[_]=z.replace(l,"\r",""),c=!0):-1==d&&(d=o.length),l="",o.push(h),c=!1,u=0,h={}):""==l&&'"'==i?r=!0:i==n?(null!=(_=a[u++])?(h[_]=z.replace(l,"\r",""),c=!0):-1==d&&(d=o.length),l=""):l+=i,++t);return null!=(_=a[u++])?(h[_]=z.replace(l,"\r",""),c=!0):-1==d&&(p0.warning(h),d=o.length),l="",c&&o.push(h),0<=d&&p0.warning("Malformed CSV: too many columns at row #"+d),o},p0.stringify=function(e,n){if(null==n){n=[];for(var t=Object.create(null),i=0;i<e.length;)for(var s=e[i],r=(++i,0),l=P.fields(s);r<l.length;){var a=l[r];++r,Object.prototype.hasOwnProperty.call(t,a)||(n.push(a),t[a]=!0)}}for(var h="",c=0,i=0;i<n.length;){a=n[i];if(++i,0<c++&&(h+=","),0!=a.length){h+='"';for(r=0,l=a.length;r<l;){var o=r++;h+='"'==(b=a.charAt(o))?'""':L.string(b)}h+='"'}}for(i=0;i<e.length;)for(s=e[i],r=(++i,h+="\n",c=0);r<n.length;){var a=n[r],u=(++r,0<c++&&(h+=","),P.field(s,a)),_=null!=u?L.string(u):"";if(0!=_.length){h+='"';for(var l=0,d=_.length;l<d;){var b,o=l++;h+='"'==(b=_.charAt(o))?'""':L.string(b)}h+='"'}}return h},p0.warning=function(e){ae.app.logger.warning(e,{fileName:"../../../../ceramic/runtime/src/ceramic/Csv.hx",lineNumber:333,className:"ceramic.Csv",methodName:"warning"})},function(e,n,t,i,s){this.kind=e,this.add=n,this.extensions=t,this.dir=i,this.types=s}),Xe=((x["ceramic.CustomAssetKind"]=Ye).__name__="ceramic.CustomAssetKind",Ye.prototype={__class__:Ye},function(e,n,t){this.unobservedDatabase=null,this.databaseAutoruns=null,Fa.call(this,"database",e,n,t)}),je=((x["ceramic.DatabaseAsset"]=Xe).__name__="ceramic.DatabaseAsset",Xe.__super__=Fa,Xe.prototype=$extend(Fa.prototype,{get_database:function(){var e,n,t=this.unobservedDatabase;return null!=se.current&&(e=se.current,null!=(n=this.databaseAutoruns)||(n=se.getAutorunArray(),null!=(this.databaseAutoruns=n)))&&e.bindToAutorunArray(n),t},set_database:function(e){var n=this.unobservedDatabase;return this.unobservedDatabase=e,Ni.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitDatabaseChange(e,n),null!=(n=this.databaseAutoruns)&&(this.databaseAutoruns=null,se.invalidateAutorunArray(n))),e},invalidateDatabase:function(){var e=this.unobservedDatabase,e=(this.emitDatabaseChange(e,e),this.databaseAutoruns);null!=e&&(this.databaseAutoruns=null,se.invalidateAutorunArray(e))},emitDatabaseChange:function(e,n){var t=0;if(null!=this.__cbOnDatabaseChange&&(t+=this.__cbOnDatabaseChange.length),null!=this.__cbOnceDatabaseChange&&(t+=this.__cbOnceDatabaseChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnDatabaseChange)for(var l=0,a=this.__cbOnDatabaseChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnDatabaseChange[h],++r):--t}if(null!=this.__cbOnceDatabaseChange){for(var c=null,o=null,l=0,a=this.__cbOnceDatabaseChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceDatabaseChange[h],this.__cbOnceDatabaseChange[h]=null,u=this.__cbOnceOwnerUnbindDatabaseChange[h],(this.__cbOnceOwnerUnbindDatabaseChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindDatabaseChange[h]),o.push(this.__cbOnceDatabaseChange[h]))}this.__cbOnceOwnerUnbindDatabaseChange=c,this.__cbOnceDatabaseChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onDatabaseChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event databaseChange because owner is destroyed!");var s=function(e){null!=t&&(i.offDatabaseChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindDatabaseChange&&(this.__cbOnOwnerUnbindDatabaseChange=[]),this.__cbOnOwnerUnbindDatabaseChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindDatabaseChange&&(this.__cbOnOwnerUnbindDatabaseChange=[]),this.__cbOnOwnerUnbindDatabaseChange.push(null);null==this.__cbOnDatabaseChange&&(this.__cbOnDatabaseChange=[]),this.__cbOnDatabaseChange.push(t)},onceDatabaseChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event databaseChange because owner is destroyed!");var s=function(e){null!=t&&(i.offDatabaseChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindDatabaseChange&&(this.__cbOnceOwnerUnbindDatabaseChange=[]),this.__cbOnceOwnerUnbindDatabaseChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindDatabaseChange&&(this.__cbOnceOwnerUnbindDatabaseChange=[]),this.__cbOnceOwnerUnbindDatabaseChange.push(null);null==this.__cbOnceDatabaseChange&&(this.__cbOnceDatabaseChange=[]),this.__cbOnceDatabaseChange.push(t)},offDatabaseChange:function(e){if(null!=e){var n;null!=this.__cbOnDatabaseChange&&-1!=(n=this.__cbOnDatabaseChange.indexOf(e))&&(this.__cbOnDatabaseChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindDatabaseChange[n])&&r(),this.__cbOnOwnerUnbindDatabaseChange.splice(n,1)),null!=this.__cbOnceDatabaseChange&&-1!=(n=this.__cbOnceDatabaseChange.indexOf(e))&&(this.__cbOnceDatabaseChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindDatabaseChange[n])&&r(),this.__cbOnceOwnerUnbindDatabaseChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDatabaseChange){for(var t=0,i=this.__cbOnOwnerUnbindDatabaseChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindDatabaseChange[s])&&r()}this.__cbOnOwnerUnbindDatabaseChange=null}if(null!=this.__cbOnceOwnerUnbindDatabaseChange){for(t=0,i=this.__cbOnceOwnerUnbindDatabaseChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindDatabaseChange[s])&&r()}this.__cbOnceOwnerUnbindDatabaseChange=null}this.__cbOnDatabaseChange=null,this.__cbOnceDatabaseChange=null}},listensDatabaseChange:function(){return null!=this.__cbOnDatabaseChange&&0<this.__cbOnDatabaseChange.length||null!=this.__cbOnceDatabaseChange&&0<this.__cbOnceDatabaseChange.length},load:function(){var e,n,t,i,s=this;this.set_status(Se.LOADING),null==this.path?(ae.app.logger.warning("Cannot load database asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:92,className:"ceramic.DatabaseAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1)):(e={},null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),n=this.path,t=ne.realAssetPath(n,this.runtimeAssets),0<(i=ne.getReloadCount(t))&&(t+="?hot="+i,n+="?hot="+i),ae.app.logger.info("Load database "+n,{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:113,className:"ceramic.DatabaseAsset",methodName:"load"}),ae.app.backend.texts.load(t,e,function(e){if(null!=e){try{s.set_database(p0.parse(e))}catch(e){return jt.lastError=e,s.set_status(Se.BROKEN),ae.app.logger.error("Failed to parse database at path: "+s.path,{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:121,className:"ceramic.DatabaseAsset",methodName:"load"}),void s.emitComplete(!1)}s.set_status(Se.READY),s.emitComplete(!0)}else s.set_status(Se.BROKEN),ae.app.logger.error("Failed to load database at path: "+s.path,{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:130,className:"ceramic.DatabaseAsset",methodName:"load"}),s.emitComplete(!1)}))},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload database (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:159,className:"ceramic.DatabaseAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),this.set_database(null))},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offDatabaseChange()},__class__:Xe,__properties__:$extend(Fa.prototype.__properties__,{set_database:"set_database",get_database:"get_database"})}),he["ceramic.Easing"]={__ename__:"ceramic.Easing",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"ceramic.Easing",toString:c},LINEAR:{_hx_name:"LINEAR",_hx_index:1,__enum__:"ceramic.Easing",toString:c},BACK_EASE_IN:{_hx_name:"BACK_EASE_IN",_hx_index:2,__enum__:"ceramic.Easing",toString:c},BACK_EASE_IN_OUT:{_hx_name:"BACK_EASE_IN_OUT",_hx_index:3,__enum__:"ceramic.Easing",toString:c},BACK_EASE_OUT:{_hx_name:"BACK_EASE_OUT",_hx_index:4,__enum__:"ceramic.Easing",toString:c},QUAD_EASE_IN:{_hx_name:"QUAD_EASE_IN",_hx_index:5,__enum__:"ceramic.Easing",toString:c},QUAD_EASE_IN_OUT:{_hx_name:"QUAD_EASE_IN_OUT",_hx_index:6,__enum__:"ceramic.Easing",toString:c},QUAD_EASE_OUT:{_hx_name:"QUAD_EASE_OUT",_hx_index:7,__enum__:"ceramic.Easing",toString:c},CUBIC_EASE_IN:{_hx_name:"CUBIC_EASE_IN",_hx_index:8,__enum__:"ceramic.Easing",toString:c},CUBIC_EASE_IN_OUT:{_hx_name:"CUBIC_EASE_IN_OUT",_hx_index:9,__enum__:"ceramic.Easing",toString:c},CUBIC_EASE_OUT:{_hx_name:"CUBIC_EASE_OUT",_hx_index:10,__enum__:"ceramic.Easing",toString:c},QUART_EASE_IN:{_hx_name:"QUART_EASE_IN",_hx_index:11,__enum__:"ceramic.Easing",toString:c},QUART_EASE_IN_OUT:{_hx_name:"QUART_EASE_IN_OUT",_hx_index:12,__enum__:"ceramic.Easing",toString:c},QUART_EASE_OUT:{_hx_name:"QUART_EASE_OUT",_hx_index:13,__enum__:"ceramic.Easing",toString:c},QUINT_EASE_IN:{_hx_name:"QUINT_EASE_IN",_hx_index:14,__enum__:"ceramic.Easing",toString:c},QUINT_EASE_IN_OUT:{_hx_name:"QUINT_EASE_IN_OUT",_hx_index:15,__enum__:"ceramic.Easing",toString:c},QUINT_EASE_OUT:{_hx_name:"QUINT_EASE_OUT",_hx_index:16,__enum__:"ceramic.Easing",toString:c},BOUNCE_EASE_IN:{_hx_name:"BOUNCE_EASE_IN",_hx_index:17,__enum__:"ceramic.Easing",toString:c},BOUNCE_EASE_IN_OUT:{_hx_name:"BOUNCE_EASE_IN_OUT",_hx_index:18,__enum__:"ceramic.Easing",toString:c},BOUNCE_EASE_OUT:{_hx_name:"BOUNCE_EASE_OUT",_hx_index:19,__enum__:"ceramic.Easing",toString:c},ELASTIC_EASE_IN:{_hx_name:"ELASTIC_EASE_IN",_hx_index:20,__enum__:"ceramic.Easing",toString:c},ELASTIC_EASE_IN_OUT:{_hx_name:"ELASTIC_EASE_IN_OUT",_hx_index:21,__enum__:"ceramic.Easing",toString:c},ELASTIC_EASE_OUT:{_hx_name:"ELASTIC_EASE_OUT",_hx_index:22,__enum__:"ceramic.Easing",toString:c},EXPO_EASE_IN:{_hx_name:"EXPO_EASE_IN",_hx_index:23,__enum__:"ceramic.Easing",toString:c},EXPO_EASE_IN_OUT:{_hx_name:"EXPO_EASE_IN_OUT",_hx_index:24,__enum__:"ceramic.Easing",toString:c},EXPO_EASE_OUT:{_hx_name:"EXPO_EASE_OUT",_hx_index:25,__enum__:"ceramic.Easing",toString:c},SINE_EASE_IN:{_hx_name:"SINE_EASE_IN",_hx_index:26,__enum__:"ceramic.Easing",toString:c},SINE_EASE_IN_OUT:{_hx_name:"SINE_EASE_IN_OUT",_hx_index:27,__enum__:"ceramic.Easing",toString:c},SINE_EASE_OUT:{_hx_name:"SINE_EASE_OUT",_hx_index:28,__enum__:"ceramic.Easing",toString:c},BEZIER:((a=function(e,n,t,i){return{_hx_index:29,x1:e,y1:n,x2:t,y2:i,__enum__:"ceramic.Easing",toString:c}})._hx_name="BEZIER",a.__params__=["x1","y1","x2","y2"],a),CUSTOM:((a=function(e){return{_hx_index:30,easing:e,__enum__:"ceramic.Easing",toString:c}})._hx_name="CUSTOM",a.__params__=["easing"],a)}),Qe=(je.__constructs__=[je.NONE,je.LINEAR,je.BACK_EASE_IN,je.BACK_EASE_IN_OUT,je.BACK_EASE_OUT,je.QUAD_EASE_IN,je.QUAD_EASE_IN_OUT,je.QUAD_EASE_OUT,je.CUBIC_EASE_IN,je.CUBIC_EASE_IN_OUT,je.CUBIC_EASE_OUT,je.QUART_EASE_IN,je.QUART_EASE_IN_OUT,je.QUART_EASE_OUT,je.QUINT_EASE_IN,je.QUINT_EASE_IN_OUT,je.QUINT_EASE_OUT,je.BOUNCE_EASE_IN,je.BOUNCE_EASE_IN_OUT,je.BOUNCE_EASE_OUT,je.ELASTIC_EASE_IN,je.ELASTIC_EASE_IN_OUT,je.ELASTIC_EASE_OUT,je.EXPO_EASE_IN,je.EXPO_EASE_IN_OUT,je.EXPO_EASE_OUT,je.SINE_EASE_IN,je.SINE_EASE_IN_OUT,je.SINE_EASE_OUT,je.BEZIER,je.CUSTOM],(x["ceramic.EasingUtils"]=t0).__name__="ceramic.EasingUtils",t0.easingFromString=function(e){return B.createEnum(je,e,t0._emptyArray)},t0.easingToString=function(e){return he[e.__enum__].__constructs__[e._hx_index]._hx_name},function(){}),$e=((x["ceramic.Errors"]=Qe).__name__="ceramic.Errors",Qe.handleUncaughtError=function(e){for(var n=ae.app,n=(null!=n.__cbOnCriticalError&&0<n.__cbOnCriticalError.length||null!=n.__cbOnceCriticalError&&n.__cbOnceCriticalError.length,Yt.exceptionStack()),t=[].concat(n),i=(t.reverse(),ae.app.emitCriticalError(e,t),0);i<t.length;){var s=t[i];++i,console.log(""+L.string(C.stackItemToString(s)))}console.log(""+L.string("[error] "+L.string(e)))},function(){}),qe=((x["ceramic.Extensions"]=$e).__name__="ceramic.Extensions",$e.unsafeGet=function(e,n){return e[n]},$e.unsafeSet=function(e,n,t){e[n]=t},$e.setArrayLength=function(e,n){if(e.length!=n)if(e.length>n)e.splice(n,e.length-n);else for(var t=e;t.length<n;)t.push(null)},$e.randomElement=function(e){return e[Math.floor(.99999*Math.random()*e.length)]},$e.randomElementExcept=function(e,n,t){if(t=null==t?!1:t){for(var i=null;(i=e[Math.floor(.99999*Math.random()*e.length)])==n;);return i}for(var s=[],r=0;r<e.length;){var l=e[r];++r,s.push(l)}$e.shuffle(s);for(r=0;r<s.length;){l=s[r];if(++r,l!=n)return l}return null},$e.randomElementMatchingValidator=function(e,n){for(var t=[],i=0;i<e.length;){var s=e[i];++i,t.push(s)}$e.shuffle(t);for(i=0;i<t.length;){s=t[i];if(++i,n(s))return s}return null},$e.shuffle=function(e){if(null!=e)for(var n=0,t=e.length;n<t;){var i=n++,s=Math.floor((e.length-1+1)*Math.random()),r=e[i],l=e[s];e[i]=l,e[s]=r}},$e.swapElements=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},$e.removeNullElements=function(e){for(var n=0,t=0,i=e.length;n<i;){do{}while(null==e[n]&&(++t,++n<i));0!=t&&n<i&&(e[n-t]=e[n]),++n}var s=i-t;if(e.length!=s)if(e.length>s)e.splice(s,e.length-s);else for(var r=e;r.length<s;)r.push(null)},$e.setProperty=function(e,n,t){P.setProperty(e,n,t)},$e.getProperty=function(e,n){return P.getProperty(e,n)},function(){}),Ze=((x["ceramic.FieldInfo"]=qe).__name__="ceramic.FieldInfo",qe.types=function(e,n){null==n&&(n=!0);var t=qe.fieldInfoMap.h[e];if(null==t){t=new te,qe.fieldInfoMap.h[e]=t;for(var i=x[e];null!=i;){var s=P.field(i,"_fieldInfo");if(null!=s)for(var r=s,l=P.fields(s),a=0;a<l.length;){var h=l[a++],c=h,h=r[h];Object.prototype.hasOwnProperty.call(t.h,c)||(t.h[c]=h.type)}if(!n)break;i=i.__super__}}return t},qe.typeOf=function(e,n){return qe.types(e).h[n]},function(){}),Je=((x["ceramic.FieldMeta"]=Ze).__name__="ceramic.FieldMeta",Ze._hasMeta=function(e,n,t,i,s){e=Ze._getMeta(e,n,t,s);return null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)},Ze._getMeta=function(e,n,t,i){var s=null,r=i?Ze.metaMapRecursive:Ze.metaMap;if(Object.prototype.hasOwnProperty.call(r.h,n))s=r.h[n];else{for(s=new te;null!=e;){var l=fi.getFields(e);if(null!=l)for(var a=0,h=P.fields(l);a<h.length;){var c=h[a],o=(++a,s.h[c]),u=(null==o&&(o=new te,s.h[c]=o),P.field(l,c));if(null!=u)for(var _=0,d=P.fields(u);_<d.length;){var b=d[_];++_,Object.prototype.hasOwnProperty.call(o.h,b)||(o.h[b]=P.field(u,b))}}if(!i)break;e=e.__super__}r.h[n]=s}return Object.prototype.hasOwnProperty.call(s.h,t)?s.h[t]:null},function(){}),en=((x["ceramic.Files"]=Je).__name__="ceramic.Files",Je.haveSameContent=function(e,n){return ae.app.logger.warning("haveSameContent() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:64,className:"ceramic.Files",methodName:"haveSameContent"}),!1},Je.haveSameLastModified=function(e,n){return ae.app.logger.warning("haveSameLastModified() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:111,className:"ceramic.Files",methodName:"haveSameLastModified"}),!1},Je.setToSameLastModified=function(e,n){ae.app.logger.warning("setToSameLastModified() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:143,className:"ceramic.Files",methodName:"setToSameLastModified"})},Je.getFlatDirectory=function(e,n,t,i){return null==i&&(i=!0),null==t&&(t=!1),null==n&&(n=!0),[]},Je.getLastModified=function(e){return-1},Je.removeEmptyDirectories=function(e,n){null==n&&(n=!0),ae.app.logger.warning("removeEmptyDirectories() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:302,className:"ceramic.Files",methodName:"removeEmptyDirectories"})},Je.isEmptyDirectory=function(e,n){return null==n&&(n=!0),ae.app.logger.warning("isEmptyDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:330,className:"ceramic.Files",methodName:"isEmptyDirectory"}),!1},Je.deleteRecursive=function(e){ae.app.logger.warning("deleteRecursive() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:382,className:"ceramic.Files",methodName:"deleteRecursive"})},Je.getRelativePath=function(e,n){for(var t=le.substr(An.normalize(n),1,null).split("/"),i=le.substr(An.normalize(e),1,null).split("/"),n=Math.min(t.length,i.length),s=n,r=0,l=n;r<l;)if(t[h=r++]!=i[h]){s=h;break}for(var a=[],r=s,l=t.length;r<l;){var h=r++;a.push("..")}n=(a=a.concat(i.slice(s))).join("/");return z.endsWith(e,"/")&&!z.endsWith(n,"/")&&(n+="/"),n=z.startsWith(n,".")?n:"./"+n},Je.copyFileWithIntermediateDirs=function(e,n){ae.app.logger.warning("copyFileWithIntermediateDirs() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:460,className:"ceramic.Files",methodName:"copyFileWithIntermediateDirs"})},Je.copyDirectory=function(e,n,t){null==t&&(t=!1),ae.app.logger.warning("copyDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:501,className:"ceramic.Files",methodName:"copyDirectory"})},Je.deleteFile=function(e){ae.app.logger.warning("deleteFile() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:533,className:"ceramic.Files",methodName:"deleteFile"})},Je.getContent=function(e){return ae.app.logger.warning("getContent() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:565,className:"ceramic.Files",methodName:"getContent"}),null},Je.getBytes=function(e){return ae.app.logger.warning("getBytes() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:599,className:"ceramic.Files",methodName:"getBytes"}),null},Je.saveContent=function(e,n){ae.app.logger.warning("saveContent() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:631,className:"ceramic.Files",methodName:"saveContent"})},Je.saveBytes=function(e,n){ae.app.logger.warning("saveBytes() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:663,className:"ceramic.Files",methodName:"saveBytes"})},Je.createDirectory=function(e){ae.app.logger.warning("createDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:696,className:"ceramic.Files",methodName:"createDirectory"})},Je.exists=function(e){return ae.app.logger.warning("exists() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:754,className:"ceramic.Files",methodName:"exists"}),!1},Je.isDirectory=function(e){return ae.app.logger.warning("isDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:793,className:"ceramic.Files",methodName:"isDirectory"}),!1},function(){this.explicitRenderPendingResultCallbacks=null,this.explicitRenderState=0,this.neverEmpty=!1,this.density=-1,this.unobservedRenderTexture=null,this.renderTextureAutoruns=null,this.textureTile=null,this.textureTilePacker=null,this.explicitRender=!1,this.autoRender=!0,this.antialiasing=0,this.stencil=!0,this.depthBuffer=!0,this.textureFilter=at.LINEAR,this.enabled=!0,this.hitVisual=null,this.destroyMeshOnRemove=!0,this.neverEmptyQuad=null,this.meshDirty=!1,this.mesh=null,this.textureId=null,this.observedDirty=!1,o.call(this),this.flags&=-17,this.content=new n,this.content.flags|=16,this.content.color=16777215,this.add(this.content),this.set_hitVisual(this),ae.app.screen.onTexturesDensityChange(this,$bind(this,this.handleTexturesDensityChange))}),nn=((x["ceramic.Filter"]=en).__name__="ceramic.Filter",en.__interfaces__=[q],en.__super__=o,en.prototype=$extend(o.prototype,{emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnObservedDirty)for(var l=0,a=this.__cbOnObservedDirty.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnObservedDirty[h],++r):--t}if(null!=this.__cbOnceObservedDirty){for(var c=null,o=null,l=0,a=this.__cbOnceObservedDirty.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,u=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindObservedDirty[h]),o.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=c,this.__cbOnceObservedDirty=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(r=this.__cbOnOwnerUnbindObservedDirty[n])&&r(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindObservedDirty[n])&&r(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindObservedDirty[s])&&r()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindObservedDirty[s])&&r()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},set_textureId:function(e){return this.textureId=e,null!=this.get_renderTexture()&&(this.get_renderTexture().id=e),e},set_mesh:function(e){var n;return this.mesh!=e&&(null!=this.mesh&&(this.destroyMeshOnRemove?(n=this.mesh,this.mesh=null,n.destroy()):this.remove(this.mesh)),this.mesh=e,null!=this.mesh&&this.add(this.mesh),this.meshDirty=!0,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_hitVisual:function(e){return this.hitVisual!=e&&(null!=this.hitVisual&&ae.app.screen.removeHitVisual(this.hitVisual),this.hitVisual=e,null!=this.hitVisual)&&ae.app.screen.addHitVisual(this.hitVisual),e},set_enabled:function(e){return this.enabled!=e&&(this.enabled=e,this.flags=!e?16|this.flags:-17&this.flags,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_textureFilter:function(e){return this.textureFilter!=e&&(this.textureFilter=e,null!=this.get_renderTexture())&&this.get_renderTexture().set_filter(e),e},set_depthBuffer:function(e){return this.depthBuffer!=e&&(this.depthBuffer=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_stencil:function(e){return this.stencil!=e&&(this.stencil=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_antialiasing:function(e){return this.antialiasing!=e&&(this.antialiasing=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_autoRender:function(e){return this.autoRender!=e&&(this.autoRender=e,null!=this.get_renderTexture())&&(this.get_renderTexture().autoRender=e),e},set_explicitRender:function(e){return this.explicitRender!=e&&(this.explicitRender=e,this.content.set_active(!e)),e},set_textureTilePacker:function(e){return this.textureTilePacker!=e&&(null!=this.textureTile&&null!=this.textureTilePacker&&(this.textureTilePacker.releaseTile(this.textureTile),this.textureTile=null,this.set_tile(null),this.set_tile(null),this.content.set_renderTarget(null)),this.textureTilePacker=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},get_renderTexture:function(){var e,n,t=this.unobservedRenderTexture;return null!=se.current&&(e=se.current,null!=(n=this.renderTextureAutoruns)||(n=se.getAutorunArray(),null!=(this.renderTextureAutoruns=n)))&&e.bindToAutorunArray(n),t},set_renderTexture:function(e){var n=this.unobservedRenderTexture;return n!=(this.unobservedRenderTexture=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitRenderTextureChange(e,n),null!=(n=this.renderTextureAutoruns))&&(this.renderTextureAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateRenderTexture:function(){var e=this.unobservedRenderTexture,e=(this.emitRenderTextureChange(e,e),this.renderTextureAutoruns);null!=e&&(this.renderTextureAutoruns=null,se.invalidateAutorunArray(e))},emitRenderTextureChange:function(e,n){var t=0;if(null!=this.__cbOnRenderTextureChange&&(t+=this.__cbOnRenderTextureChange.length),null!=this.__cbOnceRenderTextureChange&&(t+=this.__cbOnceRenderTextureChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnRenderTextureChange)for(var l=0,a=this.__cbOnRenderTextureChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnRenderTextureChange[h],++r):--t}if(null!=this.__cbOnceRenderTextureChange){for(var c=null,o=null,l=0,a=this.__cbOnceRenderTextureChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceRenderTextureChange[h],this.__cbOnceRenderTextureChange[h]=null,u=this.__cbOnceOwnerUnbindRenderTextureChange[h],(this.__cbOnceOwnerUnbindRenderTextureChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindRenderTextureChange[h]),o.push(this.__cbOnceRenderTextureChange[h]))}this.__cbOnceOwnerUnbindRenderTextureChange=c,this.__cbOnceRenderTextureChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onRenderTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event renderTextureChange because owner is destroyed!");var s=function(e){null!=t&&(i.offRenderTextureChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindRenderTextureChange&&(this.__cbOnOwnerUnbindRenderTextureChange=[]),this.__cbOnOwnerUnbindRenderTextureChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindRenderTextureChange&&(this.__cbOnOwnerUnbindRenderTextureChange=[]),this.__cbOnOwnerUnbindRenderTextureChange.push(null);null==this.__cbOnRenderTextureChange&&(this.__cbOnRenderTextureChange=[]),this.__cbOnRenderTextureChange.push(t)},onceRenderTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event renderTextureChange because owner is destroyed!");var s=function(e){null!=t&&(i.offRenderTextureChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindRenderTextureChange&&(this.__cbOnceOwnerUnbindRenderTextureChange=[]),this.__cbOnceOwnerUnbindRenderTextureChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindRenderTextureChange&&(this.__cbOnceOwnerUnbindRenderTextureChange=[]),this.__cbOnceOwnerUnbindRenderTextureChange.push(null);null==this.__cbOnceRenderTextureChange&&(this.__cbOnceRenderTextureChange=[]),this.__cbOnceRenderTextureChange.push(t)},offRenderTextureChange:function(e){if(null!=e){var n;null!=this.__cbOnRenderTextureChange&&-1!=(n=this.__cbOnRenderTextureChange.indexOf(e))&&(this.__cbOnRenderTextureChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindRenderTextureChange[n])&&r(),this.__cbOnOwnerUnbindRenderTextureChange.splice(n,1)),null!=this.__cbOnceRenderTextureChange&&-1!=(n=this.__cbOnceRenderTextureChange.indexOf(e))&&(this.__cbOnceRenderTextureChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindRenderTextureChange[n])&&r(),this.__cbOnceOwnerUnbindRenderTextureChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindRenderTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindRenderTextureChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindRenderTextureChange[s])&&r()}this.__cbOnOwnerUnbindRenderTextureChange=null}if(null!=this.__cbOnceOwnerUnbindRenderTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindRenderTextureChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindRenderTextureChange[s])&&r()}this.__cbOnceOwnerUnbindRenderTextureChange=null}this.__cbOnRenderTextureChange=null,this.__cbOnceRenderTextureChange=null}},listensRenderTextureChange:function(){return null!=this.__cbOnRenderTextureChange&&0<this.__cbOnRenderTextureChange.length||null!=this.__cbOnceRenderTextureChange&&0<this.__cbOnceRenderTextureChange.length},set_density:function(e){return this.density!=e&&(this.density=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_neverEmpty:function(e){var t;return this.neverEmpty!=e&&((this.neverEmpty=e)?null==this.neverEmptyQuad&&(this.neverEmptyQuad=new n,(t=this.neverEmptyQuad).set_width(1),t.set_height(1),(t=this.neverEmptyQuad).set_x(-999999999),t.set_y(-999999999),this.content.add(this.neverEmptyQuad)):null!=this.neverEmptyQuad&&(this.neverEmptyQuad.destroy(),this.neverEmptyQuad=null)),e},handleTexturesDensityChange:function(e,n){e!=n&&-1==this.density&&(this.updateRenderTextureAndContent(Math.ceil(this.get_width()),Math.ceil(this.get_height()),e,this.depthBuffer,this.stencil,this.antialiasing),this.contentDirty=!1)},updateRenderTextureAndContent:function(e,n,t,i,s,r){var l=null!=this.mesh?this.mesh.texture:this._texture,a=(this.enabled?(this.meshDirty||null==this.get_renderTexture()||(null==this.textureTilePacker||!this.textureTilePacker.managesTexture(this.get_renderTexture()))&&(this.get_renderTexture().width!=e||this.get_renderTexture().height!=n||-1!=t&&this.get_renderTexture().density!=t||this.get_renderTexture().depth!=i||this.get_renderTexture().stencil!=s||this.get_renderTexture().antialiasing!=r)||null!=this.textureTilePacker&&!this.textureTilePacker.managesTexture(this.get_renderTexture())||null!=this.textureTile&&(this.textureTile.frameWidth!=e||this.textureTile.frameHeight!=n))&&(null==this.get_renderTexture()||null!=this.textureTilePacker&&this.textureTilePacker.managesTexture(this.get_renderTexture())||(l=null,this.get_renderTexture().destroy(),this.set_renderTexture(null)),null!=this.textureTile&&null!=this.textureTilePacker&&(this.textureTilePacker.releaseTile(this.textureTile),this.textureTile=null),0<e)&&0<n&&(null!=this.textureTilePacker?(this.set_renderTexture(this.textureTilePacker.texture),this.textureTile=this.textureTilePacker.allocTile(e,n),this.set_tile(this.textureTile)):(this.set_renderTexture(new In(e,n,t,i,s,r)),this.get_renderTexture().id=this.textureId,this.get_renderTexture().set_filter(this.textureFilter),this.get_renderTexture().autoRender=this.autoRender,this.set_tile(null),l=this.get_renderTexture())):null==this.get_renderTexture()||null!=this.textureTilePacker&&this.textureTilePacker.managesTexture(this.get_renderTexture())||(this.set_tile(null),l=null,this.get_renderTexture().destroy(),this.set_renderTexture(null)),null!=this.mesh?((a=this.mesh).texture!=l&&(null!=a.texture&&(a.texture.offDestroy($bind(a,a.textureDestroyed)),null!=a.texture.asset)&&a.texture.asset.release(),a.texture=l,null!=a.texture)&&(a.texture.onDestroy(a,$bind(a,a.textureDestroyed)),null!=a.texture.asset)&&a.texture.asset.retain(),null!=this._texture&&this._set_texture(null)):this._texture!=l&&this._set_texture(l),this.meshDirty=!1,this.content);a.set_width(e),a.set_height(n),this.content.set_renderTarget(this.get_renderTexture()),null!=this.textureTile?(a=this.content,t=this.textureTile.frameY,a.set_x(this.textureTile.frameX),a.set_y(t)):((a=this.content).set_x(0),a.set_y(0)),this.content.contentDirty&&this.content.computeContent()},render:function(l){var a=this;if(this.explicitRender)if(1==this.explicitRenderState)null!=l&&(null==this.explicitRenderPendingResultCallbacks&&(this.explicitRenderPendingResultCallbacks=[]),this.explicitRenderPendingResultCallbacks.push(l),l=null);else if(2==this.explicitRenderState)null!=l&&(null==this.explicitRenderPendingResultCallbacks&&(this.explicitRenderPendingResultCallbacks=[]),this.explicitRenderPendingResultCallbacks.push(function(){a.render(l),l=null}));else if(this.explicitRenderState=1,this.contentDirty&&this.computeContent(),null==this.get_renderTexture()){this.explicitRenderState=0;var e=this.explicitRenderPendingResultCallbacks;if((this.explicitRenderPendingResultCallbacks=null)!=l&&(l(),l=null),null!=e)for(var n=0,t=e.length;n<t;){var i=n++,s=e[i];e[i]=null,s(),s=null}}else this.content.set_active(!0),ae.app.onceUpdate(null,function(e){if(a._lifecycleState<0)l=null;else if(a.explicitRenderState=2,a.contentDirty&&a.computeContent(),null==a.get_renderTexture()){a.content.set_active(!1),a.explicitRenderState=0;var n=a.explicitRenderPendingResultCallbacks;if((a.explicitRenderPendingResultCallbacks=null)!=l&&(l(),l=null),null!=n)for(var t=0,i=n.length;t<i;){var s=t++,r=n[s];n[s]=null,r(),r=null}}else a.get_renderTexture().renderDirty=!0,ae.app.onceFinishDraw(null,function(){if(a._lifecycleState<0)l=null;else{a.content.set_active(!1),a.explicitRenderState=0;var e=a.explicitRenderPendingResultCallbacks;if((a.explicitRenderPendingResultCallbacks=null)!=l&&(l(),l=null),null!=e)for(var n=0,t=e.length;n<t;){var i=n++,s=e[i];e[i]=null,s(),s=null}}})});else ae.app.logger.warning("Explicit render is disabled on this filter. Ignoring render() call.",{fileName:"../../../../ceramic/runtime/src/ceramic/Filter.hx",lineNumber:479,className:"ceramic.Filter",methodName:"render"})},visualInContentHits:function(e,n,t){var i=Kn.matchedHitVisual;if(Kn.matchedHitVisual=null,this.hitVisual._hits(n,t,!1)){Kn.matchedHitVisual=i,e.matrixDirty&&e.computeMatrix();var s=en._matrix,r=(s.a=e.matA,s.b=e.matB,s.c=e.matC,s.d=e.matD,s.tx=e.matTX,s.ty=e.matTY,s.changedDirty=!0,this.hitVisual);do{r.matrixDirty&&r.computeMatrix();var l=en._matrix.a*r.matA+en._matrix.b*r.matC,a=(en._matrix.b=en._matrix.a*r.matB+en._matrix.b*r.matD,en._matrix.a=l,en._matrix.c*r.matA+en._matrix.d*r.matC),h=(en._matrix.d=en._matrix.c*r.matB+en._matrix.d*r.matD,en._matrix.c=a,en._matrix.tx*r.matA+en._matrix.ty*r.matC+r.matTX);if(en._matrix.ty=en._matrix.tx*r.matB+en._matrix.ty*r.matD+r.matTY,en._matrix.tx=h,null!=r.computedRenderTarget){var c=!1,o=r.parent;if(null!=o)do{if(null!=o.asQuad&&o instanceof en){var u=o;if(u.get_renderTexture()==r.computedRenderTarget){r=u.hitVisual,c=!0;break}}}while(null!=(o=o.parent));if(!c)return!1}else r=null}while(null!=r);var _=(s=en._matrix).a*s.d-s.b*s.c;return 0==_?(s.a=s.b=s.c=s.d=0,s.tx=-s.tx,s.ty=-s.ty):(l=s.d*(_=1/_),s.d=s.a*_,s.a=l,s.b*=-_,s.c*=-_,h=-s.a*s.tx-s.c*s.ty,s.ty=-s.b*s.tx-s.d*s.ty,s.tx=h),s.changedDirty=!0,e.hitTest(n,t,en._matrix)}return Kn.matchedHitVisual=i,!1},set_width:function(e){return this.get_width()==e?e:(this.contentDirty=!0,ae.app.visualsContentDirty=!0,o.prototype.set_width.call(this,e))},set_height:function(e){return this.get_height()==e?e:(this.contentDirty=!0,ae.app.visualsContentDirty=!0,o.prototype.set_height.call(this,e))},computeContent:function(){this.updateRenderTextureAndContent(Math.ceil(this.get_width()),Math.ceil(this.get_height()),this.density,this.depthBuffer,this.stencil,this.antialiasing),this.contentDirty=!1},destroy:function(){var e;this._lifecycleState<=-2||(this._lifecycleState=-2,this.set_hitVisual(null),null!=this._texture&&this._set_texture(null),null==this.get_renderTexture()||null!=this.textureTilePacker&&this.textureTilePacker.managesTexture(this.get_renderTexture())||(this.get_renderTexture().destroy(),this.set_renderTexture(null)),this.set_textureTilePacker(null),this.set_renderTexture(null),null!=this.mesh&&(e=this.mesh,this.set_mesh(null),e.destroy()),this.set_neverEmpty(!1),this.explicitRenderPendingResultCallbacks=null,this.content=null,this._lifecycleState=-1,o.prototype.destroy.call(this))},unbindEvents:function(){o.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offRenderTextureChange()},__class__:en,__properties__:$extend(o.prototype.__properties__,{set_neverEmpty:"set_neverEmpty",set_density:"set_density",set_renderTexture:"set_renderTexture",get_renderTexture:"get_renderTexture",set_textureTilePacker:"set_textureTilePacker",set_explicitRender:"set_explicitRender",set_autoRender:"set_autoRender",set_antialiasing:"set_antialiasing",set_stencil:"set_stencil",set_depthBuffer:"set_depthBuffer",set_textureFilter:"set_textureFilter",set_enabled:"set_enabled",set_hitVisual:"set_hitVisual",set_mesh:"set_mesh",set_textureId:"set_textureId"})}),function(e,n,t){this.transformedPath=null,this.unobservedFont=null,this.fontAutoruns=null,this.pages=null,this.fontData=null,Fa.call(this,"font",e,n,t),this.set_handleTexturesDensityChange(!0),this.assets=new ne}),tn=((x["ceramic.FontAsset"]=nn).__name__="ceramic.FontAsset",nn.__super__=Fa,nn.prototype=$extend(Fa.prototype,{emitReplaceFont:function(e,n){var t=0;if(null!=this.__cbOnReplaceFont&&(t+=this.__cbOnReplaceFont.length),null!=this.__cbOnceReplaceFont&&(t+=this.__cbOnceReplaceFont.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnReplaceFont)for(var l=0,a=this.__cbOnReplaceFont.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnReplaceFont[h],++r):--t}if(null!=this.__cbOnceReplaceFont){for(var c=null,o=null,l=0,a=this.__cbOnceReplaceFont.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceReplaceFont[h],this.__cbOnceReplaceFont[h]=null,u=this.__cbOnceOwnerUnbindReplaceFont[h],(this.__cbOnceOwnerUnbindReplaceFont[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindReplaceFont[h]),o.push(this.__cbOnceReplaceFont[h]))}this.__cbOnceOwnerUnbindReplaceFont=c,this.__cbOnceReplaceFont=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onReplaceFont:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceFont because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceFont(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReplaceFont&&(this.__cbOnOwnerUnbindReplaceFont=[]),this.__cbOnOwnerUnbindReplaceFont.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReplaceFont&&(this.__cbOnOwnerUnbindReplaceFont=[]),this.__cbOnOwnerUnbindReplaceFont.push(null);null==this.__cbOnReplaceFont&&(this.__cbOnReplaceFont=[]),this.__cbOnReplaceFont.push(t)},onceReplaceFont:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceFont because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceFont(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReplaceFont&&(this.__cbOnceOwnerUnbindReplaceFont=[]),this.__cbOnceOwnerUnbindReplaceFont.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReplaceFont&&(this.__cbOnceOwnerUnbindReplaceFont=[]),this.__cbOnceOwnerUnbindReplaceFont.push(null);null==this.__cbOnceReplaceFont&&(this.__cbOnceReplaceFont=[]),this.__cbOnceReplaceFont.push(t)},offReplaceFont:function(e){if(null!=e){var n;null!=this.__cbOnReplaceFont&&-1!=(n=this.__cbOnReplaceFont.indexOf(e))&&(this.__cbOnReplaceFont.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReplaceFont[n])&&r(),this.__cbOnOwnerUnbindReplaceFont.splice(n,1)),null!=this.__cbOnceReplaceFont&&-1!=(n=this.__cbOnceReplaceFont.indexOf(e))&&(this.__cbOnceReplaceFont.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReplaceFont[n])&&r(),this.__cbOnceOwnerUnbindReplaceFont.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceFont){for(var t=0,i=this.__cbOnOwnerUnbindReplaceFont.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReplaceFont[s])&&r()}this.__cbOnOwnerUnbindReplaceFont=null}if(null!=this.__cbOnceOwnerUnbindReplaceFont){for(t=0,i=this.__cbOnceOwnerUnbindReplaceFont.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReplaceFont[s])&&r()}this.__cbOnceOwnerUnbindReplaceFont=null}this.__cbOnReplaceFont=null,this.__cbOnceReplaceFont=null}},listensReplaceFont:function(){return null!=this.__cbOnReplaceFont&&0<this.__cbOnReplaceFont.length||null!=this.__cbOnceReplaceFont&&0<this.__cbOnceReplaceFont.length},get_font:function(){var e,n,t=this.unobservedFont;return null!=se.current&&(e=se.current,null!=(n=this.fontAutoruns)||(n=se.getAutorunArray(),null!=(this.fontAutoruns=n)))&&e.bindToAutorunArray(n),t},set_font:function(e){var n=this.unobservedFont;return n!=(this.unobservedFont=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFontChange(e,n),null!=(n=this.fontAutoruns))&&(this.fontAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateFont:function(){var e=this.unobservedFont,e=(this.emitFontChange(e,e),this.fontAutoruns);null!=e&&(this.fontAutoruns=null,se.invalidateAutorunArray(e))},emitFontChange:function(e,n){var t=0;if(null!=this.__cbOnFontChange&&(t+=this.__cbOnFontChange.length),null!=this.__cbOnceFontChange&&(t+=this.__cbOnceFontChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnFontChange)for(var l=0,a=this.__cbOnFontChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnFontChange[h],++r):--t}if(null!=this.__cbOnceFontChange){for(var c=null,o=null,l=0,a=this.__cbOnceFontChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceFontChange[h],this.__cbOnceFontChange[h]=null,u=this.__cbOnceOwnerUnbindFontChange[h],(this.__cbOnceOwnerUnbindFontChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindFontChange[h]),o.push(this.__cbOnceFontChange[h]))}this.__cbOnceOwnerUnbindFontChange=c,this.__cbOnceFontChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onFontChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event fontChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFontChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFontChange&&(this.__cbOnOwnerUnbindFontChange=[]),this.__cbOnOwnerUnbindFontChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFontChange&&(this.__cbOnOwnerUnbindFontChange=[]),this.__cbOnOwnerUnbindFontChange.push(null);null==this.__cbOnFontChange&&(this.__cbOnFontChange=[]),this.__cbOnFontChange.push(t)},onceFontChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event fontChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFontChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFontChange&&(this.__cbOnceOwnerUnbindFontChange=[]),this.__cbOnceOwnerUnbindFontChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFontChange&&(this.__cbOnceOwnerUnbindFontChange=[]),this.__cbOnceOwnerUnbindFontChange.push(null);null==this.__cbOnceFontChange&&(this.__cbOnceFontChange=[]),this.__cbOnceFontChange.push(t)},offFontChange:function(e){if(null!=e){var n;null!=this.__cbOnFontChange&&-1!=(n=this.__cbOnFontChange.indexOf(e))&&(this.__cbOnFontChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFontChange[n])&&r(),this.__cbOnOwnerUnbindFontChange.splice(n,1)),null!=this.__cbOnceFontChange&&-1!=(n=this.__cbOnceFontChange.indexOf(e))&&(this.__cbOnceFontChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFontChange[n])&&r(),this.__cbOnceOwnerUnbindFontChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFontChange){for(var t=0,i=this.__cbOnOwnerUnbindFontChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFontChange[s])&&r()}this.__cbOnOwnerUnbindFontChange=null}if(null!=this.__cbOnceOwnerUnbindFontChange){for(t=0,i=this.__cbOnceOwnerUnbindFontChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFontChange[s])&&r()}this.__cbOnceOwnerUnbindFontChange=null}this.__cbOnFontChange=null,this.__cbOnceFontChange=null}},listensFontChange:function(){return null!=this.__cbOnFontChange&&0<this.__cbOnFontChange.length||null!=this.__cbOnceFontChange&&0<this.__cbOnceFontChange.length},load:function(){for(var _,e,d=this,b=(null!=this.owner&&(this.assets.inheritRuntimeAssetsFromAssets(this.owner),this.assets.loadMethod=this.owner.loadMethod,this.assets.scheduleMethod=this.owner.scheduleMethod,this.assets.delayBetweenXAssets=this.owner.delayBetweenXAssets),[]),p=this.assets.iterator();p.hasNext();){var n=p.next();b.push(n)}this.set_status(Se.LOADING),null==this.path?(ae.app.logger.warning("Cannot load font asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:113,className:"ceramic.FontAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1)):(e=(_=this.path).toLowerCase(),(z.endsWith(e,".ttf")||z.endsWith(e,".otf"))&&(_=_.substring(0,_.length-4)+".fnt"),ae.app.logger.info("Load font "+_,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:128,className:"ceramic.FontAsset",methodName:"load"}),null!=this.transformedPath&&(_=An.join([this.transformedPath,_])),this.assets.runtimeAssets=this.runtimeAssets,(p=new Jn(this.name)).set_handleTexturesDensityChange(!1),p.set_path(_),this.assets.addAsset(p),this.assets.onceComplete(this,function(e){var n=p.get_text(),c=An.directory(_);if(""==c&&(c="."),null!=n)try{for(var t=An.withoutExtension(An.withoutDirectory(_))+".png",o=(d.fontData=Ya.parse(n,t),d.fontData.path=c,new te),u=[],i=0,s=d.fontData.pages;i<s.length;){var r=s[i],l=(++i,r.file),a=(""!=c&&(l=An.join([c,l])),ne.decodePath(l)),h=new ln(a.name);h.set_handleTexturesDensityChange(!1),h.set_path(a.path),d.assets.addAsset(h),u.push(h)}d.assets.onceComplete(d,function(e){if(e){if(d.fontData.needsReparsing&&null!=d.fontData.rawFontData&&0<u.length){e=u[0].get_texture();if(null!=e){var e=Math.round(e.width),n=An.withoutExtension(An.withoutDirectory(_))+".png";try{d.fontData=Ya.parse(d.fontData.rawFontData,n,e),d.fontData.path=c}catch(t){jt.lastError=t;n=Y.caught(t).unwrap();ae.app.logger.error("Failed to re-parse Construct 3 font with image width: "+L.string(n),{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:195,className:"ceramic.FontAsset",methodName:"load"})}}}for(var t=0;t<u.length;){var i=u[t],s=(++t,i.path),r=i.get_texture();o.h[s]=r}var l=d.get_font(),e=new Ta(d.fontData,o);if(e.id="font:"+d.path,(e.asset=d).set_font(e),null!=l){d.emitReplaceFont(d.get_font(),l),l==ae.app.defaultFont&&(ae.app.defaultFont=d.get_font());for(var t=0,a=[].concat(ae.app.visuals);t<a.length;){var h=a[t];++t,0<=h._lifecycleState&&h instanceof qn&&(h=h).font==l&&h.set_font(d.get_font())}l.asset=null,l.destroy()}for(t=0;t<b.length;){i=b[t];++t,i instanceof ln&&-1!=u.indexOf(i)||i.destroy()}d.set_status(Se.READY),d.emitComplete(!0),d.handleTexturesDensityChange&&d.checkTexturesDensity()}else d.set_status(Se.BROKEN),ae.app.logger.error("Failed to load textures for font at path: "+d.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:267,className:"ceramic.FontAsset",methodName:"load"}),d.emitComplete(!1)}),d.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:273,className:"ceramic.FontAsset",methodName:"load"})}catch(i){jt.lastError=i,d.set_status(Se.BROKEN),ae.app.logger.error("Failed to decode font data at path: "+d.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:277,className:"ceramic.FontAsset",methodName:"load"}),d.emitComplete(!1)}else d.set_status(Se.BROKEN),ae.app.logger.error("Failed to load font data at path: "+d.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:283,className:"ceramic.FontAsset",methodName:"load"}),d.emitComplete(!1)}),this.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:288,className:"ceramic.FontAsset",methodName:"load"}))},texturesDensityDidChange:function(e,n){this.get_status()==Se.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var e;null!=this.owner&&this.owner.reloadOnTextureDensityChange&&(e=this.path,this.computePath(),e!=this.path)&&(ae.app.logger.info("Reload font ("+e+" -> "+this.path+")",{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:316,className:"ceramic.FontAsset",methodName:"checkTexturesDensity"}),this.load())},assetFilesDidChange:function(e,n){var a=this,t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload font (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:341,className:"ceramic.FontAsset",methodName:"assetFilesDidChange"}),e=this.path.toLowerCase(),null!=(null!=(n=this.owner)?n.runtimeAssets:null)&&z.endsWith(e,".ttf")||z.endsWith(e,".otf")?(this.path,this.owner.runtimeAssets.requestTransformedDir(function(l){Rn.runCeramic(["assets","--filter",a.path,"--from",a.owner.runtimeAssets.path,"--to",l,"--list-changed"],function(e,n,t){if(0==e){a.transformedPath=l;for(var i=JSON.parse(z.trim(n)),s=0;s<i.length;){var r=i[s];++s,ae.app.logger.debug("Updated on the fly: "+r,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:359,className:"ceramic.FontAsset",methodName:"assetFilesDidChange"}),ne.incrementReloadCount(r)}a.load()}})})):this.load())},destroy:function(){if(!(this._lifecycleState<=-2)&&(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),null!=this.get_font()&&(this.get_font().destroy(),this.set_font(null)),null!=this.pages)){for(var e=this.pages.h,n=Object.keys(e),t=n.length,i=0;i<t;){var s=n[i++];this.pages.h[s].destroy()}this.pages=null}},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offReplaceFont(),this.offFontChange()},__class__:nn,__properties__:$extend(Fa.prototype.__properties__,{set_font:"set_font",get_font:"get_font"})}),(x["ceramic.Value"]=C0).__name__="ceramic.Value",C0.prototype={__class__:C0},(x["ceramic.Fragment"]=D0).__name__="ceramic.Fragment",D0.cacheData=function(e){D0.cachedFragmentData.h[e.id]=e},D0.getData=function(e){return D0.cachedFragmentData.h[e]},D0.__super__=o,D0.prototype=$extend(o.prototype,{set_autoUpdateTimeline:function(e){return this.autoUpdateTimeline!=e&&(this.autoUpdateTimeline=e,null!=this.timeline)&&this.timeline.set_autoUpdate(e),e},emitReady:function(){this.willEmitReady();var e=0;if(null!=this.__cbOnReady&&(e+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(e+=this.__cbOnceReady.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReady)for(var s=0,r=this.__cbOnReady.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnReady[l],++i):--e}if(null!=this.__cbOnceReady){for(var a=null,h=null,s=0,r=this.__cbOnceReady.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceReady[l],this.__cbOnceReady[l]=null,c=this.__cbOnceOwnerUnbindReady[l],(this.__cbOnceOwnerUnbindReady[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReady[l]),h.push(this.__cbOnceReady[l]))}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event ready because owner is destroyed!");var s=function(e){null!=t&&(i.offReady(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReady[n])&&r(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReady[n])&&r(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReady[s])&&r()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReady[s])&&r()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},scheduleWhenReady:function(e,n){this.ready?n():this.onceReady(e,n)},willEmitReady:function(){this.ready=!0},set_fragmentData:function(e){var n,t=this,i=(this.pendingLoads++,this.fragmentData=e,Object.create(null));if(null!=e&&(this.set_width(e.width),this.set_height(e.height),null!=e.color?this.color=e.color:this.color=0,null!=e.transparent?(n=e.transparent,this.flags=n?16|this.flags:-17&this.flags):this.flags|=16,null!=e.items))for(var s=0,r=e.items;s<r.length;){var l=r[s];++s,this.putItem(l),i[l.id]=!0}if(null==e||Object.prototype.hasOwnProperty.call(e,"items")){for(var a=null,s=0,r=this.entities;s<r.length;){var h=r[s];++s,Object.prototype.hasOwnProperty.call(i,h.id)||(a=null==a?[]:a).push(h.id)}if(null!=a)for(s=0;s<a.length;){var c=a[s];++s,this.removeItem(c)}}null!=e&&(this.pendingLoads++,ae.app.converters.h["ceramic.ReadOnlyMap<String,ceramic.Component>"].basicToField(this,"components",this.assets,e.components,function(e){t._lifecycleState<0||(t.pendingLoads--,t.onceReady(t,function(){t.set_fragmentComponents(e)}),0==t.pendingLoads&&t.emitReady())})),null!=e&&null!=e.fps&&this.set_fps(e.fps);var o=null;if(null!=e&&null!=e.tracks){for(s=0,r=e.tracks;s<r.length;){var u=r[s];++s,(o=null==o?new te:o).h[u.entity+"#"+u.field]=!0,this.putTrack(null,u)}if(null!=this.timeline&&0<this.timeline.tracks.length)for(s=0,r=[].concat(this.timeline.tracks);s<r.length;){var _,d=r[s];++s,null!=o&&Object.prototype.hasOwnProperty.call(o.h,d.id)||(2==(_=d.id.split("#")).length?this.removeTrack(_[0],_[1]):ae.app.logger.warning("Cannot remove track with unhandled id: "+d.id,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:314,className:"ceramic.Fragment",methodName:"set_fragmentData"}))}}var b=null;if(null!=e&&null!=e.labels){for(var p=e.labels,s=0,r=P.fields(p);s<r.length;){var f=r[s],O=(++s,(b=null==b?new te:b).h[f]=!0,p[f]);this.putLabel(O,f)}if(null!=this.timeline&&null!=this.timeline.labels)for(s=0,r=[].concat(this.timeline.labels);s<r.length;){var g=r[s];++s,null!=b&&Object.prototype.hasOwnProperty.call(b.h,g)||this.timeline.removeLabel(g)}}return this.pendingLoads--,0==this.pendingLoads&&this.emitReady(),e},set_fps:function(e){if(this.fps!=e&&(this.fps=e,null!=this.timeline&&(this.timeline.fps=e),null!=this.tracks))for(var n=0,t=this.tracks;n<t.length;){var i=t[n];++n,this.putTrack(null,i)}return e},putItem:function(e){var n,t=this._get(e.id),i=!1,s=(null!=t?(i=t instanceof m,r=Ti.getClass(t),e.entity!=r.__name__&&(this.removeItem(e.id),t=null)):this.items.push(e),e.entity),r=x[s],l=null!=t?t:null,a="ceramic.Fragment"==e.entity;if(null==l&&(n=[],a&&(n.push(this.assets),n.push(!1)),l=B.createInstance(r,n)),null==l)throw Y.thrown("Failed to create instance of "+e.entity);if(l.id=e.id,a&&l.set_depthRange(1),null!=e.props){for(var h=P.fields(e.props),c=(Jt.sort(h,function(e,n){return 0}),0);c<h.length;){var o=h[c],u=(++c,this.typeOfItemField(e,o)),_=P.field(e.props,o);if(null!=(y=null!=u?ae.app.converters.h[u]:null))this.putItemField(a,e,l,o,_,y);else{if(!Object.prototype.hasOwnProperty.call(D0.basicTypes.h,u)){var d=he[u];if(null!=d){for(var b=0,p=d.__constructs__,f=new Array(p.length),O=0,g=p.length;O<g;){var w=O++;f[w]=p[w]._hx_name}for(var v=f;b<v.length;){s=v[b];if(++b,s.toLowerCase()==_.toLowerCase()){_=B.createEnum(d,s);break}}}}P.setProperty(l,o,_)}}var y,u=this.typeOfItemField(e,"components"),_=e.components;null!=(y=null!=u?ae.app.converters.h[u]:null)?this.putItemField(a,e,l,"components",_,y):ae.app.logger.warning("No converter found for field: components (type: "+u+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:475,className:"ceramic.Fragment",methodName:"putItem"})}return null==t&&("ceramic.Assets"==this.typeOfItemField(e,"assets")&&P.setProperty(l,"assets",this.assets),this.entities.push(l)),l instanceof m&&!i&&this.add(l),null==t&&this.putTracksForItem(e.id),l},typeOfItemField:function(e,n){return null!=e.schema?P.field(e.schema,n):qe.typeOf(e.entity,n)},putItemField:function(n,e,h,t,i,s){var r=this;this.pendingLoads++,s.basicToField(h,t,this.assets,i,function(a){var e;r.pendingLoads--,r._lifecycleState<0||(0<=h._lifecycleState&&(n&&"fragmentData"==t?(e=h,r.pendingLoads++,e.onceReady(r,function(){r.pendingLoads--,r._lifecycleState<0||0==r.pendingLoads&&r.emitReady()}),e.set_fragmentData(a)):"components"!=t?P.setProperty(h,t,a):r.onceReady(r,function(){var e;if(null!=a&&null!=(e=a))for(var n=e.h,t=Object.keys(n),i=t.length,s=0;s<i;){var r=t[s++],l=e.h[r];null!=l&&h.component(r,l)}})),0==r.pendingLoads&&r.emitReady())})},_get:function(e){for(var n=0,t=this.entities;n<t.length;){var i=t[n];if(++n,i.id==e)return i}return null},_getWithType:function(e,n){e=this._get(e);return null!=e?e:null},getItemInstanceByName:function(e){for(var n=0,t=this.entities;n<t.length;){var i=t[n];if(++n,i.id==e)return i}return null},getItem:function(e){for(var n=0,t=this.items;n<t.length;){var i=t[n];if(++n,i.id==e)return i}return null},getItemByName:function(e){for(var n=0,t=this.items;n<t.length;){var i=t[n];if(++n,i.name==e)return i}return null},typeOfItem:function(e){var n=this.getItem(e);return null!=n?n.entity:(ae.app.logger.warning("Failed to resolve entity type for item "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:711,className:"ceramic.Fragment",methodName:"typeOfItem"}),null)},removeItem:function(e){for(var n=0,t=this.entities;n<t.length;){var i=t[n];if(++n,i.id==e){le.remove(this.entities,i),i.destroy();break}}for(n=0,t=this.items;n<t.length;){var s=t[n];if(++n,s.id==e){le.remove(this.items,s);break}}},removeAllItems:function(){for(var e=0,n=[].concat(this.entities);e<n.length;){var t=n[e];++e,le.remove(this.entities,t),t.destroy()}for(e=0,n=[].concat(this.items);e<n.length;){var i=n[e];++e,le.remove(this.items,i)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,o.prototype.destroy.call(this),null!=this.timeline&&(this.timeline.destroy(),this.timeline=null),this.removeAllItems())},set_components:function(e){if(this._components!=e){if(null!=this._components){s=this._components.h;for(var n=(r=Object.keys(s)).length,t=0;t<n;){var i=r[t++];null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)||null!=this.fragmentComponents&&Object.prototype.hasOwnProperty.call(this.fragmentComponents.h,i)||this.removeComponent(i)}}if(null!=e){s=e.h;for(var s,r,n=(r=Object.keys(s)).length,t=0;t<n;){var l,i=r[t++],a=e.h[i];null!=this._components&&null!=(l=this._components.h[i])?l!=a&&(this.removeComponent(i),this.component(i,a)):this.component(i,a)}}this._components=e}return e},set_fragmentComponents:function(e){if(this.fragmentComponents!=e){if(null!=this.fragmentComponents){s=this.fragmentComponents.h;for(var n=(r=Object.keys(s)).length,t=0;t<n;){var i=r[t++];null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)||this.removeComponent(i)}}if(null!=e){s=e.h;for(var s,r,n=(r=Object.keys(s)).length,t=0;t<n;){var l,i=r[t++],a=e.h[i];null!=this.fragmentComponents&&null!=(l=this.fragmentComponents.h[i])?l!=a&&(this.removeComponent(i),this.component(i,a)):this.component(i,a)}}this.fragmentComponents=e}return e},isManagedComponent:function(){},putTrack:function(e,n){var t=null;if(null==(g=this.getTrack(n.entity,n.field)))null==this.tracks&&(this.tracks=[]),this.tracks.push(n);else{for(var t=new ei,i=0,s=g.keyframes;i<s.length;){var r=s[i];++i,t.h[r.index]=!0}var l=this.tracks.indexOf(g);this.tracks[l]=n}var l=n.entity,a=this._get(l);if(null!=n.keyframes&&0<n.keyframes.length){this.createTimelineIfNeeded();var h=n.field,c=l+"#"+h,o=n.options;if(null==(e=null==e?this.typeOfItem(n.entity):e))ae.app.logger.warning("Cannot update timeline track "+c+": failed to resolve entity type",{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:940,className:"ceramic.Fragment",methodName:"putTrack"});else{var l=qe.types(e),u=null!=l?l.h[h]:null;if(null==u)ae.app.logger.warning("Cannot update timeline track "+c+": failed to resolve info for "+h+" of entity type "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:947,className:"ceramic.Fragment",methodName:"putTrack"});else{var _=this.timeline.get(c);if(null==_){if(null==a)return void ae.app.logger.warning("Failed to create timeline track "+c+" because there is no entity with id "+n.entity,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:955,className:"ceramic.Fragment",methodName:"putTrack"});if(D0._trackResult.value=null,ae.app.timelines.emitCreateTrack(u,o,D0._trackResult),null==(_=D0._trackResult.value))return void ae.app.logger.warning("Failed to create timeline track "+c+" for "+h+" of entity type "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:963,className:"ceramic.Fragment",methodName:"putTrack"});a.onDestroy(_,function(e){_.destroy()}),_.id=c,ae.app.timelines.emitBindTrack(u,o,_,a,h),this.timeline.add(_)}if(_.loop=n.loop,0<D0._usedKeyframes.length){for(i=0,s=D0._usedKeyframes.length;i<s;){var d=i++;D0._usedKeyframes[d]=null}if(0!=(U=D0._usedKeyframes).length)if(0<U.length)U.splice(0,U.length);else for(var b=U;b.length<0;)b.push(null)}for(var p=-1,f=!0,i=0,s=n.keyframes;i<s.length;){var r=s[i],O=(++i,r.index),g=(O<p&&(f=!1),_.findKeyframeAtIndex(p=O));if(D0._keyframeResult.value=null,ae.app.timelines.emitCreateKeyframe(u,o,r.value,O,t0.easingFromString(r.easing),g,D0._keyframeResult),null==(y=D0._keyframeResult.value))return void ae.app.logger.warning("Failed to create or update keyframe #"+L.string($bind(this,this.frame))+" of track "+c+" for field "+h+" of entity type "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1020,className:"ceramic.Fragment",methodName:"putTrack"});D0._usedKeyframes.push(y),null!=g?g!=y&&(_.remove(g),_.add(y)):_.add(y)}var m=null,w=_.keyframes;if(f)for(var v=0,i=0,s=w.length;i<s;){var y=w[d=i++];D0._usedKeyframes[v]==y?++v:(m=null==m?[]:m).push(y)}else{ae.app.logger.warning("Input keyframe array should be sorted by time in ascending order!",{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1050,className:"ceramic.Fragment",methodName:"putTrack"});for(i=0,s=w.length;i<s;){y=w[d=i++];-1==D0._usedKeyframes.indexOf(y)&&(m=null==m?[]:m).push(y)}}if(null!=m){for(i=0;i<m.length;){y=m[i];++i,_.remove(y)}m=null}if(0<D0._usedKeyframes.length){for(var U,i=0,s=D0._usedKeyframes.length;i<s;){d=i++;D0._usedKeyframes[d]=null}if(0!=(U=D0._usedKeyframes).length)if(0<U.length)U.splice(0,U.length);else for(b=U;b.length<0;)b.push(null)}_.apply()}}}},putTracksForItem:function(e){if(null!=this.tracks)for(var n=0,t=this.tracks.length;n<t;){var i=n++,i=this.tracks[i];i.entity==e&&this.putTrack(null,i)}},getTrack:function(e,n){if(null!=this.tracks)for(var t=0,i=this.tracks;t<i.length;){var s=i[t];if(++t,s.entity==e&&s.field==n)return s}return null},removeTrack:function(e,n){if(null!=this.tracks){for(var t,i=-1,s=0,r=this.tracks.length;s<r;){var l=s++,a=this.tracks[l];if(a.entity==e&&a.field==n){i=l;break}}-1!=i&&(this.tracks.splice(i,1),null!=this.timeline)&&null!=(t=this.timeline.get(e+"#"+n))&&(this.timeline.remove(t),t.destroy())}},createTimelineIfNeeded:function(){null==this.timeline&&(this.timeline=new ct,this.timeline.fps=this.fps,this.timeline.set_autoUpdate(this.autoUpdateTimeline))},putLabel:function(e,n){this.createTimelineIfNeeded(),this.timeline.setLabel(e,n)},indexOfLabel:function(e){return null!=this.timeline?this.timeline.indexOfLabel(e):-1},labelAtIndex:function(e){return null!=this.timeline?this.timeline.labelAtIndex(e):null},removeLabel:function(e){null!=this.timeline&&this.timeline.removeLabel(e)},removeLabelAtIndex:function(e){null!=this.timeline&&this.timeline.removeLabelAtIndex(e)},get_paused:function(){return null!=this.timeline&&this.timeline.paused},set_paused:function(e){return(null!=this.timeline&&this.timeline.paused)!=e&&(this.createTimelineIfNeeded(),this.timeline.set_paused(e)),e},unbindEvents:function(){o.prototype.unbindEvents.call(this),this.offReady()},__class__:D0,__properties__:$extend(o.prototype.__properties__,{set_paused:"set_paused",get_paused:"get_paused",set_fragmentComponents:"set_fragmentComponents",set_autoUpdateTimeline:"set_autoUpdateTimeline",set_fragmentData:"set_fragmentData",set_fps:"set_fps"})}),function(e,n,t){this.unobservedFragments=null,this.fragmentsAutoruns=null,Fa.call(this,"fragments",e,n,t)}),sn=((x["ceramic.FragmentsAsset"]=tn).__name__="ceramic.FragmentsAsset",tn.fromRawFragments=function(e){var n={},t=0|e.version;if(1==t){var i=e.fragments;if(null!=i)for(var s=0;s<i.length;){var r=i[s],l=(++s,r.data),a=r.components,l={id:r.id,data:null!=l?l:{},width:r.width,height:r.height,components:null!=a?a:{}},h=(Object.prototype.hasOwnProperty.call(r,"color")&&(l.color=A.fromString(r.color)),Object.prototype.hasOwnProperty.call(r,"transparent")&&(l.transparent=1==r.transparent),e.schema),c=[];if(Object.prototype.hasOwnProperty.call(r,"visuals"))for(var o=r.visuals,u=0;u<o.length;){for(var _=o[u],d=(++u,_.data),b=_.components,p={id:_.id,data:null!=d?d:{},entity:_.entity,components:null!=b?b:{},props:{}},f=0,O=P.fields(_);f<O.length;){var g=O[f];switch(++f,g){case"components":case"data":case"id":case"kind":case"locked":break;case"entity":var m=P.field(_,g);null!=h&&null!=m&&Object.prototype.hasOwnProperty.call(h,m)&&(p.schema=P.field(h,m));break;default:p.props[g]=P.field(_,g)}}c.push(p)}if(Object.prototype.hasOwnProperty.call(r,"entities"))for(var w=r.entities,v=0;v<w.length;){for(var y=w[v],U=(++v,y.data),x=y.components,C={id:y.id,data:null!=U?U:{},entity:y.entity,components:null!=x?x:{},props:{}},D=0,T=P.fields(y);D<T.length;){var S=T[D];switch(++D,S){case"components":case"data":case"id":case"kind":case"locked":break;case"entity":var E=P.field(y,S);null!=h&&null!=E&&Object.prototype.hasOwnProperty.call(h,E)&&(C.schema=P.field(h,E));break;default:C.props[S]=P.field(y,S)}}c.push(C)}l.items=c,n[l.id]=l}}else ae.app.logger.warning("Unsupported fragments file version: "+t,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:267,className:"ceramic.FragmentsAsset",methodName:"fromRawFragments"});return n},tn.__super__=Fa,tn.prototype=$extend(Fa.prototype,{get_fragments:function(){var e,n,t=this.unobservedFragments;return null!=se.current&&(e=se.current,null!=(n=this.fragmentsAutoruns)||(n=se.getAutorunArray(),null!=(this.fragmentsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_fragments:function(e){var n=this.unobservedFragments;return n!=(this.unobservedFragments=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFragmentsChange(e,n),null!=(n=this.fragmentsAutoruns))&&(this.fragmentsAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateFragments:function(){var e=this.unobservedFragments,e=(this.emitFragmentsChange(e,e),this.fragmentsAutoruns);null!=e&&(this.fragmentsAutoruns=null,se.invalidateAutorunArray(e))},emitFragmentsChange:function(e,n){var t=0;if(null!=this.__cbOnFragmentsChange&&(t+=this.__cbOnFragmentsChange.length),null!=this.__cbOnceFragmentsChange&&(t+=this.__cbOnceFragmentsChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnFragmentsChange)for(var l=0,a=this.__cbOnFragmentsChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnFragmentsChange[h],++r):--t}if(null!=this.__cbOnceFragmentsChange){for(var c=null,o=null,l=0,a=this.__cbOnceFragmentsChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceFragmentsChange[h],this.__cbOnceFragmentsChange[h]=null,u=this.__cbOnceOwnerUnbindFragmentsChange[h],(this.__cbOnceOwnerUnbindFragmentsChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindFragmentsChange[h]),o.push(this.__cbOnceFragmentsChange[h]))}this.__cbOnceOwnerUnbindFragmentsChange=c,this.__cbOnceFragmentsChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onFragmentsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event fragmentsChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFragmentsChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFragmentsChange&&(this.__cbOnOwnerUnbindFragmentsChange=[]),this.__cbOnOwnerUnbindFragmentsChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFragmentsChange&&(this.__cbOnOwnerUnbindFragmentsChange=[]),this.__cbOnOwnerUnbindFragmentsChange.push(null);null==this.__cbOnFragmentsChange&&(this.__cbOnFragmentsChange=[]),this.__cbOnFragmentsChange.push(t)},onceFragmentsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event fragmentsChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFragmentsChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFragmentsChange&&(this.__cbOnceOwnerUnbindFragmentsChange=[]),this.__cbOnceOwnerUnbindFragmentsChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFragmentsChange&&(this.__cbOnceOwnerUnbindFragmentsChange=[]),this.__cbOnceOwnerUnbindFragmentsChange.push(null);null==this.__cbOnceFragmentsChange&&(this.__cbOnceFragmentsChange=[]),this.__cbOnceFragmentsChange.push(t)},offFragmentsChange:function(e){if(null!=e){var n;null!=this.__cbOnFragmentsChange&&-1!=(n=this.__cbOnFragmentsChange.indexOf(e))&&(this.__cbOnFragmentsChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFragmentsChange[n])&&r(),this.__cbOnOwnerUnbindFragmentsChange.splice(n,1)),null!=this.__cbOnceFragmentsChange&&-1!=(n=this.__cbOnceFragmentsChange.indexOf(e))&&(this.__cbOnceFragmentsChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFragmentsChange[n])&&r(),this.__cbOnceOwnerUnbindFragmentsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFragmentsChange){for(var t=0,i=this.__cbOnOwnerUnbindFragmentsChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFragmentsChange[s])&&r()}this.__cbOnOwnerUnbindFragmentsChange=null}if(null!=this.__cbOnceOwnerUnbindFragmentsChange){for(t=0,i=this.__cbOnceOwnerUnbindFragmentsChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFragmentsChange[s])&&r()}this.__cbOnceOwnerUnbindFragmentsChange=null}this.__cbOnFragmentsChange=null,this.__cbOnceFragmentsChange=null}},listensFragmentsChange:function(){return null!=this.__cbOnFragmentsChange&&0<this.__cbOnFragmentsChange.length||null!=this.__cbOnceFragmentsChange&&0<this.__cbOnceFragmentsChange.length},load:function(){var e,n,t,i=this;this.set_status(Se.LOADING),null==this.path?(ae.app.logger.warning("Cannot load fragments asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:86,className:"ceramic.FragmentsAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1)):(e=this.path,n=ne.realAssetPath(e,this.runtimeAssets),0<(t=ne.getReloadCount(n))&&(n+="?hot="+t,e+="?hot="+t),t={},null!=this.owner&&(t.immediate=this.owner.immediate,t.loadMethod=this.owner.loadMethod),ae.app.logger.info("Load fragments "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:107,className:"ceramic.FragmentsAsset",methodName:"load"}),ae.app.backend.texts.load(n,t,function(e){if(null!=e){try{var n=JSON.parse(e);Object.prototype.hasOwnProperty.call(n,"version")?i.set_fragments(tn.fromRawFragments(n)):i.set_fragments(n)}catch(e){return jt.lastError=e,i.set_status(Se.BROKEN),ae.app.logger.error("Failed to parse fragments at path: "+i.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:121,className:"ceramic.FragmentsAsset",methodName:"load"}),void i.emitComplete(!1)}i.set_status(Se.READY),i.emitComplete(!0)}else i.set_status(Se.BROKEN),ae.app.logger.error("Failed to load fragments at path: "+i.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:130,className:"ceramic.FragmentsAsset",methodName:"load"}),i.emitComplete(!1)}))},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload fragments (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:295,className:"ceramic.FragmentsAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),this.set_fragments(null))},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offFragmentsChange()},__class__:tn,__properties__:$extend(Fa.prototype.__properties__,{set_fragments:"set_fragments",get_fragments:"get_fragments"})}),(x["ceramic.GeometryUtils"]=H0).__name__="ceramic.GeometryUtils",H0.pointInTriangle=function(e,n,t,i,s,r,l,a){var h=(e-s)*(i-r)-(t-s)*(n-r),r=(e-l)*(r-a)-(s-l)*(n-a),s=(e-t)*(a-i)-(l-t)*(n-i);return!((h<0||r<0||s<0)&&(0<h||0<r||0<s))},H0.pointInRectangle=function(e,n,t,i,s,r){return!(e<t||n<i||t+s<=e||i+r<=n)},H0.pointInCircle=function(e,n,t,i,s){return(e-t)*(e-t)+(n-i)*(n-i)<=s*s},H0.intersectCircles=function(e,n,t,i,s,r){i-=e,e=s-n,s=t+r;return i*i+e*e<=s*s},H0.distance=function(e,n,t,i){t-=e,e=i-n;return Math.sqrt(t*t+e*e)},H0.squareDistance=function(e,n,t,i){t-=e,e=i-n;return t*t+e*e},H0.angleTo=function(e,n,t,i){i=57.29577951308232*Math.atan2(i-n,t-e)+90;return i<0?i+=360:360<=i&&(i-=360),i},H0.angleDelta=function(e,n){for(var t=e;t<0;)t+=360;for(;360<=t;)t-=360;e=t;for(t=n;t<0;)t+=360;for(;360<=t;)t-=360;var i=(n=t)-e;return 180<i?n-=360:i<-180&&(n+=360),n-e},H0.clampDegrees=function(e){for(;e<0;)e+=360;for(;360<=e;)e-=360;return e},H0.angleDirection=function(e,n){e=.017453292519943295*(e-90);return n.x=Math.cos(e),n.y=Math.sin(e),n},H0.isClockwise=function(e,n,t){if(t<=2)return!1;for(var i=0,s=n+t-2,r=e[s],l=e[1+s],a=n;a<=s;){var h=e[a],c=e[a+1];i+=r*c-h*l,r=h,l=c,a+=2}return i<0},(x["ceramic.GlyphQuad"]=I0).__name__="ceramic.GlyphQuad",I0.__super__=n,I0.prototype=$extend(n.prototype,{emitClear:function(e){var n=0;if(null!=this.__cbOnClear&&(n+=this.__cbOnClear.length),null!=this.__cbOnceClear&&(n+=this.__cbOnceClear.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnClear)for(var r=0,l=this.__cbOnClear.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnClear[a],++s):--n}if(null!=this.__cbOnceClear){for(var h=null,c=null,r=0,l=this.__cbOnceClear.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceClear[a],this.__cbOnceClear[a]=null,o=this.__cbOnceOwnerUnbindClear[a],(this.__cbOnceOwnerUnbindClear[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindClear[a]),c.push(this.__cbOnceClear[a]))}this.__cbOnceOwnerUnbindClear=h,this.__cbOnceClear=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onClear:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event clear because owner is destroyed!");var s=function(e){null!=t&&(i.offClear(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindClear&&(this.__cbOnOwnerUnbindClear=[]),this.__cbOnOwnerUnbindClear.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindClear&&(this.__cbOnOwnerUnbindClear=[]),this.__cbOnOwnerUnbindClear.push(null);null==this.__cbOnClear&&(this.__cbOnClear=[]),this.__cbOnClear.push(t)},onceClear:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event clear because owner is destroyed!");var s=function(e){null!=t&&(i.offClear(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindClear&&(this.__cbOnceOwnerUnbindClear=[]),this.__cbOnceOwnerUnbindClear.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindClear&&(this.__cbOnceOwnerUnbindClear=[]),this.__cbOnceOwnerUnbindClear.push(null);null==this.__cbOnceClear&&(this.__cbOnceClear=[]),this.__cbOnceClear.push(t)},offClear:function(e){if(null!=e){var n;null!=this.__cbOnClear&&-1!=(n=this.__cbOnClear.indexOf(e))&&(this.__cbOnClear.splice(n,1),null!=(r=this.__cbOnOwnerUnbindClear[n])&&r(),this.__cbOnOwnerUnbindClear.splice(n,1)),null!=this.__cbOnceClear&&-1!=(n=this.__cbOnceClear.indexOf(e))&&(this.__cbOnceClear.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindClear[n])&&r(),this.__cbOnceOwnerUnbindClear.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindClear){for(var t=0,i=this.__cbOnOwnerUnbindClear.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindClear[s])&&r()}this.__cbOnOwnerUnbindClear=null}if(null!=this.__cbOnceOwnerUnbindClear){for(t=0,i=this.__cbOnceOwnerUnbindClear.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindClear[s])&&r()}this.__cbOnceOwnerUnbindClear=null}this.__cbOnClear=null,this.__cbOnceClear=null}},listensClear:function(){return null!=this.__cbOnClear&&0<this.__cbOnClear.length||null!=this.__cbOnceClear&&0<this.__cbOnceClear.length},toString:function(){return"GlyphQuad(c="+this.char+",i="+this.index+",l="+this.line+",x="+this.glyphX+",y="+this.glyphY+")"},clear:function(){this.emitClear(this),n.prototype.clear.call(this)},unbindEvents:function(){n.prototype.unbindEvents.call(this),this.offClear()},__class__:I0}),function(e){this.items=[],h.call(this),null!=e&&(this.id=e),ae.app.groups.push(this)}),rn=((x["ceramic.Group"]=sn).__name__="ceramic.Group",sn.__super__=h,sn.prototype=$extend(h.prototype,{add:function(e){var n=this.items;-1!=n.indexOf(e)?ae.app.logger.warning("Cannot add item "+L.string(e)+" to group, already inside group",{fileName:"../../../../ceramic/runtime/src/ceramic/Group.hx",lineNumber:126,className:"ceramic.Group",methodName:"add"}):(n.push(e),e.onDestroy(this,$bind(this,this.itemDestroyed)))},remove:function(e){var n=this.items,t=n.indexOf(e);-1!=t?(n.splice(t,1),e.offDestroy($bind(this,this.itemDestroyed))):ae.app.logger.warning("Cannot remove item "+L.string(e)+" from group, index is -1",{fileName:"../../../../ceramic/runtime/src/ceramic/Group.hx",lineNumber:154,className:"ceramic.Group",methodName:"remove"})},contains:function(e){return-1!=this.items.indexOf(e)},itemDestroyed:function(e){this.remove(e)},clear:function(){var e=this.items;if(0<e.length){for(var n=e.length,t=w.pool(n),i=t.get(),s=0,r=n;s<r;){var l=s++;i.vector[l]=e[l]}for(s=0,r=n;s<r;){var l=s++,a=i.vector[l];a.offDestroy($bind(this,this.itemDestroyed)),a.destroy()}if(0!=e.length)if(0<e.length)e.splice(0,e.length);else for(var h=e;h.length<0;)h.push(null);t.release(i)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),le.remove(ae.app.groups,this),this.clear())},__class__:sn}),function(){}),ln=((x["ceramic.HashedString"]=rn).__name__="ceramic.HashedString",rn.encode=function(e){return Zt.encode(e)+""+e.length+";"+e},rn.append=function(e,n){return e+rn.encode(n)},rn.decode=function(e){rn._lastDecodeIncomplete=!1;for(var n=0,t=e.length,i=null;n<t;){for(var s=e.substring(n,n+32),r=n+=32;r<t&&59!=le.cca(e,r);)++r;var l=L.parseInt(e.substring(n,r));if(null==l||l<=0){ae.app.logger.warning("Failed to parse all encoded string: invalid section length",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:148,className:"ceramic.HashedString",methodName:"decode"}),rn._lastDecodeIncomplete=!0;break}var n=r+1,a=e.substring(n,n+l);if(null==a){ae.app.logger.warning("Failed to parse all encoded string: null section",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:157,className:"ceramic.HashedString",methodName:"decode"}),rn._lastDecodeIncomplete=!0;break}if(Zt.encode(a)!=s){ae.app.logger.warning("Failed to parse all encoded string: section hash mismatch",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:163,className:"ceramic.HashedString",methodName:"decode"}),rn._lastDecodeIncomplete=!0;break}n+=l,(i=null==i?new y:i).b+=null==a?"null":""+a}return null!=i?i.b:(ae.app.logger.error("Invalid encoded string",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:181,className:"ceramic.HashedString",methodName:"decode"}),rn._lastDecodeIncomplete=!0,null)},rn.isLastDecodeIncomplete=function(){return rn._lastDecodeIncomplete},function(e,n,t){this.reloadBecauseOfDensityChange=!1,this.defaultImageOptions=null,this.unobservedTexture=null,this.textureAutoruns=null,Fa.call(this,"image",e,n,t),this.set_handleTexturesDensityChange(!0)}),an=((x["ceramic.ImageAsset"]=ln).__name__="ceramic.ImageAsset",ln.__super__=Fa,ln.prototype=$extend(Fa.prototype,{emitReplaceTexture:function(e,n){var t=0;if(null!=this.__cbOnReplaceTexture&&(t+=this.__cbOnReplaceTexture.length),null!=this.__cbOnceReplaceTexture&&(t+=this.__cbOnceReplaceTexture.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnReplaceTexture)for(var l=0,a=this.__cbOnReplaceTexture.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnReplaceTexture[h],++r):--t}if(null!=this.__cbOnceReplaceTexture){for(var c=null,o=null,l=0,a=this.__cbOnceReplaceTexture.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceReplaceTexture[h],this.__cbOnceReplaceTexture[h]=null,u=this.__cbOnceOwnerUnbindReplaceTexture[h],(this.__cbOnceOwnerUnbindReplaceTexture[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindReplaceTexture[h]),o.push(this.__cbOnceReplaceTexture[h]))}this.__cbOnceOwnerUnbindReplaceTexture=c,this.__cbOnceReplaceTexture=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onReplaceTexture:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceTexture because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceTexture(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReplaceTexture&&(this.__cbOnOwnerUnbindReplaceTexture=[]),this.__cbOnOwnerUnbindReplaceTexture.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReplaceTexture&&(this.__cbOnOwnerUnbindReplaceTexture=[]),this.__cbOnOwnerUnbindReplaceTexture.push(null);null==this.__cbOnReplaceTexture&&(this.__cbOnReplaceTexture=[]),this.__cbOnReplaceTexture.push(t)},onceReplaceTexture:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceTexture because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceTexture(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReplaceTexture&&(this.__cbOnceOwnerUnbindReplaceTexture=[]),this.__cbOnceOwnerUnbindReplaceTexture.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReplaceTexture&&(this.__cbOnceOwnerUnbindReplaceTexture=[]),this.__cbOnceOwnerUnbindReplaceTexture.push(null);null==this.__cbOnceReplaceTexture&&(this.__cbOnceReplaceTexture=[]),this.__cbOnceReplaceTexture.push(t)},offReplaceTexture:function(e){if(null!=e){var n;null!=this.__cbOnReplaceTexture&&-1!=(n=this.__cbOnReplaceTexture.indexOf(e))&&(this.__cbOnReplaceTexture.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReplaceTexture[n])&&r(),this.__cbOnOwnerUnbindReplaceTexture.splice(n,1)),null!=this.__cbOnceReplaceTexture&&-1!=(n=this.__cbOnceReplaceTexture.indexOf(e))&&(this.__cbOnceReplaceTexture.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReplaceTexture[n])&&r(),this.__cbOnceOwnerUnbindReplaceTexture.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceTexture){for(var t=0,i=this.__cbOnOwnerUnbindReplaceTexture.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReplaceTexture[s])&&r()}this.__cbOnOwnerUnbindReplaceTexture=null}if(null!=this.__cbOnceOwnerUnbindReplaceTexture){for(t=0,i=this.__cbOnceOwnerUnbindReplaceTexture.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReplaceTexture[s])&&r()}this.__cbOnceOwnerUnbindReplaceTexture=null}this.__cbOnReplaceTexture=null,this.__cbOnceReplaceTexture=null}},listensReplaceTexture:function(){return null!=this.__cbOnReplaceTexture&&0<this.__cbOnReplaceTexture.length||null!=this.__cbOnceReplaceTexture&&0<this.__cbOnceReplaceTexture.length},get_texture:function(){var e,n,t=this.unobservedTexture;return null!=se.current&&(e=se.current,null!=(n=this.textureAutoruns)||(n=se.getAutorunArray(),null!=(this.textureAutoruns=n)))&&e.bindToAutorunArray(n),t},set_texture:function(e){var n=this.unobservedTexture;return n!=(this.unobservedTexture=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextureChange(e,n),null!=(n=this.textureAutoruns))&&(this.textureAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTexture:function(){var e=this.unobservedTexture,e=(this.emitTextureChange(e,e),this.textureAutoruns);null!=e&&(this.textureAutoruns=null,se.invalidateAutorunArray(e))},emitTextureChange:function(e,n){var t=0;if(null!=this.__cbOnTextureChange&&(t+=this.__cbOnTextureChange.length),null!=this.__cbOnceTextureChange&&(t+=this.__cbOnceTextureChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTextureChange)for(var l=0,a=this.__cbOnTextureChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTextureChange[h],++r):--t}if(null!=this.__cbOnceTextureChange){for(var c=null,o=null,l=0,a=this.__cbOnceTextureChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTextureChange[h],this.__cbOnceTextureChange[h]=null,u=this.__cbOnceOwnerUnbindTextureChange[h],(this.__cbOnceOwnerUnbindTextureChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTextureChange[h]),o.push(this.__cbOnceTextureChange[h]))}this.__cbOnceOwnerUnbindTextureChange=c,this.__cbOnceTextureChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textureChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextureChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(null);null==this.__cbOnTextureChange&&(this.__cbOnTextureChange=[]),this.__cbOnTextureChange.push(t)},onceTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textureChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextureChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(null);null==this.__cbOnceTextureChange&&(this.__cbOnceTextureChange=[]),this.__cbOnceTextureChange.push(t)},offTextureChange:function(e){if(null!=e){var n;null!=this.__cbOnTextureChange&&-1!=(n=this.__cbOnTextureChange.indexOf(e))&&(this.__cbOnTextureChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTextureChange[n])&&r(),this.__cbOnOwnerUnbindTextureChange.splice(n,1)),null!=this.__cbOnceTextureChange&&-1!=(n=this.__cbOnceTextureChange.indexOf(e))&&(this.__cbOnceTextureChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTextureChange[n])&&r(),this.__cbOnceOwnerUnbindTextureChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindTextureChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTextureChange[s])&&r()}this.__cbOnOwnerUnbindTextureChange=null}if(null!=this.__cbOnceOwnerUnbindTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindTextureChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTextureChange[s])&&r()}this.__cbOnceOwnerUnbindTextureChange=null}this.__cbOnTextureChange=null,this.__cbOnceTextureChange=null}},listensTextureChange:function(){return null!=this.__cbOnTextureChange&&0<this.__cbOnTextureChange.length||null!=this.__cbOnceTextureChange&&0<this.__cbOnceTextureChange.length},load:function(){var _=this,d=(this.set_status(Se.LOADING),this.reloadBecauseOfDensityChange);if(this.reloadBecauseOfDensityChange=!1,null==this.path)ae.app.logger.warning("Cannot load image asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:103,className:"ceramic.ImageAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1);else{var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.defaultImageOptions)for(var n=0,t=P.fields(this.defaultImageOptions);n<t.length;){var i=t[n];++n,e[i]=P.field(this.defaultImageOptions,i)}if(null!=this.options)for(n=0,t=P.fields(this.options);n<t.length;){i=t[n];++n,e[i]=P.field(this.options,i)}this.loadTexture(this.path,e,function(e,n){if(null!=e){var t=_.get_texture();if(e.id="texture:"+n,_.set_texture(e),_.get_texture().asset=_,null!=t){_.get_texture().set_filter(t.filter),_.emitReplaceTexture(_.get_texture(),t);for(var i=0,s=[].concat(ae.app.visuals);i<s.length;){var r,l,a,h,c,o,u=s[i];++i,0<=u._lifecycleState&&(null!=u.asQuad?(r=u.asQuad)._texture==t&&(o=r.frameX,l=r.frameY,a=r.frameWidth,h=r.frameHeight,c=_.get_texture(),r._texture!=c&&r._set_texture(c),!d&&0==o&&0==l&&a==t.width&&h==t.height||(r.frameX=o,r.frameY=l,r.frameWidth!=a&&-1!=(r.frameWidth=a)&&r.set_width(a),r.frameHeight==h)||-1==(r.frameHeight=h)||r.set_height(h)):null!=u.asMesh&&(c=u.asMesh).texture==t&&(o=_.get_texture(),c.texture!=o)&&(null!=c.texture&&(c.texture.offDestroy($bind(c,c.textureDestroyed)),null!=c.texture.asset)&&c.texture.asset.release(),c.texture=o,null!=c.texture)&&(c.texture.onDestroy(c,$bind(c,c.textureDestroyed)),null!=c.texture.asset)&&c.texture.asset.retain())}t.asset=null,t.destroy()}_.set_status(Se.READY),_.emitComplete(!0),_.handleTexturesDensityChange&&_.checkTexturesDensity()}else ae.app.logger.warning("Failed to decode texture",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:201,className:"ceramic.ImageAsset",methodName:"load"}),_.set_status(Se.BROKEN),_.emitComplete(!1)})}},loadTexture:function(n,e,t){var i=this,s=n,r=ne.realAssetPath(s,this.runtimeAssets),l=ne.getReloadCount(r);0<l&&(r+="?hot="+l,s+="?hot="+l),ae.app.logger.info("Load image "+s+" (density="+this.density+")",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:221,className:"ceramic.ImageAsset",methodName:"loadTexture"}),ae.app.backend.textures.load(r,e,function(e){null!=e?(e=new Fn(e,i.density),t(e,s)):(i.set_status(Se.BROKEN),ae.app.logger.error("Failed to load texture at path: "+n,{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:287,className:"ceramic.ImageAsset",methodName:"loadTexture"}),i.emitComplete(!1))})},texturesDensityDidChange:function(e,n){this.get_status()==Se.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var e;null!=this.owner&&this.owner.reloadOnTextureDensityChange&&(e=this.path,this.computePath(),e!=this.path)&&(ae.app.logger.info("Reload texture ("+e+" -> "+this.path+")",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:323,className:"ceramic.ImageAsset",methodName:"checkTexturesDensity"}),this.reloadBecauseOfDensityChange=!0,this.load())},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload texture (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:349,className:"ceramic.ImageAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),null!=this.get_texture()&&(this.get_texture().destroy(),this.set_texture(null)))},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offReplaceTexture(),this.offTextureChange()},__class__:ln,__properties__:$extend(Fa.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),function(){this.immediateCallbacksLen=0,this.immediateCallbacksCapacity=0,this.immediateCallbacks=[]}),hn=((x["ceramic.Immediate"]=an).__name__="ceramic.Immediate",an.prototype={push:function(e){if(null==e)throw Y.thrown("Immediate callback should not be null!");this.immediateCallbacksLen<this.immediateCallbacksCapacity?(this.immediateCallbacks[this.immediateCallbacksLen]=e,this.immediateCallbacksLen++):(this.immediateCallbacks[this.immediateCallbacksLen++]=e,this.immediateCallbacksCapacity++)},flush:function(){for(var e=!1;0<this.immediateCallbacksLen;){for(var e=!0,n=w.pool(this.immediateCallbacksLen),t=n.get(),i=this.immediateCallbacksLen,s=this.immediateCallbacksLen=0,r=i;s<r;){var l=s++;t.vector[l]=this.immediateCallbacks[l],this.immediateCallbacks[l]=null}for(var a=0,h=i;a<h;){var c=a++;(0,t.vector[c])()}n.release(t)}return e},__class__:an},function(e){this.settings=e}),cn=((x["ceramic.InitSettings"]=hn).__name__="ceramic.InitSettings",hn.prototype={get_targetWidth:function(){return this.settings.get_targetWidth()},set_targetWidth:function(e){return this.settings.set_targetWidth(e)},get_targetHeight:function(){return this.settings.get_targetHeight()},set_targetHeight:function(e){return this.settings.set_targetHeight(e)},targetSize:function(e,n){this.settings.set_targetWidth(e),this.settings.set_targetHeight(n)},get_windowWidth:function(){return this.settings.get_windowWidth()},set_windowWidth:function(e){return this.settings.set_windowWidth(e)},get_windowHeight:function(){return this.settings.get_windowHeight()},set_windowHeight:function(e){return this.settings.set_windowHeight(e)},windowSize:function(e,n){this.settings.set_windowWidth(e),this.settings.set_windowHeight(n)},get_targetDensity:function(){return this.settings.get_targetDensity()},set_targetDensity:function(e){return this.settings.set_targetDensity(e)},get_background:function(){return this.settings.get_background()},set_background:function(e){return this.settings.set_background(e)},get_scaling:function(){return this.settings.get_scaling()},set_scaling:function(e){return this.settings.set_scaling(e)},get_title:function(){return this.settings.get_title()},set_title:function(e){return this.settings.set_title(e)},get_fullscreen:function(){return this.settings.get_fullscreen()},set_fullscreen:function(e){return this.settings.set_fullscreen(e)},get_targetFps:function(){return this.settings.get_targetFps()},set_targetFps:function(e){return this.settings.set_targetFps(e)},get_maxDelta:function(){return this.settings.get_maxDelta()},set_maxDelta:function(e){return this.settings.set_maxDelta(e)},get_overrideDelta:function(){return this.settings.get_overrideDelta()},set_overrideDelta:function(e){return this.settings.set_overrideDelta(e)},get_preventDefaultMouseWheel:function(){return this.settings.get_preventDefaultMouseWheel()},set_preventDefaultMouseWheel:function(e){return this.settings.set_preventDefaultMouseWheel(e)},get_preventDefaultTouches:function(){return this.settings.get_preventDefaultTouches()},set_preventDefaultTouches:function(e){return this.settings.set_preventDefaultTouches(e)},get_orientation:function(){return this.settings.orientation},set_orientation:function(e){return this.settings.orientation=e},get_antialiasing:function(){return this.settings.antialiasing},set_antialiasing:function(e){return this.settings.antialiasing=e},get_collections:function(){return this.settings.collections},set_collections:function(e){return this.settings.collections=e},get_appInfo:function(){return this.settings.appInfo},set_appInfo:function(e){return this.settings.appInfo=e},get_resizable:function(){return this.settings.resizable},set_resizable:function(e){return this.settings.resizable=e},get_assetsPath:function(){return this.settings.assetsPath},set_assetsPath:function(e){return this.settings.assetsPath=e},get_backend:function(){return this.settings.backend},set_backend:function(e){return this.settings.backend=e},get_defaultFont:function(){return this.settings.defaultFont},set_defaultFont:function(e){return this.settings.defaultFont=e},get_defaultShader:function(){return this.settings.defaultShader},set_defaultShader:function(e){return this.settings.defaultShader=e},__class__:hn,__properties__:{set_defaultShader:"set_defaultShader",get_defaultShader:"get_defaultShader",set_defaultFont:"set_defaultFont",get_defaultFont:"get_defaultFont",set_backend:"set_backend",get_backend:"get_backend",set_assetsPath:"set_assetsPath",get_assetsPath:"get_assetsPath",set_resizable:"set_resizable",get_resizable:"get_resizable",set_appInfo:"set_appInfo",get_appInfo:"get_appInfo",set_collections:"set_collections",get_collections:"get_collections",set_antialiasing:"set_antialiasing",get_antialiasing:"get_antialiasing",set_orientation:"set_orientation",get_orientation:"get_orientation",set_preventDefaultTouches:"set_preventDefaultTouches",get_preventDefaultTouches:"get_preventDefaultTouches",set_preventDefaultMouseWheel:"set_preventDefaultMouseWheel",get_preventDefaultMouseWheel:"get_preventDefaultMouseWheel",set_overrideDelta:"set_overrideDelta",get_overrideDelta:"get_overrideDelta",set_maxDelta:"set_maxDelta",get_maxDelta:"get_maxDelta",set_targetFps:"set_targetFps",get_targetFps:"get_targetFps",set_fullscreen:"set_fullscreen",get_fullscreen:"get_fullscreen",set_title:"set_title",get_title:"get_title",set_scaling:"set_scaling",get_scaling:"get_scaling",set_background:"set_background",get_background:"get_background",set_targetDensity:"set_targetDensity",get_targetDensity:"get_targetDensity",set_windowHeight:"set_windowHeight",get_windowHeight:"get_windowHeight",set_windowWidth:"set_windowWidth",get_windowWidth:"get_windowWidth",set_targetHeight:"set_targetHeight",get_targetHeight:"get_targetHeight",set_targetWidth:"set_targetWidth",get_targetWidth:"get_targetWidth"}},function(){this.activeGamepads=[],this.gamepadNames=new vn,this.gamepadGyroKeys=[],this.gamepadGyroDeltas=new vn,this.gamepadAxisValues=new bn(16,.5,!1),this.pressedGamepadButtons=new ke(16,.5,!1),this.pressedKeyCodes=new ke(16,.5,!1),this.pressedScanCodes=new ke(16,.5,!1),h.call(this)}),on=((x["ceramic.Input"]=cn).__name__="ceramic.Input",cn.__super__=h,cn.prototype=$extend(h.prototype,{emitKeyDown:function(e){this.willEmitKeyDown(e);var n=0;if(null!=this.__cbOnKeyDown&&(n+=this.__cbOnKeyDown.length),null!=this.__cbOnceKeyDown&&(n+=this.__cbOnceKeyDown.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnKeyDown)for(var r=0,l=this.__cbOnKeyDown.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnKeyDown[a],++s):--n}if(null!=this.__cbOnceKeyDown){for(var h=null,c=null,r=0,l=this.__cbOnceKeyDown.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceKeyDown[a],this.__cbOnceKeyDown[a]=null,o=this.__cbOnceOwnerUnbindKeyDown[a],(this.__cbOnceOwnerUnbindKeyDown[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindKeyDown[a]),c.push(this.__cbOnceKeyDown[a]))}this.__cbOnceOwnerUnbindKeyDown=h,this.__cbOnceKeyDown=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyDown because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(null);null==this.__cbOnKeyDown&&(this.__cbOnKeyDown=[]),this.__cbOnKeyDown.push(t)},onceKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyDown because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(null);null==this.__cbOnceKeyDown&&(this.__cbOnceKeyDown=[]),this.__cbOnceKeyDown.push(t)},offKeyDown:function(e){if(null!=e){var n;null!=this.__cbOnKeyDown&&-1!=(n=this.__cbOnKeyDown.indexOf(e))&&(this.__cbOnKeyDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindKeyDown[n])&&r(),this.__cbOnOwnerUnbindKeyDown.splice(n,1)),null!=this.__cbOnceKeyDown&&-1!=(n=this.__cbOnceKeyDown.indexOf(e))&&(this.__cbOnceKeyDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindKeyDown[n])&&r(),this.__cbOnceOwnerUnbindKeyDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyDown){for(var t=0,i=this.__cbOnOwnerUnbindKeyDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindKeyDown[s])&&r()}this.__cbOnOwnerUnbindKeyDown=null}if(null!=this.__cbOnceOwnerUnbindKeyDown){for(t=0,i=this.__cbOnceOwnerUnbindKeyDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindKeyDown[s])&&r()}this.__cbOnceOwnerUnbindKeyDown=null}this.__cbOnKeyDown=null,this.__cbOnceKeyDown=null}},listensKeyDown:function(){return null!=this.__cbOnKeyDown&&0<this.__cbOnKeyDown.length||null!=this.__cbOnceKeyDown&&0<this.__cbOnceKeyDown.length},emitKeyUp:function(e){this.willEmitKeyUp(e);var n=0;if(null!=this.__cbOnKeyUp&&(n+=this.__cbOnKeyUp.length),null!=this.__cbOnceKeyUp&&(n+=this.__cbOnceKeyUp.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnKeyUp)for(var r=0,l=this.__cbOnKeyUp.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnKeyUp[a],++s):--n}if(null!=this.__cbOnceKeyUp){for(var h=null,c=null,r=0,l=this.__cbOnceKeyUp.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceKeyUp[a],this.__cbOnceKeyUp[a]=null,o=this.__cbOnceOwnerUnbindKeyUp[a],(this.__cbOnceOwnerUnbindKeyUp[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindKeyUp[a]),c.push(this.__cbOnceKeyUp[a]))}this.__cbOnceOwnerUnbindKeyUp=h,this.__cbOnceKeyUp=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyUp because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(null);null==this.__cbOnKeyUp&&(this.__cbOnKeyUp=[]),this.__cbOnKeyUp.push(t)},onceKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event keyUp because owner is destroyed!");var s=function(e){null!=t&&(i.offKeyUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(null);null==this.__cbOnceKeyUp&&(this.__cbOnceKeyUp=[]),this.__cbOnceKeyUp.push(t)},offKeyUp:function(e){if(null!=e){var n;null!=this.__cbOnKeyUp&&-1!=(n=this.__cbOnKeyUp.indexOf(e))&&(this.__cbOnKeyUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindKeyUp[n])&&r(),this.__cbOnOwnerUnbindKeyUp.splice(n,1)),null!=this.__cbOnceKeyUp&&-1!=(n=this.__cbOnceKeyUp.indexOf(e))&&(this.__cbOnceKeyUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindKeyUp[n])&&r(),this.__cbOnceOwnerUnbindKeyUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyUp){for(var t=0,i=this.__cbOnOwnerUnbindKeyUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindKeyUp[s])&&r()}this.__cbOnOwnerUnbindKeyUp=null}if(null!=this.__cbOnceOwnerUnbindKeyUp){for(t=0,i=this.__cbOnceOwnerUnbindKeyUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindKeyUp[s])&&r()}this.__cbOnceOwnerUnbindKeyUp=null}this.__cbOnKeyUp=null,this.__cbOnceKeyUp=null}},listensKeyUp:function(){return null!=this.__cbOnKeyUp&&0<this.__cbOnKeyUp.length||null!=this.__cbOnceKeyUp&&0<this.__cbOnceKeyUp.length},emitGamepadAxis:function(e,n,t){this.gamepadAxisValues.set(32*e+n,t);var i=0;if(null!=this.__cbOnGamepadAxis&&(i+=this.__cbOnGamepadAxis.length),null!=this.__cbOnceGamepadAxis&&(i+=this.__cbOnceGamepadAxis.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnGamepadAxis)for(var a=0,h=this.__cbOnGamepadAxis.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnGamepadAxis[c],++l):--i}if(null!=this.__cbOnceGamepadAxis){for(var o=null,u=null,a=0,h=this.__cbOnceGamepadAxis.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceGamepadAxis[c],this.__cbOnceGamepadAxis[c]=null,_=this.__cbOnceOwnerUnbindGamepadAxis[c],(this.__cbOnceOwnerUnbindGamepadAxis[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindGamepadAxis[c]),u.push(this.__cbOnceGamepadAxis[c]))}this.__cbOnceOwnerUnbindGamepadAxis=o,this.__cbOnceGamepadAxis=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadAxis(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(null);null==this.__cbOnGamepadAxis&&(this.__cbOnGamepadAxis=[]),this.__cbOnGamepadAxis.push(t)},onceGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadAxis(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(null);null==this.__cbOnceGamepadAxis&&(this.__cbOnceGamepadAxis=[]),this.__cbOnceGamepadAxis.push(t)},offGamepadAxis:function(e){if(null!=e){var n;null!=this.__cbOnGamepadAxis&&-1!=(n=this.__cbOnGamepadAxis.indexOf(e))&&(this.__cbOnGamepadAxis.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadAxis[n])&&r(),this.__cbOnOwnerUnbindGamepadAxis.splice(n,1)),null!=this.__cbOnceGamepadAxis&&-1!=(n=this.__cbOnceGamepadAxis.indexOf(e))&&(this.__cbOnceGamepadAxis.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadAxis[n])&&r(),this.__cbOnceOwnerUnbindGamepadAxis.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadAxis){for(var t=0,i=this.__cbOnOwnerUnbindGamepadAxis.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadAxis[s])&&r()}this.__cbOnOwnerUnbindGamepadAxis=null}if(null!=this.__cbOnceOwnerUnbindGamepadAxis){for(t=0,i=this.__cbOnceOwnerUnbindGamepadAxis.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadAxis[s])&&r()}this.__cbOnceOwnerUnbindGamepadAxis=null}this.__cbOnGamepadAxis=null,this.__cbOnceGamepadAxis=null}},listensGamepadAxis:function(){return null!=this.__cbOnGamepadAxis&&0<this.__cbOnGamepadAxis.length||null!=this.__cbOnceGamepadAxis&&0<this.__cbOnceGamepadAxis.length},emitGamepadDown:function(e,n){this.willEmitGamepadDown(e,n);var t=0;if(null!=this.__cbOnGamepadDown&&(t+=this.__cbOnGamepadDown.length),null!=this.__cbOnceGamepadDown&&(t+=this.__cbOnceGamepadDown.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnGamepadDown)for(var l=0,a=this.__cbOnGamepadDown.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnGamepadDown[h],++r):--t}if(null!=this.__cbOnceGamepadDown){for(var c=null,o=null,l=0,a=this.__cbOnceGamepadDown.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceGamepadDown[h],this.__cbOnceGamepadDown[h]=null,u=this.__cbOnceOwnerUnbindGamepadDown[h],(this.__cbOnceOwnerUnbindGamepadDown[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadDown[h]),o.push(this.__cbOnceGamepadDown[h]))}this.__cbOnceOwnerUnbindGamepadDown=c,this.__cbOnceGamepadDown=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDown because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(null);null==this.__cbOnGamepadDown&&(this.__cbOnGamepadDown=[]),this.__cbOnGamepadDown.push(t)},onceGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDown because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(null);null==this.__cbOnceGamepadDown&&(this.__cbOnceGamepadDown=[]),this.__cbOnceGamepadDown.push(t)},offGamepadDown:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDown&&-1!=(n=this.__cbOnGamepadDown.indexOf(e))&&(this.__cbOnGamepadDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadDown[n])&&r(),this.__cbOnOwnerUnbindGamepadDown.splice(n,1)),null!=this.__cbOnceGamepadDown&&-1!=(n=this.__cbOnceGamepadDown.indexOf(e))&&(this.__cbOnceGamepadDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadDown[n])&&r(),this.__cbOnceOwnerUnbindGamepadDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDown){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadDown[s])&&r()}this.__cbOnOwnerUnbindGamepadDown=null}if(null!=this.__cbOnceOwnerUnbindGamepadDown){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadDown[s])&&r()}this.__cbOnceOwnerUnbindGamepadDown=null}this.__cbOnGamepadDown=null,this.__cbOnceGamepadDown=null}},listensGamepadDown:function(){return null!=this.__cbOnGamepadDown&&0<this.__cbOnGamepadDown.length||null!=this.__cbOnceGamepadDown&&0<this.__cbOnceGamepadDown.length},emitGamepadUp:function(e,n){this.willEmitGamepadUp(e,n);var t=0;if(null!=this.__cbOnGamepadUp&&(t+=this.__cbOnGamepadUp.length),null!=this.__cbOnceGamepadUp&&(t+=this.__cbOnceGamepadUp.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnGamepadUp)for(var l=0,a=this.__cbOnGamepadUp.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnGamepadUp[h],++r):--t}if(null!=this.__cbOnceGamepadUp){for(var c=null,o=null,l=0,a=this.__cbOnceGamepadUp.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceGamepadUp[h],this.__cbOnceGamepadUp[h]=null,u=this.__cbOnceOwnerUnbindGamepadUp[h],(this.__cbOnceOwnerUnbindGamepadUp[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadUp[h]),o.push(this.__cbOnceGamepadUp[h]))}this.__cbOnceOwnerUnbindGamepadUp=c,this.__cbOnceGamepadUp=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadUp because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(null);null==this.__cbOnGamepadUp&&(this.__cbOnGamepadUp=[]),this.__cbOnGamepadUp.push(t)},onceGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadUp because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(null);null==this.__cbOnceGamepadUp&&(this.__cbOnceGamepadUp=[]),this.__cbOnceGamepadUp.push(t)},offGamepadUp:function(e){if(null!=e){var n;null!=this.__cbOnGamepadUp&&-1!=(n=this.__cbOnGamepadUp.indexOf(e))&&(this.__cbOnGamepadUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadUp[n])&&r(),this.__cbOnOwnerUnbindGamepadUp.splice(n,1)),null!=this.__cbOnceGamepadUp&&-1!=(n=this.__cbOnceGamepadUp.indexOf(e))&&(this.__cbOnceGamepadUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadUp[n])&&r(),this.__cbOnceOwnerUnbindGamepadUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadUp){for(var t=0,i=this.__cbOnOwnerUnbindGamepadUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadUp[s])&&r()}this.__cbOnOwnerUnbindGamepadUp=null}if(null!=this.__cbOnceOwnerUnbindGamepadUp){for(t=0,i=this.__cbOnceOwnerUnbindGamepadUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadUp[s])&&r()}this.__cbOnceOwnerUnbindGamepadUp=null}this.__cbOnGamepadUp=null,this.__cbOnceGamepadUp=null}},listensGamepadUp:function(){return null!=this.__cbOnGamepadUp&&0<this.__cbOnGamepadUp.length||null!=this.__cbOnceGamepadUp&&0<this.__cbOnceGamepadUp.length},emitGamepadGyro:function(e,n,t,i){this.willEmitGamepadGyro(e,n,t,i);var s=0;if(null!=this.__cbOnGamepadGyro&&(s+=this.__cbOnGamepadGyro.length),null!=this.__cbOnceGamepadGyro&&(s+=this.__cbOnceGamepadGyro.length),0<s){var r=w.pool(s),l=r.get(),a=0;if(null!=this.__cbOnGamepadGyro)for(var h=0,c=this.__cbOnGamepadGyro.length;h<c;){var o=h++;!0?(l.vector[a]=this.__cbOnGamepadGyro[o],++a):--s}if(null!=this.__cbOnceGamepadGyro){for(var u=null,_=null,h=0,c=this.__cbOnceGamepadGyro.length;h<c;){var d,o=h++;!0?(l.vector[a]=this.__cbOnceGamepadGyro[o],this.__cbOnceGamepadGyro[o]=null,d=this.__cbOnceOwnerUnbindGamepadGyro[o],(this.__cbOnceOwnerUnbindGamepadGyro[o]=null)!=d&&d(),++a):(--s,null==u&&(u=[],_=[],0),u.push(this.__cbOnceOwnerUnbindGamepadGyro[o]),_.push(this.__cbOnceGamepadGyro[o]))}this.__cbOnceOwnerUnbindGamepadGyro=u,this.__cbOnceGamepadGyro=_}for(h=0,c=s;h<c;){a=h++;(0,l.vector[a])(e,n,t,i)}r.release(l)}},onGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadGyro(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(null);null==this.__cbOnGamepadGyro&&(this.__cbOnGamepadGyro=[]),this.__cbOnGamepadGyro.push(t)},onceGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadGyro(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(null);null==this.__cbOnceGamepadGyro&&(this.__cbOnceGamepadGyro=[]),this.__cbOnceGamepadGyro.push(t)},offGamepadGyro:function(e){if(null!=e){var n;null!=this.__cbOnGamepadGyro&&-1!=(n=this.__cbOnGamepadGyro.indexOf(e))&&(this.__cbOnGamepadGyro.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadGyro[n])&&r(),this.__cbOnOwnerUnbindGamepadGyro.splice(n,1)),null!=this.__cbOnceGamepadGyro&&-1!=(n=this.__cbOnceGamepadGyro.indexOf(e))&&(this.__cbOnceGamepadGyro.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadGyro[n])&&r(),this.__cbOnceOwnerUnbindGamepadGyro.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadGyro){for(var t=0,i=this.__cbOnOwnerUnbindGamepadGyro.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadGyro[s])&&r()}this.__cbOnOwnerUnbindGamepadGyro=null}if(null!=this.__cbOnceOwnerUnbindGamepadGyro){for(t=0,i=this.__cbOnceOwnerUnbindGamepadGyro.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadGyro[s])&&r()}this.__cbOnceOwnerUnbindGamepadGyro=null}this.__cbOnGamepadGyro=null,this.__cbOnceGamepadGyro=null}},listensGamepadGyro:function(){return null!=this.__cbOnGamepadGyro&&0<this.__cbOnGamepadGyro.length||null!=this.__cbOnceGamepadGyro&&0<this.__cbOnceGamepadGyro.length},emitGamepadEnable:function(e,n){this.willEmitGamepadEnable(e,n);var t=0;if(null!=this.__cbOnGamepadEnable&&(t+=this.__cbOnGamepadEnable.length),null!=this.__cbOnceGamepadEnable&&(t+=this.__cbOnceGamepadEnable.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnGamepadEnable)for(var l=0,a=this.__cbOnGamepadEnable.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnGamepadEnable[h],++r):--t}if(null!=this.__cbOnceGamepadEnable){for(var c=null,o=null,l=0,a=this.__cbOnceGamepadEnable.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceGamepadEnable[h],this.__cbOnceGamepadEnable[h]=null,u=this.__cbOnceOwnerUnbindGamepadEnable[h],(this.__cbOnceOwnerUnbindGamepadEnable[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadEnable[h]),o.push(this.__cbOnceGamepadEnable[h]))}this.__cbOnceOwnerUnbindGamepadEnable=c,this.__cbOnceGamepadEnable=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadEnable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(null);null==this.__cbOnGamepadEnable&&(this.__cbOnGamepadEnable=[]),this.__cbOnGamepadEnable.push(t)},onceGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadEnable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(null);null==this.__cbOnceGamepadEnable&&(this.__cbOnceGamepadEnable=[]),this.__cbOnceGamepadEnable.push(t)},offGamepadEnable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadEnable&&-1!=(n=this.__cbOnGamepadEnable.indexOf(e))&&(this.__cbOnGamepadEnable.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadEnable[n])&&r(),this.__cbOnOwnerUnbindGamepadEnable.splice(n,1)),null!=this.__cbOnceGamepadEnable&&-1!=(n=this.__cbOnceGamepadEnable.indexOf(e))&&(this.__cbOnceGamepadEnable.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadEnable[n])&&r(),this.__cbOnceOwnerUnbindGamepadEnable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadEnable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadEnable.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadEnable[s])&&r()}this.__cbOnOwnerUnbindGamepadEnable=null}if(null!=this.__cbOnceOwnerUnbindGamepadEnable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadEnable.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadEnable[s])&&r()}this.__cbOnceOwnerUnbindGamepadEnable=null}this.__cbOnGamepadEnable=null,this.__cbOnceGamepadEnable=null}},listensGamepadEnable:function(){return null!=this.__cbOnGamepadEnable&&0<this.__cbOnGamepadEnable.length||null!=this.__cbOnceGamepadEnable&&0<this.__cbOnceGamepadEnable.length},emitGamepadDisable:function(e){this.willEmitGamepadDisable(e);var n=0;if(null!=this.__cbOnGamepadDisable&&(n+=this.__cbOnGamepadDisable.length),null!=this.__cbOnceGamepadDisable&&(n+=this.__cbOnceGamepadDisable.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnGamepadDisable)for(var r=0,l=this.__cbOnGamepadDisable.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnGamepadDisable[a],++s):--n}if(null!=this.__cbOnceGamepadDisable){for(var h=null,c=null,r=0,l=this.__cbOnceGamepadDisable.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceGamepadDisable[a],this.__cbOnceGamepadDisable[a]=null,o=this.__cbOnceOwnerUnbindGamepadDisable[a],(this.__cbOnceOwnerUnbindGamepadDisable[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindGamepadDisable[a]),c.push(this.__cbOnceGamepadDisable[a]))}this.__cbOnceOwnerUnbindGamepadDisable=h,this.__cbOnceGamepadDisable=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDisable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(null);null==this.__cbOnGamepadDisable&&(this.__cbOnGamepadDisable=[]),this.__cbOnGamepadDisable.push(t)},onceGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var s=function(e){null!=t&&(i.offGamepadDisable(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(null);null==this.__cbOnceGamepadDisable&&(this.__cbOnceGamepadDisable=[]),this.__cbOnceGamepadDisable.push(t)},offGamepadDisable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDisable&&-1!=(n=this.__cbOnGamepadDisable.indexOf(e))&&(this.__cbOnGamepadDisable.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGamepadDisable[n])&&r(),this.__cbOnOwnerUnbindGamepadDisable.splice(n,1)),null!=this.__cbOnceGamepadDisable&&-1!=(n=this.__cbOnceGamepadDisable.indexOf(e))&&(this.__cbOnceGamepadDisable.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGamepadDisable[n])&&r(),this.__cbOnceOwnerUnbindGamepadDisable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDisable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDisable.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGamepadDisable[s])&&r()}this.__cbOnOwnerUnbindGamepadDisable=null}if(null!=this.__cbOnceOwnerUnbindGamepadDisable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDisable.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGamepadDisable[s])&&r()}this.__cbOnceOwnerUnbindGamepadDisable=null}this.__cbOnGamepadDisable=null,this.__cbOnceGamepadDisable=null}},listensGamepadDisable:function(){return null!=this.__cbOnGamepadDisable&&0<this.__cbOnGamepadDisable.length||null!=this.__cbOnceGamepadDisable&&0<this.__cbOnceGamepadDisable.length},resetDeltas:function(){for(;0<this.gamepadGyroKeys.length;){var e=this.gamepadGyroKeys.pop(),e=this.gamepadGyroDeltas.get(e);null!=e&&(e[0]=0,e[1]=0,e[2]=0)}},willEmitKeyDown:function(n){var t=this,e=this.pressedScanCodes.intMap.h[0|n.scanCode],i=null!=e?e:0,e=null!=(e=this.pressedKeyCodes.intMap.h[0|n.keyCode])?e:0;-1==i&&(e=i=0),this.pressedScanCodes.set(n.scanCode,i+1),this.pressedKeyCodes.set(n.keyCode,e+1),0==i&&ae.app.beginUpdateCallbacks.push(function(){var e=t.pressedScanCodes.intMap.h[0|n.scanCode];1==(null!=e?e:0)&&t.pressedScanCodes.set(n.scanCode,2),1==(null!=(e=t.pressedKeyCodes.intMap.h[0|n.keyCode])?e:0)&&t.pressedKeyCodes.set(n.keyCode,2)})},willEmitKeyUp:function(n){var t=this,e=this.pressedScanCodes.intMap.h[0|n.scanCode];0!=(null!=e?e:0)&&(this.pressedScanCodes.set(n.scanCode,-1),this.pressedKeyCodes.set(n.keyCode,-1),ae.app.beginUpdateCallbacks.push(function(){var e=t.pressedScanCodes.intMap.h[0|n.scanCode];-1==(null!=e?e:0)&&t.pressedScanCodes.set(n.scanCode,0),-1==(null!=(e=t.pressedKeyCodes.intMap.h[0|n.keyCode])?e:0)&&t.pressedKeyCodes.set(n.keyCode,0)}))},_keyPressed:function(e){e=this.pressedKeyCodes.intMap.h[0|e];return 0<(null!=e?e:0)},_keyJustPressed:function(e){e=this.pressedKeyCodes.intMap.h[0|e];return 1==(null!=e?e:0)},_keyJustReleased:function(e){e=this.pressedKeyCodes.intMap.h[0|e];return-1==(null!=e?e:0)},_scanPressed:function(e){e=this.pressedScanCodes.intMap.h[0|e];return 0<(null!=e?e:0)},_scanJustPressed:function(e){e=this.pressedScanCodes.intMap.h[0|e];return 1==(null!=e?e:0)},_scanJustReleased:function(e){e=this.pressedScanCodes.intMap.h[0|e];return-1==(null!=e?e:0)},willEmitGamepadEnable:function(e,n){for(var t=32*e,i=0;i<32;){var s=t+i++;this.pressedGamepadButtons.set(s,0),this.gamepadAxisValues.set(s,0)}-1==this.activeGamepads.indexOf(e)&&this.activeGamepads.push(e),this.gamepadNames.set(e,n)},willEmitGamepadDisable:function(e){for(var n=32*e,t=0;t<32;){var i=t++,s=n+i,r=this.pressedGamepadButtons.intMap.h[0|s],r=(0<(null!=r?r:0)&&this.emitGamepadUp(e,i),this.gamepadAxisValues.intMap.h[0|s]),s=null!=r?r:0;0!=s&&this.emitGamepadAxis(e,i,s)}var l=this.activeGamepads.indexOf(e);-1!=l&&this.activeGamepads.splice(l,1),this.gamepadNames.remove(e)},willEmitGamepadDown:function(e,n){var t=this,i=32*e+n,e=this.pressedGamepadButtons.intMap.h[0|i],n=null!=e?e:0;this.pressedGamepadButtons.set(i,(n=-1==n?0:n)+1),0==n&&ae.app.beginUpdateCallbacks.push(function(){var e=t.pressedGamepadButtons.intMap.h[0|i];1==(null!=e?e:0)&&t.pressedGamepadButtons.set(i,2)})},willEmitGamepadUp:function(e,n){var t=this,i=32*e+n;this.pressedGamepadButtons.set(i,-1),ae.app.beginUpdateCallbacks.push(function(){var e=t.pressedGamepadButtons.intMap.h[0|i];-1==(null!=e?e:0)&&t.pressedGamepadButtons.set(i,0)})},willEmitGamepadGyro:function(e,n,t,i){var s=this.gamepadGyroDeltas.get(e);null==s&&this.gamepadGyroDeltas.set(e,s=[0,0,0]),-1==this.gamepadGyroKeys.indexOf(e)&&this.gamepadGyroKeys.push(e),s[0]+=n,s[1]+=t,s[2]+=i},_gamepadPressed:function(e,n){e=this.pressedGamepadButtons.intMap.h[0|32*e+n];return 0<(null!=e?e:0)},_gamepadJustPressed:function(e,n){e=this.pressedGamepadButtons.intMap.h[0|32*e+n];return 1==(null!=e?e:0)},_gamepadJustReleased:function(e,n){e=this.pressedGamepadButtons.intMap.h[0|32*e+n];return-1==(null!=e?e:0)},willEmitGamepadAxis:function(e,n,t){this.gamepadAxisValues.set(32*e+n,t)},gamepadAxisValue:function(e,n){e=this.gamepadAxisValues.intMap.h[0|32*e+n];return null!=e?e:0},gamepadGyroDeltaX:function(e){e=this.gamepadGyroDeltas.get(e);return null!=e?e[0]:0},gamepadGyroDeltaY:function(e){e=this.gamepadGyroDeltas.get(e);return null!=e?e[1]:0},gamepadGyroDeltaZ:function(e){e=this.gamepadGyroDeltas.get(e);return null!=e?e[2]:0},startGamepadRumble:function(e,n,t,i){ae.app.backend.input.startGamepadRumble(e,t,i,n)},stopGamepadRumble:function(e){ae.app.backend.input.stopGamepadRumble(e)},gamepadName:function(e){return this.gamepadNames.get(e)},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offKeyDown(),this.offKeyUp(),this.offGamepadAxis(),this.offGamepadDown(),this.offGamepadUp(),this.offGamepadGyro(),this.offGamepadEnable(),this.offGamepadDisable()},__class__:cn}),{}),un=(on.__properties__={get_iterableKeys:"get_iterableKeys",get_size:"get_size"},on.get_size=function(e){return e.size},on.get_iterableKeys=function(e){return e.iterableKeys},on._asIntBoolMap=function(e){return e},on._new=function(e,n,t){return new ke(e=null==e?16:e,n=null==n?.5:n,t=null==t?!1:t)},on.exists=function(e,n){return e.intMap.h.hasOwnProperty(0|n)},on.existsInline=function(e,n){return e.intMap.h.hasOwnProperty(0|n)},on.get=function(e,n){e=e.intMap.h[0|n];return 0!=(null!=e?e:0)},on.getInline=function(e,n){e=e.intMap.h[0|n];return 0!=(null!=e?e:0)},on.set=function(e,n,t){e.set(n,t?1:0)},on.remove=function(e,n){return 0!=e.remove(n)},on.clear=function(e){e.clear()},on.copy=function(e){var n=new ke;return n.intMap=e.intMap.copy(),n.size=e.size,n.iterableKeys=null!=e.iterableKeys?e.iterableKeys.slice():null,n.iterableKeysUsed=null!=e.iterableKeysUsed?on.copy(e.iterableKeysUsed):null,n},on.iterator=function(e){return new un(e)},on.keys=function(e){return new _n(e)},on.keyValueIterator=function(e){return new dn(e)},function(e){this.intBoolMap=e,this.i=0;e=this.intBoolMap.iterableKeys;this.len=null!=e?e.length:-1}),_n=((x["ceramic.IntBoolMapIterator"]=un).__name__="ceramic.IntBoolMapIterator",un.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intBoolMap.iterableKeys[e],e=this.intBoolMap.intMap.h[0|e];return 0!=(null!=e?e:0)},__class__:un},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),dn=((x["ceramic.IntBoolMapKeyIterator"]=_n).__name__="ceramic.IntBoolMapKeyIterator",_n.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:_n},function(e){this.intBoolMap=e,this.i=0;e=this.intBoolMap.iterableKeys;this.len=null!=e?e.length:-1}),bn=((x["ceramic.IntBoolMapKeyValueIterator"]=dn).__name__="ceramic.IntBoolMapKeyValueIterator",dn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intBoolMap.iterableKeys[e],n=this.intBoolMap.intMap.h[0|e];return{key:e,value:0!=(null!=n?n:0)}},__class__:dn},function(e,n,t){null==t&&(t=!1),null==n&&(n=.5),null==e&&(e=16),this.size=0,this.iterableKeysUsed=null,this.iterableKeys=null,this.intMap=new ei,t&&(this.iterableKeys=[],this.iterableKeysUsed=new ke(16,.5,!1))}),pn=((x["ceramic.IntFloatMap"]=bn).__name__="ceramic.IntFloatMap",bn.prototype={clear:function(){this.intMap.h={},this.size=0,null!=this.iterableKeys&&(this.iterableKeys=[],this.iterableKeysUsed=new ke(16,.5,!1))},exists:function(e){return this.intMap.h.hasOwnProperty(0|e)},set:function(e,n){null!=this.iterableKeys&&0==(null!=(t=this.iterableKeysUsed.intMap.h[0|e])?t:0)&&(this.iterableKeysUsed.set(e,1),this.iterableKeys.push(e));var t=0|e;return this.intMap.h.hasOwnProperty(t)||this.size++,this.intMap.h[t]=n},get:function(e){e=this.intMap.h[0|e];return null!=e?e:0},remove:function(e){var n,t=0|e,i=0;return null!=this.iterableKeys&&0!=(null!=(n=this.iterableKeysUsed.intMap.h[0|e])?n:0)&&(this.iterableKeysUsed.set(e,0),this.iterableKeys.splice(this.iterableKeys.indexOf(e),1)),this.intMap.h.hasOwnProperty(t)&&(i=this.intMap.h[t],this.size--),this.intMap.remove(t),i},getInline:function(e){e=this.intMap.h[0|e];return null!=e?e:0},existsInline:function(e){return this.intMap.h.hasOwnProperty(0|e)},copy:function(){var e=new bn;return e.intMap=this.intMap.copy(),e.size=this.size,e.iterableKeys=null!=this.iterableKeys?this.iterableKeys.slice():null,e.iterableKeysUsed=null!=this.iterableKeysUsed?on.copy(this.iterableKeysUsed):null,e},iterator:function(){return new pn(this)},keys:function(){return new fn(this)},keyValueIterator:function(){return new On(this)},__class__:bn},function(e){this.intFloatMap=e,this.i=0;e=this.intFloatMap.iterableKeys;this.len=null!=e?e.length:-1}),fn=((x["ceramic.IntFloatMapIterator"]=pn).__name__="ceramic.IntFloatMapIterator",pn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intFloatMap.iterableKeys[e],e=this.intFloatMap.intMap.h[0|e];return null!=e?e:0},__class__:pn},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),On=((x["ceramic.IntFloatMapKeyIterator"]=fn).__name__="ceramic.IntFloatMapKeyIterator",fn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:fn},function(e){this.intFloatMap=e,this.i=0;e=this.intFloatMap.iterableKeys;this.len=null!=e?e.length:-1}),gn=((x["ceramic.IntFloatMapKeyValueIterator"]=On).__name__="ceramic.IntFloatMapKeyValueIterator",On.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intFloatMap.iterableKeys[e],n=this.intFloatMap.intMap.h[0|e];return{key:e,value:null!=n?n:0}},__class__:On},function(e){this.intIntMap=e,this.i=0;e=this.intIntMap.iterableKeys;this.len=null!=e?e.length:-1}),mn=((x["ceramic.IntIntMapIterator"]=gn).__name__="ceramic.IntIntMapIterator",gn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intIntMap.iterableKeys[e],e=this.intIntMap.intMap.h[0|e];return null!=e?e:0},__class__:gn},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),wn=((x["ceramic.IntIntMapKeyIterator"]=mn).__name__="ceramic.IntIntMapKeyIterator",mn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:mn},function(e){this.intIntMap=e,this.i=0;e=this.intIntMap.iterableKeys;this.len=null!=e?e.length:-1}),vn=((x["ceramic.IntIntMapKeyValueIterator"]=wn).__name__="ceramic.IntIntMapKeyValueIterator",wn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intIntMap.iterableKeys[e],n=this.intIntMap.intMap.h[0|e];return{key:e,value:null!=n?n:0}},__class__:wn},function(e,n,t){null==t&&(t=!1),null==n&&(n=.5),null==e&&(e=16),this.iterableKeys=null,this.nextFreeIndex=0,this.initialSize=e,this.initialFillFactor=n,this._keys=new ke(e,n),this.values=new Array(e),t&&(this.iterableKeys=[])}),yn=((x["ceramic.IntMap"]=vn).__name__="ceramic.IntMap",vn.prototype={get:function(e){e=this._keys.intMap.h[0|e],e=null!=e?e:0;return 2<=e?this.values[e-2]:vn.RET_NULL},getInline:function(e){e=this._keys.intMap.h[0|e],e=null!=e?e:0;return 2<=e?this.values[e-2]:vn.RET_NULL},exists:function(e){return this._keys.intMap.h.hasOwnProperty(0|e)},existsInline:function(e){return this._keys.intMap.h.hasOwnProperty(0|e)},set:function(e,n){var t=this._keys.intMap.h[0|e],t=null!=t?t:0;if(2<=t)t-=2,null!=n?this.values[t]=n:(this.values[t]=null,this.nextFreeIndex>t&&(this.nextFreeIndex=t),this._keys.set(e,1));else if(null==n)1!=t&&(this._keys.set(e,1),null!=this.iterableKeys)&&this.iterableKeys.push(e);else{var i=this.values.length;for(this.nextFreeIndex>=i&&this.resizeValues(2*this.values.length),this.values[this.nextFreeIndex]=n,this._keys.set(e,this.nextFreeIndex+2),1!=t&&null!=this.iterableKeys&&this.iterableKeys.push(e);this.nextFreeIndex++,this.nextFreeIndex<i&&null!=this.values[this.nextFreeIndex];);}},remove:function(e){var n=this._keys.intMap.h[0|e],n=null!=n?n:0;0!=n&&(1!=n&&(this.values[n-=2]=null,this.nextFreeIndex>n)&&(this.nextFreeIndex=n),this._keys.remove(e),null!=this.iterableKeys)&&this.iterableKeys.splice(this.iterableKeys.indexOf(e),1)},copy:function(){var e=new vn,n=(e.initialSize=this.initialSize,e.initialFillFactor=this.initialFillFactor,this._keys),t=new ke,n=(t.intMap=n.intMap.copy(),t.size=n.size,t.iterableKeys=null!=n.iterableKeys?n.iterableKeys.slice():null,t.iterableKeysUsed=null!=n.iterableKeysUsed?on.copy(n.iterableKeysUsed):null,e._keys=t,e.nextFreeIndex=this.nextFreeIndex,e.iterableKeys=null!=this.iterableKeys?this.iterableKeys.slice():null,this.values),t=new Array(n.length);return ai.blit(n,0,t,0,n.length),e.values=t,e},clear:function(){if(this._keys=new ke(this.initialSize,this.initialFillFactor),this.values=new Array(this.initialSize),this.nextFreeIndex=0,null!=this.iterableKeys){var e=this.iterableKeys;if(0!=e.length)if(0<e.length)e.splice(0,e.length);else for(var n=e;n.length<0;)n.push(null)}},iterator:function(){return new yn(this)},keys:function(){return new Un(this)},keyValueIterator:function(){return new xn(this)},resizeValues:function(e){for(var n=this.values,t=(this.values=new Array(e),0),i=n.length;t<i;){var s=t++;this.values[s]=n[s]}},__class__:vn},function(e){this.intMap=e,this.i=0;e=this.intMap.iterableKeys;this.len=null!=e?e.length:-1}),Un=((x["ceramic.IntMapIterator"]=yn).__name__="ceramic.IntMapIterator",yn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intMap.iterableKeys[e];return this.intMap.get(e)},__class__:yn},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),xn=((x["ceramic.IntMapKeyIterator"]=Un).__name__="ceramic.IntMapKeyIterator",Un.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:Un},function(e){this.intMap=e,this.i=0;e=this.intMap.iterableKeys;this.len=null!=e?e.length:-1}),Cn=((x["ceramic.IntMapKeyValueIterator"]=xn).__name__="ceramic.IntMapKeyValueIterator",xn.prototype={hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intMap.iterableKeys[e];return{key:e,value:this.intMap.get(e)}},__class__:xn},(x["ceramic.Json"]=cb).__name__="ceramic.Json",cb.stringify=function(e,n,t){return JSON.stringify(e,n,t)},cb.parse=function(e){return JSON.parse(e)},function(e,n){this.keyCode=e,this.scanCode=n}),u=((x["ceramic.Key"]=Cn).__name__="ceramic.Key",Cn.prototype={get_keyCodeName:function(){return u.$name(this.keyCode)},get_scanCodeName:function(){return d.$name(this.scanCode)},toString:function(){return"Key("+this.keyCode+" "+u.$name(this.keyCode)+" / "+this.scanCode+" "+d.$name(this.scanCode)+")"},__class__:Cn,__properties__:{get_scanCodeName:"get_scanCodeName",get_keyCodeName:"get_keyCodeName"}},{}),Dn=(u.$name=function(e){if(0!=(e&d.MASK))return d.$name(e&~d.MASK);switch(e){case 8:return d.$name(42);case 9:return d.$name(43);case 13:return d.$name(40);case 27:return d.$name(41);case 32:return d.$name(44);case 97:return d.$name(4);case 98:return d.$name(5);case 99:return d.$name(6);case 100:return d.$name(7);case 101:return d.$name(8);case 102:return d.$name(9);case 103:return d.$name(10);case 104:return d.$name(11);case 105:return d.$name(12);case 106:return d.$name(13);case 107:return d.$name(14);case 108:return d.$name(15);case 109:return d.$name(16);case 110:return d.$name(17);case 111:return d.$name(18);case 112:return d.$name(19);case 113:return d.$name(20);case 114:return d.$name(21);case 115:return d.$name(22);case 116:return d.$name(23);case 117:return d.$name(24);case 118:return d.$name(25);case 119:return d.$name(26);case 120:return d.$name(27);case 121:return d.$name(28);case 122:return d.$name(29);case 127:return d.$name(76);default:return String.fromCodePoint(e)}},u.toString=function(e){return"KeyCode("+e+" "+u.$name(e)+")"},(x["polyline.MiterUtils"]=fb).__name__="polyline.MiterUtils",fb.prototype={computeMiter:function(e){return this.tangentX=this.aX+this.bX,this.tangentY=this.aY+this.bY,this.miterX=-this.tangentY,this.miterY=this.tangentX,this.tmpX=-this.aY,this.tmpY=this.aX,e/(this.miterX*this.tmpX+this.miterY*this.tmpY)},normal:function(e,n){this.outX=-n,this.outY=e},direction:function(){this.outX=this.aX-this.bX,this.outY=this.aY-this.bY;var e=this.outX*this.outX+this.outY*this.outY;0<e&&(e=1/Math.sqrt(e),this.outX*=e,this.outY*=e)},__class__:fb},(x["polyline.Stroke"]=gb).__name__="polyline.Stroke",gb.prototype={build:function(e,n,t){if(0<n.length&&n.splice(0,n.length),0<t.length&&t.splice(0,t.length),0!=e.length){var i,s,r,l,a,h,c,o,u,_,d,b,p,f,O,g,m,w,v,k=e.length,y=(this._lastFlip=-1,this._started=!1,2),U=0,x=this._hasNormal=!1,C=0,D=0,T=0,S=0,E=-9999999999,A=-9999999999,M=0;for(this._points=e;y<k;){if(x||(C=e[y-2],D=e[y-1],T=e[y],S=e[y+1]),x=!(A=E=-9999999999),M=this.mapThickness(T,S,y,e),y<k-2)if(E=e[y+2],A=e[y+3],T==E&&S==A)x=!0;else{var R=C-T,P=D-S,F=((E-T)*R+(A-S)*P)/(R*R+P*P),R=E-(T+F*R),F=A-(S+F*P);if(Math.sqrt(R*R+F*F)<M){for(var I=Math.atan2(D-S,C-T)-Math.atan2(A-S,E-T);I<0;)I+=6.28318530718;for(;6.28318530718<I;)I-=6.28318530718;(I<1.57079632679||4.71238898038<I)&&(A=E=-9999999999)}}x||(P=C,R=D,F=T,i=S,d=.5*M,s=0,c=this.cap==Ei.SQUARE,f=this.join==Ai.BEVEL,gb.miterUtils.aX=F,gb.miterUtils.aY=i,gb.miterUtils.bX=P,gb.miterUtils.bY=R,(O=gb.miterUtils).outX=O.aX-O.bX,O.outY=O.aY-O.bY,0<(_=O.outX*O.outX+O.outY*O.outY)&&(_=1/Math.sqrt(_),O.outX*=_,O.outY*=_),this.lineAX=gb.miterUtils.outX,this.lineAY=gb.miterUtils.outY,this._hasNormal||((r=gb.miterUtils).outX=-this.lineAY,r.outY=this.lineAX,this._normalX=gb.miterUtils.outX,this._normalY=gb.miterUtils.outY,this._hasNormal=!0),this._started||(this._started=!0,r=.5*this.mapThickness(this._points[0],this._points[1],0,this._points),c&&(this.capEndX=P+this.lineAX*-r,this.capEndY=R+this.lineAY*-r,P=this.capEndX,R=this.capEndY),l=this._normalX,a=this._normalY,this.tmpX=P+l*-r,this.tmpY=R+a*-r,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=P+l*r,this.tmpY=R+a*r,n.push(this.tmpX),n.push(this.tmpY)),t.push(U),t.push(U+1),t.push(U+2),-9999999999==E?((l=gb.miterUtils).outX=-this.lineAY,l.outY=this.lineAX,this._normalX=gb.miterUtils.outX,this._normalY=gb.miterUtils.outY,this._hasNormal=!0,c&&(this.capEndX=F+this.lineAX*d,this.capEndY=i+this.lineAY*d,F=this.capEndX,i=this.capEndY),a=this._normalX,c=this._normalY,this.tmpX=F+a*-d,this.tmpY=i+c*-d,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=F+a*d,this.tmpY=i+c*d,n.push(this.tmpX),n.push(this.tmpY),1==this._lastFlip?(t.push(U),t.push(U+2)):(t.push(U+2),t.push(U+1)),t.push(U+3),s+=4):(gb.miterUtils.aX=E,gb.miterUtils.aY=A,gb.miterUtils.bX=F,gb.miterUtils.bY=i,(c=gb.miterUtils).outX=c.aX-c.bX,c.outY=c.aY-c.bY,0<(h=c.outX*c.outX+c.outY*c.outY)&&(h=1/Math.sqrt(h),c.outX*=h,c.outY*=h),this.lineBX=gb.miterUtils.outX,this.lineBY=gb.miterUtils.outY,gb.miterUtils.tangentX=this.tangentX,gb.miterUtils.tangentY=this.tangentY,gb.miterUtils.miterX=this.miterX,gb.miterUtils.miterY=this.miterY,gb.miterUtils.aX=this.lineAX,gb.miterUtils.aY=this.lineAY,gb.miterUtils.bX=this.lineBX,gb.miterUtils.bY=this.lineBY,(c=gb.miterUtils).tangentX=c.aX+c.bX,c.tangentY=c.aY+c.bY,c.miterX=-c.tangentY,c.miterY=c.tangentX,c.tmpX=-c.aY,c.tmpY=c.aX,b=d/(c.miterX*c.tmpX+c.miterY*c.tmpY),this.tangentX=gb.miterUtils.tangentX,this.tangentY=gb.miterUtils.tangentY,this.miterX=gb.miterUtils.miterX,this.miterY=gb.miterUtils.miterY,h=this.tangentX*this._normalX+this.tangentY*this._normalY<0?-1:1,(c=f)||this.join!=Ai.MITER||b/d>this.miterLimit&&(c=!0),c?(this.tmpX=F+this._normalX*-d*h,this.tmpY=i+this._normalY*-d*h,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=F+this.miterX*b*h,this.tmpY=i+this.miterY*b*h,n.push(this.tmpX),n.push(this.tmpY),this._lastFlip!=-h?(t.push(U),t.push(U+2)):(t.push(U+2),t.push(U+1)),t.push(U+3),t.push(U+2),t.push(U+3),t.push(U+4),(c=gb.miterUtils).outX=-this.lineBY,c.outY=this.lineBX,this.tmpX=gb.miterUtils.outX,this.tmpY=gb.miterUtils.outY,this._normalX=this.tmpX,this._normalY=this.tmpY,this.tmpX=F+this.tmpX*-d*h,this.tmpY=i+this.tmpY*-d*h,n.push(this.tmpX),n.push(this.tmpY),s+=3):(c=this.miterX,o=this.miterY,this.tmpX=F+c*-b,this.tmpY=i+o*-b,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=F+c*b,this.tmpY=i+o*b,n.push(this.tmpX),n.push(this.tmpY),1==this._lastFlip?(t.push(U),t.push(U+2)):(t.push(U+2),t.push(U+1)),t.push(U+3),h=-1,this._normalX=this.miterX,this._normalY=this.miterY,s+=2),this._lastFlip=h),U+=s),-9999999999==E&&(this._lastFlip=-1,this._started=!1,x=this._hasNormal=!1),y+=2}this._points=null,this.canLoop&&this.cap==Ei.BUTT&&e[0]==e[e.length-2]&&e[1]==e[e.length-1]&&6<e.length&&(p=e[2],g=e[3],w=e[e.length-4],m=e[e.length-3],u=e[0],v=e[1],gb.miterUtils.aX=p,gb.miterUtils.aY=g,gb.miterUtils.bX=u,gb.miterUtils.bY=v,(O=gb.miterUtils).outX=O.aX-O.bX,O.outY=O.aY-O.bY,0<(_=O.outX*O.outX+O.outY*O.outY)&&(_=1/Math.sqrt(_),O.outX*=_,O.outY*=_),p=gb.miterUtils.outX,g=gb.miterUtils.outY,gb.miterUtils.aX=u,gb.miterUtils.aY=v,gb.miterUtils.bX=w,gb.miterUtils.bY=m,(O=gb.miterUtils).outX=O.aX-O.bX,O.outY=O.aY-O.bY,0<(_=O.outX*O.outX+O.outY*O.outY)&&(_=1/Math.sqrt(_),O.outX*=_,O.outY*=_),w=gb.miterUtils.outX,m=gb.miterUtils.outY,gb.miterUtils.aX=w,gb.miterUtils.aY=m,gb.miterUtils.bX=p,gb.miterUtils.bY=g,d=.5*M,(O=gb.miterUtils).tangentX=O.aX+O.bX,O.tangentY=O.aY+O.bY,O.miterX=-O.tangentY,O.miterY=O.tangentX,O.tmpX=-O.aY,O.tmpY=O.aX,b=d/(O.miterX*O.tmpX+O.miterY*O.tmpY),p=gb.miterUtils.miterX,g=gb.miterUtils.miterY,(f=this.join==Ai.BEVEL)||this.join!=Ai.MITER||b/d>this.miterLimit&&(f=!0),f&&((O=gb.miterUtils).outX=-m,O.outY=w,p=gb.miterUtils.outX,g=gb.miterUtils.outY,b=d),m=v+g*-b,w=u+p*b,v=v+g*b,n[0]=g=u+p*-b,n[1]=m,n[2]=w,n[3]=v,n[n.length-4]=g,n[n.length-3]=m,n[n.length-2]=w,n[n.length-1]=v)}},mapThickness:function(e,n,t,i){return this.thickness},_seg:function(e,n,t,i,s,r,l,a,h,c){var o,u,_,d=0,b=this.cap==Ei.SQUARE,p=this.join==Ai.BEVEL,f=(gb.miterUtils.aX=r,gb.miterUtils.aY=l,gb.miterUtils.bX=i,gb.miterUtils.bY=s,gb.miterUtils),O=(f.outX=f.aX-f.bX,f.outY=f.aY-f.bY,f.outX*f.outX+f.outY*f.outY);return 0<O&&(O=1/Math.sqrt(O),f.outX*=O,f.outY*=O),this.lineAX=gb.miterUtils.outX,this.lineAY=gb.miterUtils.outY,this._hasNormal||((f=gb.miterUtils).outX=-this.lineAY,f.outY=this.lineAX,this._normalX=gb.miterUtils.outX,this._normalY=gb.miterUtils.outY,this._hasNormal=!0),this._started||(this._started=!0,o=.5*this.mapThickness(this._points[0],this._points[1],0,this._points),b&&(this.capEndX=i+this.lineAX*-o,this.capEndY=s+this.lineAY*-o,i=this.capEndX,s=this.capEndY),u=this._normalX,_=this._normalY,this.tmpX=i+u*-o,this.tmpY=s+_*-o,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=i+u*o,this.tmpY=s+_*o,e.push(this.tmpX),e.push(this.tmpY)),n.push(t),n.push(t+1),n.push(t+2),-9999999999==a?((f=gb.miterUtils).outX=-this.lineAY,f.outY=this.lineAX,this._normalX=gb.miterUtils.outX,this._normalY=gb.miterUtils.outY,this._hasNormal=!0,b&&(this.capEndX=r+this.lineAX*c,this.capEndY=l+this.lineAY*c,r=this.capEndX,l=this.capEndY),u=this._normalX,_=this._normalY,this.tmpX=r+u*-c,this.tmpY=l+_*-c,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=r+u*c,this.tmpY=l+_*c,e.push(this.tmpX),e.push(this.tmpY),1==this._lastFlip?(n.push(t),n.push(t+2)):(n.push(t+2),n.push(t+1)),n.push(t+3),d+=4):(gb.miterUtils.aX=a,gb.miterUtils.aY=h,gb.miterUtils.bX=r,gb.miterUtils.bY=l,(f=gb.miterUtils).outX=f.aX-f.bX,f.outY=f.aY-f.bY,0<(O=f.outX*f.outX+f.outY*f.outY)&&(O=1/Math.sqrt(O),f.outX*=O,f.outY*=O),this.lineBX=gb.miterUtils.outX,this.lineBY=gb.miterUtils.outY,gb.miterUtils.tangentX=this.tangentX,gb.miterUtils.tangentY=this.tangentY,gb.miterUtils.miterX=this.miterX,gb.miterUtils.miterY=this.miterY,gb.miterUtils.aX=this.lineAX,gb.miterUtils.aY=this.lineAY,gb.miterUtils.bX=this.lineBX,gb.miterUtils.bY=this.lineBY,(f=gb.miterUtils).tangentX=f.aX+f.bX,f.tangentY=f.aY+f.bY,f.miterX=-f.tangentY,f.miterY=f.tangentX,f.tmpX=-f.aY,f.tmpY=f.aX,i=c/(f.miterX*f.tmpX+f.miterY*f.tmpY),this.tangentX=gb.miterUtils.tangentX,this.tangentY=gb.miterUtils.tangentY,this.miterX=gb.miterUtils.miterX,this.miterY=gb.miterUtils.miterY,s=this.tangentX*this._normalX+this.tangentY*this._normalY<0?-1:1,(o=p)||this.join!=Ai.MITER||i/c>this.miterLimit&&(o=!0),o?(this.tmpX=r+this._normalX*-c*s,this.tmpY=l+this._normalY*-c*s,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=r+this.miterX*i*s,this.tmpY=l+this.miterY*i*s,e.push(this.tmpX),e.push(this.tmpY),this._lastFlip!=-s?(n.push(t),n.push(t+2)):(n.push(t+2),n.push(t+1)),n.push(t+3),n.push(t+2),n.push(t+3),n.push(t+4),(f=gb.miterUtils).outX=-this.lineBY,f.outY=this.lineBX,this.tmpX=gb.miterUtils.outX,this.tmpY=gb.miterUtils.outY,this._normalX=this.tmpX,this._normalY=this.tmpY,this.tmpX=r+this.tmpX*-c*s,this.tmpY=l+this.tmpY*-c*s,e.push(this.tmpX),e.push(this.tmpY),d+=3):(u=this.miterX,_=this.miterY,this.tmpX=r+u*-i,this.tmpY=l+_*-i,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=r+u*i,this.tmpY=l+_*i,e.push(this.tmpX),e.push(this.tmpY),1==this._lastFlip?(n.push(t),n.push(t+2)):(n.push(t+2),n.push(t+1)),n.push(t+3),s=-1,this._normalX=this.miterX,this._normalY=this.miterY,d+=2),this._lastFlip=s),d},extrusions:function(e,n,t,i,s,r){this.tmpX=n+i*-r,this.tmpY=t+s*-r,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=n+i*r,this.tmpY=t+s*r,e.push(this.tmpX),e.push(this.tmpY)},pointsAngle:function(e,n,t,i,s,r){for(var l=Math.atan2(r-n,s-e)-Math.atan2(i-n,t-e);l<0;)l+=6.28318530718;for(;6.28318530718<l;)l-=6.28318530718;return l},distanceToLine:function(e,n,t,i,s,r){var s=s-t,r=r-i,l=((e-t)*s+(n-i)*r)/(s*s+r*r),e=e-(t+l*s),t=n-(i+l*r);return Math.sqrt(e*e+t*t)},__class__:gb},function(){this.autoComputeSize=!0,this.loop=!1,this.cap=Ei.BUTT,this.join=Ai.BEVEL,this.thickness=1,this.miterLimit=10,this.points=null,Ce.call(this)}),Tn=((x["ceramic.Line"]=Dn).__name__="ceramic.Line",Dn.__super__=Ce,Dn.prototype=$extend(Ce.prototype,{set_points:function(e){return this.points=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0,e},set_miterLimit:function(e){return this.miterLimit!=e&&(this.miterLimit=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_thickness:function(e){return this.thickness!=e&&(this.thickness=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_join:function(e){return this.join!=e&&(this.join=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_cap:function(e){return this.cap!=e&&(this.cap=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_loop:function(e){return this.loop!=e&&(this.loop=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_autoComputeSize:function(e){return this.autoComputeSize!=e&&(this.autoComputeSize=e)&&this.computeSize(),e},computeContent:function(){null!=this.points&&4<=this.points.length&&(Dn._stroke.miterLimit=this.miterLimit,Dn._stroke.thickness=this.thickness,Dn._stroke.join=this.join,Dn._stroke.cap=this.cap,Dn._stroke.canLoop=this.loop,null==this.vertices&&(this.vertices=[]),null==this.indices&&(this.indices=[]),Dn._stroke.build(this.points,this.vertices,this.indices)),this.autoComputeSize&&this.computeSize(),this.contentDirty=!1},computeSize:function(){if(null!=this.points&&2<=this.points.length){for(var e=0,n=0,t=0,i=this.points.length-1;t<i;){var s=this.points[t],s=(e<s&&(e=s),++t,this.points[t]);n<s&&(n=s),++t}this.set_width(e),this.set_height(n)}else this.set_width(0),this.set_height(0)},__class__:Dn,__properties__:$extend(Ce.prototype.__properties__,{set_autoComputeSize:"set_autoComputeSize",set_loop:"set_loop",set_cap:"set_cap",set_join:"set_join",set_thickness:"set_thickness",set_miterLimit:"set_miterLimit",set_points:"set_points"})}),function(){this.indentPrefix="",h.call(this),Tn.didInitOnce||(Tn.didInitOnce=!0)}),Sn=((x["ceramic.Logger"]=Tn).__name__="ceramic.Logger",Tn.__super__=h,Tn.prototype=$extend(h.prototype,{emitInfo:function(e,n){var t=0;if(null!=this.__cbOnInfo&&(t+=this.__cbOnInfo.length),null!=this.__cbOnceInfo&&(t+=this.__cbOnceInfo.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnInfo)for(var l=0,a=this.__cbOnInfo.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnInfo[h],++r):--t}if(null!=this.__cbOnceInfo){for(var c=null,o=null,l=0,a=this.__cbOnceInfo.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceInfo[h],this.__cbOnceInfo[h]=null,u=this.__cbOnceOwnerUnbindInfo[h],(this.__cbOnceOwnerUnbindInfo[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindInfo[h]),o.push(this.__cbOnceInfo[h]))}this.__cbOnceOwnerUnbindInfo=c,this.__cbOnceInfo=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onInfo:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event info because owner is destroyed!");var s=function(e){null!=t&&(i.offInfo(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindInfo&&(this.__cbOnOwnerUnbindInfo=[]),this.__cbOnOwnerUnbindInfo.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindInfo&&(this.__cbOnOwnerUnbindInfo=[]),this.__cbOnOwnerUnbindInfo.push(null);null==this.__cbOnInfo&&(this.__cbOnInfo=[]),this.__cbOnInfo.push(t)},onceInfo:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event info because owner is destroyed!");var s=function(e){null!=t&&(i.offInfo(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindInfo&&(this.__cbOnceOwnerUnbindInfo=[]),this.__cbOnceOwnerUnbindInfo.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindInfo&&(this.__cbOnceOwnerUnbindInfo=[]),this.__cbOnceOwnerUnbindInfo.push(null);null==this.__cbOnceInfo&&(this.__cbOnceInfo=[]),this.__cbOnceInfo.push(t)},offInfo:function(e){if(null!=e){var n;null!=this.__cbOnInfo&&-1!=(n=this.__cbOnInfo.indexOf(e))&&(this.__cbOnInfo.splice(n,1),null!=(r=this.__cbOnOwnerUnbindInfo[n])&&r(),this.__cbOnOwnerUnbindInfo.splice(n,1)),null!=this.__cbOnceInfo&&-1!=(n=this.__cbOnceInfo.indexOf(e))&&(this.__cbOnceInfo.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindInfo[n])&&r(),this.__cbOnceOwnerUnbindInfo.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindInfo){for(var t=0,i=this.__cbOnOwnerUnbindInfo.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindInfo[s])&&r()}this.__cbOnOwnerUnbindInfo=null}if(null!=this.__cbOnceOwnerUnbindInfo){for(t=0,i=this.__cbOnceOwnerUnbindInfo.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindInfo[s])&&r()}this.__cbOnceOwnerUnbindInfo=null}this.__cbOnInfo=null,this.__cbOnceInfo=null}},listensInfo:function(){return null!=this.__cbOnInfo&&0<this.__cbOnInfo.length||null!=this.__cbOnceInfo&&0<this.__cbOnceInfo.length},emitDebug:function(e,n){var t=0;if(null!=this.__cbOnDebug&&(t+=this.__cbOnDebug.length),null!=this.__cbOnceDebug&&(t+=this.__cbOnceDebug.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnDebug)for(var l=0,a=this.__cbOnDebug.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnDebug[h],++r):--t}if(null!=this.__cbOnceDebug){for(var c=null,o=null,l=0,a=this.__cbOnceDebug.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceDebug[h],this.__cbOnceDebug[h]=null,u=this.__cbOnceOwnerUnbindDebug[h],(this.__cbOnceOwnerUnbindDebug[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindDebug[h]),o.push(this.__cbOnceDebug[h]))}this.__cbOnceOwnerUnbindDebug=c,this.__cbOnceDebug=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onDebug:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event debug because owner is destroyed!");var s=function(e){null!=t&&(i.offDebug(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindDebug&&(this.__cbOnOwnerUnbindDebug=[]),this.__cbOnOwnerUnbindDebug.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindDebug&&(this.__cbOnOwnerUnbindDebug=[]),this.__cbOnOwnerUnbindDebug.push(null);null==this.__cbOnDebug&&(this.__cbOnDebug=[]),this.__cbOnDebug.push(t)},onceDebug:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event debug because owner is destroyed!");var s=function(e){null!=t&&(i.offDebug(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindDebug&&(this.__cbOnceOwnerUnbindDebug=[]),this.__cbOnceOwnerUnbindDebug.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindDebug&&(this.__cbOnceOwnerUnbindDebug=[]),this.__cbOnceOwnerUnbindDebug.push(null);null==this.__cbOnceDebug&&(this.__cbOnceDebug=[]),this.__cbOnceDebug.push(t)},offDebug:function(e){if(null!=e){var n;null!=this.__cbOnDebug&&-1!=(n=this.__cbOnDebug.indexOf(e))&&(this.__cbOnDebug.splice(n,1),null!=(r=this.__cbOnOwnerUnbindDebug[n])&&r(),this.__cbOnOwnerUnbindDebug.splice(n,1)),null!=this.__cbOnceDebug&&-1!=(n=this.__cbOnceDebug.indexOf(e))&&(this.__cbOnceDebug.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindDebug[n])&&r(),this.__cbOnceOwnerUnbindDebug.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDebug){for(var t=0,i=this.__cbOnOwnerUnbindDebug.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindDebug[s])&&r()}this.__cbOnOwnerUnbindDebug=null}if(null!=this.__cbOnceOwnerUnbindDebug){for(t=0,i=this.__cbOnceOwnerUnbindDebug.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindDebug[s])&&r()}this.__cbOnceOwnerUnbindDebug=null}this.__cbOnDebug=null,this.__cbOnceDebug=null}},listensDebug:function(){return null!=this.__cbOnDebug&&0<this.__cbOnDebug.length||null!=this.__cbOnceDebug&&0<this.__cbOnceDebug.length},emitSuccess:function(e,n){var t=0;if(null!=this.__cbOnSuccess&&(t+=this.__cbOnSuccess.length),null!=this.__cbOnceSuccess&&(t+=this.__cbOnceSuccess.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnSuccess)for(var l=0,a=this.__cbOnSuccess.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnSuccess[h],++r):--t}if(null!=this.__cbOnceSuccess){for(var c=null,o=null,l=0,a=this.__cbOnceSuccess.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceSuccess[h],this.__cbOnceSuccess[h]=null,u=this.__cbOnceOwnerUnbindSuccess[h],(this.__cbOnceOwnerUnbindSuccess[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindSuccess[h]),o.push(this.__cbOnceSuccess[h]))}this.__cbOnceOwnerUnbindSuccess=c,this.__cbOnceSuccess=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onSuccess:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event success because owner is destroyed!");var s=function(e){null!=t&&(i.offSuccess(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindSuccess&&(this.__cbOnOwnerUnbindSuccess=[]),this.__cbOnOwnerUnbindSuccess.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindSuccess&&(this.__cbOnOwnerUnbindSuccess=[]),this.__cbOnOwnerUnbindSuccess.push(null);null==this.__cbOnSuccess&&(this.__cbOnSuccess=[]),this.__cbOnSuccess.push(t)},onceSuccess:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event success because owner is destroyed!");var s=function(e){null!=t&&(i.offSuccess(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindSuccess&&(this.__cbOnceOwnerUnbindSuccess=[]),this.__cbOnceOwnerUnbindSuccess.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindSuccess&&(this.__cbOnceOwnerUnbindSuccess=[]),this.__cbOnceOwnerUnbindSuccess.push(null);null==this.__cbOnceSuccess&&(this.__cbOnceSuccess=[]),this.__cbOnceSuccess.push(t)},offSuccess:function(e){if(null!=e){var n;null!=this.__cbOnSuccess&&-1!=(n=this.__cbOnSuccess.indexOf(e))&&(this.__cbOnSuccess.splice(n,1),null!=(r=this.__cbOnOwnerUnbindSuccess[n])&&r(),this.__cbOnOwnerUnbindSuccess.splice(n,1)),null!=this.__cbOnceSuccess&&-1!=(n=this.__cbOnceSuccess.indexOf(e))&&(this.__cbOnceSuccess.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindSuccess[n])&&r(),this.__cbOnceOwnerUnbindSuccess.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSuccess){for(var t=0,i=this.__cbOnOwnerUnbindSuccess.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindSuccess[s])&&r()}this.__cbOnOwnerUnbindSuccess=null}if(null!=this.__cbOnceOwnerUnbindSuccess){for(t=0,i=this.__cbOnceOwnerUnbindSuccess.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindSuccess[s])&&r()}this.__cbOnceOwnerUnbindSuccess=null}this.__cbOnSuccess=null,this.__cbOnceSuccess=null}},listensSuccess:function(){return null!=this.__cbOnSuccess&&0<this.__cbOnSuccess.length||null!=this.__cbOnceSuccess&&0<this.__cbOnceSuccess.length},emitWarning:function(e,n){var t=0;if(null!=this.__cbOnWarning&&(t+=this.__cbOnWarning.length),null!=this.__cbOnceWarning&&(t+=this.__cbOnceWarning.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnWarning)for(var l=0,a=this.__cbOnWarning.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnWarning[h],++r):--t}if(null!=this.__cbOnceWarning){for(var c=null,o=null,l=0,a=this.__cbOnceWarning.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceWarning[h],this.__cbOnceWarning[h]=null,u=this.__cbOnceOwnerUnbindWarning[h],(this.__cbOnceOwnerUnbindWarning[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindWarning[h]),o.push(this.__cbOnceWarning[h]))}this.__cbOnceOwnerUnbindWarning=c,this.__cbOnceWarning=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onWarning:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event warning because owner is destroyed!");var s=function(e){null!=t&&(i.offWarning(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindWarning&&(this.__cbOnOwnerUnbindWarning=[]),this.__cbOnOwnerUnbindWarning.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindWarning&&(this.__cbOnOwnerUnbindWarning=[]),this.__cbOnOwnerUnbindWarning.push(null);null==this.__cbOnWarning&&(this.__cbOnWarning=[]),this.__cbOnWarning.push(t)},onceWarning:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event warning because owner is destroyed!");var s=function(e){null!=t&&(i.offWarning(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindWarning&&(this.__cbOnceOwnerUnbindWarning=[]),this.__cbOnceOwnerUnbindWarning.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindWarning&&(this.__cbOnceOwnerUnbindWarning=[]),this.__cbOnceOwnerUnbindWarning.push(null);null==this.__cbOnceWarning&&(this.__cbOnceWarning=[]),this.__cbOnceWarning.push(t)},offWarning:function(e){if(null!=e){var n;null!=this.__cbOnWarning&&-1!=(n=this.__cbOnWarning.indexOf(e))&&(this.__cbOnWarning.splice(n,1),null!=(r=this.__cbOnOwnerUnbindWarning[n])&&r(),this.__cbOnOwnerUnbindWarning.splice(n,1)),null!=this.__cbOnceWarning&&-1!=(n=this.__cbOnceWarning.indexOf(e))&&(this.__cbOnceWarning.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindWarning[n])&&r(),this.__cbOnceOwnerUnbindWarning.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWarning){for(var t=0,i=this.__cbOnOwnerUnbindWarning.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindWarning[s])&&r()}this.__cbOnOwnerUnbindWarning=null}if(null!=this.__cbOnceOwnerUnbindWarning){for(t=0,i=this.__cbOnceOwnerUnbindWarning.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindWarning[s])&&r()}this.__cbOnceOwnerUnbindWarning=null}this.__cbOnWarning=null,this.__cbOnceWarning=null}},listensWarning:function(){return null!=this.__cbOnWarning&&0<this.__cbOnWarning.length||null!=this.__cbOnceWarning&&0<this.__cbOnceWarning.length},emitError:function(e,n){var t=0;if(null!=this.__cbOnError&&(t+=this.__cbOnError.length),null!=this.__cbOnceError&&(t+=this.__cbOnceError.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnError)for(var l=0,a=this.__cbOnError.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnError[h],++r):--t}if(null!=this.__cbOnceError){for(var c=null,o=null,l=0,a=this.__cbOnceError.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceError[h],this.__cbOnceError[h]=null,u=this.__cbOnceOwnerUnbindError[h],(this.__cbOnceOwnerUnbindError[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindError[h]),o.push(this.__cbOnceError[h]))}this.__cbOnceOwnerUnbindError=c,this.__cbOnceError=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event error because owner is destroyed!");var s=function(e){null!=t&&(i.offError(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindError&&(this.__cbOnOwnerUnbindError=[]),this.__cbOnOwnerUnbindError.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindError&&(this.__cbOnOwnerUnbindError=[]),this.__cbOnOwnerUnbindError.push(null);null==this.__cbOnError&&(this.__cbOnError=[]),this.__cbOnError.push(t)},onceError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event error because owner is destroyed!");var s=function(e){null!=t&&(i.offError(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindError&&(this.__cbOnceOwnerUnbindError=[]),this.__cbOnceOwnerUnbindError.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindError&&(this.__cbOnceOwnerUnbindError=[]),this.__cbOnceOwnerUnbindError.push(null);null==this.__cbOnceError&&(this.__cbOnceError=[]),this.__cbOnceError.push(t)},offError:function(e){if(null!=e){var n;null!=this.__cbOnError&&-1!=(n=this.__cbOnError.indexOf(e))&&(this.__cbOnError.splice(n,1),null!=(r=this.__cbOnOwnerUnbindError[n])&&r(),this.__cbOnOwnerUnbindError.splice(n,1)),null!=this.__cbOnceError&&-1!=(n=this.__cbOnceError.indexOf(e))&&(this.__cbOnceError.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindError[n])&&r(),this.__cbOnceOwnerUnbindError.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindError){for(var t=0,i=this.__cbOnOwnerUnbindError.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindError[s])&&r()}this.__cbOnOwnerUnbindError=null}if(null!=this.__cbOnceOwnerUnbindError){for(t=0,i=this.__cbOnceOwnerUnbindError.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindError[s])&&r()}this.__cbOnceOwnerUnbindError=null}this.__cbOnError=null,this.__cbOnceError=null}},listensError:function(){return null!=this.__cbOnError&&0<this.__cbOnError.length||null!=this.__cbOnceError&&0<this.__cbOnceError.length},debug:function(e,n){this.emitDebug(e,n),Xt.trace(this.prefixLines("[debug] ",e),n)},info:function(e,n){this.emitInfo(e,n),Xt.trace(this.prefixLines("[info] ",e),n)},success:function(e,n){this.emitSuccess(e,n),Xt.trace(this.prefixLines("[success] ",e),n)},warning:function(e,n){this.emitWarning(e,n),Tn._hasElectronRunner?Xt.trace(this.prefixLines("[warning] ",e),n):console.warn(e)},error:function(e,n){this.emitError(e,n),Tn._hasElectronRunner?Xt.trace(this.prefixLines("[error] ",e),n):console.error(e)},pushIndent:function(){this.indentPrefix+="    "},popIndent:function(){this.indentPrefix=this.indentPrefix.substring(0,this.indentPrefix.length-4)},prefixLines:function(e,n){for(var t=[],i=0,s=L.string(n).split("\n");i<s.length;){var r=s[i];++i,t.push(e+this.indentPrefix+r)}return t.join("\n")},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offInfo(),this.offDebug(),this.offSuccess(),this.offWarning(),this.offError()},__class__:Tn}),function(){}),En=((x["ceramic.MeshExtensions"]=Sn).__name__="ceramic.MeshExtensions",Sn.createQuad=function(e,n,t,i){(i=null==i?-1:i)<2&&(i=2+e.customFloatAttributesSize);var s=e.uvs;if(s[7]=1,s[0]=0,s[1]=0,s[2]=1,s[3]=0,s[4]=1,s[5]=1,s[6]=0,8<s.length&&8!=s.length)if(8<s.length)s.splice(8,s.length-8);else for(var r=s;r.length<8;)r.push(null);s=e.indices;if(s[5]=3,s[0]=0,s[1]=1,s[2]=2,s[3]=0,s[4]=2,6<s.length&&6!=s.length)if(6<s.length)s.splice(6,s.length-6);else for(r=s;r.length<6;)r.push(null);if(null!=e.vertices32){for(var l=e.vertices32,s=4*i,a=(l.length!=s&&(l=new Float32Array(s),e.vertices32=l),0),h=(l[a++]=0,l[a++]=0,2),c=i;h<c;){h++;l[a++]=0}l[a++]=n,l[a++]=0;for(h=2,c=i;h<c;){h++;l[a++]=0}l[a++]=n,l[a++]=t;for(h=2,c=i;h<c;){h++;l[a++]=0}l[a++]=0,l[a++]=t;for(h=2,c=i;h<c;){h++;l[a++]=0}}else{for(var o=e.vertices,a=o[4*i]=0,h=(o[a]=0,o[++a]=0,++a,2),c=i;h<c;){h++;o[a]=0,++a}o[a]=n,o[++a]=0,++a;for(h=2,c=i;h<c;){h++;o[a]=0,++a}o[a]=n,o[++a]=t,++a;for(h=2,c=i;h<c;){h++;o[a]=0,++a}o[a]=0,o[++a]=t,++a;for(h=2,c=i;h<c;){h++;o[a]=0,++a}if(o.length>a&&o.length!=a)if(o.length>a)o.splice(a,o.length-a);else for(r=o;r.length<a;)r.push(null)}e.set_width(n),e.set_height(t)},Sn.setDarkColor=function(e,n){var t=(n>>16&255)/255,i=(n>>8&255)/255,s=(255&n)/255,r=0;if(null!=e.vertices32)for(var l=e.vertices32,a=6*Math.floor(l.length/6);r<a;)l[r+=2]=t,l[++r]=i,l[++r]=s,l[++r]=1,++r;else for(var h=e.vertices,a=6*Math.floor(h.length/6);r<a;)h[r+=2]=t,h[++r]=i,h[++r]=s,h[++r]=1,++r},Sn.setDarkAlphaColor=function(e,n){var t=(n>>16&255)/255,i=(n>>8&255)/255,s=(255&n)/255,r=(n>>24&255)/255,l=0;if(null!=e.vertices32)for(var a=e.vertices32,h=6*Math.floor(a.length/6);l<h;)a[l+=2]=t,a[++l]=i,a[++l]=s,a[++l]=r,++l;else for(var c=e.vertices,h=6*Math.floor(c.length/6);l<h;)c[l+=2]=t,c[++l]=i,c[++l]=s,c[++l]=r,++l},Sn.createArc=function(e,n,t,i,s,r){var s=Math.ceil(s*t/360),l=e.indices;if(0!=l.length)if(0<l.length)l.splice(0,l.length);else for(var a=l;a.length<0;)a.push(null);var h,c,o=1.5*Math.PI,u=.017453292519943295*t/s;switch(r._hx_index){case 0:h=-i;break;case 1:h=0;break;case 2:h=.5*-i}switch(r._hx_index){case 0:c=0;break;case 1:c=i;break;case 2:c=.5*i}if(null!=e.vertices32)for(var _=e.vertices32,r=4*(s+(360!=t?1:0)),d=(_.length!=r&&(_=new Float32Array(r),e.vertices32=_),0),b=0,p=s+(360!=t?1:0);b<p;){var f=b++,O=(n+h)*(y=Math.cos(o+u*f)),g=(n+h)*(w=Math.sin(o+u*f));_[d++]=n+O,_[d++]=n+g,g=(n+c)*w,_[d++]=n+(O=(n+c)*y),_[d++]=n+g,0<f&&(l.push(v=2*(f-1)),l.push(v+1),l.push(v+2),l.push(v+1),l.push(v+2),l.push(v+3))}else{var m=e.vertices;if(0!=m.length)if(0<m.length)m.splice(0,m.length);else for(a=m;a.length<0;)a.push(null);for(b=0,p=s+(360!=t?1:0);b<p;){var w,v,f=b++,y=Math.cos(o+u*f);g=(n+h)*(w=Math.sin(o+u*f)),m.push(n+(O=(n+h)*y)),m.push(n+g),g=(n+c)*w,m.push(n+(O=(n+c)*y)),m.push(n+g),0<f&&(l.push(v=2*(f-1)),l.push(v+1),l.push(v+2),l.push(v+1),l.push(v+2),l.push(v+3))}}360==t&&(l.push(v=2*(s-1)),l.push(v+1),l.push(0),l.push(v+1),l.push(0),l.push(1))},Sn.createVerticesGrid=function(e,n,t,i,s,r,l,a,h){null==a&&(a=0),null==l&&(l=0),null==r&&(r=0),null!=e.vertices32?e.vertices32=En.createVertices32Grid(e.vertices32,n,t,i,s,r,l,a,h):e.vertices=En.createVerticesGrid(e.vertices,n,t,i,s,r,l,a,h)},Sn.createIndicesGrid=function(e,n,t,i,s,r){e.indices=En.createIndicesGrid(e.indices,n,t,i=null==i?!1:i,s=null==s?!1:s,r=null==r?!1:r)},Sn.createUVsGrid=function(e,n,t,i,s){e.uvs=En.createUVsGrid(e.uvs,n,t,i=null==i?0:i,s=null==s?0:s)},function(){}),An=((x["ceramic.MeshUtils"]=En).__name__="ceramic.MeshUtils",En._createVerticesGrid=function(e,n,t,i,s,r,l,a,h,c){var o=s/t,u=r/i,_=0,d=0;if(0<h&&null==c)if(0==l&&0==a)for(var b=0,p=i+1;b<p;)for(var f=b++,O=0,g=t+1;O<g;)for(var m=(E=O++)*o,w=f*u,v=_++,y=(null!=n?n[v]=m:e[v]=m,_++),U=(null!=n?n[y]=w:e[y]=w,0),x=h;U<x;){U++;var C=_++;null!=n?n[C]=0:e[C]=0}else for(b=0,p=i+1;b<p;)for(var D=(f=b++)%2,O=0,g=t+1;O<g;)for(var w=f*u,v=_++,T=(m=(E=O++)*o)+l*D,y=(null!=n?n[v]=T:e[v]=T,_++),S=w+a*(E%2),U=(null!=n?n[y]=S:e[y]=S,0),x=h;U<x;){U++;C=_++;null!=n?n[C]=0:e[C]=0}else if(0==l&&0==a)for(b=0,p=i+1;b<p;)for(f=b++,O=0,g=t+1;O<g;)for(m=(E=O++)*o,w=f*u,v=_++,y=(null!=n?n[v]=m:e[v]=m,_++),U=(null!=n?n[y]=w:e[y]=w,0),x=h;U<x;){U++;C=_++,T=c[d++];null!=n?n[C]=T:e[C]=T}else for(b=0,p=i+1;b<p;)for(D=(f=b++)%2,O=0,g=t+1;O<g;)for(var E,w=f*u,v=_++,T=(m=(E=O++)*o)+l*D,y=(null!=n?n[v]=T:e[v]=T,_++),S=w+a*(E%2),U=(null!=n?n[y]=S:e[y]=S,0),x=h;U<x;){U++;var C=_++,A=c[d++];null!=n?n[C]=A:e[C]=A}},En.createVerticesGrid=function(e,n,t,i,s,r,l,a,h){null==l&&(l=0),null==r&&(r=0);var c=(n+1)*(t+1);if((e=null==e?[]:e).length>c*(2+(a=null==a?0:a))){var o=c*(2+a);if(e.length!=o)if(e.length>o)e.splice(o,e.length-o);else for(var u=e;u.length<o;)u.push(null)}var _=i/n,d=s/t,b=0,p=0;if(0<a&&null==h)if(0==r&&0==l)for(var f=0,O=t+1;f<O;)for(var g=f++,m=0,w=n+1;m<w;)for(var v=(A=m++)*_,y=g*d,U=(e[b++]=v,b++),x=(e[U]=y,0),C=a;x<C;){x++;e[E=b++]=0}else for(f=0,O=t+1;f<O;)for(var D=(g=f++)%2,m=0,w=n+1;m<w;)for(var y=g*d,T=(v=(A=m++)*_)+r*D,U=(e[b++]=T,b++),S=y+l*(A%2),x=(e[U]=S,0),C=a;x<C;){x++;e[E=b++]=0}else if(0==r&&0==l)for(f=0,O=t+1;f<O;)for(g=f++,m=0,w=n+1;m<w;)for(v=(A=m++)*_,y=g*d,U=(e[b++]=v,b++),x=(e[U]=y,0),C=a;x<C;){x++;var E=b++,T=h[p++];e[E]=T}else for(f=0,O=t+1;f<O;)for(D=(g=f++)%2,m=0,w=n+1;m<w;)for(var A,y=g*d,T=(v=(A=m++)*_)+r*D,U=(e[b++]=T,b++),S=y+l*(A%2),x=(e[U]=S,0),C=a;x<C;){x++;var E=b++,M=h[p++];e[E]=M}return e},En.createVertices32Grid=function(e,n,t,i,s,r,l,a,h){null==a&&(a=0),null==l&&(l=0),null==r&&(r=0);null==e&&(e=new Float32Array((n+1)*(t+1)*(2+a)));var c=null,o=i/n,u=s/t,_=0,d=0;if(0<a&&null==h)if(0==r&&0==l)for(var b=0,p=t+1;b<p;)for(var f=b++,O=0,g=n+1;O<g;)for(var m=(E=O++)*o,w=f*u,v=_++,y=(null!=e?e[v]=m:c[v]=m,_++),U=(null!=e?e[y]=w:c[y]=w,0),x=a;U<x;){U++;var C=_++;null!=e?e[C]=0:c[C]=0}else for(b=0,p=t+1;b<p;)for(var D=(f=b++)%2,O=0,g=n+1;O<g;)for(var w=f*u,v=_++,T=(m=(E=O++)*o)+r*D,y=(null!=e?e[v]=T:c[v]=T,_++),S=w+l*(E%2),U=(null!=e?e[y]=S:c[y]=S,0),x=a;U<x;){U++;C=_++;null!=e?e[C]=0:c[C]=0}else if(0==r&&0==l)for(b=0,p=t+1;b<p;)for(f=b++,O=0,g=n+1;O<g;)for(m=(E=O++)*o,w=f*u,v=_++,y=(null!=e?e[v]=m:c[v]=m,_++),U=(null!=e?e[y]=w:c[y]=w,0),x=a;U<x;){U++;C=_++,T=h[d++];null!=e?e[C]=T:c[C]=T}else for(b=0,p=t+1;b<p;)for(D=(f=b++)%2,O=0,g=n+1;O<g;)for(var E,w=f*u,v=_++,T=(m=(E=O++)*o)+r*D,y=(null!=e?e[v]=T:c[v]=T,_++),S=w+l*(E%2),U=(null!=e?e[y]=S:c[y]=S,0),x=a;U<x;){U++;var C=_++,A=h[d++];null!=e?e[C]=A:c[C]=A}return e},En.createIndicesGrid=function(e,n,t,i,s,r){null==r&&(r=!1),null==s&&(s=!1),null==i&&(i=!1);s=n*t*2;if((e=null==e?[]:e).length>3*s){var l=3*s;if(e.length!=l)if(e.length>l)e.splice(l,e.length-l);else for(var a=e;a.length<l;)a.push(null)}for(var h=0,c=r?-1:1,o=0,u=t;o<u;)for(var _=o++,d=_%2==1?-1:1,b=0,p=n;b<p;){var f=b++,O=_*(n+1)+f,g=1+O,m=O+(n+1),w=m+1,v=c;i&&f%2==1&&(v*=-1),1==(v*=d)?(e[h++]=O,e[h++]=g,e[h++]=m,e[h++]=g,e[h++]=w,e[h++]=m):(e[h++]=O,e[h++]=w,e[h++]=m,e[h++]=O,e[h++]=g,e[h++]=w)}return e},En.createUVsGrid=function(e,n,t,i,s){null==s&&(s=0),null==i&&(i=0);var r=(n+1)*(t+1);if((e=null==e?[]:e).length>2*r){var l=2*r;if(e.length!=l)if(e.length>l)e.splice(l,e.length-l);else for(var a=e;a.length<l;)a.push(null)}for(var h=0,c=0,o=t+1;c<o;)for(var u=c++,_=0,d=n+1;_<d;){var b=_++,p=(u+s)/t;e[h++]=(b+i)/n,e[h++]=p}return e},function(e){switch(e){case".":case"..":return this.dir=e,void(this.file="")}var n=e.lastIndexOf("/"),t=e.lastIndexOf("\\"),t=(n<t?(this.dir=le.substr(e,0,t),e=le.substr(e,t+1,null),this.backslash=!0):t<n?(this.dir=le.substr(e,0,n),e=le.substr(e,n+1,null)):this.dir=null,e.lastIndexOf("."));-1!=t?(this.ext=le.substr(e,t+1,null),this.file=le.substr(e,0,t)):(this.ext=null,this.file=e)}),Mn=((x["ceramic.Path"]=An).__name__="ceramic.Path",An.withoutExtension=function(e){e=new An(e);return e.ext=null,e.toString()},An.withoutDirectory=function(e){e=new An(e);return e.dir=null,e.toString()},An.directory=function(e){e=new An(e);return null==e.dir?"":e.dir},An.extension=function(e){e=new An(e);return null==e.ext?"":e.ext},An.withExtension=function(e,n){e=new An(e);return e.ext=n,e.toString()},An.join=function(e){for(var n=[],t=0,i=e;t<i.length;){var s=i[t];++t,null!=s&&""!=s&&n.push(s)}if(0==(e=n).length)return"";for(var r=e[0],n=1,t=e.length;n<t;){var l=n++,r=An.addTrailingSlash(r);r+=e[l]}return An.normalize(r)},An.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var n=[],t=0,i=e.split("/");t<i.length;){var s=i[t];++t,".."==s&&0<n.length&&".."!=n[n.length-1]?n.pop():"."!=s&&n.push(s)}for(var r,l=n.join("/");-1!=(r=l.indexOf("//"));)l=l.substring(0,r)+l.substring(r+1);for(var a="",h=!1,c=!1,t=0,i=l.length;t<i;){var o=t++,u=l.charCodeAt(o);switch(u){case 47:h?(h=!1,c&&(a+="/",c=!1),a+=String.fromCodePoint(u)):c=!0;break;case 58:a+=":",h=!0;break;default:h=!1,c&&(a+="/",c=!1),a+=String.fromCodePoint(u)}}return a},An.addTrailingSlash=function(e){var n,t;return 0==e.length?"/":(n=e.lastIndexOf("/"))<(t=e.lastIndexOf("\\"))?t!=e.length-1?e+"\\":e:n!=e.length-1?e+"/":e},An.removeTrailingSlashes=function(e){e:for(;;){var n=le.cca(e,e.length-1);if(null==n)break;switch(n){case 47:case 92:e=le.substr(e,0,-1);break;default:break e}}return e},An.isAbsolute=function(e){return!!z.startsWith(e,"/")||":"==e.charAt(1)||!!z.startsWith(e,"\\\\")},An.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:An},function(n){this.id=n;var e=ae.app.backend.io.readString("persistent_"+n);if(null!=e)try{var t=new $t(e);this.internalData=t.unserialize()}catch(e){jt.lastError=e,ae.app.logger.warning("Failed to read persistent data with id "+n,{fileName:"../../../../ceramic/runtime/src/ceramic/PersistentData.hx",lineNumber:80,className:"ceramic.PersistentData",methodName:"new"})}null==this.internalData&&(this.internalData={})}),Rn=((x["ceramic.PersistentData"]=Mn).__name__="ceramic.PersistentData",Mn.prototype={get:function(e){return this.internalData[e]},set:function(e,n){this.internalData[e]=n},remove:function(e){P.deleteField(this.internalData,e)},clear:function(){for(var e=0,n=P.fields(this.internalData);e<n.length;){var t=n[e];++e,P.deleteField(this.internalData,t)}},exists:function(e){return Object.prototype.hasOwnProperty.call(this.internalData,e)},keys:function(){return P.fields(this.internalData)},save:function(){var e=new Qt,e=(e.serialize(this.internalData),e.toString());ae.app.backend.io.saveString("persistent_"+this.id,e)},__class__:Mn},(x["ceramic.Pixels"]=nb).__name__="ceramic.Pixels",nb.copy=function(e,n,t,i,s,r,l,a,h,c,o,u,_,d){null==d&&(d=!0),null==_&&(_=!0),null==u&&(u=!0),null==o&&(o=!0);for(var b=s+l,p=r+a,f=s,O=r,g=h,m=c;O<p;){for(var w=O*n,v=m*i;f<b;){var y=4*(w+f),U=4*(v+g);o&&(t[U]=e[y]),++y,++U,u&&(t[U]=e[y]),++y,++U,_&&(t[U]=e[y]),++y,++U,d&&(t[U]=e[y]),++f,++g}++O,++m,f=s,g=h}},nb.create=function(e,n,t){for(var i=new Uint8Array(e*n*4),s=0,r=e*n;s<r;){var l=4*s++;i[l]=t>>16&255,i[++l]=t>>8&255,i[++l]=255&t,i[++l]=t>>24&255}return i},nb.fromBytes=function(e){return new Uint8Array(e.b.bufferValue)},nb.get=function(e,n,t,i){var i=4*(i*n+t),n=e[i],t=e[1+i],s=e[2+i],r=0,e=e[3+i],i=(0|(((r&65535|(255<n?255:n<0?0:n)<<16)&16711935|(255<t?255:t<0?0:t)<<8)&16776960|(255<s?255:s<0?0:s)))-16777216;return i&16777215|(255<(e=null==e?255:e)?255:e<0?0:e)<<24},nb.set=function(e,n,t,i,s){i=4*(i*n+t);e[i]=s>>16&255,e[1+i]=s>>8&255,e[2+i]=255&s,e[3+i]=s>>24&255},nb.setRectangle=function(e,n,t,i,s,r,l){for(var a=0,h=s;a<h;)for(var c=a++,o=0,u=r;o<u;){var _=4*((i+o++)*n+(t+c));e[_]=l>>16&255,e[1+_]=l>>8&255,e[2+_]=255&l,e[3+_]=l>>24&255}},nb._pixelsToPng=function(e,n,t,i,s){ae.app.backend.textures.pixelsToPng(e,n,t,i,s)},nb.rgbaPixelsToRgbPixels=function(e,n,t,i){for(var s=e*n*3,r=(null==i?i=new Uint8Array(s):i.length!=s&&(ae.app.logger.warning("Not reusing outPixels because its length ("+i.length+") does not match the required one: "+s+". Creating a new buffer.",{fileName:"../../../../ceramic/runtime/src/ceramic/Pixels.hx",lineNumber:388,className:"ceramic.Pixels",methodName:"rgbaPixelsToRgbPixels"}),i=new Uint8Array(s)),0),l=e*n;r<l;){var a=r++,h=3*a,a=4*a;i[h]=t[a],++a,i[++h]=t[a],++a,i[++h]=t[a]}return i},nb.rgbPixelsToRgbaPixels=function(e,n,t,i,s){null==t&&(t=255);for(var r=e*n*4,l=(null==s?s=new Uint8Array(r):s.length!=r&&(ae.app.logger.warning("Not reusing outPixels because its length ("+s.length+") does not match the required one: "+r+". Creating a new buffer.",{fileName:"../../../../ceramic/runtime/src/ceramic/Pixels.hx",lineNumber:437,className:"ceramic.Pixels",methodName:"rgbPixelsToRgbaPixels"}),s=new Uint8Array(r)),0),a=e*n;l<a;){var h=l++,c=3*h,h=4*h;s[h]=i[c],++c,s[++h]=i[c],++c,s[++h]=i[c],s[++h]=t}return s},nb.mixPixelsBuffers=function(e,n,t){null==n&&(n=1);for(var i=e.length,s=e[0].length,r=(null==t&&(t=new Uint8Array(s)),0),l=[],a=1,h=0,c=Math.ceil(.5*i);h<c;)r+=l[h]=a,a*=n,++h;for(h=i-1,a=1;c<=h;)r+=l[h]=a,a*=n,--h;for(var o=0,u=s;o<u;){for(var h=o++,_=0,d=0,b=i;d<b;){var p=d++;_+=e[p][h]*l[p]}t[h]=Math.round(_/r)}return t},nb.flipY=function(e,n){for(var t=e.length/(4*n)|0,i=0,s=.5*t|0;i<s;)for(var r=i++,l=0,a=n;l<a;){var h,c=l++,o=e[h=4*(r*n+c)],u=e[1+h],_=e[2+h],d=e[3+h];e[h]=e[c=4*((t-1-r)*n+c)],e[1+h]=e[1+c],e[2+h]=e[2+c],e[3+h]=e[3+c],e[c]=o,e[1+c]=u,e[2+c]=_,e[3+c]=d}},nb.flipX=function(e,n){for(var t=.5*n|0,i=0,s=e.length/(4*n)|0;i<s;)for(var r=i++,l=0,a=t;l<a;){var h,c=l++,o=e[h=4*(r*n+c)],u=e[1+h],_=e[2+h],d=e[3+h];e[h]=e[c=4*(r*n+n-1-c)],e[1+h]=e[1+c],e[2+h]=e[2+c],e[3+h]=e[3+c],e[c]=o,e[1+c]=u,e[2+c]=_,e[3+c]=d}},function(){}),Pn=((x["ceramic.Platform"]=Rn).__name__="ceramic.Platform",Rn.postAppInit=function(){},Rn.readStringFromAsset=function(e){return null},Rn.readBytesFromAsset=function(e){return null},Rn.getAssetsPath=function(){return null},Rn.getRtti=function(e){return Oi.getRtti(e)},Rn.nodeRequire=function(e){return null},Rn.quit=function(){J.app.shutdown()},Rn.runCeramic=function(e,n){var t=Rn.getEnv("CERAMIC_CLI");null==t&&(t=Rn.isWindows()?"ceramic.exe":"ceramic"),ae.app.logger.debug("ceramic "+e.join(" "),{fileName:"../../../../ceramic/runtime/src/ceramic/Platform.hx",lineNumber:344,className:"ceramic.Platform",methodName:"runCeramic"}),Rn.exec(t,e,n)},Rn.getEnv=function(e){return null},Rn.isWindows=function(){return!1},Rn.exec=function(e,n,t){Rn.exec__execDidLogError||(Rn.exec__execDidLogError=!0,ae.app.logger.error("exec() is not supported on this platform!",{fileName:"../../../../ceramic/runtime/src/ceramic/Platform.hx",lineNumber:470,className:"ceramic.Platform",methodName:"exec"})),t(-1,null,null)},function(){}),Fn=((x["ceramic.PremultiplyAlpha"]=Pn).__name__="ceramic.PremultiplyAlpha",Pn.premultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],s=e[t+1],r=e[t+2],l=e[t+3]/255;e[t]=i*l|0,e[t+1]=s*l|0,e[t+2]=r*l|0,t+=4}},Pn.reversePremultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],s=e[t+1],r=e[t+2],l=e[t+3]/255;0<l&&(e[t]=i/l|0,e[t+1]=s/l|0,e[t+2]=r/l|0),t+=4}},function(e,n){null==n&&(n=-1),this.asset=null,this.wrapT=0,this.wrapS=0,this.filter=at.LINEAR,this.asRenderTexture=null,this.isRenderTexture=!1,this.index=Fn._nextIndex++,h.call(this),-1==n&&(n=ae.app.screen.get_texturesDensity()),this.backendItem=e,this.set_density(n)}),In=((x["ceramic.Texture"]=Fn).__name__="ceramic.Texture",Fn.fromPixels=function(e,n,t,i){null==i&&(i=1);e=ae.app.backend.textures.createTexture(Math.round(e*i),Math.round(n*i),t);return new Fn(e,i)},Fn.fromBytes=function(e,n,t,i){null==n&&(n=1),ae.app.backend.textures.loadFromBytes(e,C.imageTypeFromBytes(e),t,function(e){i(new Fn(e,n))})},Fn.__super__=h,Fn.prototype=$extend(h.prototype,{get_textureId:function(){return this.backendItem.textureId},get_nativeWidth:function(){return this.backendItem.width},get_nativeHeight:function(){return this.backendItem.height},get_nativeWidthActual:function(){return this.backendItem.widthActual},get_nativeHeightActual:function(){return this.backendItem.heightActual},set_density:function(e){return this.density!=e&&(this.density=e,this.width=this.backendItem.width/e,this.height=this.backendItem.height/e),e},set_filter:function(e){if(this.filter!=e){this.filter=e;ae.app.backend.textures;var n=this.backendItem;switch(e._hx_index){case 0:n.set_filterMin(9729),n.set_filterMag(9729);break;case 1:n.set_filterMin(9728),n.set_filterMag(9728)}}return e},set_wrapS:function(e){if(this.wrapS!=e){this.wrapS=e;ae.app.backend.textures;var n=this.backendItem;switch(e){case 0:n.set_wrapS(33071);break;case 1:n.set_wrapS(10497);break;case 2:n.set_wrapS(33648)}}return e},set_wrapT:function(e){if(this.wrapT!=e){this.wrapT=e;ae.app.backend.textures;var n=this.backendItem;switch(e){case 0:n.set_wrapT(33071);break;case 1:n.set_wrapT(10497);break;case 2:n.set_wrapT(33648)}}return e},setWrap:function(e,n){this.set_wrapS(e),null!=n&&this.set_wrapT(n)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),ae.app.backend.textures.destroyTexture(this.backendItem),this.backendItem=null)},fetchPixels:function(e){return ae.app.backend.textures.fetchTexturePixels(this.backendItem,e)},submitPixels:function(e){ae.app.backend.textures.submitTexturePixels(this.backendItem,e)},_toPng:function(e,n,t){ae.app.backend.textures.textureToPng(this.backendItem,n=null==n?!0:n,e,t)},toString:function(){var e;return null!=this.id?(e=this.id,"Texture("+(e=z.startsWith(e,"texture:")?le.substr(e,8,null):e)+" "+this.width+" "+this.height+" "+this.density+" #"+this.index+")"):"Texture("+this.width+" "+this.height+" "+this.density+" #"+this.index+")"},__class__:Fn,__properties__:$extend(h.prototype.__properties__,{set_wrapT:"set_wrapT",set_wrapS:"set_wrapS",set_filter:"set_filter",set_density:"set_density",get_nativeHeightActual:"get_nativeHeightActual",get_nativeWidthActual:"get_nativeWidthActual",get_nativeHeight:"get_nativeHeight",get_nativeWidth:"get_nativeWidth",get_textureId:"get_textureId"})}),function(e,t,i,s,r,l){null==l&&(l=0),null==r&&(r=!0),null==s&&(s=!0),null==i&&(i=-1),this._initialClearQuad=null,this._renderedOnce=!1,this._usedInRendering=!1,this.incomingEdges=0,this.priority=0,this.dependingTextures=null,this.antialiasing=0,this.stencil=!0,this.depth=!0,this.renderDirty=!1,this.clearOnRender=!0,this.autoRender=!0,-1==i&&(i=ae.app.screen.get_texturesDensity()),this.depth=s,this.stencil=r,this.antialiasing=l;var a=ae.app.backend.textures,e=Math.round(e*i),t=Math.round(t*i),h="render:"+a.nextRenderIndex++,c=J.app.runtime.webglVersion,o=new At,e=(o.id=h,o.width=e,o.height=t,o.depth=s,o.stencil=r,o.antialiasing=2<=c?l:0,o.init(),a.loadedTexturesRetainCount.h[h]=1,o);Fn.call(this,e,i),this.isRenderTexture=!0,this.asRenderTexture=this,ae.app.renderTextures.push(this),this._initialClearQuad=new n,(a=this._initialClearQuad).set_x(0),a.set_y(0),(a=this._initialClearQuad).set_width(0),a.set_height(0),(a=this._initialClearQuad).flags&=-17,this._initialClearQuad.set_renderTarget(this),this.renderDirty=!0}),kn=((x["ceramic.RenderTexture"]=In).__name__="ceramic.RenderTexture",In.__super__=Fn,In.prototype=$extend(Fn.prototype,{set__renderedOnce:function(e){return(this._renderedOnce=e)&&null!=this._initialClearQuad&&(this._initialClearQuad.destroy(),this._initialClearQuad=null),e},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fn.prototype.destroy.call(this),null!=this._initialClearQuad&&(this._initialClearQuad.destroy(),this._initialClearQuad=null),le.remove(ae.app.renderTextures,this))},stamp:function(e,n){this._stamp(e,n)},_stamp:function(n,t){var i=this,s=n.parent,r=n.renderTarget,l=n.visible;null!=s&&s.remove(n),n.set_renderTarget(this),n.set_visible(!0),ae.app.oncePreUpdate(this,function(e){i.renderDirty=!0,ae.app.onceFinishDraw(i,function(){n.set_visible(l),n.set_renderTarget(r),null!=s&&(s.add(n),s=null),r=n=null,t(),t=null})})},clear:function(e,t,i,s,r,l,a){var h;null==l&&(l=-1),null==r&&(r=-1),null==s&&(s=-1),null==i&&(i=-1),null==t&&(t=0),null==e&&(e=16777215),null==In._clearQuad&&(In._clearQuad=new n,In._clearQuad.set_active(!1),In._clearQuad.set_blending(4),(h=In._clearQuad).set_anchorX(0),h.set_anchorY(0)),In._clearQuad.color=e,In._clearQuad.set_alpha(t),In._clearQuad.set_depth(-1),-1!=i&&-1!=s&&-1!=r&&-1!=l?((h=In._clearQuad).set_width(r),h.set_height(l),(h=In._clearQuad).set_x(i),h.set_y(s)):(h=In._clearQuad,e=this.height,h.set_width(this.width),h.set_height(e),(h=In._clearQuad).set_x(0),h.set_y(0)),this.stamp(In._clearQuad,a)},dependsOnTexture:function(e){return null!=this.dependingTextures&&0<(null!=(e=this.dependingTextures.intMap.h[0|e.index])?e:0)},dependsOnTextureCount:function(e){return null!=this.dependingTextures&&null!=(e=this.dependingTextures.intMap.h[0|e.index])?e:0},incrementDependingTextureCount:function(e){null==this.dependingTextures&&(this.dependingTextures=new ke);var n=this.dependingTextures.intMap.h[0|e.index];this.dependingTextures.set(e.index,(null!=n?n:0)+1)},resetDependingTextureCounts:function(){null!=this.dependingTextures&&this.dependingTextures.clear()},toString:function(){var e;return null!=this.id?(e=this.id,"RenderTexture("+(e=z.startsWith(e,"texture:")?le.substr(e,8,null):e)+" "+this.width+" "+this.height+" "+this.density+" #"+this.index+"/"+this.priority+")"):"RenderTexture("+this.width+" "+this.height+" "+this.density+" #"+this.index+"/"+this.priority+")"},__class__:In,__properties__:$extend(Fn.prototype.__properties__,{set__renderedOnce:"set__renderedOnce"})}),function(){this.zPerRenderTarget=new bn,this.usedRenderTarget=null,this.activeShaderCanBatchMultipleTextures=!1,this.maxUsableTexturesInBatch=-1,this.usedTextures=0,this.usedTextureIndexes=[],this.z=0,this.stateDirty=!0,this.mesh=null,this.quad=null,this.defaultWhiteTexture=null,this.defaultTexturedShader=null,this.texHeightActual=0,this.texWidthActual=0,this.texHeight=0,this.texWidth=0,this.activeTextureSlot=0,this.lastClipIsRegular=!1,this.lastClip=null,this.lastComputedBlending=1,this.lastRenderTarget=null,this.lastShader=null,this.lastTextureId=null,this.lastTexture=null,this.stencilClip=!1,this.customFloatAttributesSize=0,this.activeShader=null,this.drawCalls=0,h.call(this)}),Bn=((x["ceramic.Renderer"]=kn).__name__="ceramic.Renderer",kn.__super__=h,kn.prototype=$extend(h.prototype,{render:function(e,n){var t=ae.app.backend.draw;for(this.backendTextures=ae.app.backend.textures,this.backendShaders=ae.app.backend.shaders,this.defaultTexturedShader=ae.app.defaultTexturedShader.backendItem,this.defaultWhiteTexture=ae.app.defaultWhiteTexture,this.maxUsableTexturesInBatch=0|Math.min(this.backendTextures.maxTexturesByBatch(),this.backendShaders.maxIfStatementsByFragmentShader());this.usedTextureIndexes.length<this.maxUsableTexturesInBatch;)this.usedTextureIndexes.push(0);this.usedRenderTarget=null,this.zPerRenderTarget.clear(),this.drawCalls=0,$._activeTextureSlot=0;(a=$._batcher)._buffersIndex=-1,a.prepareNextBuffers();for(var i=ae.app.defaultWhiteTexture.backendItem,s=(It.defaultTextureId=i.textureId,this.quad=null,this.mesh=null,this.lastTexture=null,this.lastTextureId=null,this.lastShader=null,this.lastRenderTarget=null,this.lastComputedBlending=1,this.lastClip=null,this.usedTextures=0,this.texWidth=0,this.texHeight=0,this.texWidthActual=0,this.texHeightActual=0,this.stencilClip=!1,this.z=0,this.stateDirty=!0,ae.app.defaultTexturedShader.backendItem,ae.app.renderTextures),r=0,l=s.length;r<l;)(_=s[r++])._usedInRendering=!1,_.autoRender&&(_.renderDirty=!0);var a=$._batcher,a=(ee.gl.enableVertexAttribArray(0),ee.gl.enableVertexAttribArray(1),ee.gl.enableVertexAttribArray(2),this.usedTextures=this.maxUsableTexturesInBatch,this.unbindUsedTextures(t),$._activeTextureSlot=0,$._batcher);if(0!=(a=J._graphics)._activeTextureSlot){for(a._activeTextureSlot=0;a._boundTexture2D.length<=a._activeTextureSlot;)a._boundTexture2D.push(null);ee.gl.activeTexture(33984)}this.activeTextureSlot=0,t.setRenderTarget(null,!0);var i=ae.app.settings.get_background(),a=$._batcher,a=(J._graphics.clear((i>>16&255)/255,(i>>8&255)/255,(255&i)/255,1,!1),null!=$._currentRenderTarget&&($._didUpdateCurrentRenderTarget=!0),$._batcher),a=J._graphics,a=(ee.gl.enable(3042),this.activeShader=null,this.lastShader=null,this.useShader(t,null),$._batcher),a=J._graphics,a=(ee.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,$._batcher);if(ee.gl.stencilFunc(519,1,255),ee.gl.stencilMask(255),ee.gl.colorMask(!0,!0,!0,!0),ee.gl.disable(2960),null!=n){for(r=0,l=n.length;r<l;){var h,c=n[r++],o=c.asQuad,u=c.asMesh;c.computedVisible&&(null==c.computedRenderTarget||c.computedRenderTarget.renderDirty)&&((h=c.computedClip)!=this.lastClip&&(this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0,null!=this.lastClip&&(this.lastClipIsRegular?(a=$._batcher,ee.gl.disable(3089)):(this.lastRenderTarget=this.lastClip.computedRenderTarget,this.useRenderTarget(t,this.lastRenderTarget),$._batcher,ee.gl.stencilFunc(519,1,255),ee.gl.stencilMask(255),ee.gl.colorMask(!0,!0,!0,!0),ee.gl.disable(2960))),this.lastClip=h,null!=this.lastClip)&&(this.lastRenderTarget=this.lastClip.computedRenderTarget,this.useRenderTarget(t,this.lastRenderTarget),null!=this.lastClip.asQuad&&this.lastClip.asQuad.isRegular()?(this.lastClipIsRegular=!0,this.scissorWithQuad(t,this.lastClip.asQuad)):(this.lastClipIsRegular=!1,$._drawingInStencilBuffer=!0,$._batcher,ee.gl.stencilMask(255),ee.gl.clearStencil(255),ee.gl.clear(1024),ee.gl.enable(2960),ee.gl.stencilOp(7680,7680,7681),ee.gl.stencilFunc(519,1,255),ee.gl.stencilMask(255),ee.gl.colorMask(!1,!1,!1,!1),null!=this.lastClip.asQuad?(o=this.lastClip.asQuad,this.stencilClip=!0,this.drawQuad(t,o),this.stencilClip=!1,o=c.asQuad):null!=this.lastClip.asMesh&&(u=this.lastClip.asMesh,this.stencilClip=!0,this.drawMesh(t,u),this.stencilClip=!1,u=c.asMesh),this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0,$._drawingInStencilBuffer=!1,$._batcher,ee.gl.stencilFunc(514,1,255),ee.gl.stencilMask(0),ee.gl.colorMask(!0,!0,!0,!0),ee.gl.enable(2960))),null!=o&&16!=(16&o.flags)?this.drawQuad(t,o):null!=u&&this.drawMesh(t,u))}this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0}for(var _,r=0,l=(s=ae.app.renderTextures).length;r<l;)(_=s[r++]).renderDirty=!1;$._activeTextureSlot=0;a=$._batcher;if(0!=(a=J._graphics)._activeTextureSlot){for(a._activeTextureSlot=0;a._boundTexture2D.length<=a._activeTextureSlot;)a._boundTexture2D.push(null);ee.gl.activeTexture(33984)}this.activeTextureSlot=0,t.setRenderTarget(null,!0);a=$._batcher,a=J._graphics,ee.gl.enable(3042),this.activeShader=null,this.lastShader=null,this.useShader(t,null),this.lastClipIsRegular&&(a=$._batcher,ee.gl.disable(3089)),a=$._batcher,a=J._graphics;ee.gl.blendFuncSeparate(1,771,1,771)},drawQuad:function(e,n){var t=this;this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),U=$._batcher,U=J._graphics,ee.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(h=null,this.stateDirty||(a=this.computeQuadBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||a!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n._texture!=this.lastTexture&&(null!=n._texture&&null!=this.lastTexture?n._texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n._texture)?h=n._texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n._texture)?h=null!=n._texture?n._texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(t.flush(e),t.unbindUsedTextures(e),t.lastTexture=n._texture,t.useFirstTextureInBatch(e,t.lastTexture),n.computedRenderTarget!=t.lastRenderTarget&&(t.lastRenderTarget=n.computedRenderTarget,t.useRenderTarget(e,t.lastRenderTarget),null!=t.lastClip)&&t.lastClipIsRegular&&t.scissorWithQuad(e,t.lastClip.asQuad),t.lastShader=n.shader,t.useShader(e,null!=t.lastShader?t.lastShader.backendItem:null),t.lastComputedBlending=t.computeQuadBlending(n),t.useBlending(e,t.lastComputedBlending),t.stateDirty=!1):null!=h&&this.useTextureInSameBatch(e,h));((U=$._batcher)._numPos+4>U._maxVerts||16384<U._numIndices+6)&&(t.flush(e),t.unbindUsedTextures(e),t.lastTexture=n._texture,t.useFirstTextureInBatch(e,t.lastTexture),n.computedRenderTarget!=t.lastRenderTarget&&(t.lastRenderTarget=n.computedRenderTarget,t.useRenderTarget(e,t.lastRenderTarget),null!=t.lastClip)&&t.lastClipIsRegular&&t.scissorWithQuad(e,t.lastClip.asQuad),t.lastShader=n.shader,t.useShader(e,null!=t.lastShader?t.lastShader.backendItem:null),t.lastComputedBlending=t.computeQuadBlending(n),t.useBlending(e,t.lastComputedBlending),t.stateDirty=!1);var i,s,r,l,a=n.get_width(),h=n.get_height(),e=n.matA,c=n.matB,o=n.matC,u=n.matD,_=n.matTX,d=n.matTY,b=this.z,p=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1;if(0==this.customFloatAttributesSize)-1!=p?(f=$._batcher._numPos,g=d+c*a+u*h,(U=$._batcher)._posList[U._posIndex]=O=_+e*a+o*h,U._posList[U._posIndex+1]=g,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4,U._numPos++,(U=$._batcher)._posList[U._posIndex]=_+o*h,U._posList[U._posIndex+1]=d+u*h,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4,U._numPos++,(U=$._batcher)._posList[U._posIndex]=_,U._posList[U._posIndex+1]=d,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4,U._numPos++,(U=$._batcher)._posList[U._posIndex]=_+e*a,U._posList[U._posIndex+1]=d+c*a,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4):(f=$._batcher._numPos,g=d+c*a+u*h,(U=$._batcher)._posList[U._posIndex]=O=_+e*a+o*h,U._posList[U._posIndex+1]=g,U._posList[U._posIndex+2]=b,U._posIndex+=3,U._numPos++,(U=$._batcher)._posList[U._posIndex]=_+o*h,U._posList[U._posIndex+1]=d+u*h,U._posList[U._posIndex+2]=b,U._posIndex+=3,U._numPos++,(U=$._batcher)._posList[U._posIndex]=_,U._posList[U._posIndex+1]=d,U._posList[U._posIndex+2]=b,U._posIndex+=3,U._numPos++,(U=$._batcher)._posList[U._posIndex]=_+e*a,U._posList[U._posIndex+1]=d+c*a,U._posList[U._posIndex+2]=b,U._posIndex+=3),U._numPos++;else{if(-1!=p){for(var f=$._batcher._numPos,O=_+e*a+o*h,g=d+c*a+u*h,m=((U=$._batcher)._posList[U._posIndex]=O,U._posList[U._posIndex+1]=g,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){var v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}(U=$._batcher)._posIndex+=U._floatAttributesSize;for(m=((U=$._batcher)._posList[U._posIndex]=_+o*h,U._posList[U._posIndex+1]=d+u*h,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}(U=$._batcher)._posIndex+=U._floatAttributesSize;for(m=((U=$._batcher)._posList[U._posIndex]=_,U._posList[U._posIndex+1]=d,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}(U=$._batcher)._posIndex+=U._floatAttributesSize;for(m=((U=$._batcher)._posList[U._posIndex]=_+e*a,U._posList[U._posIndex+1]=d+c*a,U._posList[U._posIndex+2]=b,U._posList[U._posIndex+3]=p,U._posIndex+=4,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}}else{for(f=$._batcher._numPos,O=_+e*a+o*h,g=d+c*a+u*h,m=((U=$._batcher)._posList[U._posIndex]=O,U._posList[U._posIndex+1]=g,U._posList[U._posIndex+2]=b,U._posIndex+=3,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}(U=$._batcher)._posIndex+=U._floatAttributesSize;for(m=((U=$._batcher)._posList[U._posIndex]=_+o*h,U._posList[U._posIndex+1]=d+u*h,U._posList[U._posIndex+2]=b,U._posIndex+=3,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}(U=$._batcher)._posIndex+=U._floatAttributesSize;for(m=((U=$._batcher)._posList[U._posIndex]=_,U._posList[U._posIndex+1]=d,U._posList[U._posIndex+2]=b,U._posIndex+=3,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}(U=$._batcher)._posIndex+=U._floatAttributesSize;for(m=((U=$._batcher)._posList[U._posIndex]=_+e*a,U._posList[U._posIndex+1]=d+c*a,U._posList[U._posIndex+2]=b,U._posIndex+=3,U._numPos++,0),w=t.customFloatAttributesSize;m<w;){v=m++;(U=$._batcher)._posList[U._posIndex+v]=0}}(U=$._batcher)._posIndex+=U._floatAttributesSize}(U=$._batcher)._indiceList[U._numIndices]=f,U._numIndices++,(U=$._batcher)._indiceList[U._numIndices]=f+1,U._numIndices++,(U=$._batcher)._indiceList[U._numIndices]=f+2,U._numIndices++,(U=$._batcher)._indiceList[U._numIndices]=f,U._numIndices++,(U=$._batcher)._indiceList[U._numIndices]=f+2,U._numIndices++,(U=$._batcher)._indiceList[U._numIndices]=f+3,U._numIndices++,this.stencilClip?(i=l=1,r=s=0):(r=3==this.lastComputedBlending?(l=n.computedAlpha,i=(n.color>>16&255)/255,s=(n.color>>8&255)/255,(255&n.color)/255):(l=n.computedAlpha,i=(n.color>>16&255)/255*l,s=(n.color>>8&255)/255*l,(255&n.color)/255*l),2==n.blending&&2!=this.lastComputedBlending&&(l=0));for(var y=0;y<4;)(U=$._batcher)._colorList[U._colorIndex]=i,U._colorList[U._colorIndex+1]=s,U._colorList[U._colorIndex+2]=r,U._colorList[U._colorIndex+3]=l,U._colorIndex+=4,U._numColors++,++y;var U,p=0,O=0,g=0,o=0;null!=n._texture?(u=this.texWidthActual,h=this.texHeightActual,_=n._texture.density,p=n.frameX*_/u,O=n.frameY*_/h,32==(32&n.flags)?(g=n.frameHeight*_/u,o=n.frameWidth*_/h,(U=$._batcher)._uvList[U._uvIndex]=p+g,U._uvList[U._uvIndex+1]=O,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=p+g,U._uvList[U._uvIndex+1]=O+o,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=p,U._uvList[U._uvIndex+1]=O+o,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=p):(g=n.frameWidth*_/u,o=n.frameHeight*_/h,(U=$._batcher)._uvList[U._uvIndex]=p+g,U._uvList[U._uvIndex+1]=O+o,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=p,U._uvList[U._uvIndex+1]=O+o,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=p,U._uvList[U._uvIndex+1]=O,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=p+g),U._uvList[U._uvIndex+1]=O):((U=$._batcher)._uvList[U._uvIndex]=0,U._uvList[U._uvIndex+1]=0,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=0,U._uvList[U._uvIndex+1]=0,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=0,U._uvList[U._uvIndex+1]=0,U._uvIndex+=2,U._numUVs++,(U=$._batcher)._uvList[U._uvIndex]=0,U._uvList[U._uvIndex+1]=0),U._uvIndex+=2,U._numUVs++,this.z=b+b*b*1e-5+1e-5},drawMesh:function(e,n){null!=n.vertices32?null!=n.floatColors?this.drawMeshWithVertices32AndFloatColors(e,n):this.drawMeshWithVertices32(e,n):null!=n.floatColors?this.drawMeshWithVerticesAndFloatColors(e,n):this.drawMeshWithVertices(e,n)},drawMeshWithVertices32:function(e,n){var t,i,s=n.vertices32,r=n.colors,l=this,a=((null!=s?s:null).length,this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),T=$._batcher,T=J._graphics,ee.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(t=null,this.stateDirty||(i=this.computeMeshBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||i!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n.texture!=this.lastTexture&&(null!=n.texture&&null!=this.lastTexture?n.texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n.texture)?t=n.texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n.texture)?t=null!=n.texture?n.texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1):null!=t&&this.useTextureInSameBatch(e,t)),n.matA),h=n.matB,c=n.matC,o=n.matD,u=n.matTX,_=n.matTY,d=this.z,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,p=this.stencilClip||0==n.colorMapping,k=!this.stencilClip&&1==n.colorMapping,f=n.uvs,O=n.indices,g=O.length,m=this.customFloatAttributesSize,B=n.customFloatAttributesSize,N=0,L=null!=n.texture&&n.texture.isRenderTexture,w=g,W=(((T=$._batcher)._numPos+g>T._maxVerts||16384<T._numIndices+g)&&(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,g>(T=$._batcher)._maxVerts-T._numPos||g>16384-$._batcher._numIndices)&&(T=$._batcher,w=3*((w=0|Math.min(T._maxVerts-T._numPos,16384-$._batcher._numIndices))/3|0)),n.texture),G=0,K=0;for(null!=W&&(G=this.texWidth/this.texWidthActual,K=this.texHeight/this.texHeightActual);;){for(var v,y=0,U=0,x=0,C=0,D=(p&&(l.stencilClip?(U=y=1,C=x=0):(C=3==l.lastComputedBlending?(v=r[0],y=n.computedAlpha*((v>>24&255)/255),U=(v>>16&255)/255,x=(v>>8&255)/255,(255&v)/255):(U=((v=r[0])>>16&255)/255*(y=n.computedAlpha*((v>>24&255)/255)),x=(v>>8&255)/255*y,(255&v)/255*y),2==n.blending&&2!=l.lastComputedBlending&&(y=0))),N),H=$._batcher._numPos;D<w;){var T,S,E=O[D],A=2*E,M=E*(2+B),R=M++,R=(null!=s?s:null)[R],P=M++,P=(null!=s?s:null)[P],P=((T=$._batcher)._indiceList[T._numIndices]=H,T._numIndices++,++H,-1!=b?((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posList[S._posIndex+3]=b,S._posIndex+=4,S._numPos++):((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posIndex+=3,S._numPos++),p||(R=k?r[D]:r[E],C=L||3==l.lastComputedBlending?(y=n.computedAlpha*((R>>24&255)/255),U=(R>>16&255)/255,x=(R>>8&255)/255,(255&R)/255):(U=(R>>16&255)/255*(y=n.computedAlpha*((R>>24&255)/255)),x=(R>>8&255)/255*y,(255&R)/255*y),2==n.blending&&2!=l.lastComputedBlending&&(y=0)),$._batcher);if(P._colorList[P._colorIndex]=U,P._colorList[P._colorIndex+1]=x,P._colorList[P._colorIndex+2]=C,P._colorList[P._colorIndex+3]=y,P._colorIndex+=4,P._numColors++,null!=W?(E=f[A]*G,R=f[1+A]*K,(P=$._batcher)._uvList[P._uvIndex]=E,P._uvList[P._uvIndex+1]=R,P._uvIndex+=2,P._numUVs++):((A=$._batcher)._uvList[A._uvIndex]=0,A._uvList[A._uvIndex+1]=0,A._uvIndex+=2,A._numUVs++),0!=m){for(var V=0,z=m;V<z;){var Y,F,I=V++;I<B?(Y=M++,(F=$._batcher)._posList[F._posIndex+I]=(null!=s?s:null)[Y]):(F=$._batcher)._posList[F._posIndex+I]=0}E=$._batcher;E._posIndex+=E._floatAttributesSize}++D}if(w==g)break;l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=l.activeShaderCanBatchMultipleTextures?l.activeTextureSlot:-1;var N=w,X=$._batcher;g<(w=3*((w=N+(0|Math.min(X._maxVerts-X._numPos,16384-$._batcher._numIndices)))/3|0))&&(w=g)}this.z=d+d*d*1e-5+1e-5},drawMeshWithVertices32AndFloatColors:function(e,n){var t,i,s=n.vertices32,r=n.floatColors,l=this,a=((null!=s?s:null).length,this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),T=$._batcher,T=J._graphics,ee.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(t=null,this.stateDirty||(i=this.computeMeshBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||i!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n.texture!=this.lastTexture&&(null!=n.texture&&null!=this.lastTexture?n.texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n.texture)?t=n.texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n.texture)?t=null!=n.texture?n.texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1):null!=t&&this.useTextureInSameBatch(e,t)),n.matA),h=n.matB,c=n.matC,o=n.matD,u=n.matTX,_=n.matTY,d=this.z,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,p=this.stencilClip||0==n.colorMapping,f=!this.stencilClip&&1==n.colorMapping,O=n.uvs,g=n.indices,m=g.length,k=this.customFloatAttributesSize,B=n.customFloatAttributesSize,N=0,L=null!=n.texture&&n.texture.isRenderTexture,w=m,W=(((T=$._batcher)._numPos+m>T._maxVerts||16384<T._numIndices+m)&&(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,m>(T=$._batcher)._maxVerts-T._numPos||m>16384-$._batcher._numIndices)&&(T=$._batcher,w=3*((w=0|Math.min(T._maxVerts-T._numPos,16384-$._batcher._numIndices))/3|0)),n.texture),G=0,K=0;for(null!=W&&(G=this.texWidth/this.texWidthActual,K=this.texHeight/this.texHeightActual);;){for(var v,y=0,U=0,x=0,C=0,D=(p&&(l.stencilClip?(U=y=1,C=x=0):(C=null!=r?(y=n.computedAlpha*r[3],U=r[0],x=r[1],r[2]):3==l.lastComputedBlending?(v=null[0],y=n.computedAlpha*((v>>24&255)/255),U=(v>>16&255)/255,x=(v>>8&255)/255,(255&v)/255):(U=((v=null[0])>>16&255)/255*(y=n.computedAlpha*((v>>24&255)/255)),x=(v>>8&255)/255*y,(255&v)/255*y),2==n.blending&&2!=l.lastComputedBlending&&(y=0))),N),H=$._batcher._numPos;D<w;){var T,S,E=g[D],A=2*E,M=E*(2+B),R=M++,R=(null!=s?s:null)[R],P=M++,P=(null!=s?s:null)[P],R=((T=$._batcher)._indiceList[T._numIndices]=H,T._numIndices++,++H,-1!=b?((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posList[S._posIndex+3]=b,S._posIndex+=4,S._numPos++):((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posIndex+=3,S._numPos++),p||(C=null!=r?(R=4*(f?D:E),L||3==l.lastComputedBlending?(y=n.computedAlpha*r[3+R],U=r[R],x=r[1+R],r[2+R]):(y=n.computedAlpha*r[3+R],U=r[R]*y,x=r[1+R]*y,r[2+R]*y)):(P=f?null[D]:null[E],L||3==l.lastComputedBlending?(y=n.computedAlpha*((P>>24&255)/255),U=(P>>16&255)/255,x=(P>>8&255)/255,(255&P)/255):(U=(P>>16&255)/255*(y=n.computedAlpha*((P>>24&255)/255)),x=(P>>8&255)/255*y,(255&P)/255*y)),2==n.blending&&2!=l.lastComputedBlending&&(y=0)),$._batcher);if(R._colorList[R._colorIndex]=U,R._colorList[R._colorIndex+1]=x,R._colorList[R._colorIndex+2]=C,R._colorList[R._colorIndex+3]=y,R._colorIndex+=4,R._numColors++,null!=W?(E=O[A]*G,P=O[1+A]*K,(R=$._batcher)._uvList[R._uvIndex]=E,R._uvList[R._uvIndex+1]=P,R._uvIndex+=2,R._numUVs++):((A=$._batcher)._uvList[A._uvIndex]=0,A._uvList[A._uvIndex+1]=0,A._uvIndex+=2,A._numUVs++),0!=k){for(var V=0,z=k;V<z;){var Y,F,I=V++;I<B?(Y=M++,(F=$._batcher)._posList[F._posIndex+I]=(null!=s?s:null)[Y]):(F=$._batcher)._posList[F._posIndex+I]=0}E=$._batcher;E._posIndex+=E._floatAttributesSize}++D}if(w==m)break;l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=l.activeShaderCanBatchMultipleTextures?l.activeTextureSlot:-1;var N=w,X=$._batcher;m<(w=3*((w=N+(0|Math.min(X._maxVerts-X._numPos,16384-$._batcher._numIndices)))/3|0))&&(w=m)}this.z=d+d*d*1e-5+1e-5},drawMeshWithVertices:function(e,n){var t,i,s=n.vertices,r=n.colors,l=this,a=(s.length,this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),T=$._batcher,T=J._graphics,ee.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(t=null,this.stateDirty||(i=this.computeMeshBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||i!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n.texture!=this.lastTexture&&(null!=n.texture&&null!=this.lastTexture?n.texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n.texture)?t=n.texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n.texture)?t=null!=n.texture?n.texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1):null!=t&&this.useTextureInSameBatch(e,t)),n.matA),h=n.matB,c=n.matC,o=n.matD,u=n.matTX,_=n.matTY,d=this.z,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,p=this.stencilClip||0==n.colorMapping,k=!this.stencilClip&&1==n.colorMapping,f=n.uvs,O=n.indices,g=O.length,m=this.customFloatAttributesSize,B=n.customFloatAttributesSize,N=0,L=null!=n.texture&&n.texture.isRenderTexture,w=g,W=(((T=$._batcher)._numPos+g>T._maxVerts||16384<T._numIndices+g)&&(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,g>(T=$._batcher)._maxVerts-T._numPos||g>16384-$._batcher._numIndices)&&(T=$._batcher,w=3*((w=0|Math.min(T._maxVerts-T._numPos,16384-$._batcher._numIndices))/3|0)),n.texture),G=0,K=0;for(null!=W&&(G=this.texWidth/this.texWidthActual,K=this.texHeight/this.texHeightActual);;){for(var v,y=0,U=0,x=0,C=0,D=(p&&(l.stencilClip?(U=y=1,C=x=0):(C=3==l.lastComputedBlending?(v=r[0],y=n.computedAlpha*((v>>24&255)/255),U=(v>>16&255)/255,x=(v>>8&255)/255,(255&v)/255):(U=((v=r[0])>>16&255)/255*(y=n.computedAlpha*((v>>24&255)/255)),x=(v>>8&255)/255*y,(255&v)/255*y),2==n.blending&&2!=l.lastComputedBlending&&(y=0))),N),H=$._batcher._numPos;D<w;){var T,S,E=O[D],A=2*E,M=E*(2+B),R=M++,R=s[R],P=M++,P=s[P],P=((T=$._batcher)._indiceList[T._numIndices]=H,T._numIndices++,++H,-1!=b?((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posList[S._posIndex+3]=b,S._posIndex+=4,S._numPos++):((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posIndex+=3,S._numPos++),p||(R=k?r[D]:r[E],C=L||3==l.lastComputedBlending?(y=n.computedAlpha*((R>>24&255)/255),U=(R>>16&255)/255,x=(R>>8&255)/255,(255&R)/255):(U=(R>>16&255)/255*(y=n.computedAlpha*((R>>24&255)/255)),x=(R>>8&255)/255*y,(255&R)/255*y),2==n.blending&&2!=l.lastComputedBlending&&(y=0)),$._batcher);if(P._colorList[P._colorIndex]=U,P._colorList[P._colorIndex+1]=x,P._colorList[P._colorIndex+2]=C,P._colorList[P._colorIndex+3]=y,P._colorIndex+=4,P._numColors++,null!=W?(E=f[A]*G,R=f[1+A]*K,(P=$._batcher)._uvList[P._uvIndex]=E,P._uvList[P._uvIndex+1]=R,P._uvIndex+=2,P._numUVs++):((A=$._batcher)._uvList[A._uvIndex]=0,A._uvList[A._uvIndex+1]=0,A._uvIndex+=2,A._numUVs++),0!=m){for(var V=0,z=m;V<z;){var Y,F,I=V++;I<B?(Y=M++,(F=$._batcher)._posList[F._posIndex+I]=s[Y]):(F=$._batcher)._posList[F._posIndex+I]=0}E=$._batcher;E._posIndex+=E._floatAttributesSize}++D}if(w==g)break;l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=l.activeShaderCanBatchMultipleTextures?l.activeTextureSlot:-1;var N=w,X=$._batcher;g<(w=3*((w=N+(0|Math.min(X._maxVerts-X._numPos,16384-$._batcher._numIndices)))/3|0))&&(w=g)}this.z=d+d*d*1e-5+1e-5},drawMeshWithVerticesAndFloatColors:function(e,n){var t,i,s=n.vertices,r=n.floatColors,l=this,a=(s.length,this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),T=$._batcher,T=J._graphics,ee.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(t=null,this.stateDirty||(i=this.computeMeshBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||i!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n.texture!=this.lastTexture&&(null!=n.texture&&null!=this.lastTexture?n.texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n.texture)?t=n.texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n.texture)?t=null!=n.texture?n.texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1):null!=t&&this.useTextureInSameBatch(e,t)),n.matA),h=n.matB,c=n.matC,o=n.matD,u=n.matTX,_=n.matTY,d=this.z,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,p=this.stencilClip||0==n.colorMapping,f=!this.stencilClip&&1==n.colorMapping,O=n.uvs,g=n.indices,m=g.length,k=this.customFloatAttributesSize,B=n.customFloatAttributesSize,N=0,L=null!=n.texture&&n.texture.isRenderTexture,w=m,W=(((T=$._batcher)._numPos+m>T._maxVerts||16384<T._numIndices+m)&&(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,m>(T=$._batcher)._maxVerts-T._numPos||m>16384-$._batcher._numIndices)&&(T=$._batcher,w=3*((w=0|Math.min(T._maxVerts-T._numPos,16384-$._batcher._numIndices))/3|0)),n.texture),G=0,K=0;for(null!=W&&(G=this.texWidth/this.texWidthActual,K=this.texHeight/this.texHeightActual);;){for(var v,y=0,U=0,x=0,C=0,D=(p&&(l.stencilClip?(U=y=1,C=x=0):(C=null!=r?(y=n.computedAlpha*r[3],U=r[0],x=r[1],r[2]):3==l.lastComputedBlending?(v=null[0],y=n.computedAlpha*((v>>24&255)/255),U=(v>>16&255)/255,x=(v>>8&255)/255,(255&v)/255):(U=((v=null[0])>>16&255)/255*(y=n.computedAlpha*((v>>24&255)/255)),x=(v>>8&255)/255*y,(255&v)/255*y),2==n.blending&&2!=l.lastComputedBlending&&(y=0))),N),H=$._batcher._numPos;D<w;){var T,S,E=g[D],A=2*E,M=E*(2+B),R=M++,R=s[R],P=M++,P=s[P],R=((T=$._batcher)._indiceList[T._numIndices]=H,T._numIndices++,++H,-1!=b?((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posList[S._posIndex+3]=b,S._posIndex+=4,S._numPos++):((S=$._batcher)._posList[S._posIndex]=u+a*R+c*P,S._posList[S._posIndex+1]=_+h*R+o*P,S._posList[S._posIndex+2]=d,S._posIndex+=3,S._numPos++),p||(C=null!=r?(R=4*(f?D:E),L||3==l.lastComputedBlending?(y=n.computedAlpha*r[3+R],U=r[R],x=r[1+R],r[2+R]):(y=n.computedAlpha*r[3+R],U=r[R]*y,x=r[1+R]*y,r[2+R]*y)):(P=f?null[D]:null[E],L||3==l.lastComputedBlending?(y=n.computedAlpha*((P>>24&255)/255),U=(P>>16&255)/255,x=(P>>8&255)/255,(255&P)/255):(U=(P>>16&255)/255*(y=n.computedAlpha*((P>>24&255)/255)),x=(P>>8&255)/255*y,(255&P)/255*y)),2==n.blending&&2!=l.lastComputedBlending&&(y=0)),$._batcher);if(R._colorList[R._colorIndex]=U,R._colorList[R._colorIndex+1]=x,R._colorList[R._colorIndex+2]=C,R._colorList[R._colorIndex+3]=y,R._colorIndex+=4,R._numColors++,null!=W?(E=O[A]*G,P=O[1+A]*K,(R=$._batcher)._uvList[R._uvIndex]=E,R._uvList[R._uvIndex+1]=P,R._uvIndex+=2,R._numUVs++):((A=$._batcher)._uvList[A._uvIndex]=0,A._uvList[A._uvIndex+1]=0,A._uvIndex+=2,A._numUVs++),0!=k){for(var V=0,z=k;V<z;){var Y,F,I=V++;I<B?(Y=M++,(F=$._batcher)._posList[F._posIndex+I]=s[Y]):(F=$._batcher)._posList[F._posIndex+I]=0}E=$._batcher;E._posIndex+=E._floatAttributesSize}++D}if(w==m)break;l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,b=l.activeShaderCanBatchMultipleTextures?l.activeTextureSlot:-1;var N=w,X=$._batcher;m<(w=3*((w=N+(0|Math.min(X._maxVerts-X._numPos,16384-$._batcher._numIndices)))/3|0))&&(w=m)}this.z=d+d*d*1e-5+1e-5},_drawMesh:function(e,n,t,i,s,r){var l,a,h=this,c=((null!=i?i:t).length,this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),T=$._batcher,T=J._graphics,ee.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(l=null,this.stateDirty||(a=this.computeMeshBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||a!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n.texture!=this.lastTexture&&(null!=n.texture&&null!=this.lastTexture?n.texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n.texture)?l=n.texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n.texture)?l=null!=n.texture?n.texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(h.flush(e),h.unbindUsedTextures(e),h.lastTexture=n.texture,h.useFirstTextureInBatch(e,h.lastTexture),n.computedRenderTarget!=h.lastRenderTarget&&(h.lastRenderTarget=n.computedRenderTarget,h.useRenderTarget(e,h.lastRenderTarget),null!=h.lastClip)&&h.lastClipIsRegular&&h.scissorWithQuad(e,h.lastClip.asQuad),h.lastShader=n.shader,h.useShader(e,null!=h.lastShader?h.lastShader.backendItem:null),h.lastComputedBlending=h.computeMeshBlending(n),h.useBlending(e,h.lastComputedBlending),h.stateDirty=!1):null!=l&&this.useTextureInSameBatch(e,l)),n.matA),o=n.matB,u=n.matC,_=n.matD,d=n.matTX,b=n.matTY,p=this.z,f=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,O=this.stencilClip||0==n.colorMapping,g=!this.stencilClip&&1==n.colorMapping,k=n.uvs,B=n.indices,m=B.length,N=this.customFloatAttributesSize,L=n.customFloatAttributesSize,W=0,G=null!=n.texture&&n.texture.isRenderTexture,w=m,K=(((T=$._batcher)._numPos+m>T._maxVerts||16384<T._numIndices+m)&&(h.flush(e),h.unbindUsedTextures(e),h.lastTexture=n.texture,h.useFirstTextureInBatch(e,h.lastTexture),n.computedRenderTarget!=h.lastRenderTarget&&(h.lastRenderTarget=n.computedRenderTarget,h.useRenderTarget(e,h.lastRenderTarget),null!=h.lastClip)&&h.lastClipIsRegular&&h.scissorWithQuad(e,h.lastClip.asQuad),h.lastShader=n.shader,h.useShader(e,null!=h.lastShader?h.lastShader.backendItem:null),h.lastComputedBlending=h.computeMeshBlending(n),h.useBlending(e,h.lastComputedBlending),h.stateDirty=!1,f=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,m>(T=$._batcher)._maxVerts-T._numPos||m>16384-$._batcher._numIndices)&&(T=$._batcher,w=3*((w=0|Math.min(T._maxVerts-T._numPos,16384-$._batcher._numIndices))/3|0)),n.texture),H=0,V=0;for(null!=K&&(H=this.texWidth/this.texWidthActual,V=this.texHeight/this.texHeightActual);;){for(var v,y=0,U=0,x=0,C=0,D=(O&&(h.stencilClip?(U=y=1,C=x=0):(C=null!=r?(y=n.computedAlpha*r[3],U=r[0],x=r[1],r[2]):3==h.lastComputedBlending?(v=s[0],y=n.computedAlpha*((v>>24&255)/255),U=(v>>16&255)/255,x=(v>>8&255)/255,(255&v)/255):(U=((v=s[0])>>16&255)/255*(y=n.computedAlpha*((v>>24&255)/255)),x=(v>>8&255)/255*y,(255&v)/255*y),2==n.blending&&2!=h.lastComputedBlending&&(y=0))),W),z=$._batcher._numPos;D<w;){var T,S,E=B[D],A=2*E,M=E*(2+L),R=M++,R=(null!=i?i:t)[R],P=M++,P=(null!=i?i:t)[P],R=((T=$._batcher)._indiceList[T._numIndices]=z,T._numIndices++,++z,-1!=f?((S=$._batcher)._posList[S._posIndex]=d+c*R+u*P,S._posList[S._posIndex+1]=b+o*R+_*P,S._posList[S._posIndex+2]=p,S._posList[S._posIndex+3]=f,S._posIndex+=4,S._numPos++):((S=$._batcher)._posList[S._posIndex]=d+c*R+u*P,S._posList[S._posIndex+1]=b+o*R+_*P,S._posList[S._posIndex+2]=p,S._posIndex+=3,S._numPos++),O||(C=null!=r?(R=4*(g?D:E),G||3==h.lastComputedBlending?(y=n.computedAlpha*r[3+R],U=r[R],x=r[1+R],r[2+R]):(y=n.computedAlpha*r[3+R],U=r[R]*y,x=r[1+R]*y,r[2+R]*y)):(P=g?s[D]:s[E],G||3==h.lastComputedBlending?(y=n.computedAlpha*((P>>24&255)/255),U=(P>>16&255)/255,x=(P>>8&255)/255,(255&P)/255):(U=(P>>16&255)/255*(y=n.computedAlpha*((P>>24&255)/255)),x=(P>>8&255)/255*y,(255&P)/255*y)),2==n.blending&&2!=h.lastComputedBlending&&(y=0)),$._batcher);if(R._colorList[R._colorIndex]=U,R._colorList[R._colorIndex+1]=x,R._colorList[R._colorIndex+2]=C,R._colorList[R._colorIndex+3]=y,R._colorIndex+=4,R._numColors++,null!=K?(E=k[A]*H,P=k[1+A]*V,(R=$._batcher)._uvList[R._uvIndex]=E,R._uvList[R._uvIndex+1]=P,R._uvIndex+=2,R._numUVs++):((A=$._batcher)._uvList[A._uvIndex]=0,A._uvList[A._uvIndex+1]=0,A._uvIndex+=2,A._numUVs++),0!=N){for(var Y=0,X=N;Y<X;){var j,F,I=Y++;I<L?(j=M++,(F=$._batcher)._posList[F._posIndex+I]=(null!=i?i:t)[j]):(F=$._batcher)._posList[F._posIndex+I]=0}E=$._batcher;E._posIndex+=E._floatAttributesSize}++D}if(w==m)break;h.flush(e),h.unbindUsedTextures(e),h.lastTexture=n.texture,h.useFirstTextureInBatch(e,h.lastTexture),n.computedRenderTarget!=h.lastRenderTarget&&(h.lastRenderTarget=n.computedRenderTarget,h.useRenderTarget(e,h.lastRenderTarget),null!=h.lastClip)&&h.lastClipIsRegular&&h.scissorWithQuad(e,h.lastClip.asQuad),h.lastShader=n.shader,h.useShader(e,null!=h.lastShader?h.lastShader.backendItem:null),h.lastComputedBlending=h.computeMeshBlending(n),h.useBlending(e,h.lastComputedBlending),h.stateDirty=!1,f=h.activeShaderCanBatchMultipleTextures?h.activeTextureSlot:-1;var W=w,Q=$._batcher;m<(w=3*((w=W+(0|Math.min(Q._maxVerts-Q._numPos,16384-$._batcher._numIndices)))/3|0))&&(w=m)}this.z=p+p*p*1e-5+1e-5},incrementZ:function(e){return e+e*e*1e-5+1e-5},flush:function(e){return!($._batcher._numPos<=0||($._batcher.flush(),null!=$._currentRenderTarget&&($._didUpdateCurrentRenderTarget=!0),this.drawCalls++,0))},computeQuadBlending:function(e){var n=e.blending;return n=0!=n&&2!=n?n:null!=e.computedRenderTarget?5:1},computeMeshBlending:function(e){var n=e.blending;return n=0!=n&&2!=n?n:null!=e.computedRenderTarget?5:1},isSameShader:function(e,n){return(null!=e?e.backendItem:this.defaultTexturedShader)==(null!=n?n.backendItem:this.defaultTexturedShader)},useShader:function(e,n){null==n&&(n=this.defaultTexturedShader),this.activeShader=n,$._activeShader=n;var t=$._batcher,t=(J._graphics.projectionMatrix=$._projectionMatrix,$._batcher),i=(J._graphics.modelViewMatrix=$._modelViewMatrix,ae.app.backend.shaders),s=0,r=$._activeShader.customAttributes;if(null!=r)for(var l=0,a=r.length;l<a;)s+=r[l++].size;var h=s,i=i.canBatchWithMultipleTextures($._activeShader);$._batcher._customAttributes=null!=$._activeShader?$._activeShader.customAttributes:null;(t=$._batcher)._floatAttributesSize=h,t._batchMultiTexture=i,t._vertexSize=3+t._floatAttributesSize+(t._batchMultiTexture?1:0),t._posSize=t._vertexSize,t._vertexSize<4&&(t._vertexSize=4),t._maxVerts=0|Math.floor(65536/t._vertexSize),0==t._numPos&&(t._numIndices=0,t._numPos=0,t._numUVs=0,t._numColors=0,t._posIndex=0,t._uvIndex=0,t._colorIndex=0),n.activate(),this.activeShaderCanBatchMultipleTextures=this.backendShaders.canBatchWithMultipleTextures(n),t=this.backendShaders,s=0;if(null!=(r=n.customAttributes))for(l=0,a=r.length;l<a;)s+=r[l++].size;this.customFloatAttributesSize=s},useBlending:function(e,n){switch(n){case 0:throw Y.thrown("Cannot apply AUTO blending. Needs to be computed to an actual blending function.");case 1:$._batcher,J._graphics;ee.gl.blendFuncSeparate(1,771,1,771);break;case 2:$._batcher,J._graphics;ee.gl.blendFuncSeparate(1,1,1,1);break;case 3:$._batcher,J._graphics;ee.gl.blendFuncSeparate(770,771,1,771);break;case 4:$._batcher,J._graphics;ee.gl.blendFuncSeparate(1,770,1,770);break;case 5:$._batcher,J._graphics;ee.gl.blendFuncSeparate(1,771,773,1);break;case 6:$._batcher,J._graphics;ee.gl.blendFuncSeparate(770,771,773,1);break;case 7:$._batcher,J._graphics;ee.gl.blendFuncSeparate(1,0,1,0)}},scissorWithQuad:function(e,n){e.enableScissor(n.matTX,n.matTY,n.matA*n.get_width(),n.matD*n.get_height())},isNotRenderedRenderTexture:function(e){e=e.asRenderTexture;return!(null==e||e._renderedOnce||!e.renderDirty||e._usedInRendering)},useRenderTarget:function(e,n){var t,i;this.usedRenderTarget!=n&&(i=null!=this.usedRenderTarget?this.usedRenderTarget.index:0,t=null!=n?n.index:0,this.zPerRenderTarget.set(i,this.z),i=this.zPerRenderTarget.intMap.h[0|t],this.z=null!=i?i:0),null!=(this.usedRenderTarget=n)?(n._usedInRendering=!0,n.set__renderedOnce(!0),e.setRenderTarget(n)):e.setRenderTarget(null)},useFirstTextureInBatch:function(e,n){null==n&&(n=this.defaultWhiteTexture),this.usedTextures=1;var t=n.backendItem.index,i=(this.usedTextureIndexes[0]=t,$._activeTextureSlot=0,$._batcher);if(0!=(i=J._graphics)._activeTextureSlot){for(i._activeTextureSlot=0;i._boundTexture2D.length<=i._activeTextureSlot;)i._boundTexture2D.push(null);ee.gl.activeTexture(33984)}this.activeTextureSlot=0,this.useTexture(e,n,!1)},useTexture:function(e,n,t){var i,s;null!=n?(this.lastTexture=n,this.lastTextureId=n.backendItem.textureId,this.texWidth=n.backendItem.width,this.texHeight=n.backendItem.height,this.texWidthActual=n.backendItem.widthActual,this.texHeightActual=n.backendItem.heightActual,t||(i=$._batcher,s=n.backendItem.textureId,(i=J._graphics)._boundTexture2D[i._activeTextureSlot]!=s&&(i._boundTexture2D[i._activeTextureSlot]=s,ee.gl.bindTexture(3553,s)))):(this.lastTexture=null,this.lastTextureId=null,i=$._batcher,i=J._graphics,s=It.defaultTextureId,i._boundTexture2D[i._activeTextureSlot]!=s&&(i._boundTexture2D[i._activeTextureSlot]=s,ee.gl.bindTexture(3553,s)))},canUseTextureInSameBatch:function(e,n){var t=!1;if(null==n&&(n=this.defaultWhiteTexture),0<this.usedTextures)if(this.activeShaderCanBatchMultipleTextures){for(var i=n.backendItem.index,s=0,r=this.usedTextures;s<r;){var l=s++;if(i==this.usedTextureIndexes[l]){t=!0;break}}!t&&this.usedTextures<this.maxUsableTexturesInBatch&&(t=!0)}else this.lastTexture==n&&(t=!0);return t},useTextureInSameBatch:function(e,n){var t=!1;if(null==n&&(n=this.defaultWhiteTexture),this.activeShaderCanBatchMultipleTextures){for(var i=n.backendItem.index,s=0,r=this.usedTextures;s<r;){var l=s++;if(i==this.usedTextureIndexes[l]){$._activeTextureSlot=l;var a=$._batcher,h=J._graphics;if(h._activeTextureSlot!=l){for(h._activeTextureSlot=l;h._boundTexture2D.length<=h._activeTextureSlot;)h._boundTexture2D.push(null);ee.gl.activeTexture(33984+l)}this.activeTextureSlot=l,this.useTexture(e,n,!0),t=!0;break}}if(!t&&this.usedTextures<this.maxUsableTexturesInBatch){l=this.usedTextures++,a=(this.usedTextureIndexes[l]=i,$._activeTextureSlot=l,$._batcher);if((a=J._graphics)._activeTextureSlot!=l){for(a._activeTextureSlot=l;a._boundTexture2D.length<=a._activeTextureSlot;)a._boundTexture2D.push(null);ee.gl.activeTexture(33984+l)}this.activeTextureSlot=l,this.useTexture(e,n,!1)}}},unbindUsedTextures:function(e){for(;0<this.usedTextures;){this.usedTextures--;var n=this.usedTextures,t=($._activeTextureSlot=n,$._batcher),i=J._graphics;if(i._activeTextureSlot!=n){for(i._activeTextureSlot=n;i._boundTexture2D.length<=i._activeTextureSlot;)i._boundTexture2D.push(null);ee.gl.activeTexture(33984+n)}$._batcher;var n=J._graphics,s=It.defaultTextureId;n._boundTexture2D[n._activeTextureSlot]!=s&&(n._boundTexture2D[n._activeTextureSlot]=s,ee.gl.bindTexture(3553,s))}$._activeTextureSlot=0;t=$._batcher;if(0!=(t=J._graphics)._activeTextureSlot){for(t._activeTextureSlot=0;t._boundTexture2D.length<=t._activeTextureSlot;)t._boundTexture2D.push(null);ee.gl.activeTexture(33984)}this.activeTextureSlot=0,this.useTexture(e,null,!1)},__class__:kn}),function(e){this._poolIndex=-1,this.set_length(e)}),Nn=((x["ceramic.ReusableArray"]=Bn).__name__="ceramic.ReusableArray",Bn.prototype={set_length:function(e){if(null==this.vector)return this.vector=new Array(e),this.length=e;if(e!=this.length){if(e>this.vector.length){for(var n=new Array(e),t=0,i=this.length;t<i;)n[s=t++]=this.vector[s],this.vector[s]=null;this.vector=n;for(t=this.length,i=e;t<i;){var s=t++;this.vector[s]=null}}else for(t=e,i=this.length;t<i;){s=t++;this.vector[s]=null}this.length=e}return e},get:function(e){return this.vector[e]},set:function(e,n){this.vector[e]=n},__class__:Bn,__properties__:{set_length:"set_length"}},function(){}),Ln=((x["ceramic.Runner"]=Nn).__name__="ceramic.Runner",Nn.currentIsMainThread=function(){return!0},Nn.init=function(){},Nn.tick=function(){},Nn.isEmulatingBackgroundWithMain=function(){return!0},Nn.runInMain=function(e){ae.app._onceImmediate(e)},Nn.runInBackground=function(e){ae.app._onceImmediate(e)},function(e,n){this.path=null,this.cachedLists=null,this.cachedNames=new te,this.assetDirsByBaseName=null,this.assetsByBaseName=null,this.allAssetDirs=null,this.allAssets=null,this.pendingTransformedDirCallbacks=null,this.didQueryTransformedDir=0,this.transformedDir=null,this.allAssets=e,this.path=n,this.initData()}),d=((x["ceramic.RuntimeAssets"]=Ln).__name__="ceramic.RuntimeAssets",Ln.fromPath=function(e){return null},Ln.toAssetConstName=function(e){for(var n="",t=e.length,i=0,s=!1;i<t;){var r,l=e.charAt(i),s="/"==l?(n+="__",!1):"."!=l&&Ln.isAsciiChar(l)?(r=l.toUpperCase(),l=l==r,s&&l&&(n+="_",s=!1),n+=null==r?"null":""+r,!l):(n+="_",!1);++i}var a=n;return a=z.endsWith(a,"_")?le.substr(a,0,a.length-1):a},Ln.isAsciiChar=function(e){e=le.cca(e,0);return 48<=e&&e<=57||65<=e&&e<=90||97<=e&&e<=122},Ln.prototype={requestTransformedDir:function(l){var a=this;2==this.didQueryTransformedDir?ae.app._onceImmediate(function(){l(a.transformedDir)}):1==this.didQueryTransformedDir?(null==this.pendingTransformedDirCallbacks&&(this.pendingTransformedDirCallbacks=[]),this.pendingTransformedDirCallbacks.push(l)):(this.didQueryTransformedDir=1,Rn.runCeramic(["tmp","dir"],function(e,n,t){if(0==e?0<(n=z.trim(n)).length&&Je.exists(n)&&(a.transformedDir=n):ae.app.logger.error("Failed to resolve tmp dir: "+e+" / "+t,{fileName:"../../../../ceramic/runtime/src/ceramic/RuntimeAssets.hx",lineNumber:86,className:"ceramic.RuntimeAssets",methodName:"requestTransformedDir"}),a.didQueryTransformedDir=2,l(a.transformedDir),null!=a.pendingTransformedDirCallbacks)for(var i=a.pendingTransformedDirCallbacks,s=(a.pendingTransformedDirCallbacks=null,0);s<i.length;){var r=i[s];++s,r(a.transformedDir)}}))},reset:function(e,n){this.allAssets=e,this.path=n,this.allAssetDirs=null,this.assetsByBaseName=null,this.assetDirsByBaseName=null,this.cachedNames=new te,this.cachedLists=null,this.initData()},getNames:function(e,n,t){null==t&&(t=!1);var i=e+"|"+(null!=n?n.join(","):"")+(t?"|1":"|0"),s=this.cachedNames.h[i];if(null!=s)return s;var r=[];switch(null==n&&(n=[]),e){case"atlas":o=["atlas"];break;case"database":o=["csv"];break;case"font":o=["fnt","ttf","otf"];break;case"fragments":o=["fragments"];break;case"image":o=["png","jpg","jpeg"];break;case"shader":o=["frag","vert"];break;case"sound":ae.app.backend.info;null!=fe._soundExtensions||(fe._soundExtensions=[],l=new Audio,a=null!=re.navigator?re.navigator.userAgent:"",c=fe.RE_OPERA.match(a)&&parseInt(fe.RE_OPERA.matched(0).split("/")[1],10)<33,h=-1!=a.indexOf("Safari")&&-1==a.indexOf("Chrome"),a=fe.RE_SAFARI_VERSION.match(a),h&&a&&parseInt(fe.RE_SAFARI_VERSION.matched(1),10),null!=(h=l.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=h&&""!=h&&fe._soundExtensions.push("ogg"),a=l.canPlayType("audio/mpeg;"),h=l.canPlayType("audio/mp3;"),!c&&(null!=a&&"no"!=a&&""!=a||null!=h&&"no"!=h&&""!=h)&&fe._soundExtensions.push("mp3"),c=l.canPlayType("audio/x-flac;"),a=l.canPlayType("audio/flac;"),(null!=c&&"no"!=c&&""!=c||null!=a&&"no"!=a&&""!=a)&&fe._soundExtensions.push("flac"),h=l.canPlayType('audio/wav; codecs="1"'),c=l.canPlayType("audio/wav;"),(null!=h&&"no"!=h&&""!=h||null!=c&&"no"!=c&&""!=c)&&fe._soundExtensions.push("wav"));var l,a,h,c,o=[].concat(fe._soundExtensions);break;case"text":o=["txt","json","fnt","atlas"];break;default:o=[]}if(0!=(n=n.concat(o)).length){for(var u=Object.create(null),_=t?this.allAssetDirs:this.allAssets,d=0;d<n.length;)for(var b=n[d],p=(++d,0);p<_.length;){var f,O=_[p],g=(++p,O.toLowerCase()),m=g.lastIndexOf("."),w=null;-1!=m&&(g=le.substr(g,m+1,null))==b&&(-1==(f=le.substr(O,0,m).lastIndexOf("@"))&&(f=m),O=le.substr(O,0,Math.min(f,m)),null==(w=Ln.toAssetConstName(O))||Object.prototype.hasOwnProperty.call(u,w)||null==g||(u[w]=O))}for(var v=t?this.assetDirsByBaseName:this.assetsByBaseName,y=Object.keys(u),U=y.length,x=0;x<U;){u[w=y[x++]];for(var C=[],D=v.h[u[w]],d=0;d<D.length;)for(var T=D[d],p=(++d,0);p<n.length;){b=n[p];if(++p,z.endsWith(T,"."+b)){C.push(T);break}}var S={name:u[w],constName:w,paths:C};r.push(S)}this.cachedNames.h[i]=r}return r},getLists:function(){if(null!=this.cachedLists)return this.cachedLists;for(var e={all:[],allDirs:[],allByName:new te,allDirsByName:new te},n=0,t=this.allAssets;n<t.length;){var i=t[n];++n,e.all.push(i)}for(n=0,t=this.allAssetDirs;n<t.length;){i=t[n];++n,e.allDirs.push(i)}for(var s=this.assetsByBaseName.h,r=Object.keys(s),l=r.length,a=0;a<l;){var h=r[a++],c=[].concat(this.assetsByBaseName.h[h]);e.allByName.h[h]=c}s=this.assetDirsByBaseName.h;for(l=(r=Object.keys(s)).length,a=0;a<l;){h=r[a++],c=[].concat(this.assetDirsByBaseName.h[h]);e.allDirsByName.h[h]=c}return this.cachedLists=e},getEncodableLists:function(){for(var e=this.getLists(),n={},t=e.allByName.h,i=Object.keys(t),s=i.length,r=0;r<s;)n[l=i[r++]]=e.allByName.h[l];for(var l,a={},s=(t=e.allDirsByName.h,(i=Object.keys(t)).length),r=0;r<s;)a[l=i[r++]]=e.allDirsByName.h[l];return{all:e.all,allDirs:e.allDirs,allByName:n,allDirsByName:a}},initData:function(){for(var e=Object.create(null),n=0,t=this.allAssets;n<t.length;){var i=t[n];++n,e[i]=!0}for(var s=Object.create(null),n=(this.allAssetDirs=[],0),t=this.allAssets;n<t.length;){var i=t[n],r=(++n,i.lastIndexOf("/"));if(-1!=r)for(var l=le.substr(i,0,r);!Object.prototype.hasOwnProperty.call(s,l)&&(this.allAssetDirs.push(l),s[l]=!0,-1!=(r=l.lastIndexOf("/")));)l=le.substr(l,0,r)}if(null==this.assetsByBaseName){this.assetsByBaseName=new te;for(n=0,t=this.allAssets;n<t.length;){var a=t[n],h=(++n,a.lastIndexOf(".")),c=(-1==(o=le.substr(a,0,h).lastIndexOf("@"))&&(o=h),le.substr(a,0,Math.min(o,h)));Object.prototype.hasOwnProperty.call(this.assetsByBaseName.h,c)||(this.assetsByBaseName.h[c]=[]),this.assetsByBaseName.h[c].push(a)}}if(null==this.assetDirsByBaseName){this.assetDirsByBaseName=new te;for(n=0,t=this.allAssetDirs;n<t.length;){var o,a=t[n],h=(++n,a.lastIndexOf(".")),c=(-1==(o=le.substr(a,0,h).lastIndexOf("@"))&&(o=h),le.substr(a,0,Math.min(o,h)));Object.prototype.hasOwnProperty.call(this.assetDirsByBaseName.h,c)||(this.assetDirsByBaseName.h[c]=[]),this.assetDirsByBaseName.h[c].push(a)}}},__class__:Ln},{}),Wn=(d.$name=function(e){var n=null;return null!=(n=0<=e&&e<d.scanCodeNames.length?d.scanCodeNames[e]:n)?n:""},d.toString=function(e){return"ScanCode("+e+" "+d.$name(e)+")"},{}),Gn=(Wn.toString=function(e){switch(e){case 0:return"NONE";case 1:return"PRELOAD";case 2:return"LOAD";case 3:return"CREATE";case 4:return"FADE_IN";case 5:return"READY";case 6:return"FADE_OUT";case 7:return"DISABLED";default:return"_"}},(x["ceramic.System"]=Bb).__name__="ceramic.System",Bb.__super__=h,Bb.prototype=$extend(h.prototype,{emitBeginEarlyUpdate:function(e){var n=0;if(null!=this.__cbOnBeginEarlyUpdate&&(n+=this.__cbOnBeginEarlyUpdate.length),null!=this.__cbOnceBeginEarlyUpdate&&(n+=this.__cbOnceBeginEarlyUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnBeginEarlyUpdate)for(var r=0,l=this.__cbOnBeginEarlyUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnBeginEarlyUpdate[a],++s):--n}if(null!=this.__cbOnceBeginEarlyUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceBeginEarlyUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceBeginEarlyUpdate[a],this.__cbOnceBeginEarlyUpdate[a]=null,o=this.__cbOnceOwnerUnbindBeginEarlyUpdate[a],(this.__cbOnceOwnerUnbindBeginEarlyUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindBeginEarlyUpdate[a]),c.push(this.__cbOnceBeginEarlyUpdate[a]))}this.__cbOnceOwnerUnbindBeginEarlyUpdate=h,this.__cbOnceBeginEarlyUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onBeginEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginEarlyUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginEarlyUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBeginEarlyUpdate&&(this.__cbOnOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnOwnerUnbindBeginEarlyUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBeginEarlyUpdate&&(this.__cbOnOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnOwnerUnbindBeginEarlyUpdate.push(null);null==this.__cbOnBeginEarlyUpdate&&(this.__cbOnBeginEarlyUpdate=[]),this.__cbOnBeginEarlyUpdate.push(t)},onceBeginEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginEarlyUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginEarlyUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBeginEarlyUpdate&&(this.__cbOnceOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnceOwnerUnbindBeginEarlyUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBeginEarlyUpdate&&(this.__cbOnceOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnceOwnerUnbindBeginEarlyUpdate.push(null);null==this.__cbOnceBeginEarlyUpdate&&(this.__cbOnceBeginEarlyUpdate=[]),this.__cbOnceBeginEarlyUpdate.push(t)},offBeginEarlyUpdate:function(e){if(null!=e){var n;null!=this.__cbOnBeginEarlyUpdate&&-1!=(n=this.__cbOnBeginEarlyUpdate.indexOf(e))&&(this.__cbOnBeginEarlyUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBeginEarlyUpdate[n])&&r(),this.__cbOnOwnerUnbindBeginEarlyUpdate.splice(n,1)),null!=this.__cbOnceBeginEarlyUpdate&&-1!=(n=this.__cbOnceBeginEarlyUpdate.indexOf(e))&&(this.__cbOnceBeginEarlyUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBeginEarlyUpdate[n])&&r(),this.__cbOnceOwnerUnbindBeginEarlyUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEarlyUpdate){for(var t=0,i=this.__cbOnOwnerUnbindBeginEarlyUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBeginEarlyUpdate[s])&&r()}this.__cbOnOwnerUnbindBeginEarlyUpdate=null}if(null!=this.__cbOnceOwnerUnbindBeginEarlyUpdate){for(t=0,i=this.__cbOnceOwnerUnbindBeginEarlyUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBeginEarlyUpdate[s])&&r()}this.__cbOnceOwnerUnbindBeginEarlyUpdate=null}this.__cbOnBeginEarlyUpdate=null,this.__cbOnceBeginEarlyUpdate=null}},listensBeginEarlyUpdate:function(){return null!=this.__cbOnBeginEarlyUpdate&&0<this.__cbOnBeginEarlyUpdate.length||null!=this.__cbOnceBeginEarlyUpdate&&0<this.__cbOnceBeginEarlyUpdate.length},emitEndEarlyUpdate:function(e){var n=0;if(null!=this.__cbOnEndEarlyUpdate&&(n+=this.__cbOnEndEarlyUpdate.length),null!=this.__cbOnceEndEarlyUpdate&&(n+=this.__cbOnceEndEarlyUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnEndEarlyUpdate)for(var r=0,l=this.__cbOnEndEarlyUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnEndEarlyUpdate[a],++s):--n}if(null!=this.__cbOnceEndEarlyUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceEndEarlyUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceEndEarlyUpdate[a],this.__cbOnceEndEarlyUpdate[a]=null,o=this.__cbOnceOwnerUnbindEndEarlyUpdate[a],(this.__cbOnceOwnerUnbindEndEarlyUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindEndEarlyUpdate[a]),c.push(this.__cbOnceEndEarlyUpdate[a]))}this.__cbOnceOwnerUnbindEndEarlyUpdate=h,this.__cbOnceEndEarlyUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onEndEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event endEarlyUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offEndEarlyUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindEndEarlyUpdate&&(this.__cbOnOwnerUnbindEndEarlyUpdate=[]),this.__cbOnOwnerUnbindEndEarlyUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindEndEarlyUpdate&&(this.__cbOnOwnerUnbindEndEarlyUpdate=[]),this.__cbOnOwnerUnbindEndEarlyUpdate.push(null);null==this.__cbOnEndEarlyUpdate&&(this.__cbOnEndEarlyUpdate=[]),this.__cbOnEndEarlyUpdate.push(t)},onceEndEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event endEarlyUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offEndEarlyUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindEndEarlyUpdate&&(this.__cbOnceOwnerUnbindEndEarlyUpdate=[]),this.__cbOnceOwnerUnbindEndEarlyUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindEndEarlyUpdate&&(this.__cbOnceOwnerUnbindEndEarlyUpdate=[]),this.__cbOnceOwnerUnbindEndEarlyUpdate.push(null);null==this.__cbOnceEndEarlyUpdate&&(this.__cbOnceEndEarlyUpdate=[]),this.__cbOnceEndEarlyUpdate.push(t)},offEndEarlyUpdate:function(e){if(null!=e){var n;null!=this.__cbOnEndEarlyUpdate&&-1!=(n=this.__cbOnEndEarlyUpdate.indexOf(e))&&(this.__cbOnEndEarlyUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindEndEarlyUpdate[n])&&r(),this.__cbOnOwnerUnbindEndEarlyUpdate.splice(n,1)),null!=this.__cbOnceEndEarlyUpdate&&-1!=(n=this.__cbOnceEndEarlyUpdate.indexOf(e))&&(this.__cbOnceEndEarlyUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindEndEarlyUpdate[n])&&r(),this.__cbOnceOwnerUnbindEndEarlyUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEndEarlyUpdate){for(var t=0,i=this.__cbOnOwnerUnbindEndEarlyUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindEndEarlyUpdate[s])&&r()}this.__cbOnOwnerUnbindEndEarlyUpdate=null}if(null!=this.__cbOnceOwnerUnbindEndEarlyUpdate){for(t=0,i=this.__cbOnceOwnerUnbindEndEarlyUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindEndEarlyUpdate[s])&&r()}this.__cbOnceOwnerUnbindEndEarlyUpdate=null}this.__cbOnEndEarlyUpdate=null,this.__cbOnceEndEarlyUpdate=null}},listensEndEarlyUpdate:function(){return null!=this.__cbOnEndEarlyUpdate&&0<this.__cbOnEndEarlyUpdate.length||null!=this.__cbOnceEndEarlyUpdate&&0<this.__cbOnceEndEarlyUpdate.length},emitBeginLateUpdate:function(e){var n=0;if(null!=this.__cbOnBeginLateUpdate&&(n+=this.__cbOnBeginLateUpdate.length),null!=this.__cbOnceBeginLateUpdate&&(n+=this.__cbOnceBeginLateUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnBeginLateUpdate)for(var r=0,l=this.__cbOnBeginLateUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnBeginLateUpdate[a],++s):--n}if(null!=this.__cbOnceBeginLateUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceBeginLateUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceBeginLateUpdate[a],this.__cbOnceBeginLateUpdate[a]=null,o=this.__cbOnceOwnerUnbindBeginLateUpdate[a],(this.__cbOnceOwnerUnbindBeginLateUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindBeginLateUpdate[a]),c.push(this.__cbOnceBeginLateUpdate[a]))}this.__cbOnceOwnerUnbindBeginLateUpdate=h,this.__cbOnceBeginLateUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onBeginLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginLateUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginLateUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBeginLateUpdate&&(this.__cbOnOwnerUnbindBeginLateUpdate=[]),this.__cbOnOwnerUnbindBeginLateUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBeginLateUpdate&&(this.__cbOnOwnerUnbindBeginLateUpdate=[]),this.__cbOnOwnerUnbindBeginLateUpdate.push(null);null==this.__cbOnBeginLateUpdate&&(this.__cbOnBeginLateUpdate=[]),this.__cbOnBeginLateUpdate.push(t)},onceBeginLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event beginLateUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offBeginLateUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBeginLateUpdate&&(this.__cbOnceOwnerUnbindBeginLateUpdate=[]),this.__cbOnceOwnerUnbindBeginLateUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBeginLateUpdate&&(this.__cbOnceOwnerUnbindBeginLateUpdate=[]),this.__cbOnceOwnerUnbindBeginLateUpdate.push(null);null==this.__cbOnceBeginLateUpdate&&(this.__cbOnceBeginLateUpdate=[]),this.__cbOnceBeginLateUpdate.push(t)},offBeginLateUpdate:function(e){if(null!=e){var n;null!=this.__cbOnBeginLateUpdate&&-1!=(n=this.__cbOnBeginLateUpdate.indexOf(e))&&(this.__cbOnBeginLateUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBeginLateUpdate[n])&&r(),this.__cbOnOwnerUnbindBeginLateUpdate.splice(n,1)),null!=this.__cbOnceBeginLateUpdate&&-1!=(n=this.__cbOnceBeginLateUpdate.indexOf(e))&&(this.__cbOnceBeginLateUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBeginLateUpdate[n])&&r(),this.__cbOnceOwnerUnbindBeginLateUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginLateUpdate){for(var t=0,i=this.__cbOnOwnerUnbindBeginLateUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBeginLateUpdate[s])&&r()}this.__cbOnOwnerUnbindBeginLateUpdate=null}if(null!=this.__cbOnceOwnerUnbindBeginLateUpdate){for(t=0,i=this.__cbOnceOwnerUnbindBeginLateUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBeginLateUpdate[s])&&r()}this.__cbOnceOwnerUnbindBeginLateUpdate=null}this.__cbOnBeginLateUpdate=null,this.__cbOnceBeginLateUpdate=null}},listensBeginLateUpdate:function(){return null!=this.__cbOnBeginLateUpdate&&0<this.__cbOnBeginLateUpdate.length||null!=this.__cbOnceBeginLateUpdate&&0<this.__cbOnceBeginLateUpdate.length},emitEndLateUpdate:function(e){var n=0;if(null!=this.__cbOnEndLateUpdate&&(n+=this.__cbOnEndLateUpdate.length),null!=this.__cbOnceEndLateUpdate&&(n+=this.__cbOnceEndLateUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnEndLateUpdate)for(var r=0,l=this.__cbOnEndLateUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnEndLateUpdate[a],++s):--n}if(null!=this.__cbOnceEndLateUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceEndLateUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceEndLateUpdate[a],this.__cbOnceEndLateUpdate[a]=null,o=this.__cbOnceOwnerUnbindEndLateUpdate[a],(this.__cbOnceOwnerUnbindEndLateUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindEndLateUpdate[a]),c.push(this.__cbOnceEndLateUpdate[a]))}this.__cbOnceOwnerUnbindEndLateUpdate=h,this.__cbOnceEndLateUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onEndLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event endLateUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offEndLateUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindEndLateUpdate&&(this.__cbOnOwnerUnbindEndLateUpdate=[]),this.__cbOnOwnerUnbindEndLateUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindEndLateUpdate&&(this.__cbOnOwnerUnbindEndLateUpdate=[]),this.__cbOnOwnerUnbindEndLateUpdate.push(null);null==this.__cbOnEndLateUpdate&&(this.__cbOnEndLateUpdate=[]),this.__cbOnEndLateUpdate.push(t)},onceEndLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event endLateUpdate because owner is destroyed!");var s=function(e){null!=t&&(i.offEndLateUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindEndLateUpdate&&(this.__cbOnceOwnerUnbindEndLateUpdate=[]),this.__cbOnceOwnerUnbindEndLateUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindEndLateUpdate&&(this.__cbOnceOwnerUnbindEndLateUpdate=[]),this.__cbOnceOwnerUnbindEndLateUpdate.push(null);null==this.__cbOnceEndLateUpdate&&(this.__cbOnceEndLateUpdate=[]),this.__cbOnceEndLateUpdate.push(t)},offEndLateUpdate:function(e){if(null!=e){var n;null!=this.__cbOnEndLateUpdate&&-1!=(n=this.__cbOnEndLateUpdate.indexOf(e))&&(this.__cbOnEndLateUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindEndLateUpdate[n])&&r(),this.__cbOnOwnerUnbindEndLateUpdate.splice(n,1)),null!=this.__cbOnceEndLateUpdate&&-1!=(n=this.__cbOnceEndLateUpdate.indexOf(e))&&(this.__cbOnceEndLateUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindEndLateUpdate[n])&&r(),this.__cbOnceOwnerUnbindEndLateUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEndLateUpdate){for(var t=0,i=this.__cbOnOwnerUnbindEndLateUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindEndLateUpdate[s])&&r()}this.__cbOnOwnerUnbindEndLateUpdate=null}if(null!=this.__cbOnceOwnerUnbindEndLateUpdate){for(t=0,i=this.__cbOnceOwnerUnbindEndLateUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindEndLateUpdate[s])&&r()}this.__cbOnceOwnerUnbindEndLateUpdate=null}this.__cbOnEndLateUpdate=null,this.__cbOnceEndLateUpdate=null}},listensEndLateUpdate:function(){return null!=this.__cbOnEndLateUpdate&&0<this.__cbOnEndLateUpdate.length||null!=this.__cbOnceEndLateUpdate&&0<this.__cbOnceEndLateUpdate.length},set_earlyUpdateOrder:function(e){return this.earlyUpdateOrder!=e&&(this.earlyUpdateOrder=e,ae.app.systems.earlyUpdateOrderDirty=!0),e},set_lateUpdateOrder:function(e){return this.lateUpdateOrder!=e&&(this.lateUpdateOrder=e,ae.app.systems.lateUpdateOrderDirty=!0),e},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),ae.app.systems.removeSystem(this))},earlyUpdate:function(e){},lateUpdate:function(e){},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offBeginEarlyUpdate(),this.offEndEarlyUpdate(),this.offBeginLateUpdate(),this.offEndLateUpdate()},__class__:Bb,__properties__:$extend(h.prototype.__properties__,{set_lateUpdateOrder:"set_lateUpdateOrder",set_earlyUpdateOrder:"set_earlyUpdateOrder"})}),function(){this.rootScenes=new te,this.filter=null,this.autoScaleFilter=!0,this.autoDestroyFilter=!0,this.main=null,this.fadeOutWhenNextMainCanFadeIn=!0,this.bindMainToScreenSize=!0,this.keepAssetsForNextMain=!1,this._updatingScenes=[],this.all=[],Bb.call(this),this.set_lateUpdateOrder(5e3)}),Kn=((x["ceramic.SceneSystem"]=Gn).__name__="ceramic.SceneSystem",Gn.__properties__={set_shared:"set_shared",get_shared:"get_shared"},Gn.get_shared=function(){return Gn.lazyShared&&(Gn.lazyShared=!1,Gn.shared=new Gn),Gn.shared},Gn.set_shared=function(e){return Gn.shared=e},Gn.__super__=Bb,Gn.prototype=$extend(Bb.prototype,{set_filter:function(e){if(this.filter!=e){var n=this.filter;if(null!=n){for(var t=_=this.rootScenes.h,i=(d=Object.keys(_)).length,s=0;s<i;)(b=t[d[s++]]).parent==n.content&&(n.content.remove(b),b.set_scaleX(1),b.set_scaleY(1));if(null!=n.content.children){for(var l=null,a=0,h=n.content.children.length;a<h;){var c=a++,o=n.content.children[c];o instanceof r&&(u=o).isRootScene&&(l=null==l?[]:l).push(u)}if(null!=l)for(a=0,h=l.length;a<h;){var u=l[c=a++];n.content.remove(u),u.set_active(!1)}}this.autoDestroyFilter?n.destroy():(n.set_scaleX(1),n.set_scaleY(1))}if(null!=(this.filter=e)){this.autoScaleFilter&&this.scaleFilter();for(var _,d,b,t=_=this.rootScenes.h,i=(d=Object.keys(_)).length,s=0;s<i;)(b=t[d[s++]]).parent!=e.content&&e.content.add(b)}}return e},scaleFilter:function(){var e=this.filter,n=ae.app.screen.width/this.filter.get_width(),t=ae.app.screen.height/this.filter.get_height(),e=(e.set_scaleX(n),e.set_scaleY(t),this.filter.content),n=this.filter.get_width()/ae.app.screen.width,t=this.filter.get_height()/ae.app.screen.height;e.set_scaleX(n),e.set_scaleY(t)},set_main:function(e){return this.main!=e&&(this.main=e,this.set("main",e,this.bindMainToScreenSize,this.keepAssetsForNextMain)),e},set:function(h,c,e,n){null==n&&(n=!1),null==e&&(e=!0);var o=this,t=this.rootScenes.h[h],i=null;if(null!=c&&c.isRootScene)for(var s=this.rootScenes.h,r=s,l=Object.keys(s),a=l.length,u=0;u<a;){var _=l[u++];if(r[_]==c){i=_;break}}if(null!=i){if(i==h)return;var d=this.rootScenes;Object.prototype.hasOwnProperty.call(d.h,i)&&delete d.h[i]}if(c!=t)if(null==c){d=this.rootScenes;if(Object.prototype.hasOwnProperty.call(d.h,h)&&delete d.h[h],"main"==h&&this.set_main(null),0<=t._lifecycleState)switch(t.get_status()){case 0:case 1:case 2:case 3:case 4:t.scheduleOnceReady(t,$bind(t,t.destroy));break;case 5:t.fadeOut($bind(t,t.destroy));break;case 6:case 7:t.destroy()}}else{if(c._lifecycleState<0)throw Y.thrown("Cannot assign a destroyed scene as root scene!");s=null;if(null==i?(c.isRootScene=!0,this.rootScenes.h[h]=c,"main"==h&&this.set_main(c),c.onDestroy(this,function(e){var n=null;if(null!=c&&c.isRootScene)for(var t=o.rootScenes.h,i=t,s=Object.keys(t),r=s.length,l=0;l<r;){var a=s[l++];if(i[a]==e){n=a;break}}null!=n&&(t=o.rootScenes,Object.prototype.hasOwnProperty.call(t.h,h)&&delete t.h[h],"main"==n)&&o.main==e&&o.set_main(null)}),c.onReplace(this,function(e){var n=null;if(null!=c&&c.isRootScene)for(var t=o.rootScenes.h,i=t,s=Object.keys(t),r=s.length,l=0;l<r;){var a=s[l++];if(i[a]==c){n=a;break}}null!=n&&o.set(n,e)})):("main"==i&&this.set_main(null),this.rootScenes.h[h]=c,"main"==h&&this.set_main(c)),null!=t){n&&(s=t._assets);var b=function(){n&&(t._assets=null),t.destroy(),t=null};if(this.fadeOutWhenNextMainCanFadeIn){var p=null;switch(c.get_status()){case 0:case 1:case 2:case 3:p=function(e,n){switch(e){case 0:case 1:case 2:case 3:break;case 4:case 5:case 6:case 7:switch(c.offStatusChange(p),t.get_status()){case 5:t.fadeOut(b);break;case 0:case 1:case 2:case 3:case 4:case 6:case 7:b()}}},c.onStatusChange(t,p);break;case 4:case 5:case 6:case 7:switch(t.get_status()){case 5:t.fadeOut(b);break;case 0:case 1:case 2:case 3:case 4:case 6:case 7:b()}}}else switch(t.get_status()){case 5:t.fadeOut(b);break;case 0:case 1:case 2:case 3:case 4:case 6:case 7:b()}}null==i&&(c._assets=s,e&&c.bindToScreenSize(),null!=this.filter&&this.filter.content.add(c),c._boot())}},get:function(e){return this.rootScenes.h[e]},setCurrentScene:function(e,n){this.keepAssetsForNextMain=n=null==n?!1:n,this.set_main(e)},lateUpdate:function(e){for(var n=this.all.length,t=0,i=n;t<i;){var s=t++;this._updatingScenes[s]=this.all[s]}for(t=0,i=n;t<i;){var s=t++,r=this._updatingScenes[s];if((1!=(1&r.flags)||r.autoUpdateWhenInactive)&&(!(r._lifecycleState<0)&&(0==r.get_status()&&null!=r.parent&&r._boot(),!r.paused)&&r.autoUpdate))switch(r.get_status()){case 4:case 5:case 6:r.update(e)}}for(t=0,i=n;t<i;){s=t++;this._updatingScenes[s]=null}this.autoScaleFilter&&null!=this.filter&&this.scaleFilter()},__class__:Gn,__properties__:$extend(Bb.prototype.__properties__,{set_filter:"set_filter",set_main:"set_main"})}),function(){this.hitVisuals=[],this.matchedOverListeners=new ei,this.matchedDownListeners=new ei,this.visualsListenPointerOver=!1,this.maxTouchIndex=-1,this.prevMouseY=0,this.prevMouseX=0,this.prevTouchPositions=new bn(16,.5,!1),this.pressedTouches=new ke(16,.5,!1),this.pressedMouseButtons=new ke(16,.5,!1),this._numPointerDown=0,this.resizing=!1,this.reverseMatrix=new j,this.matrix=new j,this.unobservedTexturesDensity=1,this.texturesDensityAutoruns=null,this.unobservedFocusedVisual=null,this.focusedVisualAutoruns=null,this.touches=new vn(8,.5,!1),this.mouseWheelDeltaY=0,this.mouseWheelDeltaX=0,this.mouseDeltaY=0,this.mouseDeltaX=0,this.mouseY=0,this.mouseX=0,this.pointerDeltaY=0,this.pointerDeltaX=0,this.pointerY=0,this.pointerX=0,this.offsetY=0,this.offsetX=0,this.actualHeight=0,this.actualWidth=0,this.height=0,this.width=0,this.density=1,this.observedDirty=!1,h.call(this)}),Hn=((x["ceramic.Screen"]=Kn).__name__="ceramic.Screen",Kn.__interfaces__=[q],Kn.__super__=h,Kn.prototype=$extend(h.prototype,{emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnObservedDirty)for(var l=0,a=this.__cbOnObservedDirty.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnObservedDirty[h],++r):--t}if(null!=this.__cbOnceObservedDirty){for(var c=null,o=null,l=0,a=this.__cbOnceObservedDirty.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,u=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindObservedDirty[h]),o.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=c,this.__cbOnceObservedDirty=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(r=this.__cbOnOwnerUnbindObservedDirty[n])&&r(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindObservedDirty[n])&&r(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindObservedDirty[s])&&r()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindObservedDirty[s])&&r()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},get_nativeWidth:function(){return J.app.screenWidth},get_nativeHeight:function(){return J.app.screenHeight},get_nativeDensity:function(){return J.app.screenDensity},get_focusedVisual:function(){var e,n,t=this.unobservedFocusedVisual;return null!=se.current&&(e=se.current,null!=(n=this.focusedVisualAutoruns)||(n=se.getAutorunArray(),null!=(this.focusedVisualAutoruns=n)))&&e.bindToAutorunArray(n),t},set_focusedVisual:function(e){var n=this.unobservedFocusedVisual;return this.set_unobservedFocusedVisual(e),n!=e&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFocusedVisualChange(e,n),null!=(n=this.focusedVisualAutoruns))&&(this.focusedVisualAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateFocusedVisual:function(){var e=this.unobservedFocusedVisual,e=(this.emitFocusedVisualChange(e,e),this.focusedVisualAutoruns);null!=e&&(this.focusedVisualAutoruns=null,se.invalidateAutorunArray(e))},emitFocusedVisualChange:function(e,n){var t=0;if(null!=this.__cbOnFocusedVisualChange&&(t+=this.__cbOnFocusedVisualChange.length),null!=this.__cbOnceFocusedVisualChange&&(t+=this.__cbOnceFocusedVisualChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnFocusedVisualChange)for(var l=0,a=this.__cbOnFocusedVisualChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnFocusedVisualChange[h],++r):--t}if(null!=this.__cbOnceFocusedVisualChange){for(var c=null,o=null,l=0,a=this.__cbOnceFocusedVisualChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceFocusedVisualChange[h],this.__cbOnceFocusedVisualChange[h]=null,u=this.__cbOnceOwnerUnbindFocusedVisualChange[h],(this.__cbOnceOwnerUnbindFocusedVisualChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindFocusedVisualChange[h]),o.push(this.__cbOnceFocusedVisualChange[h]))}this.__cbOnceOwnerUnbindFocusedVisualChange=c,this.__cbOnceFocusedVisualChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onFocusedVisualChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event focusedVisualChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFocusedVisualChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFocusedVisualChange&&(this.__cbOnOwnerUnbindFocusedVisualChange=[]),this.__cbOnOwnerUnbindFocusedVisualChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFocusedVisualChange&&(this.__cbOnOwnerUnbindFocusedVisualChange=[]),this.__cbOnOwnerUnbindFocusedVisualChange.push(null);null==this.__cbOnFocusedVisualChange&&(this.__cbOnFocusedVisualChange=[]),this.__cbOnFocusedVisualChange.push(t)},onceFocusedVisualChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event focusedVisualChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFocusedVisualChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFocusedVisualChange&&(this.__cbOnceOwnerUnbindFocusedVisualChange=[]),this.__cbOnceOwnerUnbindFocusedVisualChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFocusedVisualChange&&(this.__cbOnceOwnerUnbindFocusedVisualChange=[]),this.__cbOnceOwnerUnbindFocusedVisualChange.push(null);null==this.__cbOnceFocusedVisualChange&&(this.__cbOnceFocusedVisualChange=[]),this.__cbOnceFocusedVisualChange.push(t)},offFocusedVisualChange:function(e){if(null!=e){var n;null!=this.__cbOnFocusedVisualChange&&-1!=(n=this.__cbOnFocusedVisualChange.indexOf(e))&&(this.__cbOnFocusedVisualChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFocusedVisualChange[n])&&r(),this.__cbOnOwnerUnbindFocusedVisualChange.splice(n,1)),null!=this.__cbOnceFocusedVisualChange&&-1!=(n=this.__cbOnceFocusedVisualChange.indexOf(e))&&(this.__cbOnceFocusedVisualChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFocusedVisualChange[n])&&r(),this.__cbOnceOwnerUnbindFocusedVisualChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFocusedVisualChange){for(var t=0,i=this.__cbOnOwnerUnbindFocusedVisualChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFocusedVisualChange[s])&&r()}this.__cbOnOwnerUnbindFocusedVisualChange=null}if(null!=this.__cbOnceOwnerUnbindFocusedVisualChange){for(t=0,i=this.__cbOnceOwnerUnbindFocusedVisualChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFocusedVisualChange[s])&&r()}this.__cbOnceOwnerUnbindFocusedVisualChange=null}this.__cbOnFocusedVisualChange=null,this.__cbOnceFocusedVisualChange=null}},listensFocusedVisualChange:function(){return null!=this.__cbOnFocusedVisualChange&&0<this.__cbOnFocusedVisualChange.length||null!=this.__cbOnceFocusedVisualChange&&0<this.__cbOnceFocusedVisualChange.length},set_unobservedFocusedVisual:function(e){var n;return this.unobservedFocusedVisual!=e&&(n=this.unobservedFocusedVisual,this.unobservedFocusedVisual=e,null!=n&&(this.emitBlur(n),n.emitBlur()),null!=e)&&(this.emitFocus(e),e.emitFocus()),e},get_texturesDensity:function(){var e,n,t=this.unobservedTexturesDensity;return null!=se.current&&(e=se.current,null!=(n=this.texturesDensityAutoruns)||(n=se.getAutorunArray(),null!=(this.texturesDensityAutoruns=n)))&&e.bindToAutorunArray(n),t},set_texturesDensity:function(e){var n=this.unobservedTexturesDensity;return n!=(this.unobservedTexturesDensity=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTexturesDensityChange(e,n),null!=(n=this.texturesDensityAutoruns))&&(this.texturesDensityAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTexturesDensity:function(){var e=this.unobservedTexturesDensity,e=(this.emitTexturesDensityChange(e,e),this.texturesDensityAutoruns);null!=e&&(this.texturesDensityAutoruns=null,se.invalidateAutorunArray(e))},emitTexturesDensityChange:function(e,n){var t=0;if(null!=this.__cbOnTexturesDensityChange&&(t+=this.__cbOnTexturesDensityChange.length),null!=this.__cbOnceTexturesDensityChange&&(t+=this.__cbOnceTexturesDensityChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTexturesDensityChange)for(var l=0,a=this.__cbOnTexturesDensityChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTexturesDensityChange[h],++r):--t}if(null!=this.__cbOnceTexturesDensityChange){for(var c=null,o=null,l=0,a=this.__cbOnceTexturesDensityChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTexturesDensityChange[h],this.__cbOnceTexturesDensityChange[h]=null,u=this.__cbOnceOwnerUnbindTexturesDensityChange[h],(this.__cbOnceOwnerUnbindTexturesDensityChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTexturesDensityChange[h]),o.push(this.__cbOnceTexturesDensityChange[h]))}this.__cbOnceOwnerUnbindTexturesDensityChange=c,this.__cbOnceTexturesDensityChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTexturesDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event texturesDensityChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTexturesDensityChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTexturesDensityChange&&(this.__cbOnOwnerUnbindTexturesDensityChange=[]),this.__cbOnOwnerUnbindTexturesDensityChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTexturesDensityChange&&(this.__cbOnOwnerUnbindTexturesDensityChange=[]),this.__cbOnOwnerUnbindTexturesDensityChange.push(null);null==this.__cbOnTexturesDensityChange&&(this.__cbOnTexturesDensityChange=[]),this.__cbOnTexturesDensityChange.push(t)},onceTexturesDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event texturesDensityChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTexturesDensityChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTexturesDensityChange&&(this.__cbOnceOwnerUnbindTexturesDensityChange=[]),this.__cbOnceOwnerUnbindTexturesDensityChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTexturesDensityChange&&(this.__cbOnceOwnerUnbindTexturesDensityChange=[]),this.__cbOnceOwnerUnbindTexturesDensityChange.push(null);null==this.__cbOnceTexturesDensityChange&&(this.__cbOnceTexturesDensityChange=[]),this.__cbOnceTexturesDensityChange.push(t)},offTexturesDensityChange:function(e){if(null!=e){var n;null!=this.__cbOnTexturesDensityChange&&-1!=(n=this.__cbOnTexturesDensityChange.indexOf(e))&&(this.__cbOnTexturesDensityChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTexturesDensityChange[n])&&r(),this.__cbOnOwnerUnbindTexturesDensityChange.splice(n,1)),null!=this.__cbOnceTexturesDensityChange&&-1!=(n=this.__cbOnceTexturesDensityChange.indexOf(e))&&(this.__cbOnceTexturesDensityChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTexturesDensityChange[n])&&r(),this.__cbOnceOwnerUnbindTexturesDensityChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTexturesDensityChange){for(var t=0,i=this.__cbOnOwnerUnbindTexturesDensityChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTexturesDensityChange[s])&&r()}this.__cbOnOwnerUnbindTexturesDensityChange=null}if(null!=this.__cbOnceOwnerUnbindTexturesDensityChange){for(t=0,i=this.__cbOnceOwnerUnbindTexturesDensityChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTexturesDensityChange[s])&&r()}this.__cbOnceOwnerUnbindTexturesDensityChange=null}this.__cbOnTexturesDensityChange=null,this.__cbOnceTexturesDensityChange=null}},listensTexturesDensityChange:function(){return null!=this.__cbOnTexturesDensityChange&&0<this.__cbOnTexturesDensityChange.length||null!=this.__cbOnceTexturesDensityChange&&0<this.__cbOnceTexturesDensityChange.length},get_isPointerDown:function(){return 0<this._numPointerDown},emitResize:function(){var e=0;if(null!=this.__cbOnResize&&(e+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(e+=this.__cbOnceResize.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnResize)for(var s=0,r=this.__cbOnResize.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnResize[l],++i):--e}if(null!=this.__cbOnceResize){for(var a=null,h=null,s=0,r=this.__cbOnceResize.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceResize[l],this.__cbOnceResize[l]=null,c=this.__cbOnceOwnerUnbindResize[l],(this.__cbOnceOwnerUnbindResize[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindResize[l]),h.push(this.__cbOnceResize[l]))}this.__cbOnceOwnerUnbindResize=a,this.__cbOnceResize=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event resize because owner is destroyed!");var s=function(e){null!=t&&(i.offResize(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(t)},onceResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event resize because owner is destroyed!");var s=function(e){null!=t&&(i.offResize(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(t)},offResize:function(e){if(null!=e){var n;null!=this.__cbOnResize&&-1!=(n=this.__cbOnResize.indexOf(e))&&(this.__cbOnResize.splice(n,1),null!=(r=this.__cbOnOwnerUnbindResize[n])&&r(),this.__cbOnOwnerUnbindResize.splice(n,1)),null!=this.__cbOnceResize&&-1!=(n=this.__cbOnceResize.indexOf(e))&&(this.__cbOnceResize.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindResize[n])&&r(),this.__cbOnceOwnerUnbindResize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindResize[s])&&r()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindResize[s])&&r()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&0<this.__cbOnResize.length||null!=this.__cbOnceResize&&0<this.__cbOnceResize.length},emitMouseDown:function(e,n,t){this.willEmitMouseDown(e,n,t);var i=0;if(null!=this.__cbOnMouseDown&&(i+=this.__cbOnMouseDown.length),null!=this.__cbOnceMouseDown&&(i+=this.__cbOnceMouseDown.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnMouseDown)for(var a=0,h=this.__cbOnMouseDown.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnMouseDown[c],++l):--i}if(null!=this.__cbOnceMouseDown){for(var o=null,u=null,a=0,h=this.__cbOnceMouseDown.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceMouseDown[c],this.__cbOnceMouseDown[c]=null,_=this.__cbOnceOwnerUnbindMouseDown[c],(this.__cbOnceOwnerUnbindMouseDown[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindMouseDown[c]),u.push(this.__cbOnceMouseDown[c]))}this.__cbOnceOwnerUnbindMouseDown=o,this.__cbOnceMouseDown=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r),r=null}s=this.matchFirstDownListener(n,t,-1,e);null!=s&&(s._numPointerDown++,1!=s._numPointerDown&&!s.multiTouch||(ae.app.screen.set_focusedVisual(s),s.emitPointerDown(new bt(-1,e,n,t,!0)))),this.matchedDownListeners.h[1e4+e]=s},onMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseDown because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(null);null==this.__cbOnMouseDown&&(this.__cbOnMouseDown=[]),this.__cbOnMouseDown.push(t)},onceMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseDown because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(null);null==this.__cbOnceMouseDown&&(this.__cbOnceMouseDown=[]),this.__cbOnceMouseDown.push(t)},offMouseDown:function(e){if(null!=e){var n;null!=this.__cbOnMouseDown&&-1!=(n=this.__cbOnMouseDown.indexOf(e))&&(this.__cbOnMouseDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseDown[n])&&r(),this.__cbOnOwnerUnbindMouseDown.splice(n,1)),null!=this.__cbOnceMouseDown&&-1!=(n=this.__cbOnceMouseDown.indexOf(e))&&(this.__cbOnceMouseDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseDown[n])&&r(),this.__cbOnceOwnerUnbindMouseDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseDown){for(var t=0,i=this.__cbOnOwnerUnbindMouseDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseDown[s])&&r()}this.__cbOnOwnerUnbindMouseDown=null}if(null!=this.__cbOnceOwnerUnbindMouseDown){for(t=0,i=this.__cbOnceOwnerUnbindMouseDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseDown[s])&&r()}this.__cbOnceOwnerUnbindMouseDown=null}this.__cbOnMouseDown=null,this.__cbOnceMouseDown=null}},listensMouseDown:function(){return null!=this.__cbOnMouseDown&&0<this.__cbOnMouseDown.length||null!=this.__cbOnceMouseDown&&0<this.__cbOnceMouseDown.length},emitMouseUp:function(e,n,t){this.willEmitMouseUp(e,n,t);var i=0;if(null!=this.__cbOnMouseUp&&(i+=this.__cbOnMouseUp.length),null!=this.__cbOnceMouseUp&&(i+=this.__cbOnceMouseUp.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnMouseUp)for(var a=0,h=this.__cbOnMouseUp.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnMouseUp[c],++l):--i}if(null!=this.__cbOnceMouseUp){for(var o=null,u=null,a=0,h=this.__cbOnceMouseUp.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceMouseUp[c],this.__cbOnceMouseUp[c]=null,_=this.__cbOnceOwnerUnbindMouseUp[c],(this.__cbOnceOwnerUnbindMouseUp[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindMouseUp[c]),u.push(this.__cbOnceMouseUp[c]))}this.__cbOnceOwnerUnbindMouseUp=o,this.__cbOnceMouseUp=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r),r=null}var s=1e4+e,d=this.matchedDownListeners.h[s];null!=d&&0<=d._lifecycleState&&0<d._numPointerDown&&(d._numPointerDown--,0!=d._numPointerDown&&!d.multiTouch||d.emitPointerUp(new bt(-1,e,n,t,d._hits(n,t,!1)))),this.matchedDownListeners.remove(s)},onMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseUp because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(null);null==this.__cbOnMouseUp&&(this.__cbOnMouseUp=[]),this.__cbOnMouseUp.push(t)},onceMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseUp because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(null);null==this.__cbOnceMouseUp&&(this.__cbOnceMouseUp=[]),this.__cbOnceMouseUp.push(t)},offMouseUp:function(e){if(null!=e){var n;null!=this.__cbOnMouseUp&&-1!=(n=this.__cbOnMouseUp.indexOf(e))&&(this.__cbOnMouseUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseUp[n])&&r(),this.__cbOnOwnerUnbindMouseUp.splice(n,1)),null!=this.__cbOnceMouseUp&&-1!=(n=this.__cbOnceMouseUp.indexOf(e))&&(this.__cbOnceMouseUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseUp[n])&&r(),this.__cbOnceOwnerUnbindMouseUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseUp){for(var t=0,i=this.__cbOnOwnerUnbindMouseUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseUp[s])&&r()}this.__cbOnOwnerUnbindMouseUp=null}if(null!=this.__cbOnceOwnerUnbindMouseUp){for(t=0,i=this.__cbOnceOwnerUnbindMouseUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseUp[s])&&r()}this.__cbOnceOwnerUnbindMouseUp=null}this.__cbOnMouseUp=null,this.__cbOnceMouseUp=null}},listensMouseUp:function(){return null!=this.__cbOnMouseUp&&0<this.__cbOnMouseUp.length||null!=this.__cbOnceMouseUp&&0<this.__cbOnceMouseUp.length},emitMouseWheel:function(e,n){this.willEmitMouseWheel(e,n);var t=0;if(null!=this.__cbOnMouseWheel&&(t+=this.__cbOnMouseWheel.length),null!=this.__cbOnceMouseWheel&&(t+=this.__cbOnceMouseWheel.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnMouseWheel)for(var l=0,a=this.__cbOnMouseWheel.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnMouseWheel[h],++r):--t}if(null!=this.__cbOnceMouseWheel){for(var c=null,o=null,l=0,a=this.__cbOnceMouseWheel.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceMouseWheel[h],this.__cbOnceMouseWheel[h]=null,u=this.__cbOnceOwnerUnbindMouseWheel[h],(this.__cbOnceOwnerUnbindMouseWheel[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseWheel[h]),o.push(this.__cbOnceMouseWheel[h]))}this.__cbOnceOwnerUnbindMouseWheel=c,this.__cbOnceMouseWheel=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseWheel because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseWheel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(null);null==this.__cbOnMouseWheel&&(this.__cbOnMouseWheel=[]),this.__cbOnMouseWheel.push(t)},onceMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseWheel because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseWheel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(null);null==this.__cbOnceMouseWheel&&(this.__cbOnceMouseWheel=[]),this.__cbOnceMouseWheel.push(t)},offMouseWheel:function(e){if(null!=e){var n;null!=this.__cbOnMouseWheel&&-1!=(n=this.__cbOnMouseWheel.indexOf(e))&&(this.__cbOnMouseWheel.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseWheel[n])&&r(),this.__cbOnOwnerUnbindMouseWheel.splice(n,1)),null!=this.__cbOnceMouseWheel&&-1!=(n=this.__cbOnceMouseWheel.indexOf(e))&&(this.__cbOnceMouseWheel.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseWheel[n])&&r(),this.__cbOnceOwnerUnbindMouseWheel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseWheel){for(var t=0,i=this.__cbOnOwnerUnbindMouseWheel.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseWheel[s])&&r()}this.__cbOnOwnerUnbindMouseWheel=null}if(null!=this.__cbOnceOwnerUnbindMouseWheel){for(t=0,i=this.__cbOnceOwnerUnbindMouseWheel.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseWheel[s])&&r()}this.__cbOnceOwnerUnbindMouseWheel=null}this.__cbOnMouseWheel=null,this.__cbOnceMouseWheel=null}},listensMouseWheel:function(){return null!=this.__cbOnMouseWheel&&0<this.__cbOnMouseWheel.length||null!=this.__cbOnceMouseWheel&&0<this.__cbOnceMouseWheel.length},emitMouseMove:function(e,n){this.willEmitMouseMove(e,n);var t=0;if(null!=this.__cbOnMouseMove&&(t+=this.__cbOnMouseMove.length),null!=this.__cbOnceMouseMove&&(t+=this.__cbOnceMouseMove.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnMouseMove)for(var l=0,a=this.__cbOnMouseMove.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnMouseMove[h],++r):--t}if(null!=this.__cbOnceMouseMove){for(var c=null,o=null,l=0,a=this.__cbOnceMouseMove.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceMouseMove[h],this.__cbOnceMouseMove[h]=null,u=this.__cbOnceOwnerUnbindMouseMove[h],(this.__cbOnceOwnerUnbindMouseMove[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseMove[h]),o.push(this.__cbOnceMouseMove[h]))}this.__cbOnceOwnerUnbindMouseMove=c,this.__cbOnceMouseMove=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseMove because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(null);null==this.__cbOnMouseMove&&(this.__cbOnMouseMove=[]),this.__cbOnMouseMove.push(t)},onceMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event mouseMove because owner is destroyed!");var s=function(e){null!=t&&(i.offMouseMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(null);null==this.__cbOnceMouseMove&&(this.__cbOnceMouseMove=[]),this.__cbOnceMouseMove.push(t)},offMouseMove:function(e){if(null!=e){var n;null!=this.__cbOnMouseMove&&-1!=(n=this.__cbOnMouseMove.indexOf(e))&&(this.__cbOnMouseMove.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMouseMove[n])&&r(),this.__cbOnOwnerUnbindMouseMove.splice(n,1)),null!=this.__cbOnceMouseMove&&-1!=(n=this.__cbOnceMouseMove.indexOf(e))&&(this.__cbOnceMouseMove.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMouseMove[n])&&r(),this.__cbOnceOwnerUnbindMouseMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseMove){for(var t=0,i=this.__cbOnOwnerUnbindMouseMove.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMouseMove[s])&&r()}this.__cbOnOwnerUnbindMouseMove=null}if(null!=this.__cbOnceOwnerUnbindMouseMove){for(t=0,i=this.__cbOnceOwnerUnbindMouseMove.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMouseMove[s])&&r()}this.__cbOnceOwnerUnbindMouseMove=null}this.__cbOnMouseMove=null,this.__cbOnceMouseMove=null}},listensMouseMove:function(){return null!=this.__cbOnMouseMove&&0<this.__cbOnMouseMove.length||null!=this.__cbOnceMouseMove&&0<this.__cbOnceMouseMove.length},emitTouchDown:function(e,n,t){this.willEmitTouchDown(e,n,t);var i=0;if(null!=this.__cbOnTouchDown&&(i+=this.__cbOnTouchDown.length),null!=this.__cbOnceTouchDown&&(i+=this.__cbOnceTouchDown.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnTouchDown)for(var a=0,h=this.__cbOnTouchDown.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnTouchDown[c],++l):--i}if(null!=this.__cbOnceTouchDown){for(var o=null,u=null,a=0,h=this.__cbOnceTouchDown.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceTouchDown[c],this.__cbOnceTouchDown[c]=null,_=this.__cbOnceOwnerUnbindTouchDown[c],(this.__cbOnceOwnerUnbindTouchDown[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindTouchDown[c]),u.push(this.__cbOnceTouchDown[c]))}this.__cbOnceOwnerUnbindTouchDown=o,this.__cbOnceTouchDown=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r),r=null}s=this.matchFirstDownListener(n,t,e,-1);null!=s&&(s._numPointerDown++,1!=s._numPointerDown&&!s.multiTouch||(ae.app.screen.set_focusedVisual(s),s.emitPointerDown(new bt(e,-1,n,t,!0)))),this.matchedDownListeners.h[2e4+e]=s},onTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchDown because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(null);null==this.__cbOnTouchDown&&(this.__cbOnTouchDown=[]),this.__cbOnTouchDown.push(t)},onceTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchDown because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(null);null==this.__cbOnceTouchDown&&(this.__cbOnceTouchDown=[]),this.__cbOnceTouchDown.push(t)},offTouchDown:function(e){if(null!=e){var n;null!=this.__cbOnTouchDown&&-1!=(n=this.__cbOnTouchDown.indexOf(e))&&(this.__cbOnTouchDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTouchDown[n])&&r(),this.__cbOnOwnerUnbindTouchDown.splice(n,1)),null!=this.__cbOnceTouchDown&&-1!=(n=this.__cbOnceTouchDown.indexOf(e))&&(this.__cbOnceTouchDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTouchDown[n])&&r(),this.__cbOnceOwnerUnbindTouchDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchDown){for(var t=0,i=this.__cbOnOwnerUnbindTouchDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTouchDown[s])&&r()}this.__cbOnOwnerUnbindTouchDown=null}if(null!=this.__cbOnceOwnerUnbindTouchDown){for(t=0,i=this.__cbOnceOwnerUnbindTouchDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTouchDown[s])&&r()}this.__cbOnceOwnerUnbindTouchDown=null}this.__cbOnTouchDown=null,this.__cbOnceTouchDown=null}},listensTouchDown:function(){return null!=this.__cbOnTouchDown&&0<this.__cbOnTouchDown.length||null!=this.__cbOnceTouchDown&&0<this.__cbOnceTouchDown.length},emitTouchUp:function(e,n,t){this.willEmitTouchUp(e,n,t);var i=0;if(null!=this.__cbOnTouchUp&&(i+=this.__cbOnTouchUp.length),null!=this.__cbOnceTouchUp&&(i+=this.__cbOnceTouchUp.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnTouchUp)for(var a=0,h=this.__cbOnTouchUp.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnTouchUp[c],++l):--i}if(null!=this.__cbOnceTouchUp){for(var o=null,u=null,a=0,h=this.__cbOnceTouchUp.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceTouchUp[c],this.__cbOnceTouchUp[c]=null,_=this.__cbOnceOwnerUnbindTouchUp[c],(this.__cbOnceOwnerUnbindTouchUp[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindTouchUp[c]),u.push(this.__cbOnceTouchUp[c]))}this.__cbOnceOwnerUnbindTouchUp=o,this.__cbOnceTouchUp=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r),r=null}var s=2e4+e,d=this.matchedDownListeners.h[s];null!=d&&0<=d._lifecycleState&&0<d._numPointerDown&&(d._numPointerDown--,0!=d._numPointerDown&&!d.multiTouch||d.emitPointerUp(new bt(e,-1,n,t,d._hits(n,t,!1)))),this.matchedDownListeners.remove(s)},onTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchUp because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(null);null==this.__cbOnTouchUp&&(this.__cbOnTouchUp=[]),this.__cbOnTouchUp.push(t)},onceTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchUp because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(null);null==this.__cbOnceTouchUp&&(this.__cbOnceTouchUp=[]),this.__cbOnceTouchUp.push(t)},offTouchUp:function(e){if(null!=e){var n;null!=this.__cbOnTouchUp&&-1!=(n=this.__cbOnTouchUp.indexOf(e))&&(this.__cbOnTouchUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTouchUp[n])&&r(),this.__cbOnOwnerUnbindTouchUp.splice(n,1)),null!=this.__cbOnceTouchUp&&-1!=(n=this.__cbOnceTouchUp.indexOf(e))&&(this.__cbOnceTouchUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTouchUp[n])&&r(),this.__cbOnceOwnerUnbindTouchUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchUp){for(var t=0,i=this.__cbOnOwnerUnbindTouchUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTouchUp[s])&&r()}this.__cbOnOwnerUnbindTouchUp=null}if(null!=this.__cbOnceOwnerUnbindTouchUp){for(t=0,i=this.__cbOnceOwnerUnbindTouchUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTouchUp[s])&&r()}this.__cbOnceOwnerUnbindTouchUp=null}this.__cbOnTouchUp=null,this.__cbOnceTouchUp=null}},listensTouchUp:function(){return null!=this.__cbOnTouchUp&&0<this.__cbOnTouchUp.length||null!=this.__cbOnceTouchUp&&0<this.__cbOnceTouchUp.length},emitTouchMove:function(e,n,t){this.willEmitTouchMove(e,n,t);var i=0;if(null!=this.__cbOnTouchMove&&(i+=this.__cbOnTouchMove.length),null!=this.__cbOnceTouchMove&&(i+=this.__cbOnceTouchMove.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnTouchMove)for(var a=0,h=this.__cbOnTouchMove.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnTouchMove[c],++l):--i}if(null!=this.__cbOnceTouchMove){for(var o=null,u=null,a=0,h=this.__cbOnceTouchMove.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceTouchMove[c],this.__cbOnceTouchMove[c]=null,_=this.__cbOnceOwnerUnbindTouchMove[c],(this.__cbOnceOwnerUnbindTouchMove[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindTouchMove[c]),u.push(this.__cbOnceTouchMove[c]))}this.__cbOnceOwnerUnbindTouchMove=o,this.__cbOnceTouchMove=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchMove because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(null);null==this.__cbOnTouchMove&&(this.__cbOnTouchMove=[]),this.__cbOnTouchMove.push(t)},onceTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event touchMove because owner is destroyed!");var s=function(e){null!=t&&(i.offTouchMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(null);null==this.__cbOnceTouchMove&&(this.__cbOnceTouchMove=[]),this.__cbOnceTouchMove.push(t)},offTouchMove:function(e){if(null!=e){var n;null!=this.__cbOnTouchMove&&-1!=(n=this.__cbOnTouchMove.indexOf(e))&&(this.__cbOnTouchMove.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTouchMove[n])&&r(),this.__cbOnOwnerUnbindTouchMove.splice(n,1)),null!=this.__cbOnceTouchMove&&-1!=(n=this.__cbOnceTouchMove.indexOf(e))&&(this.__cbOnceTouchMove.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTouchMove[n])&&r(),this.__cbOnceOwnerUnbindTouchMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchMove){for(var t=0,i=this.__cbOnOwnerUnbindTouchMove.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTouchMove[s])&&r()}this.__cbOnOwnerUnbindTouchMove=null}if(null!=this.__cbOnceOwnerUnbindTouchMove){for(t=0,i=this.__cbOnceOwnerUnbindTouchMove.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTouchMove[s])&&r()}this.__cbOnceOwnerUnbindTouchMove=null}this.__cbOnTouchMove=null,this.__cbOnceTouchMove=null}},listensTouchMove:function(){return null!=this.__cbOnTouchMove&&0<this.__cbOnTouchMove.length||null!=this.__cbOnceTouchMove&&0<this.__cbOnceTouchMove.length},emitPointerDown:function(e){var n=0;if(null!=this.__cbOnPointerDown&&(n+=this.__cbOnPointerDown.length),null!=this.__cbOncePointerDown&&(n+=this.__cbOncePointerDown.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPointerDown)for(var r=0,l=this.__cbOnPointerDown.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPointerDown[a],++s):--n}if(null!=this.__cbOncePointerDown){for(var h=null,c=null,r=0,l=this.__cbOncePointerDown.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePointerDown[a],this.__cbOncePointerDown[a]=null,o=this.__cbOnceOwnerUnbindPointerDown[a],(this.__cbOnceOwnerUnbindPointerDown[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPointerDown[a]),c.push(this.__cbOncePointerDown[a]))}this.__cbOnceOwnerUnbindPointerDown=h,this.__cbOncePointerDown=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerDown because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(null);null==this.__cbOnPointerDown&&(this.__cbOnPointerDown=[]),this.__cbOnPointerDown.push(t)},oncePointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerDown because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(null);null==this.__cbOncePointerDown&&(this.__cbOncePointerDown=[]),this.__cbOncePointerDown.push(t)},offPointerDown:function(e){if(null!=e){var n;null!=this.__cbOnPointerDown&&-1!=(n=this.__cbOnPointerDown.indexOf(e))&&(this.__cbOnPointerDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPointerDown[n])&&r(),this.__cbOnOwnerUnbindPointerDown.splice(n,1)),null!=this.__cbOncePointerDown&&-1!=(n=this.__cbOncePointerDown.indexOf(e))&&(this.__cbOncePointerDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPointerDown[n])&&r(),this.__cbOnceOwnerUnbindPointerDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindPointerDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPointerDown[s])&&r()}this.__cbOnOwnerUnbindPointerDown=null}if(null!=this.__cbOnceOwnerUnbindPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindPointerDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPointerDown[s])&&r()}this.__cbOnceOwnerUnbindPointerDown=null}this.__cbOnPointerDown=null,this.__cbOncePointerDown=null}},listensPointerDown:function(){return null!=this.__cbOnPointerDown&&0<this.__cbOnPointerDown.length||null!=this.__cbOncePointerDown&&0<this.__cbOncePointerDown.length},emitPointerUp:function(e){var n=0;if(null!=this.__cbOnPointerUp&&(n+=this.__cbOnPointerUp.length),null!=this.__cbOncePointerUp&&(n+=this.__cbOncePointerUp.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPointerUp)for(var r=0,l=this.__cbOnPointerUp.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPointerUp[a],++s):--n}if(null!=this.__cbOncePointerUp){for(var h=null,c=null,r=0,l=this.__cbOncePointerUp.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePointerUp[a],this.__cbOncePointerUp[a]=null,o=this.__cbOnceOwnerUnbindPointerUp[a],(this.__cbOnceOwnerUnbindPointerUp[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPointerUp[a]),c.push(this.__cbOncePointerUp[a]))}this.__cbOnceOwnerUnbindPointerUp=h,this.__cbOncePointerUp=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerUp because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(null);null==this.__cbOnPointerUp&&(this.__cbOnPointerUp=[]),this.__cbOnPointerUp.push(t)},oncePointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerUp because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(null);null==this.__cbOncePointerUp&&(this.__cbOncePointerUp=[]),this.__cbOncePointerUp.push(t)},offPointerUp:function(e){if(null!=e){var n;null!=this.__cbOnPointerUp&&-1!=(n=this.__cbOnPointerUp.indexOf(e))&&(this.__cbOnPointerUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPointerUp[n])&&r(),this.__cbOnOwnerUnbindPointerUp.splice(n,1)),null!=this.__cbOncePointerUp&&-1!=(n=this.__cbOncePointerUp.indexOf(e))&&(this.__cbOncePointerUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPointerUp[n])&&r(),this.__cbOnceOwnerUnbindPointerUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindPointerUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPointerUp[s])&&r()}this.__cbOnOwnerUnbindPointerUp=null}if(null!=this.__cbOnceOwnerUnbindPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindPointerUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPointerUp[s])&&r()}this.__cbOnceOwnerUnbindPointerUp=null}this.__cbOnPointerUp=null,this.__cbOncePointerUp=null}},listensPointerUp:function(){return null!=this.__cbOnPointerUp&&0<this.__cbOnPointerUp.length||null!=this.__cbOncePointerUp&&0<this.__cbOncePointerUp.length},emitPointerMove:function(e){var n=0;if(null!=this.__cbOnPointerMove&&(n+=this.__cbOnPointerMove.length),null!=this.__cbOncePointerMove&&(n+=this.__cbOncePointerMove.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnPointerMove)for(var r=0,l=this.__cbOnPointerMove.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnPointerMove[a],++s):--n}if(null!=this.__cbOncePointerMove){for(var h=null,c=null,r=0,l=this.__cbOncePointerMove.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOncePointerMove[a],this.__cbOncePointerMove[a]=null,o=this.__cbOnceOwnerUnbindPointerMove[a],(this.__cbOnceOwnerUnbindPointerMove[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindPointerMove[a]),c.push(this.__cbOncePointerMove[a]))}this.__cbOnceOwnerUnbindPointerMove=h,this.__cbOncePointerMove=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onPointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerMove because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPointerMove&&(this.__cbOnOwnerUnbindPointerMove=[]),this.__cbOnOwnerUnbindPointerMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPointerMove&&(this.__cbOnOwnerUnbindPointerMove=[]),this.__cbOnOwnerUnbindPointerMove.push(null);null==this.__cbOnPointerMove&&(this.__cbOnPointerMove=[]),this.__cbOnPointerMove.push(t)},oncePointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event pointerMove because owner is destroyed!");var s=function(e){null!=t&&(i.offPointerMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPointerMove&&(this.__cbOnceOwnerUnbindPointerMove=[]),this.__cbOnceOwnerUnbindPointerMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPointerMove&&(this.__cbOnceOwnerUnbindPointerMove=[]),this.__cbOnceOwnerUnbindPointerMove.push(null);null==this.__cbOncePointerMove&&(this.__cbOncePointerMove=[]),this.__cbOncePointerMove.push(t)},offPointerMove:function(e){if(null!=e){var n;null!=this.__cbOnPointerMove&&-1!=(n=this.__cbOnPointerMove.indexOf(e))&&(this.__cbOnPointerMove.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPointerMove[n])&&r(),this.__cbOnOwnerUnbindPointerMove.splice(n,1)),null!=this.__cbOncePointerMove&&-1!=(n=this.__cbOncePointerMove.indexOf(e))&&(this.__cbOncePointerMove.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPointerMove[n])&&r(),this.__cbOnceOwnerUnbindPointerMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerMove){for(var t=0,i=this.__cbOnOwnerUnbindPointerMove.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPointerMove[s])&&r()}this.__cbOnOwnerUnbindPointerMove=null}if(null!=this.__cbOnceOwnerUnbindPointerMove){for(t=0,i=this.__cbOnceOwnerUnbindPointerMove.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPointerMove[s])&&r()}this.__cbOnceOwnerUnbindPointerMove=null}this.__cbOnPointerMove=null,this.__cbOncePointerMove=null}},listensPointerMove:function(){return null!=this.__cbOnPointerMove&&0<this.__cbOnPointerMove.length||null!=this.__cbOncePointerMove&&0<this.__cbOncePointerMove.length},emitMultiTouchPointerDown:function(e){var n=0;if(null!=this.__cbOnMultiTouchPointerDown&&(n+=this.__cbOnMultiTouchPointerDown.length),null!=this.__cbOnceMultiTouchPointerDown&&(n+=this.__cbOnceMultiTouchPointerDown.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnMultiTouchPointerDown)for(var r=0,l=this.__cbOnMultiTouchPointerDown.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnMultiTouchPointerDown[a],++s):--n}if(null!=this.__cbOnceMultiTouchPointerDown){for(var h=null,c=null,r=0,l=this.__cbOnceMultiTouchPointerDown.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceMultiTouchPointerDown[a],this.__cbOnceMultiTouchPointerDown[a]=null,o=this.__cbOnceOwnerUnbindMultiTouchPointerDown[a],(this.__cbOnceOwnerUnbindMultiTouchPointerDown[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindMultiTouchPointerDown[a]),c.push(this.__cbOnceMultiTouchPointerDown[a]))}this.__cbOnceOwnerUnbindMultiTouchPointerDown=h,this.__cbOnceMultiTouchPointerDown=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onMultiTouchPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event multiTouchPointerDown because owner is destroyed!");var s=function(e){null!=t&&(i.offMultiTouchPointerDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMultiTouchPointerDown&&(this.__cbOnOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnOwnerUnbindMultiTouchPointerDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMultiTouchPointerDown&&(this.__cbOnOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnOwnerUnbindMultiTouchPointerDown.push(null);null==this.__cbOnMultiTouchPointerDown&&(this.__cbOnMultiTouchPointerDown=[]),this.__cbOnMultiTouchPointerDown.push(t)},onceMultiTouchPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event multiTouchPointerDown because owner is destroyed!");var s=function(e){null!=t&&(i.offMultiTouchPointerDown(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMultiTouchPointerDown&&(this.__cbOnceOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnceOwnerUnbindMultiTouchPointerDown.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMultiTouchPointerDown&&(this.__cbOnceOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnceOwnerUnbindMultiTouchPointerDown.push(null);null==this.__cbOnceMultiTouchPointerDown&&(this.__cbOnceMultiTouchPointerDown=[]),this.__cbOnceMultiTouchPointerDown.push(t)},offMultiTouchPointerDown:function(e){if(null!=e){var n;null!=this.__cbOnMultiTouchPointerDown&&-1!=(n=this.__cbOnMultiTouchPointerDown.indexOf(e))&&(this.__cbOnMultiTouchPointerDown.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMultiTouchPointerDown[n])&&r(),this.__cbOnOwnerUnbindMultiTouchPointerDown.splice(n,1)),null!=this.__cbOnceMultiTouchPointerDown&&-1!=(n=this.__cbOnceMultiTouchPointerDown.indexOf(e))&&(this.__cbOnceMultiTouchPointerDown.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMultiTouchPointerDown[n])&&r(),this.__cbOnceOwnerUnbindMultiTouchPointerDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerDown.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMultiTouchPointerDown[s])&&r()}this.__cbOnOwnerUnbindMultiTouchPointerDown=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerDown.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMultiTouchPointerDown[s])&&r()}this.__cbOnceOwnerUnbindMultiTouchPointerDown=null}this.__cbOnMultiTouchPointerDown=null,this.__cbOnceMultiTouchPointerDown=null}},listensMultiTouchPointerDown:function(){return null!=this.__cbOnMultiTouchPointerDown&&0<this.__cbOnMultiTouchPointerDown.length||null!=this.__cbOnceMultiTouchPointerDown&&0<this.__cbOnceMultiTouchPointerDown.length},emitMultiTouchPointerUp:function(e){var n=0;if(null!=this.__cbOnMultiTouchPointerUp&&(n+=this.__cbOnMultiTouchPointerUp.length),null!=this.__cbOnceMultiTouchPointerUp&&(n+=this.__cbOnceMultiTouchPointerUp.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnMultiTouchPointerUp)for(var r=0,l=this.__cbOnMultiTouchPointerUp.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnMultiTouchPointerUp[a],++s):--n}if(null!=this.__cbOnceMultiTouchPointerUp){for(var h=null,c=null,r=0,l=this.__cbOnceMultiTouchPointerUp.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceMultiTouchPointerUp[a],this.__cbOnceMultiTouchPointerUp[a]=null,o=this.__cbOnceOwnerUnbindMultiTouchPointerUp[a],(this.__cbOnceOwnerUnbindMultiTouchPointerUp[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindMultiTouchPointerUp[a]),c.push(this.__cbOnceMultiTouchPointerUp[a]))}this.__cbOnceOwnerUnbindMultiTouchPointerUp=h,this.__cbOnceMultiTouchPointerUp=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onMultiTouchPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event multiTouchPointerUp because owner is destroyed!");var s=function(e){null!=t&&(i.offMultiTouchPointerUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMultiTouchPointerUp&&(this.__cbOnOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnOwnerUnbindMultiTouchPointerUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMultiTouchPointerUp&&(this.__cbOnOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnOwnerUnbindMultiTouchPointerUp.push(null);null==this.__cbOnMultiTouchPointerUp&&(this.__cbOnMultiTouchPointerUp=[]),this.__cbOnMultiTouchPointerUp.push(t)},onceMultiTouchPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event multiTouchPointerUp because owner is destroyed!");var s=function(e){null!=t&&(i.offMultiTouchPointerUp(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMultiTouchPointerUp&&(this.__cbOnceOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnceOwnerUnbindMultiTouchPointerUp.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMultiTouchPointerUp&&(this.__cbOnceOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnceOwnerUnbindMultiTouchPointerUp.push(null);null==this.__cbOnceMultiTouchPointerUp&&(this.__cbOnceMultiTouchPointerUp=[]),this.__cbOnceMultiTouchPointerUp.push(t)},offMultiTouchPointerUp:function(e){if(null!=e){var n;null!=this.__cbOnMultiTouchPointerUp&&-1!=(n=this.__cbOnMultiTouchPointerUp.indexOf(e))&&(this.__cbOnMultiTouchPointerUp.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMultiTouchPointerUp[n])&&r(),this.__cbOnOwnerUnbindMultiTouchPointerUp.splice(n,1)),null!=this.__cbOnceMultiTouchPointerUp&&-1!=(n=this.__cbOnceMultiTouchPointerUp.indexOf(e))&&(this.__cbOnceMultiTouchPointerUp.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMultiTouchPointerUp[n])&&r(),this.__cbOnceOwnerUnbindMultiTouchPointerUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerUp.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMultiTouchPointerUp[s])&&r()}this.__cbOnOwnerUnbindMultiTouchPointerUp=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerUp.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMultiTouchPointerUp[s])&&r()}this.__cbOnceOwnerUnbindMultiTouchPointerUp=null}this.__cbOnMultiTouchPointerUp=null,this.__cbOnceMultiTouchPointerUp=null}},listensMultiTouchPointerUp:function(){return null!=this.__cbOnMultiTouchPointerUp&&0<this.__cbOnMultiTouchPointerUp.length||null!=this.__cbOnceMultiTouchPointerUp&&0<this.__cbOnceMultiTouchPointerUp.length},emitMultiTouchPointerMove:function(e){var n=0;if(null!=this.__cbOnMultiTouchPointerMove&&(n+=this.__cbOnMultiTouchPointerMove.length),null!=this.__cbOnceMultiTouchPointerMove&&(n+=this.__cbOnceMultiTouchPointerMove.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnMultiTouchPointerMove)for(var r=0,l=this.__cbOnMultiTouchPointerMove.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnMultiTouchPointerMove[a],++s):--n}if(null!=this.__cbOnceMultiTouchPointerMove){for(var h=null,c=null,r=0,l=this.__cbOnceMultiTouchPointerMove.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceMultiTouchPointerMove[a],this.__cbOnceMultiTouchPointerMove[a]=null,o=this.__cbOnceOwnerUnbindMultiTouchPointerMove[a],(this.__cbOnceOwnerUnbindMultiTouchPointerMove[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindMultiTouchPointerMove[a]),c.push(this.__cbOnceMultiTouchPointerMove[a]))}this.__cbOnceOwnerUnbindMultiTouchPointerMove=h,this.__cbOnceMultiTouchPointerMove=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onMultiTouchPointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event multiTouchPointerMove because owner is destroyed!");var s=function(e){null!=t&&(i.offMultiTouchPointerMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMultiTouchPointerMove&&(this.__cbOnOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnOwnerUnbindMultiTouchPointerMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMultiTouchPointerMove&&(this.__cbOnOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnOwnerUnbindMultiTouchPointerMove.push(null);null==this.__cbOnMultiTouchPointerMove&&(this.__cbOnMultiTouchPointerMove=[]),this.__cbOnMultiTouchPointerMove.push(t)},onceMultiTouchPointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event multiTouchPointerMove because owner is destroyed!");var s=function(e){null!=t&&(i.offMultiTouchPointerMove(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMultiTouchPointerMove&&(this.__cbOnceOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnceOwnerUnbindMultiTouchPointerMove.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMultiTouchPointerMove&&(this.__cbOnceOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnceOwnerUnbindMultiTouchPointerMove.push(null);null==this.__cbOnceMultiTouchPointerMove&&(this.__cbOnceMultiTouchPointerMove=[]),this.__cbOnceMultiTouchPointerMove.push(t)},offMultiTouchPointerMove:function(e){if(null!=e){var n;null!=this.__cbOnMultiTouchPointerMove&&-1!=(n=this.__cbOnMultiTouchPointerMove.indexOf(e))&&(this.__cbOnMultiTouchPointerMove.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMultiTouchPointerMove[n])&&r(),this.__cbOnOwnerUnbindMultiTouchPointerMove.splice(n,1)),null!=this.__cbOnceMultiTouchPointerMove&&-1!=(n=this.__cbOnceMultiTouchPointerMove.indexOf(e))&&(this.__cbOnceMultiTouchPointerMove.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMultiTouchPointerMove[n])&&r(),this.__cbOnceOwnerUnbindMultiTouchPointerMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerMove){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerMove.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMultiTouchPointerMove[s])&&r()}this.__cbOnOwnerUnbindMultiTouchPointerMove=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerMove){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerMove.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMultiTouchPointerMove[s])&&r()}this.__cbOnceOwnerUnbindMultiTouchPointerMove=null}this.__cbOnMultiTouchPointerMove=null,this.__cbOnceMultiTouchPointerMove=null}},listensMultiTouchPointerMove:function(){return null!=this.__cbOnMultiTouchPointerMove&&0<this.__cbOnMultiTouchPointerMove.length||null!=this.__cbOnceMultiTouchPointerMove&&0<this.__cbOnceMultiTouchPointerMove.length},emitFocus:function(e){var n=0;if(null!=this.__cbOnFocus&&(n+=this.__cbOnFocus.length),null!=this.__cbOnceFocus&&(n+=this.__cbOnceFocus.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnFocus)for(var r=0,l=this.__cbOnFocus.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnFocus[a],++s):--n}if(null!=this.__cbOnceFocus){for(var h=null,c=null,r=0,l=this.__cbOnceFocus.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceFocus[a],this.__cbOnceFocus[a]=null,o=this.__cbOnceOwnerUnbindFocus[a],(this.__cbOnceOwnerUnbindFocus[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindFocus[a]),c.push(this.__cbOnceFocus[a]))}this.__cbOnceOwnerUnbindFocus=h,this.__cbOnceFocus=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event focus because owner is destroyed!");var s=function(e){null!=t&&(i.offFocus(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(null);null==this.__cbOnFocus&&(this.__cbOnFocus=[]),this.__cbOnFocus.push(t)},onceFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event focus because owner is destroyed!");var s=function(e){null!=t&&(i.offFocus(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(null);null==this.__cbOnceFocus&&(this.__cbOnceFocus=[]),this.__cbOnceFocus.push(t)},offFocus:function(e){if(null!=e){var n;null!=this.__cbOnFocus&&-1!=(n=this.__cbOnFocus.indexOf(e))&&(this.__cbOnFocus.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFocus[n])&&r(),this.__cbOnOwnerUnbindFocus.splice(n,1)),null!=this.__cbOnceFocus&&-1!=(n=this.__cbOnceFocus.indexOf(e))&&(this.__cbOnceFocus.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFocus[n])&&r(),this.__cbOnceOwnerUnbindFocus.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFocus){for(var t=0,i=this.__cbOnOwnerUnbindFocus.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFocus[s])&&r()}this.__cbOnOwnerUnbindFocus=null}if(null!=this.__cbOnceOwnerUnbindFocus){for(t=0,i=this.__cbOnceOwnerUnbindFocus.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFocus[s])&&r()}this.__cbOnceOwnerUnbindFocus=null}this.__cbOnFocus=null,this.__cbOnceFocus=null}},listensFocus:function(){return null!=this.__cbOnFocus&&0<this.__cbOnFocus.length||null!=this.__cbOnceFocus&&0<this.__cbOnceFocus.length},emitBlur:function(e){var n=0;if(null!=this.__cbOnBlur&&(n+=this.__cbOnBlur.length),null!=this.__cbOnceBlur&&(n+=this.__cbOnceBlur.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnBlur)for(var r=0,l=this.__cbOnBlur.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnBlur[a],++s):--n}if(null!=this.__cbOnceBlur){for(var h=null,c=null,r=0,l=this.__cbOnceBlur.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceBlur[a],this.__cbOnceBlur[a]=null,o=this.__cbOnceOwnerUnbindBlur[a],(this.__cbOnceOwnerUnbindBlur[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindBlur[a]),c.push(this.__cbOnceBlur[a]))}this.__cbOnceOwnerUnbindBlur=h,this.__cbOnceBlur=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event blur because owner is destroyed!");var s=function(e){null!=t&&(i.offBlur(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(null);null==this.__cbOnBlur&&(this.__cbOnBlur=[]),this.__cbOnBlur.push(t)},onceBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event blur because owner is destroyed!");var s=function(e){null!=t&&(i.offBlur(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(null);null==this.__cbOnceBlur&&(this.__cbOnceBlur=[]),this.__cbOnceBlur.push(t)},offBlur:function(e){if(null!=e){var n;null!=this.__cbOnBlur&&-1!=(n=this.__cbOnBlur.indexOf(e))&&(this.__cbOnBlur.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBlur[n])&&r(),this.__cbOnOwnerUnbindBlur.splice(n,1)),null!=this.__cbOnceBlur&&-1!=(n=this.__cbOnceBlur.indexOf(e))&&(this.__cbOnceBlur.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBlur[n])&&r(),this.__cbOnceOwnerUnbindBlur.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBlur){for(var t=0,i=this.__cbOnOwnerUnbindBlur.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBlur[s])&&r()}this.__cbOnOwnerUnbindBlur=null}if(null!=this.__cbOnceOwnerUnbindBlur){for(t=0,i=this.__cbOnceOwnerUnbindBlur.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBlur[s])&&r()}this.__cbOnceOwnerUnbindBlur=null}this.__cbOnBlur=null,this.__cbOnceBlur=null}},listensBlur:function(){return null!=this.__cbOnBlur&&0<this.__cbOnBlur.length||null!=this.__cbOnceBlur&&0<this.__cbOnceBlur.length},backendReady:function(){var f=this;ae.app.backend.screen.onResize(this,$bind(this,this.resize)),this.resize(),ae.app.settings.onBackgroundChange(this,function(e,n){ae.app.backend.screen.setBackground(e)}),ae.app.settings.onTitleChange(this,function(e,n){ae.app.backend.screen.setWindowTitle(e)}),ae.app.settings.onFullscreenChange(this,function(e,n){ae.app.backend.screen.setWindowFullscreen(e)}),ae.app.settings.onScalingChange(this,function(e,n){f.resize()}),ae.app.settings.onTargetWidthChange(this,function(e,n){f.resize()}),ae.app.settings.onTargetHeightChange(this,function(e,n){f.resize()}),ae.app.settings.onTargetDensityChange(this,function(e,n){f.updateTexturesDensity()}),this.matrix.onChange(this,function(){(e=f.reverseMatrix).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0;var e=f.reverseMatrix,n=f.matrix,t=e.a*n.a+e.b*n.c,i=(e.b=e.a*n.b+e.b*n.d,e.a=t,e.c*n.a+e.d*n.c),i=(e.d=e.c*n.b+e.d*n.d,e.c=i,e.tx*n.a+e.ty*n.c+n.tx);e.ty=e.tx*n.b+e.ty*n.d+n.ty,e.tx=i,e.changedDirty=!0;n=(e=f.reverseMatrix).a*e.d-e.b*e.c;0==n?(e.a=e.b=e.c=e.d=0,e.tx=-e.tx,e.ty=-e.ty):(t=e.d*(n=1/n),e.d=e.a*n,e.a=t,e.b*=-n,e.c*=-n,i=-e.a*e.tx-e.c*e.ty,e.ty=-e.b*e.tx-e.d*e.ty,e.tx=i),e.changedDirty=!0,f.reverseMatrix.emitChange()}),ae.app.backend.screen.onMouseDown(this,function(d,b,p){ae.app.beginUpdateCallbacks.push(function(){ae.app.flushImmediate();for(var e=b*J.app.screenDensity,n=p*J.app.screenDensity,t=f.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=f.reverseMatrix).b+n*t.d+t.ty,n=new bt(-1,d,i,e,0<=i&&i<=f.width&&0<=e&&e<=f.height),t=(-1!=n.buttonId&&(f.mouseX=n.x,f.mouseY=n.y),-1!=n.touchIndex&&(null==(u=f.touches.get(n.touchIndex))?(u=new dt(n.touchIndex,n.x,n.y,0,0),f.touches.set(n.touchIndex,u)):(u.x=n.x,u.y=n.y)),f.pointerX),s=f.pointerY,r=0,l=0,a=0,h=f.touches,c=0,o=h.values.length;;){for(;c<o&&null==h.values[c];)++c;if(!(c<o))break;var u,_=c++;++r,l+=(u=h.values[_]).x,a+=u.y}0<r?(f.pointerX=l/r,f.pointerY=a/r):(f.pointerX=f.mouseX,f.pointerY=f.mouseY),f.pointerDeltaX+=f.pointerX-t,f.pointerDeltaY+=f.pointerY-s,f.emitMouseDown(d,i,e),f._numPointerDown++,f.emitMultiTouchPointerDown(n),1==f._numPointerDown&&f.emitPointerDown(n)})}),ae.app.backend.screen.onMouseUp(this,function(d,b,p){ae.app.beginUpdateCallbacks.push(function(){ae.app.flushImmediate();for(var e=b*J.app.screenDensity,n=p*J.app.screenDensity,t=f.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=f.reverseMatrix).b+n*t.d+t.ty,n=new bt(-1,d,i,e,0<=i&&i<=f.width&&0<=e&&e<=f.height),t=(-1!=n.buttonId&&(f.mouseX=n.x,f.mouseY=n.y),-1!=n.touchIndex&&(null==(u=f.touches.get(n.touchIndex))?(u=new dt(n.touchIndex,n.x,n.y,0,0),f.touches.set(n.touchIndex,u)):(u.x=n.x,u.y=n.y)),f.pointerX),s=f.pointerY,r=0,l=0,a=0,h=f.touches,c=0,o=h.values.length;;){for(;c<o&&null==h.values[c];)++c;if(!(c<o))break;var u,_=c++;++r,l+=(u=h.values[_]).x,a+=u.y}0<r?(f.pointerX=l/r,f.pointerY=a/r):(f.pointerX=f.mouseX,f.pointerY=f.mouseY),f.pointerDeltaX+=f.pointerX-t,f.pointerDeltaY+=f.pointerY-s,-1!=n.touchIndex&&f.touches.set(n.touchIndex,null),f.emitMouseUp(d,i,e),f._numPointerDown--,f.emitMultiTouchPointerUp(n),0==f._numPointerDown&&f.emitPointerUp(n)})}),ae.app.backend.screen.onMouseMove(this,function(d,b){ae.app.beginUpdateCallbacks.push(function(){ae.app.flushImmediate();for(var e=d*J.app.screenDensity,n=b*J.app.screenDensity,t=f.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=f.reverseMatrix).b+n*t.d+t.ty,n=new bt(-1,-1,i,e,0<=i&&i<=f.width&&0<=e&&e<=f.height),t=(f.mouseX=n.x,f.mouseY=n.y,-1!=n.touchIndex&&(null==(u=f.touches.get(n.touchIndex))?(u=new dt(n.touchIndex,n.x,n.y,0,0),f.touches.set(n.touchIndex,u)):(u.x=n.x,u.y=n.y)),f.pointerX),s=f.pointerY,r=0,l=0,a=0,h=f.touches,c=0,o=h.values.length;;){for(;c<o&&null==h.values[c];)++c;if(!(c<o))break;var u,_=c++;++r,l+=(u=h.values[_]).x,a+=u.y}0<r?(f.pointerX=l/r,f.pointerY=a/r):(f.pointerX=f.mouseX,f.pointerY=f.mouseY),f.pointerDeltaX+=f.pointerX-t,f.pointerDeltaY+=f.pointerY-s,f.emitMouseMove(i,e),f.emitMultiTouchPointerMove(n),f.emitPointerMove(n)})}),ae.app.backend.screen.onMouseWheel(this,function(e,n){ae.app.beginUpdateCallbacks.push(function(){f.emitMouseWheel(e,n)})}),ae.app.backend.screen.onTouchDown(this,function(d,b,p){ae.app.beginUpdateCallbacks.push(function(){ae.app.flushImmediate();for(var e=b*J.app.screenDensity,n=p*J.app.screenDensity,t=f.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=f.reverseMatrix).b+n*t.d+t.ty,n=new bt(d,-1,i,e,0<=i&&i<=f.width&&0<=e&&e<=f.height),t=(-1!=n.buttonId&&(f.mouseX=n.x,f.mouseY=n.y),-1!=n.touchIndex&&(null==(u=f.touches.get(n.touchIndex))?(u=new dt(n.touchIndex,n.x,n.y,0,0),f.touches.set(n.touchIndex,u)):(u.x=n.x,u.y=n.y)),f.pointerX),s=f.pointerY,r=0,l=0,a=0,h=f.touches,c=0,o=h.values.length;;){for(;c<o&&null==h.values[c];)++c;if(!(c<o))break;var u,_=c++;++r,l+=(u=h.values[_]).x,a+=u.y}0<r?(f.pointerX=l/r,f.pointerY=a/r):(f.pointerX=f.mouseX,f.pointerY=f.mouseY),f.pointerDeltaX+=f.pointerX-t,f.pointerDeltaY+=f.pointerY-s,f.emitTouchDown(d,i,e),f._numPointerDown++,f.emitMultiTouchPointerDown(n),1==f._numPointerDown&&f.emitPointerDown(n)})}),ae.app.backend.screen.onTouchUp(this,function(d,b,p){ae.app.beginUpdateCallbacks.push(function(){ae.app.flushImmediate();for(var e=b*J.app.screenDensity,n=p*J.app.screenDensity,t=f.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=f.reverseMatrix).b+n*t.d+t.ty,n=new bt(d,-1,i,e,0<=i&&i<=f.width&&0<=e&&e<=f.height),t=(-1!=n.buttonId&&(f.mouseX=n.x,f.mouseY=n.y),-1!=n.touchIndex&&(null==(u=f.touches.get(n.touchIndex))?(u=new dt(n.touchIndex,n.x,n.y,0,0),f.touches.set(n.touchIndex,u)):(u.x=n.x,u.y=n.y)),f.pointerX),s=f.pointerY,r=0,l=0,a=0,h=f.touches,c=0,o=h.values.length;;){for(;c<o&&null==h.values[c];)++c;if(!(c<o))break;var u,_=c++;++r,l+=(u=h.values[_]).x,a+=u.y}0<r?(f.pointerX=l/r,f.pointerY=a/r):(f.pointerX=f.mouseX,f.pointerY=f.mouseY),f.pointerDeltaX+=f.pointerX-t,f.pointerDeltaY+=f.pointerY-s,-1!=n.touchIndex&&f.touches.set(n.touchIndex,null),f.emitTouchUp(d,i,e),f._numPointerDown--,f.emitMultiTouchPointerUp(n),0==f._numPointerDown&&f.emitPointerUp(n)})}),ae.app.backend.screen.onTouchMove(this,function(d,b,p){ae.app.beginUpdateCallbacks.push(function(){ae.app.flushImmediate();for(var e=b*J.app.screenDensity,n=p*J.app.screenDensity,t=f.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=f.reverseMatrix).b+n*t.d+t.ty,n=new bt(d,-1,i,e,0<=i&&i<=f.width&&0<=e&&e<=f.height),t=(-1!=n.touchIndex&&(null==(u=f.touches.get(n.touchIndex))?(u=new dt(n.touchIndex,n.x,n.y,0,0),f.touches.set(n.touchIndex,u)):(u.x=n.x,u.y=n.y)),f.pointerX),s=f.pointerY,r=0,l=0,a=0,h=f.touches,c=0,o=h.values.length;;){for(;c<o&&null==h.values[c];)++c;if(!(c<o))break;var u,_=c++;++r,l+=(u=h.values[_]).x,a+=u.y}0<r?(f.pointerX=l/r,f.pointerY=a/r):(f.pointerX=f.mouseX,f.pointerY=f.mouseY),f.pointerDeltaX+=f.pointerX-t,f.pointerDeltaY+=f.pointerY-s,f.emitTouchMove(d,i,e),f.emitMultiTouchPointerMove(n),0<f._numPointerDown&&f.emitPointerMove(n)})})},updatePointerOverState:function(e){for(var n=this.mouseX,t=this.mouseY,i=1e4,s=this.matchedOverListeners.h[i],r=((h=this.matchFirstOverListener(n,t))!=s&&(null!=h?this.matchedOverListeners.h[i]=h:this.matchedOverListeners.remove(i)),null!=s&&s!=h&&0<=s._lifecycleState&&0<s._numPointerOver&&(s._numPointerOver--,0!=s._numPointerOver&&!s.multiTouch||s.emitPointerOut(new bt(-1,-1,n,t,!1))),null!=h&&s!=h&&(h._numPointerOver++,1!=h._numPointerOver&&!h.multiTouch||h.emitPointerOver(new bt(-1,-1,n,t,!0))),this.touches),l=0,a=r.values.length;;){for(;l<a&&null==r.values[l];)++l;if(!(l<a))break;var h,c=l++,c=r.values[c],n=c.x,t=c.y,i=2e4+c.index,s=this.matchedOverListeners.h[i];(h=this.matchFirstOverListener(n,t))!=s&&(null!=h?this.matchedOverListeners.h[i]=h:this.matchedOverListeners.remove(i)),null!=s&&s!=h&&0<=s._lifecycleState&&0<s._numPointerOver&&(s._numPointerOver--,0!=s._numPointerOver&&!s.multiTouch||s.emitPointerOut(new bt(-1,-1,n,t,!1))),null!=h&&s!=h&&(h._numPointerOver++,1!=h._numPointerOver&&!h.multiTouch||h.emitPointerOver(new bt(-1,-1,n,t,!0)))}},resize:function(){var e,n,t;this.resizing||(this.resizing=!0,this.updateScaling(),e=ae.app.settings.get_scaling(),n=ae.app.settings.get_targetWidth(),t=ae.app.settings.get_targetHeight(),this.emitResize(),e==ae.app.settings.get_scaling()&&n==ae.app.settings.get_targetWidth()&&t==ae.app.settings.get_targetHeight()||this.updateScaling(),this.updateTransform(),this.updateTexturesDensity(),this.resizing=!1)},updateTexturesDensity:function(){var e;0<ae.app.settings.get_targetDensity()?this.set_texturesDensity(ae.app.settings.get_targetDensity()):(e=(e=this.density)<1?1:Math.round(e),this.set_texturesDensity(e))},updateScaling:function(){var e,n=0<ae.app.settings.get_targetWidth()?ae.app.settings.get_targetWidth():J.app.screenWidth,t=0<ae.app.settings.get_targetHeight()?ae.app.settings.get_targetHeight():J.app.screenHeight;switch(ae.app.settings.get_scaling()._hx_index){case 0:e=Math.max(n/(J.app.screenWidth*J.app.screenDensity),t/(J.app.screenHeight*J.app.screenDensity));break;case 1:e=Math.min(n/(J.app.screenWidth*J.app.screenDensity),t/(J.app.screenHeight*J.app.screenDensity));break;case 2:n=J.app.screenWidth,t=J.app.screenHeight,e=Math.max(n/(J.app.screenWidth*J.app.screenDensity),t/(J.app.screenHeight*J.app.screenDensity));break;case 3:var i=J.app.screenHeight/J.app.screenWidth,s=t/n;s<i?t=n*i:i<s&&(n=t/i),n=Math.ceil(n),t=Math.ceil(t),e=Math.max(n/(J.app.screenWidth*J.app.screenDensity),t/(J.app.screenHeight*J.app.screenDensity))}switch(this.actualWidth=Math.ceil(J.app.screenWidth*J.app.screenDensity*e),this.actualHeight=Math.ceil(J.app.screenHeight*J.app.screenDensity*e),this.density=1/e,ae.app.settings.get_scaling()._hx_index){case 0:case 1:this.offsetX=.5*(this.actualWidth-n),this.offsetY=.5*(this.actualHeight-t);break;case 2:case 3:this.offsetX=0,this.offsetY=0}this.width=n,this.height=t},updateTransform:function(){var e=0<ae.app.settings.get_targetWidth()?ae.app.settings.get_targetWidth()*this.density:J.app.screenWidth*J.app.screenDensity,n=0<ae.app.settings.get_targetHeight()?ae.app.settings.get_targetHeight()*this.density:J.app.screenHeight*J.app.screenDensity;switch(ae.app.settings.get_scaling()._hx_index){case 2:e=J.app.screenWidth*J.app.screenDensity,n=J.app.screenHeight*J.app.screenDensity;break;case 3:var t=J.app.screenHeight/J.app.screenWidth,i=n/e;i<t?n=e*t:t<i&&(e=n/t)}(s=this.matrix).a=1,s.b=0,s.c=0,s.d=1,s.tx=0,s.ty=0,s.changedDirty=!0;var s=this.matrix,r=this.density,l=this.density,r=(s.a*=r,s.b*=l,s.c*=r,s.d*=l,s.tx*=r,s.ty*=l,s.changedDirty=!0,.5*(J.app.screenWidth*J.app.screenDensity-e)),l=.5*(J.app.screenHeight*J.app.screenDensity-n);(s=this.matrix).tx+=r,s.ty+=l,s.changedDirty=!0},matchFirstDownListener:function(e,n,t,i){null==i&&(i=-1),null==t&&(t=-1),ae.app.computeHierarchy();for(var s=0;s<2;)for(var r=s++,l=(Kn.matchedHitVisual=null,0==r),a=ae.app.visuals,h=a.length-1;0<=h;){var c=a[h];if(0<=c._lifecycleState&&c.computedTouchable){var o=null!=c.__cbOnPointerDown&&0<c.__cbOnPointerDown.length||null!=c.__cbOncePointerDown&&0<c.__cbOncePointerDown.length,u=!1,_=!1;if(o&&(u=c._hits(e,n,!1))&&(_=c.interceptPointerDown(c,e,n,t,i)),u&&!_||l&&this.isHitVisual(c)&&c._hits(e,n,!1)){var d=!1;if(o)for(var b=c.parent;null!=b&&!(d=b.interceptPointerDown(c,e,n,t,i));)b=b.parent;if(!d){if(o||!l||!this.isHitVisual(c))return Kn.matchedHitVisual=null,c;Kn.matchedHitVisual=c}}}--h}return Kn.matchedHitVisual=null},matchFirstOverListener:function(e,n){if(this.visualsListenPointerOver){ae.app.computeHierarchy();for(var t=0;t<2;)for(var i=t++,s=(Kn.matchedHitVisual=null,0==i),r=ae.app.visuals,l=r.length-1;0<=l;){var a=r[l];if(0<=a._lifecycleState&&a.computedTouchable){var h=null!=a.__cbOnPointerOver&&0<a.__cbOnPointerOver.length||null!=a.__cbOncePointerOver&&0<a.__cbOncePointerOver.length,c=!1,o=!1;if(h&&(c=a._hits(e,n,!1))&&(o=a.interceptPointerOver(a,e,n)),c&&!o||s&&this.isHitVisual(a)&&a._hits(e,n,!1)){var u=!1;if(h)for(var _=a.parent;null!=_&&!(u=_.interceptPointerOver(a,e,n));)_=_.parent;if(!u){if(h||!s||!this.isHitVisual(a))return Kn.matchedHitVisual=null,a;Kn.matchedHitVisual=a}}}--l}Kn.matchedHitVisual=null}return null},prepareMultiTouchPointerDown:function(e){-1!=e.buttonId&&(this.mouseX=e.x,this.mouseY=e.y),-1!=e.touchIndex&&(null==(h=this.touches.get(e.touchIndex))?(h=new dt(e.touchIndex,e.x,e.y,0,0),this.touches.set(e.touchIndex,h)):(h.x=e.x,h.y=e.y));for(var e=this.pointerX,n=this.pointerY,t=0,i=0,s=0,r=this.touches,l=0,a=r.values.length;;){for(;l<a&&null==r.values[l];)++l;if(!(l<a))break;var h,c=l++;++t,i+=(h=r.values[c]).x,s+=h.y}0<t?(this.pointerX=i/t,this.pointerY=s/t):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-e,this.pointerDeltaY+=this.pointerY-n},prepareMultiTouchPointerUp:function(e){-1!=e.buttonId&&(this.mouseX=e.x,this.mouseY=e.y),-1!=e.touchIndex&&(null==(c=this.touches.get(e.touchIndex))?(c=new dt(e.touchIndex,e.x,e.y,0,0),this.touches.set(e.touchIndex,c)):(c.x=e.x,c.y=e.y));for(var n=this.pointerX,t=this.pointerY,i=0,s=0,r=0,l=this.touches,a=0,h=l.values.length;;){for(;a<h&&null==l.values[a];)++a;if(!(a<h))break;var c,o=a++;++i,s+=(c=l.values[o]).x,r+=c.y}0<i?(this.pointerX=s/i,this.pointerY=r/i):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-n,this.pointerDeltaY+=this.pointerY-t,-1!=e.touchIndex&&this.touches.set(e.touchIndex,null)},prepareMultiTouchPointerMove:function(e,n){n&&(this.mouseX=e.x,this.mouseY=e.y),-1!=e.touchIndex&&(null==(h=this.touches.get(e.touchIndex))?(h=new dt(e.touchIndex,e.x,e.y,0,0),this.touches.set(e.touchIndex,h)):(h.x=e.x,h.y=e.y));for(var n=this.pointerX,e=this.pointerY,t=0,i=0,s=0,r=this.touches,l=0,a=r.values.length;;){for(;l<a&&null==r.values[l];)++l;if(!(l<a))break;var h,c=l++;++t,i+=(h=r.values[c]).x,s+=h.y}0<t?(this.pointerX=i/t,this.pointerY=s/t):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-n,this.pointerDeltaY+=this.pointerY-e},updatePointer:function(){for(var e=this.pointerX,n=this.pointerY,t=0,i=0,s=0,r=this.touches,l=0,a=r.values.length;;){for(;l<a&&null==r.values[l];)++l;if(!(l<a))break;var h=l++,h=r.values[h];++t,i+=h.x,s+=h.y}0<t?(this.pointerX=i/t,this.pointerY=s/t):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-e,this.pointerDeltaY+=this.pointerY-n},didEmitMouseDown:function(e,n,t){var i=this.matchFirstDownListener(n,t,-1,e);null!=i&&(i._numPointerDown++,1!=i._numPointerDown&&!i.multiTouch||(ae.app.screen.set_focusedVisual(i),i.emitPointerDown(new bt(-1,e,n,t,!0)))),this.matchedDownListeners.h[1e4+e]=i},didEmitMouseUp:function(e,n,t){var i=1e4+e,s=this.matchedDownListeners.h[i];null!=s&&0<=s._lifecycleState&&0<s._numPointerDown&&(s._numPointerDown--,0!=s._numPointerDown&&!s.multiTouch||s.emitPointerUp(new bt(-1,e,n,t,s._hits(n,t,!1)))),this.matchedDownListeners.remove(i)},updateMouseOver:function(e,n){var t=this.matchedOverListeners.h[1e4],i=this.matchFirstOverListener(e,n);i!=t&&(null!=i?this.matchedOverListeners.h[1e4]=i:this.matchedOverListeners.remove(1e4)),null!=t&&t!=i&&0<=t._lifecycleState&&0<t._numPointerOver&&(t._numPointerOver--,0!=t._numPointerOver&&!t.multiTouch||t.emitPointerOut(new bt(-1,-1,e,n,!1))),null!=i&&t!=i&&(i._numPointerOver++,1!=i._numPointerOver&&!i.multiTouch||i.emitPointerOver(new bt(-1,-1,e,n,!0)))},didEmitTouchDown:function(e,n,t){var i=this.matchFirstDownListener(n,t,e,-1);null!=i&&(i._numPointerDown++,1!=i._numPointerDown&&!i.multiTouch||(ae.app.screen.set_focusedVisual(i),i.emitPointerDown(new bt(e,-1,n,t,!0)))),this.matchedDownListeners.h[2e4+e]=i},didEmitTouchUp:function(e,n,t){var i=2e4+e,s=this.matchedDownListeners.h[i];null!=s&&0<=s._lifecycleState&&0<s._numPointerDown&&(s._numPointerDown--,0!=s._numPointerDown&&!s.multiTouch||s.emitPointerUp(new bt(e,-1,n,t,s._hits(n,t,!1)))),this.matchedDownListeners.remove(i)},updateTouchOver:function(e,n,t){var e=2e4+e,i=this.matchedOverListeners.h[e],s=this.matchFirstOverListener(n,t);s!=i&&(null!=s?this.matchedOverListeners.h[e]=s:this.matchedOverListeners.remove(e)),null!=i&&i!=s&&0<=i._lifecycleState&&0<i._numPointerOver&&(i._numPointerOver--,0!=i._numPointerOver&&!i.multiTouch||i.emitPointerOut(new bt(-1,-1,n,t,!1))),null!=s&&i!=s&&(s._numPointerOver++,1!=s._numPointerOver&&!s.multiTouch||s.emitPointerOver(new bt(-1,-1,n,t,!0)))},addHitVisual:function(e){var n=8==(8&e.flags);this.hitVisuals.push(e),n||(e.flags|=8)},removeHitVisual:function(e){var n=this.hitVisuals.indexOf(e);-1==n?ae.app.logger.warning("Hit visual not removed from hitVisuals because it was not added at the first place",{fileName:"../../../../ceramic/runtime/src/ceramic/Screen.hx",lineNumber:1349,className:"ceramic.Screen",methodName:"removeHitVisual"}):(this.hitVisuals.splice(n,1),-1==this.hitVisuals.indexOf(e)&&(e.flags&=-9))},isHitVisual:function(e){return 8==(8&e.flags)},resetDeltas:function(){this.pointerDeltaX=0,this.pointerDeltaY=0,this.mouseDeltaX=0,this.mouseDeltaY=0,this.mouseWheelDeltaX=0;for(var e=this.mouseWheelDeltaY=0;e<=this.maxTouchIndex;){var n=this.touches.get(e);null!=n&&(n.deltaX=0,n.deltaY=0),++e}},willEmitMouseMove:function(e,n){this.mouseDeltaX+=e-this.prevMouseX,this.mouseDeltaY+=n-this.prevMouseY,this.prevMouseX=e,this.prevMouseY=n},willEmitMouseDown:function(n,e,t){var i=this,e=(this.prevMouseX=e,this.prevMouseY=t,this.pressedMouseButtons.intMap.h[0|n]),t=null!=e?e:0;this.pressedMouseButtons.set(n,(t=-1==t?0:t)+1),0==t&&ae.app.beginUpdateCallbacks.push(function(){var e=i.pressedMouseButtons.intMap.h[0|n];1==(null!=e?e:0)&&i.pressedMouseButtons.set(n,2)})},willEmitMouseUp:function(n,e,t){var i=this;this.pressedMouseButtons.set(n,-1),ae.app.beginUpdateCallbacks.push(function(){var e=i.pressedMouseButtons.intMap.h[0|n];-1==(null!=e?e:0)&&i.pressedMouseButtons.set(n,0)})},willEmitMouseWheel:function(e,n){this.mouseWheelDeltaX+=e,this.mouseWheelDeltaY+=n},mouseAllowed:function(e){return!0},_mousePressed:function(e){e=this.pressedMouseButtons.intMap.h[0|e];return 0<(null!=e?e:0)},_mouseJustPressed:function(e){e=this.pressedMouseButtons.intMap.h[0|e];return 1==(null!=e?e:0)},_mouseJustReleased:function(e){e=this.pressedMouseButtons.intMap.h[0|e];return-1==(null!=e?e:0)},willEmitTouchMove:function(e,n,t){e>this.maxTouchIndex&&(this.maxTouchIndex=e);var i=2*e,s=this.prevTouchPositions.intMap.h[0|i],r=null!=s?s:0,i=null!=(s=this.prevTouchPositions.intMap.h[0|1+i])?s:0,s=this.touches.get(e);null!=s&&(s.deltaX+=n-r,s.deltaY+=t-i)},willEmitTouchDown:function(n,e,t){var i=this,s=2*n,r=1+s,s=(this.prevTouchPositions.set(s,e),this.prevTouchPositions.set(r,t),this.pressedTouches.intMap.h[0|n]),e=null!=s?s:0;this.pressedTouches.set(n,(e=-1==e?0:e)+1),0==e&&ae.app.beginUpdateCallbacks.push(function(){var e=i.pressedTouches.intMap.h[0|n];1==(null!=e?e:0)&&i.pressedTouches.set(n,2)})},willEmitTouchUp:function(n,e,t){var i=this,s=this.pressedTouches.intMap.h[0|n];1==(null!=s?s:0)?this.pressedTouches.set(n,-2):this.pressedTouches.set(n,-1),ae.app.beginUpdateCallbacks.push(function(){var e=i.pressedTouches.intMap.h[0|n],e=null!=e?e:0;-1!=e&&-2!=e||i.pressedTouches.set(n,0)})},_touchPressed:function(e){e=this.pressedTouches.intMap.h[0|e];return 0<(null!=e?e:0)},_touchJustPressed:function(e){e=this.pressedTouches.intMap.h[0|e],e=null!=e?e:0;return 1==e||-2==e},_touchJustReleased:function(e){e=this.pressedTouches.intMap.h[0|e],e=null!=e?e:0;return-1==e||-2==e},touchDeltaX:function(e){e=this.touches.get(e);return null!=e?e.deltaX:0},touchDeltaY:function(e){e=this.touches.get(e);return null!=e?e.deltaY:0},toTexture:function(n){ae.app.backend.screen.screenshotToTexture(function(e){null!=e?(e=new Fn(e,J.app.screenDensity),n(e)):n(null)})},toPixels:function(e){ae.app.backend.screen.screenshotToPixels(e)},_toPng:function(e,n){ae.app.onceFinishDraw(this,function(){ae.app.backend.screen.screenshotToPng(e,n)})},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offFocusedVisualChange(),this.offTexturesDensityChange(),this.offResize(),this.offMouseDown(),this.offMouseUp(),this.offMouseWheel(),this.offMouseMove(),this.offTouchDown(),this.offTouchUp(),this.offTouchMove(),this.offPointerDown(),this.offPointerUp(),this.offPointerMove(),this.offMultiTouchPointerDown(),this.offMultiTouchPointerUp(),this.offMultiTouchPointerMove(),this.offFocus(),this.offBlur()},__class__:Kn,__properties__:$extend(h.prototype.__properties__,{get_isPointerDown:"get_isPointerDown",set_texturesDensity:"set_texturesDensity",get_texturesDensity:"get_texturesDensity",set_unobservedFocusedVisual:"set_unobservedFocusedVisual",set_focusedVisual:"set_focusedVisual",get_focusedVisual:"get_focusedVisual",get_nativeDensity:"get_nativeDensity",get_nativeHeight:"get_nativeHeight",get_nativeWidth:"get_nativeWidth"})}),he["ceramic.ScreenScaling"]={__ename__:"ceramic.ScreenScaling",__constructs__:null,FIT:{_hx_name:"FIT",_hx_index:0,__enum__:"ceramic.ScreenScaling",toString:c},FILL:{_hx_name:"FILL",_hx_index:1,__enum__:"ceramic.ScreenScaling",toString:c},RESIZE:{_hx_name:"RESIZE",_hx_index:2,__enum__:"ceramic.ScreenScaling",toString:c},FIT_RESIZE:{_hx_name:"FIT_RESIZE",_hx_index:3,__enum__:"ceramic.ScreenScaling",toString:c}}),Vn=(Hn.__constructs__=[Hn.FIT,Hn.FILL,Hn.RESIZE,Hn.FIT_RESIZE],function(){this.defaultShader=Ii,this.defaultFont="font:RobotoMedium",this.backend={},this.assetsPath="assets",this.resizable=!1,this.antialiasing=0,this.appInfo=null,this.collections=null,this.orientation=0,this.unobservedPreventDefaultTouches=!1,this.preventDefaultTouchesAutoruns=null,this.unobservedPreventDefaultMouseWheel=!1,this.preventDefaultMouseWheelAutoruns=null,this.unobservedOverrideDelta=-1,this.overrideDeltaAutoruns=null,this.unobservedMaxDelta=.1,this.maxDeltaAutoruns=null,this.unobservedTargetFps=-1,this.targetFpsAutoruns=null,this.unobservedFullscreen=!1,this.fullscreenAutoruns=null,this.unobservedTitle="App",this.titleAutoruns=null,this.unobservedScaling=Hn.FIT,this.scalingAutoruns=null,this.unobservedBackground=0,this.backgroundAutoruns=null,this.unobservedTargetDensity=0,this.targetDensityAutoruns=null,this.unobservedWindowHeight=0,this.windowHeightAutoruns=null,this.unobservedWindowWidth=0,this.windowWidthAutoruns=null,this.unobservedTargetHeight=0,this.targetHeightAutoruns=null,this.unobservedTargetWidth=0,this.targetWidthAutoruns=null,this.observedDirty=!1}),zn=((x["ceramic.Settings"]=Vn).__name__="ceramic.Settings",Vn.__interfaces__=[q],Vn.prototype={emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnObservedDirty)for(var l=0,a=this.__cbOnObservedDirty.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnObservedDirty[h],++r):--t}if(null!=this.__cbOnceObservedDirty){for(var c=null,o=null,l=0,a=this.__cbOnceObservedDirty.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,u=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindObservedDirty[h]),o.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=c,this.__cbOnceObservedDirty=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(r=this.__cbOnOwnerUnbindObservedDirty[n])&&r(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindObservedDirty[n])&&r(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindObservedDirty[s])&&r()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindObservedDirty[s])&&r()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},get_targetWidth:function(){var e,n,t=this.unobservedTargetWidth;return null!=se.current&&(e=se.current,null!=(n=this.targetWidthAutoruns)||(n=se.getAutorunArray(),null!=(this.targetWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetWidth:function(e){var n=this.unobservedTargetWidth;return n!=(this.unobservedTargetWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetWidthChange(e,n),null!=(n=this.targetWidthAutoruns))&&(this.targetWidthAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTargetWidth:function(){var e=this.unobservedTargetWidth,e=(this.emitTargetWidthChange(e,e),this.targetWidthAutoruns);null!=e&&(this.targetWidthAutoruns=null,se.invalidateAutorunArray(e))},emitTargetWidthChange:function(e,n){var t=0;if(null!=this.__cbOnTargetWidthChange&&(t+=this.__cbOnTargetWidthChange.length),null!=this.__cbOnceTargetWidthChange&&(t+=this.__cbOnceTargetWidthChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTargetWidthChange)for(var l=0,a=this.__cbOnTargetWidthChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTargetWidthChange[h],++r):--t}if(null!=this.__cbOnceTargetWidthChange){for(var c=null,o=null,l=0,a=this.__cbOnceTargetWidthChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTargetWidthChange[h],this.__cbOnceTargetWidthChange[h]=null,u=this.__cbOnceOwnerUnbindTargetWidthChange[h],(this.__cbOnceOwnerUnbindTargetWidthChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTargetWidthChange[h]),o.push(this.__cbOnceTargetWidthChange[h]))}this.__cbOnceOwnerUnbindTargetWidthChange=c,this.__cbOnceTargetWidthChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTargetWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetWidthChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetWidthChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTargetWidthChange&&(this.__cbOnOwnerUnbindTargetWidthChange=[]),this.__cbOnOwnerUnbindTargetWidthChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTargetWidthChange&&(this.__cbOnOwnerUnbindTargetWidthChange=[]),this.__cbOnOwnerUnbindTargetWidthChange.push(null);null==this.__cbOnTargetWidthChange&&(this.__cbOnTargetWidthChange=[]),this.__cbOnTargetWidthChange.push(t)},onceTargetWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetWidthChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetWidthChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTargetWidthChange&&(this.__cbOnceOwnerUnbindTargetWidthChange=[]),this.__cbOnceOwnerUnbindTargetWidthChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTargetWidthChange&&(this.__cbOnceOwnerUnbindTargetWidthChange=[]),this.__cbOnceOwnerUnbindTargetWidthChange.push(null);null==this.__cbOnceTargetWidthChange&&(this.__cbOnceTargetWidthChange=[]),this.__cbOnceTargetWidthChange.push(t)},offTargetWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetWidthChange&&-1!=(n=this.__cbOnTargetWidthChange.indexOf(e))&&(this.__cbOnTargetWidthChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTargetWidthChange[n])&&r(),this.__cbOnOwnerUnbindTargetWidthChange.splice(n,1)),null!=this.__cbOnceTargetWidthChange&&-1!=(n=this.__cbOnceTargetWidthChange.indexOf(e))&&(this.__cbOnceTargetWidthChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTargetWidthChange[n])&&r(),this.__cbOnceOwnerUnbindTargetWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetWidthChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTargetWidthChange[s])&&r()}this.__cbOnOwnerUnbindTargetWidthChange=null}if(null!=this.__cbOnceOwnerUnbindTargetWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetWidthChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTargetWidthChange[s])&&r()}this.__cbOnceOwnerUnbindTargetWidthChange=null}this.__cbOnTargetWidthChange=null,this.__cbOnceTargetWidthChange=null}},listensTargetWidthChange:function(){return null!=this.__cbOnTargetWidthChange&&0<this.__cbOnTargetWidthChange.length||null!=this.__cbOnceTargetWidthChange&&0<this.__cbOnceTargetWidthChange.length},get_targetHeight:function(){var e,n,t=this.unobservedTargetHeight;return null!=se.current&&(e=se.current,null!=(n=this.targetHeightAutoruns)||(n=se.getAutorunArray(),null!=(this.targetHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetHeight:function(e){var n=this.unobservedTargetHeight;return n!=(this.unobservedTargetHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetHeightChange(e,n),null!=(n=this.targetHeightAutoruns))&&(this.targetHeightAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTargetHeight:function(){var e=this.unobservedTargetHeight,e=(this.emitTargetHeightChange(e,e),this.targetHeightAutoruns);null!=e&&(this.targetHeightAutoruns=null,se.invalidateAutorunArray(e))},emitTargetHeightChange:function(e,n){var t=0;if(null!=this.__cbOnTargetHeightChange&&(t+=this.__cbOnTargetHeightChange.length),null!=this.__cbOnceTargetHeightChange&&(t+=this.__cbOnceTargetHeightChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTargetHeightChange)for(var l=0,a=this.__cbOnTargetHeightChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTargetHeightChange[h],++r):--t}if(null!=this.__cbOnceTargetHeightChange){for(var c=null,o=null,l=0,a=this.__cbOnceTargetHeightChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTargetHeightChange[h],this.__cbOnceTargetHeightChange[h]=null,u=this.__cbOnceOwnerUnbindTargetHeightChange[h],(this.__cbOnceOwnerUnbindTargetHeightChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTargetHeightChange[h]),o.push(this.__cbOnceTargetHeightChange[h]))}this.__cbOnceOwnerUnbindTargetHeightChange=c,this.__cbOnceTargetHeightChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTargetHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetHeightChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetHeightChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTargetHeightChange&&(this.__cbOnOwnerUnbindTargetHeightChange=[]),this.__cbOnOwnerUnbindTargetHeightChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTargetHeightChange&&(this.__cbOnOwnerUnbindTargetHeightChange=[]),this.__cbOnOwnerUnbindTargetHeightChange.push(null);null==this.__cbOnTargetHeightChange&&(this.__cbOnTargetHeightChange=[]),this.__cbOnTargetHeightChange.push(t)},onceTargetHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetHeightChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetHeightChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTargetHeightChange&&(this.__cbOnceOwnerUnbindTargetHeightChange=[]),this.__cbOnceOwnerUnbindTargetHeightChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTargetHeightChange&&(this.__cbOnceOwnerUnbindTargetHeightChange=[]),this.__cbOnceOwnerUnbindTargetHeightChange.push(null);null==this.__cbOnceTargetHeightChange&&(this.__cbOnceTargetHeightChange=[]),this.__cbOnceTargetHeightChange.push(t)},offTargetHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetHeightChange&&-1!=(n=this.__cbOnTargetHeightChange.indexOf(e))&&(this.__cbOnTargetHeightChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTargetHeightChange[n])&&r(),this.__cbOnOwnerUnbindTargetHeightChange.splice(n,1)),null!=this.__cbOnceTargetHeightChange&&-1!=(n=this.__cbOnceTargetHeightChange.indexOf(e))&&(this.__cbOnceTargetHeightChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTargetHeightChange[n])&&r(),this.__cbOnceOwnerUnbindTargetHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetHeightChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTargetHeightChange[s])&&r()}this.__cbOnOwnerUnbindTargetHeightChange=null}if(null!=this.__cbOnceOwnerUnbindTargetHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetHeightChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTargetHeightChange[s])&&r()}this.__cbOnceOwnerUnbindTargetHeightChange=null}this.__cbOnTargetHeightChange=null,this.__cbOnceTargetHeightChange=null}},listensTargetHeightChange:function(){return null!=this.__cbOnTargetHeightChange&&0<this.__cbOnTargetHeightChange.length||null!=this.__cbOnceTargetHeightChange&&0<this.__cbOnceTargetHeightChange.length},targetSize:function(e,n){this.set_targetWidth(e),this.set_targetHeight(n)},get_windowWidth:function(){var e,n,t=this.unobservedWindowWidth;return null!=se.current&&(e=se.current,null!=(n=this.windowWidthAutoruns)||(n=se.getAutorunArray(),null!=(this.windowWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_windowWidth:function(e){var n=this.unobservedWindowWidth;return n!=(this.unobservedWindowWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWindowWidthChange(e,n),null!=(n=this.windowWidthAutoruns))&&(this.windowWidthAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateWindowWidth:function(){var e=this.unobservedWindowWidth,e=(this.emitWindowWidthChange(e,e),this.windowWidthAutoruns);null!=e&&(this.windowWidthAutoruns=null,se.invalidateAutorunArray(e))},emitWindowWidthChange:function(e,n){var t=0;if(null!=this.__cbOnWindowWidthChange&&(t+=this.__cbOnWindowWidthChange.length),null!=this.__cbOnceWindowWidthChange&&(t+=this.__cbOnceWindowWidthChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnWindowWidthChange)for(var l=0,a=this.__cbOnWindowWidthChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnWindowWidthChange[h],++r):--t}if(null!=this.__cbOnceWindowWidthChange){for(var c=null,o=null,l=0,a=this.__cbOnceWindowWidthChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceWindowWidthChange[h],this.__cbOnceWindowWidthChange[h]=null,u=this.__cbOnceOwnerUnbindWindowWidthChange[h],(this.__cbOnceOwnerUnbindWindowWidthChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindWindowWidthChange[h]),o.push(this.__cbOnceWindowWidthChange[h]))}this.__cbOnceOwnerUnbindWindowWidthChange=c,this.__cbOnceWindowWidthChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onWindowWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event windowWidthChange because owner is destroyed!");var s=function(e){null!=t&&(i.offWindowWidthChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindWindowWidthChange&&(this.__cbOnOwnerUnbindWindowWidthChange=[]),this.__cbOnOwnerUnbindWindowWidthChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindWindowWidthChange&&(this.__cbOnOwnerUnbindWindowWidthChange=[]),this.__cbOnOwnerUnbindWindowWidthChange.push(null);null==this.__cbOnWindowWidthChange&&(this.__cbOnWindowWidthChange=[]),this.__cbOnWindowWidthChange.push(t)},onceWindowWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event windowWidthChange because owner is destroyed!");var s=function(e){null!=t&&(i.offWindowWidthChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindWindowWidthChange&&(this.__cbOnceOwnerUnbindWindowWidthChange=[]),this.__cbOnceOwnerUnbindWindowWidthChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindWindowWidthChange&&(this.__cbOnceOwnerUnbindWindowWidthChange=[]),this.__cbOnceOwnerUnbindWindowWidthChange.push(null);null==this.__cbOnceWindowWidthChange&&(this.__cbOnceWindowWidthChange=[]),this.__cbOnceWindowWidthChange.push(t)},offWindowWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnWindowWidthChange&&-1!=(n=this.__cbOnWindowWidthChange.indexOf(e))&&(this.__cbOnWindowWidthChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindWindowWidthChange[n])&&r(),this.__cbOnOwnerUnbindWindowWidthChange.splice(n,1)),null!=this.__cbOnceWindowWidthChange&&-1!=(n=this.__cbOnceWindowWidthChange.indexOf(e))&&(this.__cbOnceWindowWidthChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindWindowWidthChange[n])&&r(),this.__cbOnceOwnerUnbindWindowWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWindowWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindWindowWidthChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindWindowWidthChange[s])&&r()}this.__cbOnOwnerUnbindWindowWidthChange=null}if(null!=this.__cbOnceOwnerUnbindWindowWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindWindowWidthChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindWindowWidthChange[s])&&r()}this.__cbOnceOwnerUnbindWindowWidthChange=null}this.__cbOnWindowWidthChange=null,this.__cbOnceWindowWidthChange=null}},listensWindowWidthChange:function(){return null!=this.__cbOnWindowWidthChange&&0<this.__cbOnWindowWidthChange.length||null!=this.__cbOnceWindowWidthChange&&0<this.__cbOnceWindowWidthChange.length},get_windowHeight:function(){var e,n,t=this.unobservedWindowHeight;return null!=se.current&&(e=se.current,null!=(n=this.windowHeightAutoruns)||(n=se.getAutorunArray(),null!=(this.windowHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_windowHeight:function(e){var n=this.unobservedWindowHeight;return n!=(this.unobservedWindowHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWindowHeightChange(e,n),null!=(n=this.windowHeightAutoruns))&&(this.windowHeightAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateWindowHeight:function(){var e=this.unobservedWindowHeight,e=(this.emitWindowHeightChange(e,e),this.windowHeightAutoruns);null!=e&&(this.windowHeightAutoruns=null,se.invalidateAutorunArray(e))},emitWindowHeightChange:function(e,n){var t=0;if(null!=this.__cbOnWindowHeightChange&&(t+=this.__cbOnWindowHeightChange.length),null!=this.__cbOnceWindowHeightChange&&(t+=this.__cbOnceWindowHeightChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnWindowHeightChange)for(var l=0,a=this.__cbOnWindowHeightChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnWindowHeightChange[h],++r):--t}if(null!=this.__cbOnceWindowHeightChange){for(var c=null,o=null,l=0,a=this.__cbOnceWindowHeightChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceWindowHeightChange[h],this.__cbOnceWindowHeightChange[h]=null,u=this.__cbOnceOwnerUnbindWindowHeightChange[h],(this.__cbOnceOwnerUnbindWindowHeightChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindWindowHeightChange[h]),o.push(this.__cbOnceWindowHeightChange[h]))}this.__cbOnceOwnerUnbindWindowHeightChange=c,this.__cbOnceWindowHeightChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onWindowHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event windowHeightChange because owner is destroyed!");var s=function(e){null!=t&&(i.offWindowHeightChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindWindowHeightChange&&(this.__cbOnOwnerUnbindWindowHeightChange=[]),this.__cbOnOwnerUnbindWindowHeightChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindWindowHeightChange&&(this.__cbOnOwnerUnbindWindowHeightChange=[]),this.__cbOnOwnerUnbindWindowHeightChange.push(null);null==this.__cbOnWindowHeightChange&&(this.__cbOnWindowHeightChange=[]),this.__cbOnWindowHeightChange.push(t)},onceWindowHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event windowHeightChange because owner is destroyed!");var s=function(e){null!=t&&(i.offWindowHeightChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindWindowHeightChange&&(this.__cbOnceOwnerUnbindWindowHeightChange=[]),this.__cbOnceOwnerUnbindWindowHeightChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindWindowHeightChange&&(this.__cbOnceOwnerUnbindWindowHeightChange=[]),this.__cbOnceOwnerUnbindWindowHeightChange.push(null);null==this.__cbOnceWindowHeightChange&&(this.__cbOnceWindowHeightChange=[]),this.__cbOnceWindowHeightChange.push(t)},offWindowHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnWindowHeightChange&&-1!=(n=this.__cbOnWindowHeightChange.indexOf(e))&&(this.__cbOnWindowHeightChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindWindowHeightChange[n])&&r(),this.__cbOnOwnerUnbindWindowHeightChange.splice(n,1)),null!=this.__cbOnceWindowHeightChange&&-1!=(n=this.__cbOnceWindowHeightChange.indexOf(e))&&(this.__cbOnceWindowHeightChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindWindowHeightChange[n])&&r(),this.__cbOnceOwnerUnbindWindowHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWindowHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindWindowHeightChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindWindowHeightChange[s])&&r()}this.__cbOnOwnerUnbindWindowHeightChange=null}if(null!=this.__cbOnceOwnerUnbindWindowHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindWindowHeightChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindWindowHeightChange[s])&&r()}this.__cbOnceOwnerUnbindWindowHeightChange=null}this.__cbOnWindowHeightChange=null,this.__cbOnceWindowHeightChange=null}},listensWindowHeightChange:function(){return null!=this.__cbOnWindowHeightChange&&0<this.__cbOnWindowHeightChange.length||null!=this.__cbOnceWindowHeightChange&&0<this.__cbOnceWindowHeightChange.length},get_targetDensity:function(){var e,n,t=this.unobservedTargetDensity;return null!=se.current&&(e=se.current,null!=(n=this.targetDensityAutoruns)||(n=se.getAutorunArray(),null!=(this.targetDensityAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetDensity:function(e){var n=this.unobservedTargetDensity;return n!=(this.unobservedTargetDensity=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetDensityChange(e,n),null!=(n=this.targetDensityAutoruns))&&(this.targetDensityAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTargetDensity:function(){var e=this.unobservedTargetDensity,e=(this.emitTargetDensityChange(e,e),this.targetDensityAutoruns);null!=e&&(this.targetDensityAutoruns=null,se.invalidateAutorunArray(e))},emitTargetDensityChange:function(e,n){var t=0;if(null!=this.__cbOnTargetDensityChange&&(t+=this.__cbOnTargetDensityChange.length),null!=this.__cbOnceTargetDensityChange&&(t+=this.__cbOnceTargetDensityChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTargetDensityChange)for(var l=0,a=this.__cbOnTargetDensityChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTargetDensityChange[h],++r):--t}if(null!=this.__cbOnceTargetDensityChange){for(var c=null,o=null,l=0,a=this.__cbOnceTargetDensityChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTargetDensityChange[h],this.__cbOnceTargetDensityChange[h]=null,u=this.__cbOnceOwnerUnbindTargetDensityChange[h],(this.__cbOnceOwnerUnbindTargetDensityChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTargetDensityChange[h]),o.push(this.__cbOnceTargetDensityChange[h]))}this.__cbOnceOwnerUnbindTargetDensityChange=c,this.__cbOnceTargetDensityChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTargetDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetDensityChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetDensityChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTargetDensityChange&&(this.__cbOnOwnerUnbindTargetDensityChange=[]),this.__cbOnOwnerUnbindTargetDensityChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTargetDensityChange&&(this.__cbOnOwnerUnbindTargetDensityChange=[]),this.__cbOnOwnerUnbindTargetDensityChange.push(null);null==this.__cbOnTargetDensityChange&&(this.__cbOnTargetDensityChange=[]),this.__cbOnTargetDensityChange.push(t)},onceTargetDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetDensityChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetDensityChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTargetDensityChange&&(this.__cbOnceOwnerUnbindTargetDensityChange=[]),this.__cbOnceOwnerUnbindTargetDensityChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTargetDensityChange&&(this.__cbOnceOwnerUnbindTargetDensityChange=[]),this.__cbOnceOwnerUnbindTargetDensityChange.push(null);null==this.__cbOnceTargetDensityChange&&(this.__cbOnceTargetDensityChange=[]),this.__cbOnceTargetDensityChange.push(t)},offTargetDensityChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetDensityChange&&-1!=(n=this.__cbOnTargetDensityChange.indexOf(e))&&(this.__cbOnTargetDensityChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTargetDensityChange[n])&&r(),this.__cbOnOwnerUnbindTargetDensityChange.splice(n,1)),null!=this.__cbOnceTargetDensityChange&&-1!=(n=this.__cbOnceTargetDensityChange.indexOf(e))&&(this.__cbOnceTargetDensityChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTargetDensityChange[n])&&r(),this.__cbOnceOwnerUnbindTargetDensityChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetDensityChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetDensityChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTargetDensityChange[s])&&r()}this.__cbOnOwnerUnbindTargetDensityChange=null}if(null!=this.__cbOnceOwnerUnbindTargetDensityChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetDensityChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTargetDensityChange[s])&&r()}this.__cbOnceOwnerUnbindTargetDensityChange=null}this.__cbOnTargetDensityChange=null,this.__cbOnceTargetDensityChange=null}},listensTargetDensityChange:function(){return null!=this.__cbOnTargetDensityChange&&0<this.__cbOnTargetDensityChange.length||null!=this.__cbOnceTargetDensityChange&&0<this.__cbOnceTargetDensityChange.length},get_background:function(){var e,n,t=this.unobservedBackground;return null!=se.current&&(e=se.current,null!=(n=this.backgroundAutoruns)||(n=se.getAutorunArray(),null!=(this.backgroundAutoruns=n)))&&e.bindToAutorunArray(n),t},set_background:function(e){var n=this.unobservedBackground;return n!=(this.unobservedBackground=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitBackgroundChange(e,n),null!=(n=this.backgroundAutoruns))&&(this.backgroundAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateBackground:function(){var e=this.unobservedBackground,e=(this.emitBackgroundChange(e,e),this.backgroundAutoruns);null!=e&&(this.backgroundAutoruns=null,se.invalidateAutorunArray(e))},emitBackgroundChange:function(e,n){var t=0;if(null!=this.__cbOnBackgroundChange&&(t+=this.__cbOnBackgroundChange.length),null!=this.__cbOnceBackgroundChange&&(t+=this.__cbOnceBackgroundChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnBackgroundChange)for(var l=0,a=this.__cbOnBackgroundChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnBackgroundChange[h],++r):--t}if(null!=this.__cbOnceBackgroundChange){for(var c=null,o=null,l=0,a=this.__cbOnceBackgroundChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceBackgroundChange[h],this.__cbOnceBackgroundChange[h]=null,u=this.__cbOnceOwnerUnbindBackgroundChange[h],(this.__cbOnceOwnerUnbindBackgroundChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindBackgroundChange[h]),o.push(this.__cbOnceBackgroundChange[h]))}this.__cbOnceOwnerUnbindBackgroundChange=c,this.__cbOnceBackgroundChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onBackgroundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event backgroundChange because owner is destroyed!");var s=function(e){null!=t&&(i.offBackgroundChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBackgroundChange&&(this.__cbOnOwnerUnbindBackgroundChange=[]),this.__cbOnOwnerUnbindBackgroundChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBackgroundChange&&(this.__cbOnOwnerUnbindBackgroundChange=[]),this.__cbOnOwnerUnbindBackgroundChange.push(null);null==this.__cbOnBackgroundChange&&(this.__cbOnBackgroundChange=[]),this.__cbOnBackgroundChange.push(t)},onceBackgroundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event backgroundChange because owner is destroyed!");var s=function(e){null!=t&&(i.offBackgroundChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBackgroundChange&&(this.__cbOnceOwnerUnbindBackgroundChange=[]),this.__cbOnceOwnerUnbindBackgroundChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBackgroundChange&&(this.__cbOnceOwnerUnbindBackgroundChange=[]),this.__cbOnceOwnerUnbindBackgroundChange.push(null);null==this.__cbOnceBackgroundChange&&(this.__cbOnceBackgroundChange=[]),this.__cbOnceBackgroundChange.push(t)},offBackgroundChange:function(e){if(null!=e){var n;null!=this.__cbOnBackgroundChange&&-1!=(n=this.__cbOnBackgroundChange.indexOf(e))&&(this.__cbOnBackgroundChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBackgroundChange[n])&&r(),this.__cbOnOwnerUnbindBackgroundChange.splice(n,1)),null!=this.__cbOnceBackgroundChange&&-1!=(n=this.__cbOnceBackgroundChange.indexOf(e))&&(this.__cbOnceBackgroundChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBackgroundChange[n])&&r(),this.__cbOnceOwnerUnbindBackgroundChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBackgroundChange){for(var t=0,i=this.__cbOnOwnerUnbindBackgroundChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBackgroundChange[s])&&r()}this.__cbOnOwnerUnbindBackgroundChange=null}if(null!=this.__cbOnceOwnerUnbindBackgroundChange){for(t=0,i=this.__cbOnceOwnerUnbindBackgroundChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBackgroundChange[s])&&r()}this.__cbOnceOwnerUnbindBackgroundChange=null}this.__cbOnBackgroundChange=null,this.__cbOnceBackgroundChange=null}},listensBackgroundChange:function(){return null!=this.__cbOnBackgroundChange&&0<this.__cbOnBackgroundChange.length||null!=this.__cbOnceBackgroundChange&&0<this.__cbOnceBackgroundChange.length},get_scaling:function(){var e,n,t=this.unobservedScaling;return null!=se.current&&(e=se.current,null!=(n=this.scalingAutoruns)||(n=se.getAutorunArray(),null!=(this.scalingAutoruns=n)))&&e.bindToAutorunArray(n),t},set_scaling:function(e){var n=this.unobservedScaling;return n!=(this.unobservedScaling=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitScalingChange(e,n),null!=(n=this.scalingAutoruns))&&(this.scalingAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateScaling:function(){var e=this.unobservedScaling,e=(this.emitScalingChange(e,e),this.scalingAutoruns);null!=e&&(this.scalingAutoruns=null,se.invalidateAutorunArray(e))},emitScalingChange:function(e,n){var t=0;if(null!=this.__cbOnScalingChange&&(t+=this.__cbOnScalingChange.length),null!=this.__cbOnceScalingChange&&(t+=this.__cbOnceScalingChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnScalingChange)for(var l=0,a=this.__cbOnScalingChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnScalingChange[h],++r):--t}if(null!=this.__cbOnceScalingChange){for(var c=null,o=null,l=0,a=this.__cbOnceScalingChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceScalingChange[h],this.__cbOnceScalingChange[h]=null,u=this.__cbOnceOwnerUnbindScalingChange[h],(this.__cbOnceOwnerUnbindScalingChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindScalingChange[h]),o.push(this.__cbOnceScalingChange[h]))}this.__cbOnceOwnerUnbindScalingChange=c,this.__cbOnceScalingChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onScalingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event scalingChange because owner is destroyed!");var s=function(e){null!=t&&(i.offScalingChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindScalingChange&&(this.__cbOnOwnerUnbindScalingChange=[]),this.__cbOnOwnerUnbindScalingChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindScalingChange&&(this.__cbOnOwnerUnbindScalingChange=[]),this.__cbOnOwnerUnbindScalingChange.push(null);null==this.__cbOnScalingChange&&(this.__cbOnScalingChange=[]),this.__cbOnScalingChange.push(t)},onceScalingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event scalingChange because owner is destroyed!");var s=function(e){null!=t&&(i.offScalingChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindScalingChange&&(this.__cbOnceOwnerUnbindScalingChange=[]),this.__cbOnceOwnerUnbindScalingChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindScalingChange&&(this.__cbOnceOwnerUnbindScalingChange=[]),this.__cbOnceOwnerUnbindScalingChange.push(null);null==this.__cbOnceScalingChange&&(this.__cbOnceScalingChange=[]),this.__cbOnceScalingChange.push(t)},offScalingChange:function(e){if(null!=e){var n;null!=this.__cbOnScalingChange&&-1!=(n=this.__cbOnScalingChange.indexOf(e))&&(this.__cbOnScalingChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindScalingChange[n])&&r(),this.__cbOnOwnerUnbindScalingChange.splice(n,1)),null!=this.__cbOnceScalingChange&&-1!=(n=this.__cbOnceScalingChange.indexOf(e))&&(this.__cbOnceScalingChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindScalingChange[n])&&r(),this.__cbOnceOwnerUnbindScalingChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindScalingChange){for(var t=0,i=this.__cbOnOwnerUnbindScalingChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindScalingChange[s])&&r()}this.__cbOnOwnerUnbindScalingChange=null}if(null!=this.__cbOnceOwnerUnbindScalingChange){for(t=0,i=this.__cbOnceOwnerUnbindScalingChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindScalingChange[s])&&r()}this.__cbOnceOwnerUnbindScalingChange=null}this.__cbOnScalingChange=null,this.__cbOnceScalingChange=null}},listensScalingChange:function(){return null!=this.__cbOnScalingChange&&0<this.__cbOnScalingChange.length||null!=this.__cbOnceScalingChange&&0<this.__cbOnceScalingChange.length},get_title:function(){var e,n,t=this.unobservedTitle;return null!=se.current&&(e=se.current,null!=(n=this.titleAutoruns)||(n=se.getAutorunArray(),null!=(this.titleAutoruns=n)))&&e.bindToAutorunArray(n),t},set_title:function(e){var n=this.unobservedTitle;return n!=(this.unobservedTitle=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTitleChange(e,n),null!=(n=this.titleAutoruns))&&(this.titleAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTitle:function(){var e=this.unobservedTitle,e=(this.emitTitleChange(e,e),this.titleAutoruns);null!=e&&(this.titleAutoruns=null,se.invalidateAutorunArray(e))},emitTitleChange:function(e,n){var t=0;if(null!=this.__cbOnTitleChange&&(t+=this.__cbOnTitleChange.length),null!=this.__cbOnceTitleChange&&(t+=this.__cbOnceTitleChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTitleChange)for(var l=0,a=this.__cbOnTitleChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTitleChange[h],++r):--t}if(null!=this.__cbOnceTitleChange){for(var c=null,o=null,l=0,a=this.__cbOnceTitleChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTitleChange[h],this.__cbOnceTitleChange[h]=null,u=this.__cbOnceOwnerUnbindTitleChange[h],(this.__cbOnceOwnerUnbindTitleChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTitleChange[h]),o.push(this.__cbOnceTitleChange[h]))}this.__cbOnceOwnerUnbindTitleChange=c,this.__cbOnceTitleChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTitleChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event titleChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTitleChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTitleChange&&(this.__cbOnOwnerUnbindTitleChange=[]),this.__cbOnOwnerUnbindTitleChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTitleChange&&(this.__cbOnOwnerUnbindTitleChange=[]),this.__cbOnOwnerUnbindTitleChange.push(null);null==this.__cbOnTitleChange&&(this.__cbOnTitleChange=[]),this.__cbOnTitleChange.push(t)},onceTitleChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event titleChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTitleChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTitleChange&&(this.__cbOnceOwnerUnbindTitleChange=[]),this.__cbOnceOwnerUnbindTitleChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTitleChange&&(this.__cbOnceOwnerUnbindTitleChange=[]),this.__cbOnceOwnerUnbindTitleChange.push(null);null==this.__cbOnceTitleChange&&(this.__cbOnceTitleChange=[]),this.__cbOnceTitleChange.push(t)},offTitleChange:function(e){if(null!=e){var n;null!=this.__cbOnTitleChange&&-1!=(n=this.__cbOnTitleChange.indexOf(e))&&(this.__cbOnTitleChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTitleChange[n])&&r(),this.__cbOnOwnerUnbindTitleChange.splice(n,1)),null!=this.__cbOnceTitleChange&&-1!=(n=this.__cbOnceTitleChange.indexOf(e))&&(this.__cbOnceTitleChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTitleChange[n])&&r(),this.__cbOnceOwnerUnbindTitleChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTitleChange){for(var t=0,i=this.__cbOnOwnerUnbindTitleChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTitleChange[s])&&r()}this.__cbOnOwnerUnbindTitleChange=null}if(null!=this.__cbOnceOwnerUnbindTitleChange){for(t=0,i=this.__cbOnceOwnerUnbindTitleChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTitleChange[s])&&r()}this.__cbOnceOwnerUnbindTitleChange=null}this.__cbOnTitleChange=null,this.__cbOnceTitleChange=null}},listensTitleChange:function(){return null!=this.__cbOnTitleChange&&0<this.__cbOnTitleChange.length||null!=this.__cbOnceTitleChange&&0<this.__cbOnceTitleChange.length},get_fullscreen:function(){var e,n,t=this.unobservedFullscreen;return null!=se.current&&(e=se.current,null!=(n=this.fullscreenAutoruns)||(n=se.getAutorunArray(),null!=(this.fullscreenAutoruns=n)))&&e.bindToAutorunArray(n),t},set_fullscreen:function(e){var n=this.unobservedFullscreen;return n!=(this.unobservedFullscreen=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFullscreenChange(e,n),null!=(n=this.fullscreenAutoruns))&&(this.fullscreenAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateFullscreen:function(){var e=this.unobservedFullscreen,e=(this.emitFullscreenChange(e,e),this.fullscreenAutoruns);null!=e&&(this.fullscreenAutoruns=null,se.invalidateAutorunArray(e))},emitFullscreenChange:function(e,n){var t=0;if(null!=this.__cbOnFullscreenChange&&(t+=this.__cbOnFullscreenChange.length),null!=this.__cbOnceFullscreenChange&&(t+=this.__cbOnceFullscreenChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnFullscreenChange)for(var l=0,a=this.__cbOnFullscreenChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnFullscreenChange[h],++r):--t}if(null!=this.__cbOnceFullscreenChange){for(var c=null,o=null,l=0,a=this.__cbOnceFullscreenChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceFullscreenChange[h],this.__cbOnceFullscreenChange[h]=null,u=this.__cbOnceOwnerUnbindFullscreenChange[h],(this.__cbOnceOwnerUnbindFullscreenChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindFullscreenChange[h]),o.push(this.__cbOnceFullscreenChange[h]))}this.__cbOnceOwnerUnbindFullscreenChange=c,this.__cbOnceFullscreenChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onFullscreenChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event fullscreenChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFullscreenChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFullscreenChange&&(this.__cbOnOwnerUnbindFullscreenChange=[]),this.__cbOnOwnerUnbindFullscreenChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFullscreenChange&&(this.__cbOnOwnerUnbindFullscreenChange=[]),this.__cbOnOwnerUnbindFullscreenChange.push(null);null==this.__cbOnFullscreenChange&&(this.__cbOnFullscreenChange=[]),this.__cbOnFullscreenChange.push(t)},onceFullscreenChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event fullscreenChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFullscreenChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFullscreenChange&&(this.__cbOnceOwnerUnbindFullscreenChange=[]),this.__cbOnceOwnerUnbindFullscreenChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFullscreenChange&&(this.__cbOnceOwnerUnbindFullscreenChange=[]),this.__cbOnceOwnerUnbindFullscreenChange.push(null);null==this.__cbOnceFullscreenChange&&(this.__cbOnceFullscreenChange=[]),this.__cbOnceFullscreenChange.push(t)},offFullscreenChange:function(e){if(null!=e){var n;null!=this.__cbOnFullscreenChange&&-1!=(n=this.__cbOnFullscreenChange.indexOf(e))&&(this.__cbOnFullscreenChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFullscreenChange[n])&&r(),this.__cbOnOwnerUnbindFullscreenChange.splice(n,1)),null!=this.__cbOnceFullscreenChange&&-1!=(n=this.__cbOnceFullscreenChange.indexOf(e))&&(this.__cbOnceFullscreenChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFullscreenChange[n])&&r(),this.__cbOnceOwnerUnbindFullscreenChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFullscreenChange){for(var t=0,i=this.__cbOnOwnerUnbindFullscreenChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFullscreenChange[s])&&r()}this.__cbOnOwnerUnbindFullscreenChange=null}if(null!=this.__cbOnceOwnerUnbindFullscreenChange){for(t=0,i=this.__cbOnceOwnerUnbindFullscreenChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFullscreenChange[s])&&r()}this.__cbOnceOwnerUnbindFullscreenChange=null}this.__cbOnFullscreenChange=null,this.__cbOnceFullscreenChange=null}},listensFullscreenChange:function(){return null!=this.__cbOnFullscreenChange&&0<this.__cbOnFullscreenChange.length||null!=this.__cbOnceFullscreenChange&&0<this.__cbOnceFullscreenChange.length},get_targetFps:function(){var e,n,t=this.unobservedTargetFps;return null!=se.current&&(e=se.current,null!=(n=this.targetFpsAutoruns)||(n=se.getAutorunArray(),null!=(this.targetFpsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetFps:function(e){var n=this.unobservedTargetFps;return n!=(this.unobservedTargetFps=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetFpsChange(e,n),null!=(n=this.targetFpsAutoruns))&&(this.targetFpsAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTargetFps:function(){var e=this.unobservedTargetFps,e=(this.emitTargetFpsChange(e,e),this.targetFpsAutoruns);null!=e&&(this.targetFpsAutoruns=null,se.invalidateAutorunArray(e))},emitTargetFpsChange:function(e,n){var t=0;if(null!=this.__cbOnTargetFpsChange&&(t+=this.__cbOnTargetFpsChange.length),null!=this.__cbOnceTargetFpsChange&&(t+=this.__cbOnceTargetFpsChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTargetFpsChange)for(var l=0,a=this.__cbOnTargetFpsChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTargetFpsChange[h],++r):--t}if(null!=this.__cbOnceTargetFpsChange){for(var c=null,o=null,l=0,a=this.__cbOnceTargetFpsChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTargetFpsChange[h],this.__cbOnceTargetFpsChange[h]=null,u=this.__cbOnceOwnerUnbindTargetFpsChange[h],(this.__cbOnceOwnerUnbindTargetFpsChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTargetFpsChange[h]),o.push(this.__cbOnceTargetFpsChange[h]))}this.__cbOnceOwnerUnbindTargetFpsChange=c,this.__cbOnceTargetFpsChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTargetFpsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetFpsChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetFpsChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTargetFpsChange&&(this.__cbOnOwnerUnbindTargetFpsChange=[]),this.__cbOnOwnerUnbindTargetFpsChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTargetFpsChange&&(this.__cbOnOwnerUnbindTargetFpsChange=[]),this.__cbOnOwnerUnbindTargetFpsChange.push(null);null==this.__cbOnTargetFpsChange&&(this.__cbOnTargetFpsChange=[]),this.__cbOnTargetFpsChange.push(t)},onceTargetFpsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event targetFpsChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTargetFpsChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTargetFpsChange&&(this.__cbOnceOwnerUnbindTargetFpsChange=[]),this.__cbOnceOwnerUnbindTargetFpsChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTargetFpsChange&&(this.__cbOnceOwnerUnbindTargetFpsChange=[]),this.__cbOnceOwnerUnbindTargetFpsChange.push(null);null==this.__cbOnceTargetFpsChange&&(this.__cbOnceTargetFpsChange=[]),this.__cbOnceTargetFpsChange.push(t)},offTargetFpsChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetFpsChange&&-1!=(n=this.__cbOnTargetFpsChange.indexOf(e))&&(this.__cbOnTargetFpsChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTargetFpsChange[n])&&r(),this.__cbOnOwnerUnbindTargetFpsChange.splice(n,1)),null!=this.__cbOnceTargetFpsChange&&-1!=(n=this.__cbOnceTargetFpsChange.indexOf(e))&&(this.__cbOnceTargetFpsChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTargetFpsChange[n])&&r(),this.__cbOnceOwnerUnbindTargetFpsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetFpsChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetFpsChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTargetFpsChange[s])&&r()}this.__cbOnOwnerUnbindTargetFpsChange=null}if(null!=this.__cbOnceOwnerUnbindTargetFpsChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetFpsChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTargetFpsChange[s])&&r()}this.__cbOnceOwnerUnbindTargetFpsChange=null}this.__cbOnTargetFpsChange=null,this.__cbOnceTargetFpsChange=null}},listensTargetFpsChange:function(){return null!=this.__cbOnTargetFpsChange&&0<this.__cbOnTargetFpsChange.length||null!=this.__cbOnceTargetFpsChange&&0<this.__cbOnceTargetFpsChange.length},get_maxDelta:function(){var e,n,t=this.unobservedMaxDelta;return null!=se.current&&(e=se.current,null!=(n=this.maxDeltaAutoruns)||(n=se.getAutorunArray(),null!=(this.maxDeltaAutoruns=n)))&&e.bindToAutorunArray(n),t},set_maxDelta:function(e){var n=this.unobservedMaxDelta;return n!=(this.unobservedMaxDelta=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitMaxDeltaChange(e,n),null!=(n=this.maxDeltaAutoruns))&&(this.maxDeltaAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateMaxDelta:function(){var e=this.unobservedMaxDelta,e=(this.emitMaxDeltaChange(e,e),this.maxDeltaAutoruns);null!=e&&(this.maxDeltaAutoruns=null,se.invalidateAutorunArray(e))},emitMaxDeltaChange:function(e,n){var t=0;if(null!=this.__cbOnMaxDeltaChange&&(t+=this.__cbOnMaxDeltaChange.length),null!=this.__cbOnceMaxDeltaChange&&(t+=this.__cbOnceMaxDeltaChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnMaxDeltaChange)for(var l=0,a=this.__cbOnMaxDeltaChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnMaxDeltaChange[h],++r):--t}if(null!=this.__cbOnceMaxDeltaChange){for(var c=null,o=null,l=0,a=this.__cbOnceMaxDeltaChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceMaxDeltaChange[h],this.__cbOnceMaxDeltaChange[h]=null,u=this.__cbOnceOwnerUnbindMaxDeltaChange[h],(this.__cbOnceOwnerUnbindMaxDeltaChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMaxDeltaChange[h]),o.push(this.__cbOnceMaxDeltaChange[h]))}this.__cbOnceOwnerUnbindMaxDeltaChange=c,this.__cbOnceMaxDeltaChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onMaxDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event maxDeltaChange because owner is destroyed!");var s=function(e){null!=t&&(i.offMaxDeltaChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindMaxDeltaChange&&(this.__cbOnOwnerUnbindMaxDeltaChange=[]),this.__cbOnOwnerUnbindMaxDeltaChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindMaxDeltaChange&&(this.__cbOnOwnerUnbindMaxDeltaChange=[]),this.__cbOnOwnerUnbindMaxDeltaChange.push(null);null==this.__cbOnMaxDeltaChange&&(this.__cbOnMaxDeltaChange=[]),this.__cbOnMaxDeltaChange.push(t)},onceMaxDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event maxDeltaChange because owner is destroyed!");var s=function(e){null!=t&&(i.offMaxDeltaChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindMaxDeltaChange&&(this.__cbOnceOwnerUnbindMaxDeltaChange=[]),this.__cbOnceOwnerUnbindMaxDeltaChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindMaxDeltaChange&&(this.__cbOnceOwnerUnbindMaxDeltaChange=[]),this.__cbOnceOwnerUnbindMaxDeltaChange.push(null);null==this.__cbOnceMaxDeltaChange&&(this.__cbOnceMaxDeltaChange=[]),this.__cbOnceMaxDeltaChange.push(t)},offMaxDeltaChange:function(e){if(null!=e){var n;null!=this.__cbOnMaxDeltaChange&&-1!=(n=this.__cbOnMaxDeltaChange.indexOf(e))&&(this.__cbOnMaxDeltaChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindMaxDeltaChange[n])&&r(),this.__cbOnOwnerUnbindMaxDeltaChange.splice(n,1)),null!=this.__cbOnceMaxDeltaChange&&-1!=(n=this.__cbOnceMaxDeltaChange.indexOf(e))&&(this.__cbOnceMaxDeltaChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindMaxDeltaChange[n])&&r(),this.__cbOnceOwnerUnbindMaxDeltaChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMaxDeltaChange){for(var t=0,i=this.__cbOnOwnerUnbindMaxDeltaChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindMaxDeltaChange[s])&&r()}this.__cbOnOwnerUnbindMaxDeltaChange=null}if(null!=this.__cbOnceOwnerUnbindMaxDeltaChange){for(t=0,i=this.__cbOnceOwnerUnbindMaxDeltaChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindMaxDeltaChange[s])&&r()}this.__cbOnceOwnerUnbindMaxDeltaChange=null}this.__cbOnMaxDeltaChange=null,this.__cbOnceMaxDeltaChange=null}},listensMaxDeltaChange:function(){return null!=this.__cbOnMaxDeltaChange&&0<this.__cbOnMaxDeltaChange.length||null!=this.__cbOnceMaxDeltaChange&&0<this.__cbOnceMaxDeltaChange.length},get_overrideDelta:function(){var e,n,t=this.unobservedOverrideDelta;return null!=se.current&&(e=se.current,null!=(n=this.overrideDeltaAutoruns)||(n=se.getAutorunArray(),null!=(this.overrideDeltaAutoruns=n)))&&e.bindToAutorunArray(n),t},set_overrideDelta:function(e){var n=this.unobservedOverrideDelta;return n!=(this.unobservedOverrideDelta=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitOverrideDeltaChange(e,n),null!=(n=this.overrideDeltaAutoruns))&&(this.overrideDeltaAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateOverrideDelta:function(){var e=this.unobservedOverrideDelta,e=(this.emitOverrideDeltaChange(e,e),this.overrideDeltaAutoruns);null!=e&&(this.overrideDeltaAutoruns=null,se.invalidateAutorunArray(e))},emitOverrideDeltaChange:function(e,n){var t=0;if(null!=this.__cbOnOverrideDeltaChange&&(t+=this.__cbOnOverrideDeltaChange.length),null!=this.__cbOnceOverrideDeltaChange&&(t+=this.__cbOnceOverrideDeltaChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnOverrideDeltaChange)for(var l=0,a=this.__cbOnOverrideDeltaChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnOverrideDeltaChange[h],++r):--t}if(null!=this.__cbOnceOverrideDeltaChange){for(var c=null,o=null,l=0,a=this.__cbOnceOverrideDeltaChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceOverrideDeltaChange[h],this.__cbOnceOverrideDeltaChange[h]=null,u=this.__cbOnceOwnerUnbindOverrideDeltaChange[h],(this.__cbOnceOwnerUnbindOverrideDeltaChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindOverrideDeltaChange[h]),o.push(this.__cbOnceOverrideDeltaChange[h]))}this.__cbOnceOwnerUnbindOverrideDeltaChange=c,this.__cbOnceOverrideDeltaChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onOverrideDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event overrideDeltaChange because owner is destroyed!");var s=function(e){null!=t&&(i.offOverrideDeltaChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindOverrideDeltaChange&&(this.__cbOnOwnerUnbindOverrideDeltaChange=[]),this.__cbOnOwnerUnbindOverrideDeltaChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindOverrideDeltaChange&&(this.__cbOnOwnerUnbindOverrideDeltaChange=[]),this.__cbOnOwnerUnbindOverrideDeltaChange.push(null);null==this.__cbOnOverrideDeltaChange&&(this.__cbOnOverrideDeltaChange=[]),this.__cbOnOverrideDeltaChange.push(t)},onceOverrideDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event overrideDeltaChange because owner is destroyed!");var s=function(e){null!=t&&(i.offOverrideDeltaChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindOverrideDeltaChange&&(this.__cbOnceOwnerUnbindOverrideDeltaChange=[]),this.__cbOnceOwnerUnbindOverrideDeltaChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindOverrideDeltaChange&&(this.__cbOnceOwnerUnbindOverrideDeltaChange=[]),this.__cbOnceOwnerUnbindOverrideDeltaChange.push(null);null==this.__cbOnceOverrideDeltaChange&&(this.__cbOnceOverrideDeltaChange=[]),this.__cbOnceOverrideDeltaChange.push(t)},offOverrideDeltaChange:function(e){if(null!=e){var n;null!=this.__cbOnOverrideDeltaChange&&-1!=(n=this.__cbOnOverrideDeltaChange.indexOf(e))&&(this.__cbOnOverrideDeltaChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindOverrideDeltaChange[n])&&r(),this.__cbOnOwnerUnbindOverrideDeltaChange.splice(n,1)),null!=this.__cbOnceOverrideDeltaChange&&-1!=(n=this.__cbOnceOverrideDeltaChange.indexOf(e))&&(this.__cbOnceOverrideDeltaChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindOverrideDeltaChange[n])&&r(),this.__cbOnceOwnerUnbindOverrideDeltaChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindOverrideDeltaChange){for(var t=0,i=this.__cbOnOwnerUnbindOverrideDeltaChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindOverrideDeltaChange[s])&&r()}this.__cbOnOwnerUnbindOverrideDeltaChange=null}if(null!=this.__cbOnceOwnerUnbindOverrideDeltaChange){for(t=0,i=this.__cbOnceOwnerUnbindOverrideDeltaChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindOverrideDeltaChange[s])&&r()}this.__cbOnceOwnerUnbindOverrideDeltaChange=null}this.__cbOnOverrideDeltaChange=null,this.__cbOnceOverrideDeltaChange=null}},listensOverrideDeltaChange:function(){return null!=this.__cbOnOverrideDeltaChange&&0<this.__cbOnOverrideDeltaChange.length||null!=this.__cbOnceOverrideDeltaChange&&0<this.__cbOnceOverrideDeltaChange.length},get_preventDefaultMouseWheel:function(){var e,n,t=this.unobservedPreventDefaultMouseWheel;return null!=se.current&&(e=se.current,null!=(n=this.preventDefaultMouseWheelAutoruns)||(n=se.getAutorunArray(),null!=(this.preventDefaultMouseWheelAutoruns=n)))&&e.bindToAutorunArray(n),t},set_preventDefaultMouseWheel:function(e){var n=this.unobservedPreventDefaultMouseWheel;return n!=(this.unobservedPreventDefaultMouseWheel=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitPreventDefaultMouseWheelChange(e,n),null!=(n=this.preventDefaultMouseWheelAutoruns))&&(this.preventDefaultMouseWheelAutoruns=null,se.invalidateAutorunArray(n)),e},invalidatePreventDefaultMouseWheel:function(){var e=this.unobservedPreventDefaultMouseWheel,e=(this.emitPreventDefaultMouseWheelChange(e,e),this.preventDefaultMouseWheelAutoruns);null!=e&&(this.preventDefaultMouseWheelAutoruns=null,se.invalidateAutorunArray(e))},emitPreventDefaultMouseWheelChange:function(e,n){var t=0;if(null!=this.__cbOnPreventDefaultMouseWheelChange&&(t+=this.__cbOnPreventDefaultMouseWheelChange.length),null!=this.__cbOncePreventDefaultMouseWheelChange&&(t+=this.__cbOncePreventDefaultMouseWheelChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnPreventDefaultMouseWheelChange)for(var l=0,a=this.__cbOnPreventDefaultMouseWheelChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnPreventDefaultMouseWheelChange[h],++r):--t}if(null!=this.__cbOncePreventDefaultMouseWheelChange){for(var c=null,o=null,l=0,a=this.__cbOncePreventDefaultMouseWheelChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOncePreventDefaultMouseWheelChange[h],this.__cbOncePreventDefaultMouseWheelChange[h]=null,u=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[h],(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[h]),o.push(this.__cbOncePreventDefaultMouseWheelChange[h]))}this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=c,this.__cbOncePreventDefaultMouseWheelChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onPreventDefaultMouseWheelChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event preventDefaultMouseWheelChange because owner is destroyed!");var s=function(e){null!=t&&(i.offPreventDefaultMouseWheelChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.push(null);null==this.__cbOnPreventDefaultMouseWheelChange&&(this.__cbOnPreventDefaultMouseWheelChange=[]),this.__cbOnPreventDefaultMouseWheelChange.push(t)},oncePreventDefaultMouseWheelChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event preventDefaultMouseWheelChange because owner is destroyed!");var s=function(e){null!=t&&(i.offPreventDefaultMouseWheelChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.push(null);null==this.__cbOncePreventDefaultMouseWheelChange&&(this.__cbOncePreventDefaultMouseWheelChange=[]),this.__cbOncePreventDefaultMouseWheelChange.push(t)},offPreventDefaultMouseWheelChange:function(e){if(null!=e){var n;null!=this.__cbOnPreventDefaultMouseWheelChange&&-1!=(n=this.__cbOnPreventDefaultMouseWheelChange.indexOf(e))&&(this.__cbOnPreventDefaultMouseWheelChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange[n])&&r(),this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.splice(n,1)),null!=this.__cbOncePreventDefaultMouseWheelChange&&-1!=(n=this.__cbOncePreventDefaultMouseWheelChange.indexOf(e))&&(this.__cbOncePreventDefaultMouseWheelChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[n])&&r(),this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange){for(var t=0,i=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange[s])&&r()}this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange=null}if(null!=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange){for(t=0,i=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[s])&&r()}this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=null}this.__cbOnPreventDefaultMouseWheelChange=null,this.__cbOncePreventDefaultMouseWheelChange=null}},listensPreventDefaultMouseWheelChange:function(){return null!=this.__cbOnPreventDefaultMouseWheelChange&&0<this.__cbOnPreventDefaultMouseWheelChange.length||null!=this.__cbOncePreventDefaultMouseWheelChange&&0<this.__cbOncePreventDefaultMouseWheelChange.length},get_preventDefaultTouches:function(){var e,n,t=this.unobservedPreventDefaultTouches;return null!=se.current&&(e=se.current,null!=(n=this.preventDefaultTouchesAutoruns)||(n=se.getAutorunArray(),null!=(this.preventDefaultTouchesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_preventDefaultTouches:function(e){var n=this.unobservedPreventDefaultTouches;return n!=(this.unobservedPreventDefaultTouches=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitPreventDefaultTouchesChange(e,n),null!=(n=this.preventDefaultTouchesAutoruns))&&(this.preventDefaultTouchesAutoruns=null,se.invalidateAutorunArray(n)),e},invalidatePreventDefaultTouches:function(){var e=this.unobservedPreventDefaultTouches,e=(this.emitPreventDefaultTouchesChange(e,e),this.preventDefaultTouchesAutoruns);null!=e&&(this.preventDefaultTouchesAutoruns=null,se.invalidateAutorunArray(e))},emitPreventDefaultTouchesChange:function(e,n){var t=0;if(null!=this.__cbOnPreventDefaultTouchesChange&&(t+=this.__cbOnPreventDefaultTouchesChange.length),null!=this.__cbOncePreventDefaultTouchesChange&&(t+=this.__cbOncePreventDefaultTouchesChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnPreventDefaultTouchesChange)for(var l=0,a=this.__cbOnPreventDefaultTouchesChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnPreventDefaultTouchesChange[h],++r):--t}if(null!=this.__cbOncePreventDefaultTouchesChange){for(var c=null,o=null,l=0,a=this.__cbOncePreventDefaultTouchesChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOncePreventDefaultTouchesChange[h],this.__cbOncePreventDefaultTouchesChange[h]=null,u=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[h],(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[h]),o.push(this.__cbOncePreventDefaultTouchesChange[h]))}this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=c,this.__cbOncePreventDefaultTouchesChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onPreventDefaultTouchesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event preventDefaultTouchesChange because owner is destroyed!");var s=function(e){null!=t&&(i.offPreventDefaultTouchesChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnOwnerUnbindPreventDefaultTouchesChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnOwnerUnbindPreventDefaultTouchesChange.push(null);null==this.__cbOnPreventDefaultTouchesChange&&(this.__cbOnPreventDefaultTouchesChange=[]),this.__cbOnPreventDefaultTouchesChange.push(t)},oncePreventDefaultTouchesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event preventDefaultTouchesChange because owner is destroyed!");var s=function(e){null!=t&&(i.offPreventDefaultTouchesChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.push(null);null==this.__cbOncePreventDefaultTouchesChange&&(this.__cbOncePreventDefaultTouchesChange=[]),this.__cbOncePreventDefaultTouchesChange.push(t)},offPreventDefaultTouchesChange:function(e){if(null!=e){var n;null!=this.__cbOnPreventDefaultTouchesChange&&-1!=(n=this.__cbOnPreventDefaultTouchesChange.indexOf(e))&&(this.__cbOnPreventDefaultTouchesChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindPreventDefaultTouchesChange[n])&&r(),this.__cbOnOwnerUnbindPreventDefaultTouchesChange.splice(n,1)),null!=this.__cbOncePreventDefaultTouchesChange&&-1!=(n=this.__cbOncePreventDefaultTouchesChange.indexOf(e))&&(this.__cbOncePreventDefaultTouchesChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[n])&&r(),this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPreventDefaultTouchesChange){for(var t=0,i=this.__cbOnOwnerUnbindPreventDefaultTouchesChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindPreventDefaultTouchesChange[s])&&r()}this.__cbOnOwnerUnbindPreventDefaultTouchesChange=null}if(null!=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange){for(t=0,i=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[s])&&r()}this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=null}this.__cbOnPreventDefaultTouchesChange=null,this.__cbOncePreventDefaultTouchesChange=null}},listensPreventDefaultTouchesChange:function(){return null!=this.__cbOnPreventDefaultTouchesChange&&0<this.__cbOnPreventDefaultTouchesChange.length||null!=this.__cbOncePreventDefaultTouchesChange&&0<this.__cbOncePreventDefaultTouchesChange.length},unbindEvents:function(){this.offObservedDirty(),this.offTargetWidthChange(),this.offTargetHeightChange(),this.offWindowWidthChange(),this.offWindowHeightChange(),this.offTargetDensityChange(),this.offBackgroundChange(),this.offScalingChange(),this.offTitleChange(),this.offFullscreenChange(),this.offTargetFpsChange(),this.offMaxDeltaChange(),this.offOverrideDeltaChange(),this.offPreventDefaultMouseWheelChange(),this.offPreventDefaultTouchesChange()},__class__:Vn,__properties__:{set_preventDefaultTouches:"set_preventDefaultTouches",get_preventDefaultTouches:"get_preventDefaultTouches",set_preventDefaultMouseWheel:"set_preventDefaultMouseWheel",get_preventDefaultMouseWheel:"get_preventDefaultMouseWheel",set_overrideDelta:"set_overrideDelta",get_overrideDelta:"get_overrideDelta",set_maxDelta:"set_maxDelta",get_maxDelta:"get_maxDelta",set_targetFps:"set_targetFps",get_targetFps:"get_targetFps",set_fullscreen:"set_fullscreen",get_fullscreen:"get_fullscreen",set_title:"set_title",get_title:"get_title",set_scaling:"set_scaling",get_scaling:"get_scaling",set_background:"set_background",get_background:"get_background",set_targetDensity:"set_targetDensity",get_targetDensity:"get_targetDensity",set_windowHeight:"set_windowHeight",get_windowHeight:"get_windowHeight",set_windowWidth:"set_windowWidth",get_windowWidth:"get_windowWidth",set_targetHeight:"set_targetHeight",get_targetHeight:"get_targetHeight",set_targetWidth:"set_targetWidth",get_targetWidth:"get_targetWidth"}},(x["ceramic.Shader"]=Gb).__name__="ceramic.Shader",Gb.__super__=h,Gb.prototype=$extend(h.prototype,{set_backendItem:function(e){if(this.backendItem!=e&&null!=(this.backendItem=e)){ae.app.backend.shaders;var n=0,t=e.customAttributes;if(null!=t)for(var i=0,s=t.length;i<s;)n+=t[i++].size;this.customFloatAttributesSize=n}return e},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),null!=this.backendItem&&(ae.app.backend.shaders,this.backendItem.destroy(),this.set_backendItem(null)),this.attributes=null)},clone:function(){ae.app.backend.shaders;var e=this.backendItem.clone(),n=new Gb(this.customAttributes,this.baseAttributes,this.textureIdAttribute);return n.set_backendItem(e),n},setInt:function(e,n){ae.app.backend.shaders;this.backendItem.uniforms.setInt(e,n)},setFloat:function(e,n){ae.app.backend.shaders;this.backendItem.uniforms.setFloat(e,n)},setVec2:function(e,n,t){ae.app.backend.shaders;this.backendItem.uniforms.setVector2(e,n,t)},setFloatArray:function(e,n){ae.app.backend.shaders;this.backendItem.uniforms.setFloatArray(e,new Float32Array(n))},resolveTextureSlot:function(e){return-1},setTexture:function(e,n,t){(n=null==n?-1:n)<0&&(n=this.resolveTextureSlot(e)),null==this.textureSlots&&(this.textureSlots=new vn,this.usedTextures=[]);var i=this.textureSlots.get(n);null!=i&&this.usedTextures.splice(this.usedTextures.indexOf(i),1),this.textureSlots.set(n,t),null!=t&&this.usedTextures.push(t),ae.app.backend.shaders;this.backendItem.uniforms.setTexture(e,n,null!=t?t.backendItem:null)},setMat2:function(e,n,t,i,s){ae.app.backend.shaders;this.backendItem.uniforms.setMatrix2(e,new Float32Array([n,t,i,s]))},toString:function(){var e;return null!=this.id?(e=this.id,z.startsWith(e,"shader:")&&(e=le.substr(e,7,null)),null!=this.asset&&null!=this.asset.options.vertId||null!=this.asset.options.fragId?"Shader("+e+" "+(null!=this.asset.options.vertId?this.asset.options.vertId:"default")+" "+(null!=this.asset.options.fragId?this.asset.options.fragId:"default")+")":"Shader("+e+")"):"Shader()"},__class__:Gb,__properties__:$extend(h.prototype.__properties__,{set_backendItem:"set_backendItem"})}),function(e,n,t){this.shaderClass=null,this.unobservedShader=null,this.shaderAutoruns=null,Fa.call(this,"shader",e,n,t)}),Yn=((x["ceramic.ShaderAsset"]=zn).__name__="ceramic.ShaderAsset",zn.__super__=Fa,zn.prototype=$extend(Fa.prototype,{get_shader:function(){var e,n,t=this.unobservedShader;return null!=se.current&&(e=se.current,null!=(n=this.shaderAutoruns)||(n=se.getAutorunArray(),null!=(this.shaderAutoruns=n)))&&e.bindToAutorunArray(n),t},set_shader:function(e){var n=this.unobservedShader;return n!=(this.unobservedShader=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitShaderChange(e,n),null!=(n=this.shaderAutoruns))&&(this.shaderAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateShader:function(){var e=this.unobservedShader,e=(this.emitShaderChange(e,e),this.shaderAutoruns);null!=e&&(this.shaderAutoruns=null,se.invalidateAutorunArray(e))},emitShaderChange:function(e,n){var t=0;if(null!=this.__cbOnShaderChange&&(t+=this.__cbOnShaderChange.length),null!=this.__cbOnceShaderChange&&(t+=this.__cbOnceShaderChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnShaderChange)for(var l=0,a=this.__cbOnShaderChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnShaderChange[h],++r):--t}if(null!=this.__cbOnceShaderChange){for(var c=null,o=null,l=0,a=this.__cbOnceShaderChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceShaderChange[h],this.__cbOnceShaderChange[h]=null,u=this.__cbOnceOwnerUnbindShaderChange[h],(this.__cbOnceOwnerUnbindShaderChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindShaderChange[h]),o.push(this.__cbOnceShaderChange[h]))}this.__cbOnceOwnerUnbindShaderChange=c,this.__cbOnceShaderChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onShaderChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event shaderChange because owner is destroyed!");var s=function(e){null!=t&&(i.offShaderChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindShaderChange&&(this.__cbOnOwnerUnbindShaderChange=[]),this.__cbOnOwnerUnbindShaderChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindShaderChange&&(this.__cbOnOwnerUnbindShaderChange=[]),this.__cbOnOwnerUnbindShaderChange.push(null);null==this.__cbOnShaderChange&&(this.__cbOnShaderChange=[]),this.__cbOnShaderChange.push(t)},onceShaderChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event shaderChange because owner is destroyed!");var s=function(e){null!=t&&(i.offShaderChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindShaderChange&&(this.__cbOnceOwnerUnbindShaderChange=[]),this.__cbOnceOwnerUnbindShaderChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindShaderChange&&(this.__cbOnceOwnerUnbindShaderChange=[]),this.__cbOnceOwnerUnbindShaderChange.push(null);null==this.__cbOnceShaderChange&&(this.__cbOnceShaderChange=[]),this.__cbOnceShaderChange.push(t)},offShaderChange:function(e){if(null!=e){var n;null!=this.__cbOnShaderChange&&-1!=(n=this.__cbOnShaderChange.indexOf(e))&&(this.__cbOnShaderChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindShaderChange[n])&&r(),this.__cbOnOwnerUnbindShaderChange.splice(n,1)),null!=this.__cbOnceShaderChange&&-1!=(n=this.__cbOnceShaderChange.indexOf(e))&&(this.__cbOnceShaderChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindShaderChange[n])&&r(),this.__cbOnceOwnerUnbindShaderChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindShaderChange){for(var t=0,i=this.__cbOnOwnerUnbindShaderChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindShaderChange[s])&&r()}this.__cbOnOwnerUnbindShaderChange=null}if(null!=this.__cbOnceOwnerUnbindShaderChange){for(t=0,i=this.__cbOnceOwnerUnbindShaderChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindShaderChange[s])&&r()}this.__cbOnceOwnerUnbindShaderChange=null}this.__cbOnShaderChange=null,this.__cbOnceShaderChange=null}},listensShaderChange:function(){return null!=this.__cbOnShaderChange&&0<this.__cbOnShaderChange.length||null!=this.__cbOnceShaderChange&&0<this.__cbOnceShaderChange.length},load:function(){var n=this;if(this.set_status(Se.LOADING),null==this.path)ae.app.logger.warning("Cannot load shader asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:81,className:"ceramic.ShaderAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1);else{var t=null,e=null,i=null,s=null;if(null==this.shaderClass){if(e=[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")],s=new Yn(1,"vertexTextureId"),null!=this.options.customAttributes)for(var i=[],r=this.options.customAttributes,l=0,a=r.length;l<a;){var h=r[l++];i.push(new Yn(h.size,h.name))}null!=this.owner&&(this.owner.immediate,this.owner.loadMethod),t=new Gb(e,i,s)}else e=(t=B.createInstance(this.shaderClass,[])).baseAttributes,i=t.customAttributes,s=t.textureIdAttribute;var c=this.path;z.startsWith(c,"shaders_")&&(c=le.substr(c,"shaders_".length,null)),null!=s?ae.app.logger.info("Load shader "+c+" (multi-texture)",{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:137,className:"ceramic.ShaderAsset",methodName:"load"}):ae.app.logger.info("Load shader "+c,{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:140,className:"ceramic.ShaderAsset",methodName:"load"}),ae.app.backend.shaders.load(ne.realAssetPath(this.path,this.runtimeAssets),e,i,s,function(e){null==e?(n.set_status(Se.BROKEN),null!=t&&(t.destroy(),t=null),ae.app.logger.error("Failed to load shader at path: "+n.path,{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:151,className:"ceramic.ShaderAsset",methodName:"load"}),n.emitComplete(!1)):(t.set_backendItem(e),n.set_shader(t),(n.get_shader().asset=n).get_shader().id="shader:"+n.path,n.set_status(Se.READY),n.emitComplete(!0))})}},assetFilesDidChange:function(e,n){},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),null!=this.get_shader()&&(this.get_shader().destroy(),this.set_shader(null)))},toString:function(){var e,n,t="ShaderAsset";return null!=this.options.vertId||null!=this.options.fragId?(e=null!=this.options.vertId?this.options.vertId:"default",n=null!=this.options.fragId?this.options.fragId:"default",t+"("+this.name+" "+e+" "+n+")"):null!=this.path&&""!=z.trim(this.path)?t+"("+this.name+" "+this.path+")":t+"("+this.name+")"},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offShaderChange()},__class__:zn,__properties__:$extend(Fa.prototype.__properties__,{set_shader:"set_shader",get_shader:"get_shader"})}),function(e,n){this.size=e,this.name=n}),Xn=((x["ceramic.ShaderAttribute"]=Yn).__name__="ceramic.ShaderAttribute",Yn.prototype={toString:function(){return""+L.string({size:this.size,name:this.name})},__class__:Yn},(x["ceramic.Shortcuts"]=Jb).__name__="ceramic.Shortcuts",Jb.__properties__={get_systems:"get_systems",get_log:"get_log",get_settings:"get_settings",get_input:"get_input",get_audio:"get_audio",get_screen:"get_screen",get_app:"get_app"},Jb.get_app=function(){return ae.app},Jb.get_screen=function(){return ae.app.screen},Jb.get_audio=function(){return ae.app.audio},Jb.get_input=function(){return ae.app.input},Jb.get_settings=function(){return ae.app.settings},Jb.get_log=function(){return ae.app.logger},Jb.get_systems=function(){return ae.app.systems},Jb.unobserve=function(){se.unobserve()},Jb.reobserve=function(){se.reobserve()},Jb.cease=function(){se.cease()},function(){}),jn=((x["ceramic.SortVisuals"]=Xn).__name__="ceramic.SortVisuals",Xn.cmp=function(e,n){var t,i,s,r,l=0;return e.computedVisible||e.computedTouchable?n.computedVisible||n.computedTouchable?e.computedRenderTarget!=n.computedRenderTarget?l=null!=e.computedRenderTarget&&(null==n.computedRenderTarget||e.computedRenderTarget.priority>n.computedRenderTarget.priority||!(e.computedRenderTarget.priority<n.computedRenderTarget.priority)&&e.computedRenderTarget.index<n.computedRenderTarget.index)?-1:1:e.computedDepth>n.computedDepth?l=1:e.computedDepth<n.computedDepth?l=-1:(r=e.asQuad,t=n.asQuad,s=e.asMesh,i=n.asMesh,null==r&&null==s||null==t&&null==i||(s=null!=s?s.texture:r._texture,r=null!=i?i.texture:t._texture,null!=s&&null==r?l=1:null==s&&null!=r?l=-1:null!=s&&null!=r?s.index<r.index?l=1:s.index>r.index?l=-1:e.blending>n.blending?l=1:e.blending<n.blending&&(l=-1):e.blending>n.blending?l=1:e.blending<n.blending&&(l=-1))):l=1:l=-1,l},Xn.sort=function(e){Xn.rec(e,0,e.length)},Xn.rec=function(e,n,t){var i=n+t>>1;if(t-n<12){if(!(t<=n))for(var s=n+1,r=t;s<r;)for(var l=s++;n<l;){var a,h,c=e[l],o=e[l-1],u=0;if(c.computedVisible||c.computedTouchable?o.computedVisible||o.computedTouchable?c.computedRenderTarget!=o.computedRenderTarget?u=null!=c.computedRenderTarget&&(null==o.computedRenderTarget||c.computedRenderTarget.priority>o.computedRenderTarget.priority||!(c.computedRenderTarget.priority<o.computedRenderTarget.priority)&&c.computedRenderTarget.index<o.computedRenderTarget.index)?-1:1:c.computedDepth>o.computedDepth?u=1:c.computedDepth<o.computedDepth?u=-1:(h=c.asQuad,d=o.asQuad,a=c.asMesh,_=o.asMesh,null==h&&null==a||null==d&&null==_||(a=null!=a?a.texture:h._texture,h=null!=_?_.texture:d._texture,null!=a&&null==h?u=1:null==a&&null!=h?u=-1:null!=a&&null!=h?a.index<h.index?u=1:a.index>h.index?u=-1:c.blending>o.blending?u=1:c.blending<o.blending&&(u=-1):c.blending>o.blending?u=1:c.blending<o.blending&&(u=-1))):u=1:u=-1,!(u<0))break;var _=l-1,d=e[_];e[_]=e[l],e[l]=d,--l}}else Xn.rec(e,n,i),Xn.rec(e,i,t),Xn.doMerge(e,n,i,t,i-n,t-i)},Xn.doMerge=function(e,n,t,i,s,r){var l;if(0!=s&&0!=r)if(s+r==2)o=e[t],u=e[n],_=0,o.computedVisible||o.computedTouchable?u.computedVisible||u.computedTouchable?o.computedRenderTarget!=u.computedRenderTarget?_=null!=o.computedRenderTarget&&(null==u.computedRenderTarget||o.computedRenderTarget.priority>u.computedRenderTarget.priority||!(o.computedRenderTarget.priority<u.computedRenderTarget.priority)&&o.computedRenderTarget.index<u.computedRenderTarget.index)?-1:1:o.computedDepth>u.computedDepth?_=1:o.computedDepth<u.computedDepth?_=-1:(g=o.asQuad,m=u.asQuad,w=o.asMesh,v=u.asMesh,y=null!=m||null!=v,(null!=g||null!=w)&&y&&(U=null!=w?w.texture:g._texture,x=null!=v?v.texture:m._texture,null!=U&&null==x?_=1:null==U&&null!=x?_=-1:null!=U&&null!=x?U.index<x.index?_=1:U.index>x.index?_=-1:o.blending>u.blending?_=1:o.blending<u.blending&&(_=-1):o.blending>u.blending?_=1:o.blending<u.blending&&(_=-1))):_=1:_=-1,_<0&&(R=e[t],e[t]=e[n],e[n]=R);else{if(r<s){for(var a,h=n+(a=s>>1),c=i-(b=t);0<c;){var o=e[f=b+(p=c>>1)],u=e[h],_=0;o.computedVisible||o.computedTouchable?u.computedVisible||u.computedTouchable?o.computedRenderTarget!=u.computedRenderTarget?_=null!=o.computedRenderTarget&&(null==u.computedRenderTarget||o.computedRenderTarget.priority>u.computedRenderTarget.priority||!(o.computedRenderTarget.priority<u.computedRenderTarget.priority)&&o.computedRenderTarget.index<u.computedRenderTarget.index)?-1:1:o.computedDepth>u.computedDepth?_=1:o.computedDepth<u.computedDepth?_=-1:(g=o.asQuad,m=u.asQuad,w=o.asMesh,v=u.asMesh,y=null!=m||null!=v,(null!=g||null!=w)&&y&&(U=null!=w?w.texture:g._texture,x=null!=v?v.texture:m._texture,null!=U&&null==x?_=1:null==U&&null!=x?_=-1:null!=U&&null!=x?U.index<x.index?_=1:U.index>x.index?_=-1:o.blending>u.blending?_=1:o.blending<u.blending&&(_=-1):o.blending>u.blending?_=1:o.blending<u.blending&&(_=-1))):_=1:_=-1,c=_<0?(b=f+1,c-p-1):p}d=(O=b)-t}else{for(var d,b,p,f,O=t+(d=r>>1),c=t-(b=n);0<c;){var g,m,w,v,y,U,x,o=e[O],u=e[f=b+(p=c>>1)],_=0;o.computedVisible||o.computedTouchable?u.computedVisible||u.computedTouchable?o.computedRenderTarget!=u.computedRenderTarget?_=null!=o.computedRenderTarget&&(null==u.computedRenderTarget||o.computedRenderTarget.priority>u.computedRenderTarget.priority||!(o.computedRenderTarget.priority<u.computedRenderTarget.priority)&&o.computedRenderTarget.index<u.computedRenderTarget.index)?-1:1:o.computedDepth>u.computedDepth?_=1:o.computedDepth<u.computedDepth?_=-1:(g=o.asQuad,m=u.asQuad,w=o.asMesh,v=u.asMesh,y=null!=m||null!=v,(null!=g||null!=w)&&y&&(U=null!=w?w.texture:g._texture,x=null!=v?v.texture:m._texture,null!=U&&null==x?_=1:null==U&&null!=x?_=-1:null!=U&&null!=x?U.index<x.index?_=1:U.index>x.index?_=-1:o.blending>u.blending?_=1:o.blending<u.blending&&(_=-1):o.blending>u.blending?_=1:o.blending<u.blending&&(_=-1))):_=1:_=-1,c=_<0?p:(b=f+1,c-p-1)}a=(h=b)-n}if(h!=t&&t!=O){for(var C=O-h,D=t-h;0!=D;)var T=C%D,C=D,D=T;for(l=C;0!=l--;){for(var S=e[h+l],E=t-h,A=h+l,M=h+l+E;M!=h+l;)e[A]=e[M],E<O-(A=M)?M+=E:M=h+(E-(O-M));e[A]=S}}var R=h+d;Xn.doMerge(e,n,h,R,a,d),Xn.doMerge(e,R,O,i,s-a,r-d)}},Xn.rotate=function(e,n,t,i){if(n!=t&&t!=i){for(var s=i-n,r=t-n;0!=r;){var l=s%r,s=r;r=l}for(r=s;0!=r--;){for(var a=e[n+r],h=t-n,c=n+r,o=n+r+h;o!=n+r;)e[c]=e[o],h<i-(c=o)?o+=h:o=n+(h-(i-o));e[c]=a}}},Xn.gcd=function(e,n){for(;0!=n;){var t=e%n;e=n,n=t}return e},Xn.upper=function(e,n,t,i){for(var s=t-n;0<s;){var r,l,a,h,c,o,u=e[i],_=e[l=n+(r=s>>1)],d=0;u.computedVisible||u.computedTouchable?_.computedVisible||_.computedTouchable?u.computedRenderTarget!=_.computedRenderTarget?d=null!=u.computedRenderTarget&&(null==_.computedRenderTarget||u.computedRenderTarget.priority>_.computedRenderTarget.priority||!(u.computedRenderTarget.priority<_.computedRenderTarget.priority)&&u.computedRenderTarget.index<_.computedRenderTarget.index)?-1:1:u.computedDepth>_.computedDepth?d=1:u.computedDepth<_.computedDepth?d=-1:(o=u.asQuad,a=_.asQuad,c=u.asMesh,h=_.asMesh,null==o&&null==c||null==a&&null==h||(c=null!=c?c.texture:o._texture,o=null!=h?h.texture:a._texture,null!=c&&null==o?d=1:null==c&&null!=o?d=-1:null!=c&&null!=o?c.index<o.index?d=1:c.index>o.index?d=-1:u.blending>_.blending?d=1:u.blending<_.blending&&(d=-1):u.blending>_.blending?d=1:u.blending<_.blending&&(d=-1))):d=1:d=-1,s=d<0?r:(n=l+1,s-r-1)}return n},Xn.lower=function(e,n,t,i){for(var s=t-n;0<s;){var r,l,a,h,c,o,u=e[l=n+(r=s>>1)],_=e[i],d=0;u.computedVisible||u.computedTouchable?_.computedVisible||_.computedTouchable?u.computedRenderTarget!=_.computedRenderTarget?d=null!=u.computedRenderTarget&&(null==_.computedRenderTarget||u.computedRenderTarget.priority>_.computedRenderTarget.priority||!(u.computedRenderTarget.priority<_.computedRenderTarget.priority)&&u.computedRenderTarget.index<_.computedRenderTarget.index)?-1:1:u.computedDepth>_.computedDepth?d=1:u.computedDepth<_.computedDepth?d=-1:(o=u.asQuad,a=_.asQuad,c=u.asMesh,h=_.asMesh,null==o&&null==c||null==a&&null==h||(c=null!=c?c.texture:o._texture,o=null!=h?h.texture:a._texture,null!=c&&null==o?d=1:null==c&&null!=o?d=-1:null!=c&&null!=o?c.index<o.index?d=1:c.index>o.index?d=-1:u.blending>_.blending?d=1:u.blending<_.blending&&(d=-1):u.blending>_.blending?d=1:u.blending<_.blending&&(d=-1))):d=1:d=-1,s=d<0?(n=l+1,s-r-1):r}return n},Xn.swap=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},Xn.compare=function(e,n,t){var i,s,r,l,n=e[n],e=e[t],t=0;return n.computedVisible||n.computedTouchable?e.computedVisible||e.computedTouchable?n.computedRenderTarget!=e.computedRenderTarget?t=null!=n.computedRenderTarget&&(null==e.computedRenderTarget||n.computedRenderTarget.priority>e.computedRenderTarget.priority||!(n.computedRenderTarget.priority<e.computedRenderTarget.priority)&&n.computedRenderTarget.index<e.computedRenderTarget.index)?-1:1:n.computedDepth>e.computedDepth?t=1:n.computedDepth<e.computedDepth?t=-1:(l=n.asQuad,i=e.asQuad,r=n.asMesh,s=e.asMesh,null==l&&null==r||null==i&&null==s||(r=null!=r?r.texture:l._texture,l=null!=s?s.texture:i._texture,null!=r&&null==l?t=1:null==r&&null!=l?t=-1:null!=r&&null!=l?r.index<l.index?t=1:r.index>l.index?t=-1:n.blending>e.blending?t=1:n.blending<e.blending&&(t=-1):n.blending>e.blending?t=1:n.blending<e.blending&&(t=-1))):t=1:t=-1,t},function(){}),Qn=((x["ceramic.SortVisualsByDepth"]=jn).__name__="ceramic.SortVisualsByDepth",jn.cmp=function(e,n){var t=0;return e.depth>n.depth?t=1:e.depth<n.depth&&(t=-1),t},jn.sort=function(e){jn.rec(e,0,e.length)},jn.rec=function(e,n,t){var i=n+t>>1;if(t-n<12){if(!(t<=n))for(var s=n+1,r=t;s<r;)for(var l=s++;n<l;){var a=e[l],h=e[l-1],c=0;if(a.depth>h.depth?c=1:a.depth<h.depth&&(c=-1),!(c<0))break;a=l-1,h=e[a];e[a]=e[l],e[l]=h,--l}}else jn.rec(e,n,i),jn.rec(e,i,t),jn.doMerge(e,n,i,t,i-n,t-i)},jn.doMerge=function(e,n,t,i,s,r){var l;if(0!=s&&0!=r)if(s+r==2)o=e[t],u=e[n],_=0,o.depth>u.depth?_=1:o.depth<u.depth&&(_=-1),_<0&&(C=e[t],e[t]=e[n],e[n]=C);else{if(r<s){for(var a,h=n+(a=s>>1),c=i-(b=t);0<c;){var o=e[f=b+(p=c>>1)],u=e[h],_=0;o.depth>u.depth?_=1:o.depth<u.depth&&(_=-1),c=_<0?(b=f+1,c-p-1):p}d=(O=b)-t}else{for(var d,b,p,f,O=t+(d=r>>1),c=t-(b=n);0<c;){o=e[O],u=e[f=b+(p=c>>1)],_=0;o.depth>u.depth?_=1:o.depth<u.depth&&(_=-1),c=_<0?p:(b=f+1,c-p-1)}a=(h=b)-n}if(h!=t&&t!=O){for(var g=O-h,m=t-h;0!=m;)var w=g%m,g=m,m=w;for(l=g;0!=l--;){for(var v=e[h+l],y=t-h,U=h+l,x=h+l+y;x!=h+l;)e[U]=e[x],y<O-(U=x)?x+=y:x=h+(y-(O-x));e[U]=v}}var C=h+d;jn.doMerge(e,n,h,C,a,d),jn.doMerge(e,C,O,i,s-a,r-d)}},jn.rotate=function(e,n,t,i){if(n!=t&&t!=i){for(var s=i-n,r=t-n;0!=r;){var l=s%r,s=r;r=l}for(r=s;0!=r--;){for(var a=e[n+r],h=t-n,c=n+r,o=n+r+h;o!=n+r;)e[c]=e[o],h<i-(c=o)?o+=h:o=n+(h-(i-o));e[c]=a}}},jn.gcd=function(e,n){for(;0!=n;){var t=e%n;e=n,n=t}return e},jn.upper=function(e,n,t,i){for(var s=t-n;0<s;){var r,l,a=e[i],h=e[l=n+(r=s>>1)],c=0;a.depth>h.depth?c=1:a.depth<h.depth&&(c=-1),s=c<0?r:(n=l+1,s-r-1)}return n},jn.lower=function(e,n,t,i){for(var s=t-n;0<s;){var r,l,a=e[l=n+(r=s>>1)],h=e[i],c=0;a.depth>h.depth?c=1:a.depth<h.depth&&(c=-1),s=c<0?(n=l+1,s-r-1):r}return n},jn.swap=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},jn.compare=function(e,n,t){n=e[n],e=e[t],t=0;return n.depth>e.depth?t=1:n.depth<e.depth&&(t=-1),t},(x["ceramic.Sound"]=Mb).__name__="ceramic.Sound",Mb.fromSamplesBuffer=function(e,n,t,i,s){e=ae.app.backend.audio.createFromSamplesBuffer(e,n,t,i,s);return new Mb(e)},Mb.__super__=h,Mb.prototype=$extend(h.prototype,{set_group:function(e){var n;return this.group==e||(this.group=e,(n=ae.app.audio).mixers.exists(e))||n.mixers.set(e,new Me(e)),e},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy();for(var e=ae.app.backend.audio,n=this.backendItem,t=null,i=e.loadedAudioResources.h,s=i,r=Object.keys(i),l=r.length,a=0;a<l;){var c=r[a++];s[c]==n&&(t=c)}null==t?ae.app.logger.error("Failed to destroy audio resource: "+L.string(n)+" because id could not be resolved",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:284,className:"backend.Audio",methodName:"destroy"}):1<e.loadedAudioRetainCount.h[t]?--e.loadedAudioRetainCount.h[t]:(i=e.loadedAudioResources,Object.prototype.hasOwnProperty.call(i.h,t)&&delete i.h[t],i=e.loadedAudioRetainCount,Object.prototype.hasOwnProperty.call(i.h,t)&&delete i.h[t],n.destroy()),this.backendItem=null}},get_duration:function(){ae.app.backend.audio;return this.backendItem.getDuration()},play:function(e,n,t,i,s,r){null==n&&(n=!1);var l=ae.app.audio.mixers,a=l._keys.intMap.h[0|this.group],a=null!=a?a:0,l=2<=a?l.values[a-2]:vn.RET_NULL;return l.mute?-1:(null==t&&(t=this.volume),null==i&&(i=this.pan),null==s&&(s=this.pitch),null==r&&(r=this.bus),t*=2*l.volume,i+=l.pan,s+=l.pitch-1,ae.app.backend.audio.play(this.backendItem,t,i,s,e=null==e?0:e,n,r))},__class__:Mb,__properties__:$extend(h.prototype.__properties__,{get_duration:"get_duration",set_group:"set_group"})}),function(e,n,t){this.unobservedSound=null,this.soundAutoruns=null,this.stream=!1,Fa.call(this,"sound",e,n,t)}),$n=((x["ceramic.SoundAsset"]=Qn).__name__="ceramic.SoundAsset",Qn.__super__=Fa,Qn.prototype=$extend(Fa.prototype,{emitReplaceSound:function(e,n){var t=0;if(null!=this.__cbOnReplaceSound&&(t+=this.__cbOnReplaceSound.length),null!=this.__cbOnceReplaceSound&&(t+=this.__cbOnceReplaceSound.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnReplaceSound)for(var l=0,a=this.__cbOnReplaceSound.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnReplaceSound[h],++r):--t}if(null!=this.__cbOnceReplaceSound){for(var c=null,o=null,l=0,a=this.__cbOnceReplaceSound.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceReplaceSound[h],this.__cbOnceReplaceSound[h]=null,u=this.__cbOnceOwnerUnbindReplaceSound[h],(this.__cbOnceOwnerUnbindReplaceSound[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindReplaceSound[h]),o.push(this.__cbOnceReplaceSound[h]))}this.__cbOnceOwnerUnbindReplaceSound=c,this.__cbOnceReplaceSound=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onReplaceSound:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceSound because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceSound(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReplaceSound&&(this.__cbOnOwnerUnbindReplaceSound=[]),this.__cbOnOwnerUnbindReplaceSound.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReplaceSound&&(this.__cbOnOwnerUnbindReplaceSound=[]),this.__cbOnOwnerUnbindReplaceSound.push(null);null==this.__cbOnReplaceSound&&(this.__cbOnReplaceSound=[]),this.__cbOnReplaceSound.push(t)},onceReplaceSound:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event replaceSound because owner is destroyed!");var s=function(e){null!=t&&(i.offReplaceSound(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReplaceSound&&(this.__cbOnceOwnerUnbindReplaceSound=[]),this.__cbOnceOwnerUnbindReplaceSound.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReplaceSound&&(this.__cbOnceOwnerUnbindReplaceSound=[]),this.__cbOnceOwnerUnbindReplaceSound.push(null);null==this.__cbOnceReplaceSound&&(this.__cbOnceReplaceSound=[]),this.__cbOnceReplaceSound.push(t)},offReplaceSound:function(e){if(null!=e){var n;null!=this.__cbOnReplaceSound&&-1!=(n=this.__cbOnReplaceSound.indexOf(e))&&(this.__cbOnReplaceSound.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReplaceSound[n])&&r(),this.__cbOnOwnerUnbindReplaceSound.splice(n,1)),null!=this.__cbOnceReplaceSound&&-1!=(n=this.__cbOnceReplaceSound.indexOf(e))&&(this.__cbOnceReplaceSound.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReplaceSound[n])&&r(),this.__cbOnceOwnerUnbindReplaceSound.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceSound){for(var t=0,i=this.__cbOnOwnerUnbindReplaceSound.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReplaceSound[s])&&r()}this.__cbOnOwnerUnbindReplaceSound=null}if(null!=this.__cbOnceOwnerUnbindReplaceSound){for(t=0,i=this.__cbOnceOwnerUnbindReplaceSound.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReplaceSound[s])&&r()}this.__cbOnceOwnerUnbindReplaceSound=null}this.__cbOnReplaceSound=null,this.__cbOnceReplaceSound=null}},listensReplaceSound:function(){return null!=this.__cbOnReplaceSound&&0<this.__cbOnReplaceSound.length||null!=this.__cbOnceReplaceSound&&0<this.__cbOnceReplaceSound.length},get_sound:function(){var e,n,t=this.unobservedSound;return null!=se.current&&(e=se.current,null!=(n=this.soundAutoruns)||(n=se.getAutorunArray(),null!=(this.soundAutoruns=n)))&&e.bindToAutorunArray(n),t},set_sound:function(e){var n=this.unobservedSound;return n!=(this.unobservedSound=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitSoundChange(e,n),null!=(n=this.soundAutoruns))&&(this.soundAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateSound:function(){var e=this.unobservedSound,e=(this.emitSoundChange(e,e),this.soundAutoruns);null!=e&&(this.soundAutoruns=null,se.invalidateAutorunArray(e))},emitSoundChange:function(e,n){var t=0;if(null!=this.__cbOnSoundChange&&(t+=this.__cbOnSoundChange.length),null!=this.__cbOnceSoundChange&&(t+=this.__cbOnceSoundChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnSoundChange)for(var l=0,a=this.__cbOnSoundChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnSoundChange[h],++r):--t}if(null!=this.__cbOnceSoundChange){for(var c=null,o=null,l=0,a=this.__cbOnceSoundChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceSoundChange[h],this.__cbOnceSoundChange[h]=null,u=this.__cbOnceOwnerUnbindSoundChange[h],(this.__cbOnceOwnerUnbindSoundChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindSoundChange[h]),o.push(this.__cbOnceSoundChange[h]))}this.__cbOnceOwnerUnbindSoundChange=c,this.__cbOnceSoundChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onSoundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event soundChange because owner is destroyed!");var s=function(e){null!=t&&(i.offSoundChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindSoundChange&&(this.__cbOnOwnerUnbindSoundChange=[]),this.__cbOnOwnerUnbindSoundChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindSoundChange&&(this.__cbOnOwnerUnbindSoundChange=[]),this.__cbOnOwnerUnbindSoundChange.push(null);null==this.__cbOnSoundChange&&(this.__cbOnSoundChange=[]),this.__cbOnSoundChange.push(t)},onceSoundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event soundChange because owner is destroyed!");var s=function(e){null!=t&&(i.offSoundChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindSoundChange&&(this.__cbOnceOwnerUnbindSoundChange=[]),this.__cbOnceOwnerUnbindSoundChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindSoundChange&&(this.__cbOnceOwnerUnbindSoundChange=[]),this.__cbOnceOwnerUnbindSoundChange.push(null);null==this.__cbOnceSoundChange&&(this.__cbOnceSoundChange=[]),this.__cbOnceSoundChange.push(t)},offSoundChange:function(e){if(null!=e){var n;null!=this.__cbOnSoundChange&&-1!=(n=this.__cbOnSoundChange.indexOf(e))&&(this.__cbOnSoundChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindSoundChange[n])&&r(),this.__cbOnOwnerUnbindSoundChange.splice(n,1)),null!=this.__cbOnceSoundChange&&-1!=(n=this.__cbOnceSoundChange.indexOf(e))&&(this.__cbOnceSoundChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindSoundChange[n])&&r(),this.__cbOnceOwnerUnbindSoundChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSoundChange){for(var t=0,i=this.__cbOnOwnerUnbindSoundChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindSoundChange[s])&&r()}this.__cbOnOwnerUnbindSoundChange=null}if(null!=this.__cbOnceOwnerUnbindSoundChange){for(t=0,i=this.__cbOnceOwnerUnbindSoundChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindSoundChange[s])&&r()}this.__cbOnceOwnerUnbindSoundChange=null}this.__cbOnSoundChange=null,this.__cbOnceSoundChange=null}},listensSoundChange:function(){return null!=this.__cbOnSoundChange&&0<this.__cbOnSoundChange.length||null!=this.__cbOnceSoundChange&&0<this.__cbOnceSoundChange.length},load:function(){var s=this;if(this.set_status(Se.LOADING),null==this.path)ae.app.logger.warning("Cannot load sound asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:78,className:"ceramic.SoundAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1);else{var r={};if(null!=this.owner&&(r.immediate=this.owner.immediate,r.loadMethod=this.owner.loadMethod),null!=this.options)for(var e=0,n=P.fields(this.options);e<n.length;){var t=n[e];++e,r[t]=P.field(this.options,t)}var l=[].concat(this.allPaths),a=function(e){var n;null!=e?(n=s.get_sound(),((e=new Mb(e)).asset=s).set_sound(e),null!=n&&(s.emitReplaceSound(s.get_sound(),n),n.asset=null,n.destroy()),s.set_status(Se.READY),s.emitComplete(!0)):(s.set_status(Se.BROKEN),ae.app.logger.error("Failed to load audio at path: "+s.path,{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:122,className:"ceramic.SoundAsset",methodName:"load"}),s.emitComplete(!1))},h=null,h=function(n){var e=n,t=ne.realAssetPath(e,s.runtimeAssets),i=ne.getReloadCount(t),i=(0<i&&(t+="?hot="+i,e+="?hot="+i),ae.app.logger.info("Load sound "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:138,className:"ceramic.SoundAsset",methodName:"load"}),An.extension(t));null!=i&&(i=i.toLowerCase()),ae.app.backend.audio.load(t,r,function(e){null!=e||0==l.length?a(e):(e=l.shift(),ae.app.logger.warning("Failed to load "+n+". Try "+e+"...",{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:151,className:"ceramic.SoundAsset",methodName:"load"}),h(e))})};0<l.length?h(l.shift()):(this.set_status(Se.BROKEN),ae.app.logger.error("Failed to load audio at path: "+this.path,{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:163,className:"ceramic.SoundAsset",methodName:"load"}),this.emitComplete(!1))}},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload sound (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:188,className:"ceramic.SoundAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),null!=this.get_sound()&&(this.get_sound().destroy(),this.set_sound(null)))},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offReplaceSound(),this.offSoundChange()},__class__:Qn,__properties__:$extend(Fa.prototype.__properties__,{set_sound:"set_sound",get_sound:"get_sound"})}),function(){this._udpatingSystems=[],this.lateUpdateOrdered=[],this.earlyUpdateOrdered=[],this.lateUpdateOrderDirty=!1,this.earlyUpdateOrderDirty=!1,h.call(this)}),qn=((x["ceramic.Systems"]=$n).__name__="ceramic.Systems",$n.sortSystemsByEarlyUpdateOrder=function(e,n){return e.earlyUpdateOrder>n.earlyUpdateOrder?1:e.earlyUpdateOrder<n.earlyUpdateOrder?-1:0},$n.sortSystemsByLateUpdateOrder=function(e,n){return e.lateUpdateOrder>n.lateUpdateOrder?1:e.lateUpdateOrder<n.lateUpdateOrder?-1:0},$n.__super__=h,$n.prototype=$extend(h.prototype,{addSystem:function(e){this.earlyUpdateOrdered.push(e),this.earlyUpdateOrderDirty=!0,this.lateUpdateOrdered.push(e),this.lateUpdateOrderDirty=!0},removeSystem:function(e){le.remove(this.earlyUpdateOrdered,e),this.earlyUpdateOrderDirty=!0,le.remove(this.lateUpdateOrdered,e),this.lateUpdateOrderDirty=!0},earlyUpdate:function(e){this.earlyUpdateOrderDirty&&(Jt.sort(this.earlyUpdateOrdered,$n.sortSystemsByEarlyUpdateOrder),this.earlyUpdateOrderDirty=!1);for(var n=this.earlyUpdateOrdered.length,t=0,i=n;t<i;){var s=t++;this._udpatingSystems[s]=this.earlyUpdateOrdered[s]}for(t=0,i=n;t<i;){var s=t++,r=this._udpatingSystems[s];r.emitBeginEarlyUpdate(e),r.earlyUpdate(e),r.emitEndEarlyUpdate(e),ae.app.flushImmediate()}for(t=0,i=n;t<i;){s=t++;this._udpatingSystems[s]=null}},lateUpdate:function(e){this.lateUpdateOrderDirty&&(Jt.sort(this.lateUpdateOrdered,$n.sortSystemsByLateUpdateOrder),this.lateUpdateOrderDirty=!1);for(var n=this.lateUpdateOrdered.length,t=0,i=n;t<i;){var s=t++;this._udpatingSystems[s]=this.lateUpdateOrdered[s]}for(t=0,i=n;t<i;){var s=t++,r=this._udpatingSystems[s];r.emitBeginLateUpdate(e),r.lateUpdate(e),r.emitEndLateUpdate(e),ae.app.flushImmediate()}for(t=0,i=n;t<i;){s=t++;this._udpatingSystems[s]=null}},get:function(e){for(var n=0,t=this.earlyUpdateOrdered.length;n<t;){var i=n++,i=this.earlyUpdateOrdered[i];if(i.name==e)return i}return null},__class__:$n}),function(){this.glyphCode=null,this.maxLineDiff=-1,this.fitWidth=-1,this.align=Zn.LEFT,this.preRenderedSize=-1,this.clipTextHeight=-1,this.clipTextWidth=-1,this.clipTextY=-1,this.clipTextX=-1,this.letterSpacing=0,this.lineHeight=1,this.pointSize=20,this.content="",this.color=16777215,this.numLines=1,this.glyphQuads=[],m.call(this),this.set_font(ae.app.defaultFont)}),Zn=((x["ceramic.Text"]=qn).__name__="ceramic.Text",qn.__super__=m,qn.prototype=$extend(m.prototype,{emitGlyphQuadsChange:function(){var e=0;if(null!=this.__cbOnGlyphQuadsChange&&(e+=this.__cbOnGlyphQuadsChange.length),null!=this.__cbOnceGlyphQuadsChange&&(e+=this.__cbOnceGlyphQuadsChange.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnGlyphQuadsChange)for(var s=0,r=this.__cbOnGlyphQuadsChange.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnGlyphQuadsChange[l],++i):--e}if(null!=this.__cbOnceGlyphQuadsChange){for(var a=null,h=null,s=0,r=this.__cbOnceGlyphQuadsChange.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceGlyphQuadsChange[l],this.__cbOnceGlyphQuadsChange[l]=null,c=this.__cbOnceOwnerUnbindGlyphQuadsChange[l],(this.__cbOnceOwnerUnbindGlyphQuadsChange[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindGlyphQuadsChange[l]),h.push(this.__cbOnceGlyphQuadsChange[l]))}this.__cbOnceOwnerUnbindGlyphQuadsChange=a,this.__cbOnceGlyphQuadsChange=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onGlyphQuadsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event glyphQuadsChange because owner is destroyed!");var s=function(e){null!=t&&(i.offGlyphQuadsChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindGlyphQuadsChange&&(this.__cbOnOwnerUnbindGlyphQuadsChange=[]),this.__cbOnOwnerUnbindGlyphQuadsChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindGlyphQuadsChange&&(this.__cbOnOwnerUnbindGlyphQuadsChange=[]),this.__cbOnOwnerUnbindGlyphQuadsChange.push(null);null==this.__cbOnGlyphQuadsChange&&(this.__cbOnGlyphQuadsChange=[]),this.__cbOnGlyphQuadsChange.push(t)},onceGlyphQuadsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event glyphQuadsChange because owner is destroyed!");var s=function(e){null!=t&&(i.offGlyphQuadsChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindGlyphQuadsChange&&(this.__cbOnceOwnerUnbindGlyphQuadsChange=[]),this.__cbOnceOwnerUnbindGlyphQuadsChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindGlyphQuadsChange&&(this.__cbOnceOwnerUnbindGlyphQuadsChange=[]),this.__cbOnceOwnerUnbindGlyphQuadsChange.push(null);null==this.__cbOnceGlyphQuadsChange&&(this.__cbOnceGlyphQuadsChange=[]),this.__cbOnceGlyphQuadsChange.push(t)},offGlyphQuadsChange:function(e){if(null!=e){var n;null!=this.__cbOnGlyphQuadsChange&&-1!=(n=this.__cbOnGlyphQuadsChange.indexOf(e))&&(this.__cbOnGlyphQuadsChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindGlyphQuadsChange[n])&&r(),this.__cbOnOwnerUnbindGlyphQuadsChange.splice(n,1)),null!=this.__cbOnceGlyphQuadsChange&&-1!=(n=this.__cbOnceGlyphQuadsChange.indexOf(e))&&(this.__cbOnceGlyphQuadsChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindGlyphQuadsChange[n])&&r(),this.__cbOnceOwnerUnbindGlyphQuadsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGlyphQuadsChange){for(var t=0,i=this.__cbOnOwnerUnbindGlyphQuadsChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindGlyphQuadsChange[s])&&r()}this.__cbOnOwnerUnbindGlyphQuadsChange=null}if(null!=this.__cbOnceOwnerUnbindGlyphQuadsChange){for(t=0,i=this.__cbOnceOwnerUnbindGlyphQuadsChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindGlyphQuadsChange[s])&&r()}this.__cbOnceOwnerUnbindGlyphQuadsChange=null}this.__cbOnGlyphQuadsChange=null,this.__cbOnceGlyphQuadsChange=null}},listensGlyphQuadsChange:function(){return null!=this.__cbOnGlyphQuadsChange&&0<this.__cbOnGlyphQuadsChange.length||null!=this.__cbOnceGlyphQuadsChange&&0<this.__cbOnceGlyphQuadsChange.length},get_numLines:function(){return this.contentDirty&&this.computeContent(),this.numLines},set_color:function(e){if(this.color!=e&&(this.color=e,null!=this.glyphQuads))for(var n=0,t=this.glyphQuads.length;n<t;){var i=n++;this.glyphQuads[i].color=e}return e},set_roundTranslation:function(e){return this.roundTranslation!=e&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.roundTranslation=e),e},set_content:function(e){return this.content!=e&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.content=e),e},set_pointSize:function(e){return this.pointSize!=e&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.pointSize=e),e},set_lineHeight:function(e){return this.lineHeight!=e&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.lineHeight=e),e},set_letterSpacing:function(e){return this.letterSpacing!=e&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.letterSpacing=e),e},set_font:function(e){return null==e&&(e=ae.app.defaultFont),this.font!=e&&(null!=this.font&&(this.font.offDestroy($bind(this,this.fontDestroyed)),null!=this.font.asset)&&this.font.asset.release(),this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.font=e,null!=this.font&&(this.font.onDestroy(this,$bind(this,this.fontDestroyed)),null!=this.font.asset))&&this.font.asset.retain(),e},set_clipTextX:function(e){return this.clipTextX!=e&&(this.clipTextX=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_clipTextY:function(e){return this.clipTextY!=e&&(this.clipTextY=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_clipTextWidth:function(e){return this.clipTextWidth!=e&&(this.clipTextWidth=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_clipTextHeight:function(e){return this.clipTextHeight!=e&&(this.clipTextHeight=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},clipText:function(e,n,t,i){this.set_clipTextX(e),this.set_clipTextY(n),this.set_clipTextWidth(t),this.set_clipTextHeight(i)},set_preRenderedSize:function(e){return this.preRenderedSize!=e&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.preRenderedSize<=0&&0<e&&ae.app.screen.onTexturesDensityChange(this,$bind(this,this.handleTexturesDensityChange)),0<this.preRenderedSize&&e<=0&&ae.app.screen.offTexturesDensityChange($bind(this,this.handleTexturesDensityChange)),this.preRenderedSize=e),e},handleTexturesDensityChange:function(e,n){this.contentDirty=!0,ae.app.visualsContentDirty=!0},set_align:function(e){return this.align!=e&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0,this.align=e),e},set_fitWidth:function(e){return this.fitWidth!=e&&(this.fitWidth=e,this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_maxLineDiff:function(e){return this.maxLineDiff!=e&&(this.maxLineDiff=e,-1!=this.fitWidth)&&(this.contentDirty=!0,ae.app.visualsContentDirty=!0),e},set_depth:function(e){if(this.depth==e)return e;if(null!=this.glyphQuads)for(var n=0,t=this.glyphQuads.length;n<t;){var i=n++;this.glyphQuads[i].set_depth(e)}return m.prototype.set_depth.call(this,e)},get_width:function(){return this.contentDirty&&this.computeContent(),m.prototype.get_width.call(this)},scaleWidth:function(e){if(this._width!=e&&(this.set_scaleX(e/this._width),this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}},get_height:function(){return this.contentDirty&&this.computeContent(),m.prototype.get_height.call(this)},scaleHeight:function(e){if(this._height!=e&&(this.set_scaleY(e/this._height),this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}},set_blending:function(e){if(this.blending!=e&&(this.blending=e,null!=this.glyphQuads))for(var n=0,t=this.glyphQuads.length;n<t;){var i=n++;this.glyphQuads[i].set_blending(e)}return e},destroy:function(){if(!(this._lifecycleState<=-2)&&(this._lifecycleState=-2,this._lifecycleState=-1,m.prototype.destroy.call(this),null!=this.glyphQuads)){for(var e=0,n=this.glyphQuads.length;e<n;){var t=e++;this.glyphQuads[t].destroy()}this.glyphQuads=null}},computeContent:function(){var e=this;if(null==this.font)this.set_width(0),this.set_height(0),this.contentDirty=!1;else{if(this.numLines=this.computeGlyphQuads(this.fitWidth,this.maxLineDiff),this.contentDirty=!1,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,s=this.children[i];if(s.matrixDirty=!0,null!=s.children)for(var r=0,l=s.children.length;r<l;){var a=r++;s.children[a].set_matrixDirty(!0)}}var h,c=this.preRenderedSize*ae.app.screen.get_texturesDensity()|0;0<c&&null!=(h=this.font).fontData.distanceField&&"msdf"==h.fontData.distanceField.fieldType&&this.font.needsToPreRenderAtSize(c)&&this.font.preRenderAtSize(c,function(){e.contentDirty=!0,ae.app.visualsContentDirty=!0}),this.emitGlyphQuadsChange()}},computeGlyphQuads:function(e,k,B){null==B&&(B=-1);var n,t,i,s=0,N=0,L=0,r=this.pointSize/this.font.fontData.pointSize,l=null,a=-1,h=null,c=-1,o=0,u=null,_=[],d=[[]],b=0,W=!1,G=!1,K=!1,p=0,H=0,f=!1,O=0,V=!1,z=(-1!=this.clipTextX&&-1!=this.clipTextY&&-1!=this.clipTextWidth&&-1!=this.clipTextHeight&&(V=!0),this.preRenderedSize*ae.app.screen.get_texturesDensity()|0),Y=0<z&&null!=(x=this.font).fontData.distanceField&&"msdf"==x.fontData.distanceField.fieldType&&!this.font.needsToPreRenderAtSize(z),g=this.content;if((""==g||0<g.length&&10==le.cca(g,g.length-1))&&(f=!0,g+=" "),null!=this.glyphCode){for(var X="",m=0,w=g.length;m<w;){var v=m++,j=le.cca(g,v),j=this.glyphCode(j,v);X+=String.fromCodePoint(j)}g=X}for(var y,U,x,Q=g.length;o<Q&&b<2*Q;){if(h=l,c=a,l=g.charAt(o),a=le.cca(l,0),(G=" "==l)&&++p,(W="\n"==l)||G||o==Q-1)if(!K&&0<=e&&1<L&&e-1<L&&0<p)for(K=!0,--p;0<o;){if(--o,l=g.charAt(o),a=le.cca(l,0),c=0<o?(h=g.charAt(o-1),le.cca(h,0)):(h=null,-1),u=this.font.fontData.chars.get(a),null!=h&&(s-=(null!=(y=this.font.fontData.kernings.get(c))&&y.intMap.h.hasOwnProperty(0|a)&&null!=(y=y.intMap.h[0|a])?y:0)*r),null!=u&&(s-=u.xAdvance*r+this.letterSpacing),!(0<d[d.length-1].length))break;if(--b,d[d.length-1].pop()," "==l){l="\n",u=this.font.fontData.chars.get(10),a=le.cca(l,0),--p,G=!(W=!0);break}}else K=!1;if(W)p=0,c=-1,H=++o,N+=this.lineHeight*this.font.fontData.lineHeight*r,_.push(s+((h=null)!=u?(u.xOffset+u.width-u.xAdvance)*r-this.letterSpacing:0)),d.push([]),L=s=0;else{if(null!=(u=this.font.fontData.chars.get(a))){if(null!=h&&(s+=(null!=(U=this.font.fontData.kernings.get(c))&&U.intMap.h.hasOwnProperty(0|a)&&null!=(U=U.intMap.h[0|a])?U:0)*r),U=s+u.xOffset*r,n=N+u.yOffset*r,t=u.width*r,i=u.height*r,O=0,V&&(U>=this.clipTextX+this.clipTextWidth||U+t<this.clipTextX||n>=this.clipTextY+this.clipTextHeight||n+i<this.clipTextY?O=2:(this.clipTextX>U&&this.clipTextX<=U+t||this.clipTextY>n&&this.clipTextY<=n+i||this.clipTextX+this.clipTextWidth>U&&this.clipTextX+this.clipTextWidth<=U+t||this.clipTextY+this.clipTextHeight>n&&this.clipTextY+this.clipTextHeight<=n+i)&&(O=1)),null==(I=b<this.glyphQuads.length?this.glyphQuads[b]:null)){if(1!=(I=new I0).inheritAlpha&&(I.inheritAlpha=!0,I.visibilityDirty=!0,null!=I.children))for(m=0,w=I.children.length;m<w;){var $=m++,q=I.children[$];if(q.visibilityDirty=!0,null!=q.children)for(var C=0,D=q.children.length;C<D;){var Z=C++;q.children[Z].set_visibilityDirty(!0)}}this.glyphQuads.push(I),this.add(I)}++b,I.char=l,I.code=a,I.index=o,I.set_visible(2!=O),I.flags&=-17,I.posInLine=o-H,I.line=d.length-1;var J,ee,T,S,E,A,M,R,P=Y?this.font.preRenderedPages.h[z].h[u.page]:this.font.pages.get(u.page);I._texture!=P&&I._set_texture(P),I.set_roundTranslation(0<=this.roundTranslation?this.roundTranslation:null!=I._texture&&I._texture.filter==at.NEAREST?1:0),I.set_shader(Y||null==this.font.pageShaders?null:this.font.pageShaders.h[u.page]),I.color=this.color,I.set_depth(this.depth),I.set_blending(this.blending),I.glyphX=s,I.glyphY=N,I.glyphAdvance=u.xAdvance*r+this.letterSpacing,I.glyph=u,1==O?(P=Math.max(this.clipTextX,U),A=Math.max(this.clipTextY,n),M=Math.min(this.clipTextX+this.clipTextWidth,U+t)-P,R=Math.min(this.clipTextY+this.clipTextHeight,n+i)-A,S=Y?(S=this.font.pages.get(u.page),J=u.x*I._texture.width/S.width,ee=u.y*I._texture.height/S.height,T=u.width*I._texture.width/S.width,u.height*I._texture.height/S.height):(J=u.x/I._texture.density,ee=u.y/I._texture.density,T=u.width/I._texture.density,u.height/I._texture.density),J+=E=(P-U)*T/t,T-=E+(U+t-P-M)*T/t,ee+=E=(A-n)*S/i,S-=E+(n+i-A-R)*S/i,I.frameX=J,I.frameY=ee,I.frameWidth!=T&&-1!=(I.frameWidth=T)&&I.set_width(T),I.frameHeight!=S&&-1!=(I.frameHeight=S)&&I.set_height(S),I.set_x(P),I.set_y(A),I.set_width(M),I.set_height(R)):(Y?(E=this.font.pages.get(u.page),P=u.width*I._texture.width/E.width,A=u.height*I._texture.height/E.height,I.frameX=u.x*I._texture.width/E.width,I.frameY=u.y*I._texture.height/E.height,I.frameWidth!=P&&-1!=(I.frameWidth=P)&&I.set_width(P),I.frameHeight!=A&&-1!=(I.frameHeight=A)&&I.set_height(A)):(M=u.width/I._texture.density,R=u.height/I._texture.density,I.frameX=u.x/I._texture.density,I.frameY=u.y/I._texture.density,I.frameWidth!=M&&-1!=(I.frameWidth=M)&&I.set_width(M),I.frameHeight!=R&&-1!=(I.frameHeight=R)&&I.set_height(R)),I.set_x(U),I.set_y(n),I.set_width(t),I.set_height(i)),I.set_anchorX(0),I.set_anchorY(0),d[d.length-1].push(I),L=s+Math.max((u.xOffset+u.width)*r,u.xAdvance*r),s+=u.xAdvance*r+this.letterSpacing}++o}}for(0<s&&_.push(s),f&&0<b&&(x=this.glyphQuads[b-1],f=_[_.length-1],f-=x.glyphAdvance,_[_.length-1]=f,x.glyphAdvance=0,x.set_visible(!1));b<this.glyphQuads.length;)(I=this.glyphQuads.pop()).destroy();for(var F=0,m=0,w=_.length;m<w;)o=m++,F=Math.max(_[o],F);switch(this.set_width(Math.round(1e3*F)/1e3),this.set_height(Math.round(1e3*((_.length-1)*this.lineHeight*this.font.fontData.lineHeight*r+this.font.fontData.lineHeight*r))/1e3),this.align._hx_index){case 1:for(m=0,w=_.length;m<w;)for(var ne=F-_[o=m++],C=0,D=(te=d[o]).length;C<D;)(I=te[v=C++]).set_x(I.x+ne);break;case 2:for(m=0,w=_.length;m<w;)for(var te,I,ne=.5*(F-_[o=m++]),C=0,D=(te=d[o]).length;C<D;)(I=te[v=C++]).set_x(I.x+ne)}if((-1==B||B==_.length)&&0<e&&-1!=k&&e>this.pointSize){for(var ie=0,se=this.fitWidth*k,m=0,w=_.length;m<w;)for(o=m++,C=0,D=_.length;C<D;){var v=C++,re=_[o]-_[v];if(se<(ie=ie<(re=re<0?-re:re)?re:ie))break}se<ie&&(f=this.computeGlyphQuads(e-this.pointSize,k,_.length),_.length<f)&&this.computeGlyphQuads(e,-1,_.length)}return _.length},lineForYPosition:function(e){this.contentDirty&&this.computeContent();var n,t=this.lineHeight*this.font.fontData.lineHeight*this.pointSize/this.font.fontData.pointSize,i=0;return t<=0?0:(i=0<(n=this.glyphQuads).length?n[n.length-1].line:i)<(n=(n=Math.floor(e/t))<0?0:n)?i:n},posInLineForX:function(e,n){this.contentDirty&&this.computeContent();var t=this.glyphQuads,i=0;if(0!=t.length&&0!=n)for(var s=0,r=t.length;s<r;){var l=t[s++];if(l.line==e){if(l.glyphX>=n)return i;if(l.glyphX+l.glyphAdvance>=n){var a=l.glyphX+l.glyphAdvance-n;if(n-l.glyphX<=a)return i}++i}else if(l.line>e)break}return i},indexForPosInLine:function(e,n){this.contentDirty&&this.computeContent();var t=this.glyphQuads;if(0==t.length)return 0;for(var i=0,s=t.length;i<s;){var r=t[i++];if(r.line==e&&r.posInLine>=n)return r.index+n-r.posInLine;if(r.line>e)return r.index-r.posInLine-(r.line-e)}return this.content.length},xPositionAtIndex:function(e){this.contentDirty&&this.computeContent();var n=this.glyphQuads;if(0==n.length)return 0;for(var t=0,i=n.length;t<i;){var s=t++,r=n[s];if(r.index>=e)return 0==r.glyphX&&r.index>e?1<=s?(s=n[s-1]).glyphX+s.glyphAdvance:0:r.glyphX}var l=n[n.length-1];return l.glyphX+l.glyphAdvance},lineForIndex:function(e){this.contentDirty&&this.computeContent();var n=this.glyphQuads;if(0==n.length)return 0;for(var t=0,i=n.length;t<i;){var s=n[t++];if(s.index>=e){if(s.posInLine>e-s.index){for(var r=s.index-s.posInLine,l=s.line;e<r;)--r,--l;return l}return s.line}}return n[n.length-1].line},posInLineForIndex:function(e){this.contentDirty&&this.computeContent();var n=this.glyphQuads;if(0!=n.length)for(var t=!1,i=-1,s=0,r=n.length;s<r;){var l=s++,a=n[l];if(a.index>=e){var h=a.posInLine+e-a.index;if(h<0)for(var c=l-1;0<=c;){var o=n[c];if(t||(t=!0,i=this.lineForIndex(e)),o.line==i)return h=o.posInLine+e-o.index;if(o.line<i)return 0;--c}return 0<=h?h:0}}return 0},fontDestroyed:function(e){this.set_font(ae.app.defaultFont)},toString:function(){return null!=this.id?"Text("+this.id+" "+this.content+")":"Text("+this.content+")"},unbindEvents:function(){m.prototype.unbindEvents.call(this),this.offGlyphQuadsChange()},__class__:qn,__properties__:$extend(m.prototype.__properties__,{set_maxLineDiff:"set_maxLineDiff",set_fitWidth:"set_fitWidth",set_align:"set_align",set_preRenderedSize:"set_preRenderedSize",set_clipTextHeight:"set_clipTextHeight",set_clipTextWidth:"set_clipTextWidth",set_clipTextY:"set_clipTextY",set_clipTextX:"set_clipTextX",set_font:"set_font",set_letterSpacing:"set_letterSpacing",set_lineHeight:"set_lineHeight",set_pointSize:"set_pointSize",set_content:"set_content",set_color:"set_color",get_numLines:"get_numLines"})}),he["ceramic.TextAlign"]={__ename__:"ceramic.TextAlign",__constructs__:null,LEFT:{_hx_name:"LEFT",_hx_index:0,__enum__:"ceramic.TextAlign",toString:c},RIGHT:{_hx_name:"RIGHT",_hx_index:1,__enum__:"ceramic.TextAlign",toString:c},CENTER:{_hx_name:"CENTER",_hx_index:2,__enum__:"ceramic.TextAlign",toString:c}}),Jn=(Zn.__constructs__=[Zn.LEFT,Zn.RIGHT,Zn.CENTER],function(e,n,t){this.unobservedText=null,this.textAutoruns=null,Fa.call(this,"text",e,n,t)}),et=((x["ceramic.TextAsset"]=Jn).__name__="ceramic.TextAsset",Jn.__super__=Fa,Jn.prototype=$extend(Fa.prototype,{get_text:function(){var e,n,t=this.unobservedText;return null!=se.current&&(e=se.current,null!=(n=this.textAutoruns)||(n=se.getAutorunArray(),null!=(this.textAutoruns=n)))&&e.bindToAutorunArray(n),t},set_text:function(e){var n=this.unobservedText;return n!=(this.unobservedText=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextChange(e,n),null!=(n=this.textAutoruns))&&(this.textAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateText:function(){var e=this.unobservedText,e=(this.emitTextChange(e,e),this.textAutoruns);null!=e&&(this.textAutoruns=null,se.invalidateAutorunArray(e))},emitTextChange:function(e,n){var t=0;if(null!=this.__cbOnTextChange&&(t+=this.__cbOnTextChange.length),null!=this.__cbOnceTextChange&&(t+=this.__cbOnceTextChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTextChange)for(var l=0,a=this.__cbOnTextChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTextChange[h],++r):--t}if(null!=this.__cbOnceTextChange){for(var c=null,o=null,l=0,a=this.__cbOnceTextChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTextChange[h],this.__cbOnceTextChange[h]=null,u=this.__cbOnceOwnerUnbindTextChange[h],(this.__cbOnceOwnerUnbindTextChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTextChange[h]),o.push(this.__cbOnceTextChange[h]))}this.__cbOnceOwnerUnbindTextChange=c,this.__cbOnceTextChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(null);null==this.__cbOnTextChange&&(this.__cbOnTextChange=[]),this.__cbOnTextChange.push(t)},onceTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(null);null==this.__cbOnceTextChange&&(this.__cbOnceTextChange=[]),this.__cbOnceTextChange.push(t)},offTextChange:function(e){if(null!=e){var n;null!=this.__cbOnTextChange&&-1!=(n=this.__cbOnTextChange.indexOf(e))&&(this.__cbOnTextChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTextChange[n])&&r(),this.__cbOnOwnerUnbindTextChange.splice(n,1)),null!=this.__cbOnceTextChange&&-1!=(n=this.__cbOnceTextChange.indexOf(e))&&(this.__cbOnceTextChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTextChange[n])&&r(),this.__cbOnceOwnerUnbindTextChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextChange){for(var t=0,i=this.__cbOnOwnerUnbindTextChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTextChange[s])&&r()}this.__cbOnOwnerUnbindTextChange=null}if(null!=this.__cbOnceOwnerUnbindTextChange){for(t=0,i=this.__cbOnceOwnerUnbindTextChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTextChange[s])&&r()}this.__cbOnceOwnerUnbindTextChange=null}this.__cbOnTextChange=null,this.__cbOnceTextChange=null}},listensTextChange:function(){return null!=this.__cbOnTextChange&&0<this.__cbOnTextChange.length||null!=this.__cbOnceTextChange&&0<this.__cbOnceTextChange.length},load:function(){var n=this;if(this.set_status(Se.LOADING),null==this.path)ae.app.logger.warning("Cannot load text asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:62,className:"ceramic.TextAsset",methodName:"load"}),this.set_status(Se.BROKEN),this.emitComplete(!1);else{var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.options)for(var t=0,i=P.fields(this.options);t<i.length;){var s=i[t];++t,e[s]=P.field(this.options,s)}var r=this.path,l=ne.realAssetPath(r,this.runtimeAssets),a=ne.getReloadCount(l);0<a&&(l+="?hot="+a,r+="?hot="+a),ae.app.logger.info("Load text "+r,{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:88,className:"ceramic.TextAsset",methodName:"load"}),ae.app.backend.texts.load(l,e,function(e){null!=e?(n.set_text(e),n.set_status(Se.READY),n.emitComplete(!0)):(n.set_status(Se.BROKEN),ae.app.logger.error("Failed to load text at path: "+n.path,{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:98,className:"ceramic.TextAsset",methodName:"load"}),n.emitComplete(!1))})}},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(ae.app.logger.info("Reload text (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:125,className:"ceramic.TextAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Fa.prototype.destroy.call(this),this.set_text(null))},unbindEvents:function(){Fa.prototype.unbindEvents.call(this),this.offTextChange()},__class__:Jn,__properties__:$extend(Fa.prototype.__properties__,{set_text:"set_text",get_text:"get_text"})}),function(){this.delegate=null,this.selectionEnd=-1,this.selectionStart=-1,this.text="",this.multiline=!1,this.allowMovingCursor=!1,this.invertedSelection=!1,this.rmetaPressed=!1,this.lmetaPressed=!1,this.rctrlPressed=!1,this.lctrlPressed=!1,this.rshiftPressed=!1,this.lshiftPressed=!1,this.explicitPosLine=0,this.explicitPosInLine=0,this.inputActive=!1}),nt=((x["ceramic.TextInput"]=et).__name__="ceramic.TextInput",et.__interfaces__=[g],et.prototype={emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnUpdate)for(var r=0,l=this.__cbOnUpdate.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnUpdate[a],++s):--n}if(null!=this.__cbOnceUpdate){for(var h=null,c=null,r=0,l=this.__cbOnceUpdate.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,o=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),c.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindUpdate[n])&&r(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindUpdate[n])&&r(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindUpdate[s])&&r()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindUpdate[s])&&r()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},emitEnter:function(){var e=0;if(null!=this.__cbOnEnter&&(e+=this.__cbOnEnter.length),null!=this.__cbOnceEnter&&(e+=this.__cbOnceEnter.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnEnter)for(var s=0,r=this.__cbOnEnter.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnEnter[l],++i):--e}if(null!=this.__cbOnceEnter){for(var a=null,h=null,s=0,r=this.__cbOnceEnter.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceEnter[l],this.__cbOnceEnter[l]=null,c=this.__cbOnceOwnerUnbindEnter[l],(this.__cbOnceOwnerUnbindEnter[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindEnter[l]),h.push(this.__cbOnceEnter[l]))}this.__cbOnceOwnerUnbindEnter=a,this.__cbOnceEnter=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onEnter:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event enter because owner is destroyed!");var s=function(e){null!=t&&(i.offEnter(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindEnter&&(this.__cbOnOwnerUnbindEnter=[]),this.__cbOnOwnerUnbindEnter.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindEnter&&(this.__cbOnOwnerUnbindEnter=[]),this.__cbOnOwnerUnbindEnter.push(null);null==this.__cbOnEnter&&(this.__cbOnEnter=[]),this.__cbOnEnter.push(t)},onceEnter:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event enter because owner is destroyed!");var s=function(e){null!=t&&(i.offEnter(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindEnter&&(this.__cbOnceOwnerUnbindEnter=[]),this.__cbOnceOwnerUnbindEnter.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindEnter&&(this.__cbOnceOwnerUnbindEnter=[]),this.__cbOnceOwnerUnbindEnter.push(null);null==this.__cbOnceEnter&&(this.__cbOnceEnter=[]),this.__cbOnceEnter.push(t)},offEnter:function(e){if(null!=e){var n;null!=this.__cbOnEnter&&-1!=(n=this.__cbOnEnter.indexOf(e))&&(this.__cbOnEnter.splice(n,1),null!=(r=this.__cbOnOwnerUnbindEnter[n])&&r(),this.__cbOnOwnerUnbindEnter.splice(n,1)),null!=this.__cbOnceEnter&&-1!=(n=this.__cbOnceEnter.indexOf(e))&&(this.__cbOnceEnter.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindEnter[n])&&r(),this.__cbOnceOwnerUnbindEnter.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEnter){for(var t=0,i=this.__cbOnOwnerUnbindEnter.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindEnter[s])&&r()}this.__cbOnOwnerUnbindEnter=null}if(null!=this.__cbOnceOwnerUnbindEnter){for(t=0,i=this.__cbOnceOwnerUnbindEnter.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindEnter[s])&&r()}this.__cbOnceOwnerUnbindEnter=null}this.__cbOnEnter=null,this.__cbOnceEnter=null}},listensEnter:function(){return null!=this.__cbOnEnter&&0<this.__cbOnEnter.length||null!=this.__cbOnceEnter&&0<this.__cbOnceEnter.length},emitEscape:function(){var e=0;if(null!=this.__cbOnEscape&&(e+=this.__cbOnEscape.length),null!=this.__cbOnceEscape&&(e+=this.__cbOnceEscape.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnEscape)for(var s=0,r=this.__cbOnEscape.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnEscape[l],++i):--e}if(null!=this.__cbOnceEscape){for(var a=null,h=null,s=0,r=this.__cbOnceEscape.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceEscape[l],this.__cbOnceEscape[l]=null,c=this.__cbOnceOwnerUnbindEscape[l],(this.__cbOnceOwnerUnbindEscape[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindEscape[l]),h.push(this.__cbOnceEscape[l]))}this.__cbOnceOwnerUnbindEscape=a,this.__cbOnceEscape=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onEscape:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event escape because owner is destroyed!");var s=function(e){null!=t&&(i.offEscape(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindEscape&&(this.__cbOnOwnerUnbindEscape=[]),this.__cbOnOwnerUnbindEscape.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindEscape&&(this.__cbOnOwnerUnbindEscape=[]),this.__cbOnOwnerUnbindEscape.push(null);null==this.__cbOnEscape&&(this.__cbOnEscape=[]),this.__cbOnEscape.push(t)},onceEscape:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event escape because owner is destroyed!");var s=function(e){null!=t&&(i.offEscape(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindEscape&&(this.__cbOnceOwnerUnbindEscape=[]),this.__cbOnceOwnerUnbindEscape.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindEscape&&(this.__cbOnceOwnerUnbindEscape=[]),this.__cbOnceOwnerUnbindEscape.push(null);null==this.__cbOnceEscape&&(this.__cbOnceEscape=[]),this.__cbOnceEscape.push(t)},offEscape:function(e){if(null!=e){var n;null!=this.__cbOnEscape&&-1!=(n=this.__cbOnEscape.indexOf(e))&&(this.__cbOnEscape.splice(n,1),null!=(r=this.__cbOnOwnerUnbindEscape[n])&&r(),this.__cbOnOwnerUnbindEscape.splice(n,1)),null!=this.__cbOnceEscape&&-1!=(n=this.__cbOnceEscape.indexOf(e))&&(this.__cbOnceEscape.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindEscape[n])&&r(),this.__cbOnceOwnerUnbindEscape.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEscape){for(var t=0,i=this.__cbOnOwnerUnbindEscape.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindEscape[s])&&r()}this.__cbOnOwnerUnbindEscape=null}if(null!=this.__cbOnceOwnerUnbindEscape){for(t=0,i=this.__cbOnceOwnerUnbindEscape.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindEscape[s])&&r()}this.__cbOnceOwnerUnbindEscape=null}this.__cbOnEscape=null,this.__cbOnceEscape=null}},listensEscape:function(){return null!=this.__cbOnEscape&&0<this.__cbOnEscape.length||null!=this.__cbOnceEscape&&0<this.__cbOnceEscape.length},emitSelection:function(e,n){var t=0;if(null!=this.__cbOnSelection&&(t+=this.__cbOnSelection.length),null!=this.__cbOnceSelection&&(t+=this.__cbOnceSelection.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnSelection)for(var l=0,a=this.__cbOnSelection.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnSelection[h],++r):--t}if(null!=this.__cbOnceSelection){for(var c=null,o=null,l=0,a=this.__cbOnceSelection.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceSelection[h],this.__cbOnceSelection[h]=null,u=this.__cbOnceOwnerUnbindSelection[h],(this.__cbOnceOwnerUnbindSelection[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindSelection[h]),o.push(this.__cbOnceSelection[h]))}this.__cbOnceOwnerUnbindSelection=c,this.__cbOnceSelection=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onSelection:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event selection because owner is destroyed!");var s=function(e){null!=t&&(i.offSelection(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindSelection&&(this.__cbOnOwnerUnbindSelection=[]),this.__cbOnOwnerUnbindSelection.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindSelection&&(this.__cbOnOwnerUnbindSelection=[]),this.__cbOnOwnerUnbindSelection.push(null);null==this.__cbOnSelection&&(this.__cbOnSelection=[]),this.__cbOnSelection.push(t)},onceSelection:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event selection because owner is destroyed!");var s=function(e){null!=t&&(i.offSelection(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindSelection&&(this.__cbOnceOwnerUnbindSelection=[]),this.__cbOnceOwnerUnbindSelection.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindSelection&&(this.__cbOnceOwnerUnbindSelection=[]),this.__cbOnceOwnerUnbindSelection.push(null);null==this.__cbOnceSelection&&(this.__cbOnceSelection=[]),this.__cbOnceSelection.push(t)},offSelection:function(e){if(null!=e){var n;null!=this.__cbOnSelection&&-1!=(n=this.__cbOnSelection.indexOf(e))&&(this.__cbOnSelection.splice(n,1),null!=(r=this.__cbOnOwnerUnbindSelection[n])&&r(),this.__cbOnOwnerUnbindSelection.splice(n,1)),null!=this.__cbOnceSelection&&-1!=(n=this.__cbOnceSelection.indexOf(e))&&(this.__cbOnceSelection.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindSelection[n])&&r(),this.__cbOnceOwnerUnbindSelection.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSelection){for(var t=0,i=this.__cbOnOwnerUnbindSelection.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindSelection[s])&&r()}this.__cbOnOwnerUnbindSelection=null}if(null!=this.__cbOnceOwnerUnbindSelection){for(t=0,i=this.__cbOnceOwnerUnbindSelection.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindSelection[s])&&r()}this.__cbOnceOwnerUnbindSelection=null}this.__cbOnSelection=null,this.__cbOnceSelection=null}},listensSelection:function(){return null!=this.__cbOnSelection&&0<this.__cbOnSelection.length||null!=this.__cbOnceSelection&&0<this.__cbOnceSelection.length},emitStop:function(){var e=0;if(null!=this.__cbOnStop&&(e+=this.__cbOnStop.length),null!=this.__cbOnceStop&&(e+=this.__cbOnceStop.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnStop)for(var s=0,r=this.__cbOnStop.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnStop[l],++i):--e}if(null!=this.__cbOnceStop){for(var a=null,h=null,s=0,r=this.__cbOnceStop.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceStop[l],this.__cbOnceStop[l]=null,c=this.__cbOnceOwnerUnbindStop[l],(this.__cbOnceOwnerUnbindStop[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindStop[l]),h.push(this.__cbOnceStop[l]))}this.__cbOnceOwnerUnbindStop=a,this.__cbOnceStop=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onStop:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event stop because owner is destroyed!");var s=function(e){null!=t&&(i.offStop(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindStop&&(this.__cbOnOwnerUnbindStop=[]),this.__cbOnOwnerUnbindStop.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindStop&&(this.__cbOnOwnerUnbindStop=[]),this.__cbOnOwnerUnbindStop.push(null);null==this.__cbOnStop&&(this.__cbOnStop=[]),this.__cbOnStop.push(t)},onceStop:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event stop because owner is destroyed!");var s=function(e){null!=t&&(i.offStop(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindStop&&(this.__cbOnceOwnerUnbindStop=[]),this.__cbOnceOwnerUnbindStop.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindStop&&(this.__cbOnceOwnerUnbindStop=[]),this.__cbOnceOwnerUnbindStop.push(null);null==this.__cbOnceStop&&(this.__cbOnceStop=[]),this.__cbOnceStop.push(t)},offStop:function(e){if(null!=e){var n;null!=this.__cbOnStop&&-1!=(n=this.__cbOnStop.indexOf(e))&&(this.__cbOnStop.splice(n,1),null!=(r=this.__cbOnOwnerUnbindStop[n])&&r(),this.__cbOnOwnerUnbindStop.splice(n,1)),null!=this.__cbOnceStop&&-1!=(n=this.__cbOnceStop.indexOf(e))&&(this.__cbOnceStop.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindStop[n])&&r(),this.__cbOnceOwnerUnbindStop.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStop){for(var t=0,i=this.__cbOnOwnerUnbindStop.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindStop[s])&&r()}this.__cbOnOwnerUnbindStop=null}if(null!=this.__cbOnceOwnerUnbindStop){for(t=0,i=this.__cbOnceOwnerUnbindStop.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindStop[s])&&r()}this.__cbOnceOwnerUnbindStop=null}this.__cbOnStop=null,this.__cbOnceStop=null}},listensStop:function(){return null!=this.__cbOnStop&&0<this.__cbOnStop.length||null!=this.__cbOnceStop&&0<this.__cbOnceStop.length},start:function(e,n,t,i,s,r,l,a,h,c){null==h&&(h=!1),null==a&&(a=-1),null==l&&(l=-1),null==r&&(r=!1),this.inputActive&&this.stop(),this.inputActive=!0,this.set_text(e),this.multiline=r,this.allowMovingCursor=h,this.delegate=c,this.explicitPosInLine=0,this.explicitPosLine=0,this.invertedSelection=!1,a<(l=l<0?e.length:l)&&(a=l),this.selectionStart=l,this.selectionEnd=a;var r=ae.app.screen.matrix,h=(n*r.a+t*r.c+r.tx)/J.app.screenDensity,c=(n*r.b+t*r.d+r.ty)/J.app.screenDensity,o=((n+i)*r.a+(t+s)*r.c+r.tx)/J.app.screenDensity-h,n=((n+i)*r.b+(t+s)*r.d+r.ty)/J.app.screenDensity-c;ae.app.backend.textInput.start(e,h,c,o,n),this.emitUpdate(e),this.emitSelection(l,a)},stop:function(){this.inputActive&&(this.inputActive=!1,this.selectionStart=-1,this.selectionEnd=-1,this.invertedSelection=!1,this.delegate=null,ae.app.backend.textInput.stop(),this.emitStop())},updateSelection:function(e,n,t){this.selectionStart==e&&this.selectionEnd==n||(this.selectionStart=e,this.selectionEnd=n,null!=t&&(this.invertedSelection=t),this.emitSelection(e,n))},appendText:function(e){var n;this.lctrlPressed||this.rctrlPressed||(n="",0<this.selectionStart&&(n+=this.text.substring(0,this.selectionStart)),n=(n+=e)+this.text.substring(this.selectionEnd),this.selectionStart+=e.length,this.selectionEnd=this.selectionStart,this.invertedSelection=!1,this.set_text(n),this.emitUpdate(this.text),this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart))},space:function(){this.appendText(" ")},backspace:function(){var e=this.selectionEnd>this.selectionStart,n="";1<this.selectionStart&&(n+=this.text.substring(0,e?this.selectionStart:this.selectionStart-1)),n+=this.text.substring(this.selectionEnd),0<this.selectionStart&&!e&&this.selectionStart--,this.selectionEnd=this.selectionStart,this.set_text(n),this.emitUpdate(this.text),this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)},moveLeft:function(){this.allowMovingCursor&&(this.lshiftPressed||this.rshiftPressed?this.invertedSelection?(0<this.selectionStart&&(this.selectionStart--,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):this.selectionEnd>this.selectionStart?(this.selectionEnd--,this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd)):(0<this.selectionStart&&(this.invertedSelection=!0,this.selectionStart--,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):(this.invertedSelection=!1,this.selectionEnd>this.selectionStart?(this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)):0<this.selectionStart&&(this.selectionStart--,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)))},moveRight:function(){var e;this.allowMovingCursor&&(this.lshiftPressed||this.rshiftPressed?(e=this.text.length,this.selectionStart==this.selectionEnd?(this.invertedSelection=!1,this.selectionEnd<e&&(this.selectionEnd++,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd)):this.invertedSelection?(this.selectionStart++,this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):(this.selectionEnd<e&&(this.selectionEnd++,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd))):(this.invertedSelection=!1,this.selectionEnd>this.selectionStart?(this.selectionStart=this.selectionEnd,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionStart<this.text.length&&(this.selectionStart++,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)))},moveUp:function(){var e,n,t,i;this.allowMovingCursor&&(this.lshiftPressed||this.rshiftPressed?(e=this.lineForPos(this.selectionStart),n=this.lineForPos(this.selectionEnd),!this.invertedSelection&&e<n?(i=this.explicitPosInLine,t=n,null!=this.delegate&&(i=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,t-1)),n=this.globalPosForLine(t-1,i),this.selectionEnd=0|Math.max(this.selectionStart,n),this.emitSelection(this.selectionStart,this.selectionEnd)):0<this.selectionStart&&(this.invertedSelection=!0,0<e?(i=this.explicitPosInLine,t=e,null!=this.delegate&&(i=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,t-1)),this.selectionStart=this.globalPosForLine(t-1,i)):this.selectionStart=0,this.emitSelection(this.selectionStart,this.selectionEnd))):(this.invertedSelection=!1,0<this.selectionStart&&0<(t=this.lineForPos(this.selectionStart))?(i=this.explicitPosInLine,null!=this.delegate&&(i=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,t-1)),this.selectionStart=this.globalPosForLine(t-1,i),this.selectionEnd=this.selectionStart):(this.selectionStart=0,this.selectionEnd=0),this.emitSelection(this.selectionStart,this.selectionEnd)))},moveDown:function(){var e,n,t,i,s,r,l;this.allowMovingCursor&&(e=this.text.length,this.lshiftPressed||this.rshiftPressed?(n=this.lineForPos(this.selectionStart),t=this.lineForPos(this.selectionEnd),this.invertedSelection?this.invertedSelection&&(n<t?(l=this.explicitPosInLine,s=n,null!=this.delegate&&(l=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,s+1)),i=this.globalPosForLine(s+1,l),this.selectionStart=0|Math.min(this.selectionEnd,i),this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionEnd<e-1?(this.invertedSelection=!1,s=n,r=this.numLines(),l=this.explicitPosInLine,s<r-1?(null!=this.delegate&&(l=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,s+1)),this.selectionEnd=this.globalPosForLine(s+1,l)):this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionEnd<e&&(this.invertedSelection=!1,this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd))):this.selectionEnd<e-1?(l=this.explicitPosInLine,(s=t)<(r=this.numLines())-1?(null!=this.delegate&&(l=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,s+1)),this.selectionEnd=this.globalPosForLine(s+1,l)):this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionEnd<e&&(this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd))):(this.invertedSelection=!1,this.selectionEnd<e-1&&(s=this.lineForPos(this.selectionEnd))<(r=this.numLines())-1?(l=this.explicitPosInLine,null!=this.delegate&&(l=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,s+1)),this.selectionStart=this.globalPosForLine(s+1,l)):this.selectionStart=e,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)))},enter:function(){this.emitEnter(),this.inputActive&&this.multiline&&this.appendText("\n")},kpEnter:function(){this.enter()},escape:function(){this.emitEscape(),this.stop()},lshiftDown:function(){this.lshiftPressed=!0},lshiftUp:function(){this.lshiftPressed=!1},rshiftDown:function(){this.rshiftPressed=!0},rshiftUp:function(){this.rshiftPressed=!1},lctrlDown:function(){this.lctrlPressed=!0},lctrlUp:function(){this.lctrlPressed=!1},rctrlDown:function(){this.rctrlPressed=!0},rctrlUp:function(){this.rctrlPressed=!1},lmetaDown:function(){this.lmetaPressed=!0},lmetaUp:function(){this.lmetaPressed=!1},rmetaDown:function(){this.rmetaPressed=!0},rmetaUp:function(){this.rmetaPressed=!1},posInCurrentLine:function(e){if(null!=this.delegate)return this.delegate.textInputPosInLineForIndex(e);for(var n=this.text,t=0;0<e;){if("\n"==n.charAt(e)&&0<t){--t;break}--e,++t}return t},lineForPos:function(e){if(null!=this.delegate)return this.delegate.textInputLineForIndex(e);for(var n=this.text,t=0,i=0;i<e;)"\n"==n.charAt(i)&&++t,++i;return t},numLines:function(){return null!=this.delegate?this.delegate.textInputNumberOfLines():this.text.split("\n").length},globalPosForLine:function(e,n){if(null!=this.delegate)return this.delegate.textInputIndexForPosInLine(e,n);for(var t=this.text,i=0,s=t.length,r=0;i<s;){var l=t.charAt(i);if(r==e){if(!(0<n))break;if("\n"==l)break;--n}else"\n"==l&&++r;++i}return i},set_text:function(e){var n,t,i;return this.text!=e&&(n=(this.text=e).length,t=this.selectionStart,(i=n<(i=this.selectionEnd)?n:i)<t&&(t=i),this.updateSelection(t,i)),e},unbindEvents:function(){this.offUpdate(),this.offEnter(),this.offEscape(),this.offSelection(),this.offStop()},__class__:et,__properties__:{set_text:"set_text"}},(x["ceramic.TextInputDelegate"]=Ub).__name__="ceramic.TextInputDelegate",Ub.__isInterface__=!0,Ub.prototype={__class__:Ub},(x["ceramic.TextureAtlas"]=Vb).__name__="ceramic.TextureAtlas",Vb.__super__=h,Vb.prototype=$extend(h.prototype,{region:function(e){for(var n=0,t=this.regions.length;n<t;){var i=n++,i=this.regions[i];if(i.name==e)return i}return null},computeFrames:function(){for(var e=0,n=this.regions.length;e<n;){var t=e++;this.regions[t].computeFrame()}},destroy:function(){if(!(this._lifecycleState<=-2)){for(this._lifecycleState=-2;0<this.pages.length;){var e=this.pages.pop().get_texture();null!=e&&e.destroy()}null!=this.asset&&this.asset.destroy(),this._lifecycleState=-1,h.prototype.destroy.call(this)}},__class__:Vb}),(x["ceramic.TextureAtlasPacker"]=Wb).__name__="ceramic.TextureAtlasPacker",Wb.__super__=h,Wb.prototype=$extend(h.prototype,{emitFinishPack:function(){var e=0;if(null!=this.__cbOnFinishPack&&(e+=this.__cbOnFinishPack.length),null!=this.__cbOnceFinishPack&&(e+=this.__cbOnceFinishPack.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishPack)for(var s=0,r=this.__cbOnFinishPack.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnFinishPack[l],++i):--e}if(null!=this.__cbOnceFinishPack){for(var a=null,h=null,s=0,r=this.__cbOnceFinishPack.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceFinishPack[l],this.__cbOnceFinishPack[l]=null,c=this.__cbOnceOwnerUnbindFinishPack[l],(this.__cbOnceOwnerUnbindFinishPack[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishPack[l]),h.push(this.__cbOnceFinishPack[l]))}this.__cbOnceOwnerUnbindFinishPack=a,this.__cbOnceFinishPack=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onFinishPack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishPack because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishPack(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFinishPack&&(this.__cbOnOwnerUnbindFinishPack=[]),this.__cbOnOwnerUnbindFinishPack.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFinishPack&&(this.__cbOnOwnerUnbindFinishPack=[]),this.__cbOnOwnerUnbindFinishPack.push(null);null==this.__cbOnFinishPack&&(this.__cbOnFinishPack=[]),this.__cbOnFinishPack.push(t)},onceFinishPack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event finishPack because owner is destroyed!");var s=function(e){null!=t&&(i.offFinishPack(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFinishPack&&(this.__cbOnceOwnerUnbindFinishPack=[]),this.__cbOnceOwnerUnbindFinishPack.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFinishPack&&(this.__cbOnceOwnerUnbindFinishPack=[]),this.__cbOnceOwnerUnbindFinishPack.push(null);null==this.__cbOnceFinishPack&&(this.__cbOnceFinishPack=[]),this.__cbOnceFinishPack.push(t)},offFinishPack:function(e){if(null!=e){var n;null!=this.__cbOnFinishPack&&-1!=(n=this.__cbOnFinishPack.indexOf(e))&&(this.__cbOnFinishPack.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFinishPack[n])&&r(),this.__cbOnOwnerUnbindFinishPack.splice(n,1)),null!=this.__cbOnceFinishPack&&-1!=(n=this.__cbOnceFinishPack.indexOf(e))&&(this.__cbOnceFinishPack.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFinishPack[n])&&r(),this.__cbOnceOwnerUnbindFinishPack.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishPack){for(var t=0,i=this.__cbOnOwnerUnbindFinishPack.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFinishPack[s])&&r()}this.__cbOnOwnerUnbindFinishPack=null}if(null!=this.__cbOnceOwnerUnbindFinishPack){for(t=0,i=this.__cbOnceOwnerUnbindFinishPack.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFinishPack[s])&&r()}this.__cbOnceOwnerUnbindFinishPack=null}this.__cbOnFinishPack=null,this.__cbOnceFinishPack=null}},listensFinishPack:function(){return null!=this.__cbOnFinishPack&&0<this.__cbOnFinishPack.length||null!=this.__cbOnceFinishPack&&0<this.__cbOnceFinishPack.length},hasPendingRegions:function(){return null!=this.pendingRegions&&0<this.pendingRegions.length},region:function(e){if(null!=this.pendingRegions)for(var n=0,t=this.pendingRegions.length;n<t;){var i=n++;if((h=this.pendingRegions[i]).name==e)return h}if(null!=this.pages)for(n=0,t=this.pages.length;n<t;)for(var s=n++,r=this.pages[s],l=0,a=r.regions.length;l<a;){var h,i=l++;if((h=r.regions[i]).name==e)return h}return null},removeRegionsWithMatcher:function(e,n){if(null==e&&(e=!0),null!=this.pendingRegions){for(var t=null,i=0,s=this.pendingRegions.length;i<s;){var r=i++;n((l=this.pendingRegions[r]).name)&&(t=null==t?[]:t).push(l)}if(null!=t)for(i=0,s=t.length;i<s;){var l=t[r=i++];le.remove(this.pendingRegions,l)}}if(null!=this.pages){for(var a=null,i=0,s=this.pages.length;i<s;){for(var h=i++,t=null,c=this.pages[h],o=0,u=c.regions.length;o<u;){r=o++;n((l=c.regions[r]).name)&&(t=null==t?[]:t).push(l)}if(null!=t){(a=null==a?[]:a).push(c);for(var _=0,d=t.length;_<d;){var b=t[_++];le.remove(c.regions,b),c.shouldResetTexture=!0}null!=this.pendingRegions&&(this.pendingRegions=[]);for(var p=0,f=c.regions.length;p<f;){var O=p++,O=c.regions[O];O.rect=null,O.rendered=!1,this.pendingRegions.unshift(O)}}}if(null!=a)for(i=0,s=a.length;i<s;){h=i++;le.remove(this.pages,a[h])}}if(e&&null!=this.atlas){for(var g=null,i=0,s=this.atlas.regions.length;i<s;){var r=i++,m=this.atlas.regions[r];n(m.name)&&(g=null==g?[]:g).push(m)}if(null!=g)for(i=0,s=g.length;i<s;){r=i++;le.remove(this.atlas.regions,g[r])}}},removeRegionsWithPrefix:function(e,n){this.removeRegionsWithMatcher(e=null==e?!0:e,function(e){return z.startsWith(e,n)})},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-2,null!=this.atlas){if(null!=this.atlas.pages)for(var e=0,n=this.atlas.pages.length;e<n;){var t=e++,t=this.atlas.pages[t],i=t.get_texture();null!=i&&(t.set_texture(null),i.destroy())}this.atlas.destroy(),this.atlas=null}this.pendingRegions=null,this.pages=null,this._lifecycleState=-1,h.prototype.destroy.call(this)}},_addRegionFromPixels:function(e,n,t,i,s,r,l,a){-1==r&&(r=Math.round(n.length/s)),this.pendingRegions.push(new nt(e,t,i,s,r,l,a,n,null,null,null))},_addVariantRegion:function(e,n,t,i,s,r){var l=this.region(n);if(null==l)throw Y.thrown('Cannot add variant region: source region "'+n+'" not found!');this.pendingRegions.push(new nt(e,t,i,l.packedWidth,l.packedHeight,s,r,null,l,null,null))},pack:function(e){var n=this,t=Wb.MIN_TEXTURE_SIZE;0==this.pages.length&&this.pages.push(new tt(this.spacing,"page"+this.pages.length,t,t,[],new ua(t+this.spacing,t+this.spacing,!1),!0));for(var t=(f=this.pages[this.pages.length-1]).width,i=[];0<this.pendingRegions.length;)if(null==(v=this.pendingRegions.shift()).pixels)i.push(v);else{if(v.packedWidth>Wb.MAX_TEXTURE_SIZE||v.packedHeight>Wb.MAX_TEXTURE_SIZE)throw Y.thrown("Cannot insert region "+v.name+" with used size: "+v.packedWidth+" x "+v.packedHeight);var s;if(null==(s=f.binPacker.insert(v.packedWidth+f.spacing,v.packedHeight+f.spacing,3)))if(t<Wb.MAX_TEXTURE_SIZE){t*=2,f.width=t,f.height=t,f.binPacker=new ua(t+f.spacing,t+f.spacing,!1);for(var r=0,l=f.regions.length;r<l;){var a=r++;f.regions[a].rect=null,f.regions[a].rendered=!1}this.pendingRegions=[v].concat(f.regions.concat(this.pendingRegions)),f.regions=[],f.shouldResetTexture=!0}else this.pages.push(new tt(this.spacing,"page"+this.pages.length,t=Wb.MIN_TEXTURE_SIZE,t,[],new ua(t+this.spacing,t+this.spacing,!1),!0)),this.pendingRegions.unshift(v);else v.rect=s,f.regions.push(v)}for(r=0,l=i.length;r<l;){for(var h=(v=i[y=r++]).sourceRegion;null!=h&&null!=h.sourceRegion;)h=h.sourceRegion;if(null==h)throw Y.thrown("Invalid variant region: "+v.name+" (source region not found).");for(var c=null,o=0,u=this.pages.length;o<u;){for(var _=o++,d=0,b=(f=this.pages[_]).regions.length;d<b;){var p=d++;if(f.regions[p].name==h.name){c=f;break}}if(null!=c)break}if(null==c)throw Y.thrown("Invalid variant region: "+v.name+" (source region not found in any page).");c.regions.push(v)}null==this.atlas&&(this.atlas=new Vb,this.atlas.onDestroy(this,function(e){n.destroy()}));for(r=0,l=this.pages.length;r<l;){var f,_=r++;if(0<(f=this.pages[_]).regions.length){for(var O=null,g=(null==(O=this.atlas.pages.length>_?this.atlas.pages[_]:O)&&(O=new it(f.name,f.width,f.height,this.filter),this.atlas.pages.push(O)),null),m=(f.shouldResetTexture||null==O.get_texture()?(g=nb.create(f.width,f.height,0),O.set_width(f.width),O.set_height(f.height)):g=O.get_texture().fetchPixels(),[]),w=[],o=0,u=f.regions.length;o<u;){var v,y=o++;if(!(v=f.regions[y]).rendered)if(null!=v.pixels)nb.copy(v.pixels,v.packedWidth,g,f.width,0,0,v.packedWidth,v.packedHeight,0|v.rect.x,0|v.rect.y),v.rendered=!0,m.push(v);else{if(null==v.sourceRegion)throw Y.thrown("Cannot render region "+v.name+" because it doesn't have pixels");v.rendered=!0,w.push(v)}}if(0<m.length){null!=O.get_texture()?O.get_texture().backendItem.width==f.width&&O.get_texture().backendItem.height==f.height?O.get_texture().submitPixels(g):(O.get_texture().destroy(),O.set_texture(Fn.fromPixels(f.width,f.height,g,1))):O.set_texture(Fn.fromPixels(f.width,f.height,g,1)),O.get_texture().set_filter(this.filter);for(d=0,b=m.length;d<b;){var U=m[d++],x=this.atlas.region(U.name);(x=null==x?new lt(U.name,this.atlas,_):x).texture=O.get_texture(),x.originalWidth=U.originalWidth,x.originalHeight=U.originalHeight,x.packedWidth=U.packedWidth,x.packedHeight=U.packedHeight,x.offsetX=U.offsetX,x.offsetY=U.offsetY,x.x=Math.round(U.rect.x+f.spacing),x.y=Math.round(U.rect.y+f.spacing),x.width=U.packedWidth,x.height=U.packedHeight,x.computeFrame()}}if(0<w.length)for(var C=0,D=w.length;C<D;){for(var T=w[C++],h=T.sourceRegion;null!=h&&null!=h.sourceRegion;)h=h.sourceRegion;var S=this.atlas.region(h.name);if(null==S)throw Y.thrown("Invalid variant region: "+T.name+" (source atlas region not found).");var E=this.atlas.region(T.name);(E=null==E?new lt(T.name,this.atlas,_):E).texture=S.texture,E.originalWidth=T.originalWidth,E.originalHeight=T.originalHeight,E.packedWidth=h.packedWidth,E.packedHeight=h.packedHeight,E.offsetX=T.offsetX,E.offsetY=T.offsetY,E.x=Math.round(h.rect.x+f.spacing),E.y=Math.round(h.rect.y+f.spacing),E.width=T.packedWidth,E.height=T.packedHeight,E.computeFrame()}}}this.emitFinishPack(),e(this.atlas)},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offFinishPack()},__class__:Wb}),function(e,n,t,i,s,r,l,a,h,c,o){this.rendered=!1,this.rect=null,this.sourceRegion=null,this.pixels=null,this.offsetY=0,this.offsetX=0,this.originalHeight=0,this.originalWidth=0,this.name=e,null!=n&&(this.originalWidth=n),null!=t&&(this.originalHeight=t),this.packedWidth=i,this.packedHeight=s,null!=r&&(this.offsetX=r),null!=l&&(this.offsetY=l),null!=a&&(this.pixels=a),null!=h&&(this.sourceRegion=h),null!=c&&(this.rect=c),null!=o&&(this.rendered=o)}),tt=((x["ceramic._TextureAtlasPacker.TextureAtlasPackerRegion"]=nt).__name__="ceramic._TextureAtlasPacker.TextureAtlasPackerRegion",nt.prototype={__class__:nt},function(e,n,t,i,s,r,l){this.spacing=e,this.name=n,this.width=t,this.height=i,this.regions=s,this.binPacker=r,this.shouldResetTexture=l}),it=((x["ceramic._TextureAtlasPacker.TextureAtlasPackerPage"]=tt).__name__="ceramic._TextureAtlasPacker.TextureAtlasPackerPage",tt.prototype={__class__:tt},function(e,n,t,i,s){null==i&&(i=at.LINEAR),null==t&&(t=0),null==n&&(n=0),this.unobservedTexture=null,this.textureAutoruns=null,this.unobservedFilter=at.LINEAR,this.filterAutoruns=null,this.unobservedHeight=0,this.heightAutoruns=null,this.unobservedWidth=0,this.widthAutoruns=null,this.nameAutoruns=null,this.observedDirty=!1,this.set_name(e),this.set_width(n),this.set_height(t),this.set_filter(i),this.set_texture(s)}),st=((x["ceramic.TextureAtlasPage"]=it).__name__="ceramic.TextureAtlasPage",it.__interfaces__=[q],it.prototype={emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnObservedDirty)for(var l=0,a=this.__cbOnObservedDirty.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnObservedDirty[h],++r):--t}if(null!=this.__cbOnceObservedDirty){for(var c=null,o=null,l=0,a=this.__cbOnceObservedDirty.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,u=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindObservedDirty[h]),o.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=c,this.__cbOnceObservedDirty=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event observedDirty because owner is destroyed!");var s=function(e){null!=t&&(i.offObservedDirty(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(r=this.__cbOnOwnerUnbindObservedDirty[n])&&r(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindObservedDirty[n])&&r(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindObservedDirty[s])&&r()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindObservedDirty[s])&&r()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},get_name:function(){var e,n,t=this.unobservedName;return null!=se.current&&(e=se.current,null!=(n=this.nameAutoruns)||(n=se.getAutorunArray(),null!=(this.nameAutoruns=n)))&&e.bindToAutorunArray(n),t},set_name:function(e){var n=this.unobservedName;return n!=(this.unobservedName=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitNameChange(e,n),null!=(n=this.nameAutoruns))&&(this.nameAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateName:function(){var e=this.unobservedName,e=(this.emitNameChange(e,e),this.nameAutoruns);null!=e&&(this.nameAutoruns=null,se.invalidateAutorunArray(e))},emitNameChange:function(e,n){var t=0;if(null!=this.__cbOnNameChange&&(t+=this.__cbOnNameChange.length),null!=this.__cbOnceNameChange&&(t+=this.__cbOnceNameChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnNameChange)for(var l=0,a=this.__cbOnNameChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnNameChange[h],++r):--t}if(null!=this.__cbOnceNameChange){for(var c=null,o=null,l=0,a=this.__cbOnceNameChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceNameChange[h],this.__cbOnceNameChange[h]=null,u=this.__cbOnceOwnerUnbindNameChange[h],(this.__cbOnceOwnerUnbindNameChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindNameChange[h]),o.push(this.__cbOnceNameChange[h]))}this.__cbOnceOwnerUnbindNameChange=c,this.__cbOnceNameChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event nameChange because owner is destroyed!");var s=function(e){null!=t&&(i.offNameChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(null);null==this.__cbOnNameChange&&(this.__cbOnNameChange=[]),this.__cbOnNameChange.push(t)},onceNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event nameChange because owner is destroyed!");var s=function(e){null!=t&&(i.offNameChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(null);null==this.__cbOnceNameChange&&(this.__cbOnceNameChange=[]),this.__cbOnceNameChange.push(t)},offNameChange:function(e){if(null!=e){var n;null!=this.__cbOnNameChange&&-1!=(n=this.__cbOnNameChange.indexOf(e))&&(this.__cbOnNameChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindNameChange[n])&&r(),this.__cbOnOwnerUnbindNameChange.splice(n,1)),null!=this.__cbOnceNameChange&&-1!=(n=this.__cbOnceNameChange.indexOf(e))&&(this.__cbOnceNameChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindNameChange[n])&&r(),this.__cbOnceOwnerUnbindNameChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindNameChange){for(var t=0,i=this.__cbOnOwnerUnbindNameChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindNameChange[s])&&r()}this.__cbOnOwnerUnbindNameChange=null}if(null!=this.__cbOnceOwnerUnbindNameChange){for(t=0,i=this.__cbOnceOwnerUnbindNameChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindNameChange[s])&&r()}this.__cbOnceOwnerUnbindNameChange=null}this.__cbOnNameChange=null,this.__cbOnceNameChange=null}},listensNameChange:function(){return null!=this.__cbOnNameChange&&0<this.__cbOnNameChange.length||null!=this.__cbOnceNameChange&&0<this.__cbOnceNameChange.length},get_width:function(){var e,n,t=this.unobservedWidth;return null!=se.current&&(e=se.current,null!=(n=this.widthAutoruns)||(n=se.getAutorunArray(),null!=(this.widthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_width:function(e){var n=this.unobservedWidth;return n!=(this.unobservedWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWidthChange(e,n),null!=(n=this.widthAutoruns))&&(this.widthAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateWidth:function(){var e=this.unobservedWidth,e=(this.emitWidthChange(e,e),this.widthAutoruns);null!=e&&(this.widthAutoruns=null,se.invalidateAutorunArray(e))},emitWidthChange:function(e,n){var t=0;if(null!=this.__cbOnWidthChange&&(t+=this.__cbOnWidthChange.length),null!=this.__cbOnceWidthChange&&(t+=this.__cbOnceWidthChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnWidthChange)for(var l=0,a=this.__cbOnWidthChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnWidthChange[h],++r):--t}if(null!=this.__cbOnceWidthChange){for(var c=null,o=null,l=0,a=this.__cbOnceWidthChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceWidthChange[h],this.__cbOnceWidthChange[h]=null,u=this.__cbOnceOwnerUnbindWidthChange[h],(this.__cbOnceOwnerUnbindWidthChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindWidthChange[h]),o.push(this.__cbOnceWidthChange[h]))}this.__cbOnceOwnerUnbindWidthChange=c,this.__cbOnceWidthChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event widthChange because owner is destroyed!");var s=function(e){null!=t&&(i.offWidthChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(null);null==this.__cbOnWidthChange&&(this.__cbOnWidthChange=[]),this.__cbOnWidthChange.push(t)},onceWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event widthChange because owner is destroyed!");var s=function(e){null!=t&&(i.offWidthChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(null);null==this.__cbOnceWidthChange&&(this.__cbOnceWidthChange=[]),this.__cbOnceWidthChange.push(t)},offWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnWidthChange&&-1!=(n=this.__cbOnWidthChange.indexOf(e))&&(this.__cbOnWidthChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindWidthChange[n])&&r(),this.__cbOnOwnerUnbindWidthChange.splice(n,1)),null!=this.__cbOnceWidthChange&&-1!=(n=this.__cbOnceWidthChange.indexOf(e))&&(this.__cbOnceWidthChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindWidthChange[n])&&r(),this.__cbOnceOwnerUnbindWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindWidthChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindWidthChange[s])&&r()}this.__cbOnOwnerUnbindWidthChange=null}if(null!=this.__cbOnceOwnerUnbindWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindWidthChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindWidthChange[s])&&r()}this.__cbOnceOwnerUnbindWidthChange=null}this.__cbOnWidthChange=null,this.__cbOnceWidthChange=null}},listensWidthChange:function(){return null!=this.__cbOnWidthChange&&0<this.__cbOnWidthChange.length||null!=this.__cbOnceWidthChange&&0<this.__cbOnceWidthChange.length},get_height:function(){var e,n,t=this.unobservedHeight;return null!=se.current&&(e=se.current,null!=(n=this.heightAutoruns)||(n=se.getAutorunArray(),null!=(this.heightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_height:function(e){var n=this.unobservedHeight;return n!=(this.unobservedHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitHeightChange(e,n),null!=(n=this.heightAutoruns))&&(this.heightAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateHeight:function(){var e=this.unobservedHeight,e=(this.emitHeightChange(e,e),this.heightAutoruns);null!=e&&(this.heightAutoruns=null,se.invalidateAutorunArray(e))},emitHeightChange:function(e,n){var t=0;if(null!=this.__cbOnHeightChange&&(t+=this.__cbOnHeightChange.length),null!=this.__cbOnceHeightChange&&(t+=this.__cbOnceHeightChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnHeightChange)for(var l=0,a=this.__cbOnHeightChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnHeightChange[h],++r):--t}if(null!=this.__cbOnceHeightChange){for(var c=null,o=null,l=0,a=this.__cbOnceHeightChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceHeightChange[h],this.__cbOnceHeightChange[h]=null,u=this.__cbOnceOwnerUnbindHeightChange[h],(this.__cbOnceOwnerUnbindHeightChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindHeightChange[h]),o.push(this.__cbOnceHeightChange[h]))}this.__cbOnceOwnerUnbindHeightChange=c,this.__cbOnceHeightChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event heightChange because owner is destroyed!");var s=function(e){null!=t&&(i.offHeightChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(null);null==this.__cbOnHeightChange&&(this.__cbOnHeightChange=[]),this.__cbOnHeightChange.push(t)},onceHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event heightChange because owner is destroyed!");var s=function(e){null!=t&&(i.offHeightChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(null);null==this.__cbOnceHeightChange&&(this.__cbOnceHeightChange=[]),this.__cbOnceHeightChange.push(t)},offHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnHeightChange&&-1!=(n=this.__cbOnHeightChange.indexOf(e))&&(this.__cbOnHeightChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindHeightChange[n])&&r(),this.__cbOnOwnerUnbindHeightChange.splice(n,1)),null!=this.__cbOnceHeightChange&&-1!=(n=this.__cbOnceHeightChange.indexOf(e))&&(this.__cbOnceHeightChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindHeightChange[n])&&r(),this.__cbOnceOwnerUnbindHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindHeightChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindHeightChange[s])&&r()}this.__cbOnOwnerUnbindHeightChange=null}if(null!=this.__cbOnceOwnerUnbindHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindHeightChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindHeightChange[s])&&r()}this.__cbOnceOwnerUnbindHeightChange=null}this.__cbOnHeightChange=null,this.__cbOnceHeightChange=null}},listensHeightChange:function(){return null!=this.__cbOnHeightChange&&0<this.__cbOnHeightChange.length||null!=this.__cbOnceHeightChange&&0<this.__cbOnceHeightChange.length},get_filter:function(){var e,n,t=this.unobservedFilter;return null!=se.current&&(e=se.current,null!=(n=this.filterAutoruns)||(n=se.getAutorunArray(),null!=(this.filterAutoruns=n)))&&e.bindToAutorunArray(n),t},set_filter:function(e){var n=this.unobservedFilter;return this.set_unobservedFilter(e),n!=e&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFilterChange(e,n),null!=(n=this.filterAutoruns))&&(this.filterAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateFilter:function(){var e=this.unobservedFilter,e=(this.emitFilterChange(e,e),this.filterAutoruns);null!=e&&(this.filterAutoruns=null,se.invalidateAutorunArray(e))},emitFilterChange:function(e,n){var t=0;if(null!=this.__cbOnFilterChange&&(t+=this.__cbOnFilterChange.length),null!=this.__cbOnceFilterChange&&(t+=this.__cbOnceFilterChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnFilterChange)for(var l=0,a=this.__cbOnFilterChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnFilterChange[h],++r):--t}if(null!=this.__cbOnceFilterChange){for(var c=null,o=null,l=0,a=this.__cbOnceFilterChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceFilterChange[h],this.__cbOnceFilterChange[h]=null,u=this.__cbOnceOwnerUnbindFilterChange[h],(this.__cbOnceOwnerUnbindFilterChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindFilterChange[h]),o.push(this.__cbOnceFilterChange[h]))}this.__cbOnceOwnerUnbindFilterChange=c,this.__cbOnceFilterChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onFilterChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event filterChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFilterChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindFilterChange&&(this.__cbOnOwnerUnbindFilterChange=[]),this.__cbOnOwnerUnbindFilterChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindFilterChange&&(this.__cbOnOwnerUnbindFilterChange=[]),this.__cbOnOwnerUnbindFilterChange.push(null);null==this.__cbOnFilterChange&&(this.__cbOnFilterChange=[]),this.__cbOnFilterChange.push(t)},onceFilterChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event filterChange because owner is destroyed!");var s=function(e){null!=t&&(i.offFilterChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindFilterChange&&(this.__cbOnceOwnerUnbindFilterChange=[]),this.__cbOnceOwnerUnbindFilterChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindFilterChange&&(this.__cbOnceOwnerUnbindFilterChange=[]),this.__cbOnceOwnerUnbindFilterChange.push(null);null==this.__cbOnceFilterChange&&(this.__cbOnceFilterChange=[]),this.__cbOnceFilterChange.push(t)},offFilterChange:function(e){if(null!=e){var n;null!=this.__cbOnFilterChange&&-1!=(n=this.__cbOnFilterChange.indexOf(e))&&(this.__cbOnFilterChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindFilterChange[n])&&r(),this.__cbOnOwnerUnbindFilterChange.splice(n,1)),null!=this.__cbOnceFilterChange&&-1!=(n=this.__cbOnceFilterChange.indexOf(e))&&(this.__cbOnceFilterChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindFilterChange[n])&&r(),this.__cbOnceOwnerUnbindFilterChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFilterChange){for(var t=0,i=this.__cbOnOwnerUnbindFilterChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindFilterChange[s])&&r()}this.__cbOnOwnerUnbindFilterChange=null}if(null!=this.__cbOnceOwnerUnbindFilterChange){for(t=0,i=this.__cbOnceOwnerUnbindFilterChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindFilterChange[s])&&r()}this.__cbOnceOwnerUnbindFilterChange=null}this.__cbOnFilterChange=null,this.__cbOnceFilterChange=null}},listensFilterChange:function(){return null!=this.__cbOnFilterChange&&0<this.__cbOnFilterChange.length||null!=this.__cbOnceFilterChange&&0<this.__cbOnceFilterChange.length},set_unobservedFilter:function(e){return this.unobservedFilter!=e&&(this.unobservedFilter=e,null!=this.get_texture())&&this.get_texture().set_filter(e),e},get_texture:function(){var e,n,t=this.unobservedTexture;return null!=se.current&&(e=se.current,null!=(n=this.textureAutoruns)||(n=se.getAutorunArray(),null!=(this.textureAutoruns=n)))&&e.bindToAutorunArray(n),t},set_texture:function(e){var n=this.unobservedTexture;return this.set_unobservedTexture(e),n!=e&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextureChange(e,n),null!=(n=this.textureAutoruns))&&(this.textureAutoruns=null,se.invalidateAutorunArray(n)),e},invalidateTexture:function(){var e=this.unobservedTexture,e=(this.emitTextureChange(e,e),this.textureAutoruns);null!=e&&(this.textureAutoruns=null,se.invalidateAutorunArray(e))},emitTextureChange:function(e,n){var t=0;if(null!=this.__cbOnTextureChange&&(t+=this.__cbOnTextureChange.length),null!=this.__cbOnceTextureChange&&(t+=this.__cbOnceTextureChange.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnTextureChange)for(var l=0,a=this.__cbOnTextureChange.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnTextureChange[h],++r):--t}if(null!=this.__cbOnceTextureChange){for(var c=null,o=null,l=0,a=this.__cbOnceTextureChange.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceTextureChange[h],this.__cbOnceTextureChange[h]=null,u=this.__cbOnceOwnerUnbindTextureChange[h],(this.__cbOnceOwnerUnbindTextureChange[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTextureChange[h]),o.push(this.__cbOnceTextureChange[h]))}this.__cbOnceOwnerUnbindTextureChange=c,this.__cbOnceTextureChange=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textureChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextureChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(null);null==this.__cbOnTextureChange&&(this.__cbOnTextureChange=[]),this.__cbOnTextureChange.push(t)},onceTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event textureChange because owner is destroyed!");var s=function(e){null!=t&&(i.offTextureChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(null);null==this.__cbOnceTextureChange&&(this.__cbOnceTextureChange=[]),this.__cbOnceTextureChange.push(t)},offTextureChange:function(e){if(null!=e){var n;null!=this.__cbOnTextureChange&&-1!=(n=this.__cbOnTextureChange.indexOf(e))&&(this.__cbOnTextureChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindTextureChange[n])&&r(),this.__cbOnOwnerUnbindTextureChange.splice(n,1)),null!=this.__cbOnceTextureChange&&-1!=(n=this.__cbOnceTextureChange.indexOf(e))&&(this.__cbOnceTextureChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindTextureChange[n])&&r(),this.__cbOnceOwnerUnbindTextureChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindTextureChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindTextureChange[s])&&r()}this.__cbOnOwnerUnbindTextureChange=null}if(null!=this.__cbOnceOwnerUnbindTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindTextureChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindTextureChange[s])&&r()}this.__cbOnceOwnerUnbindTextureChange=null}this.__cbOnTextureChange=null,this.__cbOnceTextureChange=null}},listensTextureChange:function(){return null!=this.__cbOnTextureChange&&0<this.__cbOnTextureChange.length||null!=this.__cbOnceTextureChange&&0<this.__cbOnceTextureChange.length},set_unobservedTexture:function(e){return this.unobservedTexture!=e&&null!=(this.unobservedTexture=e)&&(this.get_width()<=0&&this.set_width(e.backendItem.width),this.get_height()<=0)&&this.set_height(e.backendItem.height),e},unbindEvents:function(){this.offObservedDirty(),this.offNameChange(),this.offWidthChange(),this.offHeightChange(),this.offFilterChange(),this.offTextureChange()},__class__:it,__properties__:{set_unobservedTexture:"set_unobservedTexture",set_texture:"set_texture",get_texture:"get_texture",set_unobservedFilter:"set_unobservedFilter",set_filter:"set_filter",get_filter:"get_filter",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_name:"set_name",get_name:"get_name"}},function(){}),rt=((x["ceramic.TextureAtlasParser"]=st).__name__="ceramic.TextureAtlasParser",st.parse=function(e){if(z.startsWith(z.trim(e),"<"))try{e=st.convertXmlTextureAtlas(e)}catch(e){jt.lastError=e;var n=Y.caught(e).unwrap();throw Y.thrown("TextureAtlas: invalid xml atlas data specified for parser: "+L.string(n))}for(var t=new rt(e),i=[null,null,null,null],s=null,r=new Vb;;){var l=t.readLine();if(null==l)break;if(0==(l=t.trim(l)).length)s=null;else if(null==s){for(var s=new it(l),a=t.nextLineKey();null!=a;){switch(a){case"filter":t.readTuple(i),s.set_filter(null!=i[0]&&"nearest"==i[0].toLowerCase()?at.NEAREST:at.LINEAR);break;case"size":t.readTuple(i),s.set_width(L.parseInt(i[0])),s.set_height(L.parseInt(i[1]));break;default:t.readLine()}a=t.nextLineKey()}r.pages.push(s)}else{for(var h=l.toLowerCase(),c=(z.endsWith(h,".png")||z.endsWith(h,".gif")||z.endsWith(h,".jpg")?l=le.substr(l,0,l.length-4):z.endsWith(h,".jpeg")&&(l=le.substr(l,0,l.length-5)),new lt(l,r,r.pages.length-1)),o=0,u=0,_=0,d=0,b=0,p=0,f=t.nextLineKey();null!=f;){switch(f){case"bounds":t.readTuple(i),o=L.parseInt(i[0]),u=L.parseInt(i[1]),_=L.parseInt(i[2]),d=L.parseInt(i[3]);break;case"offset":t.readTuple(i),c.offsetX=L.parseInt(i[0]),c.offsetY=L.parseInt(i[1]);break;case"offsets":t.readTuple(i),c.offsetX=L.parseInt(i[0]),c.offsetY=L.parseInt(i[1]),b=L.parseInt(i[2]),p=L.parseInt(i[3]);break;case"orig":t.readTuple(i),b=L.parseInt(i[0]),p=L.parseInt(i[1]);break;case"rotate":var O=t.readValue();c.rotateFrame="true"==O||"90"==O;break;case"size":t.readTuple(i),_=L.parseInt(i[0]),d=L.parseInt(i[1]);break;case"xy":t.readTuple(i),o=L.parseInt(i[0]),u=L.parseInt(i[1]);break;default:t.readLine()}f=t.nextLineKey()}c.x=o,c.y=u,c.width=0|Math.abs(_),c.height=0|Math.abs(d),c.originalWidth=0!=b?b:c.width,c.originalHeight=0!=p?p:c.height,c.rotateFrame?(c.packedWidth=c.height,c.packedHeight=c.width):(c.packedWidth=c.width,c.packedHeight=c.height)}}return r},st.convertXmlTextureAtlas=function(e){for(var n="",e=D.parse(e).firstElement(),t=(n=n+L.string(e.get("imagePath"))+"\n",e.elements());t.hasNext();){var i=t.next();if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));"SubTexture"==i.nodeName&&(n=n+L.string(i.get("name"))+"\n",i.exists("frameX")&&i.exists("frameY")&&i.exists("frameWidth")&&i.exists("frameHeight")&&(n=(n=(n=(n=(n+="offsets:")+L.string(-parseFloat(i.get("frameX")))+",")+L.string(-parseFloat(i.get("frameY")))+",")+L.string(parseFloat(i.get("frameWidth")))+",")+L.string(parseFloat(i.get("frameHeight")))+"\n"),n=(n=(n=(n=(n+="bounds:")+L.string(parseFloat(i.get("x")))+",")+L.string(parseFloat(i.get("y")))+",")+L.string(parseFloat(i.get("width")))+",")+L.string(parseFloat(i.get("height")))+"\n",i.exists("rotate"))&&(n=(n+="rotate:")+L.string(i.get("rotate"))+"\n")}return n},function(e){this.lines=z.replace(z.replace(z.trim(e),"\r\n","\n"),"\r","\n").split("\n"),this.index=0}),lt=((x["ceramic._TextureAtlasParser.TextureAtlasReader"]=rt).__name__="ceramic._TextureAtlasParser.TextureAtlasReader",rt.prototype={trim:function(e){return z.trim(e)},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},nextLineKey:function(){var e,n;return!(this.index>=this.lines.length)&&-1!=(n=(e=this.lines[this.index]).indexOf(":"))?z.trim(e.substring(0,n)):null},readValue:function(){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw Y.thrown("Invalid line: "+e);return this.trim(e.substring(n+1))},readTuple:function(e){var n=this.readLine(),t=n.indexOf(":");if(-1==t)throw Y.thrown("Invalid line: "+n);for(var i=0,s=t+1;i<3;){var r=n.indexOf(",",s);if(-1==r)break;e[i]=this.trim(le.substr(n,s,r-s)),s=r+1,++i}return e[i]=this.trim(n.substring(s)),i+1},__class__:rt},(x["ceramic.TextureTile"]=a1).__name__="ceramic.TextureTile",a1.prototype={frame:function(e,n,t,i){this.frameX=e,this.frameY=n,this.frameWidth=t,this.frameHeight=i},toString:function(){return""+L.string({texture:this.texture,frameX:this.frameX,frameY:this.frameY,frameWidth:this.frameWidth,frameHeight:this.frameHeight})},__class__:a1},function(e,n,t){this.originalHeight=0,this.originalWidth=0,this.offsetY=0,this.offsetX=0,this.height=0,this.width=0,this.y=0,this.x=0,this.packedHeight=0,this.packedWidth=0,this.page=0,this.atlas=null,this.name=null,this.name=e,this.atlas=n,this.page=t;e=n.pages[t];a1.call(this,null!=e?e.get_texture():null,0,0,0,0,!1,0),n.regions.push(this)}),at=((x["ceramic.TextureAtlasRegion"]=lt).__name__="ceramic.TextureAtlasRegion",lt.__super__=a1,lt.prototype=$extend(a1.prototype,{computeFrame:function(){var e,n=this.atlas.pages[this.page];null!=n?(this.texture=n.get_texture(),null!=this.texture?(e=n.get_width(),n=n.get_height(),e=this.texture.width/e,n=this.texture.height/n,this.frameX=this.x*e,this.frameY=this.y*n,this.frameWidth=this.width*e,this.frameHeight=this.height*n):ae.app.logger.warning("Failed to compute region frame because there is no texture at page "+this.page,{fileName:"../../../../ceramic/runtime/src/ceramic/TextureAtlasRegion.hx",lineNumber:215,className:"ceramic.TextureAtlasRegion",methodName:"computeFrame"})):ae.app.logger.warning("Failed to compute region frame because there is no page "+this.page,{fileName:"../../../../ceramic/runtime/src/ceramic/TextureAtlasRegion.hx",lineNumber:219,className:"ceramic.TextureAtlasRegion",methodName:"computeFrame"})},toString:function(){return""+L.string({name:this.name,page:this.page,texture:this.texture,packedWidth:this.packedWidth,packedHeight:this.packedHeight,originalWidth:this.originalWidth,originalHeight:this.originalHeight,width:this.width,height:this.height,offsetX:this.offsetX,offsetY:this.offsetY,frameX:this.frameX,frameY:this.frameY,frameWidth:this.frameWidth,frameHeight:this.frameHeight})},__class__:lt}),he["ceramic.TextureFilter"]={__ename__:"ceramic.TextureFilter",__constructs__:null,LINEAR:{_hx_name:"LINEAR",_hx_index:0,__enum__:"ceramic.TextureFilter",toString:c},NEAREST:{_hx_name:"NEAREST",_hx_index:1,__enum__:"ceramic.TextureFilter",toString:c}}),ht=(at.__constructs__=[at.LINEAR,at.NEAREST],(x["ceramic.TextureTilePacker"]=d1).__name__="ceramic.TextureTilePacker",d1.__super__=h,d1.prototype=$extend(h.prototype,{destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,h.prototype.destroy.call(this),null!=this.nextPacker&&(this.nextPacker.destroy(),this.nextPacker=null),this.texture.destroy(),this.texture=null,this.areas=null)},getTileAtPosition:function(e,n){return this.areas[n*this.numCols+e]},setTileAtPosition:function(e,n,t){this.areas[n*this.numCols+e]=t},allocTile:function(e,n){this.texture.width,this.texture.height;var t=this.padWidth+2*this.margin,i=this.padHeight+2*this.margin,s=t*this.numCols-2*this.margin,r=i*this.numRows-2*this.margin;if(s<e||r<n)return ae.app.logger.warning("Cannot alloc tile of "+e+" x "+n+" because this is bigger than "+s+" x "+r,{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:247,className:"ceramic.TextureTilePacker",methodName:"allocTile"}),null;for(var l=this.padWidth,a=1;l<e;)++a,l+=this.padWidth+2*this.margin;for(var h=this.padHeight,c=1;h<n;)++c,h+=this.padHeight+2*this.margin;for(var o=0,u=this.numRows-c+1;o<u;)for(var _=o++,d=0,b=this.numCols-a+1;d<b;){for(var p=d++,f=!0,O=_,g=_+c;O<g;){for(var m=O++,w=p,v=p+a;w<v;){var y=w++;if(null!=this.areas[m*this.numCols+y]){f=!1;break}}if(!f)break}if(f){for(var U=new ht(this.texture,p*t,_*i,e,n),x=(U.col=p,U.row=_,U.usedCols=a,_),C=_+(U.usedRows=c);x<C;)for(var D=x++,T=p,S=p+a;T<S;){var E=T++;this.areas[D*this.numCols+E]=U}return U}}return null==this.nextPacker&&(this.nextPacker=new d1(this.texture.autoRender,this.maxPixelTextureWidth,this.maxPixelTextureHeight,this.padWidth,this.padHeight,this.margin)),this.nextPacker.allocTile(e,n)},releaseTile:function(e){var n=this;if(ae.app.logger.info("release tile "+L.string(e),{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:338,className:"ceramic.TextureTilePacker",methodName:"releaseTile"}),!(e instanceof ht))throw Y.thrown("Cannot release tile: "+L.string(e)+".");for(var h=e,c=this;null!=c&&c.texture!=h.texture;)c=c.nextPacker;null==c?ae.app.logger.warning("Failed to release tile: "+L.string(h)+" (it doesn't belong to this packer)",{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:353,className:"ceramic.TextureTilePacker",methodName:"releaseTile"}):ae.app.onceUpdate(this,function(e){ae.app.onceUpdate(n,function(e){for(var n=!1,t=h.row,i=h.row+h.usedRows;t<i;)for(var s=t++,r=h.col,l=h.col+h.usedCols;r<l;){var a=r++;c.areas[s*c.numCols+a]==h&&(n=!0,c.areas[s*c.numCols+a]=null)}h.texture=null,n||ae.app.logger.warning("Failed to release tile: "+L.string(h)+" (did not find it)",{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:374,className:"ceramic.TextureTilePacker",methodName:"releaseTile"})})})},stamp:function(e,t,i){var s=new n,r=(s.set_anchorX(0),s.set_anchorY(0),e.frameHeight+2*this.margin),r=(s.set_width(e.frameWidth+2*this.margin),s.set_height(r),e.frameY-this.margin);if(s.set_x(e.frameX-this.margin),s.set_y(r),s.set_blending(4),0!=s.inheritAlpha&&(s.inheritAlpha=!1,s.visibilityDirty=!0,null!=s.children))for(var l=0,a=s.children.length;l<a;){var h=l++,c=s.children[h];if(c.visibilityDirty=!0,null!=c.children)for(var o=0,u=c.children.length;o<u;){var _=o++;c.children[_].set_visibilityDirty(!0)}}s.set_alpha(0),s.color=16777215;var d=t.transform,b=t.parent,r=(null!=b&&b.remove(t),s.add(t),t.set_transform(new j),t.transform);r.tx+=this.margin,r.ty+=this.margin,r.changedDirty=!0,e.texture.stamp(s,function(){s.remove(t),null!=b&&b.add(t),s.destroy(),s=null,t.set_transform(d),t=null,i(),i=null})},managesTexture:function(e){return this.texture==e||null!=this.nextPacker&&this.nextPacker.managesTexture(e)},__class__:d1}),function(e,n,t,i,s){this.usedRows=1,this.usedCols=1,this.row=-1,this.col=-1,a1.call(this,e,n,t,i,s)}),ct=((x["ceramic._TextureTilePacker.PackedTextureTile"]=ht).__name__="ceramic._TextureTilePacker.PackedTextureTile",ht.__super__=a1,ht.prototype=$extend(a1.prototype,{__class__:ht}),function(){this.initializerName=null,this.completeHandlerIndexes=null,this.completeHandlers=null,this.endPosition=-1,this.startPosition=-1,this.labelIndexes=null,this.labels=null,this.paused=!1,this.tracks=[],this.position=0,this.fps=30,this.autoUpdate=!0,this.loop=!0,this.autoFitSize=!0,this.size=0,h.call(this),ae.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&ae.app.onPreUpdate(this,$bind(this,this.update))}),ot=((x["ceramic.Timeline"]=ct).__name__="ceramic.Timeline",ct.__interfaces__=[e0],ct.__super__=h,ct.prototype=$extend(h.prototype,{emitStartLabel:function(e,n){var t=0;if(null!=this.__cbOnStartLabel&&(t+=this.__cbOnStartLabel.length),null!=this.__cbOnceStartLabel&&(t+=this.__cbOnceStartLabel.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnStartLabel)for(var l=0,a=this.__cbOnStartLabel.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnStartLabel[h],++r):--t}if(null!=this.__cbOnceStartLabel){for(var c=null,o=null,l=0,a=this.__cbOnceStartLabel.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceStartLabel[h],this.__cbOnceStartLabel[h]=null,u=this.__cbOnceOwnerUnbindStartLabel[h],(this.__cbOnceOwnerUnbindStartLabel[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindStartLabel[h]),o.push(this.__cbOnceStartLabel[h]))}this.__cbOnceOwnerUnbindStartLabel=c,this.__cbOnceStartLabel=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onStartLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event startLabel because owner is destroyed!");var s=function(e){null!=t&&(i.offStartLabel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindStartLabel&&(this.__cbOnOwnerUnbindStartLabel=[]),this.__cbOnOwnerUnbindStartLabel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindStartLabel&&(this.__cbOnOwnerUnbindStartLabel=[]),this.__cbOnOwnerUnbindStartLabel.push(null);null==this.__cbOnStartLabel&&(this.__cbOnStartLabel=[]),this.__cbOnStartLabel.push(t)},onceStartLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event startLabel because owner is destroyed!");var s=function(e){null!=t&&(i.offStartLabel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindStartLabel&&(this.__cbOnceOwnerUnbindStartLabel=[]),this.__cbOnceOwnerUnbindStartLabel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindStartLabel&&(this.__cbOnceOwnerUnbindStartLabel=[]),this.__cbOnceOwnerUnbindStartLabel.push(null);null==this.__cbOnceStartLabel&&(this.__cbOnceStartLabel=[]),this.__cbOnceStartLabel.push(t)},offStartLabel:function(e){if(null!=e){var n;null!=this.__cbOnStartLabel&&-1!=(n=this.__cbOnStartLabel.indexOf(e))&&(this.__cbOnStartLabel.splice(n,1),null!=(r=this.__cbOnOwnerUnbindStartLabel[n])&&r(),this.__cbOnOwnerUnbindStartLabel.splice(n,1)),null!=this.__cbOnceStartLabel&&-1!=(n=this.__cbOnceStartLabel.indexOf(e))&&(this.__cbOnceStartLabel.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindStartLabel[n])&&r(),this.__cbOnceOwnerUnbindStartLabel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStartLabel){for(var t=0,i=this.__cbOnOwnerUnbindStartLabel.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindStartLabel[s])&&r()}this.__cbOnOwnerUnbindStartLabel=null}if(null!=this.__cbOnceOwnerUnbindStartLabel){for(t=0,i=this.__cbOnceOwnerUnbindStartLabel.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindStartLabel[s])&&r()}this.__cbOnceOwnerUnbindStartLabel=null}this.__cbOnStartLabel=null,this.__cbOnceStartLabel=null}},listensStartLabel:function(){return null!=this.__cbOnStartLabel&&0<this.__cbOnStartLabel.length||null!=this.__cbOnceStartLabel&&0<this.__cbOnceStartLabel.length},emitEndLabel:function(e,n){var t=0;if(null!=this.__cbOnEndLabel&&(t+=this.__cbOnEndLabel.length),null!=this.__cbOnceEndLabel&&(t+=this.__cbOnceEndLabel.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnEndLabel)for(var l=0,a=this.__cbOnEndLabel.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnEndLabel[h],++r):--t}if(null!=this.__cbOnceEndLabel){for(var c=null,o=null,l=0,a=this.__cbOnceEndLabel.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceEndLabel[h],this.__cbOnceEndLabel[h]=null,u=this.__cbOnceOwnerUnbindEndLabel[h],(this.__cbOnceOwnerUnbindEndLabel[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindEndLabel[h]),o.push(this.__cbOnceEndLabel[h]))}this.__cbOnceOwnerUnbindEndLabel=c,this.__cbOnceEndLabel=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s),s=null}this.didEmitEndLabel(e,n)},onEndLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event endLabel because owner is destroyed!");var s=function(e){null!=t&&(i.offEndLabel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindEndLabel&&(this.__cbOnOwnerUnbindEndLabel=[]),this.__cbOnOwnerUnbindEndLabel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindEndLabel&&(this.__cbOnOwnerUnbindEndLabel=[]),this.__cbOnOwnerUnbindEndLabel.push(null);null==this.__cbOnEndLabel&&(this.__cbOnEndLabel=[]),this.__cbOnEndLabel.push(t)},onceEndLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event endLabel because owner is destroyed!");var s=function(e){null!=t&&(i.offEndLabel(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindEndLabel&&(this.__cbOnceOwnerUnbindEndLabel=[]),this.__cbOnceOwnerUnbindEndLabel.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindEndLabel&&(this.__cbOnceOwnerUnbindEndLabel=[]),this.__cbOnceOwnerUnbindEndLabel.push(null);null==this.__cbOnceEndLabel&&(this.__cbOnceEndLabel=[]),this.__cbOnceEndLabel.push(t)},offEndLabel:function(e){if(null!=e){var n;null!=this.__cbOnEndLabel&&-1!=(n=this.__cbOnEndLabel.indexOf(e))&&(this.__cbOnEndLabel.splice(n,1),null!=(r=this.__cbOnOwnerUnbindEndLabel[n])&&r(),this.__cbOnOwnerUnbindEndLabel.splice(n,1)),null!=this.__cbOnceEndLabel&&-1!=(n=this.__cbOnceEndLabel.indexOf(e))&&(this.__cbOnceEndLabel.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindEndLabel[n])&&r(),this.__cbOnceOwnerUnbindEndLabel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEndLabel){for(var t=0,i=this.__cbOnOwnerUnbindEndLabel.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindEndLabel[s])&&r()}this.__cbOnOwnerUnbindEndLabel=null}if(null!=this.__cbOnceOwnerUnbindEndLabel){for(t=0,i=this.__cbOnceOwnerUnbindEndLabel.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindEndLabel[s])&&r()}this.__cbOnceOwnerUnbindEndLabel=null}this.__cbOnEndLabel=null,this.__cbOnceEndLabel=null}},listensEndLabel:function(){return null!=this.__cbOnEndLabel&&0<this.__cbOnEndLabel.length||null!=this.__cbOnceEndLabel&&0<this.__cbOnceEndLabel.length},set_autoUpdate:function(e){return this.autoUpdate!=e&&(this.autoUpdate=e,ae.app.offPreUpdate($bind(this,this.update)),!this.paused)&&this.autoUpdate&&ae.app.onPreUpdate(this,$bind(this,this.update)),e},set_paused:function(e){return this.paused!=e&&(this.paused=e,ae.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate)&&ae.app.onPreUpdate(this,$bind(this,this.update)),e},set_startPosition:function(e){return this.startPosition!=e&&(this.startPosition=e,this.apply()),e},set_endPosition:function(e){return this.endPosition!=e&&(this.endPosition=e,this.apply()),e},bindAsComponent:function(){},bindOrUnbindUpdateIfNeeded:function(){ae.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&ae.app.onPreUpdate(this,$bind(this,this.update))},update:function(e){var n,t,i=this.position+e*this.fps,e=this.position;if(i!=this.position&&(0<=this.startPosition&&i<this.startPosition&&(i=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&i>this.endPosition&&(i=this.loop?this.startPosition+(i-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?i>this.size&&(this.loop?i%=this.size:i=this.size):0==this.size&&(i=0),(i=i<0?0:i)!=this.position)){this.position=i;for(var s=0,r=this.tracks.length;s<r;){var l=s++,a=this.tracks[l];if(!a.locked){var i=this.position,l=!1,h=!1;if(null==h&&(h=!1),((l=null==l?!1:l)||i!=a.position)&&(0<a.size?i>a.size&&(a.loop?i%=a.size:i=a.size):0==a.size&&(i=0),(i=i<0?0:i)!=a.position)){a.position=i;var c=null;if(-1!=(u=a.keyframeBeforeIndex))if((c=a.keyframes[u]).index<=a.position)for(var o=a.keyframes[u+1];null!=o&&o.index<=a.position;)c=o,++u,o=a.keyframes[u+1];else c=null;if(null==c)for(var u=-1,_=a.keyframes.length;u+1<_;){var d=a.keyframes[u+1];if(d.index>a.position)break;c=d,++u}a.keyframeBeforeIndex=u,a.before=c;var b=null,p=a.keyframeAfterIndex;if(-1!=p&&null!=(b=a.keyframes[p]))if(b.index>a.position){if(0<p)for(var f=a.keyframes[p-1];null!=f&&f.index>a.position;)b=f,f=0<--p?a.keyframes[p-1]:null}else b=null;if(null==b){for(l=a.keyframes.length,p=l;0<=p-1;){var O=a.keyframes[p-1];if(O.index<=a.position)break;b=O,--p}l<=p&&(p=-1)}a.keyframeAfterIndex=p,a.after=b,a.apply(h)}}}}this.position!=e&&(n=Math.floor(this.position))!=Math.floor(e)&&null!=(e=this.labelAtIndex(n))&&(-1!=(t=this.indexOfLabelBeforeIndex(n))&&this.emitEndLabel(t,this.labelAtIndex(t)),this.emitStartLabel(n,e))},seek:function(e){var n,t=e,i=this.position;if(t!=this.position&&(0<=this.startPosition&&t<this.startPosition&&(t=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&t>this.endPosition&&(t=this.loop?this.startPosition+(t-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?t>this.size&&(this.loop?t%=this.size:t=this.size):0==this.size&&(t=0),(t=t<0?0:t)!=this.position)){this.position=t;for(var s=0,r=this.tracks.length;s<r;){var l=s++,a=this.tracks[l];if(!a.locked){var e=this.position,l=!1,h=!1;if(null==h&&(h=!1),((l=null==l?!1:l)||e!=a.position)&&(0<a.size?e>a.size&&(a.loop?e%=a.size:e=a.size):0==a.size&&(e=0),(e=e<0?0:e)!=a.position)){a.position=e;var c=null;if(-1!=(u=a.keyframeBeforeIndex))if((c=a.keyframes[u]).index<=a.position)for(var o=a.keyframes[u+1];null!=o&&o.index<=a.position;)c=o,++u,o=a.keyframes[u+1];else c=null;if(null==c)for(var u=-1,_=a.keyframes.length;u+1<_;){var d=a.keyframes[u+1];if(d.index>a.position)break;c=d,++u}a.keyframeBeforeIndex=u,a.before=c;var b=null,p=a.keyframeAfterIndex;if(-1!=p&&null!=(b=a.keyframes[p]))if(b.index>a.position){if(0<p)for(var f=a.keyframes[p-1];null!=f&&f.index>a.position;)b=f,f=0<--p?a.keyframes[p-1]:null}else b=null;if(null==b){for(l=a.keyframes.length,p=l;0<=p-1;){var O=a.keyframes[p-1];if(O.index<=a.position)break;b=O,--p}l<=p&&(p=-1)}a.keyframeAfterIndex=p,a.after=b,a.apply(h)}}}}this.position!=i&&(t=Math.floor(this.position))!=Math.floor(i)&&null!=(i=this.labelAtIndex(t))&&(-1!=(n=this.indexOfLabelBeforeIndex(t))&&this.emitEndLabel(n,this.labelAtIndex(n)),this.emitStartLabel(t,i))},animate:function(e,n){if(null!=this.completeHandlers&&0<this.completeHandlers.length){var t=this.completeHandlers;if(0!=t.length)if(0<t.length)t.splice(0,t.length);else for(var i=t;i.length<0;)i.push(null);if(0!=(t=this.completeHandlerIndexes).length)if(0<t.length)t.splice(0,t.length);else for(i=t;i.length<0;)i.push(null)}t=this.indexOfLabel(e);-1!=t?(this.seek(t),null==this.completeHandlers&&(this.completeHandlers=[],this.completeHandlerIndexes=[]),this.completeHandlers.push(n),this.completeHandlerIndexes.push(t)):ae.app.logger.warning("Failed to animate whith label: "+e+" (not found)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:287,className:"ceramic.Timeline",methodName:"animate"})},seekLabel:function(e){var n=this.indexOfLabel(e);return-1!=n?this.seek(n):ae.app.logger.warning("Failed to seek label: "+e+" (not found)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:306,className:"ceramic.Timeline",methodName:"seekLabel"}),n},resetStartAndEndPositions:function(){this.set_startPosition(-1),this.set_endPosition(-1)},loopLabel:function(e){var n;return null==this.labels?(ae.app.logger.warning("Cannot loop label "+e+" (there is no label at all)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:339,className:"ceramic.Timeline",methodName:"loopLabel"}),-1):-1==(n=this.labels.indexOf(e))?(ae.app.logger.warning("Cannot loop label "+e+" (no such label)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:345,className:"ceramic.Timeline",methodName:"loopLabel"}),-1):(e=this.labelIndexes[n],this.set_startPosition(e),this.set_endPosition(n<this.labelIndexes.length-1?this.labelIndexes[n+1]:this.size),this.seek(e),e)},apply:function(e){var n,t,i=this.position,s=!0,r=e=null==e?!1:e,l=(null==e&&(r=!1),null==s&&(s=!1),this.position);if((s||i!=this.position)&&(0<=this.startPosition&&i<this.startPosition&&(i=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&i>this.endPosition&&(i=this.loop?this.startPosition+(i-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?i>this.size&&(this.loop?i%=this.size:i=this.size):0==this.size&&(i=0),(i=i<0?0:i)!=this.position)){this.position=i;for(var a=0,h=this.tracks.length;a<h;){var c=a++,o=this.tracks[c];if(!o.locked){i=this.position,c=s,e=r;if(null==e&&(e=!1),((c=null==c?!1:c)||i!=o.position)&&(0<o.size?i>o.size&&(o.loop?i%=o.size:i=o.size):0==o.size&&(i=0),(i=i<0?0:i)!=o.position)){o.position=i;var u=null;if(-1!=(d=o.keyframeBeforeIndex))if((u=o.keyframes[d]).index<=o.position)for(var _=o.keyframes[d+1];null!=_&&_.index<=o.position;)u=_,++d,_=o.keyframes[d+1];else u=null;if(null==u)for(var d=-1,b=o.keyframes.length;d+1<b;){var p=o.keyframes[d+1];if(p.index>o.position)break;u=p,++d}o.keyframeBeforeIndex=d,o.before=u;var f=null,O=o.keyframeAfterIndex;if(-1!=O&&null!=(f=o.keyframes[O]))if(f.index>o.position){if(0<O)for(var g=o.keyframes[O-1];null!=g&&g.index>o.position;)f=g,g=0<--O?o.keyframes[O-1]:null}else f=null;if(null==f){for(c=o.keyframes.length,O=c;0<=O-1;){var m=o.keyframes[O-1];if(m.index<=o.position)break;f=m,--O}c<=O&&(O=-1)}o.keyframeAfterIndex=O,o.after=f,o.apply(e)}}}}this.position!=l&&(n=Math.floor(this.position))!=Math.floor(l)&&null!=(l=this.labelAtIndex(n))&&(-1!=(t=this.indexOfLabelBeforeIndex(n))&&this.emitEndLabel(t,this.labelAtIndex(t)),this.emitStartLabel(n,l))},inlineSeek:function(e,n,t){null==t&&(t=!1),null==n&&(n=!1);var i,s,r=this.position;if((n||e!=this.position)&&(0<=this.startPosition&&e<this.startPosition&&(e=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&e>this.endPosition&&(e=this.loop?this.startPosition+(e-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),(e=e<0?0:e)!=this.position)){this.position=e;for(var l=0,a=this.tracks.length;l<a;){var h=l++,c=this.tracks[h];if(!c.locked){var e=this.position,h=n,o=t;if(null==o&&(o=!1),((h=null==h?!1:h)||e!=c.position)&&(0<c.size?e>c.size&&(c.loop?e%=c.size:e=c.size):0==c.size&&(e=0),(e=e<0?0:e)!=c.position)){c.position=e;var u=null;if(-1!=(d=c.keyframeBeforeIndex))if((u=c.keyframes[d]).index<=c.position)for(var _=c.keyframes[d+1];null!=_&&_.index<=c.position;)u=_,++d,_=c.keyframes[d+1];else u=null;if(null==u)for(var d=-1,b=c.keyframes.length;d+1<b;){var p=c.keyframes[d+1];if(p.index>c.position)break;u=p,++d}c.keyframeBeforeIndex=d,c.before=u;var f=null,O=c.keyframeAfterIndex;if(-1!=O&&null!=(f=c.keyframes[O]))if(f.index>c.position){if(0<O)for(var g=c.keyframes[O-1];null!=g&&g.index>c.position;)f=g,g=0<--O?c.keyframes[O-1]:null}else f=null;if(null==f){for(h=c.keyframes.length,O=h;0<=O-1;){var m=c.keyframes[O-1];if(m.index<=c.position)break;f=m,--O}h<=O&&(O=-1)}c.keyframeAfterIndex=O,c.after=f,c.apply(o)}}}}this.position!=r&&(i=Math.floor(this.position))!=Math.floor(r)&&null!=(r=this.labelAtIndex(i))&&(-1!=(s=this.indexOfLabelBeforeIndex(i))&&this.emitEndLabel(s,this.labelAtIndex(s)),this.emitStartLabel(i,r))},clearCompleteHandlers:function(){if(null!=this.completeHandlers&&0<this.completeHandlers.length){var e=this.completeHandlers;if(0!=e.length)if(0<e.length)e.splice(0,e.length);else for(var n=e;n.length<0;)n.push(null);if(0!=(e=this.completeHandlerIndexes).length)if(0<e.length)e.splice(0,e.length);else for(n=e;n.length<0;)n.push(null)}},didEmitEndLabel:function(e,n){if(null!=this.completeHandlers&&0<this.completeHandlers.length){for(var t=null,i=null,s=0,r=0,l=this.completeHandlerIndexes.length;r<l;){var a=r++;this.completeHandlerIndexes[a]==e&&(null==i&&(i=(t=w.pool(this.completeHandlers.length)).get()),o=this.completeHandlers[a],i.vector[s]=o,this.completeHandlers[a]=null,++s)}if(null!=this.completeHandlers&&0<this.completeHandlers.length){var h=this.completeHandlers;if(0!=h.length)if(0<h.length)h.splice(0,h.length);else for(var c=h;c.length<0;)c.push(null);if(0!=(h=this.completeHandlerIndexes).length)if(0<h.length)h.splice(0,h.length);else for(c=h;c.length<0;)c.push(null)}for(r=0,l=s;r<l;){var o,a=r++;(o=i.vector[a])()}null!=i&&t.release(i)}},add:function(e){null!=e.timeline&&e.timeline.remove(e),e.timeline!=this&&(this.tracks.push(e),e.timeline=this),this.autoFitSize&&this.fitSize()},get:function(e){for(var n=0,t=this.tracks.length;n<t;){var i=n++,i=this.tracks[i];if(i.id==e)return i}return null},remove:function(e){e.timeline==this&&(le.remove(this.tracks,e),e.timeline=null),this.autoFitSize&&this.fitSize()},fitSize:function(){for(var e=0,n=0,t=this.tracks.length;n<t;){var i=n++,i=this.tracks[i];i.size>e&&(e=i.size)}this.size=e},indexOfLabelBeforeIndex:function(e){if(null==this.labelIndexes)return-1;for(var n=-1,t=0,i=this.labelIndexes.length;t<i;){var s=t++,s=this.labelIndexes[s];if(s==e)return n;if(e<s)break;n=s}return n},labelAtIndex:function(e){if(null!=this.labelIndexes)for(var n=0,t=this.labelIndexes.length;n<t;){var i=n++,s=this.labelIndexes[i];if(s==e)return this.labels[i];if(e<s)break}return null},indexOfLabel:function(e){if(null!=this.labelIndexes)for(var n=0,t=this.labels.length;n<t;){var i=n++;if(e==this.labels[i])return this.labelIndexes[i]}return-1},setLabel:function(e,n){this.removeLabel(n),null==this.labelIndexes&&(this.labelIndexes=[],this.labels=[]),this.labelIndexes.push(e),this.labels.push(n),this.sortLabels()},removeLabelAtIndex:function(e){var n=!1;return null!=this.labelIndexes&&-1!=(e=this.labelIndexes.indexOf(e))&&(this.labels.splice(e,1),this.labelIndexes.splice(e,1),n=!0),n},removeLabel:function(e){var n=!1;return null!=this.labels&&-1!=(e=this.labels.indexOf(e))&&(this.labels.splice(e,1),this.labelIndexes.splice(e,1),n=!0),n},sortLabels:function(){this.labelIndexes.sort($bind(this,this.compareLabelIndexes)),this.labels.sort($bind(this,this.compareLabelNames))},compareLabelIndexes:function(e,n){return n<e?1:e<n?-1:0},compareLabelNames:function(e,n){e=this.labels.indexOf(e),e=this.labelIndexes[e],n=this.labels.indexOf(n),n=this.labelIndexes[n];return n<e?1:e<n?-1:0},setEntity:function(e){this.entity=e instanceof h?e:null},getEntity:function(){return this.entity},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offStartLabel(),this.offEndLabel()},__class__:ct,__properties__:$extend(h.prototype.__properties__,{set_endPosition:"set_endPosition",set_startPosition:"set_startPosition",set_paused:"set_paused",set_autoUpdate:"set_autoUpdate"})}),(x["ceramic.TimelineKeyframe"]=g1).__name__="ceramic.TimelineKeyframe",g1.prototype={__class__:g1},(x["ceramic.TimelineBoolKeyframe"]=h1).__name__="ceramic.TimelineBoolKeyframe",h1.__super__=g1,h1.prototype=$extend(g1.prototype,{__class__:h1}),(x["ceramic.TimelineTrack"]=i1).__name__="ceramic.TimelineTrack",i1.__super__=h,i1.prototype=$extend(h.prototype,{destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.timeline&&0<=this.timeline._lifecycleState&&this.timeline.remove(this),this._lifecycleState=-1,h.prototype.destroy.call(this))},seek:function(e){if(e!=this.position&&(0<this.size?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),(e=e<0?0:e)!=this.position)){this.position=e;var n=null;if(-1!=(r=this.keyframeBeforeIndex))if((n=this.keyframes[r]).index<=this.position)for(var t=this.keyframes[r+1];null!=t&&t.index<=this.position;)n=t,t=this.keyframes[++r+1];else n=null;if(null==n){r=-1;for(var i=this.keyframes.length;r+1<i;){if((s=this.keyframes[r+1]).index>this.position)break;n=s,++r}}this.keyframeBeforeIndex=r,this.before=n;var s,n=null,r=this.keyframeAfterIndex;if(-1!=r&&null!=(n=this.keyframes[r]))if(n.index>this.position){if(0<r)for(var l=this.keyframes[r-1];null!=l&&l.index>this.position;)n=l,l=0<--r?this.keyframes[r-1]:null}else n=null;if(null==n){for(r=i=this.keyframes.length;0<=r-1;){if((s=this.keyframes[r-1]).index<=this.position)break;n=s,--r}i<=r&&(r=-1)}this.keyframeAfterIndex=r,this.after=n,this.apply(!1)}},inlineSeek:function(e,n,t){if(null==t&&(t=!1),((n=null==n?!1:n)||e!=this.position)&&(0<this.size?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),(e=e<0?0:e)!=this.position)){this.position=e;var i=null;if(-1!=(a=this.keyframeBeforeIndex))if((i=this.keyframes[a]).index<=this.position)for(var s=this.keyframes[a+1];null!=s&&s.index<=this.position;)i=s,s=this.keyframes[++a+1];else i=null;if(null==i){a=-1;for(var r=this.keyframes.length;a+1<r;){if((l=this.keyframes[a+1]).index>this.position)break;i=l,++a}}this.keyframeBeforeIndex=a,this.before=i;var l,i=null,a=this.keyframeAfterIndex;if(-1!=a&&null!=(i=this.keyframes[a]))if(i.index>this.position){if(0<a)for(var h=this.keyframes[a-1];null!=h&&h.index>this.position;)i=h,h=0<--a?this.keyframes[a-1]:null}else i=null;if(null==i){for(a=r=this.keyframes.length;0<=a-1;){if((l=this.keyframes[a-1]).index<=this.position)break;i=l,--a}r<=a&&(a=-1)}this.keyframeAfterIndex=a,this.after=i,this.apply(t)}},add:function(e){for(var n=this.keyframes,t=n.length,i=0,s=!1;i<t;){var r=n[i];if(r.index==e.index){ae.app.logger.warning("Replacing existing keyframe at index "+e.index,{fileName:"../../../../ceramic/runtime/src/ceramic/TimelineTrack.hx",lineNumber:204,className:"ceramic.TimelineTrack",methodName:"add"}),n[i]=e,s=!0;break}if(r.index>e.index){n.splice(i,0,e),s=!0;break}++i}s||n.push(e),this.autoFitSize&&this.fitSize(),null!=this.timeline&&this.timeline.autoFitSize&&this.timeline.fitSize(),this.keyframeBeforeIndex=-1;var l=null;if((this.keyframeAfterIndex=-1)!=(h=this.keyframeBeforeIndex))if((l=this.keyframes[h]).index<=this.position)for(var a=this.keyframes[h+1];null!=a&&a.index<=this.position;)l=a,a=this.keyframes[++h+1];else l=null;if(null==l){h=-1;for(t=this.keyframes.length;h+1<t;){if((e=this.keyframes[h+1]).index>this.position)break;l=e,++h}}this.keyframeBeforeIndex=h,this.before=l;var l=null,h=this.keyframeAfterIndex;if(-1!=h&&null!=(l=this.keyframes[h]))if(l.index>this.position){if(0<h)for(var c=this.keyframes[h-1];null!=c&&c.index>this.position;)l=c,c=0<--h?this.keyframes[h-1]:null}else l=null;if(null==l){for(h=t=this.keyframes.length;0<=h-1;){if((e=this.keyframes[h-1]).index<=this.position)break;l=e,--h}t<=h&&(h=-1)}this.keyframeAfterIndex=h,this.after=l,this.apply(!0)},remove:function(e){if(-1!=(s=this.keyframes.indexOf(e))){this.keyframes.splice(s,1),this.autoFitSize&&this.fitSize(),null!=this.timeline&&this.timeline.autoFitSize&&this.timeline.fitSize(),this.keyframeBeforeIndex=-1;var n=null;if((this.keyframeAfterIndex=-1)!=(s=this.keyframeBeforeIndex))if((n=this.keyframes[s]).index<=this.position)for(var t=this.keyframes[s+1];null!=t&&t.index<=this.position;)n=t,t=this.keyframes[++s+1];else n=null;if(null==n){s=-1;for(var i=this.keyframes.length;s+1<i;){if((e=this.keyframes[s+1]).index>this.position)break;n=e,++s}}this.keyframeBeforeIndex=s,this.before=n;var n=null,s=this.keyframeAfterIndex;if(-1!=s&&null!=(n=this.keyframes[s]))if(n.index>this.position){if(0<s)for(var r=this.keyframes[s-1];null!=r&&r.index>this.position;)n=r,r=0<--s?this.keyframes[s-1]:null}else n=null;if(null==n){for(s=i=this.keyframes.length;0<=s-1;){if((e=this.keyframes[s-1]).index<=this.position)break;n=e,--s}i<=s&&(s=-1)}this.keyframeAfterIndex=s,this.after=n,this.apply(!0)}else ae.app.logger.warning("Failed to remove keyframe: keyframe not found in list",{fileName:"../../../../ceramic/runtime/src/ceramic/TimelineTrack.hx",lineNumber:270,className:"ceramic.TimelineTrack",methodName:"remove"})},fitSize:function(){0<this.keyframes.length?this.size=this.keyframes[this.keyframes.length-1].index:this.size=0},apply:function(e){},findKeyframeAtIndex:function(e){var n=this.findKeyframeBefore(e);return null!=n&&n.index==e?n:null},findKeyframeBefore:function(e){for(var n=null,t=-1,i=this.keyframes.length;t+1<i;){var s=this.keyframes[t+1];if(s.index>e)break;n=s,++t}return n},findKeyframeAfter:function(e){for(var n=null,t=-1,i=this.keyframes.length;t+1<i;){var s=this.keyframes[t+1];if(s.index>e)break;n=s,++t}return n},computeKeyframeBefore:function(){var e=null;if(-1!=(t=this.keyframeBeforeIndex))if((e=this.keyframes[t]).index<=this.position)for(var n=this.keyframes[t+1];null!=n&&n.index<=this.position;)e=n,n=this.keyframes[++t+1];else e=null;if(null==e)for(var t=-1,i=this.keyframes.length;t+1<i;){var s=this.keyframes[t+1];if(s.index>this.position)break;e=s,++t}this.keyframeBeforeIndex=t,this.before=e},computeKeyframeAfter:function(){var e=null,n=this.keyframeAfterIndex;if(-1!=n&&null!=(e=this.keyframes[n]))if(e.index>this.position){if(0<n)for(var t=this.keyframes[n-1];null!=t&&t.index>this.position;)e=t,t=0<--n?this.keyframes[n-1]:null}else e=null;if(null==e){for(var i=this.keyframes.length,n=i;0<=n-1;){var s=this.keyframes[n-1];if(s.index<=this.position)break;e=s,--n}i<=n&&(n=-1)}this.keyframeAfterIndex=n,this.after=e},__class__:i1}),(x["ceramic.TimelineBoolTrack"]=j1).__name__="ceramic.TimelineBoolTrack",j1.__super__=i1,j1.prototype=$extend(i1.prototype,{emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnChange)for(var r=0,l=this.__cbOnChange.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnChange[a],++s):--n}if(null!=this.__cbOnceChange){for(var h=null,c=null,r=0,l=this.__cbOnceChange.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,o=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),c.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindChange[n])&&r(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindChange[n])&&r(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindChange[s])&&r()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindChange[s])&&r()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},apply:function(e){null==e&&(e=!1);var n,t=this.value;null!=this.before&&null!=this.after?(1<(n=(this.position-this.before.index)/(this.after.index-this.before.index))?n=1:n<0&&(n=0),this.value=(1<=n?this.after:this.before).value):null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value),!e&&t==this.value||this.emitChange(this)},unbindEvents:function(){i1.prototype.unbindEvents.call(this),this.offChange()},__class__:j1}),(x["ceramic.TimelineColorKeyframe"]=k1).__name__="ceramic.TimelineColorKeyframe",k1.__super__=g1,k1.prototype=$extend(g1.prototype,{__class__:k1}),(x["ceramic.TimelineColorTrack"]=l1).__name__="ceramic.TimelineColorTrack",l1.__super__=i1,l1.prototype=$extend(i1.prototype,{emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnChange)for(var r=0,l=this.__cbOnChange.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnChange[a],++s):--n}if(null!=this.__cbOnceChange){for(var h=null,c=null,r=0,l=this.__cbOnceChange.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,o=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),c.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindChange[n])&&r(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindChange[n])&&r(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindChange[s])&&r()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindChange[s])&&r()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},apply:function(e){null==e&&(e=!1);var n,t,i,s,r=this.value;null!=this.before&&null!=this.after?(1<(i=(this.position-this.before.index)/(this.after.index-this.before.index))?i=1:i<0&&(i=0),n=this.before.value,s=(((t=this.after.value)>>16&255)-(n>>16&255))*(i=null==(i=G.ease(this.after.easing,i))?.5:i)+(n>>16&255)|0,this.value=((0&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<(s=((t>>8&255)-(n>>8&255))*i+(n>>8&255)|0)?255:s<0?0:s)<<8)&16776960|(255<(s=((255&t)-(255&n))*i+(255&n)|0)?255:s<0?0:s)):null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value),!e&&r==this.value||this.emitChange(this)},unbindEvents:function(){i1.prototype.unbindEvents.call(this),this.offChange()},__class__:l1}),(x["ceramic.TimelineDegreesTrack"]=m1).__name__="ceramic.TimelineDegreesTrack",m1.__super__=i1,m1.prototype=$extend(i1.prototype,{emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnChange)for(var r=0,l=this.__cbOnChange.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnChange[a],++s):--n}if(null!=this.__cbOnceChange){for(var h=null,c=null,r=0,l=this.__cbOnceChange.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,o=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),c.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindChange[n])&&r(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindChange[n])&&r(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindChange[s])&&r()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindChange[s])&&r()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},apply:function(e){null==e&&(e=!1);var n,t,i,s,r=this.value,l=this.value;null!=this.before&&null!=this.after?(1<(n=(this.position-this.before.index)/(this.after.index-this.before.index))?n=1:n<0&&(n=0),t=H0.clampDegrees(this.before.value),180<(s=(i=H0.clampDegrees(this.after.value))-t)?i-=360:s<-180&&(i+=360),l=t+(i-t)*G.ease(this.after.easing,n),l=H0.clampDegrees(l)):null!=this.after?l=H0.clampDegrees(this.after.value):null!=this.before&&(l=H0.clampDegrees(this.before.value)),!e&&r==l||(this.value=l,this.emitChange(this))},unbindEvents:function(){i1.prototype.unbindEvents.call(this),this.offChange()},__class__:m1}),(x["ceramic.TimelineFloatArrayKeyframe"]=n1).__name__="ceramic.TimelineFloatArrayKeyframe",n1.__super__=g1,n1.prototype=$extend(g1.prototype,{__class__:n1}),(x["ceramic.TimelineFloatArrayTrack"]=o1).__name__="ceramic.TimelineFloatArrayTrack",o1.__super__=i1,o1.prototype=$extend(i1.prototype,{emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnChange)for(var r=0,l=this.__cbOnChange.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnChange[a],++s):--n}if(null!=this.__cbOnceChange){for(var h=null,c=null,r=0,l=this.__cbOnceChange.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,o=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),c.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindChange[n])&&r(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindChange[n])&&r(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindChange[s])&&r()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindChange[s])&&r()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},apply:function(e){null==e&&(e=!1);var n=!1;if(null!=this.before&&null!=this.after){var t=(this.position-this.before.index)/(this.after.index-this.before.index);if(1<t?t=1:t<0&&(t=0),1<=t){var i=this.value,s=(f=this.after.value).length;if(i.length>s&&i.length!=s)if(i.length>s)i.splice(s,i.length-s);else for(var r=i;r.length<s;)r.push(null);for(var l=i.length,a=0,h=s;a<h;){var c=0,o=((O=a++)<l?c=i[O]:n=!0,f[O]);(i[O]=o)!=c&&(n=!0)}}else if(t<=0){i=this.value,s=(f=this.before.value).length;if(i.length>s&&i.length!=s)if(i.length>s)i.splice(s,i.length-s);else for(r=i;r.length<s;)r.push(null);for(l=i.length,a=0,h=s;a<h;){c=0,o=((O=a++)<l?c=i[O]:n=!0,f[O]);(i[O]=o)!=c&&(n=!0)}}else{var i=this.value,u=this.before.value,_=this.after.value,d=G.ease(this.after.easing,t),t=_.length,b=u.length,s=b<t?b:t;if(i.length>s&&i.length!=s)if(i.length>s)i.splice(s,i.length-s);else for(r=i;r.length<s;)r.push(null);for(l=i.length,a=0,h=s;a<h;){var c=0,p=((O=a++)<l?c=i[O]:n=!0,u[O]),o=p+(_[O]-p)*d;(i[O]=o)!=c&&(n=!0)}}}else if(null!=this.after){i=this.value,s=(f=this.after.value).length;if(i.length>s&&i.length!=s)if(i.length>s)i.splice(s,i.length-s);else for(r=i;r.length<s;)r.push(null);for(l=i.length,a=0,h=s;a<h;){c=0,o=((O=a++)<l?c=i[O]:n=!0,f[O]);(i[O]=o)!=c&&(n=!0)}}else if(null!=this.before){var f,i=this.value,s=(f=this.before.value).length;if(i.length>s&&i.length!=s)if(i.length>s)i.splice(s,i.length-s);else for(r=i;r.length<s;)r.push(null);for(l=i.length,a=0,h=s;a<h;){var O,c=0,o=((O=a++)<l?c=i[O]:n=!0,f[O]);(i[O]=o)!=c&&(n=!0)}}(e||n)&&this.emitChange(this)},unbindEvents:function(){i1.prototype.unbindEvents.call(this),this.offChange()},__class__:o1}),(x["ceramic.TimelineFloatKeyframe"]=p1).__name__="ceramic.TimelineFloatKeyframe",p1.__super__=g1,p1.prototype=$extend(g1.prototype,{__class__:p1}),(x["ceramic.TimelineFloatTrack"]=q1).__name__="ceramic.TimelineFloatTrack",q1.__super__=i1,q1.prototype=$extend(i1.prototype,{emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=w.pool(n),i=t.get(),s=0;if(null!=this.__cbOnChange)for(var r=0,l=this.__cbOnChange.length;r<l;){var a=r++;!0?(i.vector[s]=this.__cbOnChange[a],++s):--n}if(null!=this.__cbOnceChange){for(var h=null,c=null,r=0,l=this.__cbOnceChange.length;r<l;){var o,a=r++;!0?(i.vector[s]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,o=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=o&&o(),++s):(--n,null==h&&(h=[],c=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),c.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=c}for(r=0,l=n;r<l;){s=r++;(0,i.vector[s])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event change because owner is destroyed!");var s=function(e){null!=t&&(i.offChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindChange[n])&&r(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindChange[n])&&r(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindChange[s])&&r()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindChange[s])&&r()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},apply:function(e){null==e&&(e=!1);var n,t=this.value;null!=this.before&&null!=this.after?(1<(n=(this.position-this.before.index)/(this.after.index-this.before.index))?n=1:n<0&&(n=0),this.value=this.before.value+(this.after.value-this.before.value)*G.ease(this.after.easing,n)):null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value),!e&&t==this.value||this.emitChange(this)},unbindEvents:function(){i1.prototype.unbindEvents.call(this),this.offChange()},__class__:q1}),function(){h.call(this),this.onCreateTrack(this,$bind(this,this.handleCreateTrack)),this.onBindTrack(this,$bind(this,this.handleBindTrack)),this.onCreateKeyframe(this,$bind(this,this.handleCreateKeyframe))}),ut=((x["ceramic.Timelines"]=ot).__name__="ceramic.Timelines",ot.__super__=h,ot.prototype=$extend(h.prototype,{emitCreateTrack:function(e,n,t){var i=0;if(null!=this.__cbOnCreateTrack&&(i+=this.__cbOnCreateTrack.length),null!=this.__cbOnceCreateTrack&&(i+=this.__cbOnceCreateTrack.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnCreateTrack)for(var a=0,h=this.__cbOnCreateTrack.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnCreateTrack[c],++l):--i}if(null!=this.__cbOnceCreateTrack){for(var o=null,u=null,a=0,h=this.__cbOnceCreateTrack.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceCreateTrack[c],this.__cbOnceCreateTrack[c]=null,_=this.__cbOnceOwnerUnbindCreateTrack[c],(this.__cbOnceOwnerUnbindCreateTrack[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindCreateTrack[c]),u.push(this.__cbOnceCreateTrack[c]))}this.__cbOnceOwnerUnbindCreateTrack=o,this.__cbOnceCreateTrack=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onCreateTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event createTrack because owner is destroyed!");var s=function(e){null!=t&&(i.offCreateTrack(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindCreateTrack&&(this.__cbOnOwnerUnbindCreateTrack=[]),this.__cbOnOwnerUnbindCreateTrack.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindCreateTrack&&(this.__cbOnOwnerUnbindCreateTrack=[]),this.__cbOnOwnerUnbindCreateTrack.push(null);null==this.__cbOnCreateTrack&&(this.__cbOnCreateTrack=[]),this.__cbOnCreateTrack.push(t)},onceCreateTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event createTrack because owner is destroyed!");var s=function(e){null!=t&&(i.offCreateTrack(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindCreateTrack&&(this.__cbOnceOwnerUnbindCreateTrack=[]),this.__cbOnceOwnerUnbindCreateTrack.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindCreateTrack&&(this.__cbOnceOwnerUnbindCreateTrack=[]),this.__cbOnceOwnerUnbindCreateTrack.push(null);null==this.__cbOnceCreateTrack&&(this.__cbOnceCreateTrack=[]),this.__cbOnceCreateTrack.push(t)},offCreateTrack:function(e){if(null!=e){var n;null!=this.__cbOnCreateTrack&&-1!=(n=this.__cbOnCreateTrack.indexOf(e))&&(this.__cbOnCreateTrack.splice(n,1),null!=(r=this.__cbOnOwnerUnbindCreateTrack[n])&&r(),this.__cbOnOwnerUnbindCreateTrack.splice(n,1)),null!=this.__cbOnceCreateTrack&&-1!=(n=this.__cbOnceCreateTrack.indexOf(e))&&(this.__cbOnceCreateTrack.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindCreateTrack[n])&&r(),this.__cbOnceOwnerUnbindCreateTrack.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindCreateTrack){for(var t=0,i=this.__cbOnOwnerUnbindCreateTrack.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindCreateTrack[s])&&r()}this.__cbOnOwnerUnbindCreateTrack=null}if(null!=this.__cbOnceOwnerUnbindCreateTrack){for(t=0,i=this.__cbOnceOwnerUnbindCreateTrack.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindCreateTrack[s])&&r()}this.__cbOnceOwnerUnbindCreateTrack=null}this.__cbOnCreateTrack=null,this.__cbOnceCreateTrack=null}},listensCreateTrack:function(){return null!=this.__cbOnCreateTrack&&0<this.__cbOnCreateTrack.length||null!=this.__cbOnceCreateTrack&&0<this.__cbOnceCreateTrack.length},emitBindTrack:function(e,n,t,i,s){var r=0;if(null!=this.__cbOnBindTrack&&(r+=this.__cbOnBindTrack.length),null!=this.__cbOnceBindTrack&&(r+=this.__cbOnceBindTrack.length),0<r){var l=w.pool(r),a=l.get(),h=0;if(null!=this.__cbOnBindTrack)for(var c=0,o=this.__cbOnBindTrack.length;c<o;){var u=c++;!0?(a.vector[h]=this.__cbOnBindTrack[u],++h):--r}if(null!=this.__cbOnceBindTrack){for(var _=null,d=null,c=0,o=this.__cbOnceBindTrack.length;c<o;){var b,u=c++;!0?(a.vector[h]=this.__cbOnceBindTrack[u],this.__cbOnceBindTrack[u]=null,b=this.__cbOnceOwnerUnbindBindTrack[u],(this.__cbOnceOwnerUnbindBindTrack[u]=null)!=b&&b(),++h):(--r,null==_&&(_=[],d=[],0),_.push(this.__cbOnceOwnerUnbindBindTrack[u]),d.push(this.__cbOnceBindTrack[u]))}this.__cbOnceOwnerUnbindBindTrack=_,this.__cbOnceBindTrack=d}for(c=0,o=r;c<o;){h=c++;(0,a.vector[h])(e,n,t,i,s)}l.release(a)}},onBindTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event bindTrack because owner is destroyed!");var s=function(e){null!=t&&(i.offBindTrack(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindBindTrack&&(this.__cbOnOwnerUnbindBindTrack=[]),this.__cbOnOwnerUnbindBindTrack.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindBindTrack&&(this.__cbOnOwnerUnbindBindTrack=[]),this.__cbOnOwnerUnbindBindTrack.push(null);null==this.__cbOnBindTrack&&(this.__cbOnBindTrack=[]),this.__cbOnBindTrack.push(t)},onceBindTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event bindTrack because owner is destroyed!");var s=function(e){null!=t&&(i.offBindTrack(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindBindTrack&&(this.__cbOnceOwnerUnbindBindTrack=[]),this.__cbOnceOwnerUnbindBindTrack.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindBindTrack&&(this.__cbOnceOwnerUnbindBindTrack=[]),this.__cbOnceOwnerUnbindBindTrack.push(null);null==this.__cbOnceBindTrack&&(this.__cbOnceBindTrack=[]),this.__cbOnceBindTrack.push(t)},offBindTrack:function(e){if(null!=e){var n;null!=this.__cbOnBindTrack&&-1!=(n=this.__cbOnBindTrack.indexOf(e))&&(this.__cbOnBindTrack.splice(n,1),null!=(r=this.__cbOnOwnerUnbindBindTrack[n])&&r(),this.__cbOnOwnerUnbindBindTrack.splice(n,1)),null!=this.__cbOnceBindTrack&&-1!=(n=this.__cbOnceBindTrack.indexOf(e))&&(this.__cbOnceBindTrack.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindBindTrack[n])&&r(),this.__cbOnceOwnerUnbindBindTrack.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBindTrack){for(var t=0,i=this.__cbOnOwnerUnbindBindTrack.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindBindTrack[s])&&r()}this.__cbOnOwnerUnbindBindTrack=null}if(null!=this.__cbOnceOwnerUnbindBindTrack){for(t=0,i=this.__cbOnceOwnerUnbindBindTrack.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindBindTrack[s])&&r()}this.__cbOnceOwnerUnbindBindTrack=null}this.__cbOnBindTrack=null,this.__cbOnceBindTrack=null}},listensBindTrack:function(){return null!=this.__cbOnBindTrack&&0<this.__cbOnBindTrack.length||null!=this.__cbOnceBindTrack&&0<this.__cbOnceBindTrack.length},emitCreateKeyframe:function(e,n,t,i,s,r,l){var a=0;if(null!=this.__cbOnCreateKeyframe&&(a+=this.__cbOnCreateKeyframe.length),null!=this.__cbOnceCreateKeyframe&&(a+=this.__cbOnceCreateKeyframe.length),0<a){var h=w.pool(a),c=h.get(),o=0;if(null!=this.__cbOnCreateKeyframe)for(var u=0,_=this.__cbOnCreateKeyframe.length;u<_;){var d=u++;!0?(c.vector[o]=this.__cbOnCreateKeyframe[d],++o):--a}if(null!=this.__cbOnceCreateKeyframe){for(var b=null,p=null,u=0,_=this.__cbOnceCreateKeyframe.length;u<_;){var f,d=u++;!0?(c.vector[o]=this.__cbOnceCreateKeyframe[d],this.__cbOnceCreateKeyframe[d]=null,f=this.__cbOnceOwnerUnbindCreateKeyframe[d],(this.__cbOnceOwnerUnbindCreateKeyframe[d]=null)!=f&&f(),++o):(--a,null==b&&(b=[],p=[],0),b.push(this.__cbOnceOwnerUnbindCreateKeyframe[d]),p.push(this.__cbOnceCreateKeyframe[d]))}this.__cbOnceOwnerUnbindCreateKeyframe=b,this.__cbOnceCreateKeyframe=p}for(u=0,_=a;u<_;){o=u++;(0,c.vector[o])(e,n,t,i,s,r,l)}h.release(c)}},onCreateKeyframe:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event createKeyframe because owner is destroyed!");var s=function(e){null!=t&&(i.offCreateKeyframe(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindCreateKeyframe&&(this.__cbOnOwnerUnbindCreateKeyframe=[]),this.__cbOnOwnerUnbindCreateKeyframe.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindCreateKeyframe&&(this.__cbOnOwnerUnbindCreateKeyframe=[]),this.__cbOnOwnerUnbindCreateKeyframe.push(null);null==this.__cbOnCreateKeyframe&&(this.__cbOnCreateKeyframe=[]),this.__cbOnCreateKeyframe.push(t)},onceCreateKeyframe:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event createKeyframe because owner is destroyed!");var s=function(e){null!=t&&(i.offCreateKeyframe(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindCreateKeyframe&&(this.__cbOnceOwnerUnbindCreateKeyframe=[]),this.__cbOnceOwnerUnbindCreateKeyframe.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindCreateKeyframe&&(this.__cbOnceOwnerUnbindCreateKeyframe=[]),this.__cbOnceOwnerUnbindCreateKeyframe.push(null);null==this.__cbOnceCreateKeyframe&&(this.__cbOnceCreateKeyframe=[]),this.__cbOnceCreateKeyframe.push(t)},offCreateKeyframe:function(e){if(null!=e){var n;null!=this.__cbOnCreateKeyframe&&-1!=(n=this.__cbOnCreateKeyframe.indexOf(e))&&(this.__cbOnCreateKeyframe.splice(n,1),null!=(r=this.__cbOnOwnerUnbindCreateKeyframe[n])&&r(),this.__cbOnOwnerUnbindCreateKeyframe.splice(n,1)),null!=this.__cbOnceCreateKeyframe&&-1!=(n=this.__cbOnceCreateKeyframe.indexOf(e))&&(this.__cbOnceCreateKeyframe.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindCreateKeyframe[n])&&r(),this.__cbOnceOwnerUnbindCreateKeyframe.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindCreateKeyframe){for(var t=0,i=this.__cbOnOwnerUnbindCreateKeyframe.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindCreateKeyframe[s])&&r()}this.__cbOnOwnerUnbindCreateKeyframe=null}if(null!=this.__cbOnceOwnerUnbindCreateKeyframe){for(t=0,i=this.__cbOnceOwnerUnbindCreateKeyframe.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindCreateKeyframe[s])&&r()}this.__cbOnceOwnerUnbindCreateKeyframe=null}this.__cbOnCreateKeyframe=null,this.__cbOnceCreateKeyframe=null}},listensCreateKeyframe:function(){return null!=this.__cbOnCreateKeyframe&&0<this.__cbOnCreateKeyframe.length||null!=this.__cbOnceCreateKeyframe&&0<this.__cbOnceCreateKeyframe.length},handleCreateTrack:function(e,n,t){null==t.value&&(null!=n&&1==n.degrees?t.value=new m1:"Float"==e?t.value=new q1:"ceramic.Color"==e?t.value=new l1:"Bool"==e?t.value=new j1:"Array<Float>"==e&&(t.value=new o1))},handleBindTrack:function(e,n,t,c,o){var u;t instanceof q1?t.onChange(c,function(e){P.setProperty(c,o,e.value)}):t instanceof m1?t.onChange(c,function(e){P.setProperty(c,o,e.value)}):t instanceof l1?t.onChange(c,function(e){P.setProperty(c,o,e.value)}):t instanceof j1?t.onChange(c,function(e){P.setProperty(c,o,e.value)}):t instanceof o1&&(u=null!=n&&1==n.copyArray,t.onChange(c,function(e){var n=null,t=((u||null==(n=P.getProperty(c,o)))&&(n=[]),e.value),i=t.length;if(n.length!=i&&n.length!=i)if(n.length>i)n.splice(i,n.length-i);else for(var s=n;s.length<i;)s.push(null);for(var r=0,l=i;r<l;){var a=r++,h=t[a];n[a]=h}P.setProperty(c,o,n)}))},handleCreateKeyframe:function(e,n,t,i,s,r,l){var a;null==l.value&&("Float"==e?null!=r&&r instanceof p1?((a=r).value=t,a.index=i,a.easing=s,l.value=a):l.value=new p1(t,i,s):"ceramic.Color"==e?null!=r&&r instanceof k1?((a=r).value=t,a.index=i,a.easing=s,l.value=a):l.value=new k1(t,i,s):"Bool"==e?null!=r&&r instanceof h1?((a=r).value=t,a.index=i,a.easing=s,l.value=a):l.value=new h1(t,i,s):"Array<Float>"==e&&(null!=r&&r instanceof n1?((a=r).value=[].concat(t),a.index=i,a.easing=s,l.value=a):l.value=new n1(t,i,s)))},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offCreateTrack(),this.offBindTrack(),this.offCreateKeyframe()},__class__:ot}),function(){}),_t=((x["ceramic.Timer"]=ut).__name__="ceramic.Timer",ut.__properties__={get_timestamp:"get_timestamp"},ut.get_timestamp=function(){return ut.startTimestamp+ut.now},ut.update=function(e,n){ut.now+=e,ut.timestamp=ut.startTimestamp+ut.now+n,ut.next<=ut.now&&ae.app.beginUpdateCallbacks.push(ut.flush)},ut.flush=function(){ut.next=999999999;for(var e=ut.callbacks,n=(ut.callbacks=[],0),t=e.length;n<t;){var i=e[n++];if(!i.cleared)if(null==i.owner||0<=i.owner._lifecycleState)if(i.time<=ut.now)if(0<=i.interval){for(;i.time<=ut.now&&!i.cleared&&(i.callback(),0!=i.interval);)i.time+=i.interval;i.cleared||(ut.callbacks.push(i),ut.next=Math.min(i.time,ut.next))}else i.callback();else ut.callbacks.push(i),ut.next=Math.min(i.time,ut.next);else i.cleared=!0}},ut.delay=function(e,n,t){return ut.schedule(e,n,t,-1)},ut.interval=function(e,n,t){return ut.schedule(e,n,t,n)},ut.schedule=function(e,n,t,i){var n=ut.now+n,s=(ut.next=Math.min(n,ut.next),new _t);return s.owner=e,s.callback=t,s.time=n,s.interval=i,ut.callbacks.push(s),$bind(s,s.clear)},function(){this.cleared=!1,this.interval=-1,this.time=0,this.callback=null,this.owner=null}),dt=((x["ceramic.TimerCallback"]=_t).__name__="ceramic.TimerCallback",_t.prototype={clear:function(){this.cleared=!0},__class__:_t},function(e,n,t,i,s){this.index=e,this.x=n,this.y=t,this.deltaX=i,this.deltaY=s}),bt=((x["ceramic.Touch"]=dt).__name__="ceramic.Touch",dt.prototype={toString:function(){return""+L.string({index:this.index,x:this.x,y:this.y,deltaX:this.deltaX,deltaY:this.deltaY})},__class__:dt},function(e,n,t,i,s){this.touchIndex=e,this.buttonId=n,this.x=t,this.y=i,this.hits=s}),e=((x["ceramic.TouchInfo"]=bt).__name__="ceramic.TouchInfo",bt.prototype={toString:function(){return""+L.string({touchIndex:this.touchIndex,buttonId:this.buttonId,x:this.x,y:this.y,hits:this.hits})},__class__:bt},function(e){this.intMap=e,this.i=0,this.len=this.intMap.values.length}),pt=((x["ceramic.TouchesIterator"]=e).__name__="ceramic.TouchesIterator",e.prototype={hasNext:function(){for(;this.i<this.len&&null==this.intMap.values[this.i];)this.i++;return this.i<this.len},next:function(){var e=this.i++;return this.intMap.values[e]},__class__:e},function(){this.backgroundQueue=new Qa}),G=((x["ceramic.TrackerBackend"]=pt).__name__="ceramic.TrackerBackend",pt.prototype={onceImmediate:function(e){ae.app._onceImmediate(e)},readString:function(e){return ae.app.backend.io.readString(e)},saveString:function(e,n){return ae.app.backend.io.saveString(e,n)},appendString:function(e,n){return ae.app.backend.io.appendString(e,n)},warning:function(e,n){ae.app.logger.warning(e,n)},error:function(e,n){ae.app.logger.error(e,n)},success:function(e,n){ae.app.logger.success(e,n)},runInBackground:function(e){this.backgroundQueue.schedule(e)},runInMain:function(e){Nn.runInMain(e)},interval:function(e,n,t){return ut.schedule(e,n,t,n)},delay:function(e,n,t){return ut.schedule(e,n,t,-1)},storageDirectory:function(){return null},pathJoin:function(e){return An.join(e)},__class__:pt},function(e,n,t,i,s){this.didTickThisFrame=!1,this.didCallImmediateStart=!1,this.customEasing=null,h.call(this),this.owner=e,this.easing=n,this.duration=t,this.fromValue=i,this.toValue=s,this.value=i,this.time=0,this.init()}),b=((x["ceramic.Tween"]=G).__name__="ceramic.Tween",G.start=function(e,n,t,i,s,r){n=new G(e,null==n?je.QUAD_EASE_IN_OUT:n,t,i,s);return null!=r&&n.onUpdate(e,r),n},G.eagerStart=function(e,n,t,i,s,r){n=new G(e,null==n?je.QUAD_EASE_IN_OUT:n,t,i,s);return n.eager=!0,null!=r&&n.onUpdate(e,r),n},G.tick=function(e){for(var n=G._tweens.length,t=0,i=n;t<i;){var s=t++,r=G._tweens[s];G._iteratedTweens[s]=r}for(t=0,i=n;t<i;){var l,s=t++,r=G._iteratedTweens[s];G._iteratedTweens[s]=null,r.didTickThisFrame||0<=r._lifecycleState&&(r.didTickThisFrame=!0,null!=r.owner&&r.owner._lifecycleState<0?r.destroy():(r.remaining-=e,r.remaining<=0?(r.emitUpdate(r.toValue,r.duration),r.emitComplete(),r.destroy()):(l=r.duration-r.remaining,b.k=l/r.duration,b.k,b.customEasing=r.customEasing,null!=r.computedEasing&&r.computedEasing(),b.customEasing=null,r.emitUpdate(r.fromValue+(r.toValue-r.fromValue)*b.k,l))))}},G.endFrame=function(){for(var e=0,n=G._tweens.length;e<n;){var t=e++;G._tweens[t].didTickThisFrame=!1}},G.computeEasing=function(e){switch(e._hx_index){case 0:G._computedEasingFunction=b.none;break;case 1:G._computedEasingFunction=b.linear;break;case 2:G._computedEasingFunction=b.backEaseIn;break;case 3:G._computedEasingFunction=b.backEaseInOut;break;case 4:G._computedEasingFunction=b.backEaseOut;break;case 5:G._computedEasingFunction=b.quadEaseIn;break;case 6:G._computedEasingFunction=b.quadEaseInOut;break;case 7:G._computedEasingFunction=b.quadEaseOut;break;case 8:G._computedEasingFunction=b.cubicEaseIn;break;case 9:G._computedEasingFunction=b.cubicEaseInOut;break;case 10:G._computedEasingFunction=b.cubicEaseOut;break;case 11:G._computedEasingFunction=b.quartEaseIn;break;case 12:G._computedEasingFunction=b.quartEaseInOut;break;case 13:G._computedEasingFunction=b.quartEaseOut;break;case 14:G._computedEasingFunction=b.quintEaseIn;break;case 15:G._computedEasingFunction=b.quintEaseInOut;break;case 16:G._computedEasingFunction=b.quintEaseOut;break;case 17:G._computedEasingFunction=b.bounceEaseIn;break;case 18:G._computedEasingFunction=b.bounceEaseInOut;break;case 19:G._computedEasingFunction=b.bounceEaseOut;break;case 20:G._computedEasingFunction=b.elasticEaseIn;break;case 21:G._computedEasingFunction=b.elasticEaseInOut;break;case 22:G._computedEasingFunction=b.elasticEaseOut;break;case 23:G._computedEasingFunction=b.expoEaseIn;break;case 24:G._computedEasingFunction=b.expoEaseInOut;break;case 25:G._computedEasingFunction=b.expoEaseOut;break;case 26:G._computedEasingFunction=b.sineEaseIn;break;case 27:G._computedEasingFunction=b.sineEaseInOut;break;case 28:G._computedEasingFunction=b.sineEaseOut;break;case 29:var n=e.x1,t=e.y1,i=e.x2,s=e.y2;G._computedEasingFunction=b.custom,G._computedCustomEasing=$bind(a=Ra.get(n,t,i,s),a.ease);break;case 30:n=e.easing;G._computedEasingFunction=b.custom,G._computedCustomEasing=n}},G.ease=function(e,n){switch(b.k=n,e._hx_index){case 0:b.none();break;case 1:b.linear();break;case 2:b.backEaseIn();break;case 3:b.backEaseInOut();break;case 4:b.backEaseOut();break;case 5:b.quadEaseIn();break;case 6:b.quadEaseInOut();break;case 7:b.quadEaseOut();break;case 8:b.cubicEaseIn();break;case 9:b.cubicEaseInOut();break;case 10:b.cubicEaseOut();break;case 11:b.quartEaseIn();break;case 12:b.quartEaseInOut();break;case 13:b.quartEaseOut();break;case 14:b.quintEaseIn();break;case 15:b.quintEaseInOut();break;case 16:b.quintEaseOut();break;case 17:b.bounceEaseIn();break;case 18:b.bounceEaseInOut();break;case 19:b.bounceEaseOut();break;case 20:b.elasticEaseIn();break;case 21:b.elasticEaseInOut();break;case 22:b.elasticEaseOut();break;case 23:b.expoEaseIn();break;case 24:b.expoEaseInOut();break;case 25:b.expoEaseOut();break;case 26:b.sineEaseIn();break;case 27:b.sineEaseInOut();break;case 28:b.sineEaseOut();break;case 29:var t=e.x1,i=e.y1,s=e.x2,r=e.y2;b.customEasing=$bind(a=Ra.get(t,i,s,r),a.ease),b.custom(),b.customEasing=null;break;case 30:t=e.easing;b.customEasing=t,b.custom(),b.customEasing=null}return b.k},G.easingFunction=function(e){switch(e._hx_index){case 0:G._computedEasingFunction=b.none;break;case 1:G._computedEasingFunction=b.linear;break;case 2:G._computedEasingFunction=b.backEaseIn;break;case 3:G._computedEasingFunction=b.backEaseInOut;break;case 4:G._computedEasingFunction=b.backEaseOut;break;case 5:G._computedEasingFunction=b.quadEaseIn;break;case 6:G._computedEasingFunction=b.quadEaseInOut;break;case 7:G._computedEasingFunction=b.quadEaseOut;break;case 8:G._computedEasingFunction=b.cubicEaseIn;break;case 9:G._computedEasingFunction=b.cubicEaseInOut;break;case 10:G._computedEasingFunction=b.cubicEaseOut;break;case 11:G._computedEasingFunction=b.quartEaseIn;break;case 12:G._computedEasingFunction=b.quartEaseInOut;break;case 13:G._computedEasingFunction=b.quartEaseOut;break;case 14:G._computedEasingFunction=b.quintEaseIn;break;case 15:G._computedEasingFunction=b.quintEaseInOut;break;case 16:G._computedEasingFunction=b.quintEaseOut;break;case 17:G._computedEasingFunction=b.bounceEaseIn;break;case 18:G._computedEasingFunction=b.bounceEaseInOut;break;case 19:G._computedEasingFunction=b.bounceEaseOut;break;case 20:G._computedEasingFunction=b.elasticEaseIn;break;case 21:G._computedEasingFunction=b.elasticEaseInOut;break;case 22:G._computedEasingFunction=b.elasticEaseOut;break;case 23:G._computedEasingFunction=b.expoEaseIn;break;case 24:G._computedEasingFunction=b.expoEaseInOut;break;case 25:G._computedEasingFunction=b.expoEaseOut;break;case 26:G._computedEasingFunction=b.sineEaseIn;break;case 27:G._computedEasingFunction=b.sineEaseInOut;break;case 28:G._computedEasingFunction=b.sineEaseOut;break;case 29:var n=e.x1,t=e.y1,i=e.x2,s=e.y2;G._computedEasingFunction=b.custom,G._computedCustomEasing=$bind(a=Ra.get(n,t,i,s),a.ease);break;case 30:n=e.easing;G._computedEasingFunction=b.custom,G._computedCustomEasing=n}var r=G._computedEasingFunction,l=G._computedCustomEasing;return function(e){return b.k=e,b.customEasing=l,r(),b.customEasing=null,b.k}},G.__super__=h,G.prototype=$extend(h.prototype,{emitUpdate:function(e,n){this.willEmitUpdate(e,n);var t=0;if(null!=this.__cbOnUpdate&&(t+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(t+=this.__cbOnceUpdate.length),0<t){var i=w.pool(t),s=i.get(),r=0;if(null!=this.__cbOnUpdate)for(var l=0,a=this.__cbOnUpdate.length;l<a;){var h=l++;!0?(s.vector[r]=this.__cbOnUpdate[h],++r):--t}if(null!=this.__cbOnceUpdate){for(var c=null,o=null,l=0,a=this.__cbOnceUpdate.length;l<a;){var u,h=l++;!0?(s.vector[r]=this.__cbOnceUpdate[h],this.__cbOnceUpdate[h]=null,u=this.__cbOnceOwnerUnbindUpdate[h],(this.__cbOnceOwnerUnbindUpdate[h]=null)!=u&&u(),++r):(--t,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindUpdate[h]),o.push(this.__cbOnceUpdate[h]))}this.__cbOnceOwnerUnbindUpdate=c,this.__cbOnceUpdate=o}for(l=0,a=t;l<a;){r=l++;(0,s.vector[r])(e,n)}i.release(s)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event update because owner is destroyed!");var s=function(e){null!=t&&(i.offUpdate(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(r=this.__cbOnOwnerUnbindUpdate[n])&&r(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindUpdate[n])&&r(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindUpdate[s])&&r()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindUpdate[s])&&r()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},emitComplete:function(){var e=0;if(null!=this.__cbOnComplete&&(e+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(e+=this.__cbOnceComplete.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnComplete)for(var s=0,r=this.__cbOnComplete.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnComplete[l],++i):--e}if(null!=this.__cbOnceComplete){for(var a=null,h=null,s=0,r=this.__cbOnceComplete.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceComplete[l],this.__cbOnceComplete[l]=null,c=this.__cbOnceOwnerUnbindComplete[l],(this.__cbOnceOwnerUnbindComplete[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindComplete[l]),h.push(this.__cbOnceComplete[l]))}this.__cbOnceOwnerUnbindComplete=a,this.__cbOnceComplete=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event complete because owner is destroyed!");var s=function(e){null!=t&&(i.offComplete(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(t)},onceComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event complete because owner is destroyed!");var s=function(e){null!=t&&(i.offComplete(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(t)},offComplete:function(e){if(null!=e){var n;null!=this.__cbOnComplete&&-1!=(n=this.__cbOnComplete.indexOf(e))&&(this.__cbOnComplete.splice(n,1),null!=(r=this.__cbOnOwnerUnbindComplete[n])&&r(),this.__cbOnOwnerUnbindComplete.splice(n,1)),null!=this.__cbOnceComplete&&-1!=(n=this.__cbOnceComplete.indexOf(e))&&(this.__cbOnceComplete.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindComplete[n])&&r(),this.__cbOnceOwnerUnbindComplete.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindComplete[s])&&r()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindComplete[s])&&r()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&0<this.__cbOnComplete.length||null!=this.__cbOnceComplete&&0<this.__cbOnceComplete.length},init:function(){if(this.duration<=0)ae.app._onceImmediate($bind(this,this.immediateComplete));else{var e=this.easing;switch(e._hx_index){case 0:G._computedEasingFunction=b.none;break;case 1:G._computedEasingFunction=b.linear;break;case 2:G._computedEasingFunction=b.backEaseIn;break;case 3:G._computedEasingFunction=b.backEaseInOut;break;case 4:G._computedEasingFunction=b.backEaseOut;break;case 5:G._computedEasingFunction=b.quadEaseIn;break;case 6:G._computedEasingFunction=b.quadEaseInOut;break;case 7:G._computedEasingFunction=b.quadEaseOut;break;case 8:G._computedEasingFunction=b.cubicEaseIn;break;case 9:G._computedEasingFunction=b.cubicEaseInOut;break;case 10:G._computedEasingFunction=b.cubicEaseOut;break;case 11:G._computedEasingFunction=b.quartEaseIn;break;case 12:G._computedEasingFunction=b.quartEaseInOut;break;case 13:G._computedEasingFunction=b.quartEaseOut;break;case 14:G._computedEasingFunction=b.quintEaseIn;break;case 15:G._computedEasingFunction=b.quintEaseInOut;break;case 16:G._computedEasingFunction=b.quintEaseOut;break;case 17:G._computedEasingFunction=b.bounceEaseIn;break;case 18:G._computedEasingFunction=b.bounceEaseInOut;break;case 19:G._computedEasingFunction=b.bounceEaseOut;break;case 20:G._computedEasingFunction=b.elasticEaseIn;break;case 21:G._computedEasingFunction=b.elasticEaseInOut;break;case 22:G._computedEasingFunction=b.elasticEaseOut;break;case 23:G._computedEasingFunction=b.expoEaseIn;break;case 24:G._computedEasingFunction=b.expoEaseInOut;break;case 25:G._computedEasingFunction=b.expoEaseOut;break;case 26:G._computedEasingFunction=b.sineEaseIn;break;case 27:G._computedEasingFunction=b.sineEaseInOut;break;case 28:G._computedEasingFunction=b.sineEaseOut;break;case 29:var n=e.x1,t=e.y1,i=e.x2,s=e.y2;G._computedEasingFunction=b.custom,G._computedCustomEasing=$bind(a=Ra.get(n,t,i,s),a.ease);break;case 30:n=e.easing;G._computedEasingFunction=b.custom,G._computedCustomEasing=n}this.computedEasing=G._computedEasingFunction,this.customEasing=G._computedCustomEasing,G._computedEasingFunction=null,G._computedCustomEasing=null,G._tweens.push(this),this.remaining=this.duration,ae.app._onceImmediate($bind(this,this.immediateStart))}},updateFromTick:function(e){0<=this._lifecycleState&&(this.didTickThisFrame=!0,null!=this.owner&&this.owner._lifecycleState<0?this.destroy():(this.remaining-=e,this.remaining<=0?(this.emitUpdate(this.toValue,this.duration),this.emitComplete(),this.destroy()):(e=this.duration-this.remaining,b.k=e/this.duration,b.k,b.customEasing=this.customEasing,null!=this.computedEasing&&this.computedEasing(),b.customEasing=null,this.emitUpdate(this.fromValue+(this.toValue-this.fromValue)*b.k,e))))},willEmitUpdate:function(e,n){this.value=e,this.time=n},immediateComplete:function(){this.emitUpdate(this.toValue,0),this.emitComplete(),this.destroy()},immediateStart:function(){var e;this.didCallImmediateStart||(this.didCallImmediateStart=!0,this.didTickThisFrame)||(this.eager?(e=ae.app.delta,0<=this._lifecycleState&&(this.didTickThisFrame=!0,null!=this.owner&&this.owner._lifecycleState<0?this.destroy():(this.remaining-=e,this.remaining<=0?(this.emitUpdate(this.toValue,this.duration),this.emitComplete(),this.destroy()):(e=this.duration-this.remaining,b.k=e/this.duration,b.k,b.customEasing=this.customEasing,null!=this.computedEasing&&this.computedEasing(),b.customEasing=null,this.emitUpdate(this.fromValue+(this.toValue-this.fromValue)*b.k,e))))):this.emitUpdate(this.fromValue,0))},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this.easing=null,this.owner=null,this.computedEasing=null,this.customEasing=null,le.remove(G._tweens,this),this._lifecycleState=-1,h.prototype.destroy.call(this))},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offUpdate(),this.offComplete()},__class__:G}),function(){}),C=((x["ceramic._Tween.TweenEasingFunction"]=b).__name__="ceramic._Tween.TweenEasingFunction",b.custom=function(){null!=b.customEasing&&(b.k=b.customEasing(b.k))},b.none=function(){b.k=1<=b.k?1:0},b.linear=function(){},b.backEaseIn=function(){b.k=b.k*b.k*(2.70158*b.k-1.70158)},b.backEaseInOut=function(){var e=1.70158,n=b;(n.k*=2)<1?b.k=b.k*b.k*((1+(e*=1.525))*b.k-e)*.5:(n=b).k=.5*((n.k-=2)*b.k*((1+(e*=1.525))*b.k+e)+2)},b.backEaseOut=function(){b.k=(b.k=b.k-1)*b.k*(2.70158*b.k+1.70158)+1},b.quadEaseIn=function(){b.k*=b.k},b.quadEaseInOut=function(){(b.k*=2)<1?b.k=.5*b.k*b.k:b.k=-.5*((b.k-1)*(b.k-3)-1)},b.quadEaseOut=function(){b.k=-b.k*(b.k-2)},b.cubicEaseIn=function(){b.k=b.k*b.k*b.k},b.cubicEaseInOut=function(){var e;e=(b.k/=.5)<1?.5*b.k*b.k*b.k:.5*((b.k-=2)*b.k*b.k+2),b.k=e},b.cubicEaseOut=function(){b.k=(b.k-1)*(b.k-1)*(b.k-1)+1},b.quartEaseIn=function(){b.k=b.k*b.k*b.k*b.k},b.quartEaseInOut=function(){var e=b;(e.k*=2)<1?b.k=.5*b.k*b.k*b.k*b.k:(e=b).k=-.5*((e.k-=2)*b.k*b.k*b.k-2)},b.quartEaseOut=function(){b.k=-((b.k-1)*(b.k-1)*(b.k-1)*(b.k-1)-1)},b.quintEaseIn=function(){b.k=b.k*b.k*b.k*b.k*b.k},b.quintEaseInOut=function(){var e=b;(e.k*=2)<1?b.k=.5*b.k*b.k*b.k*b.k*b.k:(e=b).k=.5*((e.k-=2)*b.k*b.k*b.k*b.k+2)},b.quintEaseOut=function(){b.k=(b.k-1)*(b.k-1)*(b.k-1)*(b.k-1)*(b.k-1)+1},b.bounceEaseIn=function(){var e=1-b.k,e=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375;b.k=1-e},b.bounceEaseInOut=function(){var e,n;b.k<.5?(e=1-2*b.k,n=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,b.k=.5*(1-n)):(e=2*b.k-1,n=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,b.k=.5*n+.5)},b.bounceEaseOut=function(){var e=b.k,e=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375;b.k=e},b._bounceEaseIn=function(e,n,t,i){e=i-e,i=(e/=i)<.36363636363636365?t*(7.5625*e*e):e<.7272727272727273?t*(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?t*(7.5625*(e-=.8181818181818182)*e+.9375):t*(7.5625*(e-=.9545454545454546)*e+.984375);return t-i+n},b._bounceEaseOut=function(e,n,t,i){i=(e/=i)<.36363636363636365?t*(7.5625*e*e)+n:e<.7272727272727273?t*(7.5625*(e-=.5454545454545454)*e+.75)+n:e<.9090909090909091?t*(7.5625*(e-=.8181818181818182)*e+.9375)+n:t*(7.5625*(e-=.9545454545454546)*e+.984375)+n;return i},b.elasticEaseIn=function(){var e,n;0!=b.k&&1!=b.k&&(n=(e=.1)<1?(e=1,.1):.4/(2*Math.PI)*Math.asin(1/e),b.k=-(e*Math.exp(6.931471805599453*--b.k)*Math.sin((b.k-n)*(2*Math.PI)/.4)))},b.elasticEaseInOut=function(){var e,n,t;0!=b.k&&(2==((t=b).k*=2)?b.k=1:(n=(e=.44999999999999996)/4,b.k<1?(t=b).k=Math.exp(6.931471805599453*--t.k)*Math.sin((b.k-n)*(2*Math.PI)/e)*-.5:(t=b).k=Math.exp(-6.931471805599453*--t.k)*Math.sin((b.k-n)*(2*Math.PI)/e)*.5+1))},b.elasticEaseOut=function(){var e,n;0!=b.k&&1!=b.k&&(n=(e=.1)<1?(e=1,.1):.4/(2*Math.PI)*Math.asin(1/e),b.k=e*Math.exp(-6.931471805599453*b.k)*Math.sin((b.k-n)*(2*Math.PI)/.4)+1)},b.expoEaseIn=function(){b.k=0==b.k?0:Math.exp(6.931471805599453*(b.k-1))},b.expoEaseInOut=function(){0!=b.k&&1!=b.k&&((b.k/=.5)<1?b.k=.5*Math.exp(6.931471805599453*(b.k-1)):b.k=.5*(2-Math.exp(-6.931471805599453*--b.k)))},b.expoEaseOut=function(){b.k=1==b.k?1:1-Math.exp(-6.931471805599453*b.k)},b.sineEaseIn=function(){b.k=1-Math.cos(b.k*(Math.PI/2))},b.sineEaseInOut=function(){b.k=-(Math.cos(Math.PI*b.k)-1)/2},b.sineEaseOut=function(){b.k=Math.sin(b.k*(Math.PI/2))},function(){}),ft=((x["ceramic.Utils"]=C).__name__="ceramic.Utils",C.realPath=function(e){return e=An.isAbsolute(e)||z.startsWith(e,"http://")||z.startsWith(e,"https://")?e:An.join([ae.app.settings.assetsPath,e])},C.getRtti=function(e){return Rn.getRtti(e)},C.uniqueId=function(){switch(C._nextUniqueIntCursor){case 0:C._nextUniqueInt0=(C._nextUniqueInt0+1)%2147483647;break;case 1:C._nextUniqueInt1=(C._nextUniqueInt1+1)%2147483647;break;case 2:C._nextUniqueInt2=(C._nextUniqueInt2+1)%2147483647;break;case 3:C._nextUniqueInt3=(C._nextUniqueInt3+1)%2147483647}C._nextUniqueIntCursor=(C._nextUniqueIntCursor+1)%4;var e,n=C._nextUniqueInt0,t=(n=null==n?2147483646*Math.random()|0:n)%62|0,i=n/62|0;e=0<i?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(s=0<(i=n/62|0)?(r=C.base62Id(i))+(l=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(r=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(r)))+(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(s));var s,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;s=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(r=0<(i=n/62|0)?(l=C.base62Id(i))+(a=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(l=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(l)))+(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(r));var r,t=(n=null==(n=C._nextUniqueInt1)?2147483646*Math.random()|0:n)%62|0;r=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(l=0<(i=n/62|0)?(a=C.base62Id(i))+(h=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(a=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(a)))+(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(l));var l,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;l=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(a=0<(i=n/62|0)?(h=C.base62Id(i))+(c=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(h=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(h)))+(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(a));var a,t=(n=null==(n=C._nextUniqueInt2)?2147483646*Math.random()|0:n)%62|0;a=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(h=0<(i=n/62|0)?(c=C.base62Id(i))+(d=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(c=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(c)))+(c=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(h));var h,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;h=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(c=0<(i=n/62|0)?(d=C.base62Id(i))+(u=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(d=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(d)))+(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(c=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(c));var c,o,u,_,d,t=(n=null==(n=C._nextUniqueInt3)?2147483646*Math.random()|0:n)%62|0;return d=e+"-"+s+"-"+r+"-"+l+"-"+a+"-"+h+"-"+(c=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(d=0<(i=n/62|0)?(u=C.base62Id(i))+(9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(u=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(u)))+(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(d)))},C.randomId=function(e){null==e&&(e=32);for(var n=[];n.length<e;)for(var t,i,s=null,r=(s=null==s?2147483646*Math.random()|0:s)%62|0,s=s/62|0,l=0,a=(t=0<s?(i=(s=null==(s=s)?2147483646*Math.random()|0:s)%62|0,(0<(s=s/62|0)?C.base62Id(s)+(9<i?(90<(s=i-10+65)&&(s+=6),String.fromCodePoint(s)):L.string(i).charAt(0)):(s=9<i?(90<(s=i-10+65)&&(s+=6),String.fromCodePoint(s)):L.string(i).charAt(0),L.string(s)))+(9<r?(90<(i=r-10+65)&&(i+=6),String.fromCodePoint(i)):L.string(r).charAt(0))):(i=9<r?(90<(s=r-10+65)&&(s+=6),String.fromCodePoint(s)):L.string(r).charAt(0),L.string(i))).length;l<a;){var h=l++;n.push(t.charAt(h))}return $e.shuffle(n),le.substr(n.join(""),0,e)},C.persistentId=function(e,n){null==n&&(n=32),null==e&&(e=0),null==C._persistentIds&&(C._persistentIds=new ei);var t=C._persistentIds.h[e];if(null==t){if(null!=(t=ae.app.backend.io.readString("persistentId_"+e)))return C._persistentIds.h[e]=t;t=C.randomId(n),ae.app.backend.io.saveString("persistentId_"+e,t)||ae.app.logger.warning("Failed to save persistent id ("+t+") at slot "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Utils.hx",lineNumber:167,className:"ceramic.Utils",methodName:"persistentId"}),C._persistentIds.h[e]=t}return t},C.resetPersistentId=function(e){null==e&&(e=0),null!=C._persistentIds&&C._persistentIds.remove(e),ae.app.backend.io.saveString("persistentId_"+e,null)},C.base62Id=function(e){var n,t,i=(e=null==e?2147483646*Math.random()|0:e)%62|0,e=e/62|0;return 0<e?(n=C.base62Id(e))+(9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0)):(n=9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0),L.string(n))},C.println=function(e){var n=null;null!=(n=W.electronRunner)?n.consoleLog("[error] "+e):console.log(""+e)},C.printStackTrace=function(e){null==e&&(e=!1);var n="",t=null,i=null;try{throw new Error}catch(e){i=e}for(var s=(""+L.string(i.stack)).split("\n"),r=s.length-1,l=-1!=navigator.platform.indexOf("Win"),t=W.electronRunner;2<=r;){var a=s[r],a=z.ltrim(a);null!=t&&(a=z.replace(a,"http://localhost:"+L.string(t.serverPort)+"/file:"+(l?"/":""),""),a=z.replace(a,"http://localhost:"+L.string(t.serverPort)+"/",L.string(t.appFiles)+"/"));e||(null!=t?t.consoleLog("[error] "+L.string(a)):console.log(""+L.string(a))),n=(n+=L.string(a))+String.fromCodePoint(10),--r}return n},C.stackItemToString=function(e){var n=window.sourceMapSupport,t="";switch(e._hx_index){case 0:t="a C function";break;case 1:var i=e.m,s=!1;C.RE_MODULE_AT.match(i)&&(r=C.RE_MODULE_AT.matched(1),l=C.RE_MODULE_AT.matched(2),a=C.RE_MODULE_AT.matched(3),t=r,null!=l&&(t+=":"+l),s=!0),s||(t="module "+i);break;case 2:var s=e.s,r=e.file,l=e.line,a=e.column;if(null!=n&&!z.endsWith(r,".hx"))try{var h={source:r,line:l,column:a},c=n.mapSourcePosition(h);null!=c&&(r=c.source,l=c.line,a=c.column)}catch(e){jt.lastError=e}null!=s&&(t=C.stackItemToString(s)+" ("),t=(t+=r)+" line "+l,null!=s&&(t+=")");break;case 3:t=(t+=e.classname)+"."+e.method;break;case 4:t=t+"local function #"+e.v}return t},C.radToDeg=function(e){return 57.29577951308232*e},C.degToRad=function(e){return.017453292519943295*e},C.round=function(e,n){if(0<(n=null==n?0:n)){for(var t=1;0<n--;)t*=10;return Math.round(e*t)/t}return Math.round(e)},C.hashCode=function(e){var n=0;if(0!=e.length)for(var t=0,i=e.length;t<i;){var s=t++,n=(n<<5)-n+le.cca(e,s);n&=n}return n},C.uniformFrequencyList=function(e,n,t){for(var i=[],s=[],r=0,l=e.length;r<l;)s[u=r++]=0;for(r=0,l=n.length;r<l;)s[u=r++]+=n[u];for(r=0,l=t;r<l;){r++;for(var a=0,h=0,c=0,o=e.length;c<o;){var u,_=s[u=c++];h<_&&(a=u,h=_)}i.push(e[a]),--s[a];for(var d=0,b=n.length;d<b;){var p=d++;s[p]+=n[p]}}return i},C.upperCaseToCamelCase=function(e,n){for(var t="",i=e.length,s=0,r=n=null==n?!0:n;s<i;){var l=e.charAt(s);"_"==l?r=!0:r?(r=!1,t+=L.string(l.toUpperCase())):t+=L.string(l.toLowerCase()),++s}return t},C.camelCaseToUpperCase=function(e,n){null==n&&(n=!0);for(var t="",i=e.length,s=0,r=!1;s<i;){var l,a=e.charAt(s),r="."!=a&&C.RE_ASCII_CHAR.match(a)?(l=a.toUpperCase(),a=a==l,r&&a&&(t+="_",r=!1),t+=null==l?"null":""+l,!a):(t+="_",!1);++s}for(var h=t;z.endsWith(h,"_");)h=le.substr(h,0,h.length-1);return h},C.functionEquals=function(e,n){return e==n},C.decodeUriParams=function(e){for(var n=new te,t=e.split("&"),i=0;i<t.length;){var s,r=t[i],l=(++i,r.indexOf("="));-1!=l&&(s=r.substring(0,l),s=decodeURIComponent(s.split("+").join(" ")),r=r.substring(l+1),l=decodeURIComponent(r.split("+").join(" ")),n.h[s]=l)}return n},C.sinRatio=function(e){return 1<=e&&(e%=1),.5*(Math.sin(e*Math.PI*2)+1)},C.cosRatio=function(e){return 1<=e&&(e%=1),.5*(Math.cos(e*Math.PI*2)+1)},C.valueFromInterpolatedKey=function(e,n,t){var i=e.length-1,s=0;if(t<e[0])s=n[0];else if(t>=e[i])s=n[i];else{for(var r=0,l=1;t>e[l];)++r,++l;i=(t-e[r])/(e[l]-e[r]),s=n[r]+(n[l]-n[r])*i}return s},C.yFromInterpolatedX=function(e,n){var t=e.length-2,i=0;if(n<e[0])i=e[1];else if(n>=e[t])i=e[1+t];else{for(var s=0,r=2;n>e[r];)s+=2,r+=2;var t=(n-e[s])/(e[r]-e[s]),l=s+1;i=e[l]+(e[r+1]-e[l])*t}return i},C.command=function(e,n,t,i){null==n&&(n=[]),i(-1,null,null)},C.replaceIdentifier=function(e,n,i){e=z.replace(e,"\n"," \n "),e=" "+(e=z.replace(e,"\r"," \r "))+" ";var s="(\\s|[^a-zA-Z0-9_])",n=new RegExp(s+n.replace(t.escapeRe,"\\$&")+s,"g".split("u").join("")),s="$1"+z.replace(i,"$","$$")+"$2";return e=(e=e.replace(n,s)).substring(1,e.length-1),e=z.replace(e," \r ","\r"),e=z.replace(e," \n ","\n")},C.imageTypeFromBytes=function(e){return 255==e.b[0]&&216==e.b[1]&&255==e.b[2]?"jpeg":137==e.b[0]&&80==e.b[1]&&78==e.b[2]&&71==e.b[3]&&13==e.b[4]&&10==e.b[5]&&26==e.b[6]&&10==e.b[7]?"png":null},C.lerp=function(e,n,t){return e+(n-e)*t},C.isIos=function(){var e;return-1==C.isIos_result&&(C.isIos_result=0,e=null!=re.navigator?re.navigator.userAgent:"",!!window.MSStream||-1==e.indexOf("iPhone")&&-1==e.indexOf("iPad")&&-1==e.indexOf("iPod")||(C.isIos_result=1)),0!=C.isIos_result},C.isAndroid=function(){return-1==C.isAndroid_result&&(C.isAndroid_result=0,-1!=(null!=re.navigator?re.navigator.userAgent:"").toLowerCase().indexOf("android"))&&(C.isAndroid_result=1),0!=C.isAndroid_result},C.sign=function(e){return 0<=e?1:-1},function(e){this.completionCallback=e,this.pending=0,this.complete=!1}),Ot=((x["ceramic.WaitCallbacks"]=ft).__name__="ceramic.WaitCallbacks",ft.prototype={callback:function(){var e=this;if(this.complete)throw Y.thrown("Cannot register new callbacks after completion");this.pending++;var n=!1;return function(){n||(n=!0,e.pending--,0!=e.pending)||e.complete||(e.complete=!0,e.completionCallback())}},__class__:ft},function(e){null==e&&(e=1),this.chokidarWatchers=null,this.chokidarUpdatedFilesByWatchedDirectory=null,this.startingToWatchDirectories=null,this.watchedDirectories=null,h.call(this),Ot.didTryRequireChokidar||(Ot.didTryRequireChokidar=!0,Ot.fs=Rn.nodeRequire("fs"),null!=Ot.fs&&(Ot.chokidar=Rn.nodeRequire("chokidar"))),this.updateInterval=e,ut.schedule(this,e,$bind(this,this.tick),e)}),J=((x["ceramic.WatchDirectory"]=Ot).__name__="ceramic.WatchDirectory",Ot.__super__=h,Ot.prototype=$extend(h.prototype,{emitDirectoryChange:function(e,n,t){var i=0;if(null!=this.__cbOnDirectoryChange&&(i+=this.__cbOnDirectoryChange.length),null!=this.__cbOnceDirectoryChange&&(i+=this.__cbOnceDirectoryChange.length),0<i){var s=w.pool(i),r=s.get(),l=0;if(null!=this.__cbOnDirectoryChange)for(var a=0,h=this.__cbOnDirectoryChange.length;a<h;){var c=a++;!0?(r.vector[l]=this.__cbOnDirectoryChange[c],++l):--i}if(null!=this.__cbOnceDirectoryChange){for(var o=null,u=null,a=0,h=this.__cbOnceDirectoryChange.length;a<h;){var _,c=a++;!0?(r.vector[l]=this.__cbOnceDirectoryChange[c],this.__cbOnceDirectoryChange[c]=null,_=this.__cbOnceOwnerUnbindDirectoryChange[c],(this.__cbOnceOwnerUnbindDirectoryChange[c]=null)!=_&&_(),++l):(--i,null==o&&(o=[],u=[],0),o.push(this.__cbOnceOwnerUnbindDirectoryChange[c]),u.push(this.__cbOnceDirectoryChange[c]))}this.__cbOnceOwnerUnbindDirectoryChange=o,this.__cbOnceDirectoryChange=u}for(a=0,h=i;a<h;){l=a++;(0,r.vector[l])(e,n,t)}s.release(r)}},onDirectoryChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event directoryChange because owner is destroyed!");var s=function(e){null!=t&&(i.offDirectoryChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindDirectoryChange&&(this.__cbOnOwnerUnbindDirectoryChange=[]),this.__cbOnOwnerUnbindDirectoryChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindDirectoryChange&&(this.__cbOnOwnerUnbindDirectoryChange=[]),this.__cbOnOwnerUnbindDirectoryChange.push(null);null==this.__cbOnDirectoryChange&&(this.__cbOnDirectoryChange=[]),this.__cbOnDirectoryChange.push(t)},onceDirectoryChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event directoryChange because owner is destroyed!");var s=function(e){null!=t&&(i.offDirectoryChange(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindDirectoryChange&&(this.__cbOnceOwnerUnbindDirectoryChange=[]),this.__cbOnceOwnerUnbindDirectoryChange.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindDirectoryChange&&(this.__cbOnceOwnerUnbindDirectoryChange=[]),this.__cbOnceOwnerUnbindDirectoryChange.push(null);null==this.__cbOnceDirectoryChange&&(this.__cbOnceDirectoryChange=[]),this.__cbOnceDirectoryChange.push(t)},offDirectoryChange:function(e){if(null!=e){var n;null!=this.__cbOnDirectoryChange&&-1!=(n=this.__cbOnDirectoryChange.indexOf(e))&&(this.__cbOnDirectoryChange.splice(n,1),null!=(r=this.__cbOnOwnerUnbindDirectoryChange[n])&&r(),this.__cbOnOwnerUnbindDirectoryChange.splice(n,1)),null!=this.__cbOnceDirectoryChange&&-1!=(n=this.__cbOnceDirectoryChange.indexOf(e))&&(this.__cbOnceDirectoryChange.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindDirectoryChange[n])&&r(),this.__cbOnceOwnerUnbindDirectoryChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDirectoryChange){for(var t=0,i=this.__cbOnOwnerUnbindDirectoryChange.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindDirectoryChange[s])&&r()}this.__cbOnOwnerUnbindDirectoryChange=null}if(null!=this.__cbOnceOwnerUnbindDirectoryChange){for(t=0,i=this.__cbOnceOwnerUnbindDirectoryChange.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindDirectoryChange[s])&&r()}this.__cbOnceOwnerUnbindDirectoryChange=null}this.__cbOnDirectoryChange=null,this.__cbOnceDirectoryChange=null}},listensDirectoryChange:function(){return null!=this.__cbOnDirectoryChange&&0<this.__cbOnDirectoryChange.length||null!=this.__cbOnceDirectoryChange&&0<this.__cbOnceDirectoryChange.length},watchDirectory:function(t){var i=this;null==this.watchedDirectories&&(this.watchedDirectories=new te),null==this.startingToWatchDirectories&&(this.startingToWatchDirectories=new te),this.startingToWatchDirectories.h[t]=!0,Nn.runInBackground(function(){var n=i.computeFilesModificationTime(t);Nn.runInMain(function(){var e;Object.prototype.hasOwnProperty.call(i.startingToWatchDirectories.h,t)&&(e=i.startingToWatchDirectories,Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t],i.watchedDirectories.h[t]=n,null!=Ot.chokidar)&&(null==i.chokidarUpdatedFilesByWatchedDirectory&&(i.chokidarUpdatedFilesByWatchedDirectory=new te),i.chokidarUpdatedFilesByWatchedDirectory.h[t]=[],i.watchWithChokidar(t))})})},watchWithChokidar:function(t){var i=this,e=Ot.chokidar.watch(".",{ignoreInitial:!0,disableGlobbing:!0,cwd:t});null==this.chokidarWatchers&&(this.chokidarWatchers=new te),Object.prototype.hasOwnProperty.call(this.chokidarWatchers.h,t)&&this.chokidarWatchers.h[t].close(),(this.chokidarWatchers.h[t]=e).on("add",function(e){var n=Ot.fs.statSync(An.join([t,e]));n.isDirectory()||i.chokidarUpdatedFilesByWatchedDirectory.h[t].push({status:0,lastModified:n.mtime.getTime()/1e3,name:e})}),e.on("change",function(e){var n=Ot.fs.statSync(An.join([t,e]));n.isDirectory()||i.chokidarUpdatedFilesByWatchedDirectory.h[t].push({status:1,lastModified:n.mtime.getTime()/1e3,name:e})}),e.on("unlink",function(e){i.chokidarUpdatedFilesByWatchedDirectory.h[t].push({status:2,lastModified:-1,name:e})})},stopWatchingDirectory:function(e){var n;return null!=this.chokidarWatchers&&Object.prototype.hasOwnProperty.call(this.chokidarWatchers.h,e)&&(this.chokidarWatchers.h[e].close(),n=this.chokidarWatchers,Object.prototype.hasOwnProperty.call(n.h,e))&&delete n.h[e],null==this.watchedDirectories&&Object.prototype.hasOwnProperty.call(this.watchedDirectories.h,e)?(n=this.watchedDirectories,Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e],null!=this.startingToWatchDirectories&&Object.prototype.hasOwnProperty.call(this.startingToWatchDirectories.h,e)&&(n=this.startingToWatchDirectories,Object.prototype.hasOwnProperty.call(n.h,e))&&delete n.h[e],!0):!(null==this.startingToWatchDirectories||!Object.prototype.hasOwnProperty.call(this.startingToWatchDirectories.h,e)||(n=this.startingToWatchDirectories,Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e],0))},tick:function(){if(null!=this.watchedDirectories){for(var e=[],n=this.watchedDirectories.h,t=Object.keys(n),i=t.length,s=0;s<i;){var r=t[s++];e.push(r)}for(var l=0;l<e.length;){r=e[l];++l,this.checkWatchedDirectory(r)}}},checkWatchedDirectory:function(o){var u=this;if(null!=Ot.chokidar){if(Object.prototype.hasOwnProperty.call(this.chokidarUpdatedFilesByWatchedDirectory.h,o)){var e=this.chokidarUpdatedFilesByWatchedDirectory.h[o];if(0<e.length){for(var _=this.watchedDirectories.h[o],n=new te,t=_.h,i=t,s=Object.keys(t),r=s.length,l=0;l<r;){var a=i[d=s[l++]];n.h[d]=a}for(var h=0;h<e.length;){var c=e[h];switch(++h,c.status){case 0:case 1:n.h[c.name]=c.lastModified;break;case 2:var d=c.name;Object.prototype.hasOwnProperty.call(n.h,d)&&delete n.h[d]}}Object.prototype.hasOwnProperty.call(this.watchedDirectories.h,o)&&(this.watchedDirectories.h[o]=n,this.emitDirectoryChange(o,n,_)),e.splice(0,e.length)}}}else{_=this.watchedDirectories.h[o];Nn.runInBackground(function(){for(var e=u.computeFilesModificationTime(o),n=!1,t=e.h,i=t,s=Object.keys(t),r=s.length,l=0;l<r;){var a=c=s[l++],h=i[c];if(!Object.prototype.hasOwnProperty.call(_.h,a)){n=!0;break}if(h!=_.h[a]){n=!0;break}}if(!n)for(i=t=_.h,r=(s=Object.keys(t)).length,l=0;l<r;){var c,a=c=s[l++],h=i[c];if(!Object.prototype.hasOwnProperty.call(e.h,a)){n=!0;break}}n&&Nn.runInMain(function(){Object.prototype.hasOwnProperty.call(u.watchedDirectories.h,o)&&(u.watchedDirectories.h[o]=e,u.emitDirectoryChange(o,e,_))})})}},computeFilesModificationTime:function(e){for(var n=new te,t=0,i=Je.getFlatDirectory(e);t<i.length;){var s=i[t],r=(++t,Je.getLastModified(An.join([e,s])));n.h[s]=r}return n},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offDirectoryChange()},__class__:Ot}),(x["ceramic.macros.DefinesMacro"]=E1).__name__="ceramic.macros.DefinesMacro",E1._stringToBool=function(e){return null!=e&&("true"==(e=e.toLowerCase())||"1"==e)},(x["ceramic.macros.EnumAbstractMacro"]=F1).__name__="ceramic.macros.EnumAbstractMacro",(x["ceramic.macros.PluginsMacro"]=G1).__name__="ceramic.macros.PluginsMacro",(x["clay.BackgroundQueue"]=H1).__name__="clay.BackgroundQueue",H1.prototype={schedule:function(e){ae.app._onceImmediate(e)},destroy:function(){this.stop=!0},__class__:H1},function(e,n){this.windowInBackground=!1,this.ready=!1,this.freeze=!1,this.nextTick=0,this.immediateShutdown=!1,this.timestamp=-1,this.hasShutdown=!1,this.shuttingDown=!1,J.app=this,Ct.init(),this.extractAppId(),this.config=this.defaultConfig(),e(this.config),this.events=n,this.io=new Ht(this),yt.flush(),this.assets=new Lt(this),yt.flush(),this.audio=new Wt(this),yt.flush(),this.input=new Ut(this),yt.flush(),this.runtime=new Vt(this),yt.flush(),J._graphics=new kt,yt.flush(),this.backgroundQueue=new H1,this.init()}),gt=((x["clay.Clay"]=J).__name__="clay.Clay",J.prototype={get_graphics:function(){return J._graphics},set_graphics:function(e){return J._graphics=e},set_freeze:function(e){return(this.freeze=e)?(this.events.freeze(),this.audio.suspend()):(this.events.unfreeze(),this.audio.resume()),e},init:function(){E.debug("Clay / init",{fileName:"clay/Clay.hx",lineNumber:178,className:"clay.Clay",methodName:"init"}),this.io.init(),yt.flush(),this.audio.init(),yt.flush(),this.input.init(),yt.flush(),this.runtime.init(),yt.flush(),E.debug("Clay / ready",{fileName:"clay/Clay.hx",lineNumber:192,className:"clay.Clay",methodName:"init"}),this.runtime.ready(),yt.flush(),this.audio.ready(),yt.flush(),this.timestamp=window.performance.now()/1e3-Vt.timestampStart,this.ready=!0,this.nextTick=this.timestamp,this.updateScreen(),this.events.ready(),!this.runtime.run()||this.hasShutdown||this.shuttingDown||this.shutdown()},shutdown:function(){if(this.shuttingDown)E.debug("Clay / shutdown() called again, already shutting down - ignoring",{fileName:"clay/Clay.hx",lineNumber:217,className:"clay.Clay",methodName:"shutdown"});else{if(this.hasShutdown)throw Y.thrown("Clay / calling shutdown() more than once is disallowed");this.shuttingDown=!0,this.io.shutdown(),this.audio.shutdown(),this.input.shutdown(),this.runtime.shutdown(this.immediateShutdown),E.debug("Clay / shutdown",{fileName:"clay/Clay.hx",lineNumber:233,className:"clay.Clay",methodName:"shutdown"}),this.hasShutdown=!0}},emitQuit:function(){this.shutdown()},shouldUpdate:function(e){if(0<this.config.updateRate){if(e<this.nextTick)return!1;for(;this.nextTick<=e;)this.nextTick+=this.config.updateRate}else this.nextTick=e;return!0},emitTick:function(e){var n;this.freeze||(Ct.tick(),yt.flush(),this.updateScreen(),!this.shuttingDown&&this.ready&&(n=e-this.timestamp,this.timestamp=e,this.audio.tick(n),this.events.tick(n)))},emitRender:function(){this.freeze||!this.shuttingDown&&this.ready&&this.events.render()},emitWindowEvent:function(e,n,t,i,s){this.events.windowEvent(e,n,t,i,s)},emitAppEvent:function(e){this.events.appEvent(e)},extractAppId:function(){var e='"ceramic-demo"';z.startsWith(e,'"')?this.appId=JSON.parse(e):this.appId=e},defaultConfig:function(){var e=Vt.defaultConfig();return new vt(this.defaultWindowConfig(),this.defaultRenderConfig(),e,null)},defaultWindowConfig:function(){return new wt(!1,!1,!0,!1,536805376,536805376,960,640,"clay app",!1,.06666666666666667)},defaultRenderConfig:function(){return new gt(0,0,0,8,8,8,8,new St(0,0,0,1),null,new mt(1,null,null,null,null,null,null,null,null))},defaultRuntimeConfig:function(){return new Kt(null,null,null,null,null,null,null)},copyWindowConfig:function(e){return new wt(e.fullscreen,e.trueFullscreen,e.resizable,e.borderless,e.x,e.y,e.width,e.height,""+e.title,e.noInput,e.backgroundSleep)},copyRenderConfig:function(e){return new gt(e.depth,e.stencil,e.antialiasing,e.redBits,e.greenBits,e.blueBits,e.alphaBits,new St(e.defaultClear.r,e.defaultClear.g,e.defaultClear.b,e.defaultClear.a),null,new mt(e.webgl.version,null,null,null,null,null,null,null,null))},updateScreen:function(){this.screenDensity=J.app.runtime.windowDevicePixelRatio();var e=J.app.runtime,e=(this.screenWidth=Math.round(Math.round(e.windowW*e.windowDevicePixelRatio())/this.screenDensity),J.app.runtime);this.screenHeight=Math.round(Math.round(e.windowH*e.windowDevicePixelRatio())/this.screenDensity)},__class__:J,__properties__:{set_freeze:"set_freeze",set_graphics:"set_graphics",get_graphics:"get_graphics"}},function(e,n,t,i,s,r,l,a,h,c){this.webgl=null,this.vsync=!0,this.defaultClear=new St(0,0,0,1),this.alphaBits=8,this.blueBits=8,this.greenBits=8,this.redBits=8,this.antialiasing=0,this.stencil=0,this.depth=0,null!=e&&(this.depth=e),null!=n&&(this.stencil=n),null!=t&&(this.antialiasing=t),null!=i&&(this.redBits=i),null!=s&&(this.greenBits=s),null!=r&&(this.blueBits=r),null!=l&&(this.alphaBits=l),null!=a&&(this.defaultClear=a),null!=h&&(this.vsync=h),null!=c&&(this.webgl=c)}),mt=((x["clay.RenderConfig"]=gt).__name__="clay.RenderConfig",gt.prototype={__class__:gt},function(e,n,t,i,s,r,l,a,h){this.failIfMajorPerformanceCaveat=!1,this.preferLowPowerToHighPerformance=!1,this.preserveDrawingBuffer=!1,this.premultipliedAlpha=!1,this.antialias=!0,this.stencil=!1,this.depth=!0,this.alpha=!1,this.version=1,null!=e&&(this.version=e),null!=n&&(this.alpha=n),null!=t&&(this.depth=t),null!=i&&(this.stencil=i),null!=s&&(this.antialias=s),null!=r&&(this.premultipliedAlpha=r),null!=l&&(this.preserveDrawingBuffer=l),null!=a&&(this.preferLowPowerToHighPerformance=a),null!=h&&(this.failIfMajorPerformanceCaveat=h)}),wt=((x["clay.RenderConfigWebGL"]=mt).__name__="clay.RenderConfigWebGL",mt.prototype={__class__:mt},function(e,n,t,i,s,r,l,a,h,c,o){this.backgroundSleep=.06666666666666667,this.noInput=!1,this.title=null,this.height=640,this.width=960,this.y=0,this.x=0,this.borderless=!1,this.resizable=!0,this.trueFullscreen=!1,this.fullscreen=!1,null!=e&&(this.fullscreen=e),null!=n&&(this.trueFullscreen=n),null!=t&&(this.resizable=t),null!=i&&(this.borderless=i),null!=s&&(this.x=s),null!=r&&(this.y=r),null!=l&&(this.width=l),null!=a&&(this.height=a),null!=h&&(this.title=h),null!=c&&(this.noInput=c),null!=o&&(this.backgroundSleep=o)}),vt=((x["clay.WindowConfig"]=wt).__name__="clay.WindowConfig",wt.prototype={__class__:wt},function(e,n,t,i){this.updateRate=0,this.runtime=null,this.render=null,(this.window=null)!=e&&(this.window=e),null!=n&&(this.render=n),null!=t&&(this.runtime=t),null!=i&&(this.updateRate=i)}),yt=((x["clay.Config"]=vt).__name__="clay.Config",vt.prototype={__class__:vt},(x["clay.Extensions"]=N1).__name__="clay.Extensions",N1.unsafeGet=function(e,n){return e[n]},N1.unsafeSet=function(e,n,t){e[n]=t},(x["clay.Image"]=O1).__name__="clay.Image",O1.prototype={premultiplyAlpha:function(){4==this.bitsPerPixel?xt.premultiplyAlpha(this.pixels):E.warning("Can only premultiply alpha on images with 4 bits per pixels (RGBA)",{fileName:"clay/Image.hx",lineNumber:29,className:"clay.Image",methodName:"premultiplyAlpha"})},reversePremultiplyAlpha:function(){4==this.bitsPerPixel?xt.reversePremultiplyAlpha(this.pixels):E.warning("Can only reverse premultiply alpha on images with 4 bits per pixels (RGBA)",{fileName:"clay/Image.hx",lineNumber:40,className:"clay.Image",methodName:"reversePremultiplyAlpha"})},__class__:O1},function(){}),Ut=((x["clay.Immediate"]=yt).__name__="clay.Immediate",yt.push=function(e){if(null==e)throw Y.thrown("Immediate callback should not be null!");yt.immediateCallbacksLen<yt.immediateCallbacksCapacity?(yt.immediateCallbacks[yt.immediateCallbacksLen]=e,yt.immediateCallbacksLen++):(yt.immediateCallbacks[yt.immediateCallbacksLen++]=e,yt.immediateCallbacksCapacity++)},yt.flush=function(){for(var e=!1;0<yt.immediateCallbacksLen;){for(var e=!0,n=w.pool(yt.immediateCallbacksLen),t=n.get(),i=yt.immediateCallbacksLen,s=yt.immediateCallbacksLen=0,r=i;s<r;){var l=s++;t.vector[l]=yt.immediateCallbacks[l],yt.immediateCallbacks[l]=null}for(var a=0,h=i;a<h;){var c=a++;(0,t.vector[c])()}n.release(t)}return e},function(e){this.app=e,this.modState=new Dt,this.modState.none=!0}),T=((x["clay.Input"]=Ut).__name__="clay.Input",Ut.prototype={init:function(){},shutdown:function(){},emitKeyDown:function(e,n,t,i,s,r){this.app.events.keyDown(e,n,t,i,s,r)},emitKeyUp:function(e,n,t,i,s,r){this.app.events.keyUp(e,n,t,i,s,r)},emitText:function(e,n,t,i,s,r){this.app.events.text(e,n,t,i,s,r)},emitMouseMove:function(e,n,t,i,s,r){this.app.events.mouseMove(e,n,t,i,s,r)},emitMouseDown:function(e,n,t,i,s){this.app.events.mouseDown(e,n,t,i,s)},emitMouseUp:function(e,n,t,i,s){this.app.events.mouseUp(e,n,t,i,s)},emitMouseWheel:function(e,n,t,i){this.app.events.mouseWheel(e,n,t,i)},emitTouchDown:function(e,n,t,i,s,r){this.app.events.touchDown(e,n,t,i,s,r)},emitTouchUp:function(e,n,t,i,s,r){this.app.events.touchUp(e,n,t,i,s,r)},emitTouchMove:function(e,n,t,i,s,r){this.app.events.touchMove(e,n,t,i,s,r)},emitGamepadAxis:function(e,n,t,i){this.app.events.gamepadAxis(e,n,t,i)},emitGamepadDown:function(e,n,t,i){this.app.events.gamepadDown(e,n,t,i)},emitGamepadUp:function(e,n,t,i){this.app.events.gamepadUp(e,n,t,i)},emitGamepadGyro:function(e,n,t,i,s){this.app.events.gamepadGyro(e,n,t,i,s)},emitGamepadDevice:function(e,n,t,i){this.app.events.gamepadDevice(e,n,t,i)},__class__:Ut},{}),E=(T.$name=function(e){if(0!=(e&K.MASK))return K.$name(e&~K.MASK);switch(e){case 8:return K.$name(42);case 9:return K.$name(43);case 13:return K.$name(40);case 27:return K.$name(41);case 32:return K.$name(44);case 97:return K.$name(4);case 98:return K.$name(5);case 99:return K.$name(6);case 100:return K.$name(7);case 101:return K.$name(8);case 102:return K.$name(9);case 103:return K.$name(10);case 104:return K.$name(11);case 105:return K.$name(12);case 106:return K.$name(13);case 107:return K.$name(14);case 108:return K.$name(15);case 109:return K.$name(16);case 110:return K.$name(17);case 111:return K.$name(18);case 112:return K.$name(19);case 113:return K.$name(20);case 114:return K.$name(21);case 115:return K.$name(22);case 116:return K.$name(23);case 117:return K.$name(24);case 118:return K.$name(25);case 119:return K.$name(26);case 120:return K.$name(27);case 121:return K.$name(28);case 122:return K.$name(29);case 127:return K.$name(76);default:return String.fromCodePoint(e)}},T.toScanCode=function(e){if(0!=(e&K.MASK))return e&~K.MASK;switch(e){case 8:return 42;case 9:return 43;case 13:return 40;case 27:return 41;case 32:return 44;case 47:return 56;case 48:return 39;case 49:return 30;case 50:return 31;case 51:return 32;case 52:return 33;case 53:return 34;case 54:return 35;case 55:return 36;case 56:return 37;case 57:return 38;case 59:return 51;case 61:return 46;case 91:return 47;case 92:return 49;case 93:return 48;case 96:return 53;case 97:return 4;case 98:return 5;case 99:return 6;case 100:return 7;case 101:return 8;case 102:return 9;case 103:return 10;case 104:return 11;case 105:return 12;case 106:return 13;case 107:return 14;case 108:return 15;case 109:return 16;case 110:return 17;case 111:return 18;case 112:return 19;case 113:return 20;case 114:return 21;case 115:return 22;case 116:return 23;case 117:return 24;case 118:return 25;case 119:return 26;case 120:return 27;case 121:return 28;case 122:return 29}return 0},T.toString=function(e){return"KeyCode("+e+" "+T.$name(e)+")"},function(){}),xt=((x["clay.Log"]=E).__name__="clay.Log",E.debug=function(e,n){},E.info=function(e,n){Xt.trace("[info] "+e,n)},E.warning=function(e,n){Xt.trace("[warning] "+e,n)},E.error=function(e,n){Xt.trace("[error] "+e,n)},E.success=function(e,n){Xt.trace("[success] "+e,n)},(x["clay.Macros"]=T1).__name__="clay.Macros",function(){}),Ct=((x["clay.PremultiplyAlpha"]=xt).__name__="clay.PremultiplyAlpha",xt.premultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],s=e[t+1],r=e[t+2],l=e[t+3]/255;e[t]=i*l|0,e[t+1]=s*l|0,e[t+2]=r*l|0,t+=4}},xt.reversePremultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],s=e[t+1],r=e[t+2],l=e[t+3]/255;0<l&&(e[t]=i/l|0,e[t+1]=s/l|0,e[t+2]=r/l|0),t+=4}},function(){}),K=((x["clay.Runner"]=Ct).__name__="clay.Runner",Ct.currentIsMainThread=function(){return!0},Ct.init=function(){},Ct.tick=function(){},Ct.isEmulatingBackgroundWithMain=function(){return!0},Ct.runInMain=function(e){yt.push(e)},Ct.runInBackground=function(e){yt.push(e)},{}),Dt=(K.$name=function(e){var n=null;return null!=(n=0<=e&&e<K.scanCodeNames.length?K.scanCodeNames[e]:n)?n:""},K.toString=function(e){return"ScanCode("+e+" "+K.$name(e)+")"},function(){this.meta=!1,this.alt=!1,this.shift=!1,this.ctrl=!1,this.mode=!1,this.caps=!1,this.num=!1,this.rmeta=!1,this.lmeta=!1,this.ralt=!1,this.lalt=!1,this.rctrl=!1,this.lctrl=!1,this.rshift=!1,this.lshift=!1,this.none=!1}),Tt=((x["clay.ModState"]=Dt).__name__="clay.ModState",Dt.prototype={toString:function(){var e='{ "ModState":true ';return this.none?e+', "none":true }':(this.lshift&&(e+=', "lshift":true'),this.rshift&&(e+=', "rshift":true'),this.lctrl&&(e+=', "lctrl":true'),this.rctrl&&(e+=', "rctrl":true'),this.lalt&&(e+=', "lalt":true'),this.ralt&&(e+=', "ralt":true'),this.lmeta&&(e+=', "lmeta":true'),this.rmeta&&(e+=', "rmeta":true'),this.num&&(e+=', "num":true'),this.caps&&(e+=', "caps":true'),this.mode&&(e+=', "mode":true'),this.ctrl&&(e+=', "ctrl":true'),this.shift&&(e+=', "shift":true'),this.alt&&(e+=', "alt":true'),this.meta&&(e+=', "meta":true'),e+"}")},__class__:Dt},(x["clay.Utils"]=ac).__name__="clay.Utils",ac.uniqueId=function(){switch(ac._nextUniqueIntCursor){case 0:ac._nextUniqueInt0=(ac._nextUniqueInt0+1)%2147483647;break;case 1:ac._nextUniqueInt1=(ac._nextUniqueInt1+1)%2147483647;break;case 2:ac._nextUniqueInt2=(ac._nextUniqueInt2+1)%2147483647;break;case 3:ac._nextUniqueInt3=(ac._nextUniqueInt3+1)%2147483647}ac._nextUniqueIntCursor=(ac._nextUniqueIntCursor+1)%4;var e,n=ac._nextUniqueInt0,t=(n=null==n?2147483646*Math.random()|0:n)%62|0,i=n/62|0;e=0<i?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(s=0<(i=n/62|0)?(r=ac.base62Id(i))+(l=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(r=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(r)))+(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(s));var s,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;s=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(r=0<(i=n/62|0)?(l=ac.base62Id(i))+(a=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(l=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(l)))+(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(r));var r,t=(n=null==(n=ac._nextUniqueInt1)?2147483646*Math.random()|0:n)%62|0;r=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(l=0<(i=n/62|0)?(a=ac.base62Id(i))+(h=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(a=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(a)))+(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(l));var l,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;l=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(a=0<(i=n/62|0)?(h=ac.base62Id(i))+(c=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(h=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(h)))+(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(a));var a,t=(n=null==(n=ac._nextUniqueInt2)?2147483646*Math.random()|0:n)%62|0;a=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(h=0<(i=n/62|0)?(c=ac.base62Id(i))+(d=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(c=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(c)))+(c=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(h));var h,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;h=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(c=0<(i=n/62|0)?(d=ac.base62Id(i))+(u=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(d=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(d)))+(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(c=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(c));var c,o,u,_,d,t=(n=null==(n=ac._nextUniqueInt3)?2147483646*Math.random()|0:n)%62|0;return d=e+"-"+s+"-"+r+"-"+l+"-"+a+"-"+h+"-"+(c=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(d=0<(i=n/62|0)?(u=ac.base62Id(i))+(9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(u=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(u)))+(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(d)))},ac.base62Id=function(e){var n,t,i=(e=null==e?2147483646*Math.random()|0:e)%62|0,e=e/62|0;return 0<e?(n=ac.base62Id(e))+(9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0)):(n=9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0),L.string(n))},(x["clay.audio.AudioDataOptions"]=bc).__name__="clay.audio.AudioDataOptions",bc.prototype={__class__:bc},(x["clay.audio.AudioData"]=cc).__name__="clay.audio.AudioData",cc.prototype={destroy:function(){this.destroyed||(E.debug("Audio / destroy AudioData `"+this.id+"`",{fileName:"clay/audio/AudioData.hx",lineNumber:95,className:"clay.audio.AudioData",methodName:"destroy"}),this.destroyed=!0,this.id=null)},seek:function(e){return!1},portion:function(e,n,t,i){return i},toString:function(){var e,n='{ "AudioData":true, "id":'+this.id+', "rate":'+this.rate+', "length":'+this.length+', "channels":'+this.channels+', "format":"';if(null==this.format)e="null";else{var t=this.format;if(null==t)e=""+t;else switch(t){case 0:e="UNKNOWN";break;case 1:e="CUSTOM";break;case 2:e="OGG";break;case 3:e="WAV";break;case 4:e="PCM";break;case 5:e="MP3";break;case 6:e="FLAC";break;default:e=""+t}}return n+e+'", "isStream":'+L.string(this.isStream)+" }"},__class__:cc},(x["clay.audio.AudioInstance"]=fc).__name__="clay.audio.AudioInstance",fc.prototype={hasEnded:function(){if(this.destroyed)throw Y.thrown("Audio / Instance hasEnded queried after being destroyed");return 2==this.source.app.audio.stateOf(this.handle)},destroy:function(){if(this.destroyed)throw Y.thrown("Audio / Instance being destroyed more than once");this.source.app.audio.handleInstanceDestroyed(this.handle),this.source.instanceKilled(this),this.destroyed=!0,this.source=null,this.handle=-1},dataGet:function(e,n,t,i){if(this.destroyed)throw Y.thrown("Audio / Instance dataGet queried after being destroyed");return this.source.data.portion(e,n,t,i)},dataSeek:function(e){if(this.destroyed)throw Y.thrown("Audio / Instance dataSeek queried after being destroyed");return this.source.data.seek(e)},__class__:fc},function(e,n){this.destroyed=!1,this.streamBufferCount=2,this.streamBufferLength=176400,this.app=e,this.data=n,this.sourceId=ac.uniqueId(),E.debug("AudioSource / `"+this.sourceId+"` / "+this.data.id,{fileName:"clay/audio/AudioSource.hx",lineNumber:34,className:"clay.audio.AudioSource",methodName:"new"}),this.instances=[],n.duration<=0&&(n.duration=this.bytesToSeconds(n.length))}),St=((x["clay.audio.AudioSource"]=Tt).__name__="clay.audio.AudioSource",Tt.prototype={instance:function(e){e=new fc(this,e);return-1==this.instances.indexOf(e)&&this.instances.push(e),e},bytesToSeconds:function(e){var n=16==this.data.bitsPerSample?2:1;return e/(this.data.rate*this.data.channels*n)},secondsToBytes:function(e){var n=16==this.data.bitsPerSample?2:1;return e*(this.data.rate*this.data.channels*n)|0},getDuration:function(){return this.data.duration},destroy:function(){if(this.destroyed)E.debug("AudioSource / destroying already destroyed source!",{fileName:"clay/audio/AudioSource.hx",lineNumber:85,className:"clay.audio.AudioSource",methodName:"destroy"});else{this.destroyed=!0;var e=this.instances.length,n=0;for(E.debug("AudioSource / destroy / "+this.sourceId+" / "+this.data.id+", stream="+L.string(this.data.isStream)+", instances="+e,{fileName:"clay/audio/AudioSource.hx",lineNumber:94,className:"clay.audio.AudioSource",methodName:"destroy"});n<e;)this.instances.pop().destroy(),++n;this.app.audio.handleSourceDestroyed(this),this.data.destroy(),this.data=null,this.instances=null,this.app=null}},instanceKilled:function(e){le.remove(this.instances,e)},__class__:Tt},(x["clay.base.BaseAssets"]=ic).__name__="clay.base.BaseAssets",ic.prototype={isSynchronous:function(){return!1},fullPath:function(e){return An.isAbsolute(e)?e:An.join([this.app.io.appPath(),e])},loadImage:function(e,n,t,i){return null==t&&(t=!1),null==n&&(n=4),null!=i&&yt.push(function(){i(null)}),null},__class__:ic},(x["clay.base.BaseAudio"]=jc).__name__="clay.base.BaseAudio",jc.prototype={isSynchronous:function(){return!1},init:function(){},ready:function(){},tick:function(e){},shutdown:function(){},loadData:function(e,n,t,i,s){return null==i&&(i=!1),null!=s&&yt.push(function(){s(null)}),null},emitAudioEvent:function(e,n){this.app.events.audioEvent(e,n)},__class__:jc},(x["clay.base.BaseIO"]=kc).__name__="clay.base.BaseIO",kc.prototype={init:function(){},shutdown:function(){},isSynchronous:function(){return!1},appPath:function(){return null},appPathPrefs:function(){return null},loadData:function(e,n,t,i){return null==t&&(t=!1),null==n&&(n=!1),null!=i&&yt.push(function(){i(null)}),null},__class__:kc},(x["clay.base.BaseRuntime"]=lc).__name__="clay.base.BaseRuntime",lc.prototype={init:function(){},shutdown:function(e){},ready:function(){},run:function(){return!0},windowDevicePixelRatio:function(){return 1},windowWidth:function(){return 0},windowHeight:function(){return 0},__class__:lc},function(e,n,t,i){this.a=1,this.b=0,this.g=0,this.r=0,null!=e&&(this.r=e),null!=n&&(this.g=n),null!=t&&(this.b=t),null!=i&&(this.a=i)}),Et=((x["clay.graphics.Color"]=St).__name__="clay.graphics.Color",St.prototype={__class__:St},function(){this.wrapT=33071,this.wrapS=33071,this.filterMag=9729,this.filterMin=9729,this.pixels=null,this.heightActual=-1,this.widthActual=-1,this.height=-1,this.width=-1,this.dataType=5121,this.type=3553,this.format=6408,this.compressed=!1,ea.call(this),this.index=Et._nextIndex++,this.textureId=null}),At=((x["clay.graphics.Texture"]=Et).__name__="clay.graphics.Texture",Et.fromImage=function(e,n){null==n&&(n=!1);var t=new Et;if(t.premultiplyAlpha=n,4!=e.bitsPerPixel)throw Y.thrown("Image must have 4 bits per pixels (RGBA format)");return t.width=e.width,t.height=e.height,t.widthActual=e.widthActual,t.heightActual=e.heightActual,t.pixels=e.pixels,t},Et.__super__=ea,Et.prototype=$extend(ea.prototype,{set_filterMin:function(e){return null!=this.textureId&&(this.bind(),J._graphics,ee.gl.texParameteri(3553,10241,e)),this.filterMin=e},set_filterMag:function(e){return null!=this.textureId&&(this.bind(),J._graphics,ee.gl.texParameteri(3553,10240,e)),this.filterMag=e},set_wrapS:function(e){return null!=this.textureId&&(this.bind(),J._graphics,ee.gl.texParameteri(3553,10242,e)),this.wrapS=e},set_wrapT:function(e){return null!=this.textureId&&(this.bind(),J._graphics,ee.gl.texParameteri(3553,10243,e)),this.wrapT=e},init:function(){J._graphics,this.textureId=ee.gl.createTexture(),0<this.width&&this.widthActual<=0&&(this.widthActual=this.width),0<this.height&&this.heightActual<=0&&(this.heightActual=this.height),this.bind(),J._graphics,ee.gl.texParameteri(3553,10241,this.filterMin),J._graphics,ee.gl.texParameteri(3553,10240,this.filterMag),J._graphics,ee.gl.texParameteri(3553,10243,this.wrapT),J._graphics;if(ee.gl.texParameteri(3553,10242,this.wrapS),null!=this.pixels){if(this.width<=0||this.height<=0)throw Y.thrown("Provided texture pixels with invalid size (width="+this.width+" height="+this.height+")");this.submit(this.pixels)}},destroy:function(){if(null!=this.textureId){for(var e=J._graphics,n=this.textureId,t=(ee.gl.deleteTexture(n),0),i=e._boundTexture2D.length;t<i;){var s=t++;e._boundTexture2D[s]==n&&(e._boundTexture2D[s]=null)}this.textureId=null}},bind:function(e){var n;if(-1!=(e=null==e?0:e)&&(n=J._graphics)._activeTextureSlot!=e){for(n._activeTextureSlot=e;n._boundTexture2D.length<=n._activeTextureSlot;)n._boundTexture2D.push(null);ee.gl.activeTexture(33984+e)}3553==this.type&&(n=J._graphics,e=this.textureId,n._boundTexture2D[n._activeTextureSlot]!=e)&&(n._boundTexture2D[n._activeTextureSlot]=e,ee.gl.bindTexture(3553,e))},submit:function(e){J._graphics;var n,t,i,s=ee.gl.getParameter(3379),s=s=s<=0?4096:s;if(null==(e=null==e?this.pixels:e))throw Y.thrown("Cannot submit texture pixels: pixels is null");if(this.widthActual>s)throw Y.thrown("Texture actual width bigger than maximum hardware size (width="+this.widthActual+" max="+s+")");if(this.heightActual>s)throw Y.thrown("Texture actual height bigger than maximum hardware size (height="+this.heightActual+" max="+s+")");this.bind(),3553==this.type&&(this.compressed?(J._graphics,n=this.format,t=this.widthActual,i=this.heightActual,ee.gl.pixelStorei(37441,this.premultiplyAlpha?1:0),ee.gl.compressedTexImage2D(3553,0,n,t,i,0,e)):(J._graphics,n=this.format,t=this.widthActual,i=this.heightActual,s=this.dataType,ee.gl.pixelStorei(37441,this.premultiplyAlpha?1:0),ee.gl.texImage2D(3553,0,n,t,i,0,n,s,e)))},fetch:function(e,n,t,i,s){return null==t&&(t=0),null==n&&(n=0),(i=null==i?-1:i)<=0&&(i=this.width),(s=null==s?-1:s)<=0&&(s=this.height),this.bind(),3553==this.type&&J._graphics.fetchTexture2dPixels(e,n,t,i,s),e},__class__:Et,__properties__:{set_wrapT:"set_wrapT",set_wrapS:"set_wrapS",set_filterMag:"set_filterMag",set_filterMin:"set_filterMin"}}),function(){this.antialiasing=0,this.stencil=!1,this.depth=!1,Et.call(this)}),Mt=((x["clay.graphics.RenderTexture"]=At).__name__="clay.graphics.RenderTexture",At.__super__=Et,At.prototype=$extend(Et.prototype,{init:function(){Et.prototype.init.call(this);J._graphics;var e=ee.gl.getParameter(3379),e=e=e<=0?4096:e;if(this.widthActual>e)throw Y.thrown("RenderTexture actual width bigger than maximum hardware size (width="+this.widthActual+" max="+e+")");if(this.heightActual>e)throw Y.thrown("RenderTexture actual height bigger than maximum hardware size (height="+this.heightActual+" max="+e+")");this.bind(),this.renderTarget=J._graphics.createRenderTarget(this.textureId,this.width,this.height,this.depth,this.stencil,this.antialiasing,0,this.format,this.dataType)},destroy:function(){Et.prototype.destroy.call(this),null!=this.renderTarget&&(J._graphics.deleteRenderTarget(this.renderTarget),this.renderTarget=null)},__class__:At}),(x["clay.graphics.TextureAndSlot"]=tc).__name__="clay.graphics.TextureAndSlot",tc.prototype={__class__:tc},function(e){this.dirtyTextures=[],this.dirtyMatrix4s=[],this.dirtyMatrix3s=[],this.dirtyMatrix2s=[],this.dirtyVector4s=[],this.dirtyVector3s=[],this.dirtyVector2s=[],this.dirtyFloatArrays=[],this.dirtyFloats=[],this.dirtyIntArrays=[],this.dirtyInts=[],this.textures=new te,this.matrix4s=new te,this.matrix3s=new te,this.matrix2s=new te,this.vector4s=new te,this.vector3s=new te,this.vector2s=new te,this.floatArrays=new te,this.floats=new te,this.intArrays=new te,this.ints=new te,this.gpuShader=e}),Rt=((x["clay.graphics.Uniforms"]=Mt).__name__="clay.graphics.Uniforms",Mt.prototype={setInt:function(e,n){J._graphics;var t=this.gpuShader;ee.gl.getUniformLocation(t.program,e);this.ints.h[e]=n,this.dirtyInts.push(e)},setIntArray:function(e,n){J._graphics;var t=this.gpuShader;ee.gl.getUniformLocation(t.program,e);this.intArrays.h[e]=n,this.dirtyIntArrays.push(e)},setFloat:function(e,n){J._graphics;var t=this.gpuShader;ee.gl.getUniformLocation(t.program,e);this.floats.h[e]=n,this.dirtyFloats.push(e)},setFloatArray:function(e,n){J._graphics;var t=this.gpuShader;ee.gl.getUniformLocation(t.program,e);this.floatArrays.h[e]=n,this.dirtyFloatArrays.push(e)},setVector2:function(e,n,t){J._graphics;var i=this.gpuShader,i=(ee.gl.getUniformLocation(i.program,e),this.vector2s.h[e]);null!=i?(i.x=n,i.y=t):(i=this.vector2s,n=new Rt(n,t),i.h[e]=n),this.dirtyVector2s.push(e)},setVector3:function(e,n,t,i){J._graphics;var s=this.gpuShader,s=(ee.gl.getUniformLocation(s.program,e),this.vector3s.h[e]);null!=s?(s.x=n,s.y=t,s.z=i):(s=this.vector3s,n=new Pt(n,t,i),s.h[e]=n),this.dirtyVector3s.push(e)},setVector4:function(e,n,t,i,s){J._graphics;var r=this.gpuShader,r=(ee.gl.getUniformLocation(r.program,e),this.vector4s.h[e]);null!=r?(r.x=n,r.y=t,r.z=i,r.w=s):(r=this.vector4s,n=new Ft(n,t,i,s),r.h[e]=n),this.dirtyVector4s.push(e)},setMatrix2:function(e,n){J._graphics;var t=this.gpuShader,t=(ee.gl.getUniformLocation(t.program,e),this.matrix2s.h[e]);null==t&&(t=new Float32Array(4),this.matrix2s.h[e]=t),t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],this.dirtyMatrix2s.push(e)},setMatrix3:function(e,n){J._graphics;var t=this.gpuShader,t=(ee.gl.getUniformLocation(t.program,e),this.matrix3s.h[e]);null==t&&(t=new Float32Array(9),this.matrix3s.h[e]=t),t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this.dirtyMatrix3s.push(e)},setMatrix4:function(e,n){J._graphics;var t=this.gpuShader,t=(ee.gl.getUniformLocation(t.program,e),this.matrix4s.h[e]);null==t&&(t=new Float32Array(16),this.matrix4s.h[e]=t),t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this.dirtyMatrix4s.push(e)},setTexture:function(e,n,t){J._graphics;var i=this.gpuShader,i=(ee.gl.getUniformLocation(i.program,e),this.textures.h[e]);null!=i?(i.texture=t,i.slot=n):(i=this.textures,t=new tc(t,n),i.h[e]=t),-1==this.dirtyTextures.indexOf(e)&&this.dirtyTextures.push(e)},apply:function(){var e=J._graphics,n=this.gpuShader;for(e._boundProgram!=n.program&&(e._boundProgram=n.program,ee.gl.useProgram(n.program));0<this.dirtyInts.length;){var t=this.dirtyInts.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),s=J._graphics,r=this.ints.h[t],l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniform1i(i,r)}for(;0<this.dirtyIntArrays.length;){t=this.dirtyIntArrays.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),s=J._graphics,r=this.intArrays.h[t],l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniform1iv(i,r)}for(;0<this.dirtyFloats.length;){t=this.dirtyFloats.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),s=J._graphics,r=this.floats.h[t],l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniform1f(i,r)}for(;0<this.dirtyFloatArrays.length;){t=this.dirtyFloatArrays.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),s=J._graphics,r=this.floatArrays.h[t],l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniform1fv(i,r)}for(;0<this.dirtyVector2s.length;){var t=this.dirtyVector2s.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),r=this.vector2s.h[t],s=J._graphics,a=r.x,h=r.y,l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniform2f(i,a,h)}for(;0<this.dirtyVector3s.length;){var t=this.dirtyVector3s.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),r=this.vector3s.h[t],s=J._graphics,a=r.x,h=r.y,c=r.z,l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniform3f(i,a,h,c)}for(;0<this.dirtyVector4s.length;){var t=this.dirtyVector4s.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),r=this.vector4s.h[t],s=J._graphics,a=r.x,h=r.y,c=r.z,o=r.w,l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniform4f(i,a,h,c,o)}for(;0<this.dirtyMatrix2s.length;){t=this.dirtyMatrix2s.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),s=J._graphics,r=this.matrix2s.h[t],l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniformMatrix2fv(i,!1,r)}for(;0<this.dirtyMatrix3s.length;){t=this.dirtyMatrix3s.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),s=J._graphics,r=this.matrix3s.h[t],l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniformMatrix3fv(i,!1,r)}for(;0<this.dirtyMatrix4s.length;){t=this.dirtyMatrix4s.pop(),e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t),s=J._graphics,r=this.matrix4s.h[t],l=this.gpuShader;s._boundProgram!=l.program&&(s._boundProgram=l.program,ee.gl.useProgram(l.program)),ee.gl.uniformMatrix4fv(i,!1,r)}for(var u=0,_=this.dirtyTextures.length;u<_;){var d=u++,t=this.dirtyTextures[d],e=J._graphics,n=this.gpuShader,i=ee.gl.getUniformLocation(n.program,t);3553==(r=this.textures.h[t]).texture.type&&J._graphics.setTexture2dUniform(this.gpuShader,i,r.slot,r.texture.textureId)}},clone:function(){return new Mt(this.gpuShader)},__class__:Mt},function(e,n){this.y=0,this.x=0,null!=e&&(this.x=e),null!=n&&(this.y=n)}),Pt=((x["clay.graphics.Vector2"]=Rt).__name__="clay.graphics.Vector2",Rt.prototype={__class__:Rt},function(e,n,t){this.z=0,this.y=0,this.x=0,null!=e&&(this.x=e),null!=n&&(this.y=n),null!=t&&(this.z=t)}),Ft=((x["clay.graphics.Vector3"]=Pt).__name__="clay.graphics.Vector3",Pt.prototype={__class__:Pt},function(e,n,t,i){this.w=0,this.z=0,this.y=0,this.x=0,null!=e&&(this.x=e),null!=n&&(this.y=n),null!=t&&(this.z=t),null!=i&&(this.w=i)}),It=((x["clay.graphics.Vector4"]=Ft).__name__="clay.graphics.Vector4",Ft.prototype={__class__:Ft},(x["clay.spec.GraphicsBatcher"]=yc).__name__="clay.spec.GraphicsBatcher",yc.__isInterface__=!0,yc.prototype={__class__:yc},function(){this._primitiveType=4,this._colorIndex=0,this._numColors=0,this._uvIndex=0,this._numUVs=0,this._currentShader=null,this._floatAttributesSize=0,this._posIndex=0,this._numPos=0,this._numIndices=0,this._vertexSize=0,this._maxVerts=0,this._customAttributes=null,this._customGLBuffers=[],this._posSize=0,this._batchMultiTexture=!1,this._colorListArray=[],this._uvListArray=[],this._indiceListArray=[],this._posListArray=[]}),kt=((x["clay.opengl.GLGraphicsBatcher"]=It).__name__="clay.opengl.GLGraphicsBatcher",It.__interfaces__=[yc],It.prototype={initBuffers:function(){this._buffersIndex=-1,this.prepareNextBuffers()},prepareNextBuffers:function(){this._buffersIndex++,64<this._buffersIndex&&(this._buffersIndex=0),this._posListArray.length<=this._buffersIndex&&(this._posListArray[this._buffersIndex]=new Float32Array(65536),this._uvListArray[this._buffersIndex]=new Float32Array(43691),this._colorListArray[this._buffersIndex]=new Float32Array(65536),this._indiceListArray[this._buffersIndex]=new Uint16Array(32768)),this._posList=this._posListArray[this._buffersIndex],this._uvList=this._uvListArray[this._buffersIndex],this._colorList=this._colorListArray[this._buffersIndex],this._indiceList=this._indiceListArray[this._buffersIndex]},beginRender:function(){ee.gl.enableVertexAttribArray(0),ee.gl.enableVertexAttribArray(1),ee.gl.enableVertexAttribArray(2)},endRender:function(){},setVertexLayout:function(e,n){this._floatAttributesSize=n,this._batchMultiTexture=e,this._vertexSize=3+this._floatAttributesSize+(this._batchMultiTexture?1:0),this._posSize=this._vertexSize,this._vertexSize<4&&(this._vertexSize=4),this._maxVerts=0|Math.floor(65536/this._vertexSize),0==this._numPos&&(this._numIndices=0,this._numPos=0,this._numUVs=0,this._numColors=0,this._posIndex=0,this._uvIndex=0,this._colorIndex=0)},setCustomAttributes:function(e){this._customAttributes=e},resetIndexes:function(){this._numIndices=0,this._numPos=0,this._numUVs=0,this._numColors=0,this._posIndex=0,this._uvIndex=0,this._colorIndex=0},putVertex:function(e,n,t){this._posList[this._posIndex]=e,this._posList[this._posIndex+1]=n,this._posList[this._posIndex+2]=t,this._posIndex+=3,this._numPos++},putVertexWithTextureSlot:function(e,n,t,i){this._posList[this._posIndex]=e,this._posList[this._posIndex+1]=n,this._posList[this._posIndex+2]=t,this._posList[this._posIndex+3]=i,this._posIndex+=4,this._numPos++},putUVs:function(e,n){this._uvList[this._uvIndex]=e,this._uvList[this._uvIndex+1]=n,this._uvIndex+=2,this._numUVs++},putColor:function(e,n,t,i){this._colorList[this._colorIndex]=e,this._colorList[this._colorIndex+1]=n,this._colorList[this._colorIndex+2]=t,this._colorList[this._colorIndex+3]=i,this._colorIndex+=4,this._numColors++},putIndex:function(e){this._indiceList[this._numIndices]=e,this._numIndices++},putFloatAttribute:function(e,n){this._posList[this._posIndex+e]=n},endFloatAttributes:function(){this._posIndex+=this._floatAttributesSize},getNumVertices:function(){return this._numPos},shouldFlush:function(e,n){return!(this._numPos+e<=this._maxVerts)||16384<this._numIndices+n},remainingVertices:function(){return this._maxVerts-this._numPos},remainingIndices:function(){return 16384-this._numIndices},hasAnythingToFlush:function(){return 0<this._numPos},flush:function(){var e=this._batchMultiTexture,n=new Float32Array(this._posList.buffer,0,4*this._posIndex/4|0),t=new Float32Array(this._uvList.buffer,0,4*this._uvIndex/4|0),i=new Float32Array(this._colorList.buffer,0,4*this._colorIndex/4|0),s=new Uint16Array(this._indiceList.buffer,0,2*this._numIndices/2|0),r=ee.gl.createBuffer(),l=ee.gl.createBuffer(),a=ee.gl.createBuffer(),h=ee.gl.createBuffer(),c=(ee.gl.enableVertexAttribArray(0),ee.gl.enableVertexAttribArray(1),ee.gl.enableVertexAttribArray(2),ee.gl.bindBuffer(34962,r),ee.gl.vertexAttribPointer(0,3,5126,!1,4*this._posSize,0),ee.gl.bufferData(34962,n,35040),ee.gl.bindBuffer(34962,a),ee.gl.vertexAttribPointer(1,2,5126,!1,0,0),ee.gl.bufferData(34962,t,35040),ee.gl.bindBuffer(34962,l),ee.gl.vertexAttribPointer(2,4,5126,!1,0,0),ee.gl.bufferData(34962,i,35040),3),o=3,t=0;if(e&&(f=ee.gl.createBuffer(),this._customGLBuffers[t++]=f,ee.gl.enableVertexAttribArray(o),ee.gl.bindBuffer(34962,f),ee.gl.vertexAttribPointer(o,1,5126,!1,4*this._posSize,4*c),ee.gl.bufferData(34962,n,35040),++o,++c),null!=this._customAttributes)for(var u=this._customAttributes,_=t,i=_+u.length,d=(t+=u.length,_),b=i;d<b;){var p=u[(O=d++)-_],f=ee.gl.createBuffer();this._customGLBuffers[O]=f,ee.gl.enableVertexAttribArray(o),ee.gl.bindBuffer(34962,f),ee.gl.vertexAttribPointer(o,p.size,5126,!1,4*this._posSize,4*c),ee.gl.bufferData(34962,n,35040),++o,c+=p.size}if(ee.gl.bindBuffer(34963,h),ee.gl.bufferData(34963,s,35040),ee.gl.drawElements(this._primitiveType,this._numIndices,5123,0),ee.gl.deleteBuffer(r),ee.gl.deleteBuffer(l),ee.gl.deleteBuffer(a),0<t)for(o=3,d=0,b=t;d<b;){var O=d++,f=this._customGLBuffers[O];ee.gl.deleteBuffer(f),ee.gl.disableVertexAttribArray(o),++o}ee.gl.bindBuffer(34963,null),ee.gl.deleteBuffer(h),n=null,this._numIndices=0,this._numPos=0,this._numUVs=0,this._numColors=0,this._posIndex=0,this._uvIndex=0,this._colorIndex=0,this.prepareNextBuffers()},clear:function(e,n,t,i,s){J._graphics.clear(e,n,t,i,s)},setViewport:function(e,n,t,i){J._graphics;ee.gl.viewport(e,n,t,i)},setPrimitiveType:function(e){this._primitiveType=1==e?1:4},enableBlending:function(){J._graphics;ee.gl.enable(3042)},disableBlending:function(){J._graphics;ee.gl.disable(3042)},setBlendFuncSeparate:function(e,n,t,i){J._graphics;ee.gl.blendFuncSeparate(e,n,t,i)},setActiveTexture:function(e){var n=J._graphics;if(n._activeTextureSlot!=e){for(n._activeTextureSlot=e;n._boundTexture2D.length<=n._activeTextureSlot;)n._boundTexture2D.push(null);ee.gl.activeTexture(33984+e)}},bindTexture:function(e){var n=J._graphics;n._boundTexture2D[n._activeTextureSlot]!=e&&(n._boundTexture2D[n._activeTextureSlot]=e,ee.gl.bindTexture(3553,e))},bindNoTexture:function(){var e=J._graphics,n=It.defaultTextureId;e._boundTexture2D[e._activeTextureSlot]!=n&&(e._boundTexture2D[e._activeTextureSlot]=n,ee.gl.bindTexture(3553,n))},shouldFlipRenderTargetY:function(){return!0},setRenderTarget:function(e){var n=J._graphics;null!=e?(n.bindFramebuffer((e=e).framebuffer),n.bindRenderbuffer(e.renderbuffer)):(n.bindFramebuffer(null),n.bindRenderbuffer(null))},blitRenderTargetBuffers:function(e,n,t){J._graphics.blitRenderTargetBuffers(e,n,t)},useShader:function(e){this._currentShader=e;var n=J._graphics;n._boundProgram!=e.program&&(n._boundProgram=e.program,ee.gl.useProgram(e.program))},setProjectionMatrix:function(e){J._graphics.projectionMatrix=e},setModelViewMatrix:function(e){J._graphics.modelViewMatrix=e},beginStencilWrite:function(){ee.gl.stencilMask(255),ee.gl.clearStencil(255),ee.gl.clear(1024),ee.gl.enable(2960),ee.gl.stencilOp(7680,7680,7681),ee.gl.stencilFunc(519,1,255),ee.gl.stencilMask(255),ee.gl.colorMask(!1,!1,!1,!1)},endStencilWrite:function(){},enableStencilTest:function(){ee.gl.stencilFunc(514,1,255),ee.gl.stencilMask(0),ee.gl.colorMask(!0,!0,!0,!0),ee.gl.enable(2960)},disableStencilTest:function(){ee.gl.stencilFunc(519,1,255),ee.gl.stencilMask(255),ee.gl.colorMask(!0,!0,!0,!0),ee.gl.disable(2960)},enableScissor:function(e,n,t,i){ee.gl.enable(3089),ee.gl.scissor(Math.round(e),Math.round(n),Math.round(t),Math.round(i))},disableScissor:function(){ee.gl.disable(3089)},__class__:It},(x["clay.spec.GraphicsDriver"]=Ac).__name__="clay.spec.GraphicsDriver",Ac.__isInterface__=!0,Ac.prototype={__class__:Ac,__properties__:{get_noBuffer:"get_noBuffer",get_noLocation:"get_noLocation",get_noProgram:"get_noProgram",get_noShader:"get_noShader",get_noRenderbuffer:"get_noRenderbuffer",get_noFramebuffer:"get_noFramebuffer",get_noTexture:"get_noTexture"}},function(){this.modelViewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._didFetchDefaultBuffers=!1,this._activeTextureSlot=-1,this._boundTexture2D=[],this._boundProgram=null,this._boundFramebuffer=null,this._boundRenderbuffer=null,this._defaultFramebuffer=null,this._defaultRenderbuffer=null,this._clearBufferForBlitValues=new Float32Array([0,0,0,1])}),Bt=((x["clay.opengl.GLGraphicsDriver"]=kt).__name__="clay.opengl.GLGraphicsDriver",kt.__interfaces__=[Ac],kt.prototype={get_noTexture:function(){return null},get_noFramebuffer:function(){return null},get_noRenderbuffer:function(){return null},get_noShader:function(){return null},get_noProgram:function(){return null},get_noLocation:function(){return null},get_noBuffer:function(){return null},setup:function(){this._defaultFramebuffer=ee.gl.getParameter(36006),this._defaultRenderbuffer=ee.gl.getParameter(36007),this._didFetchDefaultBuffers=!0},getMaxTextureSize:function(){var e=ee.gl.getParameter(3379);return e=e<=0?4096:e},getMaxTextureUnits:function(){var e=ee.gl.getParameter(34930);return 0|Math.min(32,e)},testShaderCompilationLimit:function(e){null==e&&(e=32);for(var n=z.trim("\n#ifdef GL_ES\nprecision mediump float;\n#else\n#define mediump\n#endif\nvarying float test;\nvoid main() {\n    {{CONDITIONS}}\n    gl_FragColor = vec4(0.0);\n}\n"),t=ee.gl.createShader(35632),i=0;0<e;){var s=this._generateIfStatements(e),s=z.replace(n,"{{CONDITIONS}}",s);if(ee.gl.shaderSource(t,s),ee.gl.compileShader(t),0!=ee.gl.getShaderParameter(t,35713)){i=e;break}e=e/2|0}return ee.gl.deleteShader(t),i},_generateIfStatements:function(e){for(var n="",t=0,i=e;t<i;){var s=t++;0<s&&(n+="\nelse "),s<e-1&&(n=(n+="if (test == ")+(null==s?"null":""+s)+".0) {}")}return n},loadExtensions:function(){ee.gl.getExtension("OES_standard_derivatives")},readPixels:function(e,n,t,i,s){ee.gl.readPixels(e,n,t,i,6408,5121,s)},clear:function(e,n,t,i,s){null==s&&(s=!0),ee.gl.clearColor(e,n,t,i),s&&0<J.app.config.render.depth?(ee.gl.clear(16640),ee.gl.clearDepth(1)):ee.gl.clear(16384)},setViewport:function(e,n,t,i){ee.gl.viewport(e,n,t,i)},enableBlending:function(){ee.gl.enable(3042)},disableBlending:function(){ee.gl.disable(3042)},setBlendFuncSeparate:function(e,n,t,i){ee.gl.blendFuncSeparate(e,n,t,i)},createTextureId:function(){return ee.gl.createTexture()},deleteTexture:function(e){ee.gl.deleteTexture(e);for(var n=0,t=this._boundTexture2D.length;n<t;){var i=n++;this._boundTexture2D[i]==e&&(this._boundTexture2D[i]=null)}},setActiveTexture:function(e){if(this._activeTextureSlot!=e){for(this._activeTextureSlot=e;this._boundTexture2D.length<=this._activeTextureSlot;)this._boundTexture2D.push(null);ee.gl.activeTexture(33984+e)}},bindTexture2d:function(e){this._boundTexture2D[this._activeTextureSlot]!=e&&(this._boundTexture2D[this._activeTextureSlot]=e,ee.gl.bindTexture(3553,e))},maxTextureSize:function(){var e=ee.gl.getParameter(3379);return e=e<=0?4096:e},needsPreprocessedPremultipliedAlpha:function(){return!1},submitTexture2dPixels:function(e,n,t,i,s,r,l){ee.gl.pixelStorei(37441,l?1:0),ee.gl.texImage2D(3553,e,n,t,i,0,n,s,r)},submitCompressedTexture2dPixels:function(e,n,t,i,s,r){ee.gl.pixelStorei(37441,r?1:0),ee.gl.compressedTexImage2D(3553,e,n,t,i,0,s)},fetchTexture2dPixels:function(e,n,t,i,s){if(null==e)throw Y.thrown("Texture fetch requires a valid buffer to store the pixels.");var r=this._boundTexture2D[this._activeTextureSlot],l=i*s*4;if(e.length<l)throw Y.thrown("Texture fetch requires at least "+l+" (w * h * 4) bytes for the pixels, you have "+e.length+"!");l=ee.gl.createFramebuffer();if(ee.gl.bindFramebuffer(36160,l),ee.gl.framebufferTexture2D(36160,36064,3553,r,0),36053!=ee.gl.checkFramebufferStatus(36160))throw Y.thrown("Incomplete framebuffer");ee.gl.readPixels(n,t,i,s,6408,5121,e),ee.gl.bindFramebuffer(36160,null),ee.gl.deleteFramebuffer(l)},setTexture2dMinFilter:function(e){ee.gl.texParameteri(3553,10241,e)},setTexture2dMagFilter:function(e){ee.gl.texParameteri(3553,10240,e)},setTexture2dWrapS:function(e){ee.gl.texParameteri(3553,10242,e)},setTexture2dWrapT:function(e){ee.gl.texParameteri(3553,10243,e)},createFramebuffer:function(){return ee.gl.createFramebuffer()},bindFramebuffer:function(e){this._boundFramebuffer!=e&&(null==(this._boundFramebuffer=e)&&(e=this._defaultFramebuffer),ee.gl.bindFramebuffer(36160,e))},createRenderbuffer:function(){return ee.gl.createRenderbuffer()},bindRenderbuffer:function(e){this._boundRenderbuffer!=e&&(null==(this._boundRenderbuffer=e)&&(e=this._defaultRenderbuffer),ee.gl.bindRenderbuffer(36161,e))},createRenderTarget:function(e,n,t,i,s,r,l,a,h){var c=new Bt;return ee.gl.texImage2D(3553,l,a,n,t,0,a,h,null),c.framebuffer=ee.gl.createFramebuffer(),c.renderbuffer=ee.gl.createRenderbuffer(),1<r?(c.msResolveFramebuffer=ee.gl.createFramebuffer(),c.msResolveColorRenderbuffer=ee.gl.createRenderbuffer(),c.msDepthStencilRenderbuffer=i||s?ee.gl.createRenderbuffer():null):(c.msResolveFramebuffer=null,c.msResolveColorRenderbuffer=null,c.msDepthStencilRenderbuffer=null),this.configureRenderTargetBuffersStorage(c,e,n,t,i,s,r),c},deleteRenderTarget:function(e){null!=e.framebuffer&&(this._boundFramebuffer==e.framebuffer&&(this._boundFramebuffer=null),ee.gl.deleteFramebuffer(e.framebuffer),e.framebuffer=null),null!=e.renderbuffer&&(this._boundRenderbuffer==e.renderbuffer&&(this._boundRenderbuffer=null),ee.gl.deleteRenderbuffer(e.renderbuffer),e.renderbuffer=null),null!=e.msDepthStencilRenderbuffer&&(this._boundRenderbuffer==e.msDepthStencilRenderbuffer&&(this._boundRenderbuffer=null),ee.gl.deleteRenderbuffer(e.msDepthStencilRenderbuffer),e.msDepthStencilRenderbuffer=null),null!=e.msResolveColorRenderbuffer&&(this._boundRenderbuffer==e.msResolveColorRenderbuffer&&(this._boundRenderbuffer=null),ee.gl.deleteRenderbuffer(e.msResolveColorRenderbuffer),e.msResolveColorRenderbuffer=null),null!=e.msResolveFramebuffer&&(this._boundFramebuffer==e.msResolveFramebuffer&&(this._boundFramebuffer=null),ee.gl.deleteFramebuffer(e.msResolveFramebuffer),e.msResolveFramebuffer=null)},setRenderTarget:function(e){null!=e?(this.bindFramebuffer((e=e).framebuffer),this.bindRenderbuffer(e.renderbuffer)):(this.bindFramebuffer(null),this.bindRenderbuffer(null))},configureRenderTargetBuffersStorage:function(e,n,t,i,s,r,l){1<l?(this.bindRenderbuffer(e.renderbuffer),ee.gl.renderbufferStorageMultisample(36161,l,32856,t,i),(s||r)&&(this.bindRenderbuffer(e.msDepthStencilRenderbuffer),r?ee.gl.renderbufferStorageMultisample(36161,l,35056,t,i):ee.gl.renderbufferStorageMultisample(36161,l,33189,t,i)),this.bindFramebuffer(e.framebuffer),ee.gl.framebufferRenderbuffer(36160,36064,36161,e.renderbuffer),(s||r)&&(r?ee.gl.framebufferRenderbuffer(36160,33306,36161,e.msDepthStencilRenderbuffer):ee.gl.framebufferRenderbuffer(36160,36096,36161,e.msDepthStencilRenderbuffer)),this.bindRenderbuffer(e.msResolveColorRenderbuffer),ee.gl.renderbufferStorage(36161,32856,t,i),this.bindFramebuffer(e.msResolveFramebuffer),ee.gl.framebufferTexture2D(36160,36064,3553,n,0)):(this.bindRenderbuffer(e.renderbuffer),r?ee.gl.renderbufferStorage(36161,34041,t,i):s?ee.gl.renderbufferStorage(36161,33189,t,i):ee.gl.renderbufferStorage(36161,6408,t,i),this.bindFramebuffer(e.framebuffer),ee.gl.framebufferTexture2D(36160,36064,3553,n,0),(s||r)&&(r?ee.gl.framebufferRenderbuffer(36160,33306,36161,e.renderbuffer):ee.gl.framebufferRenderbuffer(36160,36096,36161,e.renderbuffer)));var a=ee.gl.checkFramebufferStatus(36160);switch(a){case 36053:break;case 36054:throw Y.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case 36055:throw Y.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case 36057:throw Y.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case 36059:throw Y.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER");case 36060:throw Y.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_READ_BUFFER");case 36061:throw Y.thrown("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");case 36182:throw Y.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");default:throw Y.thrown("Incomplete framebuffer: "+a)}this.bindFramebuffer(null),this.bindRenderbuffer(null)},blitRenderTargetBuffers:function(e,n,t){ee.gl.bindFramebuffer(36008,e.framebuffer),ee.gl.bindFramebuffer(36009,e.msResolveFramebuffer),ee.gl.clearBufferfv(6144,0,this._clearBufferForBlitValues,0),ee.gl.blitFramebuffer(0,0,n,t,0,0,n,t,16384,9728),ee.gl.bindFramebuffer(36008,null),ee.gl.bindFramebuffer(36009,null)},createShader:function(e,n,t,i){if(null==e)throw Y.thrown("Cannot create shader: vertSource is null!");if(null==n)throw Y.thrown("Cannot create shader: fragSource is null!");e=this.patchGlslVersion(e),n=this.patchGlslVersion(n);var s=new Nt;return s.vertShader=this.compileGLShader(35633,e),null!=s.vertShader&&(s.fragShader=this.compileGLShader(35632,n),null!=s.fragShader)&&this.linkShader(s,t)?(null!=i&&this.configureShaderTextureSlots(s,i),s):(this.deleteShader(s),null)},patchGlslVersion:function(e){return e},deleteShader:function(e){this._boundProgram==e.program&&(this._boundProgram=null),null!=e.vertShader&&(ee.gl.deleteShader(e.vertShader),e.vertShader=null),null!=e.fragShader&&(ee.gl.deleteShader(e.fragShader),e.fragShader=null),null!=e.program&&(ee.gl.deleteProgram(e.program),e.program=null)},useShader:function(e){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program))},synchronizeShaderMatrices:function(e){var n=ee.gl.getUniformLocation(e.program,"projectionMatrix"),t=this.projectionMatrix,i=(this._boundProgram!=(i=e).program&&(this._boundProgram=i.program,ee.gl.useProgram(i.program)),ee.gl.uniformMatrix4fv(n,!1,t),e),n=ee.gl.getUniformLocation(i.program,"modelViewMatrix"),t=this.modelViewMatrix;this._boundProgram!=(i=e).program&&(this._boundProgram=i.program,ee.gl.useProgram(i.program)),ee.gl.uniformMatrix4fv(n,!1,t)},getUniformLocation:function(e,n){return ee.gl.getUniformLocation(e.program,n)},setIntUniform:function(e,n,t){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform1i(n,t)},setIntArrayUniform:function(e,n,t){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform1iv(n,t)},setFloatUniform:function(e,n,t){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform1f(n,t)},setFloatArrayUniform:function(e,n,t){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform1fv(n,t)},setVector2Uniform:function(e,n,t,i){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform2f(n,t,i)},setVector3Uniform:function(e,n,t,i,s){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform3f(n,t,i,s)},setVector4Uniform:function(e,n,t,i,s,r){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform4f(n,t,i,s,r)},setMatrix2Uniform:function(e,n,t){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniformMatrix2fv(n,!1,t)},setMatrix3Uniform:function(e,n,t){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniformMatrix3fv(n,!1,t)},setMatrix4Uniform:function(e,n,t){this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniformMatrix4fv(n,!1,t)},setTexture2dUniform:function(e,n,t,i){if(this._boundProgram!=e.program&&(this._boundProgram=e.program,ee.gl.useProgram(e.program)),ee.gl.uniform1i(n,t),this._activeTextureSlot!=t){for(this._activeTextureSlot=t;this._boundTexture2D.length<=this._activeTextureSlot;)this._boundTexture2D.push(null);ee.gl.activeTexture(33984+t)}this._boundTexture2D[this._activeTextureSlot]!=i&&(this._boundTexture2D[this._activeTextureSlot]=i,ee.gl.bindTexture(3553,i))},linkShader:function(e,n){var t=ee.gl.createProgram();if(ee.gl.attachShader(t,e.vertShader),ee.gl.attachShader(t,e.fragShader),null!=n)for(var i=0,s=n.length;i<s;){var r=i++;ee.gl.bindAttribLocation(t,r,n[r])}if(ee.gl.linkProgram(t),0!=ee.gl.getProgramParameter(t,35714))return e.program=t,!0;E.error("\tFailed to link shader program:",{fileName:"../../../../ceramic/git/clay/src-opengl/clay/opengl/GLGraphicsDriver.hx",lineNumber:1198,className:"clay.opengl.GLGraphicsDriver",methodName:"linkShader"});for(var i=[],s=0,l=h=ee.gl.getProgramInfoLog(t).split("\n");s<l.length;){var a=l[s];++s,""!=z.trim(a)&&i.push(a)}for(var h=i,c=new Array(h.length),i=0,s=h.length;i<s;)c[r=i++]="\t\t"+z.trim(h[r]);return E.error((h=c).join("\n"),{fileName:"../../../../ceramic/git/clay/src-opengl/clay/opengl/GLGraphicsDriver.hx",lineNumber:1199,className:"clay.opengl.GLGraphicsDriver",methodName:"linkShader"}),ee.gl.deleteProgram(t),!1},configureShaderTextureSlots:function(e,n){for(var t=e,i=(this._boundProgram!=t.program&&(this._boundProgram=t.program,ee.gl.useProgram(t.program)),0),s=n.length;i<s;){var r=i++,l=n[r],a=ee.gl.getUniformLocation(e.program,l);null!=a&&(ee.gl.uniform1i(a,r),e.textures[r]=l)}},compileGLShader:function(e,n){var t,i=ee.gl.createShader(e),n=(ee.gl.shaderSource(i,n),ee.gl.compileShader(i),ee.gl.getShaderInfoLog(i)),s="";if(null!=n&&0<n.length){s+="\n\t// start -- ("+(35632==e?"frag":"vert")+") compile log --\n";for(var r=[],l=0,a=o=n.split("\n");l<a.length;){var h=a[l];++l,""!=z.trim(h)&&r.push(h)}o=r;for(var c=new Array(o.length),r=0,l=o.length;r<l;)c[u=r++]="\t\t"+z.trim(o[u]);s=s+(o=c).join("\n")+"\n\t// end --\n"}if(0==ee.gl.getShaderParameter(i,35713)){if(E.error("GL / Failed to compile shader:",{fileName:"../../../../ceramic/git/clay/src-opengl/clay/opengl/GLGraphicsDriver.hx",lineNumber:1261,className:"clay.opengl.GLGraphicsDriver",methodName:"compileGLShader"}),0==s.length){for(var o,r=[],l=0,a=o=ee.gl.getShaderInfoLog(i).split("\n");l<a.length;){h=a[l];++l,""!=z.trim(h)&&r.push(h)}o=r;for(var u,c=new Array(o.length),r=0,l=o.length;r<l;)c[u=r++]="\t\t"+z.trim(o[u]);t=(o=c).join("\n")}else t=s;E.error(t,{fileName:"../../../../ceramic/git/clay/src-opengl/clay/opengl/GLGraphicsDriver.hx",lineNumber:1262,className:"clay.opengl.GLGraphicsDriver",methodName:"compileGLShader"}),ee.gl.deleteShader(i),i=null}return i},ensureNoError:function(){var e=ee.gl.getError();if(0!=e)throw Y.thrown("Failed with GL error: "+e)},__class__:kt,__properties__:{get_noBuffer:"get_noBuffer",get_noLocation:"get_noLocation",get_noProgram:"get_noProgram",get_noShader:"get_noShader",get_noRenderbuffer:"get_noRenderbuffer",get_noFramebuffer:"get_noFramebuffer",get_noTexture:"get_noTexture"}},function(){}),Nt=((x["clay.opengl.GLGraphicsDriver_RenderTarget"]=Bt).__name__="clay.opengl.GLGraphicsDriver_RenderTarget",Bt.prototype={__class__:Bt},function(){this.textures=[]}),ee=((x["clay.opengl.GLGraphicsDriver_GpuShader"]=Nt).__name__="clay.opengl.GLGraphicsDriver_GpuShader",Nt.prototype={__class__:Nt},function(){}),Lt=((x["clay.opengl.web.GL"]=ee).__name__="clay.opengl.web.GL",ee.__properties__={get_version:"get_version"},ee.versionString=function(){return"/ "+ee.gl.getParameter(7938)+" / "+ee.gl.getParameter(35724)+" / "+ee.gl.getParameter(7937)+" / "+ee.gl.getParameter(7936)+" /"},ee.activeTexture=function(e){ee.gl.activeTexture(e)},ee.attachShader=function(e,n){ee.gl.attachShader(e,n)},ee.bindAttribLocation=function(e,n,t){ee.gl.bindAttribLocation(e,n,t)},ee.bindBuffer=function(e,n){ee.gl.bindBuffer(e,n)},ee.bindFramebuffer=function(e,n){ee.gl.bindFramebuffer(e,n)},ee.bindRenderbuffer=function(e,n){ee.gl.bindRenderbuffer(e,n)},ee.bindTexture=function(e,n){ee.gl.bindTexture(e,n)},ee.blendColor=function(e,n,t,i){ee.gl.blendColor(e,n,t,i)},ee.blendEquation=function(e){ee.gl.blendEquation(e)},ee.blendEquationSeparate=function(e,n){ee.gl.blendEquationSeparate(e,n)},ee.blendFunc=function(e,n){ee.gl.blendFunc(e,n)},ee.blendFuncSeparate=function(e,n,t,i){ee.gl.blendFuncSeparate(e,n,t,i)},ee.bufferData=function(e,n,t){ee.gl.bufferData(e,n,t)},ee.bufferSubData=function(e,n,t){ee.gl.bufferSubData(e,n,t)},ee.checkFramebufferStatus=function(e){return ee.gl.checkFramebufferStatus(e)},ee.clear=function(e){ee.gl.clear(e)},ee.clearColor=function(e,n,t,i){ee.gl.clearColor(e,n,t,i)},ee.clearDepth=function(e){ee.gl.clearDepth(e)},ee.clearStencil=function(e){ee.gl.clearStencil(e)},ee.colorMask=function(e,n,t,i){ee.gl.colorMask(e,n,t,i)},ee.compileShader=function(e){ee.gl.compileShader(e)},ee.compressedTexImage2D=function(e,n,t,i,s,r,l){ee.gl.compressedTexImage2D(e,n,t,i,s,r,l)},ee.compressedTexSubImage2D=function(e,n,t,i,s,r,l,a){ee.gl.compressedTexSubImage2D(e,n,t,i,s,r,l,a)},ee.copyTexImage2D=function(e,n,t,i,s,r,l,a){ee.gl.copyTexImage2D(e,n,t,i,s,r,l,a)},ee.copyTexSubImage2D=function(e,n,t,i,s,r,l,a){ee.gl.copyTexSubImage2D(e,n,t,i,s,r,l,a)},ee.createBuffer=function(){return ee.gl.createBuffer()},ee.createFramebuffer=function(){return ee.gl.createFramebuffer()},ee.createProgram=function(){return ee.gl.createProgram()},ee.createRenderbuffer=function(){return ee.gl.createRenderbuffer()},ee.createShader=function(e){return ee.gl.createShader(e)},ee.createTexture=function(){return ee.gl.createTexture()},ee.cullFace=function(e){ee.gl.cullFace(e)},ee.deleteBuffer=function(e){ee.gl.deleteBuffer(e)},ee.deleteFramebuffer=function(e){ee.gl.deleteFramebuffer(e)},ee.deleteProgram=function(e){ee.gl.deleteProgram(e)},ee.deleteRenderbuffer=function(e){ee.gl.deleteRenderbuffer(e)},ee.deleteShader=function(e){ee.gl.deleteShader(e)},ee.deleteTexture=function(e){ee.gl.deleteTexture(e)},ee.depthFunc=function(e){ee.gl.depthFunc(e)},ee.depthMask=function(e){ee.gl.depthMask(e)},ee.depthRange=function(e,n){ee.gl.depthRange(e,n)},ee.detachShader=function(e,n){ee.gl.detachShader(e,n)},ee.disable=function(e){ee.gl.disable(e)},ee.disableVertexAttribArray=function(e){ee.gl.disableVertexAttribArray(e)},ee.drawArrays=function(e,n,t){ee.gl.drawArrays(e,n,t)},ee.drawElements=function(e,n,t,i){ee.gl.drawElements(e,n,t,i)},ee.enable=function(e){ee.gl.enable(e)},ee.enableVertexAttribArray=function(e){ee.gl.enableVertexAttribArray(e)},ee.finish=function(){ee.gl.finish()},ee.flush=function(){ee.gl.flush()},ee.framebufferRenderbuffer=function(e,n,t,i){ee.gl.framebufferRenderbuffer(e,n,t,i)},ee.framebufferTexture2D=function(e,n,t,i,s){ee.gl.framebufferTexture2D(e,n,t,i,s)},ee.frontFace=function(e){ee.gl.frontFace(e)},ee.generateMipmap=function(e){ee.gl.generateMipmap(e)},ee.getActiveAttrib=function(e,n){return ee.gl.getActiveAttrib(e,n)},ee.getActiveUniform=function(e,n){return ee.gl.getActiveUniform(e,n)},ee.getAttachedShaders=function(e){return ee.gl.getAttachedShaders(e)},ee.getAttribLocation=function(e,n){return ee.gl.getAttribLocation(e,n)},ee.getBufferParameter=function(e,n){return ee.gl.getBufferParameter(e,n)},ee.getContextAttributes=function(){return ee.gl.getContextAttributes()},ee.getError=function(){return ee.gl.getError()},ee.getExtension=function(e){return ee.gl.getExtension(e)},ee.getFramebufferAttachmentParameter=function(e,n,t){return ee.gl.getFramebufferAttachmentParameter(e,n,t)},ee.getParameter=function(e){return ee.gl.getParameter(e)},ee.getProgramInfoLog=function(e){return ee.gl.getProgramInfoLog(e)},ee.getProgramParameter=function(e,n){return ee.gl.getProgramParameter(e,n)},ee.getRenderbufferParameter=function(e,n){return ee.gl.getRenderbufferParameter(e,n)},ee.getShaderInfoLog=function(e){return ee.gl.getShaderInfoLog(e)},ee.getShaderParameter=function(e,n){return ee.gl.getShaderParameter(e,n)},ee.getShaderPrecisionFormat=function(e,n){return ee.gl.getShaderPrecisionFormat(e,n)},ee.getShaderSource=function(e){return ee.gl.getShaderSource(e)},ee.getSupportedExtensions=function(){return ee.gl.getSupportedExtensions()},ee.getTexParameter=function(e,n){return ee.gl.getTexParameter(e,n)},ee.getUniform=function(e,n){return ee.gl.getUniform(e,n)},ee.getUniformLocation=function(e,n){return ee.gl.getUniformLocation(e,n)},ee.getVertexAttrib=function(e,n){return ee.gl.getVertexAttrib(e,n)},ee.getVertexAttribOffset=function(e,n){return ee.gl.getVertexAttribOffset(e,n)},ee.hint=function(e,n){ee.gl.hint(e,n)},ee.isBuffer=function(e){return ee.gl.isBuffer(e)},ee.isEnabled=function(e){return ee.gl.isEnabled(e)},ee.isFramebuffer=function(e){return ee.gl.isFramebuffer(e)},ee.isProgram=function(e){return ee.gl.isProgram(e)},ee.isRenderbuffer=function(e){return ee.gl.isRenderbuffer(e)},ee.isShader=function(e){return ee.gl.isShader(e)},ee.isTexture=function(e){return ee.gl.isTexture(e)},ee.lineWidth=function(e){ee.gl.lineWidth(e)},ee.linkProgram=function(e){ee.gl.linkProgram(e)},ee.pixelStorei=function(e,n){ee.gl.pixelStorei(e,n)},ee.polygonOffset=function(e,n){ee.gl.polygonOffset(e,n)},ee.readPixels=function(e,n,t,i,s,r,l){ee.gl.readPixels(e,n,t,i,s,r,l)},ee.renderbufferStorage=function(e,n,t,i){ee.gl.renderbufferStorage(e,n,t,i)},ee.renderbufferStorageMultisample=function(e,n,t,i,s){ee.gl.renderbufferStorageMultisample(e,n,t,i,s)},ee.clearBufferfv=function(e,n,t,i){ee.gl.clearBufferfv(e,n,t,i=null==i?0:i)},ee.blitFramebuffer=function(e,n,t,i,s,r,l,a,h,c){ee.gl.blitFramebuffer(e,n,t,i,s,r,l,a,h,c)},ee.sampleCoverage=function(e,n){ee.gl.sampleCoverage(e,n)},ee.scissor=function(e,n,t,i){ee.gl.scissor(e,n,t,i)},ee.shaderSource=function(e,n){ee.gl.shaderSource(e,n)},ee.stencilFunc=function(e,n,t){ee.gl.stencilFunc(e,n,t)},ee.stencilFuncSeparate=function(e,n,t,i){ee.gl.stencilFuncSeparate(e,n,t,i)},ee.stencilMask=function(e){ee.gl.stencilMask(e)},ee.stencilMaskSeparate=function(e,n){ee.gl.stencilMaskSeparate(e,n)},ee.stencilOp=function(e,n,t){ee.gl.stencilOp(e,n,t)},ee.stencilOpSeparate=function(e,n,t,i){ee.gl.stencilOpSeparate(e,n,t,i)},ee.texImage2D=function(e,n,t,i,s,r,l,a,h){ee.gl.texImage2D(e,n,t,i,s,r,l,a,h)},ee.texParameterf=function(e,n,t){ee.gl.texParameterf(e,n,t)},ee.texParameteri=function(e,n,t){ee.gl.texParameteri(e,n,t)},ee.texSubImage2D=function(e,n,t,i,s,r,l,a,h){ee.gl.texSubImage2D(e,n,t,i,s,r,l,a,h)},ee.uniform1f=function(e,n){ee.gl.uniform1f(e,n)},ee.uniform1fv=function(e,n){ee.gl.uniform1fv(e,n)},ee.uniform1i=function(e,n){ee.gl.uniform1i(e,n)},ee.uniform1iv=function(e,n){ee.gl.uniform1iv(e,n)},ee.uniform2f=function(e,n,t){ee.gl.uniform2f(e,n,t)},ee.uniform2fv=function(e,n){ee.gl.uniform2fv(e,n)},ee.uniform2i=function(e,n,t){ee.gl.uniform2i(e,n,t)},ee.uniform2iv=function(e,n){ee.gl.uniform2iv(e,n)},ee.uniform3f=function(e,n,t,i){ee.gl.uniform3f(e,n,t,i)},ee.uniform3fv=function(e,n){ee.gl.uniform3fv(e,n)},ee.uniform3i=function(e,n,t,i){ee.gl.uniform3i(e,n,t,i)},ee.uniform3iv=function(e,n){ee.gl.uniform3iv(e,n)},ee.uniform4f=function(e,n,t,i,s){ee.gl.uniform4f(e,n,t,i,s)},ee.uniform4fv=function(e,n){ee.gl.uniform4fv(e,n)},ee.uniform4i=function(e,n,t,i,s){ee.gl.uniform4i(e,n,t,i,s)},ee.uniform4iv=function(e,n){ee.gl.uniform4iv(e,n)},ee.uniformMatrix2fv=function(e,n,t){ee.gl.uniformMatrix2fv(e,n,t)},ee.uniformMatrix3fv=function(e,n,t){ee.gl.uniformMatrix3fv(e,n,t)},ee.uniformMatrix4fv=function(e,n,t){ee.gl.uniformMatrix4fv(e,n,t)},ee.useProgram=function(e){ee.gl.useProgram(e)},ee.validateProgram=function(e){ee.gl.validateProgram(e)},ee.vertexAttrib1f=function(e,n){ee.gl.vertexAttrib1f(e,n)},ee.vertexAttrib1fv=function(e,n){ee.gl.vertexAttrib1fv(e,n)},ee.vertexAttrib2f=function(e,n,t){ee.gl.vertexAttrib2f(e,n,t)},ee.vertexAttrib2fv=function(e,n){ee.gl.vertexAttrib2fv(e,n)},ee.vertexAttrib3f=function(e,n,t,i){ee.gl.vertexAttrib3f(e,n,t,i)},ee.vertexAttrib3fv=function(e,n){ee.gl.vertexAttrib3fv(e,n)},ee.vertexAttrib4f=function(e,n,t,i,s){ee.gl.vertexAttrib4f(e,n,t,i,s)},ee.vertexAttrib4fv=function(e,n){ee.gl.vertexAttrib4fv(e,n)},ee.vertexAttribPointer=function(e,n,t,i,s,r){ee.gl.vertexAttribPointer(e,n,t,i,s,r)},ee.viewport=function(e,n,t,i){ee.gl.viewport(e,n,t,i)},ee.get_version=function(){return 7938},function(e){ic.call(this,e)}),Wt=((x["clay.web.WebAssets"]=Lt).__name__="clay.web.WebAssets",Lt.__super__=ic,Lt.prototype=$extend(ic.prototype,{isSynchronous:function(){return!1},loadImage:function(e,n,t,i){null==t&&(t=!1),null==n&&(n=4);var s=this;if(null==e)throw Y.thrown("Image path is null!");var r=An.extension(e);return this.app.io.loadData(e,!0,null,function(e){null==e?null!=i&&yt.push(function(){i(null)}):s.imageFromBytesUsingImageElement(e,r,4,null,function(e){null!=i&&yt.push(function(){i(e)})})}),null},decodeImageFromElement:function(e,n){var t=(n=null==n?!0:n)?this.nearestPowerOfTwo(e.width):e.width,n=n?this.nearestPowerOfTwo(e.height):e.height,i=this.paddedBytesFromElement(e.width,e.height,t,n,e),e=new O1(e.width,e.height,t,n,4,4,i);return e},imageFromBytes:function(e,n,t,i,s){return this.imageFromBytesUsingImageElement(e,n,t=null==t?4:t,i=null==i?!0:i,s)},imageFromBytesUsingImageElement:function(e,n,t,i,s){null==i&&(i=!0),null==t&&(t=4);var r=this;if(null==e)throw Y.thrown("Image bytes are null!");for(var l="",a=0,h=e.length;a<h;){var c=255&e[a++];l+=String.fromCodePoint(c)}var t="data:image/"+n+";base64,"+window.btoa(l),o=new Image;return o.onload=function(e){var n=r.decodeImageFromElement(o,i);null!=s&&yt.push(function(){s(n)})},o.onerror=function(e){E.error("failed to load image from bytes, on error: "+e,{fileName:"clay/web/WebAssets.hx",lineNumber:216,className:"clay.web.WebAssets",methodName:"imageFromBytesUsingImageElement"})},o.src=t,null},pixelsToPngData:function(n,e,t,i){var s=window.document.createElement("canvas"),r=(s.width=n,s.height=e,s.getContext("2d",null)),t=(r.clearRect(0,0,s.width,s.height),new Uint8ClampedArray(t.buffer)),l=r.createImageData(n,e);l.data.set(t);try{r.putImageData(l,0,0),s.toBlob(function(e){e.arrayBuffer().then(function(e){e=new Uint8Array(e,0,e.byteLength);i(e),l=r=s=null})},"image/png")}catch(e){jt.lastError=e;n=Y.caught(e).unwrap();throw Y.thrown(n)}},paddedBytesFromPixels:function(e,n,t,i,s){var r=window.document.createElement("canvas"),t=(r.width=t,r.height=i,r.getContext("2d",null)),i=(t.clearRect(0,0,r.width,r.height),null),s=new Uint8ClampedArray(s.buffer),e=t.createImageData(e,n);e.data.set(s);try{t.putImageData(e,0,0),i=t.getImageData(0,0,r.width,r.height)}catch(e){jt.lastError=e;n=Y.caught(e).unwrap();throw Y.thrown(n)}return e=t=r=null,new Uint8Array(i.data)},paddedBytesFromElement:function(e,n,t,i,s){var r=window.document.createElement("canvas"),t=(r.width=t,r.height=i,r.getContext("2d",null)),i=(t.clearRect(0,0,r.width,r.height),t.drawImage(s,0,0,e,n),null);try{i=t.getImageData(0,0,r.width,r.height)}catch(e){jt.lastError=e;s=Y.caught(e).unwrap();throw E.info("- textures served from file:/// throw security errors\n- textures served over http:// work for cross origin byte requests",{fileName:"clay/web/WebAssets.hx",lineNumber:333,className:"clay.web.WebAssets",methodName:"paddedBytesFromElement"}),Y.thrown(s)}return t=r=null,new Uint8Array(i.data)},nearestPowerOfTwo:function(e){return Lt.POT?(--e,e=(e=(e=(e=(e|=e>>1)|e>>2)|e>>4)|e>>8)|e>>16,++e):e},__class__:Lt}),function(e){this.active=!1,this.workletMessageCallbacks=[],this.pendingBusWorkletCallbacks=[],this.ignoreEndedSoundsTick1=[],this.ignoreEndedSoundsTick0=[],this.handleSeq=0,this.suspended=!1,jc.call(this,e),this.instances=new ei,this.busses=new ei,this.workletModules=new te}),Gt=((x["clay.web.WebAudio"]=Wt).__name__="clay.web.WebAudio",Wt.__super__=jc,Wt.prototype=$extend(jc.prototype,{init:function(){this.initWebAudio(),this.createDefaultBus()},tick:function(e){for(var n=this.instances,t=n,i=n.keys();i.hasNext();){var s=i.next(),s={value:t.get(s),key:s},r=s.key,l=s.value;if(l.loop&&1==l.state){var a=1==l.state?l.timeResume+(this.app.timestamp-l.timeResumeAppTime)*l.pitch:0,h=l.source.getDuration();if(0<h&&h<=a)for(this.app.events.audioEvent(0,r);h<=a;)a-=h,l.timeResumeAppTime+=h/l.pitch}}for(;0<this.ignoreEndedSoundsTick1.length;)0<(l=this.ignoreEndedSoundsTick1.shift()).ignoreNextEnded&&l.ignoreNextEnded--;for(;0<this.ignoreEndedSoundsTick0.length;){l=this.ignoreEndedSoundsTick0.shift();this.ignoreEndedSoundsTick1.push(l)}},initWebAudio:function(e){null==e&&(e=44100);try{this.context=new AudioContext({sampleRate:44100})}catch(e){jt.lastError=e;try{this.context=new window.webkitAudioContext}catch(e){return void E.debug("Audio / webaudio / no AudioContext could be created! No audio loading or playback will be available.",{fileName:"clay/web/WebAudio.hx",lineNumber:138,className:"clay.web.WebAudio",methodName:"initWebAudio"})}}if(null==this.context)throw Y.thrown("Audio / webaudio / no AudioContext could be created, is the Web Audio API supported?");e="channelCount: "+this.context.destination.channelCount+', channelCountMode: "'+this.context.destination.channelCountMode+'", channelInterpretation: "'+this.context.destination.channelInterpretation+'", maxChannelCount: '+this.context.destination.maxChannelCount+", numberOfInputs: "+this.context.destination.numberOfInputs+", numberOfOutputs: "+this.context.destination.numberOfOutputs;E.debug("Audio / webaudio: "+L.string(this.context)+" / sampleRate: "+this.context.sampleRate+" / destination: "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:154,className:"clay.web.WebAudio",methodName:"initWebAudio"}),this.active=!0},shutdown:function(){for(var e=this.busses.iterator();e.hasNext();){var n=e.next();null!=n.workletNode&&n.workletNode.disconnect(),null!=n.silentSource&&(n.silentSource.stop(),n.silentSource.disconnect()),n.gainNode.disconnect()}this.busses.h={},this.context.close()},createDefaultBus:function(){this.createBus(0,null,1)},createBus:function(e,n,t){if(null==t&&(t=1),null==n&&(n=""),this.busses.h.hasOwnProperty(e))E.warning("Audio / Bus "+e+" already exists",{fileName:"clay/web/WebAudio.hx",lineNumber:185,className:"clay.web.WebAudio",methodName:"createBus"});else{for(var i=this.context.createGain(),n=(i.gain.value=t,i.connect(this.context.destination),0<n.length?n:"bus-"+e),s=[],r=0;r<128;){r++;s.push(0)}i={ready:!1,index:e,gainNode:i,workletNode:null,silentSource:null,volume:t,active:!0,name:n,parameterValues:s};this.busses.h[e]=i,E.debug("Audio / Created bus "+e+": "+i.name,{fileName:"clay/web/WebAudio.hx",lineNumber:206,className:"clay.web.WebAudio",methodName:"createBus"})}},destroyBus:function(e){if(0==e)E.warning("Audio / Cannot destroy default bus",{fileName:"clay/web/WebAudio.hx",lineNumber:211,className:"clay.web.WebAudio",methodName:"destroyBus"});else{var n=this.busses.h[e];if(null!=n){for(var t=this.instances,i=t,s=t.keys();s.hasNext();){var r=s.next(),r={value:i.get(r),key:r};r.value.bus==e&&this.stop(r.key)}null!=n.workletNode&&n.workletNode.disconnect(),null!=n.silentSource&&(n.silentSource.stop(),n.silentSource.disconnect()),n.gainNode.disconnect(),this.busses.remove(e),E.debug("Audio / Destroyed bus "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:238,className:"clay.web.WebAudio",methodName:"destroyBus"})}}},setBusVolume:function(e,n){var t=this.busses.h[e];null!=t&&(t.volume=n,t.gainNode.gain.value=n,E.debug("Audio / Set bus "+e+" volume to "+n,{fileName:"clay/web/WebAudio.hx",lineNumber:247,className:"clay.web.WebAudio",methodName:"setBusVolume"}))},getBusVolume:function(e){e=this.busses.h[e];return null!=e?e.volume:0},setBusActive:function(e,n){var t=this.busses.h[e];null!=t&&(t.active=n,t.gainNode.gain.value=n?t.volume:0,E.debug("Audio / Set bus "+e+" active: "+(null==n?"null":""+n),{fileName:"clay/web/WebAudio.hx",lineNumber:261,className:"clay.web.WebAudio",methodName:"setBusActive"}))},loadWorkletModule:function(n,e,t){var i=this;Object.prototype.hasOwnProperty.call(this.workletModules.h,n)?(E.debug("Audio / Worklet module "+n+" already loaded",{fileName:"clay/web/WebAudio.hx",lineNumber:268,className:"clay.web.WebAudio",methodName:"loadWorkletModule"}),null!=t&&t(!0)):P.field(this.context,"audioWorklet").addModule(e).then(function(e){i.workletModules.h[n]=!0,E.debug("Audio / Loaded worklet module: "+n,{fileName:"clay/web/WebAudio.hx",lineNumber:275,className:"clay.web.WebAudio",methodName:"loadWorkletModule"}),null!=t&&t(!0)}).catch(function(e){E.error("Audio / Failed to load worklet module "+n+": "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:279,className:"clay.web.WebAudio",methodName:"loadWorkletModule"}),null!=t&&t(!1)})},attachWorkletToBus:function(s,e,n,r){var l=this,a=this.busses.h[s];if(null==a)return E.error("Audio / Bus "+s+" does not exist",{fileName:"clay/web/WebAudio.hx",lineNumber:287,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),!1;if(!Object.prototype.hasOwnProperty.call(this.workletModules.h,e))return E.error("Audio / Worklet module "+e+" not loaded",{fileName:"clay/web/WebAudio.hx",lineNumber:292,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),!1;null!=a.workletNode&&(a.workletNode.disconnect(),null!=a.silentSource)&&(a.silentSource.stop(),a.silentSource.disconnect(),a.silentSource=null);try{var h=new AudioWorkletNode(this.context,e,n);if(null!=a.parameterValues)for(var t=0;t<128;){var i=t++,c=h.parameters.get("param"+i);null!=c&&(c.value=a.parameterValues[i])}var o=this.context.createConstantSource(),u=(o.offset.value=0,this.context.createGain()),_=(u.gain.value=1,u.channelCount=2,u.channelCountMode="explicit",u.channelInterpretation="speakers",this.context.createChannelMerger(2));return o.connect(_,0,0),o.connect(_,0,1),a.gainNode.disconnect(),a.gainNode.connect(u),_.connect(u),u.connect(h),h.connect(this.context.destination),o.start(),a.workletNode=h,a.silentSource=o,h.port.onmessage=function(e){var n=null!=e?e.data:null,n=null!=n?n.type:null;if(null!=n)switch(n){case"addBusFilterWorklet":for(var t=l.workletMessageCallbacks.length-1;0<=t;){var i=l.workletMessageCallbacks[t];"addBusFilterWorklet"==i.type&&i.bus==e.data.bus&&i.filterId==e.data.filterId&&(l.workletMessageCallbacks.splice(t,1),i.callback()),--t}break;case"ready":a.ready=!0,l.flushBusWorkletReadyCallbacks(s),null!=r&&(r(),r=null,h.port.postMessage({type:"ready"}));break;case"trace":Xt.trace(e.data,{fileName:"clay/web/WebAudio.hx",lineNumber:357,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"})}},E.debug("Audio / Attached worklet "+e+" to bus "+s+" with stereo silent source",{fileName:"clay/web/WebAudio.hx",lineNumber:382,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),!0}catch(t){jt.lastError=t;n=Y.caught(t).unwrap();return E.error("Audio / Failed to create worklet node: "+L.string(n),{fileName:"clay/web/WebAudio.hx",lineNumber:386,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),a.gainNode.connect(this.context.destination),!1}},detachWorkletFromBus:function(e){var n=this.busses.h[e];null!=n&&null!=n.workletNode&&n.ready&&(n.workletNode.disconnect(),null!=n.silentSource&&(n.silentSource.stop(),n.silentSource.disconnect(),n.silentSource=null),n.gainNode.disconnect(),n.gainNode.connect(this.context.destination),n.workletNode=null,E.debug("Audio / Detached worklet from bus "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:411,className:"clay.web.WebAudio",methodName:"detachWorkletFromBus"}))},sendMessageToWorklet:function(e,n){e=this.busses.h[e];null!=e&&null!=e.workletNode&&e.ready&&e.workletNode.port.postMessage(n)},flushBusWorkletReadyCallbacks:function(e){var n=this.pendingBusWorkletCallbacks[e];if(null!=n){this.pendingBusWorkletCallbacks[e]=null;for(var t=0,i=n.length;t<i;)(0,n[t++])()}},scheduleWhenBusWorkletReady:function(e,n){var t=this.busses.h[e];null!=t&&null!=t.workletNode&&t.ready?n():(null==(t=this.pendingBusWorkletCallbacks[e])&&(this.pendingBusWorkletCallbacks[e]=t=[]),t.push(n))},setWorkletParameterWhenReady:function(e,n,t){var i=this,s=this.busses.h[e];null!=s&&null!=s.workletNode&&s.ready?this.setWorkletParameter(e,n,t):this.scheduleWhenBusWorkletReady(e,function(){i.setWorkletParameter(e,n,t)})},setWorkletParameter:function(e,n,t){var i,s=this.busses.h[e];null!=s&&null!=s.workletNode&&s.ready&&(null!=(i=s.workletNode.parameters.get(n))?(i.value=t,z.startsWith(n,"param")&&null!=(i=L.parseInt(le.substr(n,5,null)))&&0<=i&&i<128&&(s.parameterValues[i]=t)):E.warning('Audio / Unknown worklet parameter named "'+n+'" for bus '+e,{fileName:"clay/web/WebAudio.hx",lineNumber:480,className:"clay.web.WebAudio",methodName:"setWorkletParameter"}))},setWorkletParameterByIndexWhenReady:function(e,n,t){var i=this,s=this.busses.h[e];null!=s&&null!=s.workletNode&&s.ready?this.setWorkletParameterByIndex(e,n,t):this.scheduleWhenBusWorkletReady(e,function(){i.setWorkletParameterByIndex(e,n,t)})},setWorkletParameterByIndex:function(e,n,t){n<0||128<=n?E.warning("Audio / Parameter index "+n+" out of range (0-127)",{fileName:"clay/web/WebAudio.hx",lineNumber:498,className:"clay.web.WebAudio",methodName:"setWorkletParameterByIndex"}):this.setWorkletParameter(e,"param"+n,t)},getWorkletParameterByIndex:function(e,n){return n<0||128<=n||null==(e=this.busses.h[e])||null==e.parameterValues?0:e.parameterValues[n]},soundOf:function(e){return this.instances.h[e]},getBusGainNode:function(e){var n=this.busses.h[e];return null==n&&(E.debug("Audio / Bus "+e+" does not exist, creating it automatically",{fileName:"clay/web/WebAudio.hx",lineNumber:524,className:"clay.web.WebAudio",methodName:"getBusGainNode"}),this.createBus(e),n=this.busses.h[e]),n.gainNode},playBuffer:function(e){var n=this.context.createBufferSource();return n.buffer=e.buffer,n},playBufferAgain:function(e,n,t){var i=this,s=(n.bufferNode=this.playBuffer(n.source.data),n.bufferNode.playbackRate.value=n.pitch,n.bufferNode.connect(n.panNode),n.bufferNode.loop=n.loop,n.panNode.connect(n.gainNode),this.getBusGainNode(n.bus));n.gainNode.connect(s),n.bufferNode.start(0,t),n.bufferNode.onended=function(){i.soundEnded(n)}},playInstance:function(e,n,t,i,s,r,l,a){null==a&&(a=0);var h=this,c=this.context.createGain(),o=this.context.createPanner(),u=null,r=(c.gain.value=r,o.panningModel="equalpower",o.setPosition(Math.cos(-1.5707),0,Math.sin(1.5707)),null!=s&&((u=s).loop=l),null!=i.mediaNode&&(u=i.mediaNode,i.mediaElem.loop=l),u.connect(o),o.connect(c),this.getBusGainNode(a)),_=(c.connect(r),{handle:e,source:n,instance:t,bus:a,bufferNode:s,mediaNode:i.mediaNode,mediaElem:i.mediaElem,gainNode:c,panNode:o,state:1,loop:l,pan:0,pitch:1,ignoreNextEnded:0,timeResumeAppTime:window.performance.now()/1e3-Vt.timestampStart,timeResume:0,timePause:null});this.instances.h[e]=_,null!=s&&(s.start(0),s.onended=function(){h.soundEnded(_)}),null!=i.mediaNode&&(i.mediaElem.play(),i.mediaElem.onended=function(){h.soundEnded(_)})},play:function(e,n,t,i){null==i&&(i=0);var s=e.data,r=this.handleSeq,l=e.instance(r);return e.data.isStream?(s.mediaElem.play(),s.mediaElem.volume=1,this.playInstance(r,e,l,s,null,n,!1,i)):this.playInstance(r,e,l,s,this.playBuffer(s),n,!1,i),this.handleSeq++,t&&this.pause(r),r},loop:function(e,n,t,i){null==i&&(i=0);var s=e.data,r=this.handleSeq,l=e.instance(r);return e.data.isStream?(s.mediaElem.play(),s.mediaElem.volume=1,this.playInstance(r,e,l,s,null,n,!0,i)):this.playInstance(r,e,l,s,this.playBuffer(s),n,!0,i),this.handleSeq++,t&&this.pause(r),r},stopBuffer:function(e){e.bufferNode.stop(),e.bufferNode.disconnect(),e.gainNode.disconnect(),e.panNode.disconnect(),e.bufferNode=null},pause:function(e){var n=this.instances.h[e];null!=n&&1==n.state&&(E.debug("Audio / pause handle="+e+", "+n.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:692,className:"clay.web.WebAudio",methodName:"pause"}),e=this.positionOf(e),n.timePause=e,n.state=0,null!=n.bufferNode?this.stopBuffer(n):null!=n.mediaNode&&n.mediaElem.pause())},unPause:function(e){var n=this.instances.h[e];null!=n&&0==n.state&&(E.debug("Audio / unpause handle="+e+", "+n.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:713,className:"clay.web.WebAudio",methodName:"unPause"}),n.timeResume=null!=n.timePause?n.timePause:0,n.timeResumeAppTime=window.performance.now()/1e3-Vt.timestampStart,null==n.mediaNode?this.playBufferAgain(e,n,n.timePause):n.mediaElem.play(),n.state=1)},soundEnded:function(e){0<e.ignoreNextEnded?e.ignoreNextEnded--:0!=e.state&&(1!=e.state||this.positionOf(e.handle)+.1>=e.source.getDuration())&&this.destroySound(e)},destroySound:function(e){null!=e.source&&this.instances.h.hasOwnProperty(e.handle)&&this.positionOf(e.handle)+.1>=e.source.getDuration()&&this.app.events.audioEvent(0,e.handle),null!=e.bufferNode&&(e.bufferNode.stop(),e.bufferNode.disconnect(),e.gainNode.disconnect(),e.panNode.disconnect(),e.bufferNode=null),null!=e.mediaNode&&(e.mediaElem.pause(),e.mediaElem.currentTime=0,e.mediaNode.disconnect(),e.mediaElem=null,e.mediaNode=null),null!=e.gainNode&&(e.gainNode.disconnect(),e.gainNode=null),null!=e.panNode&&(e.panNode.disconnect(),e.panNode=null),this.instances.h.hasOwnProperty(e.handle)&&(this.instances.remove(e.handle),this.app.events.audioEvent(1,e.handle))},stop:function(e){var n=this.instances.h[e];null!=n&&(2!=n.state&&E.debug("Audio / stop handle="+e+(null!=n.source&&null!=n.source.data?", "+n.source.data.id:""),{fileName:"clay/web/WebAudio.hx",lineNumber:781,className:"clay.web.WebAudio",methodName:"stop"}),this.destroySound(n),n.state=2)},volume:function(e,n){var t=this.instances.h[e];null!=t&&(E.debug("Audio / volume="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:792,className:"clay.web.WebAudio",methodName:"volume"}),t.gainNode.gain.value=n)},pan:function(e,n){var t=this.instances.h[e];null!=t&&(E.debug("Audio / pan="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:802,className:"clay.web.WebAudio",methodName:"pan"}),t.pan=n,t.panNode.setPosition(Math.cos(1.5707*(n-1)),0,Math.sin(1.5707*(n+1))))},pitch:function(e,n){var t=this.instances.h[e];null!=t&&(E.debug("Audio / pitch="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:816,className:"clay.web.WebAudio",methodName:"pitch"}),null==t.mediaNode&&(e=this.positionOf(e),t.pitch=n,1==t.state)&&(t.timeResumeAppTime=t.timeResume+(window.performance.now()/1e3-Vt.timestampStart)-e/t.pitch),null!=t.bufferNode?t.bufferNode.playbackRate.value=n:t.mediaNode)},position:function(e,n){var t=this.instances.h[e];null!=t&&(E.debug("Audio / position="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:839,className:"clay.web.WebAudio",methodName:"position"}),0==t.state?t.timePause=n:(t.timeResume=n,t.timeResumeAppTime=window.performance.now()/1e3-Vt.timestampStart,null!=t.bufferNode?(t.ignoreNextEnded++,this.ignoreEndedSoundsTick0.push(t),this.stopBuffer(t),this.playBufferAgain(e,t,n)):t.mediaElem.currentTime=n))},volumeOf:function(e){e=this.instances.h[e];return null==e?0:e.gainNode.gain.value},panOf:function(e){e=this.instances.h[e];return null==e?0:e.pan},pitchOf:function(e){e=this.instances.h[e];return null==e?1:e.pitch},positionOf:function(e){var n,t=this.instances.h[e];if(null==t)return 0;if(null!=t.mediaElem)return t.mediaElem.currentTime;switch(t.state){case 0:case 1:switch(t.state){case 0:n=t.timePause;break;case 1:n=t.timeResume+(window.performance.now()/1e3-Vt.timestampStart-t.timeResumeAppTime)*t.pitch;break;default:n=0}var i=t.source.getDuration();return 0<i&&(t.loop?n%=i:i<n&&(n=i)),n;case-1:case 2:return 0}},stateOf:function(e){e=this.instances.h[e];return null==e?-1:e.state},loopOf:function(e){e=this.instances.h[e];return null!=e&&e.loop},instanceOf:function(e){e=this.instances.h[e];return null==e?null:e.instance},suspend:function(){!this.active||this.suspended||(this.suspended=!0,this.active=!1,this.context.suspend())},resume:function(){this.active||this.suspended&&(this.suspended=!1,this.active=!0,this.context.resume())},getSoundBus:function(e){e=this.instances.h[e];return null!=e?e.bus:-1},moveSoundToBus:function(e,n){var t,i=this.instances.h[e];return null!=i&&null!=(t=this.busses.h[n])&&(i.gainNode.disconnect(),i.gainNode.connect(t.gainNode),i.bus=n,E.debug("Audio / Moved sound "+e+" to bus "+n,{fileName:"clay/web/WebAudio.hx",lineNumber:975,className:"clay.web.WebAudio",methodName:"moveSoundToBus"}),!0)},listBusses:function(){for(var e=[],n=this.busses.keys();n.hasNext();){var t=n.next();e.push(t)}return e},getBusName:function(e){e=this.busses.h[e];return null!=e?e.name:""},createBusFilter:function(e,n,t,i){var s=this;this.busses.h.hasOwnProperty(n)||(E.debug("Audio / Bus "+n+" does not exist for filter, creating it automatically",{fileName:"clay/web/WebAudio.hx",lineNumber:996,className:"clay.web.WebAudio",methodName:"createBusFilter"}),this.createBus(n)),this.loadWorkletModule("bus-worklet",e,function(e){e?s.attachWorkletToBus(n,"bus-worklet",{},function(){E.debug("Audio / Worklet attached to bus #"+n+" is now ready!",{fileName:"clay/web/WebAudio.hx",lineNumber:1003,className:"clay.web.WebAudio",methodName:"createBusFilter"}),t(n,n)})||E.error("Audio / Failed to attach worklet to bus #"+n,{fileName:"clay/web/WebAudio.hx",lineNumber:1008,className:"clay.web.WebAudio",methodName:"createBusFilter"}):E.error("Audio / Failed to load create bus filter #"+n,{fileName:"clay/web/WebAudio.hx",lineNumber:1012,className:"clay.web.WebAudio",methodName:"createBusFilter"})})},addBusFilterWorklet:function(e,n,t,i){this.busses.h.hasOwnProperty(e)||(E.debug("Audio / Bus "+e+" does not exist for filter worklet, creating it automatically",{fileName:"clay/web/WebAudio.hx",lineNumber:1022,className:"clay.web.WebAudio",methodName:"addBusFilterWorklet"}),this.createBus(e));var s=this.busses.h[e];null==s?E.error("Audio / Cannot add bus filter worklet: bus #"+e+" creation failed",{fileName:"clay/web/WebAudio.hx",lineNumber:1028,className:"clay.web.WebAudio",methodName:"addBusFilterWorklet"}):null==s.workletNode?E.error("Audio / Cannot add bus filter worklet: bus #"+e+" has no worklet node",{fileName:"clay/web/WebAudio.hx",lineNumber:1032,className:"clay.web.WebAudio",methodName:"addBusFilterWorklet"}):(t={type:"addBusFilterWorklet",bus:e,filterId:n,workletClass:t.__name__},null!=i&&this.workletMessageCallbacks.push({type:"addBusFilterWorklet",bus:e,filterId:n,callback:i}),s.workletNode.port.postMessage(t))},destroyBusFilterWorklet:function(e,n){var t=this.busses.h[e];null==t?E.warning("Audio / Cannot destroy bus filter worklet: bus #"+e+" does not exist",{fileName:"clay/web/WebAudio.hx",lineNumber:1058,className:"clay.web.WebAudio",methodName:"destroyBusFilterWorklet"}):null==t.workletNode?E.warning("Audio / Cannot destroy bus filter worklet: bus #"+e+" has no worklet node",{fileName:"clay/web/WebAudio.hx",lineNumber:1062,className:"clay.web.WebAudio",methodName:"destroyBusFilterWorklet"}):t.workletNode.port.postMessage({type:"destroyBusFilterWorklet",bus:e,filterId:n})},ensureBusExists:function(e){return!!this.busses.h.hasOwnProperty(e)||(E.debug("Audio / Auto-creating bus "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:1077,className:"clay.web.WebAudio",methodName:"ensureBusExists"}),this.createBus(e),this.busses.h.hasOwnProperty(e))},loadData:function(e,n,t,i,s){if(null==i&&(i=!1),null==e)throw Y.thrown("path is null!");return this.active?n?this.loadDataFromStream(e,t,s):this.loadDataFromSound(e,t,s):(E.error("Audio / WebAudio context unavailable",{fileName:"clay/web/WebAudio.hx",lineNumber:1091,className:"clay.web.WebAudio",methodName:"loadData"}),null!=s&&yt.push(function(){s(null)})),null},dataFromBytes:function(t,e,i,s){var r=this;if(this.active){if(null==t)throw Y.thrown("id is null!");if(null==e)throw Y.thrown("bytes is null!");this.context.decodeAudioData(e.buffer,function(e){var n=new Gt(r.app,e,null,null,new bc(t,0|e.sampleRate,e.length,e.duration,e.numberOfChannels,null,i,!1));null!=s&&yt.push(function(){s(n)})},function(){E.error("Audio / failed to decode audio for `"+t+"`",{fileName:"clay/web/WebAudio.hx",lineNumber:1141,className:"clay.web.WebAudio",methodName:"dataFromBytes"}),null!=s&&yt.push(function(){s(null)})})}else null!=s&&yt.push(function(){s(null)})},dataFromPCM:function(e,n,t,i,s,r,l,a){if(null==r&&(r=!0),this.active){if(null==e)throw Y.thrown("id is null!");if(null==n)throw Y.thrown("pcmData is null!");if(t<=0)throw Y.thrown("sampleFrames must be positive!");if(s<=0)throw Y.thrown("sampleRate must be positive!");if(i<=0)throw Y.thrown("channels must be positive!");try{var h=this.context.createBuffer(i,t,s);if(r)for(var c=0,o=i;c<o;)for(var u=c++,_=h.getChannelData(u),d=0,b=t;d<b;)(O=(f=d++)*i+u)<n.length?_[f]=n[O]:_[f]=0;else for(var p=n.length/i|0,c=0,o=i;c<o;)for(var f,O,u=c++,_=h.getChannelData(u),g=u*p,d=0,b=t;d<b;)(O=g+(f=d++))<n.length?_[f]=n[O]:_[f]=0;var m=new Gt(this.app,h,null,null,new bc(e,0|h.sampleRate,h.length,h.duration,h.numberOfChannels,null,l,!1));return E.debug("Audio / Created AudioData from PCM: "+e+" ("+i+" channels, "+t+" frames, "+s+"Hz, "+(r?"interleaved":"planar")+")",{fileName:"clay/web/WebAudio.hx",lineNumber:1231,className:"clay.web.WebAudio",methodName:"dataFromPCM"}),null!=a&&yt.push(function(){a(m)}),m}catch(c){jt.lastError=c;l=Y.caught(c).unwrap();E.error("Audio / Failed to create audio buffer from PCM data for `"+e+"`: "+L.string(l),{fileName:"clay/web/WebAudio.hx",lineNumber:1242,className:"clay.web.WebAudio",methodName:"dataFromPCM"}),null!=a&&yt.push(function(){a(null)})}}else null!=a&&yt.push(function(){a(null)});return null},handleSourceDestroyed:function(e){},handleInstanceDestroyed:function(e){this.stop(e)},loadDataFromSound:function(n,t,i){var s=this;this.app.io.loadData(n,!0,null,function(e){null!=e?s.dataFromBytes(n,e,t,i):null!=i&&yt.push(function(){i(null)})})},loadDataFromStream:function(l,a,h){var c=this,o=new Audio(l);o.autoplay=!1,o.controls=!1,o.preload="auto",o.onerror=function(e){var n;switch(o.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE";break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="unknown error"}E.error("Audio / failed to load `"+l+"` as stream : `"+n+"`",{fileName:"clay/web/WebAudio.hx",lineNumber:1295,className:"clay.web.WebAudio",methodName:"loadDataFromStream"}),null!=h&&yt.push(function(){h(null)})},o.onloadedmetadata=function(e){var n=c.context.createMediaElementSource(o),t=0|c.context.sampleRate,i=n.channelCount,s=o.duration*(t*i*2)|0,r=new Gt(c.app,null,n,o,new bc(l,t,s,o.duration,i,null,a,!0));null!=h&&yt.push(function(){h(r)})}},__class__:Wt}),function(e,n,t,i,s){this.buffer=n,this.mediaNode=t,this.mediaElem=i,cc.call(this,e,s)}),Kt=((x["clay.web._WebAudio.WebAudioData"]=Gt).__name__="clay.web._WebAudio.WebAudioData",Gt.__super__=cc,Gt.prototype=$extend(cc.prototype,{destroy:function(){this.buffer=null,this.mediaNode=null,this.mediaElem=null,cc.prototype.destroy.call(this)},__class__:Gt}),function(e,n,t,i,s,r,l){this.mouseUseBrowserWindowEvents=!0,this.preventDefaultKeys=[1073741904,1073741903,1073741906,1073741905,8,9,127,32],this.preventDefaultTouches=!0,this.preventDefaultMouseWheel=!0,this.preventDefaultContextMenu=!0,this.windowParent=window.document.body,this.windowId="app",null!=e&&(this.windowId=e),null!=n&&(this.windowParent=n),null!=t&&(this.preventDefaultContextMenu=t),null!=i&&(this.preventDefaultMouseWheel=i),null!=s&&(this.preventDefaultTouches=s),null!=r&&(this.preventDefaultKeys=r),null!=l&&(this.mouseUseBrowserWindowEvents=l)}),Ht=((x["clay.web.WebConfig"]=Kt).__name__="clay.web.WebConfig",Kt.prototype={__class__:Kt},function(e){kc.call(this,e)}),Vt=((x["clay.web.WebIO"]=Ht).__name__="clay.web.WebIO",Ht.__super__=kc,Ht.prototype=$extend(kc.prototype,{isSynchronous:function(){return!1},loadData:function(t,e,n,i){if(null==n&&(n=!1),null==e&&(e=!1),null==t)throw Y.thrown("Path is null!");var s=new XMLHttpRequest;return s.open("GET",t,!0),e?s.overrideMimeType("text/plain; charset=x-user-defined"):s.overrideMimeType("text/plain; charset=UTF-8"),s.responseType="arraybuffer",s.onload=function(e){var n;200==s.status?(n=new Uint8Array(s.response),null!=i&&yt.push(function(){i(n)})):(E.error("Request status for path "+t+" was "+s.status+" / "+s.statusText,{fileName:"clay/web/WebIO.hx",lineNumber:136,className:"clay.web.WebIO",methodName:"loadData"}),null!=i&&yt.push(function(){i(e)}))},s.send(),null},__class__:Ht}),function(e){this.nextFrameCallbacks=[],this.didEmitTickOnce=!1,this.keyDownStates=new vn,this.pendingKeyUps=[],this.touches=new vn,this.windowDpr=1,this.windowY=0,this.windowX=0,this.skipKeyboardEvents=!1,this.skipMouseEvents=!1,this.webglVersion=1,this.gamepadsSupported=!1,lc.call(this,e)}),V=((x["clay.web.WebRuntime"]=Vt).__name__="clay.web.WebRuntime",Vt.timestamp=function(){return window.performance.now()/1e3-Vt.timestampStart},Vt.defaultConfig=function(){return new Kt("app",window.document.body,!0,!0,!0,[1073741904,1073741903,1073741906,1073741905,8,9,127,32],!0)},Vt.__super__=lc,Vt.prototype=$extend(lc.prototype,{init:function(){Vt.timestampStart=window.performance.now()/1e3,this.name="web",this.initGamepads()},ready:function(){this.createWindow(),E.debug("Web / ready",{fileName:"clay/web/WebRuntime.hx",lineNumber:87,className:"clay.web.WebRuntime",methodName:"ready"})},run:function(){return E.debug("Web / run",{fileName:"clay/web/WebRuntime.hx",lineNumber:93,className:"clay.web.WebRuntime",methodName:"run"}),this.loop(0),!1},loop:function(e){if(null==e&&(e=.016),this.app.hasShutdown)return!1;if(this.app.shuttingDown||window.requestAnimationFrame($bind(this,this.loop)),0<this.nextFrameCallbacks.length){for(var n=[];0<this.nextFrameCallbacks.length;)n.push(this.nextFrameCallbacks.shift());for(var t=0,i=n.length;t<i;)n[t++]()}this.app.ready&&(this.gamepadsSupported&&this.pollGamepads(),this.updateWindowBounds());e=window.performance.now()/1e3-Vt.timestampStart;return this.app.shouldUpdate(e)&&(this.didEmitTickOnce=!0,this.app.emitTick(e)),this.clearPendingKeyUps(),this.app.emitRender(),!0},createWindow:function(){var e=this.app.config.window;this.window=window.document.createElement("canvas"),this.windowDpr=this.windowDevicePixelRatio(),this.window.width=Math.floor(e.width*this.windowDpr),this.window.height=Math.floor(e.height*this.windowDpr),this.windowW=e.width,this.windowH=e.height,this.window.style.width=e.width+"px",this.window.style.height=e.height+"px",this.window.style.background="#000000",E.debug("Web / Created window at "+this.windowX+","+this.windowY+" - "+this.window.width+"x"+this.window.height+" pixels ("+e.width+"x"+e.height+"@"+this.windowDpr+"x)",{fileName:"clay/web/WebRuntime.hx",lineNumber:167,className:"clay.web.WebRuntime",methodName:"createWindow"}),this.window.id=this.app.config.runtime.windowId,this.app.config.runtime.windowParent.appendChild(this.window),null!=e.title&&(window.document.title=e.title),this.createRenderContext(this.window)?(this.postRenderContext(this.window),this.setupEvents()):this.createRenderContextFailed()},createRenderContext:function(e){var n=this.app.config.render,t=this.applyGLAttributes(n),i=null;return 1!=n.webgl.version&&null!=(i=null==(i=e.getContext("webgl"+n.webgl.version,t))?e.getContext("experimental-webgl"+n.webgl.version,t):i)&&(this.webglVersion=n.webgl.version),null==i&&(i=Si.getContextWebGL(e,t),this.webglVersion=1),ee.gl=i,E.debug("GL / context: "+L.string(null!=i),{fileName:"clay/web/WebRuntime.hx",lineNumber:213,className:"clay.web.WebRuntime",methodName:"createRenderContext"}),null!=i},createRenderContextFailed:function(){var e=window.document.createElement("div"),n=window.document.createElement("div");throw e.style.marginLeft="auto",e.style.marginRight="auto",e.style.color="#d3d3d3",e.style.marginTop="5em",e.style.fontSize="1.4em",e.style.fontFamily="Helvetica, sans-serif",e.innerHTML='WebGL is required to run this!<br/><br/>visit <a style="color:#06b4fb; text-decoration:none;" href="http://get.webgl.org/">get.webgl.com</a> for info<br/>and contact the developer of this app',n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.display="block",n.style.minWidth="100%",n.style.minHeight="100%",n.style.textAlign="center",n.style.position="absolute",n.style.background="rgba(1,1,1,0.90)",n.appendChild(e),window.document.body.appendChild(n),Y.thrown("Web / Failed to create render context")},applyGLAttributes:function(e){var n={alpha:e.webgl.alpha,antialias:e.webgl.antialias,depth:e.webgl.depth,stencil:e.webgl.stencil,failIfMajorPerformanceCaveat:e.webgl.failIfMajorPerformanceCaveat,premultipliedAlpha:e.webgl.premultipliedAlpha,preserveDrawingBuffer:e.webgl.preserveDrawingBuffer};return 0<e.antialiasing?n.antialias=!0:n.antialias=!1,0<e.depth&&(n.depth=!0),0<e.stencil&&(n.stencil=!0),n},postRenderContext:function(e){var n=this.app.config.render.defaultClear;ee.gl.clearDepth(1),ee.gl.clearStencil(0),ee.gl.clearColor(n.r,n.g,n.b,n.a),ee.gl.clear(17664),J._graphics.setup()},setupEvents:function(){window.document.addEventListener("fullscreenchange",$bind(this,this.handleFullscreenChange)),window.document.addEventListener("fullscreenerror",$bind(this,this.handleFullscreenError)),this.window.addEventListener("mouseenter",$bind(this,this.handleMouseEnter)),this.window.addEventListener("mouseleave",$bind(this,this.handleMouseLeave)),window.document.addEventListener("visibilitychange",$bind(this,this.handleVisibilityChange)),window.document.addEventListener("keydown",$bind(this,this.handleKeyDown)),window.document.addEventListener("keyup",$bind(this,this.handleKeyUp)),window.document.addEventListener("keypress",$bind(this,this.handleKeyPress)),this.window.addEventListener("contextmenu",$bind(this,this.handleContextMenu));var e=this.app.config.runtime.mouseUseBrowserWindowEvents?window:this.window;e.addEventListener("mousedown",$bind(this,this.handleMouseDown)),e.addEventListener("mouseup",$bind(this,this.handleMouseUp)),e.addEventListener("mousemove",$bind(this,this.handleMouseMove)),this.window.addEventListener("wheel",$bind(this,this.handleWheel)),this.window.addEventListener("touchstart",$bind(this,this.handleTouchStart)),this.window.addEventListener("touchend",$bind(this,this.handleTouchEnd)),this.window.addEventListener("touchmove",$bind(this,this.handleTouchMove)),window.addEventListener("gamepadconnected",$bind(this,this.handleGamepadConnected)),window.addEventListener("gamepaddisconnected",$bind(this,this.handleGamepadDisconnected))},handleVisibilityChange:function(e){window.document.hidden?(this.app.emitWindowEvent(2,window.performance.now()/1e3-Vt.timestampStart,1,0,0),this.app.emitWindowEvent(7,window.performance.now()/1e3-Vt.timestampStart,1,0,0),this.app.emitWindowEvent(13,window.performance.now()/1e3-Vt.timestampStart,1,0,0)):(this.app.emitWindowEvent(1,window.performance.now()/1e3-Vt.timestampStart,1,0,0),this.app.emitWindowEvent(9,window.performance.now()/1e3-Vt.timestampStart,1,0,0),this.app.emitWindowEvent(12,window.performance.now()/1e3-Vt.timestampStart,1,0,0))},bindCustomElementTouchEvents:function(e){e.addEventListener("touchstart",$bind(this,this.handleTouchStart)),e.addEventListener("touchend",$bind(this,this.handleTouchEnd)),e.addEventListener("touchmove",$bind(this,this.handleTouchMove))},handleContextMenu:function(e){this.app.config.runtime.preventDefaultContextMenu&&e.preventDefault()},handleFullscreenChange:function(e){var n=window.document.fullscreenElement;null!=n?(E.debug("Web / Entering fullscreen (id="+n.id+")",{fileName:"clay/web/WebRuntime.hx",lineNumber:393,className:"clay.web.WebRuntime",methodName:"handleFullscreenChange"}),this.app.config.window.fullscreen=!0,this.app.emitWindowEvent(15,window.performance.now()/1e3-Vt.timestampStart,1,0,0)):(E.debug("Web / Leaving fullscreen",{fileName:"clay/web/WebRuntime.hx",lineNumber:398,className:"clay.web.WebRuntime",methodName:"handleFullscreenChange"}),this.app.config.window.fullscreen=!1,this.app.emitWindowEvent(16,window.performance.now()/1e3-Vt.timestampStart,1,0,0))},handleFullscreenError:function(e){E.warning("Web / Failed to change fullscreen setting: "+L.string(e),{fileName:"clay/web/WebRuntime.hx",lineNumber:407,className:"clay.web.WebRuntime",methodName:"handleFullscreenError"})},handleMouseEnter:function(e){this.app.emitWindowEvent(10,window.performance.now()/1e3-Vt.timestampStart,1,0,0)},handleMouseLeave:function(e){this.app.emitWindowEvent(11,window.performance.now()/1e3-Vt.timestampStart,1,0,0)},handleMouseDown:function(e){var n,t,i,s,r,l=this;this.skipMouseEvents||(e.preventDefault(),n=this.app.input,i=Math.floor(this.windowDpr*(e.pageX-this.windowX)),s=Math.floor(this.windowDpr*(e.pageY-this.windowY)),r=e.button,t=window.performance.now()/1e3-Vt.timestampStart,n.app.events.mouseDown(i,s,r,t,1),2==e.button&&(i=Math.floor(this.windowDpr*(e.pageX-this.windowX)),s=Math.floor(this.windowDpr*(e.pageY-this.windowY)),r=e.button,this.nextFrameCallbacks.push(function(){l.nextFrameCallbacks.push(function(){var e=l.app.input,n=window.performance.now()/1e3-Vt.timestampStart;e.app.events.mouseUp(i,s,r,n,1)})})))},handleMouseUp:function(e){var n,t,i,s;this.skipMouseEvents||(e.preventDefault(),n=this.app.input,t=Math.floor(this.windowDpr*(e.pageX-this.windowX)),i=Math.floor(this.windowDpr*(e.pageY-this.windowY)),e=e.button,s=window.performance.now()/1e3-Vt.timestampStart,n.app.events.mouseUp(t,i,e,s,1))},handleMouseMove:function(e){var n,t,i,s,r;this.skipMouseEvents||(e.preventDefault(),n=null==e.movementX?0:e.movementX,t=null==e.movementY?0:e.movementY,n=Math.floor(n*this.windowDpr),t=Math.floor(t*this.windowDpr),i=this.app.input,s=Math.floor(this.windowDpr*(e.pageX-this.windowX)),e=Math.floor(this.windowDpr*(e.pageY-this.windowY)),r=window.performance.now()/1e3-Vt.timestampStart,i.app.events.mouseMove(s,e,n,t,r,1))},handleWheel:function(e){var n,t,i;this.app.config.runtime.preventDefaultMouseWheel&&e.preventDefault(),this.skipMouseEvents||(n=this.app.input,t=Math.round(.1*e.deltaX),e=Math.round(.1*e.deltaY),i=window.performance.now()/1e3-Vt.timestampStart,n.app.events.mouseWheel(t,e,i,1))},handleTouchStart:function(e){this.app.config.runtime.preventDefaultTouches&&e.preventDefault();for(var n=this.window.getBoundingClientRect(),t=0,i=e.changedTouches;t<i.length;){var s=i[t],r=(++t,s.clientX-n.left),l=s.clientY-n.top,a=(r/=n.width,l/=n.height,this.touches.get(s.identifier)),a=(null==a?this.touches.set(s.identifier,a={x:r,y:l}):(a.x=r,a.y=l),this.app.input),s=s.identifier,h=window.performance.now()/1e3-Vt.timestampStart;a.app.events.touchDown(r,l,0,0,s,h)}},handleTouchEnd:function(e){this.app.config.runtime.preventDefaultTouches&&e.preventDefault();for(var n=this.window.getBoundingClientRect(),t=0,i=e.changedTouches;t<i.length;){var s=i[t],r=(++t,s.clientX-n.left),l=s.clientY-n.top,a=(r/=n.width,l/=n.height,this.touches.get(s.identifier)),h=(null==a&&this.touches.set(s.identifier,a={x:r,y:l}),this.app.input),c=r-a.x,o=l-a.y,s=s.identifier,u=window.performance.now()/1e3-Vt.timestampStart;h.app.events.touchUp(r,l,c,o,s,u),a.x=r,a.y=l}},handleTouchMove:function(e){this.app.config.runtime.preventDefaultTouches&&e.preventDefault();for(var n=this.window.getBoundingClientRect(),t=0,i=e.changedTouches;t<i.length;){var s=i[t],r=(++t,s.clientX-n.left),l=s.clientY-n.top,a=(r/=n.width,l/=n.height,this.touches.get(s.identifier)),h=(null==a&&this.touches.set(s.identifier,a={x:r,y:l}),this.app.input),c=r-a.x,o=l-a.y,s=s.identifier,u=window.performance.now()/1e3-Vt.timestampStart;h.app.events.touchMove(r,l,c,o,s,u),a.x=r,a.y=l}},clearPendingKeyUps:function(){for(;0<this.pendingKeyUps.length;){var e,n,t,i,s,r,l=this.pendingKeyUps.shift();1==this.keyDownStates.get(l.keyCode)&&(this.keyDownStates.set(l.keyCode,!1),e=this.app.input,n=l.keyCode,t=l.scanCode,i=l.repeat,s=l.modState,r=window.performance.now()/1e3-Vt.timestampStart,e.app.events.keyUp(n,t,i,s,r,l.windowId))}},handleKeyDown:function(e){if(!this.skipKeyboardEvents){var n=this.convertKeyCode(e.keyCode),t=this.convertScanCode(e.code,n),i=this.modStateFromEvent(e);if(!i.none)switch(n){case 1073742048:case 1073742049:case 1073742050:case 1073742051:case 1073742052:case 1073742053:case 1073742054:case 1073742055:break;default:(i.lctrl||i.rctrl||i.lalt||i.ralt||i.lmeta||i.rmeta)&&this.pendingKeyUps.push({keyCode:n,scanCode:t,repeat:e.repeat,modState:i,windowId:1})}-1!=this.app.config.runtime.preventDefaultKeys.indexOf(n)&&e.preventDefault(),this.keyDownStates.set(n,!0);var s=this.app.input,r=e.repeat,l=window.performance.now()/1e3-Vt.timestampStart;s.app.events.keyDown(n,t,r,i,l,1)}},handleKeyUp:function(e){var n,t,i,s,r;this.skipKeyboardEvents||(n=this.convertKeyCode(e.keyCode),t=this.convertScanCode(e.code,n),i=this.modStateFromEvent(e),-1!=this.app.config.runtime.preventDefaultKeys.indexOf(n)&&e.preventDefault(),1==this.keyDownStates.get(n)&&(this.keyDownStates.set(n,!1),s=this.app.input,e=e.repeat,r=window.performance.now()/1e3-Vt.timestampStart,s.app.events.keyUp(n,t,e,i,r,1)))},handleKeyPress:function(e){var n,t,i;this.skipKeyboardEvents||0!=e.which&&8!=e.keyCode&&13!=e.keyCode&&(e=e.charCode,e=String.fromCodePoint(e),n=this.app.input,t=e.length,i=window.performance.now()/1e3-Vt.timestampStart,n.app.events.text(e,0,t,2,i,1))},handleGamepadConnected:function(e){E.debug("Gamepad connected at index "+e.gamepad.index+": "+e.gamepad.id+". "+e.gamepad.buttons.length+" buttons, "+e.gamepad.axes.length+" axes",{fileName:"clay/web/WebRuntime.hx",lineNumber:753,className:"clay.web.WebRuntime",methodName:"handleGamepadConnected"});var n=e.gamepad;if(null==this.gamepadButtonCache[n.index]){this.gamepadButtonCache[n.index]=[];for(var t=0,i=n.buttons.length;t<i;){t++;this.gamepadButtonCache[n.index].push(0)}this.gamepadAxisCache[n.index]=[];for(t=0,i=n.axes.length;t<i;){t++;this.gamepadAxisCache[n.index].push(0)}}var s=this.app.input,n=e.gamepad.index,e=e.gamepad.id,r=window.performance.now()/1e3-Vt.timestampStart;s.app.events.gamepadDevice(n,e,1,r)},handleGamepadDisconnected:function(e){E.debug("Gamepad disconnected at index "+e.gamepad.index+": "+e.gamepad.id,{fileName:"clay/web/WebRuntime.hx",lineNumber:768,className:"clay.web.WebRuntime",methodName:"handleGamepadDisconnected"});var n=e.gamepad,t=(this.gamepadButtonCache[n.index]=null,this.gamepadAxisCache[n.index]=null,this.app.input),n=e.gamepad.index,e=e.gamepad.id,i=window.performance.now()/1e3-Vt.timestampStart;t.app.events.gamepadDevice(n,e,2,i)},convertKeyCode:function(e){return 65<=e&&e<=90?e+32:V.domKeyToKeyCode(e)},convertScanCode:function(e,n){if(null==e)return T.toScanCode(n);switch(e){case"AltLeft":return 226;case"AltRight":return 230;case"ArrowDown":return 81;case"ArrowLeft":return 80;case"ArrowRight":return 79;case"ArrowUp":return 82;case"AudioVolumeDown":case"VolumeDown":return 129;case"AudioVolumeMute":return 262;case"AudioVolumeUp":case"VolumeUp":return 128;case"Backquote":return 53;case"Backslash":return 49;case"Backspace":return 42;case"BracketLeft":return 47;case"BracketRight":return 48;case"BrowserBack":return 270;case"BrowserFavorites":return 274;case"BrowserForward":return 271;case"BrowserHome":return 269;case"BrowserRefresh":return 273;case"BrowserSearch":return 268;case"BrowserStop":return 272;case"Cancel":return 155;case"CapsLock":return 57;case"Comma":return 54;case"ContextMenu":return 118;case"ControlLeft":return 224;case"ControlRight":return 228;case"Delete":return 76;case"Digit0":return 39;case"Digit1":return 30;case"Digit2":return 31;case"Digit3":return 32;case"Digit4":return 33;case"Digit5":return 34;case"Digit6":return 35;case"Digit7":return 36;case"Digit8":return 37;case"Digit9":return 38;case"End":return 77;case"Enter":return 40;case"Equal":return 46;case"Escape":return 41;case"F1":return 58;case"F10":return 67;case"F11":return 68;case"F12":return 69;case"F2":return 59;case"F3":return 60;case"F4":return 61;case"F5":return 62;case"F6":return 63;case"F7":return 64;case"F8":return 65;case"F9":return 66;case"Help":case"Insert":return 73;case"Home":return 74;case"IntlBackslash":return 100;case"KanaMode":case"Lang1":return 144;case"KeyA":return 4;case"KeyB":return 5;case"KeyC":return 6;case"KeyD":return 7;case"KeyE":return 8;case"KeyF":return 9;case"KeyG":return 10;case"KeyH":return 11;case"KeyI":return 12;case"KeyJ":return 13;case"KeyK":return 14;case"KeyL":return 15;case"KeyM":return 16;case"KeyN":return 17;case"KeyO":return 18;case"KeyP":return 19;case"KeyQ":return 20;case"KeyR":return 21;case"KeyS":return 22;case"KeyT":return 23;case"KeyU":return 24;case"KeyV":return 25;case"KeyW":return 26;case"KeyX":return 27;case"KeyY":return 28;case"KeyZ":return 29;case"Lang2":return 145;case"Lang3":return 146;case"Lang4":return 147;case"Lang5":return 148;case"Lang6":return 149;case"Lang7":return 150;case"Lang8":return 151;case"Lang9":return 152;case"LaunchApp1":return 283;case"LaunchApp2":return 284;case"LaunchMail":return 265;case"MediaPlayPause":return 261;case"MediaSelect":return 263;case"MediaStop":return 260;case"MediaTrackNext":return 258;case"MediaTrackPrevious":return 259;case"MetaLeft":case"OSLeft":return 227;case"MetaRight":case"OSRight":return 231;case"Minus":return 45;case"NumLock":return 83;case"Numpad0":return 98;case"Numpad1":return 89;case"Numpad2":return 90;case"Numpad3":return 91;case"Numpad4":return 92;case"Numpad5":return 93;case"Numpad6":return 94;case"Numpad7":return 95;case"Numpad8":return 96;case"Numpad9":return 97;case"NumpadAdd":return 87;case"NumpadComma":return 133;case"NumpadDecimal":return 220;case"NumpadDivide":return 84;case"NumpadEnter":return 88;case"NumpadEqual":return 103;case"NumpadMultiply":return 85;case"NumpadSubtract":return 86;case"PageDown":return 78;case"PageUp":return 75;case"Pause":return 72;case"Period":return 55;case"Power":return 102;case"PrintScreen":return 70;case"Quote":return 52;case"ScrollLock":return 71;case"Semicolon":return 51;case"ShiftLeft":return 225;case"ShiftRight":return 229;case"Slash":return 56;case"Space":return 44;case"Tab":return 43;default:return T.toScanCode(n)}},modStateFromEvent:function(e){var n=!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey);return this.app.input.modState.none=n,this.app.input.modState.lshift=e.shiftKey,this.app.input.modState.rshift=e.shiftKey,this.app.input.modState.lctrl=e.ctrlKey,this.app.input.modState.rctrl=e.ctrlKey,this.app.input.modState.lalt=e.altKey,this.app.input.modState.ralt=e.altKey,this.app.input.modState.lmeta=e.metaKey,this.app.input.modState.rmeta=e.metaKey,this.app.input.modState.num=!1,this.app.input.modState.caps=!1,this.app.input.modState.mode=!1,this.app.input.modState.ctrl=e.ctrlKey,this.app.input.modState.shift=e.shiftKey,this.app.input.modState.alt=e.altKey,this.app.input.modState.meta=e.metaKey,this.app.input.modState},getWindowX:function(e){return Math.round(e.left+window.pageXOffset-window.document.body.clientTop)},getWindowY:function(e){return Math.round(e.top+window.pageYOffset-window.document.body.clientLeft)},translateMouseX:function(e){return Math.floor(this.windowDpr*(e.pageX-this.windowX))},translateMouseY:function(e){return Math.floor(this.windowDpr*(e.pageY-this.windowY))},updateWindowBounds:function(){var e=this.windowDpr,n=(this.windowDpr=this.windowDevicePixelRatio(),this.window.getBoundingClientRect()),t=Math.round(n.left+window.pageXOffset-window.document.body.clientTop),i=Math.round(n.top+window.pageYOffset-window.document.body.clientLeft),s=Math.round(n.width),n=Math.round(n.height);t==this.windowX&&i==this.windowY||(this.windowX=t,this.windowY=i,this.app.emitWindowEvent(4,window.performance.now()/1e3-Vt.timestampStart,1,this.windowX,this.windowY)),s==this.windowW&&n==this.windowH&&e==this.windowDpr||(this.windowW=s,this.windowH=n,this.window.width=Math.floor(this.windowW*this.windowDpr),this.window.height=Math.floor(this.windowH*this.windowDpr),this.app.emitWindowEvent(6,window.performance.now()/1e3-Vt.timestampStart,1,this.window.width,this.window.height))},initGamepads:function(){var e=this.getGamepadList();if(null!=e){this.gamepadsSupported=!0,this.gamepadButtonCache=[],this.gamepadAxisCache=[];for(var n=0;n<e.length;){var t=e[n];if(++n,null!=t&&null==this.gamepadButtonCache[t.index]){this.gamepadButtonCache[t.index]=[];for(var i=0,s=t.buttons.length;i<s;){i++;this.gamepadButtonCache[t.index].push(0)}this.gamepadAxisCache[t.index]=[];for(var r=0,l=t.axes.length;r<l;){r++;this.gamepadAxisCache[t.index].push(0)}}}}else E.warning("Gamepads are not supported in this browser :(",{fileName:"clay/web/WebRuntime.hx",lineNumber:1036,className:"clay.web.WebRuntime",methodName:"initGamepads"})},getGamepadList:function(){return null!=re.navigator.getGamepads?re.navigator.getGamepads():null!=re.navigator.webkitGetGamepads?re.navigator.webkitGetGamepads():null},initGamepadCacheIfNeeded:function(e){if(null==this.gamepadButtonCache[e.index]){this.gamepadButtonCache[e.index]=[];for(var n=0,t=e.buttons.length;n<t;){n++;this.gamepadButtonCache[e.index].push(0)}this.gamepadAxisCache[e.index]=[];for(n=0,t=e.axes.length;n<t;){n++;this.gamepadAxisCache[e.index].push(0)}}},deleteGamepadCache:function(e){this.gamepadButtonCache[e.index]=null,this.gamepadAxisCache[e.index]=null},pollGamepads:function(){var e=this.getGamepadList();if(null!=e)for(var n=e.length,t=0;t<n;){var i=e[t];if(null==i);else{if(null==this.gamepadButtonCache[i.index]){this.gamepadButtonCache[i.index]=[];for(var s=0,r=i.buttons.length;s<r;){s++;this.gamepadButtonCache[i.index].push(0)}this.gamepadAxisCache[i.index]=[];for(var l=0,a=i.axes.length;l<a;){l++;this.gamepadAxisCache[i.index].push(0)}}for(var h=this.gamepadAxisCache[i.index],c=0,o=i.axes.length;c<o;){var u,_,d,b=c++,p=i.axes[b];p!=h[b]&&(h[b]=p,u=this.app.input,_=i.index,d=window.performance.now()/1e3-Vt.timestampStart,u.app.events.gamepadAxis(_,b,p,d))}for(var f=this.gamepadButtonCache[i.index],O=0,g=i.buttons.length;O<g;){var m,w,v,y,U=O++,x=i.buttons[U];x.value!=f[U]&&(f[U]=x.value,x.pressed?(m=this.app.input,w=i.index,v=x.value,y=window.performance.now()/1e3-Vt.timestampStart,m.app.events.gamepadDown(w,U,v,y)):(m=this.app.input,w=i.index,v=x.value,y=window.performance.now()/1e3-Vt.timestampStart,m.app.events.gamepadUp(w,U,v,y)))}}++t}},windowDevicePixelRatio:function(){return null==window.devicePixelRatio?1:window.devicePixelRatio},windowWidth:function(){return Math.round(this.windowW*this.windowDevicePixelRatio())},windowHeight:function(){return Math.round(this.windowH*this.windowDevicePixelRatio())},setWindowFullscreen:function(e){return e?this.window.requestFullscreen():window.document.exitFullscreen(),!0},setWindowTitle:function(e){this.app.config.window.title=e,window.document.title=e},clamp:function(e){return Math.max(0,Math.min(e,1))},startGamepadRumble:function(e,n,t,i){var e=this.getGamepadList()[e];null!=e&&null!=(e=e.vibrationActuator)&&e.playEffect("dual-rumble",{duration:1e3*i,weakMagnitude:Math.max(0,Math.min(n,1)),strongMagnitude:Math.max(0,Math.min(t,1))})},stopGamepadRumble:function(e){var e=this.getGamepadList()[e];null!=e&&null!=(e=e.vibrationActuator)&&e.playEffect("dual-rumble",{duration:1,weakMagnitude:0,strongMagnitude:0})},getGamepadName:function(e){var n=this.getGamepadList();if(null!=n)for(var t=0;t<n.length;){var i=n[t];if(++t,null!=i&&i.index==e)return i.id}return null},__class__:Vt}),function(){}),zt=((x["clay.web._WebRuntime.DOMKeys"]=V).__name__="clay.web._WebRuntime.DOMKeys",V.domKeyToKeyCode=function(e){switch(e){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 93:return 1073742055;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 109:return 1073741910;case 110:return 1073742044;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 160:return 94;case 161:return 33;case 162:return 34;case 163:return 35;case 164:return 36;case 165:return 37;case 166:return 38;case 167:return 95;case 168:return 40;case 169:return 41;case 170:return 42;case 171:return 43;case 172:return 92;case 173:return 45;case 174:return 91;case 175:return 93;case 176:return 96;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 188:return 44;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 224:return 1073742051}return e},he["haxe.StackItem"]={__ename__:"haxe.StackItem",__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:c},Module:((a=function(e){return{_hx_index:1,m:e,__enum__:"haxe.StackItem",toString:c}})._hx_name="Module",a.__params__=["m"],a),FilePos:((a=function(e,n,t,i){return{_hx_index:2,s:e,file:n,line:t,column:i,__enum__:"haxe.StackItem",toString:c}})._hx_name="FilePos",a.__params__=["s","file","line","column"],a),Method:((a=function(e,n){return{_hx_index:3,classname:e,method:n,__enum__:"haxe.StackItem",toString:c}})._hx_name="Method",a.__params__=["classname","method"],a),LocalFunction:((a=function(e){return{_hx_index:4,v:e,__enum__:"haxe.StackItem",toString:c}})._hx_name="LocalFunction",a.__params__=["v"],a)}),Yt=(zt.__constructs__=[zt.CFunction,zt.Module,zt.FilePos,zt.Method,zt.LocalFunction],{}),Y=(Yt.callStack=function(){return jt.toHaxe(jt.callStack())},Yt.exceptionStack=function(e){null==e&&(e=!1);var n=jt.toHaxe(jt.exceptionStack());return e?n:Yt.subtract(n,Yt.callStack())},Yt.subtract=function(e,n){for(var t=-1,i=-1;++i<e.length;){for(var s=0,r=n.length;s<r;){var l=s++;if(Yt.equalItems(e[i],n[l])){if(t<0&&(t=i),++i>=e.length)break}else t=-1}if(0<=t)break}return 0<=t?e.slice(0,t):e},Yt.equalItems=function(e,n){if(null==e)return null==n;switch(e._hx_index){case 0:return null!=n&&0==n._hx_index;case 1:return null!=n&&1==n._hx_index&&(t=n.m,e.m==t);case 2:var t,i,s,r;return null!=n&&2==n._hx_index&&(t=n.s,a=n.file,c=n.line,i=n.column,s=e.column,h=e.line,l=e.file,r=e.s,l==a)&&h==c&&s==i&&Yt.equalItems(r,t);case 3:var l,a,h;return null!=n&&3==n._hx_index&&(l=n.classname,a=n.method,h=e.method,e.classname==l)&&h==a;case 4:var c;return null!=n&&4==n._hx_index&&(c=n.v,e.v==c)}},(x["haxe.IMap"]=Oc).__name__="haxe.IMap",Oc.__isInterface__=!0,Oc.prototype={__class__:Oc},function(e,n,t){Error.call(this,e),this.message=e,this.__previousException=n,this.__nativeException=null!=t?t:this,this.__skipStack=0;e=Error.prepareStackTrace;if(Error.prepareStackTrace=function(e){return e.stack},t instanceof Error)this.stack=t.stack;else{n=null;if(Error.captureStackTrace)Error.captureStackTrace(this,Y),n=this;else if(void 0===(n=new Error).stack){try{throw n}catch(e){}this.__skipStack++}this.stack=n.stack}Error.prepareStackTrace=e}),Xt=((x["haxe.Exception"]=Y).__name__="haxe.Exception",Y.caught=function(e){return e instanceof Y?e:e instanceof Error?new Y(e.message,null,e):new qt(e,null,e)},Y.thrown=function(e){return e instanceof Y?e.get_native():e instanceof Error?e:((e=new qt(e)).__skipStack++,e)},Y.__super__=Error,Y.prototype=$extend(Error.prototype,{unwrap:function(){return this.__nativeException},__shiftStack:function(){this.__skipStack++},get_native:function(){return this.__nativeException},get_stack:function(){var e,n=this.__exceptionStack;return null==n?(e=jt.toHaxe(jt.normalize(this.stack),this.__skipStack),this.setProperty("__exceptionStack",e),e):n},setProperty:function(n,t){try{Object.defineProperty(this,n,{value:t})}catch(e){this[n]=t}},__class__:Y,__properties__:{get_native:"get_native",get_stack:"get_stack"}}),function(){}),jt=((x["haxe.Log"]=Xt).__name__="haxe.Log",Xt.formatOutput=function(e,n){var t=L.string(e);if(null==n)return t;var i=n.fileName+":"+n.lineNumber;if(null!=n.customParams)for(var s=0,r=n.customParams;s<r.length;){e=r[s];++s,t+=", "+L.string(e)}return i+": "+t},Xt.trace=function(e,n){e=Xt.formatOutput(e,n);"undefined"!=typeof console&&null!=console.log&&console.log(e)},function(){}),Qt=((x["haxe.NativeStackTrace"]=jt).__name__="haxe.NativeStackTrace",jt.saveStack=function(e){jt.lastError=e},jt.callStack=function(){var e=new Error(""),n=jt.tryHaxeStack(e);if(void 0===n){try{throw e}catch(e){}n=e.stack}return jt.normalize(n,2)},jt.exceptionStack=function(){return jt.normalize(jt.tryHaxeStack(jt.lastError))},jt.toHaxe=function(e,n){if(null==n&&(n=0),null==e)return[];if("string"!=typeof e)return 0<n&&Array.isArray(e)?e.slice(n):e;for(var t=e.split("\n"),i=("Error"==t[0]&&t.shift(),[]),s=0,r=t.length;s<r;){var l,a,h,c,o,u=s++;u<n||(null!=(o=(u=t[u]).match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/))?("$hxClasses"==(l=o[1].split("."))[0]&&l.shift(),a=l.pop(),h=o[2],c=L.parseInt(o[3]),o=L.parseInt(o[4]),i.push(zt.FilePos("Anonymous function"==a?zt.LocalFunction():"Global code"==a?null:zt.Method(l.join("."),a),h,c,o))):i.push(zt.Module(z.trim(u))))}return i},jt.tryHaxeStack=function(e){var n;return null==e?[]:(n=Error.prepareStackTrace,Error.prepareStackTrace=jt.prepareHxStackTrace,e=e.stack,Error.prepareStackTrace=n,e)},jt.prepareHxStackTrace=function(e,n){for(var t=[],i=0;i<n.length;){var s=n[i],r=(++i,null),l=(s=null!=jt.wrapCallSite?jt.wrapCallSite(s):s).getFunctionName(),a=(null!=l&&(r=0<=(h=l.lastIndexOf("."))?(a=l.substring(0,h),h=l.substring(h+1),zt.Method(a,h)):zt.Method(null,l)),s.getFileName()),h=null==a?-1:a.indexOf("file:");null!=jt.wrapCallSite&&0<h&&(a=a.substring(h+6)),t.push(zt.FilePos(r,a,s.getLineNumber(),s.getColumnNumber()))}return t},jt.normalize=function(e,n){if(null==n&&(n=0),Array.isArray(e)&&0<n)return e.slice(n);if("string"!=typeof e)return e;switch(e.substring(0,6)){case"Error\n":case"Error:":++n}return jt.skipLines(e,n)},jt.skipLines=function(e,n,t){return null==t&&(t=0),0<n?(t=e.indexOf("\n",t))<0?"":jt.skipLines(e,--n,t+1):e.substring(t)},function(){this.buf=new y,this.cache=[],this.useCache=Qt.USE_CACHE,this.useEnumIndex=Qt.USE_ENUM_INDEX,this.shash=new te,this.scount=0}),$t=((x["haxe.Serializer"]=Qt).__name__="haxe.Serializer",Qt.prototype={toString:function(){return this.buf.b},serializeString:function(e){var n=this.shash.h[e];null!=n?(this.buf.b+="R",this.buf.b+=null==n?"null":""+n):(this.shash.h[e]=this.scount++,this.buf.b+="y",e=encodeURIComponent(e),this.buf.b+=L.string(e.length),this.buf.b+=":",this.buf.b+=null==e?"null":""+e)},serializeRef:function(e){for(var n=typeof e,t=0,i=this.cache.length;t<i;){var s=t++,r=this.cache[s];if(typeof r==n&&r==e)return this.buf.b+="r",this.buf.b+=null==s?"null":""+s,!0}return this.cache.push(e),!1},serializeFields:function(e){for(var n=0,t=P.fields(e);n<t.length;){var i=t[n];++n,this.serializeString(i),this.serialize(P.field(e,i))}this.buf.b+="g"},serialize:function(e){switch((x=B.typeof(e))._hx_index){case 0:this.buf.b+="n";break;case 1:0==(n=e)?this.buf.b+="z":(this.buf.b+="i",this.buf.b+=null==n?"null":""+n);break;case 2:var n=e;isNaN(n)?this.buf.b+="k":isFinite(n)?(this.buf.b+="d",this.buf.b+=null==n?"null":""+n):this.buf.b+=n<0?"m":"p";break;case 3:this.buf.b+=e?"t":"f";break;case 4:if(Ti.__instanceof(e,Hi)){var t=e.__name__;this.buf.b+="A",this.serializeString(t)}else if(Ti.__instanceof(e,Vi))this.buf.b+="B",this.serializeString(e.__ename__);else{if(this.useCache&&this.serializeRef(e))return;this.buf.b+="o",this.serializeFields(e)}break;case 5:throw Y.thrown("Cannot serialize function");case 6:var i=x.c;if(i==String)this.serializeString(e);else if(!this.useCache||!this.serializeRef(e))switch(i){case Array:var s=0;this.buf.b+="a";for(var r=0,l=e.length;r<l;)null==e[_=r++]?++s:(0<s&&(1==s?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==s?"null":""+s),s=0),this.serialize(e[_]));0<s&&(1==s?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==s?"null":""+s)),this.buf.b+="h";break;case Date:var a=e;this.buf.b+="v",this.buf.b+=L.string(a.getTime());break;case ei:this.buf.b+="q";for(var h=(n=e).keys();h.hasNext();){var c=h.next();this.buf.b+=":",this.buf.b+=null==c?"null":""+c,this.serialize(n.h[c])}this.buf.b+="h";break;case ni:this.buf.b+="l";for(var o=(n=e).h;null!=o;){var u=o.item,o=o.next,_=u;this.serialize(_)}this.buf.b+="h";break;case ii:this.buf.b+="M";for(h=(n=e).keys();h.hasNext();){var c=h.next(),d=P.field(c,"__id__");P.deleteField(c,"__id__"),this.serialize(c),c.__id__=d,this.serialize(n.h[c.__id__])}this.buf.b+="h";break;case te:this.buf.b+="b";for(var a=(n=e).h,b=Object.keys(a),p=b.length,f=0;f<p;){h=b[f++];this.serializeString(h),this.serialize(n.h[h])}this.buf.b+="h";break;case hi:var n=e,_=(this.buf.b+="s",this.buf.b+=L.string(Math.ceil(8*n.length/6)),this.buf.b+=":",0),O=n.length-2;if(null==(g=Qt.BASE64_CODES)){for(var g=new Array(Qt.BASE64.length),r=0,l=Qt.BASE64.length;r<l;){var m=r++;g[m]=le.cca(Qt.BASE64,m)}Qt.BASE64_CODES=g}for(;_<O;){var w=n.b[_++],v=n.b[_++],y=n.b[_++];this.buf.b+=String.fromCodePoint(g[w>>2]),this.buf.b+=String.fromCodePoint(g[63&(w<<4|v>>4)]),this.buf.b+=String.fromCodePoint(g[63&(v<<2|y>>6)]),this.buf.b+=String.fromCodePoint(g[63&y])}_==O?(w=n.b[_++],v=n.b[_++],this.buf.b+=String.fromCodePoint(g[w>>2]),this.buf.b+=String.fromCodePoint(g[63&(w<<4|v>>4)]),this.buf.b+=String.fromCodePoint(g[v<<2&63])):_==1+O&&(w=n.b[_++],this.buf.b+=String.fromCodePoint(g[w>>2]),this.buf.b+=String.fromCodePoint(g[w<<4&63]));break;default:this.useCache&&this.cache.pop(),null!=e.hxSerialize?(this.buf.b+="C",this.serializeString(i.__name__),this.useCache&&this.cache.push(e),e.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(i.__name__),this.useCache&&this.cache.push(e),this.serializeFields(e))}break;case 7:t=x.e;if(this.useCache){if(this.serializeRef(e))return;this.cache.pop()}this.buf.b+=L.string(this.useEnumIndex?"j":"w"),this.serializeString(t.__ename__),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=L.string(e._hx_index)):this.serializeString(he[(t=e).__enum__].__constructs__[e._hx_index]._hx_name),this.buf.b+=":";for(var U=B.enumParameters(e),x=(this.buf.b+=L.string(U.length),0);x<U.length;){var C=U[x];++x,this.serialize(C)}this.useCache&&this.cache.push(e);break;default:throw Y.thrown("Cannot serialize "+L.string(e))}},__class__:Qt},(x["haxe._Unserializer.DefaultResolver"]=Tc).__name__="haxe._Unserializer.DefaultResolver",Tc.prototype={resolveClass:function(e){return x[e]},resolveEnum:function(e){return he[e]},__class__:Tc},function(e){this.buf=e,this.length=this.buf.length,this.pos=0,this.scache=[],this.cache=[];e=$t.DEFAULT_RESOLVER;null==e&&(e=new Tc,$t.DEFAULT_RESOLVER=e),this.resolver=e}),qt=((x["haxe.Unserializer"]=$t).__name__="haxe.Unserializer",$t.initCodes=function(){for(var e=[],n=0,t=$t.BASE64.length;n<t;){var i=n++;e[$t.BASE64.charCodeAt(i)]=i}return e},$t.prototype={readDigits:function(){for(var e=0,n=!1,t=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45==i){if(this.pos!=t)break;n=!0}else{if(i<48||57<i)break;e=10*e+(i-48)}this.pos++}return n&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var n=this.buf.charCodeAt(this.pos);if(n!=n)break;if(!(43<=n&&n<58||101==n||69==n))break;this.pos++}return parseFloat(le.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw Y.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var n=this.unserialize();if("string"!=typeof n)throw Y.thrown("Invalid object key");var t=this.unserialize();e[n]=t}this.pos++},unserializeEnum:function(e,n){if(58!=this.buf.charCodeAt(this.pos++))throw Y.thrown("Invalid enum format");var t=this.readDigits();if(0==t)return B.createEnum(e,n);for(var i=[];0<t--;)i.push(this.unserialize());return B.createEnum(e,n,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize();if(null==(a=this.resolver.resolveClass(e)))throw Y.thrown("Class not found "+e);return a;case 66:e=this.unserialize();if(null==(d=this.resolver.resolveEnum(e)))throw Y.thrown("Enum not found "+e);return d;case 67:e=this.unserialize();if(null==(a=this.resolver.resolveClass(e)))throw Y.thrown("Class not found "+e);var n=Object.create(a.prototype);if(this.cache.push(n),n.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw Y.thrown("Invalid custom data");return n;case 77:for(var t=new ii,i=(this.cache.push(t),this.buf);104!=this.buf.charCodeAt(this.pos);){var s=this.unserialize();t.set(s,this.unserialize())}return this.pos++,t;case 82:if((O=this.readDigits())<0||O>=this.scache.length)throw Y.thrown("Invalid string reference");return this.scache[O];case 97:var i=this.buf,r=[];for(this.cache.push(r);;){if(104==(p=this.buf.charCodeAt(this.pos))){this.pos++;break}117==p?(this.pos++,O=this.readDigits(),r[r.length+O-1]=null):r.push(this.unserialize())}return r;case 98:for(t=new te,i=(this.cache.push(t),this.buf);104!=this.buf.charCodeAt(this.pos);){var s=this.unserialize(),l=this.unserialize();t.h[s]=l}return this.pos++,t;case 99:var e=this.unserialize();if(null==(a=this.resolver.resolveClass(e)))throw Y.thrown("Class not found "+e);n=Object.create(a.prototype);return this.cache.push(n),this.unserializeObject(n),n;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:e=this.unserialize();if(null==(S=this.resolver.resolveEnum(e)))throw Y.thrown("Enum not found "+e);this.pos++;for(var a=this.readDigits(),h=S.__constructs__,c=new Array(h.length),o=0,u=h.length;o<u;)c[f=o++]=h[f]._hx_name;var _=c[a];if(null==_)throw Y.thrown("Unknown enum index "+e+"@"+a);var d=this.unserializeEnum(S,_);return this.cache.push(d),d;case 107:return NaN;case 108:for(var b=new ni,i=(this.cache.push(b),this.buf);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());return this.pos++,b;case 109:return-1/0;case 110:return null;case 111:n={};return this.cache.push(n),this.unserializeObject(n),n;case 112:return 1/0;case 113:for(var t=new ei,i=(this.cache.push(t),this.buf),p=this.buf.charCodeAt(this.pos++);58==p;){var f=this.readDigits(),l=this.unserialize();t.h[f]=l,p=this.buf.charCodeAt(this.pos++)}if(104!=p)throw Y.thrown("Invalid IntMap format");return t;case 114:var O;if((O=this.readDigits())<0||O>=this.cache.length)throw Y.thrown("Invalid reference");return this.cache[O];case 115:var g=this.readDigits(),i=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<g)throw Y.thrown("Invalid bytes length");var m=$t.CODES;null==m&&(m=$t.initCodes(),$t.CODES=m);for(var a=3&g,w=(f=this.pos)+(g-a),v=new hi(new ArrayBuffer(3*(g>>2)+(2<=a?a-1:0))),y=0;f<w;){var U=m[i.charCodeAt(f++)],x=m[i.charCodeAt(f++)],C=(v.b[y++]=U<<2|x>>4,m[i.charCodeAt(f++)]),D=(v.b[y++]=x<<4|C>>2,m[i.charCodeAt(f++)]);v.b[y++]=C<<6|D}return 2<=a&&(U=m[i.charCodeAt(f++)],x=m[i.charCodeAt(f++)],v.b[y++]=U<<2|x>>4,3==a)&&(C=m[i.charCodeAt(f++)],v.b[y++]=x<<4|C>>2),this.pos+=g,this.cache.push(v),v;case 116:return!0;case 118:var T;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(T=le.strDate(le.substr(this.buf,this.pos,19)),this.pos+=19):T=new Date(this.readFloat()),this.cache.push(T),T;case 119:var S,e=this.unserialize();if(null==(S=this.resolver.resolveEnum(e)))throw Y.thrown("Enum not found "+e);d=this.unserializeEnum(S,this.unserialize());return this.cache.push(d),d;case 120:throw Y.thrown(this.unserialize());case 121:g=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<g)throw Y.thrown("Invalid string length");s=le.substr(this.buf,this.pos,g);return this.pos+=g,s=decodeURIComponent(s.split("+").join(" ")),this.scache.push(s),s;case 122:return 0}throw this.pos--,Y.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:$t},function(e,n,t){Y.call(this,String(e),n,t),this.value=e,this.__skipStack++}),Zt=((x["haxe.ValueException"]=qt).__name__="haxe.ValueException",qt.__super__=Y,qt.prototype=$extend(Y.prototype,{unwrap:function(){return this.value},__class__:qt}),function(){}),Jt=((x["haxe.crypto.Md5"]=Zt).__name__="haxe.crypto.Md5",Zt.encode=function(e){var n=new Zt,e=n.doEncode(Zt.str2blks(e));return n.hex(e)},Zt.str2blks=function(e){for(var n=hi.ofString(e),e=1+(n.length+8>>6),t=[],i=0,s=16*e;i<s;)t[r=i++]=0;for(var r=0,l=n.length,a=8*l;r<l;)t[r>>2]|=n.b[r]<<(a+r)%4*8,++r;t[r>>2]|=128<<(a+r)%4*8;e=16*e-2;return t[e]=255&a,t[e]|=(a>>>8&255)<<8,t[e]|=(a>>>16&255)<<16,t[e]|=(a>>>24&255)<<24,t},Zt.prototype={bitOR:function(e,n){return(e>>>1|n>>>1)<<1|(1&e|1&n)},bitXOR:function(e,n){return(e>>>1^n>>>1)<<1|1&e^1&n},bitAND:function(e,n){return(e>>>1&n>>>1)<<1|1&e&n},addme:function(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t},hex:function(e){for(var n="",t="0123456789abcdef",i=0;i<e.length;){var s=e[i];++i,n=(n=(n=(n+=t.charAt(s>>4&15)+t.charAt(15&s))+(t.charAt(s>>12&15)+t.charAt(s>>8&15)))+(t.charAt(s>>20&15)+t.charAt(s>>16&15)))+(t.charAt(s>>28&15)+t.charAt(s>>24&15))}return n},rol:function(e,n){return e<<n|e>>>32-n},cmn:function(e,n,t,i,s,r){return this.addme(this.rol(this.addme(this.addme(n,e),this.addme(i,r)),s),t)},ff:function(e,n,t,i,s,r,l){return this.cmn(this.bitOR(this.bitAND(n,t),this.bitAND(~n,i)),e,n,s,r,l)},gg:function(e,n,t,i,s,r,l){return this.cmn(this.bitOR(this.bitAND(n,i),this.bitAND(t,~i)),e,n,s,r,l)},hh:function(e,n,t,i,s,r,l){return this.cmn(this.bitXOR(this.bitXOR(n,t),i),e,n,s,r,l)},ii:function(e,n,t,i,s,r,l){return this.cmn(this.bitXOR(t,this.bitOR(n,~i)),e,n,s,r,l)},doEncode:function(e){for(var n=1732584193,t=-271733879,i=-1732584194,s=271733878,r=0;r<e.length;){var l=n,a=t,h=i,c=s,n=this.ff(n,t,i,s,e[r],7,-680876936),s=this.ff(s,n,t,i,e[r+1],12,-389564586),i=this.ff(i,s,n,t,e[r+2],17,606105819),t=this.ff(t,i,s,n,e[r+3],22,-1044525330);n=this.ff(n,t,i,s,e[r+4],7,-176418897),s=this.ff(s,n,t,i,e[r+5],12,1200080426),i=this.ff(i,s,n,t,e[r+6],17,-1473231341),t=this.ff(t,i,s,n,e[r+7],22,-45705983),n=this.ff(n,t,i,s,e[r+8],7,1770035416),s=this.ff(s,n,t,i,e[r+9],12,-1958414417),i=this.ff(i,s,n,t,e[r+10],17,-42063),t=this.ff(t,i,s,n,e[r+11],22,-1990404162),n=this.ff(n,t,i,s,e[r+12],7,1804603682),s=this.ff(s,n,t,i,e[r+13],12,-40341101),i=this.ff(i,s,n,t,e[r+14],17,-1502002290),t=this.ff(t,i,s,n,e[r+15],22,1236535329),n=this.gg(n,t,i,s,e[r+1],5,-165796510),s=this.gg(s,n,t,i,e[r+6],9,-1069501632),i=this.gg(i,s,n,t,e[r+11],14,643717713),t=this.gg(t,i,s,n,e[r],20,-373897302),n=this.gg(n,t,i,s,e[r+5],5,-701558691),s=this.gg(s,n,t,i,e[r+10],9,38016083),i=this.gg(i,s,n,t,e[r+15],14,-660478335),t=this.gg(t,i,s,n,e[r+4],20,-405537848),n=this.gg(n,t,i,s,e[r+9],5,568446438),s=this.gg(s,n,t,i,e[r+14],9,-1019803690),i=this.gg(i,s,n,t,e[r+3],14,-187363961),t=this.gg(t,i,s,n,e[r+8],20,1163531501),n=this.gg(n,t,i,s,e[r+13],5,-1444681467),s=this.gg(s,n,t,i,e[r+2],9,-51403784),i=this.gg(i,s,n,t,e[r+7],14,1735328473),t=this.gg(t,i,s,n,e[r+12],20,-1926607734),n=this.hh(n,t,i,s,e[r+5],4,-378558),s=this.hh(s,n,t,i,e[r+8],11,-2022574463),i=this.hh(i,s,n,t,e[r+11],16,1839030562),t=this.hh(t,i,s,n,e[r+14],23,-35309556),n=this.hh(n,t,i,s,e[r+1],4,-1530992060),s=this.hh(s,n,t,i,e[r+4],11,1272893353),i=this.hh(i,s,n,t,e[r+7],16,-155497632),t=this.hh(t,i,s,n,e[r+10],23,-1094730640),n=this.hh(n,t,i,s,e[r+13],4,681279174),s=this.hh(s,n,t,i,e[r],11,-358537222),i=this.hh(i,s,n,t,e[r+3],16,-722521979),t=this.hh(t,i,s,n,e[r+6],23,76029189),n=this.hh(n,t,i,s,e[r+9],4,-640364487),s=this.hh(s,n,t,i,e[r+12],11,-421815835),i=this.hh(i,s,n,t,e[r+15],16,530742520),t=this.hh(t,i,s,n,e[r+2],23,-995338651),n=this.ii(n,t,i,s,e[r],6,-198630844),s=this.ii(s,n,t,i,e[r+7],10,1126891415),i=this.ii(i,s,n,t,e[r+14],15,-1416354905),t=this.ii(t,i,s,n,e[r+5],21,-57434055),n=this.ii(n,t,i,s,e[r+12],6,1700485571),s=this.ii(s,n,t,i,e[r+3],10,-1894986606),i=this.ii(i,s,n,t,e[r+10],15,-1051523),t=this.ii(t,i,s,n,e[r+1],21,-2054922799),n=this.ii(n,t,i,s,e[r+8],6,1873313359),s=this.ii(s,n,t,i,e[r+15],10,-30611744),i=this.ii(i,s,n,t,e[r+6],15,-1560198380),t=this.ii(t,i,s,n,e[r+13],21,1309151649),n=this.ii(n,t,i,s,e[r+4],6,-145523070),s=this.ii(s,n,t,i,e[r+11],10,-1120210379),i=this.ii(i,s,n,t,e[r+2],15,718787259),t=this.ii(t,i,s,n,e[r+9],21,-343485551),n=this.addme(n,l),t=this.addme(t,a),i=this.addme(i,h),s=this.addme(s,c),r+=16}return[n,t,i,s]},__class__:Zt},function(){}),ei=((x["haxe.ds.ArraySort"]=Jt).__name__="haxe.ds.ArraySort",Jt.sort=function(e,n){Jt.rec(e,n,0,e.length)},Jt.rec=function(e,n,t,i){var s=t+i>>1;if(i-t<12){if(!(i<=t))for(var r=t+1,l=i;r<l;)for(var a=r++;t<a&&n(e[a],e[a-1])<0;)Jt.swap(e,a-1,a),--a}else Jt.rec(e,n,t,s),Jt.rec(e,n,s,i),Jt.doMerge(e,n,t,s,i,s-t,i-s)},Jt.doMerge=function(e,n,t,i,s,r,l){var a,h,c,o;0!=r&&0!=l&&(r+l==2?n(e[i],e[t])<0&&Jt.swap(e,i,t):(l<r?o=(h=Jt.lower(e,n,i,s,a=t+(c=r>>1)))-i:c=(a=Jt.upper(e,n,t,i,h=i+(o=l>>1)))-t,Jt.rotate(e,n,a,i,h),Jt.doMerge(e,n,t,a,i=a+o,c,o),Jt.doMerge(e,n,i,h,s,r-c,l-o)))},Jt.rotate=function(e,n,t,i,s){if(t!=i&&i!=s)for(var r=Jt.gcd(s-t,i-t);0!=r--;){for(var l=e[t+r],a=i-t,h=t+r,c=t+r+a;c!=t+r;)e[h]=e[c],a<s-(h=c)?c+=a:c=t+(a-(s-c));e[h]=l}},Jt.gcd=function(e,n){for(;0!=n;){var t=e%n;e=n,n=t}return e},Jt.upper=function(e,n,t,i,s){for(var r,l,a=i-t;0<a;)a=n(e[s],e[l=t+(r=a>>1)])<0?r:(t=l+1,a-r-1);return t},Jt.lower=function(e,n,t,i,s){for(var r,l,a=i-t;0<a;)a=n(e[l=t+(r=a>>1)],e[s])<0?(t=l+1,a-r-1):r;return t},Jt.swap=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},function(){this.h={}}),ni=((x["haxe.ds.IntMap"]=ei).__name__="haxe.ds.IntMap",ei.__interfaces__=[Oc],ei.prototype={get:function(e){return this.h[e]},remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e,n=[];for(e in this.h)this.h.hasOwnProperty(e)&&n.push(+e);return new ui(n)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},keyValueIterator:function(){return new _i(this)},copy:function(){for(var e=new ei,n=this.keys();n.hasNext();){var t=n.next();e.h[t]=this.h[t]}return e},__class__:ei},function(){this.length=0}),ti=((x["haxe.ds.List"]=ni).__name__="haxe.ds.List",ni.prototype={add:function(e){e=new ti(e,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},__class__:ni},function(e,n){this.item=e,this.next=n}),ii=((x["haxe.ds._List.ListNode"]=ti).__name__="haxe.ds._List.ListNode",ti.prototype={__class__:ti},function(){this.h={__keys__:{}}}),te=((x["haxe.ds.ObjectMap"]=ii).__name__="haxe.ds.ObjectMap",ii.__interfaces__=[Oc],ii.prototype={set:function(e,n){var t=e.__id__;null==t&&(t=e.__id__=re.$haxeUID++),this.h[t]=n,this.h.__keys__[t]=e},get:function(e){return this.h[e.__id__]},keys:function(){var e,n=[];for(e in this.h.__keys__)this.h.hasOwnProperty(e)&&n.push(this.h.__keys__[e]);return new ui(n)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e.__id__]}}},keyValueIterator:function(){return new _i(this)},__class__:ii},function(){this.h=Object.create(null)}),si=((x["haxe.ds.StringMap"]=te).__name__="haxe.ds.StringMap",te.__interfaces__=[Oc],te.prototype={get:function(e){return this.h[e]},keys:function(){return new si(this.h)},iterator:function(){return new ri(this.h)},keyValueIterator:function(){return new li(this.h)},__class__:te},function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),ri=((x["haxe.ds._StringMap.StringMapKeyIterator"]=si).__name__="haxe.ds._StringMap.StringMapKeyIterator",si.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:si},function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),li=((x["haxe.ds._StringMap.StringMapValueIterator"]=ri).__name__="haxe.ds._StringMap.StringMapValueIterator",ri.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:ri},function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),ai=((x["haxe.ds._StringMap.StringMapKeyValueIterator"]=li).__name__="haxe.ds._StringMap.StringMapKeyValueIterator",li.prototype={hasNext:function(){return this.current<this.length},next:function(){var e=this.keys[this.current++];return{key:e,value:this.h[e]}},__class__:li},{}),hi=(ai.blit=function(e,n,t,i,s){if(e==t){if(n<i)for(var r=n+s,l=i+s,a=0,h=s;a<h;){a++;--r,e[--l]=e[r]}else if(i<n)for(r=n,l=i,a=0,h=s;a<h;){a++;e[l]=e[r],++r,++l}}else for(a=0,h=s;a<h;)t[i+(r=a++)]=e[n+r]},function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b}),ci=((x["haxe.io.Bytes"]=hi).__name__="haxe.io.Bytes",hi.ofString=function(e,n){if(n==ci.RawNative){for(var t=new Uint8Array(e.length<<1),i=0,s=e.length;i<s;){var r=i++,l=e.charCodeAt(r);t[r<<1]=255&l,t[r<<1|1]=l>>8}return new hi(t.buffer)}for(var a=[],r=0;r<e.length;)(l=55296<=(l=e.charCodeAt(r++))&&l<=56319?l-55232<<10|1023&e.charCodeAt(r++):l)<=127?a.push(l):(l<=2047?a.push(192|l>>6):(l<=65535?a.push(224|l>>12):(a.push(240|l>>18),a.push(128|l>>12&63)),a.push(128|l>>6&63)),a.push(128|63&l));return new hi(new Uint8Array(a).buffer)},hi.prototype={getString:function(e,n,t){if(e<0||n<0||e+n>this.length)throw Y.thrown(oi.OutsideBounds);null==t&&(t=ci.UTF8);var i="",s=this.b,r=e,l=e+n;switch(t._hx_index){case 0:for(var a,h;r<l;)if((c=s[r++])<128){if(0==c)break;i+=String.fromCodePoint(c)}else c<224?(a=(63&c)<<6|127&s[r++],i+=String.fromCodePoint(a)):c<240?(a=(31&c)<<12|(127&s[r++])<<6|127&s[r++],i+=String.fromCodePoint(a)):(h=(15&c)<<18|(127&s[r++])<<12|(127&s[r++])<<6|127&s[r++],i+=String.fromCodePoint(h));break;case 1:for(;r<l;){var c=s[r++]|s[r++]<<8;i+=String.fromCodePoint(c)}}return i},toString:function(){return this.getString(0,this.length)},__class__:hi},he["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:c},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:c}}),oi=(ci.__constructs__=[ci.UTF8,ci.RawNative],he["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:c},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:c},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:c},Custom:((a=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:c}})._hx_name="Custom",a.__params__=["e"],a)}),ui=(oi.__constructs__=[oi.Blocked,oi.Overflow,oi.OutsideBounds,oi.Custom],function(e){this.current=0,this.array=e}),_i=((x["haxe.iterators.ArrayIterator"]=ui).__name__="haxe.iterators.ArrayIterator",ui.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:ui},function(e){this.map=e,this.keys=e.keys()}),di=((x["haxe.iterators.MapKeyValueIterator"]=_i).__name__="haxe.iterators.MapKeyValueIterator",_i.prototype={hasNext:function(){return this.keys.hasNext()},next:function(){var e=this.keys.next();return{value:this.map.get(e),key:e}},__class__:_i},he["haxe.rtti.CType"]={__ename__:"haxe.rtti.CType",__constructs__:null,CUnknown:{_hx_name:"CUnknown",_hx_index:0,__enum__:"haxe.rtti.CType",toString:c},CEnum:((a=function(e,n){return{_hx_index:1,name:e,params:n,__enum__:"haxe.rtti.CType",toString:c}})._hx_name="CEnum",a.__params__=["name","params"],a),CClass:((a=function(e,n){return{_hx_index:2,name:e,params:n,__enum__:"haxe.rtti.CType",toString:c}})._hx_name="CClass",a.__params__=["name","params"],a),CTypedef:((a=function(e,n){return{_hx_index:3,name:e,params:n,__enum__:"haxe.rtti.CType",toString:c}})._hx_name="CTypedef",a.__params__=["name","params"],a),CFunction:((a=function(e,n){return{_hx_index:4,args:e,ret:n,__enum__:"haxe.rtti.CType",toString:c}})._hx_name="CFunction",a.__params__=["args","ret"],a),CAnonymous:((a=function(e){return{_hx_index:5,fields:e,__enum__:"haxe.rtti.CType",toString:c}})._hx_name="CAnonymous",a.__params__=["fields"],a),CDynamic:((a=function(e){return{_hx_index:6,t:e,__enum__:"haxe.rtti.CType",toString:c}})._hx_name="CDynamic",a.__params__=["t"],a),CAbstract:((a=function(e,n){return{_hx_index:7,name:e,params:n,__enum__:"haxe.rtti.CType",toString:c}})._hx_name="CAbstract",a.__params__=["name","params"],a)}),bi=(di.__constructs__=[di.CUnknown,di.CEnum,di.CClass,di.CTypedef,di.CFunction,di.CAnonymous,di.CDynamic,di.CAbstract],he["haxe.rtti.Rights"]={__ename__:"haxe.rtti.Rights",__constructs__:null,RNormal:{_hx_name:"RNormal",_hx_index:0,__enum__:"haxe.rtti.Rights",toString:c},RNo:{_hx_name:"RNo",_hx_index:1,__enum__:"haxe.rtti.Rights",toString:c},RCall:((a=function(e){return{_hx_index:2,m:e,__enum__:"haxe.rtti.Rights",toString:c}})._hx_name="RCall",a.__params__=["m"],a),RMethod:{_hx_name:"RMethod",_hx_index:3,__enum__:"haxe.rtti.Rights",toString:c},RDynamic:{_hx_name:"RDynamic",_hx_index:4,__enum__:"haxe.rtti.Rights",toString:c},RInline:{_hx_name:"RInline",_hx_index:5,__enum__:"haxe.rtti.Rights",toString:c}}),pi=(bi.__constructs__=[bi.RNormal,bi.RNo,bi.RCall,bi.RMethod,bi.RDynamic,bi.RInline],he["haxe.rtti.TypeTree"]={__ename__:"haxe.rtti.TypeTree",__constructs__:null,TPackage:((a=function(e,n,t){return{_hx_index:0,name:e,full:n,subs:t,__enum__:"haxe.rtti.TypeTree",toString:c}})._hx_name="TPackage",a.__params__=["name","full","subs"],a),TClassdecl:((a=function(e){return{_hx_index:1,c:e,__enum__:"haxe.rtti.TypeTree",toString:c}})._hx_name="TClassdecl",a.__params__=["c"],a),TEnumdecl:((a=function(e){return{_hx_index:2,e:e,__enum__:"haxe.rtti.TypeTree",toString:c}})._hx_name="TEnumdecl",a.__params__=["e"],a),TTypedecl:((a=function(e){return{_hx_index:3,t:e,__enum__:"haxe.rtti.TypeTree",toString:c}})._hx_name="TTypedecl",a.__params__=["t"],a),TAbstractdecl:((a=function(e){return{_hx_index:4,a:e,__enum__:"haxe.rtti.TypeTree",toString:c}})._hx_name="TAbstractdecl",a.__params__=["a"],a)}),fi=(pi.__constructs__=[pi.TPackage,pi.TClassdecl,pi.TEnumdecl,pi.TTypedecl,pi.TAbstractdecl],function(){}),Oi=((x["haxe.rtti.Meta"]=fi).__name__="haxe.rtti.Meta",fi.getMeta=function(e){return e.__meta__},fi.getFields=function(e){e=fi.getMeta(e);return null==e||null==e.fields?{}:e.fields},function(){}),gi=((x["haxe.rtti.Rtti"]=Oi).__name__="haxe.rtti.Rtti",Oi.getRtti=function(e){var n=P.field(e,"__rtti");if(null==n)throw Y.thrown("Class "+e.__name__+" has no RTTI information, consider adding @:rtti");n=D.parse(n).firstElement(),n=(new gi).processElement(n);if(1==n._hx_index)return e=n.c;throw Y.thrown("Enum mismatch: expected TClassDecl but found "+L.string(n))},function(){this.root=[]}),mi=((x["haxe.rtti.XmlParser"]=gi).__name__="haxe.rtti.XmlParser",gi.prototype={mkPath:function(e){return e},mkTypeParams:function(e){e=e.split(":");return""==e[0]?[]:e},mkRights:function(e){switch(e){case"dynamic":return bi.RDynamic;case"inline":return bi.RInline;case"method":return bi.RMethod;case"null":return bi.RNo;default:return bi.RCall(e)}},xerror:function(e){var n;if(e.nodeType==D.Document)n="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));n=e.nodeName}throw Y.thrown("Invalid "+n)},processElement:function(e){if(e.nodeType!=D.Document&&e.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==e.nodeType?"null":oe.toString(e.nodeType)));var n,t=e;if(t.nodeType==D.Document)n="Document";else{if(t.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":oe.toString(t.nodeType)));n=t.nodeName}switch(n){case"abstract":return pi.TAbstractdecl(this.xabstract(t));case"class":return pi.TClassdecl(this.xclass(t));case"enum":return pi.TEnumdecl(this.xenum(t));case"typedef":return pi.TTypedecl(this.xtypedef(t));default:return this.xerror(t)}},xmeta:function(e){for(var n=[],t=0,i=Ui.resolve(e,"m");t<i.length;){for(var s=i[t],r=(++t,[]),l=0,a=Ui.resolve(s,"e");l<a.length;){var h=a[l];++l,r.push(xi.get_innerHTML(h))}n.push({name:wi.resolve(s,"n"),params:r})}return n},xoverloads:function(e){for(var n=[],t=e.elements();t.hasNext();){var i=t.next();n.push(this.xclassfield(i))}return n},xpath:function(e){for(var n=this.mkPath(wi.resolve(e,"path")),t=[],i=e.elements();i.hasNext();){var s=i.next();t.push(this.xtype(s))}return{path:n,params:t}},xclass:function(e){for(var n=null,t=null,i=null,s=[],r=[],l=[],a=[],h=e.exists("interface"),c=e.elements();c.hasNext();){var o,u=c.next();if(u.nodeType==D.Document)o="Document";else{if(u.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==u.nodeType?"null":oe.toString(u.nodeType)));o=u.nodeName}switch(o){case"extends":h?s.push(this.xpath(u)):n=this.xpath(u);break;case"haxe_doc":t=xi.get_innerData(u);break;case"haxe_dynamic":var _=u.firstElement();if(_.nodeType!=D.Document&&_.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==_.nodeType?"null":oe.toString(_.nodeType)));i=this.xtype(_);break;case"implements":s.push(this.xpath(u));break;case"meta":a=this.xmeta(u);break;default:(u.exists("static")?l:r).push(this.xclassfield(u))}}return{file:vi.resolve(e,"file")?wi.resolve(e,"file"):null,path:this.mkPath(wi.resolve(e,"path")),module:vi.resolve(e,"module")?this.mkPath(wi.resolve(e,"module")):null,doc:t,isPrivate:e.exists("private"),isExtern:e.exists("extern"),isFinal:e.exists("final"),isInterface:h,params:this.mkTypeParams(wi.resolve(e,"params")),superClass:n,interfaces:s,fields:r,statics:l,tdynamic:i,platforms:this.defplat(),meta:a}},xclassfield:function(e,n){null==n&&(n=!1);for(var t,i=e.elements(),s=this.xtype(i.next()),r=null,l=[],a=null,h=i;h.hasNext();){var c,o=h.next();if(o.nodeType==D.Document)c="Document";else{if(o.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==o.nodeType?"null":oe.toString(o.nodeType)));c=o.nodeName}switch(c){case"haxe_doc":r=xi.get_innerData(o);break;case"meta":l=this.xmeta(o);break;case"overloads":a=this.xoverloads(o);break;default:this.xerror(o)}}if(e.nodeType==D.Document)t="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));t=e.nodeName}return{name:t,type:s,isPublic:e.exists("public")||n,isFinal:e.exists("final"),isOverride:e.exists("override"),line:vi.resolve(e,"line")?L.parseInt(wi.resolve(e,"line")):null,doc:r,get:vi.resolve(e,"get")?this.mkRights(wi.resolve(e,"get")):bi.RNormal,set:vi.resolve(e,"set")?this.mkRights(wi.resolve(e,"set")):bi.RNormal,params:vi.resolve(e,"params")?this.mkTypeParams(wi.resolve(e,"params")):[],platforms:this.defplat(),meta:l,overloads:a,expr:vi.resolve(e,"expr")?wi.resolve(e,"expr"):null}},xenum:function(e){for(var n=[],t=null,i=[],s=e.elements();s.hasNext();){var r,l,a=s.next();if(a.nodeType==D.Document)r="Document";else{if(a.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":oe.toString(a.nodeType)));r=a.nodeName}if("haxe_doc"==r)t=xi.get_innerData(a);else{if(a.nodeType==D.Document)l="Document";else{if(a.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":oe.toString(a.nodeType)));l=a.nodeName}"meta"==l?i=this.xmeta(a):n.push(this.xenumfield(a))}}return{file:vi.resolve(e,"file")?wi.resolve(e,"file"):null,path:this.mkPath(wi.resolve(e,"path")),module:vi.resolve(e,"module")?this.mkPath(wi.resolve(e,"module")):null,doc:t,isPrivate:e.exists("private"),isExtern:e.exists("extern"),params:this.mkTypeParams(wi.resolve(e,"params")),constructors:n,platforms:this.defplat(),meta:i}},xenumfield:function(e){var n,t,i=null,s=e.elementsNamed("haxe_doc"),s=s.hasNext()?s.next():null,r=yi.resolve(e,"meta")?this.xmeta(mi.resolve(e,"meta")):[];if(vi.resolve(e,"a"))for(var l=wi.resolve(e,"a").split(":"),a=e.elements(),i=[],h=0;h<l.length;){var c=l[h],o=(++h,!1);"?"==c.charAt(0)&&(o=!0,c=le.substr(c,1,null)),i.push({name:c,opt:o,t:this.xtype(a.next())})}if(e.nodeType==D.Document)n="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));n=e.nodeName}if(null==s)t=null;else{if(s.nodeType!=D.Document&&s.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==s.nodeType?"null":oe.toString(s.nodeType)));t=xi.get_innerData(s)}return{name:n,args:i,doc:t,meta:r,platforms:this.defplat()}},xabstract:function(e){for(var n=null,t=null,i=null,s=[],r=[],l=[],a=e.elements();a.hasNext();){var h,c=a.next();if(c.nodeType==D.Document)h="Document";else{if(c.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==c.nodeType?"null":oe.toString(c.nodeType)));h=c.nodeName}switch(h){case"from":for(var o=c.elements();o.hasNext();){var u=o.next(),_=u.firstElement();if(_.nodeType!=D.Document&&_.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==_.nodeType?"null":oe.toString(_.nodeType)));l.push({t:this.xtype(_),field:vi.resolve(u,"field")?wi.resolve(u,"field"):null})}break;case"haxe_doc":n=xi.get_innerData(c);break;case"impl":t=this.xclass(mi.resolve(c,"class"));break;case"meta":s=this.xmeta(c);break;case"this":var d=c.firstElement();if(d.nodeType!=D.Document&&d.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==d.nodeType?"null":oe.toString(d.nodeType)));i=this.xtype(d);break;case"to":for(var b=c.elements();b.hasNext();){var p=b.next(),f=p.firstElement();if(f.nodeType!=D.Document&&f.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==f.nodeType?"null":oe.toString(f.nodeType)));r.push({t:this.xtype(f),field:vi.resolve(p,"field")?wi.resolve(p,"field"):null})}break;default:this.xerror(c)}}return{file:vi.resolve(e,"file")?wi.resolve(e,"file"):null,path:this.mkPath(wi.resolve(e,"path")),module:vi.resolve(e,"module")?this.mkPath(wi.resolve(e,"module")):null,doc:n,isPrivate:e.exists("private"),params:this.mkTypeParams(wi.resolve(e,"params")),platforms:this.defplat(),meta:s,athis:i,to:r,from:l,impl:t}},xtypedef:function(e){for(var n=null,t=null,i=[],s=e.elements();s.hasNext();){var r,l,a=s.next();if(a.nodeType==D.Document)r="Document";else{if(a.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":oe.toString(a.nodeType)));r=a.nodeName}if("haxe_doc"==r)n=xi.get_innerData(a);else{if(a.nodeType==D.Document)l="Document";else{if(a.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":oe.toString(a.nodeType)));l=a.nodeName}"meta"==l?i=this.xmeta(a):t=this.xtype(a)}}var h=new te;return null!=this.curplatform&&(h.h[this.curplatform]=t),{file:vi.resolve(e,"file")?wi.resolve(e,"file"):null,path:this.mkPath(wi.resolve(e,"path")),module:vi.resolve(e,"module")?this.mkPath(wi.resolve(e,"module")):null,doc:n,isPrivate:e.exists("private"),params:this.mkTypeParams(wi.resolve(e,"params")),type:t,types:h,platforms:this.defplat(),meta:i}},xtype:function(e){var n;if(e.nodeType==D.Document)n="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));n=e.nodeName}switch(n){case"a":for(var t=[],i=e.elements();i.hasNext();){var s=i.next(),s=this.xclassfield(s,!0);s.platforms=[],t.push(s)}return di.CAnonymous(t);case"c":return di.CClass(this.mkPath(wi.resolve(e,"path")),this.xtypeparams(e));case"d":var r=null,l=e.firstElement();if(null!=l){if(l.nodeType!=D.Document&&l.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==l.nodeType?"null":oe.toString(l.nodeType)));r=this.xtype(l)}return di.CDynamic(r);case"e":return di.CEnum(this.mkPath(wi.resolve(e,"path")),this.xtypeparams(e));case"f":for(var a=[],h=0,c=wi.resolve(e,"a").split(":"),o=vi.resolve(e,"v")?new ui(wi.resolve(e,"v").split(":")):null,u=e.elements();u.hasNext();){var _=u.next(),d=!1,b=h<c.length?c[h++]:null,p=("?"==(b=null==b?"":b).charAt(0)&&(d=!0,b=le.substr(b,1,null)),null==o||o.current>=o.array.length?null:o.array[o.current++]);a.push({name:b,opt:d,t:this.xtype(_),value:""==p?null:p})}l=a[a.length-1];return le.remove(a,l),di.CFunction(a,l.t);case"t":return di.CTypedef(this.mkPath(wi.resolve(e,"path")),this.xtypeparams(e));case"unknown":return di.CUnknown;case"x":return di.CAbstract(this.mkPath(wi.resolve(e,"path")),this.xtypeparams(e));default:return this.xerror(e)}},xtypeparams:function(e){for(var n=[],t=e.elements();t.hasNext();){var i=t.next();n.push(this.xtype(i))}return n},defplat:function(){var e=[];return null!=this.curplatform&&e.push(this.curplatform),e},__class__:gi},{}),wi=(mi.resolve=function(e,n){var t,i=e.elementsNamed(n).next();if(null==i){if(e.nodeType==D.Document)t="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));t=e.nodeName}throw Y.thrown(t+" is missing element "+n)}if(i.nodeType!=D.Document&&i.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==i.nodeType?"null":oe.toString(i.nodeType)));return i},{}),vi=(wi.resolve=function(e,n){if(e.nodeType==D.Document)throw Y.thrown("Cannot access document attribute "+n);var t=e.get(n);if(null!=t)return t;if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));throw Y.thrown(e.nodeName+" is missing attribute "+n)},{}),yi=(vi.resolve=function(e,n){if(e.nodeType==D.Document)throw Y.thrown("Cannot access document attribute "+n);return e.exists(n)},{}),Ui=(yi.resolve=function(e,n){return e.elementsNamed(n).hasNext()},{}),xi=(Ui.resolve=function(e,n){for(var t=[],i=e.elementsNamed(n);i.hasNext();){var s=i.next();if(s.nodeType!=D.Document&&s.nodeType!=D.Element)throw Y.thrown("Invalid nodeType "+(null==s.nodeType?"null":oe.toString(s.nodeType)));t.push(s)}return t},{}),Ci=(xi.__properties__={get_innerHTML:"get_innerHTML",get_innerData:"get_innerData"},xi.get_innerData=function(e){if(e.nodeType!=D.Document&&e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));var n=0,t=e.children;if(t.length<=0){if(e.nodeType==D.Document)r="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));r=e.nodeName}throw Y.thrown(r+" does not have data")}var i=t[n++];if(1<t.length){var s=t[n++];if(i.nodeType==D.PCData&&s.nodeType==D.CData){if(i.nodeType==D.Document||i.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":oe.toString(i.nodeType)));r=""==z.trim(i.nodeValue)}else r=!1;if(r){if(t.length<=2){if(s.nodeType==D.Document||s.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==s.nodeType?"null":oe.toString(s.nodeType)));return s.nodeValue}var r,n=t[+n];if(n.nodeType==D.PCData){if(n.nodeType==D.Document||n.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":oe.toString(n.nodeType)));r=""==z.trim(n.nodeValue)}else r=!1;if(r&&t.length<=3){if(s.nodeType==D.Document||s.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==s.nodeType?"null":oe.toString(s.nodeType)));return s.nodeValue}}if(e.nodeType==D.Document)r="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));r=e.nodeName}throw Y.thrown(r+" does not only have data")}if(i.nodeType!=D.PCData&&i.nodeType!=D.CData){if(e.nodeType==D.Document)r="Document";else{if(e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));r=e.nodeName}throw Y.thrown(r+" does not have data")}if(i.nodeType==D.Document||i.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":oe.toString(i.nodeType)));return i.nodeValue},xi.get_innerHTML=function(e){var n="";if(e.nodeType!=D.Document&&e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));for(var t=0,i=e.children;t<i.length;){var s=i[t++];n+=L.string(Di.print(s))}return n},(x["haxe.xml.XmlParserException"]=w2).__name__="haxe.xml.XmlParserException",w2.prototype={toString:function(){return Ti.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:w2},function(){}),Di=((x["haxe.xml.Parser"]=Ci).__name__="haxe.xml.Parser",Ci.parse=function(e,n){null==n&&(n=!1);var t=D.createDocument();return Ci.doParse(e,n,0,t),t},Ci.doParse=function(e,n,t,i){null==t&&(t=0);for(var s=null,r=1,l=1,a=null,h=0,c=0,o=0,u=new y,_=1,d=-1;t<e.length;){var b,p,f,O,g=e.charCodeAt(t);switch(r){case 0:switch(g){case 9:case 10:case 13:case 32:break;default:r=l;continue}break;case 1:if(60!=g){h=t,r=13;continue}r=0,l=2;break;case 2:switch(g){case 33:if(91==e.charCodeAt(t+1)){if(t+=2,"CDATA["!=le.substr(e,t,6).toUpperCase())throw Y.thrown(new w2("Expected <![CDATA[",e,t));r=17,h=(t+=5)+1}else if(68==e.charCodeAt(t+1)||100==e.charCodeAt(t+1)){if("OCTYPE"!=le.substr(e,t+2,6).toUpperCase())throw Y.thrown(new w2("Expected <!DOCTYPE",e,t));r=16,h=(t+=8)+1}else{if(45!=e.charCodeAt(t+1)||45!=e.charCodeAt(t+2))throw Y.thrown(new w2("Expected \x3c!--",e,t));r=15,h=(t+=2)+1}break;case 47:if(null==i)throw Y.thrown(new w2("Expected node name",e,t));h=t+1,r=0,l=10;break;case 63:r=14,h=t;break;default:r=3,h=t;continue}break;case 3:if(97<=g&&g<=122||65<=g&&g<=90||48<=g&&g<=57||58==g||46==g||95==g||45==g)break;if(t==h)throw Y.thrown(new w2("Expected node name",e,t));s=D.createElement(le.substr(e,h,t-h)),i.addChild(s),++c,r=0,l=4;continue;case 4:switch(g){case 47:r=11;break;case 62:r=9;break;default:r=5,h=t;continue}break;case 5:if(97<=g&&g<=122||65<=g&&g<=90||48<=g&&g<=57||58==g||46==g||95==g||45==g)break;if(h==t)throw Y.thrown(new w2("Expected attribute name",e,t));a=le.substr(e,h,t-h);if(s.exists(a))throw Y.thrown(new w2("Duplicate attribute ["+a+"]",e,t));r=0,l=6;continue;case 6:if(61!=g)throw Y.thrown(new w2("Expected =",e,t));r=0,l=7;break;case 7:switch(g){case 34:case 39:u=new y,r=8,h=t+1,d=g;break;default:throw Y.thrown(new w2('Expected "',e,t))}break;case 8:switch(g){case 38:var m=t-h;u.b+=null==m?le.substr(e,h,null):le.substr(e,h,m),r=18,_=8,h=t+1;break;case 60:case 62:if(n)throw Y.thrown(new w2("Invalid unescaped "+String.fromCodePoint(g)+" in attribute value",e,t));g==d&&(u.b+=null==(b=t-h)?le.substr(e,h,null):le.substr(e,h,b),b=u.b,u=new y,s.set(a,b),r=0,l=4);break;default:g==d&&(u.b+=null==(b=t-h)?le.substr(e,h,null):le.substr(e,h,b),p=u.b,u=new y,s.set(a,p),r=0,l=4)}break;case 9:h=t=Ci.doParse(e,n,t,s),r=1;break;case 10:if(97<=g&&g<=122||65<=g&&g<=90||48<=g&&g<=57||58==g||46==g||95==g||45==g)break;if(h==t)throw Y.thrown(new w2("Expected node name",e,t));var w=le.substr(e,h,t-h);if(null==i||0!=i.nodeType)throw Y.thrown(new w2("Unexpected </"+w+">, tag is not open",e,t));if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));if(w!=i.nodeName){if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));throw Y.thrown(new w2("Expected </"+i.nodeName+">",e,t))}r=0,l=12;continue;case 11:if(62!=g)throw Y.thrown(new w2("Expected >",e,t));r=1;break;case 12:if(62==g)return 0==c&&i.addChild(D.createPCData("")),t;throw Y.thrown(new w2("Expected >",e,t));case 13:60==g?(u.b+=null==(w=t-h)?le.substr(e,h,null):le.substr(e,h,w),f=D.createPCData(u.b),u=new y,i.addChild(f),++c,r=0,l=2):38==g&&(u.b+=null==(f=t-h)?le.substr(e,h,null):le.substr(e,h,f),r=18,_=13,h=t+1);break;case 14:63==g&&62==e.charCodeAt(t+1)&&(++t,O=le.substr(e,h+1,t-h-2),i.addChild(D.createProcessingInstruction(O)),++c,r=1);break;case 15:45==g&&45==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)&&(i.addChild(D.createComment(le.substr(e,h,t-h))),++c,t+=2,r=1);break;case 16:91==g?++o:93==g?--o:62==g&&0==o&&(i.addChild(D.createDocType(le.substr(e,h,t-h))),++c,r=1);break;case 17:93==g&&93==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)&&(O=D.createCData(le.substr(e,h,t-h)),i.addChild(O),++c,t+=2,r=1);break;case 18:if(59==g){var v=le.substr(e,h,t-h);if(35==v.charCodeAt(0)){var U=120==v.charCodeAt(1)?L.parseInt("0"+le.substr(v,1,v.length-1)):L.parseInt(le.substr(v,1,v.length-1));u.b+=String.fromCodePoint(U)}else if(Object.prototype.hasOwnProperty.call(Ci.escapes.h,v))u.b+=L.string(Ci.escapes.h[v]);else{if(n)throw Y.thrown(new w2("Undefined entity: "+v,e,t));u.b+=L.string("&"+v+";")}h=t+1,r=_}else if(!(97<=g&&g<=122||65<=g&&g<=90||48<=g&&g<=57||58==g||46==g||95==g||45==g)&&35!=g){if(n)throw Y.thrown(new w2("Invalid character in entity: "+String.fromCodePoint(g),e,t));u.b+=String.fromCodePoint(38);U=t-h;u.b+=null==U?le.substr(e,h,null):le.substr(e,h,U),h=--t+1,r=_}}++t}if(1==r&&(h=t,r=13),13==r){if(0==i.nodeType){if(i.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":oe.toString(i.nodeType)));throw Y.thrown(new w2("Unclosed node <"+i.nodeName+">",e,t))}t==h&&0!=c||(u.b+=null==(m=t-h)?le.substr(e,h,null):le.substr(e,h,m),i.addChild(D.createPCData(u.b)),++c)}else{if(n||18!=r||13!=_)throw Y.thrown(new w2("Unexpected end",e,t));u.b+=String.fromCodePoint(38),u.b+=null==(m=t-h)?le.substr(e,h,null):le.substr(e,h,m),i.addChild(D.createPCData(u.b)),++c}return t},function(e){this.output=new y,this.pretty=e}),ie=((x["haxe.xml.Printer"]=Di).__name__="haxe.xml.Printer",Di.print=function(e,n){n=new Di(n=null==n?!1:n);return n.writeNode(e,""),n.output.b},Di.prototype={writeNode:function(e,n){switch(e.nodeType){case 0:if(this.output.b+=L.string(n+"<"),e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));this.output.b+=L.string(e.nodeName);for(var t=e.attributes();t.hasNext();){var i=t.next(),s=(this.output.b+=L.string(" "+i+'="'),z.htmlEscape(e.get(i),!0));this.output.b+=L.string(s),this.output.b+='"'}if(this.hasChildren(e)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),e.nodeType!=D.Document&&e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));for(var r=0,l=e.children;r<l.length;){var a=l[r++];this.writeNode(a,this.pretty?n+"\t":n)}if(this.output.b+=L.string(n+"</"),e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));this.output.b+=L.string(e.nodeName),this.output.b+=">"}else this.output.b+="/>";this.pretty&&(this.output.b+="\n");break;case 1:if(e.nodeType==D.Document||e.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":oe.toString(e.nodeType)));var h=e.nodeValue;0!=h.length&&(s=n+z.htmlEscape(h),this.output.b+=L.string(s),this.pretty)&&(this.output.b+="\n");break;case 2:if(this.output.b+=L.string(n+"<![CDATA["),e.nodeType==D.Document||e.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":oe.toString(e.nodeType)));this.output.b+=L.string(e.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(e.nodeType==D.Document||e.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":oe.toString(e.nodeType)));var h=e.nodeValue,c=new RegExp("[\n\r\t]+","g".split("u").join("")),s=(h="\x3c!--"+(h=h.replace(c,""))+"--\x3e",this.output.b+=null==n?"null":""+n,z.trim(h));this.output.b+=L.string(s),this.pretty&&(this.output.b+="\n");break;case 4:if(e.nodeType==D.Document||e.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":oe.toString(e.nodeType)));this.output.b+=L.string("<!DOCTYPE "+e.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(e.nodeType==D.Document||e.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":oe.toString(e.nodeType)));this.output.b+=L.string("<?"+e.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(e.nodeType!=D.Document&&e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));for(r=0,l=e.children;r<l.length;){a=l[r++];this.writeNode(a,n)}}},hasChildren:function(e){if(e.nodeType!=D.Document&&e.nodeType!=D.Element)throw Y.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":oe.toString(e.nodeType)));for(var n=0,t=e.children;n<t.length;){var i=t[n++];switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==D.Document||i.nodeType==D.Element)throw Y.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":oe.toString(i.nodeType)));if(0!=z.ltrim(i.nodeValue).length)return!0}}return!1},__class__:Di},(x["hsluv.Geometry"]=z2).__name__="hsluv.Geometry",z2.intersectLineLine=function(e,n){n=(e.intercept-n.intercept)/(n.slope-e.slope);return{x:n,y:e.slope*n+e.intercept}},z2.distanceFromOrigin=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},z2.distanceLineFromOrigin=function(e){return Math.abs(e.intercept)/Math.sqrt(Math.pow(e.slope,2)+1)},z2.perpendicularThroughPoint=function(e,n){e=-1/e.slope;return{slope:e,intercept:n.y-e*n.x}},z2.angleFromOrigin=function(e){return Math.atan2(e.y,e.x)},z2.normalizeAngle=function(e){var n=2*Math.PI;return(e%n+n)%n},z2.lengthOfRayUntilIntersect=function(e,n){return n.intercept/(Math.sin(e)-n.slope*Math.cos(e))},function(){}),Ti=((x["hsluv.Hsluv"]=ie).__name__="hsluv.Hsluv",ie.getBounds=function(e){for(var n=[],t=Math.pow(e+16,3)/1560896,i=t>ie.epsilon?t:e/ie.kappa,s=0;s<3;){var r=s++,l=ie.m[r][0],a=ie.m[r][1],r=ie.m[r][2],h=(632260*r-126452*a)*i,h=(n.push({slope:(284517*l-94839*r)*i/h,intercept:((838422*r+769860*a+731718*l)*e*i-0*e)/h}),(284517*l-94839*r)*i),c=(632260*r-126452*a)*i+126452;n.push({slope:h/c,intercept:((838422*r+769860*a+731718*l)*e*i-769860*e)/c})}return n},ie.maxSafeChromaForL=function(e){for(var n=ie.getBounds(e),t=1/0,i=0;i<n.length;)var s=n[i],s=(++i,z2.distanceLineFromOrigin(s)),t=Math.min(t,s);return t},ie.maxChromaForLH=function(e,n){for(var t=n/360*Math.PI*2,i=ie.getBounds(e),s=1/0,r=0;r<i.length;){var l=i[r],l=(++r,z2.lengthOfRayUntilIntersect(t,l));0<=l&&(s=Math.min(s,l))}return s},ie.dotProduct=function(e,n){for(var t=0,i=0,s=e.length;i<s;){var r=i++;t+=e[r]*n[r]}return t},ie.fromLinear=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055},ie.toLinear=function(e){return.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92},ie.xyzToRgb=function(e,n){var t=ie.fromLinear(ie.dotProduct(ie.m[0],e)),i=ie.fromLinear(ie.dotProduct(ie.m[1],e)),e=ie.fromLinear(ie.dotProduct(ie.m[2],e));return(n=null==n?[0,0,0]:n)[0]=t,n[1]=i,n[2]=e,n},ie.rgbToXyz=function(e,n){var t=e[0],i=e[1],e=e[2],t=((n=null==n?[0,0,0]:n)[0]=ie.toLinear(t),n[1]=ie.toLinear(i),n[2]=ie.toLinear(e),ie.dotProduct(ie.minv[0],n)),i=ie.dotProduct(ie.minv[1],n),e=ie.dotProduct(ie.minv[2],n);return n[0]=t,n[1]=i,n[2]=e,n},ie.yToL=function(e){return e<=ie.epsilon?e/ie.refY*ie.kappa:116*Math.pow(e/ie.refY,.3333333333333333)-16},ie.lToY=function(e){return e<=8?ie.refY*e/ie.kappa:ie.refY*Math.pow((e+16)/116,3)},ie.xyzToLuv=function(e,n){var t=e[0],i=e[1],e=(null==n&&(n=[0,0,0]),t+15*i+3*e[2]),t=4*t,s=9*i,e=(0!=e?(t/=e,s/=e):s=t=NaN,ie.yToL(i));return 0==e?(n[0]=0,n[1]=0,n[2]=0):(i=13*e*(t-ie.refU),t=13*e*(s-ie.refV),n[0]=e,n[1]=i,n[2]=t),n},ie.luvToXyz=function(e,n){null==n&&(n=[0,0,0]);var t=e[0],i=e[1],e=e[2];return 0==t?(n[0]=0,n[1]=1,n[2]=2):(i=i/(13*t)+ie.refU,e=e/(13*t)+ie.refV,e=(9*(t=ie.lToY(t))-15*e*t-e*(i=0-9*t*i/((i-4)*e-i*e)))/(3*e),n[0]=i,n[1]=t,n[2]=e),n},ie.luvToLch=function(e,n){var t,i=e[0],s=e[1],e=e[2],r=(null==n&&(n=[0,0,0]),Math.sqrt(s*s+e*e));return r<1e-8?t=0:(t=180*Math.atan2(e,s)/Math.PI)<0&&(t=360+t),n[0]=i,n[1]=r,n[2]=t,n},ie.lchToLuv=function(e,n){var t=e[0],i=e[1],e=(null==n&&(n=[0,0,0]),e[2]/360*2*Math.PI),s=Math.cos(e)*i,e=Math.sin(e)*i;return n[0]=t,n[1]=s,n[2]=e,n},ie.hsluvToLch=function(e,n){var t=e[0],i=e[1],e=e[2];return null==n&&(n=[0,0,0]),99.9999999<e?(n[0]=100,n[1]=0,n[2]=t):(e<1e-8?(n[0]=0,n[1]=0):(i=ie.maxChromaForLH(e,t)/100*i,n[0]=e,n[1]=i),n[2]=t),n},ie.lchToHsluv=function(e,n){var t=e[0],i=e[1],e=e[2];return null==n&&(n=[0,0,0]),99.9999999<t?(n[0]=e,n[1]=0,n[2]=100):t<1e-8?(n[0]=e,n[1]=0,n[2]=0):(i=i/ie.maxChromaForLH(t,e)*100,n[0]=e,n[1]=i,n[2]=t),n},ie.hpluvToLch=function(e){var n=e[0],t=e[1],e=e[2];return 99.9999999<e?[100,0,n]:e<1e-8?[0,0,n]:[e,ie.maxSafeChromaForL(e)/100*t,n]},ie.lchToHpluv=function(e){var n=e[0],t=e[1],e=e[2];return 99.9999999<n?[e,0,100]:n<1e-8?[e,0,0]:[e,t/ie.maxSafeChromaForL(n)*100,n]},ie.rgbToHex=function(e){var n="#",t=e[0],i=(s=Math.round(255*t))%16,t=(n+=ie.hexChars.charAt((s-i)/16|0)+ie.hexChars.charAt(i),e[1]),s=Math.round(255*t),t=(n+=ie.hexChars.charAt((s-(i=s%16))/16|0)+ie.hexChars.charAt(i),e[2]),s=Math.round(255*t);return n+=ie.hexChars.charAt((s-(i=s%16))/16|0)+ie.hexChars.charAt(i)},ie.hexToRgb=function(e){e=e.toLowerCase();var n=[],t=ie.hexChars.indexOf(e.charAt(1)),i=ie.hexChars.indexOf(e.charAt(2)),t=(n.push((16*t+i)/255),ie.hexChars.indexOf(e.charAt(3))),i=ie.hexChars.indexOf(e.charAt(4)),t=(n.push((16*t+i)/255),ie.hexChars.indexOf(e.charAt(5))),i=ie.hexChars.indexOf(e.charAt(6));return n.push((16*t+i)/255),n},ie.lchToRgb=function(e,n){return ie.lchToLuv(e,n=null==n?[0,0,0]:n),ie.luvToXyz(n,n),ie.xyzToRgb(n,n),n},ie.rgbToLch=function(e,n){return ie.rgbToXyz(e,n=null==n?[0,0,0]:n),ie.xyzToLuv(n,n),ie.luvToLch(n,n),n},ie.hsluvToRgb=function(e,n){return ie.hsluvToLch(e,n=null==n?[0,0,0]:n),ie.lchToRgb(n,n),n},ie.rgbToHsluv=function(e,n){return ie.rgbToLch(e,n=null==n?[0,0,0]:n),ie.lchToHsluv(n,n),n},ie.hpluvToRgb=function(e){return ie.lchToRgb(ie.hpluvToLch(e))},ie.rgbToHpluv=function(e){return ie.lchToHpluv(ie.rgbToLch(e))},ie.hsluvToHex=function(e){return ie.rgbToHex(ie.hsluvToRgb(e))},ie.hpluvToHex=function(e){return ie.rgbToHex(ie.hpluvToRgb(e))},ie.hexToHsluv=function(e){return ie.rgbToHsluv(ie.hexToRgb(e))},ie.hexToHpluv=function(e){return ie.rgbToHpluv(ie.hexToRgb(e))},function(){}),Si=((x["js.Boot"]=Ti).__name__="js.Boot",Ti.getClass=function(e){var n;return null==e?null:e instanceof Array?Array:null!=(n=e.__class__)?n:null!=(n=Ti.__nativeClassName(e))?Ti.__resolveNativeClass(n):null},Ti.__string_rec=function(s,r){if(null==s)return"null";if(5<=r.length)return"<...>";var l,e,n=typeof s;switch(n="function"==n&&(s.__name__||s.__ename__)?"object":n){case"function":return"<function>";case"object":if(s.__enum__)return c=(l=he[s.__enum__].__constructs__[s._hx_index])._hx_name,l.__params__?(r+="\t",c+"("+function(){for(var e=[],n=0,t=l.__params__;n<t.length;){var i=t[n];n+=1,e.push(Ti.__string_rec(s[i],r))}return e}().join(",")+")"):c;if(s instanceof Array){for(var t="[",i=(r+="\t",0),a=s.length;i<a;){var h=i++;t+=(0<h?",":"")+Ti.__string_rec(s[h],r)}return t+="]"}try{e=s.toString}catch(i){return jt.lastError=i,"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e){var c=s.toString();if("[object Object]"!=c)return c}var t="{\n",o=(r+="\t",null!=s.hasOwnProperty),u=null;for(u in s)o&&!s.hasOwnProperty(u)||"prototype"!=u&&"__class__"!=u&&"__super__"!=u&&"__interfaces__"!=u&&"__properties__"!=u&&(2!=t.length&&(t+=", \n"),t+=r+u+" : "+Ti.__string_rec(s[u],r));return t+="\n"+(r=r.substring(1))+"}";case"string":return s;default:return String(s)}},Ti.__interfLoop=function(e,n){if(null==e)return!1;if(e==n)return!0;var t=e.__interfaces__;if(null!=t)for(var i=0,s=t.length;i<s;){var r=t[i++];if(r==n||Ti.__interfLoop(r,n))return!0}return Ti.__interfLoop(e.__super__,n)},Ti.__instanceof=function(e,n){if(null==n)return!1;switch(n){case Array:return e instanceof Array;case Ki:return"boolean"==typeof e;case Wi:return null!=e;case Gi:return"number"==typeof e;case Li:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof n){if(Ti.__downcastCheck(e,n))return!0}else if("object"==typeof n&&Ti.__isNativeObj(n)&&e instanceof n)return!0;return n==Hi&&null!=e.__name__?!0:n==Vi&&null!=e.__ename__||null!=e.__enum__&&he[e.__enum__]==n}},Ti.__downcastCheck=function(e,n){return e instanceof n||!!n.__isInterface__&&Ti.__interfLoop(Ti.getClass(e),n)},Ti.__nativeClassName=function(e){e=Ti.__toStr.call(e).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},Ti.__isNativeObj=function(e){return null!=Ti.__nativeClassName(e)},Ti.__resolveNativeClass=function(e){return re[e]},function(){}),Ei=((x["js.html._CanvasElement.CanvasUtil"]=Si).__name__="js.html._CanvasElement.CanvasUtil",Si.getContextWebGL=function(e,n){var t=e.getContext("webgl",n);return null!=t||null!=(t=e.getContext("experimental-webgl",n))?t:null},(x["polyline.Extensions"]=D2).__name__="polyline.Extensions",D2.unsafeGet=function(e,n){return e[n]},D2.unsafeSet=function(e,n,t){e[n]=t},he["polyline.StrokeCap"]={__ename__:"polyline.StrokeCap",__constructs__:null,BUTT:{_hx_name:"BUTT",_hx_index:0,__enum__:"polyline.StrokeCap",toString:c},SQUARE:{_hx_name:"SQUARE",_hx_index:1,__enum__:"polyline.StrokeCap",toString:c}}),Ai=(Ei.__constructs__=[Ei.BUTT,Ei.SQUARE],he["polyline.StrokeJoin"]={__ename__:"polyline.StrokeJoin",__constructs__:null,MITER:{_hx_name:"MITER",_hx_index:0,__enum__:"polyline.StrokeJoin",toString:c},BEVEL:{_hx_name:"BEVEL",_hx_index:1,__enum__:"polyline.StrokeJoin",toString:c}}),Mi=(Ai.__constructs__=[Ai.MITER,Ai.BEVEL],(x["shade.Shade"]=G2).__name__="shade.Shade",G2.prototype={__class__:G2},(x["shade.Frag"]=H2).__name__="shade.Frag",H2.__super__=G2,H2.prototype=$extend(G2.prototype,{__class__:H2}),(x["shade.Shader"]=M2).__name__="shade.Shader",M2.__super__=Gb,M2.prototype=$extend(Gb.prototype,{__class__:M2}),(x["shade.Shader__shaders_Blur_Vert__shaders_Blur_Frag"]=N2).__name__="shade.Shader__shaders_Blur_Vert__shaders_Blur_Frag",N2.__super__=Gb,N2.prototype=$extend(Gb.prototype,{__class__:N2}),(x["shade.Shader__shaders_Glow_Vert__shaders_Glow_Frag"]=O2).__name__="shade.Shader__shaders_Glow_Vert__shaders_Glow_Frag",O2.__super__=Gb,O2.prototype=$extend(Gb.prototype,{__class__:O2}),(x["shade.Shader__shaders_Msdf_Vert__shaders_Msdf_Frag"]=P2).__name__="shade.Shader__shaders_Msdf_Vert__shaders_Msdf_Frag",P2.__super__=Gb,P2.prototype=$extend(Gb.prototype,{__class__:P2}),(x["shade.Shader__shaders_PixelArt_Vert__shaders_PixelArt_Frag"]=Q2).__name__="shade.Shader__shaders_PixelArt_Vert__shaders_PixelArt_Frag",Q2.__super__=Gb,Q2.prototype=$extend(Gb.prototype,{__class__:Q2}),(x["shade.Shader__shaders_Textured_Vert__shaders_Textured_Frag"]=R2).__name__="shade.Shader__shaders_Textured_Vert__shaders_Textured_Frag",R2.__super__=Gb,R2.prototype=$extend(Gb.prototype,{__class__:R2}),(x["shade.Shader__shaders_TintBlack_Vert__shaders_TintBlack_Frag"]=S2).__name__="shade.Shader__shaders_TintBlack_Vert__shaders_TintBlack_Frag",S2.__super__=Gb,S2.prototype=$extend(Gb.prototype,{__class__:S2}),(x["shade.Vert"]=W2).__name__="shade.Vert",W2.__super__=G2,W2.prototype=$extend(G2.prototype,{__class__:W2}),function(){N2.call(this,null,[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")],null)}),Ri=((x["shaders.Blur"]=Mi).__name__="shaders.Blur",Mi.__super__=N2,Mi.prototype=$extend(N2.prototype,{resolveTextureSlot:function(e){return"mainTex"==e?0:-1},__class__:Mi}),(x["shaders.Blur_Vert"]=Y2).__name__="shaders.Blur_Vert",Y2.__super__=W2,Y2.prototype=$extend(W2.prototype,{__class__:Y2}),(x["shaders.Blur_Frag"]=Z2).__name__="shaders.Blur_Frag",Z2.__super__=H2,Z2.prototype=$extend(H2.prototype,{__class__:Z2}),function(){O2.call(this,null,[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")],null)}),Pi=((x["shaders.Glow"]=Ri).__name__="shaders.Glow",Ri.__super__=O2,Ri.prototype=$extend(O2.prototype,{resolveTextureSlot:function(e){return"mainTex"==e?0:-1},__class__:Ri}),(x["shaders.Glow_Vert"]=_2).__name__="shaders.Glow_Vert",_2.__super__=W2,_2.prototype=$extend(W2.prototype,{__class__:_2}),(x["shaders.Glow_Frag"]=ad).__name__="shaders.Glow_Frag",ad.__super__=H2,ad.prototype=$extend(H2.prototype,{__class__:ad}),function(){P2.call(this,null,[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")],null)}),Fi=((x["shaders.Msdf"]=Pi).__name__="shaders.Msdf",Pi.__super__=P2,Pi.prototype=$extend(P2.prototype,{resolveTextureSlot:function(e){return"mainTex"==e?0:-1},__class__:Pi}),(x["shaders.Msdf_Vert"]=cd).__name__="shaders.Msdf_Vert",cd.__super__=W2,cd.prototype=$extend(W2.prototype,{__class__:cd}),(x["shaders.Msdf_Frag"]=dd).__name__="shaders.Msdf_Frag",dd.__super__=H2,dd.prototype=$extend(H2.prototype,{__class__:dd}),function(){Q2.call(this,null,[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")],null)}),Ii=((x["shaders.PixelArt"]=Fi).__name__="shaders.PixelArt",Fi.__super__=Q2,Fi.prototype=$extend(Q2.prototype,{resolveTextureSlot:function(e){return"mainTex"==e?0:-1},__class__:Fi}),(x["shaders.PixelArt_Vert"]=fd).__name__="shaders.PixelArt_Vert",fd.__super__=W2,fd.prototype=$extend(W2.prototype,{__class__:fd}),(x["shaders.PixelArt_Frag"]=gd).__name__="shaders.PixelArt_Frag",gd.__super__=H2,gd.prototype=$extend(H2.prototype,{__class__:gd}),function(){R2.call(this,[],[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")],new Yn(1,"vertexTextureId"))}),ki=((x["shaders.Textured"]=Ii).__name__="shaders.Textured",Ii.__super__=R2,Ii.prototype=$extend(R2.prototype,{resolveTextureSlot:function(e){return"mainTex"==e?0:-1},__class__:Ii}),(x["shaders.Textured_Vert"]=id).__name__="shaders.Textured_Vert",id.__super__=W2,id.prototype=$extend(W2.prototype,{__class__:id}),(x["shaders.Textured_Frag"]=jd).__name__="shaders.Textured_Frag",jd.__super__=H2,jd.prototype=$extend(H2.prototype,{__class__:jd}),function(){S2.call(this,[new Yn(4,"vertexDarkColor")],[new Yn(3,"vertexPosition"),new Yn(2,"vertexTCoord"),new Yn(4,"vertexColor")],new Yn(1,"vertexTextureId"))}),se=((x["shaders.TintBlack"]=ki).__name__="shaders.TintBlack",ki.__super__=S2,ki.prototype=$extend(S2.prototype,{resolveTextureSlot:function(e){return"mainTex"==e?0:-1},__class__:ki}),(x["shaders.TintBlack_Vert"]=ld).__name__="shaders.TintBlack_Vert",ld.__super__=W2,ld.prototype=$extend(W2.prototype,{__class__:ld}),(x["shaders.TintBlack_Frag"]=md).__name__="shaders.TintBlack_Frag",md.__super__=H2,md.prototype=$extend(H2.prototype,{__class__:md}),(x["tracker.Assert"]=nd).__name__="tracker.Assert",function(e,n){this.invalidated=!1,this.boundAutorunArrays=null,this.owner=null,this.afterRun=null,this.onRun=null,h.call(this),this.onRun=e,this.afterRun=n,null!=e&&this.run()}),Bi=((x["tracker.Autorun"]=se).__name__="tracker.Autorun",se.unobserve=function(){se.prevCurrent.push(se.current),se.current=null},se.reobserve=function(){se.current=se.prevCurrent.pop()},se.cease=function(){var e;null!=se.current?(se.current.destroy(),se.current=null):0<se.prevCurrent.length&&null!=(e=se.prevCurrent[se.prevCurrent.length-1])&&(e.destroy(),se.prevCurrent[se.prevCurrent.length-1]=null)},se.unobserved=function(e){se.unobserve(),e(),se.reobserve()},se.invalidateAutorunArray=function(e){for(var n=0,t=e.length;n<t;){var i=e[n++];null==i||i.invalidated||i._lifecycleState<0||(i.invalidated=!0,i.unbindFromAllAutorunArrays(),Bi.backend,ae.app._onceImmediate($bind(i,i.run)))}e.splice(0,e.length),se._autorunArrays[se._autorunArraysLen]=e,se._autorunArraysLen++},se.getAutorunArray=function(){var e;return 0<se._autorunArraysLen?(se._autorunArraysLen--,e=se._autorunArrays[se._autorunArraysLen],se._autorunArrays[se._autorunArraysLen]=null,e):[]},se.recycleAutorunArray=function(e){e.splice(0,e.length),se._autorunArrays[se._autorunArraysLen]=e,se._autorunArraysLen++},se.getArrayOfAutorunArrays=function(){var e;return 0<se._arrayOfAutorunArraysLen?(se._arrayOfAutorunArraysLen--,e=se._arrayOfAutorunArrays[se._arrayOfAutorunArraysLen],se._arrayOfAutorunArrays[se._arrayOfAutorunArraysLen]=null,e):[]},se.recycleArrayOfAutorunArrays=function(e){e.splice(0,e.length),se._arrayOfAutorunArrays[se._arrayOfAutorunArraysLen]=e,se._arrayOfAutorunArraysLen++},se.__super__=h,se.prototype=$extend(h.prototype,{emitReset:function(){this.unbindFromAllAutorunArrays();var e=0;if(null!=this.__cbOnReset&&(e+=this.__cbOnReset.length),null!=this.__cbOnceReset&&(e+=this.__cbOnceReset.length),0<e){var n=w.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReset)for(var s=0,r=this.__cbOnReset.length;s<r;){var l=s++;!0?(t.vector[i]=this.__cbOnReset[l],++i):--e}if(null!=this.__cbOnceReset){for(var a=null,h=null,s=0,r=this.__cbOnceReset.length;s<r;){var c,l=s++;!0?(t.vector[i]=this.__cbOnceReset[l],this.__cbOnceReset[l]=null,c=this.__cbOnceOwnerUnbindReset[l],(this.__cbOnceOwnerUnbindReset[l]=null)!=c&&c(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReset[l]),h.push(this.__cbOnceReset[l]))}this.__cbOnceOwnerUnbindReset=a,this.__cbOnceReset=h}for(s=0,r=e;s<r;){i=s++;(0,t.vector[i])()}n.release(t)}},onReset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event reset because owner is destroyed!");var s=function(e){null!=t&&(i.offReset(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnOwnerUnbindReset&&(this.__cbOnOwnerUnbindReset=[]),this.__cbOnOwnerUnbindReset.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnOwnerUnbindReset&&(this.__cbOnOwnerUnbindReset=[]),this.__cbOnOwnerUnbindReset.push(null);null==this.__cbOnReset&&(this.__cbOnReset=[]),this.__cbOnReset.push(t)},onceReset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Y.thrown("Failed to bind event reset because owner is destroyed!");var s=function(e){null!=t&&(i.offReset(t),t=null),s=n=null};n.onceDestroy(null,s),null==this.__cbOnceOwnerUnbindReset&&(this.__cbOnceOwnerUnbindReset=[]),this.__cbOnceOwnerUnbindReset.push(function(){null!=n&&null!=s&&n.offDestroy(s),t=s=n=null})}else null==this.__cbOnceOwnerUnbindReset&&(this.__cbOnceOwnerUnbindReset=[]),this.__cbOnceOwnerUnbindReset.push(null);null==this.__cbOnceReset&&(this.__cbOnceReset=[]),this.__cbOnceReset.push(t)},offReset:function(e){if(null!=e){var n;null!=this.__cbOnReset&&-1!=(n=this.__cbOnReset.indexOf(e))&&(this.__cbOnReset.splice(n,1),null!=(r=this.__cbOnOwnerUnbindReset[n])&&r(),this.__cbOnOwnerUnbindReset.splice(n,1)),null!=this.__cbOnceReset&&-1!=(n=this.__cbOnceReset.indexOf(e))&&(this.__cbOnceReset.splice(n,1),null!=(r=this.__cbOnceOwnerUnbindReset[n])&&r(),this.__cbOnceOwnerUnbindReset.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReset){for(var t=0,i=this.__cbOnOwnerUnbindReset.length;t<i;){var s=t++;null!=(r=this.__cbOnOwnerUnbindReset[s])&&r()}this.__cbOnOwnerUnbindReset=null}if(null!=this.__cbOnceOwnerUnbindReset){for(t=0,i=this.__cbOnceOwnerUnbindReset.length;t<i;){var r,s=t++;null!=(r=this.__cbOnceOwnerUnbindReset[s])&&r()}this.__cbOnceOwnerUnbindReset=null}this.__cbOnReset=null,this.__cbOnceReset=null}},listensReset:function(){return null!=this.__cbOnReset&&0<this.__cbOnReset.length||null!=this.__cbOnceReset&&0<this.__cbOnceReset.length},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this.emitReset(),this.onRun=null,this.afterRun=null,this._lifecycleState=-1,h.prototype.destroy.call(this))},willEmitReset:function(){this.unbindFromAllAutorunArrays()},run:function(){if(!(this._lifecycleState<0||null!=this.owner&&this.owner._lifecycleState<0)){this.invalidated=!1,this.emitReset();var e=se.current,n=(se.current=this,se.prevCurrent.length);for(this.onRun(),null!=this.afterRun&&(se.unobserve(),this.afterRun(),se.reobserve());n<se.prevCurrent.length;)se.prevCurrent.pop();se.current=e}},invalidate:function(){this.invalidated||this._lifecycleState<0||(this.invalidated=!0,this.unbindFromAllAutorunArrays(),Bi.backend,ae.app._onceImmediate($bind(this,this.run)))},bindToAutorunArray:function(e){if(!(this.invalidated||this._lifecycleState<0)){var n=!1;if(null==this.boundAutorunArrays){var t=0<se._arrayOfAutorunArraysLen?(se._arrayOfAutorunArraysLen--,t=se._arrayOfAutorunArrays[se._arrayOfAutorunArraysLen],se._arrayOfAutorunArrays[se._arrayOfAutorunArraysLen]=null,t):[];this.boundAutorunArrays=t}else for(var i=0,s=this.boundAutorunArrays.length;i<s;){var r=i++;if(this.boundAutorunArrays[r]==e){n=!0;break}}if(!n){for(var l=-1,t=e.length,r=t-1;0<=r;){if(null==(h=e[r])){l=r;break}--r}if(-1==l)e.push(this);else{var a=t-1;if(l<a)for(i=l+1,s=t;i<s;){var h=e[r=i++];e[r-1]=h}e[a]=this}this.boundAutorunArrays.push(e)}}},unbindFromAllAutorunArrays:function(){if(null!=this.boundAutorunArrays){for(var e=0,n=this.boundAutorunArrays.length;e<n;)for(var t=e++,i=this.boundAutorunArrays[t],s=0,r=i.length;s<r;){var l=s++,a=i[l];if(null!=a&&a==this){i[l]=null;break}}var h=this.boundAutorunArrays;h.splice(0,h.length),se._arrayOfAutorunArrays[se._arrayOfAutorunArraysLen]=h,se._arrayOfAutorunArraysLen++,this.boundAutorunArrays=null}},unbindEvents:function(){h.prototype.unbindEvents.call(this),this.offReset()},__class__:se}),(x["tracker.Extensions"]=pd).__name__="tracker.Extensions",pd.unsafeGet=function(e,n){return e[n]},pd.unsafeSet=function(e,n,t){e[n]=t},pd.setArrayLength=function(e,n){if(e.length!=n)if(e.length>n)e.splice(n,e.length-n);else for(var t=e;t.length<n;)t.push(null)},pd.setProperty=function(e,n,t){P.setProperty(e,n,t)},pd.getProperty=function(e,n){return P.getProperty(e,n)},function(){}),Ni=((x["tracker.Tracker"]=Bi).__name__="tracker.Tracker",function(){});function $bind(e,n){var t;return null==n?null:(null==n.__id__&&(n.__id__=re.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:t=e.hx__closures__[n.__id__],null==t&&(t=n.bind(e),e.hx__closures__[n.__id__]=t),t)}(x["tracker.Utils"]=Ni).__name__="tracker.Utils",Ni.uniformFrequencyList=function(e,n,t){for(var i=[],s=[],r=0,l=e.length;r<l;)s[u=r++]=0;for(r=0,l=n.length;r<l;)s[u=r++]+=n[u];for(r=0,l=t;r<l;){r++;for(var a=0,h=0,c=0,o=e.length;c<o;){var u,_=s[u=c++];h<_&&(a=u,h=_)}i.push(e[a]),--s[a];for(var d=0,b=n.length;d<b;){var p=d++;s[p]+=n[p]}}return i},Ni.uniqueId=function(){switch(Ni._nextUniqueIntCursor){case 0:Ni._nextUniqueInt0=(Ni._nextUniqueInt0+1)%2147483647;break;case 1:Ni._nextUniqueInt1=(Ni._nextUniqueInt1+1)%2147483647;break;case 2:Ni._nextUniqueInt2=(Ni._nextUniqueInt2+1)%2147483647;break;case 3:Ni._nextUniqueInt3=(Ni._nextUniqueInt3+1)%2147483647}Ni._nextUniqueIntCursor=(Ni._nextUniqueIntCursor+1)%4;var e,n=Ni._nextUniqueInt0,t=(n=null==n?2147483646*Math.random()|0:n)%62|0,i=n/62|0;e=0<i?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(s=0<(i=n/62|0)?(r=Ni.base62Id(i))+(l=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(r=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(r)))+(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(s));var s,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;s=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(r=0<(i=n/62|0)?(l=Ni.base62Id(i))+(a=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(l=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(l)))+(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(r));var r,t=(n=null==(n=Ni._nextUniqueInt1)?2147483646*Math.random()|0:n)%62|0;r=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(l=0<(i=n/62|0)?(a=Ni.base62Id(i))+(h=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(a=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(a)))+(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(l));var l,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;l=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(a=0<(i=n/62|0)?(h=Ni.base62Id(i))+(c=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(h=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(h)))+(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(a));var a,t=(n=null==(n=Ni._nextUniqueInt2)?2147483646*Math.random()|0:n)%62|0;a=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(h=0<(i=n/62|0)?(c=Ni.base62Id(i))+(d=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(c=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(c)))+(c=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(h));var h,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;h=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(c=0<(i=n/62|0)?(d=Ni.base62Id(i))+(u=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(d=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(d)))+(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(c=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(c));var c,o,u,_,d,t=(n=null==(n=Ni._nextUniqueInt3)?2147483646*Math.random()|0:n)%62|0;return d=e+"-"+s+"-"+r+"-"+l+"-"+a+"-"+h+"-"+(c=0<(i=n/62|0)?(o=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(d=0<(i=n/62|0)?(u=Ni.base62Id(i))+(9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0)):(u=9<o?(90<(_=o-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(o).charAt(0),L.string(u)))+(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0))):(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):L.string(t).charAt(0),L.string(d)))},Ni.base62Id=function(e){var n,t,i=(e=null==e?2147483646*Math.random()|0:e)%62|0,e=e/62|0;return 0<e?(n=Ni.base62Id(e))+(9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0)):(n=9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0),L.string(n))},Ni.encodeChangesetData=function(e){return e.length+":"+e},Ni.decodeChangesetData=function(e){for(var n=new te,t=null,i=[];;){var s=e.indexOf(":");if(-1==s)break;var r=L.parseInt(le.substr(e,0,s)),l=le.substr(e,s+1,r);i.push(l),e=le.substr(e,s+1+r,null)}for(var a=i.length-1;0<=a;){var h=i[a];if(0==a)for(var c=new $t(h),t=c.unserialize(),c=c.unserialize().h,o=c,u=Object.keys(c),_=u.length,d=0;d<_;){var b=o[u[d++]],p=b.id;Object.prototype.hasOwnProperty.call(n.h,p)||(n.h[p]=b)}else for(var f=new $t(h).unserialize(),O=0;O<f.length;){var g=f[O],m=(++O,g.id);Object.prototype.hasOwnProperty.call(n.h,m)||(n.h[m]=g)}--a}return{serialized:t,serializedMap:n}},Ni.equalAny=function(e,n){return e==n},re.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(le.now=performance.now.bind(performance)),x.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:x.String=String,enumerable:!1,writable:!0}),String.__name__="String",(x.Array=Array).__name__="Array",(Date.prototype.__class__=x.Date=Date).__name__="Date";var Li={},Wi={},Gi=Number,Ki=Boolean,Hi={},Vi={};F.bind(),Ti.__toStr={}.toString,j._decomposed1=new i,j._decomposed2=new i,j._tmp=new j,l.pool=new k,m.DEPTH_FACTOR=1e3,m.DEPTH_MARGIN=.01,m.FLAG_NOT_ACTIVE=1,m.FLAG_VISIBLE_WHEN_ACTIVE=2,m.FLAG_TOUCHABLE_WHEN_ACTIVE=4,m.FLAG_IS_HIT_VISUAL=8,m._degToRad=.017453292519943295,m._matrix=new j,m._point=new l,m._minDepth=0,m._maxDepth=0,n.FLAG_TRANSPARENT=16,n.FLAG_ROTATE_FRAME=32,n._matrix=m._matrix,n._degToRad=.017453292519943295,r.__meta__={fields:{unobservedStatus:{observe:null}}},t.escapeRe=new RegExp("[.*+?^${}()|[\\]\\\\]","g"),D.Element=0,D.PCData=1,D.CData=2,D.Comment=3,D.DocType=4,D.ProcessingInstruction=5,D.Document=6,ne.instances=[],ne.all=[],ne.allDirs=[],ne.allByName=new te,ne.allDirsByName=new te,ne.customAssetKinds=new te,ne._instances=[],F.all=["ceramic.png","RobotoMedium.fnt","white.png","RobotoMedium.png"],F.allDirs=[],F.allByName=((e=new te).h.white=["white.png"],e.h.ceramic=["ceramic.png"],e.h.RobotoMedium=["RobotoMedium.fnt","RobotoMedium.png"],e),F.allDirsByName=new te,ue.WHITE="image:white",ue.ROBOTO_MEDIUM="image:RobotoMedium",ue.CERAMIC="image:ceramic",I.filterIdsByBus=[],I.activeBusFilters=[],I.busFilterReadyCallbacks=[],I.postWorkletSyncCallbacks=[],R.GAMEPAD_STORAGE_SIZE=32,$._activeTextureSlot=0,$._didUpdateCurrentRenderTarget=!1,$._projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),$._modelViewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),$._modelViewTransform=new j,$._renderTargetTransform=new j,$._viewportDensity=1,$._viewportWidth=0,$._viewportHeight=0,$._blackTransparentColor=(e=0)|(255<(e=null==e?255:e)?255:e<0?0:e)<<24,$._whiteTransparentColor=16777215|(255<(e=null==(e=0)?255:e)?255:e<0?0:e)<<24,$._drawingInStencilBuffer=!1,fe.RE_OPERA=new t("OPR/([0-6].)","g"),fe.RE_SAFARI_VERSION=new t("Version/(.*?) ",""),ba.lastResizeTime=-1,ba.lastNewWidth=-1,ba.lastNewHeight=-1,ba.readyToDisplay=!1,ba.resizing=0,ba.containerWidth=0,ba.containerHeight=0,ba.containerPixelRatio=0,ba._displayReady=!1,ye._maxTextureSize=-1,ye._maxTexturesByBatch=-1,Ce._matrix=m._matrix,w.ALLOC_STEP=10,w.dynPool10=new w(10),w.dynPool100=new w(100),w.dynPool1000=new w(1e3),w.dynPool10000=new w(1e4),w.dynPool100000=new w(1e5),w.didNotifyLargePool=!1,Fa.__meta__={fields:{unobservedStatus:{observe:null}}},Ee.__meta__={fields:{unobservedAtlas:{observe:null},unobservedText:{observe:null}}},Ra.SAMPLE_STEP_SIZE=(Ma._nextFilterId=1)/((Ra.SPLINE_TABLE_SIZE=11)-1),Ra.NEWTON_ITERATIONS=4,Ra.NEWTON_MIN_SLOPE=.001,Ra.SUBDIVISION_PRECISION=1e-7,Ra.SUBDIVISION_MAX_ITERATIONS=10,Ra.TWO_THIRD=.6666666666666666,Ra.CACHE_SIZE=1e4,Ra.numCachedInstances=0,Re.__meta__={fields:{unobservedBytes:{observe:null}}},Ie._nextInternalId=0,b0._nextId=1,b0._nextIndex=1,b0._fieldInfo={name:{type:"String"},id:{type:"String"},index:{type:"Int"}},A.NONE=-1,A.WHITE=16777215,A.GRAY=8421504,A.BLACK=0,A.GREEN=32768,A.LIME=65280,A.YELLOW=16776960,A.ORANGE=16753920,A.RED=16711680,A.PURPLE=8388736,A.BLUE=255,A.BROWN=9127187,A.PINK=16761035,A.MAGENTA=16711935,A.CYAN=65535,A.CORNFLOWERBLUE=6591981,A.MEDIUMVIOLETRED=13047173,A.DEEPPINK=16716947,A.PALEVIOLETRED=14381203,A.HOTPINK=16738740,A.LIGHTPINK=16758465,A.DARKRED=9109504,A.FIREBRICK=11674146,A.CRIMSON=14423100,A.INDIANRED=13458524,A.LIGHTCORAL=15761536,A.SALMON=16416882,A.DARKSALMON=15308410,A.LIGHTSALMON=16752762,A.ORANGERED=16729344,A.TOMATO=16737095,A.DARKORANGE=16747520,A.CORAL=16744272,A.DARKKHAKI=12433259,A.GOLD=16766720,A.KHAKI=15787660,A.PEACHPUFF=16767673,A.PALEGOLDENROD=15657130,A.MOCCASIN=16770229,A.PAPAYAWHIP=16773077,A.LEMONCHIFFON=16775885,A.LIGHTYELLOW=16777184,A.SIENNA=10506797,A.CHOCOLATE=13789470,A.PERU=13468991,A.TAN=13808780,A.DARKOLIVEGREEN=5597999,A.OLIVE=8421376,A.TEAL=32896,A.TURQUOISE=4251856,A.NAVY=128,A.INDIGO=4915330,A.ORCHID=14315734,A.LAVENDER=15132410,A.AZURE=15794175,A.IVORY=16777200,A.DIMGREY=6908265,A.SLATEGREY=7372944,A.SNOW=16775930,A.colorLookup=((e=new te).h.NONE=-1,e.h.WHITE=16777215,e.h.GRAY=8421504,e.h.BLACK=0,e.h.GREEN=32768,e.h.LIME=65280,e.h.YELLOW=16776960,e.h.ORANGE=16753920,e.h.RED=16711680,e.h.PURPLE=8388736,e.h.BLUE=255,e.h.BROWN=9127187,e.h.PINK=16761035,e.h.MAGENTA=16711935,e.h.CYAN=65535,e.h.CORNFLOWERBLUE=6591981,e.h.MEDIUMVIOLETRED=13047173,e.h.DEEPPINK=16716947,e.h.PALEVIOLETRED=14381203,e.h.HOTPINK=16738740,e.h.LIGHTPINK=16758465,e.h.DARKRED=9109504,e.h.FIREBRICK=11674146,e.h.CRIMSON=14423100,e.h.INDIANRED=13458524,e.h.LIGHTCORAL=15761536,e.h.SALMON=16416882,e.h.DARKSALMON=15308410,e.h.LIGHTSALMON=16752762,e.h.ORANGERED=16729344,e.h.TOMATO=16737095,e.h.DARKORANGE=16747520,e.h.CORAL=16744272,e.h.DARKKHAKI=12433259,e.h.GOLD=16766720,e.h.KHAKI=15787660,e.h.PEACHPUFF=16767673,e.h.PALEGOLDENROD=15657130,e.h.MOCCASIN=16770229,e.h.PAPAYAWHIP=16773077,e.h.LEMONCHIFFON=16775885,e.h.LIGHTYELLOW=16777184,e.h.SIENNA=10506797,e.h.CHOCOLATE=13789470,e.h.PERU=13468991,e.h.TAN=13808780,e.h.DARKOLIVEGREEN=5597999,e.h.OLIVE=8421376,e.h.TEAL=32896,e.h.TURQUOISE=4251856,e.h.NAVY=128,e.h.INDIGO=4915330,e.h.ORCHID=14315734,e.h.LAVENDER=15132410,e.h.AZURE=15794175,e.h.IVORY=16777200,e.h.DIMGREY=6908265,e.h.SLATEGREY=7372944,e.h.SNOW=16775930,e),A._hsluvTuple=[0,0,0],A._hsluvResult=[0,0,0],A._hsluvCacheMap=new ke,A._hsluvCacheValues=[],Xe.__meta__={fields:{unobservedDatabase:{observe:null}}},t0._emptyArray=[],qe.fieldInfoMap=new te,Ze.metaMap=new te,Ze.metaMapRecursive=new te,en.__meta__={fields:{unobservedRenderTexture:{observe:null}}},en._matrix=m._matrix,nn.__meta__={fields:{unobservedFont:{observe:null}}},D0.basicTypes=((e=new te).h.Bool=!0,e.h.Int=!0,e.h.Float=!0,e.h.String=!0,e.h["ceramic.Color"]=!0,e.h["ceramic.ScriptContent"]=!0,e),D0.cachedFragmentData=new te,D0._trackResult=new C0,D0._keyframeResult=new C0,D0._usedKeyframes=[],tn.__meta__={fields:{unobservedFragments:{observe:null}}},rn._lastDecodeIncomplete=!15,ln.__meta__={fields:{unobservedTexture:{observe:null}}},cn.GAMEPAD_STORAGE_SIZE=32,vn.NO_VALUE=0,vn.NULL_VALUE=1,vn.RESERVED_GAP=2,u.UNKNOWN=0,u.ENTER=13,u.ESCAPE=27,u.BACKSPACE=8,u.TAB=9,u.SPACE=32,u.EXCLAIM=33,u.QUOTEDBL=34,u.HASH=35,u.PERCENT=37,u.DOLLAR=36,u.AMPERSAND=38,u.QUOTE=39,u.LEFTPAREN=40,u.RIGHTPAREN=41,u.ASTERISK=42,u.PLUS=43,u.COMMA=44,u.MINUS=45,u.PERIOD=46,u.SLASH=47,u.KEY_0=48,u.KEY_1=49,u.KEY_2=50,u.KEY_3=51,u.KEY_4=52,u.KEY_5=53,u.KEY_6=54,u.KEY_7=55,u.KEY_8=56,u.KEY_9=57,u.COLON=58,u.SEMICOLON=59,u.LESS=60,u.EQUALS=61,u.GREATER=62,u.QUESTION=63,u.AT=64,u.LEFTBRACKET=91,u.BACKSLASH=92,u.RIGHTBRACKET=93,u.CARET=94,u.UNDERSCORE=95,u.BACKQUOTE=96,u.KEY_A=97,u.KEY_B=98,u.KEY_C=99,u.KEY_D=100,u.KEY_E=101,u.KEY_F=102,u.KEY_G=103,u.KEY_H=104,u.KEY_I=105,u.KEY_J=106,u.KEY_K=107,u.KEY_L=108,u.KEY_M=109,u.KEY_N=110,u.KEY_O=111,u.KEY_P=112,u.KEY_Q=113,u.KEY_R=114,u.KEY_S=115,u.KEY_T=116,u.KEY_U=117,u.KEY_V=118,u.KEY_W=119,u.KEY_X=120,u.KEY_Y=121,u.KEY_Z=122,u.CAPSLOCK=1073741881,u.F1=1073741882,u.F2=1073741883,u.F3=1073741884,u.F4=1073741885,u.F5=1073741886,u.F6=1073741887,u.F7=1073741888,u.F8=1073741889,u.F9=1073741890,u.F10=1073741891,u.F11=1073741892,u.F12=1073741893,u.PRINTSCREEN=1073741894,u.SCROLLLOCK=1073741895,u.PAUSE=1073741896,u.INSERT=1073741897,u.HOME=1073741898,u.PAGEUP=1073741899,u.DELETE=127,u.END=1073741901,u.PAGEDOWN=1073741902,u.RIGHT=1073741903,u.LEFT=1073741904,u.DOWN=1073741905,u.UP=1073741906,u.NUMLOCKCLEAR=1073741907,u.KP_DIVIDE=1073741908,u.KP_MULTIPLY=1073741909,u.KP_MINUS=1073741910,u.KP_PLUS=1073741911,u.KP_ENTER=1073741912,u.KP_1=1073741913,u.KP_2=1073741914,u.KP_3=1073741915,u.KP_4=1073741916,u.KP_5=1073741917,u.KP_6=1073741918,u.KP_7=1073741919,u.KP_8=1073741920,u.KP_9=1073741921,u.KP_0=1073741922,u.KP_PERIOD=1073741923,u.APPLICATION=1073741925,u.POWER=1073741926,u.KP_EQUALS=1073741927,u.F13=1073741928,u.F14=1073741929,u.F15=1073741930,u.F16=1073741931,u.F17=1073741932,u.F18=1073741933,u.F19=1073741934,u.F20=1073741935,u.F21=1073741936,u.F22=1073741937,u.F23=1073741938,u.F24=1073741939,u.EXECUTE=1073741940,u.HELP=1073741941,u.MENU=1073741942,u.SELECT=1073741943,u.STOP=1073741944,u.AGAIN=1073741945,u.UNDO=1073741946,u.CUT=1073741947,u.COPY=1073741948,u.PASTE=1073741949,u.FIND=1073741950,u.MUTE=1073741951,u.VOLUMEUP=1073741952,u.VOLUMEDOWN=1073741953,u.KP_COMMA=1073741957,u.KP_EQUALSAS400=1073741958,u.ALTERASE=1073741977,u.SYSREQ=1073741978,u.CANCEL=1073741979,u.CLEAR=1073741980,u.PRIOR=1073741981,u.RETURN2=1073741982,u.SEPARATOR=1073741983,u.OUT=1073741984,u.OPER=1073741985,u.CLEARAGAIN=1073741986,u.CRSEL=1073741987,u.EXSEL=1073741988,u.KP_00=1073742e3,u.KP_000=1073742001,u.THOUSANDSSEPARATOR=1073742002,u.DECIMALSEPARATOR=1073742003,u.CURRENCYUNIT=1073742004,u.CURRENCYSUBUNIT=1073742005,u.KP_LEFTPAREN=1073742006,u.KP_RIGHTPAREN=1073742007,u.KP_LEFTBRACE=1073742008,u.KP_RIGHTBRACE=1073742009,u.KP_TAB=1073742010,u.KP_BACKSPACE=1073742011,u.KP_A=1073742012,u.KP_B=1073742013,u.KP_C=1073742014,u.KP_D=1073742015,u.KP_E=1073742016,u.KP_F=1073742017,u.KP_XOR=1073742018,u.KP_POWER=1073742019,u.KP_PERCENT=1073742020,u.KP_LESS=1073742021,u.KP_GREATER=1073742022,u.KP_AMPERSAND=1073742023,u.KP_DBLAMPERSAND=1073742024,u.KP_VERTICALBAR=1073742025,u.KP_DBLVERTICALBAR=1073742026,u.KP_COLON=1073742027,u.KP_HASH=1073742028,u.KP_SPACE=1073742029,u.KP_AT=1073742030,u.KP_EXCLAM=1073742031,u.KP_MEMSTORE=1073742032,u.KP_MEMRECALL=1073742033,u.KP_MEMCLEAR=1073742034,u.KP_MEMADD=1073742035,u.KP_MEMSUBTRACT=1073742036,u.KP_MEMMULTIPLY=1073742037,u.KP_MEMDIVIDE=1073742038,u.KP_PLUSMINUS=1073742039,u.KP_CLEAR=1073742040,u.KP_CLEARENTRY=1073742041,u.KP_BINARY=1073742042,u.KP_OCTAL=1073742043,u.KP_DECIMAL=1073742044,u.KP_HEXADECIMAL=1073742045,u.LCTRL=1073742048,u.LSHIFT=1073742049,u.LALT=1073742050,u.LMETA=1073742051,u.RCTRL=1073742052,u.RSHIFT=1073742053,u.RALT=1073742054,u.RMETA=1073742055,u.MODE=1073742081,u.AUDIONEXT=1073742082,u.AUDIOPREV=1073742083,u.AUDIOSTOP=1073742084,u.AUDIOPLAY=1073742085,u.AUDIOMUTE=1073742086,u.MEDIASELECT=1073742087,u.WWW=1073742088,u.MAIL=1073742089,u.CALCULATOR=1073742090,u.COMPUTER=1073742091,u.AC_SEARCH=1073742092,u.AC_HOME=1073742093,u.AC_BACK=1073742094,u.AC_FORWARD=1073742095,u.AC_STOP=1073742096,u.AC_REFRESH=1073742097,u.AC_BOOKMARKS=1073742098,u.BRIGHTNESSDOWN=1073742099,u.BRIGHTNESSUP=1073742100,u.DISPLAYSWITCH=1073742101,u.KBDILLUMTOGGLE=1073742102,u.KBDILLUMDOWN=1073742103,u.KBDILLUMUP=1073742104,u.EJECT=1073742105,u.SLEEP=1073742106,gb.NUMBER_NONE=-9999999999,gb.MATH_TWO_PI=6.28318530718,gb.MATH_HALF_PI=1.57079632679,gb.MATH_PI_AND_HALF=4.71238898038,gb.miterUtils=new fb,Dn._stroke=new gb,Tn._hasElectronRunner=!1,Tn.didInitOnce=!1,Rn.exec__execDidLogError=!1,Rn._isWindowsValue=0,Rn._execDidLogError=!1,Fn._nextIndex=1,d.MASK=1073741824,d.UNKNOWN=0,d.KEY_A=4,d.KEY_B=5,d.KEY_C=6,d.KEY_D=7,d.KEY_E=8,d.KEY_F=9,d.KEY_G=10,d.KEY_H=11,d.KEY_I=12,d.KEY_J=13,d.KEY_K=14,d.KEY_L=15,d.KEY_M=16,d.KEY_N=17,d.KEY_O=18,d.KEY_P=19,d.KEY_Q=20,d.KEY_R=21,d.KEY_S=22,d.KEY_T=23,d.KEY_U=24,d.KEY_V=25,d.KEY_W=26,d.KEY_X=27,d.KEY_Y=28,d.KEY_Z=29,d.KEY_1=30,d.KEY_2=31,d.KEY_3=32,d.KEY_4=33,d.KEY_5=34,d.KEY_6=35,d.KEY_7=36,d.KEY_8=37,d.KEY_9=38,d.KEY_0=39,d.ENTER=40,d.ESCAPE=41,d.BACKSPACE=42,d.TAB=43,d.SPACE=44,d.MINUS=45,d.EQUALS=46,d.LEFTBRACKET=47,d.RIGHTBRACKET=48,d.BACKSLASH=49,d.NONUSHASH=50,d.SEMICOLON=51,d.APOSTROPHE=52,d.GRAVE=53,d.COMMA=54,d.PERIOD=55,d.SLASH=56,d.CAPSLOCK=57,d.F1=58,d.F2=59,d.F3=60,d.F4=61,d.F5=62,d.F6=63,d.F7=64,d.F8=65,d.F9=66,d.F10=67,d.F11=68,d.F12=69,d.PRINTSCREEN=70,d.SCROLLLOCK=71,d.PAUSE=72,d.INSERT=73,d.HOME=74,d.PAGEUP=75,d.DELETE=76,d.END=77,d.PAGEDOWN=78,d.RIGHT=79,d.LEFT=80,d.DOWN=81,d.UP=82,d.NUMLOCKCLEAR=83,d.KP_DIVIDE=84,d.KP_MULTIPLY=85,d.KP_MINUS=86,d.KP_PLUS=87,d.KP_ENTER=88,d.KP_1=89,d.KP_2=90,d.KP_3=91,d.KP_4=92,d.KP_5=93,d.KP_6=94,d.KP_7=95,d.KP_8=96,d.KP_9=97,d.KP_0=98,d.KP_PERIOD=99,d.NONUSBACKSLASH=100,d.APPLICATION=101,d.POWER=102,d.KP_EQUALS=103,d.F13=104,d.F14=105,d.F15=106,d.F16=107,d.F17=108,d.F18=109,d.F19=110,d.F20=111,d.F21=112,d.F22=113,d.F23=114,d.F24=115,d.EXECUTE=116,d.HELP=117,d.MENU=118,d.SELECT=119,d.STOP=120,d.AGAIN=121,d.UNDO=122,d.CUT=123,d.COPY=124,d.PASTE=125,d.FIND=126,d.MUTE=127,d.VOLUMEUP=128,d.VOLUMEDOWN=129,d.KP_COMMA=133,d.KP_EQUALSAS400=134,d.INTERNATIONAL1=135,d.INTERNATIONAL2=136,d.INTERNATIONAL3=137,d.INTERNATIONAL4=138,d.INTERNATIONAL5=139,d.INTERNATIONAL6=140,d.INTERNATIONAL7=141,d.INTERNATIONAL8=142,d.INTERNATIONAL9=143,d.LANG1=144,d.LANG2=145,d.LANG3=146,d.LANG4=147,d.LANG5=148,d.LANG6=149,d.LANG7=150,d.LANG8=151,d.LANG9=152,d.ALTERASE=153,d.SYSREQ=154,d.CANCEL=155,d.CLEAR=156,d.PRIOR=157,d.RETURN2=158,d.SEPARATOR=159,d.OUT=160,d.OPER=161,d.CLEARAGAIN=162,d.CRSEL=163,d.EXSEL=164,d.KP_00=176,d.KP_000=177,d.THOUSANDSSEPARATOR=178,d.DECIMALSEPARATOR=179,d.CURRENCYUNIT=180,d.CURRENCYSUBUNIT=181,d.KP_LEFTPAREN=182,d.KP_RIGHTPAREN=183,d.KP_LEFTBRACE=184,d.KP_RIGHTBRACE=185,d.KP_TAB=186,d.KP_BACKSPACE=187,d.KP_A=188,d.KP_B=189,d.KP_C=190,d.KP_D=191,d.KP_E=192,d.KP_F=193,d.KP_XOR=194,d.KP_POWER=195,d.KP_PERCENT=196,d.KP_LESS=197,d.KP_GREATER=198,d.KP_AMPERSAND=199,d.KP_DBLAMPERSAND=200,d.KP_VERTICALBAR=201,d.KP_DBLVERTICALBAR=202,d.KP_COLON=203,d.KP_HASH=204,d.KP_SPACE=205,d.KP_AT=206,d.KP_EXCLAM=207,d.KP_MEMSTORE=208,d.KP_MEMRECALL=209,d.KP_MEMCLEAR=210,d.KP_MEMADD=211,d.KP_MEMSUBTRACT=212,d.KP_MEMMULTIPLY=213,d.KP_MEMDIVIDE=214,d.KP_PLUSMINUS=215,d.KP_CLEAR=216,d.KP_CLEARENTRY=217,d.KP_BINARY=218,d.KP_OCTAL=219,d.KP_DECIMAL=220,d.KP_HEXADECIMAL=221,d.LCTRL=224,d.LSHIFT=225,d.LALT=226,d.LMETA=227,d.RCTRL=228,d.RSHIFT=229,d.RALT=230,d.RMETA=231,d.MODE=257,d.AUDIONEXT=258,d.AUDIOPREV=259,d.AUDIOSTOP=260,d.AUDIOPLAY=261,d.AUDIOMUTE=262,d.MEDIASELECT=263,d.WWW=264,d.MAIL=265,d.CALCULATOR=266,d.COMPUTER=267,d.AC_SEARCH=268,d.AC_HOME=269,d.AC_BACK=270,d.AC_FORWARD=271,d.AC_STOP=272,d.AC_REFRESH=273,d.AC_BOOKMARKS=274,d.BRIGHTNESSDOWN=275,d.BRIGHTNESSUP=276,d.DISPLAYSWITCH=277,d.KBDILLUMTOGGLE=278,d.KBDILLUMDOWN=279,d.KBDILLUMUP=280,d.EJECT=281,d.SLEEP=282,d.APP1=283,d.APP2=284,d.scanCodeNames=[null,null,null,null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","Enter","Escape","Backspace","Tab","Space","-","=","[","]","\\","#",";","'","`",",",".","/","CapsLock","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrintScreen","ScrollLock","Pause","Insert","Home","PageUp","Delete","End","PageDown","Right","Left","Down","Up","Numlock","Keypad /","Keypad *","Keypad -","Keypad +","Keypad Enter","Keypad 1","Keypad 2","Keypad 3","Keypad 4","Keypad 5","Keypad 6","Keypad 7","Keypad 8","Keypad 9","Keypad 0","Keypad .",null,"Application","Power","Keypad =","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Execute","Help","Menu","Select","Stop","Again","Undo","Cut","Copy","Paste","Find","Mute","VolumeUp","VolumeDown",null,null,null,"Keypad ,","Keypad = (AS400)",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"AltErase","SysReq","Cancel","Clear","Prior","Enter","Separator","Out","Oper","Clear / Again","CrSel","ExSel",null,null,null,null,null,null,null,null,null,null,null,"Keypad 00","Keypad 000","ThousandsSeparator","DecimalSeparator","CurrencyUnit","CurrencySubUnit","Keypad (","Keypad )","Keypad {","Keypad }","Keypad Tab","Keypad Backspace","Keypad A","Keypad B","Keypad C","Keypad D","Keypad E","Keypad F","Keypad XOR","Keypad ^","Keypad %","Keypad <","Keypad >","Keypad &","Keypad &&","Keypad |","Keypad ||","Keypad :","Keypad #","Keypad Space","Keypad @","Keypad !","Keypad MemStore","Keypad MemRecall","Keypad MemClear","Keypad MemAdd","Keypad MemSubtract","Keypad MemMultiply","Keypad MemDivide","Keypad +/-","Keypad Clear","Keypad ClearEntry","Keypad Binary","Keypad Octal","Keypad Decimal","Keypad Hexadecimal",null,null,"Left Ctrl","Left Shift","Left Alt","Left Meta","Right Ctrl","Right Shift","Right Alt","Right Meta",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ModeSwitch","AudioNext","AudioPrev","AudioStop","AudioPlay","AudioMute","MediaSelect","WWW","Mail","Calculator","Computer","AC Search","AC Home","AC Back","AC Forward","AC Stop","AC Refresh","AC Bookmarks","BrightnessDown","BrightnessUp","DisplaySwitch","KBDIllumToggle","KBDIllumDown","KBDIllumUp","Eject","Sleep"],Wn.NONE=0,Wn.PRELOAD=1,Wn.LOAD=2,Wn.CREATE=3,Wn.FADE_IN=4,Wn.READY=5,Wn.FADE_OUT=6,Wn.DISABLED=7,Gn.lazyShared=!0,Kn.__meta__={fields:{unobservedFocusedVisual:{observe:null},unobservedTexturesDensity:{observe:null}}},Vn.__meta__={fields:{unobservedTargetWidth:{observe:null},unobservedTargetHeight:{observe:null},unobservedWindowWidth:{observe:null},unobservedWindowHeight:{observe:null},unobservedTargetDensity:{observe:null},unobservedBackground:{observe:null},unobservedScaling:{observe:null},unobservedTitle:{observe:null},unobservedFullscreen:{observe:null},unobservedTargetFps:{observe:null},unobservedMaxDelta:{observe:null},unobservedOverrideDelta:{observe:null},unobservedPreventDefaultMouseWheel:{observe:null},unobservedPreventDefaultTouches:{observe:null}}},zn.__meta__={fields:{unobservedShader:{observe:null}}},Qn.__meta__={fields:{unobservedSound:{observe:null}}},Jn.__meta__={fields:{unobservedText:{observe:null}}},Wb.MIN_TEXTURE_SIZE=32,Wb.MAX_TEXTURE_SIZE=2048,it.__meta__={fields:{unobservedName:{observe:null},unobservedWidth:{observe:null},unobservedHeight:{observe:null},unobservedFilter:{observe:null},unobservedTexture:{observe:null}}},ut.callbacks=[],ut.next=999999999,ut.now=0,ut.startTimestamp=(new Date).getTime()/1e3,G._tweens=[],G._iteratedTweens=[],b.k=0,C.isAndroid_result=-1,C.isIos_result=-1,C.RE_ASCII_CHAR=new t("^[a-zA-Z0-9]$",""),C._nextUniqueIntCursor=0,C._nextUniqueInt0=2147483646*Math.random()|0,C._nextUniqueInt1=1e-4*(new Date).getTime()|0,C._nextUniqueInt2=2147483646*Math.random()|0,C._nextUniqueInt3=2147483646*Math.random()|0,C.RE_MODULE_AT=new t("^\\s*(?:at\\s*)?([^\\s]+\\.js)(?:\\s*:\\s*([0-9]+)(?:\\s*:\\s*([0-9]+))?)?\\s*$",""),Ot.didTryRequireChokidar=!1,yt.immediateCallbacks=[],yt.immediateCallbacksCapacity=0,yt.immediateCallbacksLen=0,T.UNKNOWN=0,T.ENTER=13,T.ESCAPE=27,T.BACKSPACE=8,T.TAB=9,T.SPACE=32,T.EXCLAIM=33,T.QUOTEDBL=34,T.HASH=35,T.PERCENT=37,T.DOLLAR=36,T.AMPERSAND=38,T.QUOTE=39,T.LEFTPAREN=40,T.RIGHTPAREN=41,T.ASTERISK=42,T.PLUS=43,T.COMMA=44,T.MINUS=45,T.PERIOD=46,T.SLASH=47,T.KEY_0=48,T.KEY_1=49,T.KEY_2=50,T.KEY_3=51,T.KEY_4=52,T.KEY_5=53,T.KEY_6=54,T.KEY_7=55,T.KEY_8=56,T.KEY_9=57,T.COLON=58,T.SEMICOLON=59,T.LESS=60,T.EQUALS=61,T.GREATER=62,T.QUESTION=63,T.AT=64,T.LEFTBRACKET=91,T.BACKSLASH=92,T.RIGHTBRACKET=93,T.CARET=94,T.UNDERSCORE=95,T.BACKQUOTE=96,T.KEY_A=97,T.KEY_B=98,T.KEY_C=99,T.KEY_D=100,T.KEY_E=101,T.KEY_F=102,T.KEY_G=103,T.KEY_H=104,T.KEY_I=105,T.KEY_J=106,T.KEY_K=107,T.KEY_L=108,T.KEY_M=109,T.KEY_N=110,T.KEY_O=111,T.KEY_P=112,T.KEY_Q=113,T.KEY_R=114,T.KEY_S=115,T.KEY_T=116,T.KEY_U=117,T.KEY_V=118,T.KEY_W=119,T.KEY_X=120,T.KEY_Y=121,T.KEY_Z=122,T.CAPSLOCK=1073741881,T.F1=1073741882,T.F2=1073741883,T.F3=1073741884,T.F4=1073741885,T.F5=1073741886,T.F6=1073741887,T.F7=1073741888,T.F8=1073741889,T.F9=1073741890,T.F10=1073741891,T.F11=1073741892,T.F12=1073741893,T.PRINTSCREEN=1073741894,T.SCROLLLOCK=1073741895,T.PAUSE=1073741896,T.INSERT=1073741897,T.HOME=1073741898,T.PAGEUP=1073741899,T.DELETE=127,T.END=1073741901,T.PAGEDOWN=1073741902,T.RIGHT=1073741903,T.LEFT=1073741904,T.DOWN=1073741905,T.UP=1073741906,T.NUMLOCKCLEAR=1073741907,T.KP_DIVIDE=1073741908,T.KP_MULTIPLY=1073741909,T.KP_MINUS=1073741910,T.KP_PLUS=1073741911,T.KP_ENTER=1073741912,T.KP_1=1073741913,T.KP_2=1073741914,T.KP_3=1073741915,T.KP_4=1073741916,T.KP_5=1073741917,T.KP_6=1073741918,T.KP_7=1073741919,T.KP_8=1073741920,T.KP_9=1073741921,T.KP_0=1073741922,T.KP_PERIOD=1073741923,T.APPLICATION=1073741925,T.POWER=1073741926,T.KP_EQUALS=1073741927,T.F13=1073741928,T.F14=1073741929,T.F15=1073741930,T.F16=1073741931,T.F17=1073741932,T.F18=1073741933,T.F19=1073741934,T.F20=1073741935,T.F21=1073741936,T.F22=1073741937,T.F23=1073741938,T.F24=1073741939,T.EXECUTE=1073741940,T.HELP=1073741941,T.MENU=1073741942,T.SELECT=1073741943,T.STOP=1073741944,T.AGAIN=1073741945,T.UNDO=1073741946,T.CUT=1073741947,T.COPY=1073741948,T.PASTE=1073741949,T.FIND=1073741950,T.MUTE=1073741951,T.VOLUMEUP=1073741952,T.VOLUMEDOWN=1073741953,T.KP_COMMA=1073741957,T.KP_EQUALSAS400=1073741958,T.ALTERASE=1073741977,T.SYSREQ=1073741978,T.CANCEL=1073741979,T.CLEAR=1073741980,T.PRIOR=1073741981,T.RETURN2=1073741982,T.SEPARATOR=1073741983,T.OUT=1073741984,T.OPER=1073741985,T.CLEARAGAIN=1073741986,T.CRSEL=1073741987,T.EXSEL=1073741988,T.KP_00=1073742e3,T.KP_000=1073742001,T.THOUSANDSSEPARATOR=1073742002,T.DECIMALSEPARATOR=1073742003,T.CURRENCYUNIT=1073742004,T.CURRENCYSUBUNIT=1073742005,T.KP_LEFTPAREN=1073742006,T.KP_RIGHTPAREN=1073742007,T.KP_LEFTBRACE=1073742008,T.KP_RIGHTBRACE=1073742009,T.KP_TAB=1073742010,T.KP_BACKSPACE=1073742011,T.KP_A=1073742012,T.KP_B=1073742013,T.KP_C=1073742014,T.KP_D=1073742015,T.KP_E=1073742016,T.KP_F=1073742017,T.KP_XOR=1073742018,T.KP_POWER=1073742019,T.KP_PERCENT=1073742020,T.KP_LESS=1073742021,T.KP_GREATER=1073742022,T.KP_AMPERSAND=1073742023,T.KP_DBLAMPERSAND=1073742024,T.KP_VERTICALBAR=1073742025,T.KP_DBLVERTICALBAR=1073742026,T.KP_COLON=1073742027,T.KP_HASH=1073742028,T.KP_SPACE=1073742029,T.KP_AT=1073742030,T.KP_EXCLAM=1073742031,T.KP_MEMSTORE=1073742032,T.KP_MEMRECALL=1073742033,T.KP_MEMCLEAR=1073742034,T.KP_MEMADD=1073742035,T.KP_MEMSUBTRACT=1073742036,T.KP_MEMMULTIPLY=1073742037,T.KP_MEMDIVIDE=1073742038,T.KP_PLUSMINUS=1073742039,T.KP_CLEAR=1073742040,T.KP_CLEARENTRY=1073742041,T.KP_BINARY=1073742042,T.KP_OCTAL=1073742043,T.KP_DECIMAL=1073742044,T.KP_HEXADECIMAL=1073742045,T.LCTRL=1073742048,T.LSHIFT=1073742049,T.LALT=1073742050,T.LMETA=1073742051,T.RCTRL=1073742052,T.RSHIFT=1073742053,T.RALT=1073742054,T.RMETA=1073742055,T.MODE=1073742081,T.AUDIONEXT=1073742082,T.AUDIOPREV=1073742083,T.AUDIOSTOP=1073742084,T.AUDIOPLAY=1073742085,T.AUDIOMUTE=1073742086,T.MEDIASELECT=1073742087,T.WWW=1073742088,T.MAIL=1073742089,T.CALCULATOR=1073742090,T.COMPUTER=1073742091,T.AC_SEARCH=1073742092,T.AC_HOME=1073742093,T.AC_BACK=1073742094,T.AC_FORWARD=1073742095,T.AC_STOP=1073742096,T.AC_REFRESH=1073742097,T.AC_BOOKMARKS=1073742098,T.BRIGHTNESSDOWN=1073742099,T.BRIGHTNESSUP=1073742100,T.DISPLAYSWITCH=1073742101,T.KBDILLUMTOGGLE=1073742102,T.KBDILLUMDOWN=1073742103,T.KBDILLUMUP=1073742104,T.EJECT=1073742105,T.SLEEP=1073742106,K.MASK=1073741824,K.UNKNOWN=0,K.KEY_A=4,K.KEY_B=5,K.KEY_C=6,K.KEY_D=7,K.KEY_E=8,K.KEY_F=9,K.KEY_G=10,K.KEY_H=11,K.KEY_I=12,K.KEY_J=13,K.KEY_K=14,K.KEY_L=15,K.KEY_M=16,K.KEY_N=17,K.KEY_O=18,K.KEY_P=19,K.KEY_Q=20,K.KEY_R=21,K.KEY_S=22,K.KEY_T=23,K.KEY_U=24,K.KEY_V=25,K.KEY_W=26,K.KEY_X=27,K.KEY_Y=28,K.KEY_Z=29,K.KEY_1=30,K.KEY_2=31,K.KEY_3=32,K.KEY_4=33,K.KEY_5=34,K.KEY_6=35,K.KEY_7=36,K.KEY_8=37,K.KEY_9=38,K.KEY_0=39,K.ENTER=40,K.ESCAPE=41,K.BACKSPACE=42,K.TAB=43,K.SPACE=44,K.MINUS=45,K.EQUALS=46,K.LEFTBRACKET=47,K.RIGHTBRACKET=48,K.BACKSLASH=49,K.NONUSHASH=50,K.SEMICOLON=51,K.APOSTROPHE=52,K.GRAVE=53,K.COMMA=54,K.PERIOD=55,K.SLASH=56,K.CAPSLOCK=57,K.F1=58,K.F2=59,K.F3=60,K.F4=61,K.F5=62,K.F6=63,K.F7=64,K.F8=65,K.F9=66,K.F10=67,K.F11=68,K.F12=69,K.PRINTSCREEN=70,K.SCROLLLOCK=71,K.PAUSE=72,K.INSERT=73,K.HOME=74,K.PAGEUP=75,K.DELETE=76,K.END=77,K.PAGEDOWN=78,K.RIGHT=79,K.LEFT=80,K.DOWN=81,K.UP=82,K.NUMLOCKCLEAR=83,K.KP_DIVIDE=84,K.KP_MULTIPLY=85,K.KP_MINUS=86,K.KP_PLUS=87,K.KP_ENTER=88,K.KP_1=89,K.KP_2=90,K.KP_3=91,K.KP_4=92,K.KP_5=93,K.KP_6=94,K.KP_7=95,K.KP_8=96,K.KP_9=97,K.KP_0=98,K.KP_PERIOD=99,K.NONUSBACKSLASH=100,K.APPLICATION=101,K.POWER=102,K.KP_EQUALS=103,K.F13=104,K.F14=105,K.F15=106,K.F16=107,K.F17=108,K.F18=109,K.F19=110,K.F20=111,K.F21=112,K.F22=113,K.F23=114,K.F24=115,K.EXECUTE=116,K.HELP=117,K.MENU=118,K.SELECT=119,K.STOP=120,K.AGAIN=121,K.UNDO=122,K.CUT=123,K.COPY=124,K.PASTE=125,K.FIND=126,K.MUTE=127,K.VOLUMEUP=128,K.VOLUMEDOWN=129,K.KP_COMMA=133,K.KP_EQUALSAS400=134,K.INTERNATIONAL1=135,K.INTERNATIONAL2=136,K.INTERNATIONAL3=137,K.INTERNATIONAL4=138,K.INTERNATIONAL5=139,K.INTERNATIONAL6=140,K.INTERNATIONAL7=141,K.INTERNATIONAL8=142,K.INTERNATIONAL9=143,K.LANG1=144,K.LANG2=145,K.LANG3=146,K.LANG4=147,K.LANG5=148,K.LANG6=149,K.LANG7=150,K.LANG8=151,K.LANG9=152,K.ALTERASE=153,K.SYSREQ=154,K.CANCEL=155,K.CLEAR=156,K.PRIOR=157,K.RETURN2=158,K.SEPARATOR=159,K.OUT=160,K.OPER=161,K.CLEARAGAIN=162,K.CRSEL=163,K.EXSEL=164,K.KP_00=176,K.KP_000=177,K.THOUSANDSSEPARATOR=178,K.DECIMALSEPARATOR=179,K.CURRENCYUNIT=180,K.CURRENCYSUBUNIT=181,K.KP_LEFTPAREN=182,K.KP_RIGHTPAREN=183,K.KP_LEFTBRACE=184,K.KP_RIGHTBRACE=185,K.KP_TAB=186,K.KP_BACKSPACE=187,K.KP_A=188,K.KP_B=189,K.KP_C=190,K.KP_D=191,K.KP_E=192,K.KP_F=193,K.KP_XOR=194,K.KP_POWER=195,K.KP_PERCENT=196,K.KP_LESS=197,K.KP_GREATER=198,K.KP_AMPERSAND=199,K.KP_DBLAMPERSAND=200,K.KP_VERTICALBAR=201,K.KP_DBLVERTICALBAR=202,K.KP_COLON=203,K.KP_HASH=204,K.KP_SPACE=205,K.KP_AT=206,K.KP_EXCLAM=207,K.KP_MEMSTORE=208,K.KP_MEMRECALL=209,K.KP_MEMCLEAR=210,K.KP_MEMADD=211,K.KP_MEMSUBTRACT=212,K.KP_MEMMULTIPLY=213,K.KP_MEMDIVIDE=214,K.KP_PLUSMINUS=215,K.KP_CLEAR=216,K.KP_CLEARENTRY=217,K.KP_BINARY=218,K.KP_OCTAL=219,K.KP_DECIMAL=220,K.KP_HEXADECIMAL=221,K.LCTRL=224,K.LSHIFT=225,K.LALT=226,K.LMETA=227,K.RCTRL=228,K.RSHIFT=229,K.RALT=230,K.RMETA=231,K.MODE=257,K.AUDIONEXT=258,K.AUDIOPREV=259,K.AUDIOSTOP=260,K.AUDIOPLAY=261,K.AUDIOMUTE=262,K.MEDIASELECT=263,K.WWW=264,K.MAIL=265,K.CALCULATOR=266,K.COMPUTER=267,K.AC_SEARCH=268,K.AC_HOME=269,K.AC_BACK=270,K.AC_FORWARD=271,K.AC_STOP=272,K.AC_REFRESH=273,K.AC_BOOKMARKS=274,K.BRIGHTNESSDOWN=275,K.BRIGHTNESSUP=276,K.DISPLAYSWITCH=277,K.KBDILLUMTOGGLE=278,K.KBDILLUMDOWN=279,K.KBDILLUMUP=280,K.EJECT=281,K.SLEEP=282,K.APP1=283,K.APP2=284,K.scanCodeNames=[null,null,null,null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","Enter","Escape","Backspace","Tab","Space","-","=","[","]","\\","#",";","'","`",",",".","/","CapsLock","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrintScreen","ScrollLock","Pause","Insert","Home","PageUp","Delete","End","PageDown","Right","Left","Down","Up","Numlock","Keypad /","Keypad *","Keypad -","Keypad +","Keypad Enter","Keypad 1","Keypad 2","Keypad 3","Keypad 4","Keypad 5","Keypad 6","Keypad 7","Keypad 8","Keypad 9","Keypad 0","Keypad .",null,"Application","Power","Keypad =","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Execute","Help","Menu","Select","Stop","Again","Undo","Cut","Copy","Paste","Find","Mute","VolumeUp","VolumeDown",null,null,null,"Keypad ,","Keypad = (AS400)",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"AltErase","SysReq","Cancel","Clear","Prior","Enter","Separator","Out","Oper","Clear / Again","CrSel","ExSel",null,null,null,null,null,null,null,null,null,null,null,"Keypad 00","Keypad 000","ThousandsSeparator","DecimalSeparator","CurrencyUnit","CurrencySubUnit","Keypad (","Keypad )","Keypad {","Keypad }","Keypad Tab","Keypad Backspace","Keypad A","Keypad B","Keypad C","Keypad D","Keypad E","Keypad F","Keypad XOR","Keypad ^","Keypad %","Keypad <","Keypad >","Keypad &","Keypad &&","Keypad |","Keypad ||","Keypad :","Keypad #","Keypad Space","Keypad @","Keypad !","Keypad MemStore","Keypad MemRecall","Keypad MemClear","Keypad MemAdd","Keypad MemSubtract","Keypad MemMultiply","Keypad MemDivide","Keypad +/-","Keypad Clear","Keypad ClearEntry","Keypad Binary","Keypad Octal","Keypad Decimal","Keypad Hexadecimal",null,null,"Left Ctrl","Left Shift","Left Alt","Left Meta","Right Ctrl","Right Shift","Right Alt","Right Meta",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ModeSwitch","AudioNext","AudioPrev","AudioStop","AudioPlay","AudioMute","MediaSelect","WWW","Mail","Calculator","Computer","AC Search","AC Home","AC Back","AC Forward","AC Stop","AC Refresh","AC Bookmarks","BrightnessDown","BrightnessUp","DisplaySwitch","KBDIllumToggle","KBDIllumDown","KBDIllumUp","Eject","Sleep"],ac._nextUniqueIntCursor=0,ac._nextUniqueInt0=2147483646*Math.random()|0,ac._nextUniqueInt1=1e-4*(new Date).getTime()|0,ac._nextUniqueInt2=2147483646*Math.random()|0,ac._nextUniqueInt3=2147483646*Math.random()|0,Et._nextIndex=1,It.MAX_VERTS_SIZE=65536,It.MAX_INDICES=16384,It.MAX_BUFFERS=64,It.ATTRIBUTE_POS=0,It.ATTRIBUTE_UV=1,It.ATTRIBUTE_COLOR=2,kt.DEPTH24_STENCIL8=35056,kt.DEPTH_COMPONENT24=33190,kt.TEXTURE_2D_MULTISAMPLE=37120,kt.READ_FRAMEBUFFER=36008,kt.DRAW_FRAMEBUFFER=36009,kt.RGBA8=32856,kt.COLOR=6144,ee.DEPTH_BUFFER_BIT=256,ee.STENCIL_BUFFER_BIT=1024,ee.COLOR_BUFFER_BIT=16384,ee.POINTS=0,ee.LINES=1,ee.LINE_LOOP=2,ee.LINE_STRIP=3,ee.TRIANGLES=4,ee.TRIANGLE_STRIP=5,ee.TRIANGLE_FAN=6,ee.ZERO=0,ee.ONE=1,ee.SRC_COLOR=768,ee.ONE_MINUS_SRC_COLOR=769,ee.SRC_ALPHA=770,ee.ONE_MINUS_SRC_ALPHA=771,ee.DST_ALPHA=772,ee.ONE_MINUS_DST_ALPHA=773,ee.DST_COLOR=774,ee.ONE_MINUS_DST_COLOR=775,ee.SRC_ALPHA_SATURATE=776,ee.FUNC_ADD=32774,ee.BLEND_EQUATION=32777,ee.BLEND_EQUATION_RGB=32777,ee.BLEND_EQUATION_ALPHA=34877,ee.FUNC_SUBTRACT=32778,ee.FUNC_REVERSE_SUBTRACT=32779,ee.BLEND_DST_RGB=32968,ee.BLEND_SRC_RGB=32969,ee.BLEND_DST_ALPHA=32970,ee.BLEND_SRC_ALPHA=32971,ee.CONSTANT_COLOR=32769,ee.ONE_MINUS_CONSTANT_COLOR=32770,ee.CONSTANT_ALPHA=32771,ee.ONE_MINUS_CONSTANT_ALPHA=32772,ee.BLEND_COLOR=32773,ee.ARRAY_BUFFER=34962,ee.ELEMENT_ARRAY_BUFFER=34963,ee.ARRAY_BUFFER_BINDING=34964,ee.ELEMENT_ARRAY_BUFFER_BINDING=34965,ee.STREAM_DRAW=35040,ee.STATIC_DRAW=35044,ee.DYNAMIC_DRAW=35048,ee.BUFFER_SIZE=34660,ee.BUFFER_USAGE=34661,ee.CURRENT_VERTEX_ATTRIB=34342,ee.FRONT=1028,ee.BACK=1029,ee.FRONT_AND_BACK=1032,ee.CULL_FACE=2884,ee.BLEND=3042,ee.DITHER=3024,ee.STENCIL_TEST=2960,ee.DEPTH_TEST=2929,ee.SCISSOR_TEST=3089,ee.POLYGON_OFFSET_FILL=32823,ee.SAMPLE_ALPHA_TO_COVERAGE=32926,ee.SAMPLE_COVERAGE=32928,ee.NO_ERROR=0,ee.INVALID_ENUM=1280,ee.INVALID_VALUE=1281,ee.INVALID_OPERATION=1282,ee.OUT_OF_MEMORY=1285,ee.CW=2304,ee.CCW=2305,ee.LINE_WIDTH=2849,ee.ALIASED_POINT_SIZE_RANGE=33901,ee.ALIASED_LINE_WIDTH_RANGE=33902,ee.CULL_FACE_MODE=2885,ee.FRONT_FACE=2886,ee.DEPTH_RANGE=2928,ee.DEPTH_WRITEMASK=2930,ee.DEPTH_CLEAR_VALUE=2931,ee.DEPTH_FUNC=2932,ee.STENCIL_CLEAR_VALUE=2961,ee.STENCIL_FUNC=2962,ee.STENCIL_FAIL=2964,ee.STENCIL_PASS_DEPTH_FAIL=2965,ee.STENCIL_PASS_DEPTH_PASS=2966,ee.STENCIL_REF=2967,ee.STENCIL_VALUE_MASK=2963,ee.STENCIL_WRITEMASK=2968,ee.STENCIL_BACK_FUNC=34816,ee.STENCIL_BACK_FAIL=34817,ee.STENCIL_BACK_PASS_DEPTH_FAIL=34818,ee.STENCIL_BACK_PASS_DEPTH_PASS=34819,ee.STENCIL_BACK_REF=36003,ee.STENCIL_BACK_VALUE_MASK=36004,ee.STENCIL_BACK_WRITEMASK=36005,ee.VIEWPORT=2978,ee.SCISSOR_BOX=3088,ee.COLOR_CLEAR_VALUE=3106,ee.COLOR_WRITEMASK=3107,ee.UNPACK_ALIGNMENT=3317,ee.PACK_ALIGNMENT=3333,ee.MAX_TEXTURE_SIZE=3379,ee.MAX_VIEWPORT_DIMS=3386,ee.SUBPIXEL_BITS=3408,ee.RED_BITS=3410,ee.GREEN_BITS=3411,ee.BLUE_BITS=3412,ee.ALPHA_BITS=3413,ee.DEPTH_BITS=3414,ee.STENCIL_BITS=3415,ee.POLYGON_OFFSET_UNITS=10752,ee.POLYGON_OFFSET_FACTOR=32824,ee.TEXTURE_BINDING_2D=32873,ee.SAMPLE_BUFFERS=32936,ee.SAMPLES=32937,ee.SAMPLE_COVERAGE_VALUE=32938,ee.SAMPLE_COVERAGE_INVERT=32939,ee.COMPRESSED_TEXTURE_FORMATS=34467,ee.DONT_CARE=4352,ee.FASTEST=4353,ee.NICEST=4354,ee.GENERATE_MIPMAP_HINT=33170,ee.BYTE=5120,ee.UNSIGNED_BYTE=5121,ee.SHORT=5122,ee.UNSIGNED_SHORT=5123,ee.INT=5124,ee.UNSIGNED_INT=5125,ee.FLOAT=5126,ee.DEPTH_COMPONENT=6402,ee.ALPHA=6406,ee.RGB=6407,ee.RGBA=6408,ee.LUMINANCE=6409,ee.LUMINANCE_ALPHA=6410,ee.UNSIGNED_SHORT_4_4_4_4=32819,ee.UNSIGNED_SHORT_5_5_5_1=32820,ee.UNSIGNED_SHORT_5_6_5=33635,ee.FRAGMENT_SHADER=35632,ee.VERTEX_SHADER=35633,ee.MAX_VERTEX_ATTRIBS=34921,ee.MAX_VERTEX_UNIFORM_VECTORS=36347,ee.MAX_VARYING_VECTORS=36348,ee.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,ee.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,ee.MAX_TEXTURE_IMAGE_UNITS=34930,ee.MAX_FRAGMENT_UNIFORM_VECTORS=36349,ee.SHADER_TYPE=35663,ee.DELETE_STATUS=35712,ee.LINK_STATUS=35714,ee.VALIDATE_STATUS=35715,ee.ATTACHED_SHADERS=35717,ee.ACTIVE_UNIFORMS=35718,ee.ACTIVE_ATTRIBUTES=35721,ee.SHADING_LANGUAGE_VERSION=35724,ee.CURRENT_PROGRAM=35725,ee.NEVER=512,ee.LESS=513,ee.EQUAL=514,ee.LEQUAL=515,ee.GREATER=516,ee.NOTEQUAL=517,ee.GEQUAL=518,ee.ALWAYS=519,ee.KEEP=7680,ee.REPLACE=7681,ee.INCR=7682,ee.DECR=7683,ee.INVERT=5386,ee.INCR_WRAP=34055,ee.DECR_WRAP=34056,ee.VENDOR=7936,ee.RENDERER=7937,ee.VERSION=7938,ee.NEAREST=9728,ee.LINEAR=9729,ee.NEAREST_MIPMAP_NEAREST=9984,ee.LINEAR_MIPMAP_NEAREST=9985,ee.NEAREST_MIPMAP_LINEAR=9986,ee.LINEAR_MIPMAP_LINEAR=9987,ee.TEXTURE_MAG_FILTER=10240,ee.TEXTURE_MIN_FILTER=10241,ee.TEXTURE_WRAP_S=10242,ee.TEXTURE_WRAP_T=10243,ee.TEXTURE_2D=3553,ee.TEXTURE=5890,ee.TEXTURE_CUBE_MAP=34067,ee.TEXTURE_BINDING_CUBE_MAP=34068,ee.TEXTURE_CUBE_MAP_POSITIVE_X=34069,ee.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,ee.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,ee.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,ee.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,ee.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,ee.MAX_CUBE_MAP_TEXTURE_SIZE=34076,ee.TEXTURE0=33984,ee.TEXTURE1=33985,ee.TEXTURE2=33986,ee.TEXTURE3=33987,ee.TEXTURE4=33988,ee.TEXTURE5=33989,ee.TEXTURE6=33990,ee.TEXTURE7=33991,ee.TEXTURE8=33992,ee.TEXTURE9=33993,ee.TEXTURE10=33994,ee.TEXTURE11=33995,ee.TEXTURE12=33996,ee.TEXTURE13=33997,ee.TEXTURE14=33998,ee.TEXTURE15=33999,ee.TEXTURE16=34e3,ee.TEXTURE17=34001,ee.TEXTURE18=34002,ee.TEXTURE19=34003,ee.TEXTURE20=34004,ee.TEXTURE21=34005,ee.TEXTURE22=34006,ee.TEXTURE23=34007,ee.TEXTURE24=34008,ee.TEXTURE25=34009,ee.TEXTURE26=34010,ee.TEXTURE27=34011,ee.TEXTURE28=34012,ee.TEXTURE29=34013,ee.TEXTURE30=34014,ee.TEXTURE31=34015,ee.ACTIVE_TEXTURE=34016,ee.REPEAT=10497,ee.CLAMP_TO_EDGE=33071,ee.MIRRORED_REPEAT=33648,ee.FLOAT_VEC2=35664,ee.FLOAT_VEC3=35665,ee.FLOAT_VEC4=35666,ee.INT_VEC2=35667,ee.INT_VEC3=35668,ee.INT_VEC4=35669,ee.BOOL=35670,ee.BOOL_VEC2=35671,ee.BOOL_VEC3=35672,ee.BOOL_VEC4=35673,ee.FLOAT_MAT2=35674,ee.FLOAT_MAT3=35675,ee.FLOAT_MAT4=35676,ee.SAMPLER_2D=35678,ee.SAMPLER_CUBE=35680,ee.VERTEX_ATTRIB_ARRAY_ENABLED=34338,ee.VERTEX_ATTRIB_ARRAY_SIZE=34339,ee.VERTEX_ATTRIB_ARRAY_STRIDE=34340,ee.VERTEX_ATTRIB_ARRAY_TYPE=34341,ee.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,ee.VERTEX_ATTRIB_ARRAY_POINTER=34373,ee.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,ee.VERTEX_PROGRAM_POINT_SIZE=34370,ee.POINT_SPRITE=34913,ee.COMPILE_STATUS=35713,ee.LOW_FLOAT=36336,ee.MEDIUM_FLOAT=36337;ee.HIGH_FLOAT=36338,ee.LOW_INT=36339,ee.MEDIUM_INT=36340,ee.HIGH_INT=36341,ee.FRAMEBUFFER=36160,ee.RENDERBUFFER=36161,ee.RGBA4=32854,ee.RGB5_A1=32855,ee.RGB565=36194,ee.DEPTH_COMPONENT16=33189,ee.STENCIL_INDEX=6401,ee.STENCIL_INDEX8=36168,ee.DEPTH_STENCIL=34041,ee.RENDERBUFFER_WIDTH=36162,ee.RENDERBUFFER_HEIGHT=36163,ee.RENDERBUFFER_INTERNAL_FORMAT=36164,ee.RENDERBUFFER_RED_SIZE=36176,ee.RENDERBUFFER_GREEN_SIZE=36177,ee.RENDERBUFFER_BLUE_SIZE=36178,ee.RENDERBUFFER_ALPHA_SIZE=36179,ee.RENDERBUFFER_DEPTH_SIZE=36180,ee.RENDERBUFFER_STENCIL_SIZE=36181,ee.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,ee.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,ee.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,ee.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,ee.COLOR_ATTACHMENT0=36064,ee.DEPTH_ATTACHMENT=36096,ee.STENCIL_ATTACHMENT=36128,ee.DEPTH_STENCIL_ATTACHMENT=33306,ee.NONE=0,ee.FRAMEBUFFER_COMPLETE=36053,ee.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,ee.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,ee.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,ee.FRAMEBUFFER_UNSUPPORTED=36061,ee.FRAMEBUFFER_BINDING=36006,ee.RENDERBUFFER_BINDING=36007,ee.MAX_RENDERBUFFER_SIZE=34024,ee.INVALID_FRAMEBUFFER_OPERATION=1286,ee.UNPACK_FLIP_Y_WEBGL=37440,ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,ee.CONTEXT_LOST_WEBGL=37442,ee.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,ee.BROWSER_DEFAULT_WEBGL=37444,Lt.POT=!0,Wt.HALF_PI=1.5707,Wt.DEFAULT_BUS=0,Wt.MAX_WORKLET_PARAMS=128,Vt.timestampStart=0,Vt.webWindowId=1,V.dom_shift=16,V.dom_ctrl=17,V.dom_alt=18,V.dom_capslock=20,V.dom_pageup=33,V.dom_pagedown=34,V.dom_end=35,V.dom_home=36,V.dom_left=37,V.dom_up=38,V.dom_right=39,V.dom_down=40,V.dom_printscr=44,V.dom_insert=45,V.dom_delete=46,V.dom_lmeta=91,V.dom_rmeta=93,V.dom_kp_0=96,V.dom_kp_1=97,V.dom_kp_2=98,V.dom_kp_3=99,V.dom_kp_4=100,V.dom_kp_5=101,V.dom_kp_6=102,V.dom_kp_7=103,V.dom_kp_8=104,V.dom_kp_9=105,V.dom_kp_multiply=106,V.dom_kp_plus=107,V.dom_kp_minus=109,V.dom_kp_decimal=110,V.dom_kp_divide=111,V.dom_kp_numlock=144,V.dom_f1=112,V.dom_f2=113,V.dom_f3=114,V.dom_f4=115,V.dom_f5=116,V.dom_f6=117,V.dom_f7=118,V.dom_f8=119,V.dom_f9=120,V.dom_f10=121,V.dom_f11=122,V.dom_f12=123,V.dom_f13=124,V.dom_f14=125,V.dom_f15=126,V.dom_f16=127,V.dom_f17=128,V.dom_f18=129,V.dom_f19=130,V.dom_f20=131,V.dom_f21=132,V.dom_f22=133,V.dom_f23=134,V.dom_f24=135,V.dom_caret=160,V.dom_exclaim=161,V.dom_quotedbl=162,V.dom_hash=163,V.dom_dollar=164,V.dom_percent=165,V.dom_ampersand=166,V.dom_underscore=167,V.dom_leftparen=168,V.dom_rightparen=169,V.dom_asterisk=170,V.dom_plus=171,V.dom_pipe=172,V.dom_minus=173,V.dom_leftbrace=174,V.dom_rightbrace=175,V.dom_tilde=176,V.dom_audiomute=181,V.dom_volumedown=182,V.dom_volumeup=183,V.dom_comma=188,V.dom_period=190,V.dom_slash=191,V.dom_backquote=192,V.dom_leftbracket=219,V.dom_rightbracket=221,V.dom_backslash=220,V.dom_quote=222,V.dom_meta=224,Qt.USE_CACHE=!1,Qt.USE_ENUM_INDEX=!1,Qt.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",$t.DEFAULT_RESOLVER=new Tc,$t.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",Ci.escapes=((e=new te).h.lt="<",e.h.gt=">",e.h.amp="&",e.h.quot='"',e.h.apos="'",e),ie.m=[[3.240969941904521,-1.537383177570093,-.498610760293],[-.96924363628087,1.87596750150772,.041555057407175],[.055630079696993,-.20397695888897,1.056971514242878]],ie.minv=[[.41239079926595,.35758433938387,.18048078840183],[.21263900587151,.71516867876775,.072192315360733],[.019330818715591,.11919477979462,.95053215224966]],ie.refY=1,ie.refU=.19783000664283,ie.refV=.46831999493879,ie.kappa=903.2962962,ie.epsilon=.0088564516,ie.hexChars="0123456789abcdef",Y2.params=((e=new te).h.projectionMatrix={type:6},e.h.modelViewMatrix={type:6},e),Z2.params=((e=new te).h.mainTex={type:7},e.h.resolution={type:1},e.h.blurSize={type:1},e),_2.params=((e=new te).h.projectionMatrix={type:6},e.h.modelViewMatrix={type:6},e),ad.params=((e=new te).h.mainTex={type:7},e.h.resolution={type:1,def:[0,0]},e.h.glowSize={type:0,def:[1234]},e.h.glowColor={type:2},e.h.glowIntensity={type:0,def:[345.6]},e.h.glowThreshold={type:0},e),cd.params=((e=new te).h.projectionMatrix={type:6},e.h.modelViewMatrix={type:6},e),dd.params=((e=new te).h.mainTex={type:7},e.h.texSize={type:1},e.h.pxRange={type:0},e),fd.params=((e=new te).h.projectionMatrix={type:6},e.h.modelViewMatrix={type:6},e),gd.params=((e=new te).h.mainTex={type:7},e.h.resolution={type:1},e.h.sharpness={type:0},e.h.gridThickness={type:0},e.h.gridAlpha={type:0},e.h.gridColor={type:2},e.h.scanlineIntensity={type:0},e.h.scanlineOffset={type:0},e.h.scanlineCount={type:0},e.h.scanlineShape={type:0},e.h.verticalMaskIntensity={type:0},e.h.verticalMaskOffset={type:0},e.h.verticalMaskCount={type:0},e.h.glowThresholdMin={type:0},e.h.glowThresholdMax={type:0},e.h.glowStrength={type:0},e.h.chromaticAberration={type:0},e),id.params=((e=new te).h.projectionMatrix={type:6},e.h.modelViewMatrix={type:6},e),jd.params=((e=new te).h.mainTex={type:7},e),ld.params=((e=new te).h.projectionMatrix={type:6},e.h.modelViewMatrix={type:6},e),md.params=((e=new te).h.mainTex={type:7},e),se.prevCurrent=[],se._autorunArrays=[],se._autorunArraysLen=0,se._arrayOfAutorunArrays=[],se._arrayOfAutorunArraysLen=0,Ni._nextUniqueIntCursor=0,Ni._nextUniqueInt0=2147483646*Math.random()|0,Ni._nextUniqueInt1=1e-4*(new Date).getTime()|0,Ni._nextUniqueInt2=2147483646*Math.random()|0,Ni._nextUniqueInt3=2147483646*Math.random()|0,ba.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);