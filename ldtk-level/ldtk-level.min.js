!function(e,ie){"use strict";function d(){return ys.__string_rec(this,"")}var b,L={},I={};function $extend(e,n){var t,i=Object.create(e);for(t in n)i[t]=n[t];return n.toString!==Object.prototype.toString&&(i.toString=n.toString),i}function g(e,n){this.r=new RegExp(e,n.split("u").join(""))}function h(){}function i(){}function j(){}function k(){}function l(){this._components=null,this.autoruns=null,this._lifecycleState=0,this.id=null}function m(){this.skewY=0,this.skewX=0,this.scaleY=1,this.scaleX=1,this.rotation=0,this.y=0,this.x=0,this.pivotY=0,this.pivotX=0}function n(e,n,t,i,l,s){null==s&&(s=0),null==l&&(l=0),null==i&&(i=1),null==t&&(t=0),null==n&&(n=0),this.a=e=null==e?1:e,this.b=n,this.c=t,this.d=i,this.tx=l,this.ty=s,this._aPrev=e,this._bPrev=n,this._cPrev=t,this._dPrev=i,this._txPrev=l,this._tyPrev=s,this.changed=!1,this.changedDirty=!1}function o(){this.availableItems=[]}function p(e,n,t){null==t&&(t=0),null==n&&(n=0),null==e&&(e=0),this.z=0,this.y=0,this.x=0,this.x=e,this.y=n,this.z=t}function q(){this.parent=null,this.children=null,this.computedClip=null,this.computedTouchable=!0,this.computedRenderTarget=null,this.computedDepth=0,this.computedAlpha=1,this.computedVisible=!0,this.matTY=0,this.matTX=0,this.matD=1,this.matC=0,this.matB=0,this.matA=1,this.flags=0,this.shader=null,this.transform=null,this.alpha=1,this.rotation=0,this.roundTranslation=-1,this._height=0,this._width=0,this.anchorY=0,this.anchorX=0,this.skewY=0,this.skewX=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,this.depthRange=1,this.depth=0,this.touchable=!0,this.visible=!0,this.blending=0,this.renderTarget=null,this.clipDirty=!0,this.touchableDirty=!0,this.visibilityDirty=!0,this.renderTargetDirty=!0,this.matrixDirty=!0,this.contentDirty=!0,this.translatesOnlyDirty=!1,this.translatesOnly=!0,this.inheritAlpha=!1,this.clip=null,this._numPointerOver=0,this._numPointerDown=0,this.multiTouch=!1,this.asMesh=null,this.asQuad=null,l.call(this),he.app.pendingVisuals.push(this)}function r(){this.frameHeight=-1,this.frameWidth=-1,this.frameY=-1,this.frameX=-1,this._texture=null,this.tile=null,this.color=16777215,q.call(this),this.asQuad=this}function s(){this.sizeDirty=!1,r.call(this),this.flags|=16}function t(){}function u(){}function v(){this.paused=!1,this.autoUpdateWhenInactive=!1,this.autoUpdate=!0,this.isRootScene=!1,this.unobservedStatus=0,this.statusAutoruns=null,this._assetsFailure=!1,this._assetsTotal=0,this._assetsProgress=0,this._assets=null,this.observedDirty=!1,s.call(this),this.flags|=16,Ht.get_shared().all.push(this)}function w(){this.ldtkName=Fe.WORLD_MAP_GRID_VANIA_LAYOUT,v.call(this)}function x(e){l.call(this),e.settings.antialiasing=2,e.settings.set_background(0),e.settings.set_targetWidth(320),e.settings.set_targetHeight(240),e.settings.set_windowWidth(640),e.settings.set_windowHeight(480),e.settings.set_scaling(Kt.FIT),e.settings.resizable=!0,he.app.onceReady(this,$bind(this,this.ready))}(L.EReg=g).__name__="EReg",g.prototype={r:null,match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&0<=e&&e<this.r.m.length)return this.r.m[e];throw Q.thrown("EReg::matched")},__class__:g},(L.HxOverrides=h).__name__="HxOverrides",h.strDate=function(e){switch(e.length){case 8:var n=e.split(":"),t=new Date;return t.setTime(0),t.setUTCHours(n[0]),t.setUTCMinutes(n[1]),t.setUTCSeconds(n[2]),t;case 10:n=e.split("-");return new Date(n[0],n[1]-1,n[2],0,0,0);case 19:t=(n=e.split(" "))[0].split("-"),n=n[1].split(":");return new Date(t[0],t[1]-1,t[2],n[0],n[1],n[2]);default:throw Q.thrown("Invalid date format : "+e)}},h.cca=function(e,n){e=e.charCodeAt(n);if(e==e)return e},h.substr=function(e,n,t){if(null==t)t=e.length;else if(t<0){if(0!=n)return"";t=e.length+t}return e.substr(n,t)},h.remove=function(e,n){n=e.indexOf(n);return-1!=n&&(e.splice(n,1),!0)},h.now=function(){return Date.now()},(L.Lambda=i).__name__="Lambda",i.fold=function(e,n,t){for(var i=$getIterator(e);i.hasNext();)t=n(i.next(),t);return t},(L["ceramic.Lazy"]=j).__name__="ceramic.Lazy",j.__isInterface__=!0,(L["tracker.Events"]=k).__name__="tracker.Events",k.__isInterface__=!0,(L["ceramic.Entity"]=l).__name__="ceramic.Entity",l.__interfaces__=[j,k],l.prototype={id:null,_lifecycleState:null,get_destroyed:function(){return this._lifecycleState<0},get_disposed:function(){return 1==this._lifecycleState},__cbOnDispose:null,__cbOnceDispose:null,__cbOnOwnerUnbindDispose:null,__cbOnceOwnerUnbindDispose:null,emitDispose:function(e){var n=0;if(null!=this.__cbOnDispose&&(n+=this.__cbOnDispose.length),null!=this.__cbOnceDispose&&(n+=this.__cbOnceDispose.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnDispose)for(var s=0,r=this.__cbOnDispose.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnDispose[a],++l):--n}if(null!=this.__cbOnceDispose){for(var h=null,u=null,s=0,r=this.__cbOnceDispose.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceDispose[a],this.__cbOnceDispose[a]=null,c=this.__cbOnceOwnerUnbindDispose[a],(this.__cbOnceOwnerUnbindDispose[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindDispose[a]),u.push(this.__cbOnceDispose[a]))}this.__cbOnceOwnerUnbindDispose=h,this.__cbOnceDispose=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onDispose:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event dispose because owner is destroyed!");var l=function(e){null!=t&&(i.offDispose(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindDispose&&(this.__cbOnOwnerUnbindDispose=[]),this.__cbOnOwnerUnbindDispose.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindDispose&&(this.__cbOnOwnerUnbindDispose=[]),this.__cbOnOwnerUnbindDispose.push(null);null==this.__cbOnDispose&&(this.__cbOnDispose=[]),this.__cbOnDispose.push(t)},onceDispose:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event dispose because owner is destroyed!");var l=function(e){null!=t&&(i.offDispose(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindDispose&&(this.__cbOnceOwnerUnbindDispose=[]),this.__cbOnceOwnerUnbindDispose.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindDispose&&(this.__cbOnceOwnerUnbindDispose=[]),this.__cbOnceOwnerUnbindDispose.push(null);null==this.__cbOnceDispose&&(this.__cbOnceDispose=[]),this.__cbOnceDispose.push(t)},offDispose:function(e){if(null!=e){var n;null!=this.__cbOnDispose&&-1!=(n=this.__cbOnDispose.indexOf(e))&&(this.__cbOnDispose.splice(n,1),null!=(s=this.__cbOnOwnerUnbindDispose[n])&&s(),this.__cbOnOwnerUnbindDispose.splice(n,1)),null!=this.__cbOnceDispose&&-1!=(n=this.__cbOnceDispose.indexOf(e))&&(this.__cbOnceDispose.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindDispose[n])&&s(),this.__cbOnceOwnerUnbindDispose.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDispose){for(var t=0,i=this.__cbOnOwnerUnbindDispose.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindDispose[l])&&s()}this.__cbOnOwnerUnbindDispose=null}if(null!=this.__cbOnceOwnerUnbindDispose){for(t=0,i=this.__cbOnceOwnerUnbindDispose.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindDispose[l])&&s()}this.__cbOnceOwnerUnbindDispose=null}this.__cbOnDispose=null,this.__cbOnceDispose=null}},listensDispose:function(){return null!=this.__cbOnDispose&&0<this.__cbOnDispose.length||null!=this.__cbOnceDispose&&0<this.__cbOnceDispose.length},__cbOnDestroy:null,__cbOnceDestroy:null,__cbOnOwnerUnbindDestroy:null,__cbOnceOwnerUnbindDestroy:null,emitDestroy:function(e){var n=0;if(null!=this.__cbOnDestroy&&(n+=this.__cbOnDestroy.length),null!=this.__cbOnceDestroy&&(n+=this.__cbOnceDestroy.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnDestroy)for(var s=0,r=this.__cbOnDestroy.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnDestroy[a],++l):--n}if(null!=this.__cbOnceDestroy){for(var h=null,u=null,s=0,r=this.__cbOnceDestroy.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceDestroy[a],this.__cbOnceDestroy[a]=null,c=this.__cbOnceOwnerUnbindDestroy[a],(this.__cbOnceOwnerUnbindDestroy[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindDestroy[a]),u.push(this.__cbOnceDestroy[a]))}this.__cbOnceOwnerUnbindDestroy=h,this.__cbOnceDestroy=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onDestroy:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event destroy because owner is destroyed!");var l=function(e){null!=t&&(i.offDestroy(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindDestroy&&(this.__cbOnOwnerUnbindDestroy=[]),this.__cbOnOwnerUnbindDestroy.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindDestroy&&(this.__cbOnOwnerUnbindDestroy=[]),this.__cbOnOwnerUnbindDestroy.push(null);null==this.__cbOnDestroy&&(this.__cbOnDestroy=[]),this.__cbOnDestroy.push(t)},onceDestroy:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event destroy because owner is destroyed!");var l=function(e){null!=t&&(i.offDestroy(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindDestroy&&(this.__cbOnceOwnerUnbindDestroy=[]),this.__cbOnceOwnerUnbindDestroy.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindDestroy&&(this.__cbOnceOwnerUnbindDestroy=[]),this.__cbOnceOwnerUnbindDestroy.push(null);null==this.__cbOnceDestroy&&(this.__cbOnceDestroy=[]),this.__cbOnceDestroy.push(t)},offDestroy:function(e){if(null!=e){var n;null!=this.__cbOnDestroy&&-1!=(n=this.__cbOnDestroy.indexOf(e))&&(this.__cbOnDestroy.splice(n,1),null!=(s=this.__cbOnOwnerUnbindDestroy[n])&&s(),this.__cbOnOwnerUnbindDestroy.splice(n,1)),null!=this.__cbOnceDestroy&&-1!=(n=this.__cbOnceDestroy.indexOf(e))&&(this.__cbOnceDestroy.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindDestroy[n])&&s(),this.__cbOnceOwnerUnbindDestroy.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDestroy){for(var t=0,i=this.__cbOnOwnerUnbindDestroy.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindDestroy[l])&&s()}this.__cbOnOwnerUnbindDestroy=null}if(null!=this.__cbOnceOwnerUnbindDestroy){for(t=0,i=this.__cbOnceOwnerUnbindDestroy.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindDestroy[l])&&s()}this.__cbOnceOwnerUnbindDestroy=null}this.__cbOnDestroy=null,this.__cbOnceDestroy=null}},listensDestroy:function(){return null!=this.__cbOnDestroy&&0<this.__cbOnDestroy.length||null!=this.__cbOnceDestroy&&0<this.__cbOnceDestroy.length},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-3,null!=this.autoruns)for(var e=0,n=this.autoruns.length;e<n;){var t=e++,i=this.autoruns[t];null!=i&&(this.autoruns[t]=null,i.destroy())}if(this.emitDestroy(this),null!=this._components){for(var l=null,s=this._components.h,r=Object.keys(s),a=r.length,h=0;h<a;){var u=r[h++];null==l?l=[u]:l.push(u)}if(null!=l)for(e=0;e<l.length;){u=l[e];++e,this.removeComponent(u)}}this.unbindEvents()}},dispose:function(){0==this._lifecycleState&&(this._lifecycleState=1,he.app.disposedEntities.push(this)),this.emitDispose(this)},unbindEvents:function(){this.offDispose(),this.offDestroy()},autoruns:null,autorun:function(e,n){if(this._lifecycleState<0)return null;var t=new M(e,n);if((n=e=null)==(t.owner=this).autoruns)this.autoruns=[t];else{for(var i=!1,l=0,s=this.autoruns.length;l<s;){var r=l++;if(null==this.autoruns[r]){this.autoruns[r]=t,i=!0;break}}i||this.autoruns.push(t)}return t.onDestroy(this,$bind(this,this.checkAutoruns)),t},checkAutoruns:function(e){for(var n=0,t=this.autoruns.length;n<t;){var i=n++,l=this.autoruns[i];null!=l&&l._lifecycleState<0&&(this.autoruns[i]=null)}},_autorunMarkedMethods:function(){},tween:function(e,n,t,i,l){return P.start(this,e,n,t,i,l)},eagerTween:function(e,n,t,i,l){return P.eagerStart(this,e,n,t,i,l)},className:function(){var e=ys.getClass(this).__name__,n=e.lastIndexOf(".");return e=-1!=n?h.substr(e,n+1,null):e},toString:function(){var e=this.className();return null!=this.id?e+"("+this.id+")":""+e},clearComponents:function(){if(null!=this._components){for(var e=null,n=this._components.h,t=Object.keys(n),i=t.length,l=0;l<i;){var s=t[l++];null==e?e=[s]:e.push(s)}if(null!=e)for(var r=0;r<e.length;){s=e[r];++r,this.removeComponent(s)}}},get_components:function(){return this._components},set_components:function(e){if(this._components!=e){if(null!=this._components){l=this._components.h;for(var n=(s=Object.keys(l)).length,t=0;t<n;){var i=s[t++];null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)||this.removeComponent(i)}}if(null!=e){l=e.h;for(var l,s,n=(s=Object.keys(l)).length,t=0;t<n;){var r,i=s[t++],a=e.h[i];null!=this._components&&null!=(r=this._components.h[i])?r!=a&&(this.removeComponent(i),this.component(i,a)):this.component(i,a)}}this._components=e}return e},_components:null,component:function(t,i,l){null==l&&(l=!1);var s=this;if(null==t&&null==i)throw Q.thrown("Invalid component() call: either `name` or `component` should be provided at least.");if(null==t){var e=ys.getClass(i);if(t=e.__name__,null!=this._components&&Object.prototype.hasOwnProperty.call(this._components.h,t)){var n=t,r=1;for(t=n+"#"+r;Object.prototype.hasOwnProperty.call(this._components.h,t);)t=n+"#"+ ++r}}return null!=i?(null==this._components?this._components=new z:null!=(e=this._components.h[t])&&e.destroy(),(this._components.h[t]=i).setEntity(this),i.onceDestroy(this,function(e){var n;i.getEntity()==s&&i.setEntity(null),0<=s._lifecycleState&&s._components.h[t]==i&&(n=s._components,Object.prototype.hasOwnProperty.call(n.h,t))&&delete n.h[t],l&&null!=t&&N.setProperty(s,t,null)}),i.bindAsComponent(),i):null==this._components?null:this._components.h[t]},hasComponent:function(e){return null!=this.component(e)},removeComponent:function(e){var n,t=this._components.h[e];null!=t&&(n=this._components,Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e],t.destroy())},__class__:l,__properties__:{set_components:"set_components",get_components:"get_components",get_disposed:"get_disposed",get_destroyed:"get_destroyed"}},(L["ceramic.DecomposedTransform"]=m).__name__="ceramic.DecomposedTransform",m.prototype={pivotX:null,pivotY:null,x:null,y:null,rotation:null,scaleX:null,scaleY:null,skewX:null,skewY:null,toString:function(){return"(pos="+this.x+","+this.y+" pivot="+this.pivotX+","+this.pivotY+" rotation="+this.rotation+" scale="+(this.scaleX==this.scaleY?""+this.scaleX:this.scaleX+","+this.scaleY)+" skew="+this.skewX+","+this.skewY+")"},__class__:m},(L["ceramic.Transform"]=n).__name__="ceramic.Transform",n.__interfaces__=[k],n.prototype={__cbOnChange:null,__cbOnceChange:null,__cbOnOwnerUnbindChange:null,__cbOnceOwnerUnbindChange:null,emitChange:function(){var e=0;if(null!=this.__cbOnChange&&(e+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(e+=this.__cbOnceChange.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnChange)for(var l=0,s=this.__cbOnChange.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnChange[r],++i):--e}if(null!=this.__cbOnceChange){for(var a=null,h=null,l=0,s=this.__cbOnceChange.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceChange[r],this.__cbOnceChange[r]=null,u=this.__cbOnceOwnerUnbindChange[r],(this.__cbOnceOwnerUnbindChange[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindChange[r]),h.push(this.__cbOnceChange[r]))}this.__cbOnceOwnerUnbindChange=a,this.__cbOnceChange=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t),t=null}this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChange[n])&&s(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChange[n])&&s(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChange[l])&&s()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChange[l])&&s()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},_aPrev:null,_bPrev:null,_cPrev:null,_dPrev:null,_txPrev:null,_tyPrev:null,changedDirty:null,a:null,b:null,c:null,d:null,tx:null,ty:null,changed:null,computeChanged:function(){this.changedDirty&&(this.changed=this.tx!=this._txPrev||this.ty!=this._tyPrev||this.a!=this._aPrev||this.b!=this._bPrev||this.c!=this._cPrev||this.d!=this._dPrev,this.changedDirty=!1)},didEmitChange:function(){this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},cleanChangedState:function(){this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},clone:function(){return new n(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(e){var n=this.a*e.a+this.b*e.c,n=(this.b=this.a*e.b+this.b*e.d,this.a=n,this.c*e.a+this.d*e.c),n=(this.d=this.c*e.b+this.d*e.d,this.c=n,this.tx*e.a+this.ty*e.c+e.tx);this.ty=this.tx*e.b+this.ty*e.d+e.ty,this.tx=n,this.changedDirty=!0},decompose:function(e){return(e=null==e?new m:e).pivotX=0,e.pivotY=0,e.skewX=-Math.atan2(-this.c,this.d),e.skewY=Math.atan2(this.b,this.a),Math.abs(e.skewX+e.skewY)<1e-5&&(e.rotation=e.skewY,this.a<0&&0<=this.d&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skewX=0,e.skewY=0),e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d),e.x=this.tx,e.y=this.ty,e},setFromDecomposed:function(e){var n=e.x,t=e.y,i=e.scaleX,l=e.scaleY,s=e.rotation,r=e.skewX,a=e.skewY,h=e.pivotX,e=e.pivotY;null==e&&(e=0),null==h&&(h=0),null==a&&(a=0),null==r&&(r=0),null==s&&(s=0),null==l&&(l=1),null==i&&(i=1),null==t&&(t=0),null==n&&(n=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-h,this.ty+=-e,this.changedDirty=!0,0!=r&&(this.c=r*Math.PI/180),0!=a&&(this.b=a*Math.PI/180),0!=s&&(r=s*Math.PI/180,a=Math.cos(r),s=Math.sin(r),r=this.a*a-this.b*s,this.b=this.a*s+this.b*a,this.a=r,r=this.c*a-this.d*s,this.d=this.c*s+this.d*a,this.c=r,r=this.tx*a-this.ty*s,this.ty=this.tx*s+this.ty*a,this.tx=r,this.changedDirty=!0),this.tx+=h,this.ty+=e,this.changedDirty=!0,1==i&&1==l||(this.a*=i,this.b*=l,this.c*=i,this.d*=l,this.tx*=i,this.ty*=l,this.changedDirty=!0),this.tx+=n-h*i,this.ty+=t-e*l,this.changedDirty=!0},setFromValues:function(e,n,t,i,l,s,r,a,h){null==h&&(h=0),null==a&&(a=0),null==r&&(r=0),null==s&&(s=0),null==l&&(l=0),null==i&&(i=1),null==t&&(t=1),null==n&&(n=0),null==e&&(e=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-a,this.ty+=-h,this.changedDirty=!0,0!=s&&(this.c=s*Math.PI/180),0!=r&&(this.b=r*Math.PI/180),0!=l&&(s=l*Math.PI/180,r=Math.cos(s),l=Math.sin(s),s=this.a*r-this.b*l,this.b=this.a*l+this.b*r,this.a=s,s=this.c*r-this.d*l,this.d=this.c*l+this.d*r,this.c=s,s=this.tx*r-this.ty*l,this.ty=this.tx*l+this.ty*r,this.tx=s,this.changedDirty=!0),this.tx+=a,this.ty+=h,this.changedDirty=!0,1==t&&1==i||(this.a*=t,this.b*=i,this.c*=t,this.d*=i,this.tx*=t,this.ty*=i,this.changedDirty=!0),this.tx+=e-a*t,this.ty+=n-h*i,this.changedDirty=!0},setFromInterpolated:function(e,t,i){var l,s,r,a,h,u;0==i?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty):1==i?(this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty):((l=null==(l=n._decomposed1)?new m:l).pivotX=0,l.pivotY=0,l.skewX=-Math.atan2(-e.c,e.d),l.skewY=Math.atan2(e.b,e.a),Math.abs(l.skewX+l.skewY)<1e-5&&(l.rotation=l.skewY,e.a<0&&0<=e.d&&(l.rotation+=l.rotation<=0?Math.PI:-Math.PI),l.skewX=0,l.skewY=0),l.scaleX=Math.sqrt(e.a*e.a+e.b*e.b),l.scaleY=Math.sqrt(e.c*e.c+e.d*e.d),l.x=e.tx,l.y=e.ty,(l=null==(l=n._decomposed2)?new m:l).pivotX=0,l.pivotY=0,l.skewX=-Math.atan2(-t.c,t.d),l.skewY=Math.atan2(t.b,t.a),Math.abs(l.skewX+l.skewY)<1e-5&&(l.rotation=l.skewY,t.a<0&&0<=t.d&&(l.rotation+=l.rotation<=0?Math.PI:-Math.PI),l.skewX=0,l.skewY=0),l.scaleX=Math.sqrt(t.a*t.a+t.b*t.b),l.scaleY=Math.sqrt(t.c*t.c+t.d*t.d),l.x=t.tx,l.y=t.ty,n._decomposed1.pivotX+=(n._decomposed2.pivotX-n._decomposed1.pivotX)*i,n._decomposed1.pivotY+=(n._decomposed2.pivotY-n._decomposed1.pivotY)*i,n._decomposed1.rotation+=(n._decomposed2.rotation-n._decomposed1.rotation)*i,n._decomposed1.scaleX+=(n._decomposed2.scaleX-n._decomposed1.scaleX)*i,n._decomposed1.scaleY+=(n._decomposed2.scaleY-n._decomposed1.scaleY)*i,n._decomposed1.skewX+=(n._decomposed2.skewX-n._decomposed1.skewX)*i,n._decomposed1.skewY+=(n._decomposed2.skewY-n._decomposed1.skewY)*i,n._decomposed1.x+=(n._decomposed2.x-n._decomposed1.x)*i,n._decomposed1.y+=(n._decomposed2.y-n._decomposed1.y)*i,l=(e=n._decomposed1).x,t=e.y,i=e.scaleX,s=e.scaleY,h=e.rotation,u=e.skewX,a=e.skewY,r=e.pivotX,null==(e=e.pivotY)&&(e=0),null==r&&(r=0),null==a&&(a=0),null==u&&(u=0),null==h&&(h=0),null==s&&(s=1),null==i&&(i=1),null==t&&(t=0),null==l&&(l=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-r,this.ty+=-e,this.changedDirty=!0,0!=u&&(this.c=u*Math.PI/180),0!=a&&(this.b=a*Math.PI/180),0!=h&&(u=h*Math.PI/180,a=Math.cos(u),h=Math.sin(u),u=this.a*a-this.b*h,this.b=this.a*h+this.b*a,this.a=u,u=this.c*a-this.d*h,this.d=this.c*h+this.d*a,this.c=u,u=this.tx*a-this.ty*h,this.ty=this.tx*h+this.ty*a,this.tx=u,this.changedDirty=!0),this.tx+=r,this.ty+=e,this.changedDirty=!0,1==i&&1==s||(this.a*=i,this.b*=s,this.c*=i,this.d*=s,this.tx*=i,this.ty*=s,this.changedDirty=!0),this.tx+=l-r*i,this.ty+=t-e*s),this.changedDirty=!0},deltaTransformX:function(e,n){return e*this.a+n*this.c},deltaTransformY:function(e,n){return e*this.b+n*this.d},equals:function(e){return null!=e&&this.tx==e.tx&&this.ty==e.ty&&this.a==e.a&&this.b==e.b&&this.c==e.c&&this.d==e.d},identity:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0},invert:function(){var e,n=this.a*this.d-this.b*this.c;0==n?(this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty):(e=this.d*(n=1/n),this.d=this.a*n,this.a=e,this.b*=-n,this.c*=-n,e=-this.a*this.tx-this.c*this.ty,this.ty=-this.b*this.tx-this.d*this.ty,this.tx=e),this.changedDirty=!0},rotate:function(e){var n=Math.cos(e),e=Math.sin(e),t=this.a*n-this.b*e,t=(this.b=this.a*e+this.b*n,this.a=t,this.c*n-this.d*e),t=(this.d=this.c*e+this.d*n,this.c=t,this.tx*n-this.ty*e);this.ty=this.tx*e+this.ty*n,this.tx=t,this.changedDirty=!0},scale:function(e,n){this.a*=e,this.b*=n,this.c*=e,this.d*=n,this.tx*=e,this.ty*=n,this.changedDirty=!0},translate:function(e,n){this.tx+=e,this.ty+=n,this.changedDirty=!0},skew:function(e,t){var i=n._tmp,i=(i.a=1,i.b=0,i.c=0,i.d=1,i.tx=0,i.ty=0,i.changedDirty=!0,Math.cos(t)),t=Math.sin(t),l=-Math.sin(e),e=Math.cos(e),i=(n._tmp.a=+i+-0*t,n._tmp.b=0*i+ +t,n._tmp.c=l+-0*e,n._tmp.d=0*l+ +e,n._tmp),t=this.a*i.a+this.b*i.c,l=(this.b=this.a*i.b+this.b*i.d,this.a=t,this.c*i.a+this.d*i.c),e=(this.d=this.c*i.b+this.d*i.d,this.c=l,this.tx*i.a+this.ty*i.c+i.tx);this.ty=this.tx*i.b+this.ty*i.d+i.ty,this.tx=e,this.changedDirty=!0},setRotation:function(e,n){null==n&&(n=1),this.a=Math.cos(e)*n,this.c=Math.sin(e)*n,this.b=-this.c,this.d=this.a,this.changedDirty=!0},setTo:function(e,n,t,i,l,s){this.a=e,this.b=n,this.c=t,this.d=i,this.tx=l,this.ty=s,this.changedDirty=!0},setToTransform:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this.changedDirty=!0},toString:function(){var e=n._decomposed1;return(e=null==e?new m:e).pivotX=0,e.pivotY=0,e.skewX=-Math.atan2(-this.c,this.d),e.skewY=Math.atan2(this.b,this.a),Math.abs(e.skewX+e.skewY)<1e-5&&(e.rotation=e.skewY,this.a<0&&0<=this.d&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skewX=0,e.skewY=0),e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d),e.x=this.tx,e.y=this.ty,"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+" "+V.string(n._decomposed1)+")"},transformX:function(e,n){return e*this.a+n*this.c+this.tx},transformY:function(e,n){return e*this.b+n*this.d+this.ty},unbindEvents:function(){this.offChange()},__class__:n},(L["ceramic.Pool"]=o).__name__="ceramic.Pool",o.prototype={availableItems:null,get:function(){return 0<this.availableItems.length?this.availableItems.pop():null},recycle:function(e){this.availableItems.push(e)},clear:function(){0<this.availableItems.length&&(this.availableItems=[])},__class__:o},(L["ceramic.Point"]=p).__name__="ceramic.Point",p.get=function(e,n,t){null==t&&(t=0),null==n&&(n=0),null==e&&(e=0);var i=p.pool,i=0<i.availableItems.length?i.availableItems.pop():null;return null==i?i=new p(e,n,t):(i.x=e,i.y=n,i.z=t),i},p.prototype={x:null,y:null,z:null,toString:function(){return"Point("+this.x+", "+this.y+", "+this.z+")"},recycle:function(){this.x=0,this.y=0,this.z=0,p.pool.recycle(this)},__class__:p},(L["ceramic.Visual"]=q).__name__="ceramic.Visual",q.computeChildrenDepth=function(e){q._computeChildrenDepth0(e)},q._computeChildrenDepth0=function(e){var n=e.children;if(null!=n){for(var t=0,i=n.length;t<i;)(s=n[t++]).computedDepth=1e3*s.depth,q._computeChildrenDepth0(s);var l=e.depthRange;if(-1!=l){q._minDepth=9999999999,q._maxDepth=-9999999999;for(t=0,i=n.length;t<i;){var s=n[t++];q._computeMinMaxDepths0(s)}for(t=0,i=n.length;t<i;){s=n[t++];q._multiplyDepths0(s,e.computedDepth+Math.min(.01,1e3*l),Math.max(0,1e3*l-.01))}}}},q._computeChildrenDepth1=function(e){var n=e.children;if(null!=n){for(var t=0,i=n.length;t<i;)(s=n[t++]).computedDepth=1e3*s.depth,q._computeChildrenDepth0(s);var l=e.depthRange;if(-1!=l){q._minDepth=9999999999,q._maxDepth=-9999999999;for(t=0,i=n.length;t<i;){var s=n[t++];q._computeMinMaxDepths0(s)}for(t=0,i=n.length;t<i;){s=n[t++];q._multiplyDepths0(s,e.computedDepth+Math.min(.01,1e3*l),Math.max(0,1e3*l-.01))}}}},q._computeChildrenDepthApplyDepthRange=function(e,n){var t=e.depthRange;if(-1!=t){q._minDepth=9999999999,q._maxDepth=-9999999999;for(var i=0,l=n.length;i<l;){var s=n[i++];q._computeMinMaxDepths0(s)}for(i=0,l=n.length;i<l;){s=n[i++];q._multiplyDepths0(s,e.computedDepth+Math.min(.01,1e3*t),Math.max(0,1e3*t-.01))}}},q.computeMinMaxDepths=function(e){q._computeMinMaxDepths0(e)},q._computeMinMaxDepths0=function(e){var n=e.computedDepth,t=(n<q._minDepth&&(q._minDepth=n),q._maxDepth<n+1&&(q._maxDepth=n+1),e.children);if(null!=t)for(var i=0,l=t.length;i<l;){var s=t[i++];q._computeMinMaxDepths0(s)}},q._computeMinMaxDepths1=function(e){var n=e.computedDepth,t=(n<q._minDepth&&(q._minDepth=n),q._maxDepth<n+1&&(q._maxDepth=n+1),e.children);if(null!=t)for(var i=0,l=t.length;i<l;){var s=t[i++];q._computeMinMaxDepths0(s)}},q.multiplyDepths=function(e,n,t){q._multiplyDepths0(e,n,t)},q._multiplyDepths0=function(e,n,t){e.computedDepth=q._maxDepth==q._minDepth?n+.5*t:n+(e.computedDepth-q._minDepth)/(q._maxDepth-q._minDepth)*t;var i=e.children;if(null!=i)for(var l=0,s=i.length;l<s;){var r=i[l++];q._multiplyDepths0(r,n,t)}},q._multiplyDepths1=function(e,n,t){e.computedDepth=q._maxDepth==q._minDepth?n+.5*t:n+(e.computedDepth-q._minDepth)/(q._maxDepth-q._minDepth)*t;var i=e.children;if(null!=i)for(var l=0,s=i.length;l<s;){var r=i[l++];q._multiplyDepths0(r,n,t)}},q.__super__=l,q.prototype=$extend(l.prototype,{__cbOnPointerDown:null,__cbOncePointerDown:null,__cbOnOwnerUnbindPointerDown:null,__cbOnceOwnerUnbindPointerDown:null,emitPointerDown:function(e){var n=0;if(null!=this.__cbOnPointerDown&&(n+=this.__cbOnPointerDown.length),null!=this.__cbOncePointerDown&&(n+=this.__cbOncePointerDown.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPointerDown)for(var s=0,r=this.__cbOnPointerDown.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPointerDown[a],++l):--n}if(null!=this.__cbOncePointerDown){for(var h=null,u=null,s=0,r=this.__cbOncePointerDown.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePointerDown[a],this.__cbOncePointerDown[a]=null,c=this.__cbOnceOwnerUnbindPointerDown[a],(this.__cbOnceOwnerUnbindPointerDown[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPointerDown[a]),u.push(this.__cbOncePointerDown[a]))}this.__cbOnceOwnerUnbindPointerDown=h,this.__cbOncePointerDown=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerDown because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(null);null==this.__cbOnPointerDown&&(this.__cbOnPointerDown=[]),this.__cbOnPointerDown.push(t)},oncePointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerDown because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(null);null==this.__cbOncePointerDown&&(this.__cbOncePointerDown=[]),this.__cbOncePointerDown.push(t)},offPointerDown:function(e){if(null!=e){var n;null!=this.__cbOnPointerDown&&-1!=(n=this.__cbOnPointerDown.indexOf(e))&&(this.__cbOnPointerDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPointerDown[n])&&s(),this.__cbOnOwnerUnbindPointerDown.splice(n,1)),null!=this.__cbOncePointerDown&&-1!=(n=this.__cbOncePointerDown.indexOf(e))&&(this.__cbOncePointerDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPointerDown[n])&&s(),this.__cbOnceOwnerUnbindPointerDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindPointerDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPointerDown[l])&&s()}this.__cbOnOwnerUnbindPointerDown=null}if(null!=this.__cbOnceOwnerUnbindPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindPointerDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPointerDown[l])&&s()}this.__cbOnceOwnerUnbindPointerDown=null}this.__cbOnPointerDown=null,this.__cbOncePointerDown=null}},listensPointerDown:function(){return null!=this.__cbOnPointerDown&&0<this.__cbOnPointerDown.length||null!=this.__cbOncePointerDown&&0<this.__cbOncePointerDown.length},__cbOnPointerUp:null,__cbOncePointerUp:null,__cbOnOwnerUnbindPointerUp:null,__cbOnceOwnerUnbindPointerUp:null,emitPointerUp:function(e){var n=0;if(null!=this.__cbOnPointerUp&&(n+=this.__cbOnPointerUp.length),null!=this.__cbOncePointerUp&&(n+=this.__cbOncePointerUp.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPointerUp)for(var s=0,r=this.__cbOnPointerUp.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPointerUp[a],++l):--n}if(null!=this.__cbOncePointerUp){for(var h=null,u=null,s=0,r=this.__cbOncePointerUp.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePointerUp[a],this.__cbOncePointerUp[a]=null,c=this.__cbOnceOwnerUnbindPointerUp[a],(this.__cbOnceOwnerUnbindPointerUp[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPointerUp[a]),u.push(this.__cbOncePointerUp[a]))}this.__cbOnceOwnerUnbindPointerUp=h,this.__cbOncePointerUp=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerUp because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(null);null==this.__cbOnPointerUp&&(this.__cbOnPointerUp=[]),this.__cbOnPointerUp.push(t)},oncePointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerUp because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(null);null==this.__cbOncePointerUp&&(this.__cbOncePointerUp=[]),this.__cbOncePointerUp.push(t)},offPointerUp:function(e){if(null!=e){var n;null!=this.__cbOnPointerUp&&-1!=(n=this.__cbOnPointerUp.indexOf(e))&&(this.__cbOnPointerUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPointerUp[n])&&s(),this.__cbOnOwnerUnbindPointerUp.splice(n,1)),null!=this.__cbOncePointerUp&&-1!=(n=this.__cbOncePointerUp.indexOf(e))&&(this.__cbOncePointerUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPointerUp[n])&&s(),this.__cbOnceOwnerUnbindPointerUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindPointerUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPointerUp[l])&&s()}this.__cbOnOwnerUnbindPointerUp=null}if(null!=this.__cbOnceOwnerUnbindPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindPointerUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPointerUp[l])&&s()}this.__cbOnceOwnerUnbindPointerUp=null}this.__cbOnPointerUp=null,this.__cbOncePointerUp=null}},listensPointerUp:function(){return null!=this.__cbOnPointerUp&&0<this.__cbOnPointerUp.length||null!=this.__cbOncePointerUp&&0<this.__cbOncePointerUp.length},__cbOnPointerOver:null,__cbOncePointerOver:null,__cbOnOwnerUnbindPointerOver:null,__cbOnceOwnerUnbindPointerOver:null,emitPointerOver:function(e){var n=0;if(null!=this.__cbOnPointerOver&&(n+=this.__cbOnPointerOver.length),null!=this.__cbOncePointerOver&&(n+=this.__cbOncePointerOver.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPointerOver)for(var s=0,r=this.__cbOnPointerOver.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPointerOver[a],++l):--n}if(null!=this.__cbOncePointerOver){for(var h=null,u=null,s=0,r=this.__cbOncePointerOver.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePointerOver[a],this.__cbOncePointerOver[a]=null,c=this.__cbOnceOwnerUnbindPointerOver[a],(this.__cbOnceOwnerUnbindPointerOver[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPointerOver[a]),u.push(this.__cbOncePointerOver[a]))}this.__cbOnceOwnerUnbindPointerOver=h,this.__cbOncePointerOver=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPointerOver:function(n,t){var i=this;if(null==this.__cbOnPointerOver&&null==this.__cbOncePointerOver&&(he.app.screen.visualsListenPointerOver=!0),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerOver because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerOver(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPointerOver&&(this.__cbOnOwnerUnbindPointerOver=[]),this.__cbOnOwnerUnbindPointerOver.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPointerOver&&(this.__cbOnOwnerUnbindPointerOver=[]),this.__cbOnOwnerUnbindPointerOver.push(null);null==this.__cbOnPointerOver&&(this.__cbOnPointerOver=[]),this.__cbOnPointerOver.push(t)},oncePointerOver:function(n,t){var i=this;if(null==this.__cbOnPointerOver&&null==this.__cbOncePointerOver&&(he.app.screen.visualsListenPointerOver=!0),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerOver because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerOver(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPointerOver&&(this.__cbOnceOwnerUnbindPointerOver=[]),this.__cbOnceOwnerUnbindPointerOver.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPointerOver&&(this.__cbOnceOwnerUnbindPointerOver=[]),this.__cbOnceOwnerUnbindPointerOver.push(null);null==this.__cbOncePointerOver&&(this.__cbOncePointerOver=[]),this.__cbOncePointerOver.push(t)},offPointerOver:function(e){if(null!=e){var n;null!=this.__cbOnPointerOver&&-1!=(n=this.__cbOnPointerOver.indexOf(e))&&(this.__cbOnPointerOver.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPointerOver[n])&&s(),this.__cbOnOwnerUnbindPointerOver.splice(n,1)),null!=this.__cbOncePointerOver&&-1!=(n=this.__cbOncePointerOver.indexOf(e))&&(this.__cbOncePointerOver.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPointerOver[n])&&s(),this.__cbOnceOwnerUnbindPointerOver.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerOver){for(var t=0,i=this.__cbOnOwnerUnbindPointerOver.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPointerOver[l])&&s()}this.__cbOnOwnerUnbindPointerOver=null}if(null!=this.__cbOnceOwnerUnbindPointerOver){for(t=0,i=this.__cbOnceOwnerUnbindPointerOver.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPointerOver[l])&&s()}this.__cbOnceOwnerUnbindPointerOver=null}this.__cbOnPointerOver=null,this.__cbOncePointerOver=null}},listensPointerOver:function(){return null!=this.__cbOnPointerOver&&0<this.__cbOnPointerOver.length||null!=this.__cbOncePointerOver&&0<this.__cbOncePointerOver.length},__cbOnPointerOut:null,__cbOncePointerOut:null,__cbOnOwnerUnbindPointerOut:null,__cbOnceOwnerUnbindPointerOut:null,emitPointerOut:function(e){var n=0;if(null!=this.__cbOnPointerOut&&(n+=this.__cbOnPointerOut.length),null!=this.__cbOncePointerOut&&(n+=this.__cbOncePointerOut.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPointerOut)for(var s=0,r=this.__cbOnPointerOut.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPointerOut[a],++l):--n}if(null!=this.__cbOncePointerOut){for(var h=null,u=null,s=0,r=this.__cbOncePointerOut.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePointerOut[a],this.__cbOncePointerOut[a]=null,c=this.__cbOnceOwnerUnbindPointerOut[a],(this.__cbOnceOwnerUnbindPointerOut[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPointerOut[a]),u.push(this.__cbOncePointerOut[a]))}this.__cbOnceOwnerUnbindPointerOut=h,this.__cbOncePointerOut=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPointerOut:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerOut because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerOut(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPointerOut&&(this.__cbOnOwnerUnbindPointerOut=[]),this.__cbOnOwnerUnbindPointerOut.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPointerOut&&(this.__cbOnOwnerUnbindPointerOut=[]),this.__cbOnOwnerUnbindPointerOut.push(null);null==this.__cbOnPointerOut&&(this.__cbOnPointerOut=[]),this.__cbOnPointerOut.push(t)},oncePointerOut:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerOut because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerOut(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPointerOut&&(this.__cbOnceOwnerUnbindPointerOut=[]),this.__cbOnceOwnerUnbindPointerOut.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPointerOut&&(this.__cbOnceOwnerUnbindPointerOut=[]),this.__cbOnceOwnerUnbindPointerOut.push(null);null==this.__cbOncePointerOut&&(this.__cbOncePointerOut=[]),this.__cbOncePointerOut.push(t)},offPointerOut:function(e){if(null!=e){var n;null!=this.__cbOnPointerOut&&-1!=(n=this.__cbOnPointerOut.indexOf(e))&&(this.__cbOnPointerOut.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPointerOut[n])&&s(),this.__cbOnOwnerUnbindPointerOut.splice(n,1)),null!=this.__cbOncePointerOut&&-1!=(n=this.__cbOncePointerOut.indexOf(e))&&(this.__cbOncePointerOut.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPointerOut[n])&&s(),this.__cbOnceOwnerUnbindPointerOut.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerOut){for(var t=0,i=this.__cbOnOwnerUnbindPointerOut.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPointerOut[l])&&s()}this.__cbOnOwnerUnbindPointerOut=null}if(null!=this.__cbOnceOwnerUnbindPointerOut){for(t=0,i=this.__cbOnceOwnerUnbindPointerOut.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPointerOut[l])&&s()}this.__cbOnceOwnerUnbindPointerOut=null}this.__cbOnPointerOut=null,this.__cbOncePointerOut=null}},listensPointerOut:function(){return null!=this.__cbOnPointerOut&&0<this.__cbOnPointerOut.length||null!=this.__cbOncePointerOut&&0<this.__cbOncePointerOut.length},__cbOnFocus:null,__cbOnceFocus:null,__cbOnOwnerUnbindFocus:null,__cbOnceOwnerUnbindFocus:null,emitFocus:function(){var e=0;if(null!=this.__cbOnFocus&&(e+=this.__cbOnFocus.length),null!=this.__cbOnceFocus&&(e+=this.__cbOnceFocus.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFocus)for(var l=0,s=this.__cbOnFocus.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnFocus[r],++i):--e}if(null!=this.__cbOnceFocus){for(var a=null,h=null,l=0,s=this.__cbOnceFocus.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceFocus[r],this.__cbOnceFocus[r]=null,u=this.__cbOnceOwnerUnbindFocus[r],(this.__cbOnceOwnerUnbindFocus[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFocus[r]),h.push(this.__cbOnceFocus[r]))}this.__cbOnceOwnerUnbindFocus=a,this.__cbOnceFocus=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event focus because owner is destroyed!");var l=function(e){null!=t&&(i.offFocus(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(null);null==this.__cbOnFocus&&(this.__cbOnFocus=[]),this.__cbOnFocus.push(t)},onceFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event focus because owner is destroyed!");var l=function(e){null!=t&&(i.offFocus(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(null);null==this.__cbOnceFocus&&(this.__cbOnceFocus=[]),this.__cbOnceFocus.push(t)},offFocus:function(e){if(null!=e){var n;null!=this.__cbOnFocus&&-1!=(n=this.__cbOnFocus.indexOf(e))&&(this.__cbOnFocus.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFocus[n])&&s(),this.__cbOnOwnerUnbindFocus.splice(n,1)),null!=this.__cbOnceFocus&&-1!=(n=this.__cbOnceFocus.indexOf(e))&&(this.__cbOnceFocus.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFocus[n])&&s(),this.__cbOnceOwnerUnbindFocus.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFocus){for(var t=0,i=this.__cbOnOwnerUnbindFocus.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFocus[l])&&s()}this.__cbOnOwnerUnbindFocus=null}if(null!=this.__cbOnceOwnerUnbindFocus){for(t=0,i=this.__cbOnceOwnerUnbindFocus.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFocus[l])&&s()}this.__cbOnceOwnerUnbindFocus=null}this.__cbOnFocus=null,this.__cbOnceFocus=null}},listensFocus:function(){return null!=this.__cbOnFocus&&0<this.__cbOnFocus.length||null!=this.__cbOnceFocus&&0<this.__cbOnceFocus.length},__cbOnBlur:null,__cbOnceBlur:null,__cbOnOwnerUnbindBlur:null,__cbOnceOwnerUnbindBlur:null,emitBlur:function(){var e=0;if(null!=this.__cbOnBlur&&(e+=this.__cbOnBlur.length),null!=this.__cbOnceBlur&&(e+=this.__cbOnceBlur.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBlur)for(var l=0,s=this.__cbOnBlur.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnBlur[r],++i):--e}if(null!=this.__cbOnceBlur){for(var a=null,h=null,l=0,s=this.__cbOnceBlur.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceBlur[r],this.__cbOnceBlur[r]=null,u=this.__cbOnceOwnerUnbindBlur[r],(this.__cbOnceOwnerUnbindBlur[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBlur[r]),h.push(this.__cbOnceBlur[r]))}this.__cbOnceOwnerUnbindBlur=a,this.__cbOnceBlur=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event blur because owner is destroyed!");var l=function(e){null!=t&&(i.offBlur(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(null);null==this.__cbOnBlur&&(this.__cbOnBlur=[]),this.__cbOnBlur.push(t)},onceBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event blur because owner is destroyed!");var l=function(e){null!=t&&(i.offBlur(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(null);null==this.__cbOnceBlur&&(this.__cbOnceBlur=[]),this.__cbOnceBlur.push(t)},offBlur:function(e){if(null!=e){var n;null!=this.__cbOnBlur&&-1!=(n=this.__cbOnBlur.indexOf(e))&&(this.__cbOnBlur.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBlur[n])&&s(),this.__cbOnOwnerUnbindBlur.splice(n,1)),null!=this.__cbOnceBlur&&-1!=(n=this.__cbOnceBlur.indexOf(e))&&(this.__cbOnceBlur.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBlur[n])&&s(),this.__cbOnceOwnerUnbindBlur.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBlur){for(var t=0,i=this.__cbOnOwnerUnbindBlur.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBlur[l])&&s()}this.__cbOnOwnerUnbindBlur=null}if(null!=this.__cbOnceOwnerUnbindBlur){for(t=0,i=this.__cbOnceOwnerUnbindBlur.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBlur[l])&&s()}this.__cbOnceOwnerUnbindBlur=null}this.__cbOnBlur=null,this.__cbOnceBlur=null}},listensBlur:function(){return null!=this.__cbOnBlur&&0<this.__cbOnBlur.length||null!=this.__cbOnceBlur&&0<this.__cbOnceBlur.length},willListenPointerOver:function(){he.app.screen.visualsListenPointerOver=!0},asQuad:null,asMesh:null,multiTouch:null,isPointerDown:null,_numPointerDown:null,get_isPointerDown:function(){return 0<this._numPointerDown},isPointerOver:null,_numPointerOver:null,get_isPointerOver:function(){return 0<this._numPointerOver},clip:null,set_clip:function(e){if(this.clip!=e&&(this.clip=e,this.clipDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.clipDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_clipDirty(!0)}}return e},inheritAlpha:null,set_inheritAlpha:function(e){if(this.inheritAlpha!=e&&(this.inheritAlpha=e,this.visibilityDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.visibilityDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_visibilityDirty(!0)}}return e},stop:function(){},translatesOnly:null,translatesOnlyDirty:null,contentDirty:null,set_contentDirty:function(e){return(this.contentDirty=e)&&(he.app.visualsContentDirty=!0),e},matrixDirty:null,set_matrixDirty:function(e){if((this.matrixDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_matrixDirty(!0)}return e},renderTargetDirty:null,set_renderTargetDirty:function(e){if(this.renderTargetDirty=e){if(this.clipDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;if((a=this.children[i]).clipDirty=!0,null!=a.children)for(var l=0,s=a.children.length;l<s;){var r=l++;a.children[r].set_clipDirty(!0)}}if(null!=this.children)for(n=0,t=this.children.length;n<t;){var a,i=n++;(a=this.children[i]).set_renderTargetDirty(!0)}}return e},visibilityDirty:null,set_visibilityDirty:function(e){if((this.visibilityDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_visibilityDirty(!0)}return e},touchableDirty:null,set_touchableDirty:function(e){if((this.touchableDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_touchableDirty(!0)}return e},clipDirty:null,set_clipDirty:function(e){if((this.clipDirty=e)&&null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;this.children[i].set_clipDirty(!0)}return e},renderTarget:null,set_renderTarget:function(e){if(this.renderTarget!=e){if(this.renderTarget=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++;if((a=this.children[i]).matrixDirty=!0,null!=a.children)for(var l=0,s=a.children.length;l<s;){var r=l++;(h=a.children[r]).set_matrixDirty(!0)}}if(this.renderTargetDirty=!0,this.clipDirty=!0,null!=this.children)for(n=0,t=this.children.length;n<t;){i=n++;if((a=this.children[i]).clipDirty=!0,null!=a.children)for(l=0,s=a.children.length;l<s;){r=l++;(h=a.children[r]).set_clipDirty(!0)}}if(null!=this.children)for(n=0,t=this.children.length;n<t;){var a,i=n++;if((a=this.children[i]).renderTargetDirty=!0,a.clipDirty=!0,null!=a.children)for(l=0,s=a.children.length;l<s;){var h,r=l++;if((h=a.children[r]).clipDirty=!0,null!=h.children)for(var u=0,c=h.children.length;u<c;){var o=u++,_=h.children[o];if(_.clipDirty=!0,null!=_.children)for(var d=0,b=_.children.length;d<b;){var g=d++;_.children[g].set_clipDirty(!0)}}}if(null!=a.children)for(var O=0,f=a.children.length;O<f;){var p=O++;a.children[p].set_renderTargetDirty(!0)}}}return e},blending:null,set_blending:function(e){return this.blending=e},visible:null,set_visible:function(e){if(this.visible!=e&&(this.visible=e,this.visibilityDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.visibilityDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_visibilityDirty(!0)}}return e},touchable:null,set_touchable:function(e){if(this.touchable!=e&&(this.touchable=e,this.touchableDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.touchableDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_touchableDirty(!0)}}return e},depth:null,set_depth:function(e){return this.depth!=e&&(this.depth=e,he.app.hierarchyDirty=!0),e},depthRange:null,set_depthRange:function(e){return this.depthRange!=e&&(this.depthRange=e,he.app.hierarchyDirty=!0),e},x:null,set_x:function(e){if(this.x!=e&&(this.x=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},y:null,set_y:function(e){if(this.y!=e&&(this.y=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},scaleX:null,set_scaleX:function(e){if(this.scaleX!=e){if(this.scaleX=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},scaleY:null,set_scaleY:function(e){if(this.scaleY!=e){if(this.scaleY=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},skewX:null,set_skewX:function(e){if(this.skewX!=e){if(this.skewX=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},skewY:null,set_skewY:function(e){if(this.skewY!=e){if(this.skewY=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},anchorX:null,set_anchorX:function(e){if(this.anchorX!=e&&(this.anchorX=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},anchorY:null,set_anchorY:function(e){if(this.anchorY!=e&&(this.anchorY=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},_width:null,get_width:function(){return this._width},set_width:function(e){if(this._width!=e&&(this._width=e,0!=this.anchorX)&&(this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},_height:null,get_height:function(){return this._height},set_height:function(e){if(this._height!=e&&(this._height=e,0!=this.anchorY)&&(this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},roundTranslation:null,set_roundTranslation:function(e){if(this.roundTranslation!=e&&(this.roundTranslation=e,this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},rotation:null,set_rotation:function(e){if(this.rotation!=e){if(this.rotation=e,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}this.translatesOnlyDirty=!0}return e},alpha:null,set_alpha:function(e){if(this.alpha!=e&&(this.alpha=e,this.visibilityDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.visibilityDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_visibilityDirty(!0)}}return e},get_translateX:function(){return null!=this.transform?this.transform.tx:0},set_translateX:function(e){return 0==e?null!=this.transform&&0!=this.transform.tx&&(this.transform.tx=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new n),this.transform.tx!=e&&(this.transform.tx=e,this.transform.changedDirty=!0)),e},get_translateY:function(){return null!=this.transform?this.transform.ty:0},set_translateY:function(e){return 0==e?null!=this.transform&&0!=this.transform.ty&&(this.transform.ty=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new n),this.transform.ty!=e&&(this.transform.ty=e,this.transform.changedDirty=!0)),e},transform:null,set_transform:function(e){if(this.transform!=e&&(null!=this.transform&&this.transform.offChange($bind(this,this.transformDidChange)),this.transform=e,null!=this.transform&&this.transform.onChange(this,$bind(this,this.transformDidChange)),this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}return e},shader:null,set_shader:function(e){return this.shader=e},flag:function(e,n){e+=16;return null!=n?(this.flags=n?this.flags|1<<e:this.flags&~(1<<e),n):(this.flags&(n=1<<e))==n},internalFlag:function(e,n){return null!=n?(this.flags=n?this.flags|1<<e:this.flags&~(1<<e),n):(this.flags&(n=1<<e))==n},flags:null,get_active:function(){return 1!=(1&this.flags)},set_active:function(e){return e!=(1!=(1&this.flags))&&(this.flags=e?-2&this.flags:1|this.flags,e?(this.set_visible(2==(2&this.flags)),this.set_touchable(4==(4&this.flags))):(this.flags=this.visible?2|this.flags:-3&this.flags,this.flags=this.touchable?4|this.flags:-5&this.flags,this.set_visible(!1),this.set_touchable(!1))),e},matA:null,matB:null,matC:null,matD:null,matTX:null,matTY:null,computedVisible:null,computedAlpha:null,computedDepth:null,computedRenderTarget:null,computedTouchable:null,computedClip:null,children:null,parent:null,size:function(e,n){this.set_width(e),this.set_height(n)},anchor:function(e,n){this.set_anchorX(e),this.set_anchorY(n)},pos:function(e,n){this.set_x(e),this.set_y(n)},_scale:function(e,n){this.set_scaleX(e),this.set_scaleY(n)},skew:function(e,n){this.set_skewX(e),this.set_skewY(n)},translate:function(e,t){0==e?null!=this.transform&&0!=this.transform.tx&&(this.transform.tx=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new n),this.transform.tx!=e&&(this.transform.tx=e,this.transform.changedDirty=!0)),0==t?null!=this.transform&&0!=this.transform.ty&&(this.transform.ty=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new n),this.transform.ty!=t&&(this.transform.ty=t,this.transform.changedDirty=!0))},anchorKeepPosition:function(e,n){var t,i;this.anchorX==e&&this.anchorY==n||(this.visualToScreen(0,0,q._point,!1),null!=this.parent&&this.parent.screenToVisual(q._point.x,q._point.y,q._point,!1),t=q._point.x,i=q._point.y,this.set_anchorX(e),this.set_anchorY(n),this.visualToScreen(0,0,q._point,!1),null!=this.parent&&this.parent.screenToVisual(q._point.x,q._point.y,q._point,!1),this.set_x(this.x+(t-q._point.x)),this.set_y(this.y+(i-q._point.y)))},childWithId:function(e,n){if(null==n&&(n=!0),null!=this.children){for(var t=0,i=this.children.length;t<i;){var l=t++;if((s=this.children[l]).id==e)return s}if(n)for(t=0,i=this.children.length;t<i;){var s,l=t++,r=(s=this.children[l]).childWithId(e,!0);if(null!=r)return r}}return null},childWithType:function(e,n){if(null==n&&(n=!0),null!=this.children){for(var t=0,i=this.children.length;t<i;){var l=t++,s=this.children[l];if(ys.__instanceof(s,e))return s}if(n)for(t=0,i=this.children.length;t<i;){var l=t++,r=(s=this.children[l]).childWithType(e,!0);if(null!=r)return r}}return null},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),he.app.screen.unobservedFocusedVisual==this&&he.app.screen.set_focusedVisual(null),he.app.destroyedVisuals.push(this),null!=this.parent&&this.parent.remove(this),null!=this.transform&&this.set_transform(null),this.clear(),this.visibilityDirty=!1,this.computedVisible=!1)},clear:function(){if(null!=this.children&&0<this.children.length){for(var e=this.children.length,n=f.pool(e),t=n.get(),i=0,l=e;i<l;){var s=i++;t.vector[s]=this.children[s]}for(i=0,l=e;i<l;){s=i++;t.vector[s].destroy()}this.children=null,n.release(t)}},transformDidChange:function(){if(this.matrixDirty=!0,null!=this.children)for(var e=0,n=this.children.length;e<n;){var t=e++,i=this.children[t];if(i.matrixDirty=!0,null!=i.children)for(var l=0,s=i.children.length;l<s;){var r=l++;i.children[r].set_matrixDirty(!0)}}},computeMatrix:function(){null!=this.parent&&this.parent.matrixDirty&&this.parent.computeMatrix();var e,t,i,l,s=q._matrix,r=(s.a=1,s.b=0,s.c=0,s.d=1,s.tx=0,s.ty=0,s.changedDirty=!0,this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1),this.get_width()),a=this.get_height();this.translatesOnly?(q._matrix.tx+=this.x-this.anchorX*r,q._matrix.ty+=this.y-this.anchorY*a):((s=q._matrix).tx+=-this.anchorX*r,s.ty+=-this.anchorY*a,s.changedDirty=!0,1==this.scaleX&&1==this.scaleY||(r=this.scaleX,a=this.scaleY,(s=q._matrix).a*=r,s.b*=a,s.c*=r,s.d*=a,s.tx*=r,s.ty*=a,s.changedDirty=!0),0==this.skewX&&0==this.skewY||(s=q._matrix,r=.017453292519943295*this.skewX,a=.017453292519943295*this.skewY,(e=n._tmp).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0,e=Math.cos(a),a=Math.sin(a),t=-Math.sin(r),r=Math.cos(r),n._tmp.a=+e+-0*a,n._tmp.b=0*e+ +a,n._tmp.c=t+-0*r,n._tmp.d=0*t+ +r,t=s.a*(e=n._tmp).a+s.b*e.c,s.b=s.a*e.b+s.b*e.d,s.a=t,i=s.c*e.a+s.d*e.c,s.d=s.c*e.b+s.d*e.d,s.c=i,l=s.tx*e.a+s.ty*e.c+e.tx,s.ty=s.tx*e.b+s.ty*e.d+e.ty,s.tx=l,s.changedDirty=!0),0!=this.rotation&&(s=q._matrix,a=.017453292519943295*this.rotation,r=Math.cos(a),e=Math.sin(a),t=s.a*r-s.b*e,s.b=s.a*e+s.b*r,s.a=t,i=s.c*r-s.d*e,s.d=s.c*e+s.d*r,s.c=i,l=s.tx*r-s.ty*e,s.ty=s.tx*e+s.ty*r,s.tx=l,s.changedDirty=!0),(s=q._matrix).tx+=this.x,s.ty+=this.y,s.changedDirty=!0),null!=this.transform&&(t=q._matrix.a*this.transform.a+q._matrix.b*this.transform.c,q._matrix.b=q._matrix.a*this.transform.b+q._matrix.b*this.transform.d,q._matrix.a=t,i=q._matrix.c*this.transform.a+q._matrix.d*this.transform.c,q._matrix.d=q._matrix.c*this.transform.b+q._matrix.d*this.transform.d,q._matrix.c=i,l=q._matrix.tx*this.transform.a+q._matrix.ty*this.transform.c+this.transform.tx,q._matrix.ty=q._matrix.tx*this.transform.b+q._matrix.ty*this.transform.d+this.transform.ty,q._matrix.tx=l),null!=this.parent&&null==this.renderTarget&&(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD?(q._matrix.tx+=this.parent.matTX,q._matrix.ty+=this.parent.matTY):(l=(this.translatesOnly&&null==this.transform?(q._matrix.a=this.parent.matA,q._matrix.b=this.parent.matB,q._matrix.c=this.parent.matC,q._matrix.d=this.parent.matD):(t=q._matrix.a*this.parent.matA+q._matrix.b*this.parent.matC,q._matrix.b=q._matrix.a*this.parent.matB+q._matrix.b*this.parent.matD,q._matrix.a=t,i=q._matrix.c*this.parent.matA+q._matrix.d*this.parent.matC,q._matrix.d=q._matrix.c*this.parent.matB+q._matrix.d*this.parent.matD,q._matrix.c=i),q._matrix.tx*this.parent.matA+q._matrix.ty*this.parent.matC+this.parent.matTX),q._matrix.ty=q._matrix.tx*this.parent.matB+q._matrix.ty*this.parent.matD+this.parent.matTY,q._matrix.tx=l)),this.matA=q._matrix.a,this.matB=q._matrix.b,this.matC=q._matrix.c,this.matD=q._matrix.d,this.matTX=q._matrix.tx,this.matTY=q._matrix.ty,0<this.roundTranslation&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},computeTranslatesOnly:function(){this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1},doComputeMatrix:function(){this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1);var e,t,i,l,s,r=this.get_width(),a=this.get_height();this.translatesOnly?(q._matrix.tx+=this.x-this.anchorX*r,q._matrix.ty+=this.y-this.anchorY*a):((t=q._matrix).tx+=-this.anchorX*r,t.ty+=-this.anchorY*a,t.changedDirty=!0,1==this.scaleX&&1==this.scaleY||(r=this.scaleX,a=this.scaleY,(t=q._matrix).a*=r,t.b*=a,t.c*=r,t.d*=a,t.tx*=r,t.ty*=a,t.changedDirty=!0),0==this.skewX&&0==this.skewY||(t=q._matrix,r=.017453292519943295*this.skewX,a=.017453292519943295*this.skewY,(e=n._tmp).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0,e=Math.cos(a),a=Math.sin(a),i=-Math.sin(r),r=Math.cos(r),n._tmp.a=+e+-0*a,n._tmp.b=0*e+ +a,n._tmp.c=i+-0*r,n._tmp.d=0*i+ +r,i=t.a*(e=n._tmp).a+t.b*e.c,t.b=t.a*e.b+t.b*e.d,t.a=i,l=t.c*e.a+t.d*e.c,t.d=t.c*e.b+t.d*e.d,t.c=l,s=t.tx*e.a+t.ty*e.c+e.tx,t.ty=t.tx*e.b+t.ty*e.d+e.ty,t.tx=s,t.changedDirty=!0),0!=this.rotation&&(t=q._matrix,a=.017453292519943295*this.rotation,r=Math.cos(a),e=Math.sin(a),i=t.a*r-t.b*e,t.b=t.a*e+t.b*r,t.a=i,l=t.c*r-t.d*e,t.d=t.c*e+t.d*r,t.c=l,s=t.tx*r-t.ty*e,t.ty=t.tx*e+t.ty*r,t.tx=s,t.changedDirty=!0),(t=q._matrix).tx+=this.x,t.ty+=this.y,t.changedDirty=!0),null!=this.transform&&(i=q._matrix.a*this.transform.a+q._matrix.b*this.transform.c,q._matrix.b=q._matrix.a*this.transform.b+q._matrix.b*this.transform.d,q._matrix.a=i,l=q._matrix.c*this.transform.a+q._matrix.d*this.transform.c,q._matrix.d=q._matrix.c*this.transform.b+q._matrix.d*this.transform.d,q._matrix.c=l,s=q._matrix.tx*this.transform.a+q._matrix.ty*this.transform.c+this.transform.tx,q._matrix.ty=q._matrix.tx*this.transform.b+q._matrix.ty*this.transform.d+this.transform.ty,q._matrix.tx=s),null!=this.parent&&null==this.renderTarget&&(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD?(q._matrix.tx+=this.parent.matTX,q._matrix.ty+=this.parent.matTY):(s=(this.translatesOnly&&null==this.transform?(q._matrix.a=this.parent.matA,q._matrix.b=this.parent.matB,q._matrix.c=this.parent.matC,q._matrix.d=this.parent.matD):(i=q._matrix.a*this.parent.matA+q._matrix.b*this.parent.matC,q._matrix.b=q._matrix.a*this.parent.matB+q._matrix.b*this.parent.matD,q._matrix.a=i,l=q._matrix.c*this.parent.matA+q._matrix.d*this.parent.matC,q._matrix.d=q._matrix.c*this.parent.matB+q._matrix.d*this.parent.matD,q._matrix.c=l),q._matrix.tx*this.parent.matA+q._matrix.ty*this.parent.matC+this.parent.matTX),q._matrix.ty=q._matrix.tx*this.parent.matB+q._matrix.ty*this.parent.matD+this.parent.matTY,q._matrix.tx=s)),this.matA=q._matrix.a,this.matB=q._matrix.b,this.matC=q._matrix.c,this.matD=q._matrix.d,this.matTX=q._matrix.tx,this.matTY=q._matrix.ty,0<this.roundTranslation&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},_hits:function(e,n,t){if(!t){if(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget){var i=this.parent;if(null!=i)do{if(null!=i.asQuad&&i instanceof Un){var l=i;if(l.get_renderTexture()==this.computedRenderTarget&&(null==zt.matchedHitVisual||l.hitVisual==zt.matchedHitVisual))return l.visualInContentHits(this,e,n)}}while(null!=(i=i.parent));return!1}if(null!=zt.matchedHitVisual&&zt.matchedHitVisual!=this)return!1}this.matrixDirty&&this.computeMatrix();t=q._matrix;t.a=this.matA,t.b=this.matB,t.c=this.matC,t.d=this.matD,t.tx=this.matTX,t.ty=this.matTY,t.changedDirty=!0;var s,r=(t=q._matrix).a*t.d-t.b*t.c;return 0==r?(t.a=t.b=t.c=t.d=0,t.tx=-t.tx,t.ty=-t.ty):(s=t.d*(r=1/r),t.d=t.a*r,t.a=s,t.b*=-r,t.c*=-r,s=-t.a*t.tx-t.c*t.ty,t.ty=-t.b*t.tx-t.d*t.ty,t.tx=s),t.changedDirty=!0,this.hitTest(e,n,q._matrix)},hitTest:function(e,n,t){var i=e*t.a+n*t.c+t.tx,e=e*t.b+n*t.d+t.ty;return 0<=i&&i<this.get_width()&&0<=e&&e<this.get_height()},get_isHitVisual:function(){return 8==(8&this.flags)},set_isHitVisual:function(e){return this.flags=e?8|this.flags:-9&this.flags,e},interceptPointerDown:function(e,n,t,i,l){return!1},interceptPointerOver:function(e,n,t){return!1},screenToVisual:function(e,n,t,i){if(null==i&&(i=!0),this.matrixDirty&&this.computeMatrix(),i&&(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget)){var l=this.parent;if(null!=l)do{if(null!=l.asQuad&&l instanceof Un){var s,r,a=l;if(a.get_renderTexture()==this.computedRenderTarget)return a.screenToVisual(e,n,t),(o=q._matrix).a=this.matA,o.b=this.matB,o.c=this.matC,o.d=this.matD,o.tx=this.matTX,o.ty=this.matTY,o.changedDirty=!0,0==(h=(a=q._matrix).a*a.d-a.b*a.c)?(a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty):(u=a.d*(h=1/h),a.d=a.a*h,a.a=u,a.b*=-h,a.c*=-h,c=-a.a*a.tx-a.c*a.ty,a.ty=-a.b*a.tx-a.d*a.ty,a.tx=c),a.changedDirty=!0,a=t.x,s=t.y,t.x=a*(r=q._matrix).a+s*r.c+r.tx,void(t.y=a*(r=q._matrix).b+s*r.d+r.ty)}}while(null!=(l=l.parent))}(o=q._matrix).a=this.matA,o.b=this.matB,o.c=this.matC,o.d=this.matD,o.tx=this.matTX,o.ty=this.matTY,o.changedDirty=!0;0==(h=(o=q._matrix).a*o.d-o.b*o.c)?(o.a=o.b=o.c=o.d=0,o.tx=-o.tx,o.ty=-o.ty):(u=o.d*(h=1/h),o.d=o.a*h,o.a=u,o.b*=-h,o.c*=-h,c=-o.a*o.tx-o.c*o.ty,o.ty=-o.b*o.tx-o.d*o.ty,o.tx=c),o.changedDirty=!0;var h,u,c,o=q._matrix,o=(t.x=e*o.a+n*o.c+o.tx,q._matrix);t.y=e*o.b+n*o.d+o.ty},visualToScreen:function(e,n,t,i){if(null==i&&(i=!0),this.matrixDirty&&this.computeMatrix(),i&&(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget)){var l=this.parent;if(null!=l)do{if(null!=l.asQuad&&l instanceof Un){var s,r=l;if(r.get_renderTexture()==this.computedRenderTarget)return(a=q._matrix).a=this.matA,a.b=this.matB,a.c=this.matC,a.d=this.matD,a.tx=this.matTX,a.ty=this.matTY,a.changedDirty=!0,t.x=e*(s=q._matrix).a+n*s.c+s.tx,t.y=e*(s=q._matrix).b+n*s.d+s.ty,void r.visualToScreen(t.x,t.y,t)}}while(null!=(l=l.parent))}(a=q._matrix).a=this.matA,a.b=this.matB,a.c=this.matC,a.d=this.matD,a.tx=this.matTX,a.ty=this.matTY,a.changedDirty=!0;var a=q._matrix,a=(t.x=e*a.a+n*a.c+a.tx,q._matrix);t.y=e*a.b+n*a.d+a.ty},visualToTransform:function(e){this.matrixDirty&&this.computeMatrix(),e.a=this.matA,e.b=this.matB,e.c=this.matC,e.d=this.matD,e.tx=this.matTX,e.ty=this.matTY,e.changedDirty=!0},computeVisibility:function(){(this._lifecycleState<0||(null!=this.parent&&this.parent.visibilityDirty&&this.parent.computeVisibility(),this.computedVisible=this.visible,this.computedAlpha=this.alpha,this.computedVisible&&(null!=this.parent&&(this.parent.computedVisible||!this.parent.inheritAlpha&&this.parent.visible&&(null==this.parent.parent||this.parent.parent.computedVisible)||(this.computedVisible=!1),this.inheritAlpha)&&(this.computedAlpha*=this.parent.computedAlpha),0==this.computedAlpha)&&4!=this.blending))&&(this.computedVisible=!1),this.visibilityDirty=!1},computeClip:function(){this.renderTargetDirty&&this.computeRenderTarget(),null!=this.parent&&this.parent.clipDirty&&this.parent.computeClip(),this.computedClip=this.clip,null==this.computedClip&&null!=this.parent&&null!=this.parent.computedClip&&this.computedRenderTarget==this.parent.computedRenderTarget&&(this.computedClip=this.parent.computedClip),this.clipDirty=!1},computeTouchable:function(){null!=this.parent&&this.parent.touchableDirty&&this.parent.computeTouchable(),this.computedTouchable=this.touchable,this.computedTouchable&&null!=this.parent&&!this.parent.computedTouchable&&(this.computedTouchable=!1),this.touchableDirty=!1},computeRenderTarget:function(){null!=this.parent&&this.parent.renderTargetDirty&&this.parent.computeRenderTarget();this.computedRenderTarget;this.computedRenderTarget=this.renderTarget,null==this.computedRenderTarget&&null!=this.parent&&null!=this.parent.computedRenderTarget&&(this.computedRenderTarget=this.parent.computedRenderTarget),this.renderTargetDirty=!1},computeContent:function(){this.contentDirty=!1},autoChildrenDepth:function(e,n){null==n&&(n=1);var t=e=null==e?1:e;if(null!=this.children)for(var i=0,l=this.children.length;i<l;){var s=i++;this.children[s].set_depth(t),t+=n}},sortChildrenByDepth:function(){var e;null!=this.children&&0<this.children.length&&(e=this.children,jt.rec(e,0,e.length))},normalizeChildrenDepth:function(e,n){null==n&&(n=1),null==e&&(e=1),null!=this.children&&0<this.children.length&&(this.sortChildrenByDepth(),this.autoChildrenDepth())},hasIndirectParent:function(e){for(var n=this.parent;null!=n;){if(n==e)return!0;n=n.parent}return!1},firstParentWithClass:function(e){for(var n=this.parent;null!=n;){if(ys.__instanceof(n,e))return n;n=n.parent}return null},add:function(e){if(e==this)throw Q.thrown("A visual cannot add itself as child!");if(null==e)throw Q.thrown("A visual cannot add a null child!");if(e._lifecycleState<0)throw Q.thrown("A visual cannot add an already destroyed child!");if(e.parent!=this){if(he.app.hierarchyDirty=!0,null!=e.parent&&e.parent.remove(e),e.parent=this,e.visibilityDirty=!0,null!=e.children)for(var n=0,t=e.children.length;n<t;){var i=n++;if((f=e.children[i]).visibilityDirty=!0,null!=f.children)for(var l=0,s=f.children.length;l<s;){var r=l++;(p=f.children[r]).set_visibilityDirty(!0)}}if(e.matrixDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((f=e.children[i]).matrixDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){r=l++;(p=f.children[r]).set_matrixDirty(!0)}}if(e.renderTargetDirty=!0,e.clipDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((f=e.children[i]).clipDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){r=l++;(p=f.children[r]).set_clipDirty(!0)}}if(null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((f=e.children[i]).renderTargetDirty=!0,f.clipDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){r=l++;if((p=f.children[r]).clipDirty=!0,null!=p.children)for(var a=0,h=p.children.length;a<h;){var u=a++,c=p.children[u];if(c.clipDirty=!0,null!=c.children)for(var o=0,_=c.children.length;o<_;){var d=o++;c.children[d].set_clipDirty(!0)}}}if(null!=f.children)for(var b=0,g=f.children.length;b<g;){var O=b++;f.children[O].set_renderTargetDirty(!0)}}if(null==this.children&&(this.children=[]),this.children.push(e),this.clipDirty=!0,null!=this.children)for(n=0,t=this.children.length;n<t;){var f,i=n++;if((f=this.children[i]).clipDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){var p,r=l++;(p=f.children[r]).set_clipDirty(!0)}}}},remove:function(e){if(he.app.hierarchyDirty=!0,null!=this.children){if(-1!=this.children.indexOf(e)?this.children.splice(this.children.indexOf(e),1):he.app.logger.warning("Cannot remove visual "+V.string(e)+", index is -1",{fileName:"../../../../ceramic/runtime/src/ceramic/Visual.hx",lineNumber:2888,className:"ceramic.Visual",methodName:"remove"}),e.parent=null,e.visibilityDirty=!0,null!=e.children)for(var n=0,t=e.children.length;n<t;){var i=n++;if((f=e.children[i]).visibilityDirty=!0,null!=f.children)for(var l=0,s=f.children.length;l<s;){var r=l++;(p=f.children[r]).set_visibilityDirty(!0)}}if(e.matrixDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((f=e.children[i]).matrixDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){r=l++;(p=f.children[r]).set_matrixDirty(!0)}}if(e.renderTargetDirty=!0,e.clipDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((f=e.children[i]).clipDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){r=l++;(p=f.children[r]).set_clipDirty(!0)}}if(null!=e.children)for(n=0,t=e.children.length;n<t;){i=n++;if((f=e.children[i]).renderTargetDirty=!0,f.clipDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){r=l++;if((p=f.children[r]).clipDirty=!0,null!=p.children)for(var a=0,h=p.children.length;a<h;){var u=a++,c=p.children[u];if(c.clipDirty=!0,null!=c.children)for(var o=0,_=c.children.length;o<_;){var d=o++;c.children[d].set_clipDirty(!0)}}}if(null!=f.children)for(var b=0,g=f.children.length;b<g;){var O=b++;f.children[O].set_renderTargetDirty(!0)}}if(e.clipDirty=!0,null!=e.children)for(n=0,t=e.children.length;n<t;){var f,i=n++;if((f=e.children[i]).clipDirty=!0,null!=f.children)for(l=0,s=f.children.length;l<s;){var p,r=l++;(p=f.children[r]).set_clipDirty(!0)}}}},contains:function(e,n){null==n&&(n=!1);for(var t=e.parent;null!=t;){if(t==this)return!0;if(t=t.parent,!n)break}return!1},computeBounds:function(){if(null==this.children)this._width=0,this._height=0;else{for(var e=999999999,n=999999999,t=-999999999.9,i=-999999999.9,l=new p,s=0,r=this.children.length;s<r;){var a=s++;if((O=this.children[a]).visible)if(null!=O.asMesh)for(var h,u,c=O.asMesh.vertices,o=0,_=c.length;o<_;)h=c[o],u=c[o+1],O.visualToScreen(h,u,l,!1),l.x>t&&(t=l.x),l.y>i&&(i=l.y),l.x<e&&(e=l.x),l.y<n&&(n=l.y),o+=2;else O.visualToScreen(0,0,l,!1),l.x>t&&(t=l.x),l.y>i&&(i=l.y),l.x<e&&(e=l.x),l.y<n&&(n=l.y),O.visualToScreen(O.get_width(),0,l,!1),l.x>t&&(t=l.x),l.y>i&&(i=l.y),l.x<e&&(e=l.x),l.y<n&&(n=l.y),O.visualToScreen(0,O.get_height(),l,!1),l.x>t&&(t=l.x),l.y>i&&(i=l.y),l.x<e&&(e=l.x),l.y<n&&(n=l.y),O.visualToScreen(O.get_width(),O.get_height(),l,!1),l.x>t&&(t=l.x),l.y>i&&(i=l.y),l.x<e&&(e=l.x),l.y<n&&(n=l.y)}this.visualToScreen(0,0,l,!1);var d,b=l.x,g=l.y;if(this.screenToVisual(e,n,l,!1),e=l.x,n=l.y,this.screenToVisual(t,i,l,!1),(t=l.x)<e&&(d=e,e=t,t=d),(i=l.y)<n&&(d=n,n=i,i=d),this._width=t-e,this._height=i-n,this.set_anchorX(0!=this._width?-e/this._width:0),this.set_anchorY(0!=this._height?-n/this._height:0),this.screenToVisual(b,g,l,!1),this.set_x(l.x-this._width*this.anchorX),this.set_y(l.y-this._height*this.anchorY),this.matrixDirty=!0,null!=this.children)for(s=0,r=this.children.length;s<r;){var O,a=s++;if((O=this.children[a]).matrixDirty=!0,null!=O.children)for(var f=0,m=O.children.length;f<m;){o=f++;O.children[o].set_matrixDirty(!0)}}}},bindToNativeScreenSize:function(){var t=this;he.app.screen.reverseMatrix.onChange(this,$bind(this,this._bindToNativeScreenSizeCallback)),he.app.onPreUpdate(this,function(e){var n;t.get_width()==C.app.screenWidth&&t.get_height()==C.app.screenHeight||(n=C.app.screenHeight,t.set_width(C.app.screenWidth),t.set_height(n))}),this._bindToNativeScreenSizeCallback()},_bindToNativeScreenSizeCallback:function(){null==this.transform&&this.set_transform(new n);(e=this.transform).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0;var e=this.transform,t=C.app.screenDensity,i=C.app.screenDensity,e=(e.a*=t,e.b*=i,e.c*=t,e.d*=i,e.tx*=t,e.ty*=i,e.changedDirty=!0,this.transform),t=he.app.screen.reverseMatrix,i=e.a*t.a+e.b*t.c,i=(e.b=e.a*t.b+e.b*t.d,e.a=i,e.c*t.a+e.d*t.c),i=(e.d=e.c*t.b+e.d*t.d,e.c=i,e.tx*t.a+e.ty*t.c+t.tx),t=(e.ty=e.tx*t.b+e.ty*t.d+t.ty,e.tx=i,e.changedDirty=!0,this.transform.tx=this.transform.tx,this.transform.ty=this.transform.ty,this.transform.changedDirty=!0,C.app.screenHeight);this.set_width(C.app.screenWidth),this.set_height(t)},bindToScreenSize:function(e){null==e&&(e=1);var n=this;he.app.screen.onResize(this,function(){n._bindToScreenSizeCallback(e)}),this._bindToScreenSizeCallback(e)},_bindToScreenSizeCallback:function(e){var n=he.app.screen.height*e;this.set_width(he.app.screen.width*e),this.set_height(n)},bindToTargetSize:function(){he.app.screen.onResize(this,$bind(this,this._bindToTargetSizeCallback)),this._bindToTargetSizeCallback()},_bindToTargetSizeCallback:function(){var e=he.app.screen.height;this.set_width(he.app.screen.width),this.set_height(e)},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offPointerDown(),this.offPointerUp(),this.offPointerOver(),this.offPointerOut(),this.offFocus(),this.offBlur()},__class__:q,__properties__:$extend(l.prototype.__properties__,{set_isHitVisual:"set_isHitVisual",get_isHitVisual:"get_isHitVisual",set_active:"set_active",get_active:"get_active",set_shader:"set_shader",set_transform:"set_transform",set_translateY:"set_translateY",get_translateY:"get_translateY",set_translateX:"set_translateX",get_translateX:"get_translateX",set_alpha:"set_alpha",set_rotation:"set_rotation",set_roundTranslation:"set_roundTranslation",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_anchorY:"set_anchorY",set_anchorX:"set_anchorX",set_skewY:"set_skewY",set_skewX:"set_skewX",set_scaleY:"set_scaleY",set_scaleX:"set_scaleX",set_y:"set_y",set_x:"set_x",set_depthRange:"set_depthRange",set_depth:"set_depth",set_touchable:"set_touchable",set_visible:"set_visible",set_blending:"set_blending",set_renderTarget:"set_renderTarget",set_clipDirty:"set_clipDirty",set_touchableDirty:"set_touchableDirty",set_visibilityDirty:"set_visibilityDirty",set_renderTargetDirty:"set_renderTargetDirty",set_matrixDirty:"set_matrixDirty",set_contentDirty:"set_contentDirty",set_inheritAlpha:"set_inheritAlpha",set_clip:"set_clip",get_isPointerOver:"get_isPointerOver",get_isPointerDown:"get_isPointerDown"})}),(L["ceramic.Quad"]=r).__name__="ceramic.Quad",r.__super__=q,r.prototype=$extend(q.prototype,{color:null,get_transparent:function(){return 16==(16&this.flags)},set_transparent:function(e){return this.flags=e?16|this.flags:-17&this.flags,e},tile:null,set_tile:function(e){var n;return this.tile!=e&&(null==(this.tile=e)?this._texture!=(n=null)&&this._set_texture(n):(this._texture!=e.texture&&(n=e.texture,this._texture!=n)&&this._set_texture(n),this.frameX=e.frameX+e.edgeInset,this.frameY=e.frameY+e.edgeInset,n=e.frameWidth-2*e.edgeInset,this.frameWidth!=n&&-1!=(this.frameWidth=n)&&this.set_width(n),n=e.frameHeight-2*e.edgeInset,this.frameHeight!=n&&-1!=(this.frameHeight=n)&&this.set_height(n),this.set_width(e.frameWidth),this.set_height(e.frameHeight),n=e.rotateFrame,this.flags=n?32|this.flags:-33&this.flags)),e},get_texture:function(){return this._texture},set_texture:function(e){return this._texture!=e&&this._set_texture(e),e},_texture:null,_set_texture:function(e){var n;null!=this._texture&&(this._texture.offDestroy($bind(this,this.textureDestroyed)),null!=this._texture.asset)&&this._texture.asset.release(),null==(this._texture=e)?(this.frameX=-1,(this.frameY=-1)!=this.frameWidth&&(this.frameWidth=-1),-1!=this.frameHeight&&(this.frameHeight=-1)):(n=null!=this.tile?(this.frameX=this.tile.frameX,this.frameY=this.tile.frameY,n=this.tile.frameWidth,this.frameWidth!=n&&-1!=(this.frameWidth=n)&&this.set_width(n),this.tile.frameHeight):(this.frameX=0,this.frameY=0,n=e.width,this.frameWidth!=n&&-1!=(this.frameWidth=n)&&this.set_width(n),e.height),this.frameHeight!=n&&-1!=(this.frameHeight=n)&&this.set_height(n),e.onDestroy(this,$bind(this,this.textureDestroyed)),null!=e.asset&&e.asset.retain())},frameX:null,frameY:null,frameWidth:null,set_frameWidth:function(e){return this.frameWidth!=e&&-1!=(this.frameWidth=e)&&this.set_width(e),e},frameHeight:null,set_frameHeight:function(e){return this.frameHeight!=e&&-1!=(this.frameHeight=e)&&this.set_height(e),e},get_rotateFrame:function(){return 32==(32&this.flags)},set_rotateFrame:function(e){return this.flags=e?32|this.flags:-33&this.flags,e},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this._texture&&this._set_texture(null),this._lifecycleState=-1,q.prototype.destroy.call(this))},frame:function(e,n,t,i){this.frameX=e,this.frameY=n,this.frameWidth!=t&&-1!=(this.frameWidth=t)&&this.set_width(t),this.frameHeight!=i&&-1!=(this.frameHeight=i)&&this.set_height(i)},isRegular:function(){this.matrixDirty&&this.computeMatrix();var e=this.get_width(),n=this.get_height();return this.matC*n==0&&this.matB*e==0&&this.matC*n==0&&this.matB*e==0},computeMatrix:function(){null!=this.parent&&this.parent.matrixDirty&&this.parent.computeMatrix();var e,t,i,l,s=r._matrix,a=(s.a=1,s.b=0,s.c=0,s.d=1,s.tx=0,s.ty=0,s.changedDirty=!0,this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1),this.get_width()),h=this.get_height();this.translatesOnly?(q._matrix.tx+=this.x-this.anchorX*a,q._matrix.ty+=this.y-this.anchorY*h):((s=q._matrix).tx+=-this.anchorX*a,s.ty+=-this.anchorY*h,s.changedDirty=!0,1==this.scaleX&&1==this.scaleY||(a=this.scaleX,h=this.scaleY,(s=q._matrix).a*=a,s.b*=h,s.c*=a,s.d*=h,s.tx*=a,s.ty*=h,s.changedDirty=!0),0==this.skewX&&0==this.skewY||(s=q._matrix,a=.017453292519943295*this.skewX,h=.017453292519943295*this.skewY,(e=n._tmp).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0,e=Math.cos(h),h=Math.sin(h),t=-Math.sin(a),a=Math.cos(a),n._tmp.a=+e+-0*h,n._tmp.b=0*e+ +h,n._tmp.c=t+-0*a,n._tmp.d=0*t+ +a,t=s.a*(e=n._tmp).a+s.b*e.c,s.b=s.a*e.b+s.b*e.d,s.a=t,i=s.c*e.a+s.d*e.c,s.d=s.c*e.b+s.d*e.d,s.c=i,l=s.tx*e.a+s.ty*e.c+e.tx,s.ty=s.tx*e.b+s.ty*e.d+e.ty,s.tx=l,s.changedDirty=!0),0!=this.rotation&&(s=q._matrix,h=.017453292519943295*this.rotation,a=Math.cos(h),e=Math.sin(h),t=s.a*a-s.b*e,s.b=s.a*e+s.b*a,s.a=t,i=s.c*a-s.d*e,s.d=s.c*e+s.d*a,s.c=i,l=s.tx*a-s.ty*e,s.ty=s.tx*e+s.ty*a,s.tx=l,s.changedDirty=!0),(s=q._matrix).tx+=this.x,s.ty+=this.y,s.changedDirty=!0),null!=this.transform&&(t=q._matrix.a*this.transform.a+q._matrix.b*this.transform.c,q._matrix.b=q._matrix.a*this.transform.b+q._matrix.b*this.transform.d,q._matrix.a=t,i=q._matrix.c*this.transform.a+q._matrix.d*this.transform.c,q._matrix.d=q._matrix.c*this.transform.b+q._matrix.d*this.transform.d,q._matrix.c=i,l=q._matrix.tx*this.transform.a+q._matrix.ty*this.transform.c+this.transform.tx,q._matrix.ty=q._matrix.tx*this.transform.b+q._matrix.ty*this.transform.d+this.transform.ty,q._matrix.tx=l),null!=this.parent&&null==this.renderTarget&&(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD?(q._matrix.tx+=this.parent.matTX,q._matrix.ty+=this.parent.matTY):(l=(this.translatesOnly&&null==this.transform?(q._matrix.a=this.parent.matA,q._matrix.b=this.parent.matB,q._matrix.c=this.parent.matC,q._matrix.d=this.parent.matD):(t=q._matrix.a*this.parent.matA+q._matrix.b*this.parent.matC,q._matrix.b=q._matrix.a*this.parent.matB+q._matrix.b*this.parent.matD,q._matrix.a=t,i=q._matrix.c*this.parent.matA+q._matrix.d*this.parent.matC,q._matrix.d=q._matrix.c*this.parent.matB+q._matrix.d*this.parent.matD,q._matrix.c=i),q._matrix.tx*this.parent.matA+q._matrix.ty*this.parent.matC+this.parent.matTX),q._matrix.ty=q._matrix.tx*this.parent.matB+q._matrix.ty*this.parent.matD+this.parent.matTY,q._matrix.tx=l)),this.matA=q._matrix.a,this.matB=q._matrix.b,this.matC=q._matrix.c,this.matD=q._matrix.d,this.matTX=q._matrix.tx,this.matTY=q._matrix.ty,0<this.roundTranslation&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},textureDestroyed:function(e){null!=this._texture&&this._set_texture(null),this.set_tile(null)},__class__:r,__properties__:$extend(q.prototype.__properties__,{set_rotateFrame:"set_rotateFrame",get_rotateFrame:"get_rotateFrame",set_frameHeight:"set_frameHeight",set_frameWidth:"set_frameWidth",set_texture:"set_texture",get_texture:"get_texture",set_tile:"set_tile",set_transparent:"set_transparent",get_transparent:"get_transparent"})}),(L["ceramic.Layer"]=s).__name__="ceramic.Layer",s.__super__=r,s.prototype=$extend(r.prototype,{__cbOnResize:null,__cbOnceResize:null,__cbOnOwnerUnbindResize:null,__cbOnceOwnerUnbindResize:null,emitResize:function(e,n){this.willEmitResize(e,n);var t=0;if(null!=this.__cbOnResize&&(t+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(t+=this.__cbOnceResize.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnResize)for(var r=0,a=this.__cbOnResize.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnResize[h],++s):--t}if(null!=this.__cbOnceResize){for(var u=null,c=null,r=0,a=this.__cbOnceResize.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceResize[h],this.__cbOnceResize[h]=null,o=this.__cbOnceOwnerUnbindResize[h],(this.__cbOnceOwnerUnbindResize[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindResize[h]),c.push(this.__cbOnceResize[h]))}this.__cbOnceOwnerUnbindResize=u,this.__cbOnceResize=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l),l=null}this.didEmitResize(e,n)},onResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event resize because owner is destroyed!");var l=function(e){null!=t&&(i.offResize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(t)},onceResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event resize because owner is destroyed!");var l=function(e){null!=t&&(i.offResize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(t)},offResize:function(e){if(null!=e){var n;null!=this.__cbOnResize&&-1!=(n=this.__cbOnResize.indexOf(e))&&(this.__cbOnResize.splice(n,1),null!=(s=this.__cbOnOwnerUnbindResize[n])&&s(),this.__cbOnOwnerUnbindResize.splice(n,1)),null!=this.__cbOnceResize&&-1!=(n=this.__cbOnceResize.indexOf(e))&&(this.__cbOnceResize.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindResize[n])&&s(),this.__cbOnceOwnerUnbindResize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindResize[l])&&s()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindResize[l])&&s()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&0<this.__cbOnResize.length||null!=this.__cbOnceResize&&0<this.__cbOnceResize.length},sizeDirty:null,emitResizeIfNeeded:function(){this._lifecycleState<0||!this.sizeDirty||(this.sizeDirty=!1,this.emitResize(this.get_width(),this.get_height()))},willEmitResize:function(e,n){},didEmitResize:function(e,n){},set_width:function(e){return this._width==e||(r.prototype.set_width.call(this,e),this.sizeDirty)||(this.sizeDirty=!0,he.app._onceImmediate($bind(this,this.emitResizeIfNeeded))),e},set_height:function(e){return this._height==e||(r.prototype.set_height.call(this,e),this.sizeDirty)||(this.sizeDirty=!0,he.app._onceImmediate($bind(this,this.emitResizeIfNeeded))),e},unbindEvents:function(){r.prototype.unbindEvents.call(this),this.offResize()},__class__:s}),(L["ceramic.Preloadable"]=t).__name__="ceramic.Preloadable",t.__isInterface__=!0,t.prototype={requestPreloadUpdate:null,__class__:t},(L["tracker.Observable"]=u).__name__="tracker.Observable",u.__isInterface__=!0,(L["ceramic.Scene"]=v).__name__="ceramic.Scene",v.__interfaces__=[t,u],v.__super__=s,v.prototype=$extend(s.prototype,{__cbOnObservedDirty:null,__cbOnceObservedDirty:null,__cbOnOwnerUnbindObservedDirty:null,__cbOnceOwnerUnbindObservedDirty:null,emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnObservedDirty)for(var r=0,a=this.__cbOnObservedDirty.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnObservedDirty[h],++s):--t}if(null!=this.__cbOnceObservedDirty){for(var u=null,c=null,r=0,a=this.__cbOnceObservedDirty.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,o=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindObservedDirty[h]),c.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=u,this.__cbOnceObservedDirty=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindObservedDirty[n])&&s(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindObservedDirty[n])&&s(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindObservedDirty[l])&&s()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindObservedDirty[l])&&s()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},observedDirty:null,_assets:null,_assetsProgress:null,_assetsTotal:null,_assetsFailure:null,__cbOnReplace:null,__cbOnceReplace:null,__cbOnOwnerUnbindReplace:null,__cbOnceOwnerUnbindReplace:null,emitReplace:function(e){var n=0;if(null!=this.__cbOnReplace&&(n+=this.__cbOnReplace.length),null!=this.__cbOnceReplace&&(n+=this.__cbOnceReplace.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnReplace)for(var s=0,r=this.__cbOnReplace.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnReplace[a],++l):--n}if(null!=this.__cbOnceReplace){for(var h=null,u=null,s=0,r=this.__cbOnceReplace.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceReplace[a],this.__cbOnceReplace[a]=null,c=this.__cbOnceOwnerUnbindReplace[a],(this.__cbOnceOwnerUnbindReplace[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindReplace[a]),u.push(this.__cbOnceReplace[a]))}this.__cbOnceOwnerUnbindReplace=h,this.__cbOnceReplace=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onReplace:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replace because owner is destroyed!");var l=function(e){null!=t&&(i.offReplace(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReplace&&(this.__cbOnOwnerUnbindReplace=[]),this.__cbOnOwnerUnbindReplace.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReplace&&(this.__cbOnOwnerUnbindReplace=[]),this.__cbOnOwnerUnbindReplace.push(null);null==this.__cbOnReplace&&(this.__cbOnReplace=[]),this.__cbOnReplace.push(t)},onceReplace:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replace because owner is destroyed!");var l=function(e){null!=t&&(i.offReplace(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReplace&&(this.__cbOnceOwnerUnbindReplace=[]),this.__cbOnceOwnerUnbindReplace.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReplace&&(this.__cbOnceOwnerUnbindReplace=[]),this.__cbOnceOwnerUnbindReplace.push(null);null==this.__cbOnceReplace&&(this.__cbOnceReplace=[]),this.__cbOnceReplace.push(t)},offReplace:function(e){if(null!=e){var n;null!=this.__cbOnReplace&&-1!=(n=this.__cbOnReplace.indexOf(e))&&(this.__cbOnReplace.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReplace[n])&&s(),this.__cbOnOwnerUnbindReplace.splice(n,1)),null!=this.__cbOnceReplace&&-1!=(n=this.__cbOnceReplace.indexOf(e))&&(this.__cbOnceReplace.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReplace[n])&&s(),this.__cbOnceOwnerUnbindReplace.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplace){for(var t=0,i=this.__cbOnOwnerUnbindReplace.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReplace[l])&&s()}this.__cbOnOwnerUnbindReplace=null}if(null!=this.__cbOnceOwnerUnbindReplace){for(t=0,i=this.__cbOnceOwnerUnbindReplace.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReplace[l])&&s()}this.__cbOnceOwnerUnbindReplace=null}this.__cbOnReplace=null,this.__cbOnceReplace=null}},listensReplace:function(){return null!=this.__cbOnReplace&&0<this.__cbOnReplace.length||null!=this.__cbOnceReplace&&0<this.__cbOnceReplace.length},statusAutoruns:null,get_status:function(){var e,n,t=this.unobservedStatus;return null!=M.current&&(e=M.current,null!=(n=this.statusAutoruns)||(n=M.getAutorunArray(),null!=(this.statusAutoruns=n)))&&e.bindToAutorunArray(n),t},set_status:function(e){var n=this.unobservedStatus;return n!=(this.unobservedStatus=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitStatusChange(e,n),null!=(n=this.statusAutoruns))&&(this.statusAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateStatus:function(){var e=this.unobservedStatus,e=(this.emitStatusChange(e,e),this.statusAutoruns);null!=e&&(this.statusAutoruns=null,M.invalidateAutorunArray(e))},unobservedStatus:null,__cbOnStatusChange:null,__cbOnceStatusChange:null,__cbOnOwnerUnbindStatusChange:null,__cbOnceOwnerUnbindStatusChange:null,emitStatusChange:function(e,n){var t=0;if(null!=this.__cbOnStatusChange&&(t+=this.__cbOnStatusChange.length),null!=this.__cbOnceStatusChange&&(t+=this.__cbOnceStatusChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnStatusChange)for(var r=0,a=this.__cbOnStatusChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnStatusChange[h],++s):--t}if(null!=this.__cbOnceStatusChange){for(var u=null,c=null,r=0,a=this.__cbOnceStatusChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceStatusChange[h],this.__cbOnceStatusChange[h]=null,o=this.__cbOnceOwnerUnbindStatusChange[h],(this.__cbOnceOwnerUnbindStatusChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindStatusChange[h]),c.push(this.__cbOnceStatusChange[h]))}this.__cbOnceOwnerUnbindStatusChange=u,this.__cbOnceStatusChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event statusChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStatusChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(null);null==this.__cbOnStatusChange&&(this.__cbOnStatusChange=[]),this.__cbOnStatusChange.push(t)},onceStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event statusChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStatusChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(null);null==this.__cbOnceStatusChange&&(this.__cbOnceStatusChange=[]),this.__cbOnceStatusChange.push(t)},offStatusChange:function(e){if(null!=e){var n;null!=this.__cbOnStatusChange&&-1!=(n=this.__cbOnStatusChange.indexOf(e))&&(this.__cbOnStatusChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindStatusChange[n])&&s(),this.__cbOnOwnerUnbindStatusChange.splice(n,1)),null!=this.__cbOnceStatusChange&&-1!=(n=this.__cbOnceStatusChange.indexOf(e))&&(this.__cbOnceStatusChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindStatusChange[n])&&s(),this.__cbOnceOwnerUnbindStatusChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStatusChange){for(var t=0,i=this.__cbOnOwnerUnbindStatusChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindStatusChange[l])&&s()}this.__cbOnOwnerUnbindStatusChange=null}if(null!=this.__cbOnceOwnerUnbindStatusChange){for(t=0,i=this.__cbOnceOwnerUnbindStatusChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindStatusChange[l])&&s()}this.__cbOnceOwnerUnbindStatusChange=null}this.__cbOnStatusChange=null,this.__cbOnceStatusChange=null}},listensStatusChange:function(){return null!=this.__cbOnStatusChange&&0<this.__cbOnStatusChange.length||null!=this.__cbOnceStatusChange&&0<this.__cbOnceStatusChange.length},get_assets:function(){var i=this;return null==this._assets&&0<=this._lifecycleState&&(this._assets=new Re,this._assets.loadMethod=1,this._assets.scheduleMethod=1,this._assets.delayBetweenXAssets=4,this._assets.onProgress(this,function(e,n,t){i._assetsProgress=e,i._assetsTotal=n}),this._assets.onceComplete(this,function(e){e||(i._assetsFailure=!0)})),this._assets},set_assets:function(e){return this._assets=e},isRootScene:null,autoUpdate:null,autoUpdateWhenInactive:null,paused:null,_boot:function(){var e,n;0!=this.get_status()?(e=he.app.logger,n=this.get_status(),e.warning("Scene already booted! (status: "+(null==n?"null":Gt.toString(n))+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:98,className:"ceramic.Scene",methodName:"_boot"})):(this.set_status(1),this.preload(),this.set_status(2),null!=this._assets&&this._assets.hasAnythingToLoad()?(this._assets.onceComplete(this,$bind(this,this._handleAssetsComplete)),this._assets.load(!1,{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:109,className:"ceramic.Scene",methodName:"_boot"})):this.load($bind(this,this.internalCreate)))},internalCreate:function(){this.set_status(3);try{this.create(),this.fadeIn($bind(this,this._fadeInDone))}catch(e){Al.lastError=e;var n=Q.caught(e).unwrap();mn.handleUncaughtError(n)}},_fadeInDone:function(){},_handleAssetsComplete:function(e){e?he.app._onceImmediateWithOwner(this,$bind(this,this.internalLoad)):he.app.logger.error("Failed to load all scene assets!",{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:143,className:"ceramic.Scene",methodName:"_handleAssetsComplete"})},internalLoad:function(){this.load($bind(this,this.internalCreate))},willEmitResize:function(e,n){this.resize(e,n)},preload:function(){},load:function(e){0<=this._lifecycleState&&e()},create:function(){},ready:function(){},update:function(e){},resize:function(e,n){},_fadeIn:function(e){e()},_fadeOut:function(e){e()},fadeIn:function(e){var n=this;this.set_status(4),this._fadeIn(function(){n.set_status(5),0<=n._lifecycleState&&(n.ready(),e())})},fadeOut:function(e){var n=this;this.set_status(6),this._fadeOut(function(){n.set_status(7),0<=n._lifecycleState&&e()})},isReady:function(){switch(this.get_status()){case 0:case 1:case 2:case 3:case 4:return!1;case 5:return!0;case 6:case 7:return!1}},scheduleOnceReady:function(t,i){var l=this;if(this._lifecycleState<0)return he.app.logger.warning("Cannot schedule callback on destroyed scene",{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:299,className:"ceramic.Scene",methodName:"scheduleOnceReady"}),!1;switch(this.get_status()){case 0:case 1:case 2:case 3:case 4:return this.onceStatusChange(t,function(e,n){l.scheduleOnceReady(t,i)}),!0;case 5:return i(),!0;case 6:case 7:var e=he.app.logger,n=this.get_status();return e.warning("Cannot schedule callback on scene with status: "+(null==n?"null":Gt.toString(n)),{fileName:"../../../../ceramic/runtime/src/ceramic/Scene.hx",lineNumber:316,className:"ceramic.Scene",methodName:"scheduleOnceReady"}),!1}},requestPreloadUpdate:function(e){var n=1<=this._assetsTotal?this._assetsTotal:1;if(this._assetsFailure)e(this._assetsProgress,n,-1);else switch(this.get_status()){case 0:e(0,0,0);break;case 1:case 2:e(this._assetsProgress,n,1);break;case 3:e(n,n,1);break;case 4:case 5:case 6:case 7:e(n,n,2)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,h.remove(Ht.get_shared().all,this),null!=this._assets&&(this._assets.destroy(),this._assets=null),this._lifecycleState=-1,s.prototype.destroy.call(this))},unbindEvents:function(){s.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offStatusChange(),this.offReplace()},__class__:v,__properties__:$extend(s.prototype.__properties__,{set_assets:"set_assets",get_assets:"get_assets",set_status:"set_status",get_status:"get_status"})}),(L.MainScene=w).__name__="MainScene",w.__super__=v,w.prototype=$extend(v.prototype,{ldtkName:null,preload:function(){this.get_assets().add(this.ldtkName)},create:function(){var e=this,n=null,t=bi.ldtk(this.get_assets(),this.ldtkName).worlds[0].levels[0];t.ensureLoaded(function(){(n=new oi).set_depth(1),n.set_tilemapData(t.ceramicTilemap),e.add(n),t.createVisualsForEntities(n)})},__class__:w}),Math.__name__="Math";function A(){this.b=""}function B(){}function D(){}function F(e){this.nodeType=e,this.children=[],this.attributeMap=new z}function G(){}function J(e,n,t,i,l,s){this.chunk=null==e?new pe(!0):e,null!=n&&(e.celType=n),this.frame=t,this.set_layerIndex(i),1!=n&&null!=l&&null!=s&&this.init(l,s)}function X(e,n){this.flags=0,null!=e&&(this.name=e,this.set_hasName(!0)),null!=n&&(this.red=n>>24&255,this.green=n>>16&255,this.blue=n>>8&255,this.alpha=255&n)}function Z(){}function da(){}function fa(){}function ga(){this.loadedAudioRetainCount=new z,this.loadedAudioResources=new z,this.loadingAudioCallbacks=new z,this.nextSamplesBufferIndex=0}function ka(){}function la(){this.clipboard=new Le,this.textInput=new Ke,this.input=new Ge,this.screen=new He,this.shaders=new ze,this.textures=new Ye,this.binaries=new Be,this.texts=new Xe,this.draw=new K,this.audio=new ga,this.info=new We,this.io=new Ne}function ma(){}function oa(){}function pa(e){this.gamepadsEnabled=!0,this.gamepadGyroValues=new Kn,this.gamepadAxisValues=new Bn,this.gamepadPressedValues=new rn,this.gamepadButtonMapping=new rn,this.gamepadAxisToButton=new rn,this.swapXyGamepads=new rn(16,.5,!1),this.swapAbGamepads=new rn(16,.5,!1),this.removedGamepads=new rn(16,.5,!1),this.activeGamepads=new rn(16,.5,!1),this.mouseY=0,this.mouseX=0,this.mouseDownButtons=new rn(16,.5,!1),this.touchIndexes=new rn,this.touches=new rn,this.lastHeight=-1,this.lastWidth=-1,this.lastDensity=-1,this.handleReady=e,this.configureGamepadMapping()}function qa(){}function sa(){}function ua(){}function va(){}function xa(){}function za(){}function Ba(){}function Ca(){}function Ea(){this.id=null}function Fa(){this.gpuShader=null,this.uniforms=null,this.textures=null,this.attributes=null,this.fragSource=null,this.vertSource=null,Ea.call(this)}function Ga(){this.isBatchingMultiTexture=!1,this.customAttributes=null,Fa.call(this)}function Ha(){}function Ja(){}function La(){}function Oa(){}function Ra(){}function Sa(){this.bestY=-1,this.bestX=-1,this.bestContactScore=-1,this.bestLongSideFit=-1,this.bestShortSideFit=-1,this.bestAreaFit=-1,this.bestNode=null}function Ta(e,n,t){this.rect=e,this.primaryScore=n,this.secondaryScore=t}function Ua(e,n,t){null==t&&(t=!0),null==n&&(n=0),null==e&&(e=0),this._bestFitPosition=new Sa,this.freeRectangles=[],this.usedRectangles=[],this.binWidth=e,this.binHeight=n,this.binAllowFlip=t,t=new Ve(0,0,e,n),this.freeRectangles.push(t)}function Va(e,n){this.width=e,this.height=n}function Xa(){this.rects=[]}function a0(){}function b0(e,n,t,i,s,r,a,h,u,c){this.imageAsset=null,this.atlasPacker=null,l.call(this),this.ase=e,this.palette=n,this.tags=t,this.slices=i,this.layers=s,this.duration=r,this.prefix=a,this.frames=h,null!=u&&(this.atlasPacker=u),null!=c&&(this.imageAsset=c)}function c0(e,n,t,i,l,s,r,a,h,u,c,o,_){this.packedHeight=0,this.packedWidth=0,this.offsetY=0,this.offsetX=0,this.duplicateSameOffset=!1,this.duplicateOfIndex=-1,this.hashIndex=-1,this.hash=null,this.pixels=null,this.tags=[],this.aseFrame=e,this.index=n,this.duration=t,null!=i&&(this.tags=i),null!=l&&(this.pixels=l),null!=s&&(this.hash=s),null!=r&&(this.hashIndex=r),null!=a&&(this.duplicateOfIndex=a),null!=h&&(this.duplicateSameOffset=h),null!=u&&(this.offsetX=u),null!=c&&(this.offsetY=c),null!=o&&(this.packedWidth=o),null!=_&&(this.packedHeight=_)}function d0(e,n,t){this.pixels=null,this.celChunk=null,this.layer=e,null!=n&&(this.celChunk=n),null!=t&&(this.pixels=t)}function e0(e,n){this.entries=e,this.chunk=n}function f0(){}function h0(){}function i0(e,n,t,i){this.customExtensions=null,this.hotReload=!1,this.handleTexturesDensityChange=!1,this.unobservedStatus=Je.NONE,this.statusAutoruns=null,this.refCount=0,this.assets=null,this.density=1,this.observedDirty=!1,l.call(this),this.kind=e,this.options=null!=i?i:{},this.set_name(n),this.set_variant(t),this.computePath()}function p0(){this.paramsAcquired=!1,this.paramsChanged=!1,this.params=[],this.active=!0,this.bus=-1,l.call(this),this.filterId=p0._nextFilterId++,this._initDefaultParamValues()}function q0(e,n){this.params=[],this.active=!0,this.bus=-1,this.filterId=e,this.bus=n}function s0(){}function t0(e){null==e&&(e=.1),this.pending=[],this.stop=!1,this.runsInBackground=!1,this.checkInterval=.1,l.call(this),this.checkInterval=.1}function u0(e,n,t,i){if(this.quadratic=!1,this.cached=!1,this.linearEasing=!1,this.cached&&this.removeFromCache(this.mX1,this.mY1,this.mX2,this.mY2),null==t||null==i?(this.quadratic=!0,this.mQuadraticX1=e,this.mQuadraticX2=t,this.mX1=u0.TWO_THIRD*e,this.mY1=u0.TWO_THIRD*n,this.mX2=1+u0.TWO_THIRD*(e-1),this.mY2=1+u0.TWO_THIRD*(n-1)):(this.quadratic=!1,this.mX1=e,this.mY1=n,this.mX2=t,this.mY2=i),this.mX1==this.mY1&&this.mX2==this.mY2)this.linearEasing=!0;else{this.linearEasing=!1,null==this.sampleValues&&(this.sampleValues=[]);for(var l=0,s=u0.SPLINE_TABLE_SIZE;l<s;){var r=l++,a=r*u0.SAMPLE_STEP_SIZE,h=this.mX1,u=this.mX2;this.sampleValues[r]=(((1-3*u+3*h)*a+(3*u-6*h))*a+3*h)*a}}}function w0(e,n){if(this._preRenderingPages=null,this.preRenderedPages=null,this.pageShaders=null,this.pages=new Kn(16,.5,!0),l.call(this),this.set_fontData(e),null==e)throw Q.thrown("BitmapFont: fontData is null");if(null==n)throw Q.thrown("BitmapFont: pages is null");null!=e.distanceField&&(this.pageShaders=new Hl);for(var t=0,i=e.pages;t<i.length;){var s,r=i[t],a=(++t,r.file),a=(null!=e.path&&0<e.path.length&&"."!=e.path&&(a=At.join([e.path,r.file])),n.h[a]);if(null==a)throw Q.thrown("BitmapFont: missing texture for file "+r.file);this.pages.set(r.id,a),null!=e.distanceField&&(s=he.app.assets.shader("shader:msdf").clone(),he.app.backend.shaders,s.backendItem.uniforms.setFloat("pxRange",e.distanceField.distanceRange),he.app.backend.shaders,s.backendItem.uniforms.setVector2("texSize",a.width*a.density,a.height*a.density),this.pageShaders.h[r.id]=s)}}function x0(e,n,t,i,l,s,r,a,h){this.id=e,this.x=n,this.y=t,this.width=i,this.height=l,this.xOffset=s,this.yOffset=r,this.xAdvance=a,this.page=h}function y0(e,n,t,i,l,s,r,a,h,u){this.face=e,this.path=n,this.pointSize=t,this.baseSize=i,this.chars=l,this.charCount=s,this.distanceField=r,this.pages=a,this.lineHeight=h,this.kernings=u}function z0(e,n){this.id=e,this.file=n}function A0(e,n){this.fieldType=e,this.distanceRange=n}function B0(){}function E0(e,n){this.index=E0._nextIndex++,this.id=null!=e?e:"id"+E0._nextId++,this.name=n}function H0(){}function J0(){}function S0(){}function T0(){}function W0(e){this.initializerName=null,this._data=null,l.call(this),null!=e&&this.set_data(e)}function Y0(){}function Z0(){}function gb(e){null!=e&&(this.value=e)}function hb(e){this.fragmentComponents=null,this.ready=!1,this.timeline=null,this.pendingLoads=0,this.autoUpdateTimeline=!0,this.resizable=!1,this.fragmentData=null,this.fps=30,this.assets=null,s.call(this),this.assets=e,this.entities=[],this.items=[]}function lb(){}function mb(){this.glyphAdvance=-1,this.glyphY=-1,this.glyphX=-1,this.code=-1,this.line=-1,this.posInLine=-1,this.index=-1,this.glyph=null,this.char=null,r.call(this)}function Ib(){}function Lb(e,n,t){if(l.call(this),this.loadExternalLevelData=n,this.loadLevelCeramicTilemap=t,null!=e){Lb._rootJson=e,Lb._entityInstances=[];var i,s=e.toc;if(null!=s){for(var r=[],a=0,h=s.length;a<h;){var u=a++;r.push(new jn(this,s[u]))}i=r}else i=[];this.toc=i,this.version=e.jsonVersion,this.iid=e.iid,this.bgColor=E.fromString(e.bgColor),this.defs=new Jn(this,e.defs),this.externalLevels=e.externalLevels,this.worlds=[];var n=e.levels,c=(null!=n&&0<n.length&&((t={}).iid=e.dummyWorldIid,t.identifier="World",t.levels=n,t.worldGridWidth=e.worldGridWidth,t.worldGridHeight=e.worldGridHeight,t.worldLayout=e.worldLayout,this.worlds.push(new $n(this,t))),e.worlds);if(null!=c&&0<c.length)for(r=0,a=c.length;r<a;){u=r++;this.worlds.push(new $n(this,c[u]))}Lb._rootJson=null,Lb._entityInstances=null}}function r1(){this.uvs=[],this.texture=null,this.floatColors=null,this.colors=[],this.indices=[],this.vertices=[],this.complexHit=!1,this.customFloatAttributesSize=0,this.colorMapping=0,q.call(this),this.asMesh=this}function L1(){this.lateUpdateOrder=0,this.earlyUpdateOrder=0,this.autoUpdate=!0,this.name=null,l.call(this),he.app.systems.addSystem(this)}function Q1(e,n){this.usedTextures=null,this.textureSlots=null,l.call(this),this.backendItem=e;var t=[new Vt(3,"vertexPosition"),new Vt(2,"vertexTCoord"),new Vt(4,"vertexColor")];if(null!=n)for(var i=0,s=n.length;i<s;){var r=n[i++];t.push(r)}this.attributes=t,this.customAttributes=n,he.app.backend.shaders;var a=0,h=e.customAttributes;if(null!=h)for(i=0,s=h.length;i<s;)a+=h[i++].size;this.customFloatAttributesSize=a}function T1(){}function W1(e){this.pitch=1,this.pan=0,this.volume=.5,this.group=0,this.bus=0,l.call(this),this.backendItem=e}function cc(){}function dc(){this.asset=null,this.regions=[],this.pages=[],l.call(this)}function ec(){this.pages=[],this.pendingRegions=[],this.filter=ui.LINEAR,this.spacing=1,this.atlas=null,l.call(this)}function nc(e,n,t,i,s,r){null==r&&(r=1),null==s&&(s=16),null==i&&(i=16),null==t&&(t=-1),null==n&&(n=-1),this.maxPixelTextureHeight=0,this.maxPixelTextureWidth=0,this.numRows=0,this.numCols=0,this.nextPacker=null,l.call(this),this.padWidth=i,this.padHeight=s,this.margin=r,this.maxPixelTextureWidth=n,this.maxPixelTextureHeight=t,-1==n&&(n=2048/he.app.screen.get_texturesDensity()|0),-1==t&&(t=2048/he.app.screen.get_texturesDensity()|0);for(var n=0|Math.min(n,2048/he.app.screen.get_texturesDensity()),t=0|Math.min(t,2048/he.app.screen.get_texturesDensity()),a=(this.texture=new Ft(n,t),e?(this.texture.autoRender=!0,this.texture.clearOnRender=!0):(this.texture.autoRender=!1,this.texture.clearOnRender=!1),this.areas=[],this.texture.width),h=this.texture.height,u=r,c=r;c+s<h;){for(;u+i<a;)this.areas.push(null),u+=i+2*r,0==this.numRows&&this.numCols++;u=0,c+=s+2*r,this.numRows++}}function pc(e,n,t,i){this.index=e,this.rotation=n,this.y0=t,this.y1=i}function rc(e,n,t){this.ldtkExternalSources=null,this.tsxRawData=null,this.unobservedTilemapData=null,this.tilemapDataAutoruns=null,this.unobservedLdtkData=null,this.ldtkDataAutoruns=null,this.unobservedTmxMap=null,this.tmxMapAutoruns=null,i0.call(this,"tilemap",e,n,t),this.set_handleTexturesDensityChange(!1),this.assets=new Re}function sc(){}function tc(){this._serializeId=xs.uniqueId(),this.dirty=!1,this.observedDirty=!1,l.call(this)}function uc(){this.unobservedLayers=[],this.layersAutoruns=null,this.unobservedTilesets=[],this.tilesetsAutoruns=null,this.computedOnceMaxTileHeight=!1,this.maxTileHeightAutoruns=null,this.computedOnceMaxTileWidth=!1,this.maxTileWidthAutoruns=null;var e=0,n=-1;this.unobservedBackgroundColor=n&16777215|(255<(e=null==e?255:e)?255:e<0?0:e)<<24,this.backgroundColorAutoruns=null,this.unobservedStaggerIndex=pi.ODD,this.staggerIndexAutoruns=null,this.unobservedStaggerAxis=fi.AXIS_X,this.staggerAxisAutoruns=null,this.unobservedHexSideLength=-1,this.hexSideLengthAutoruns=null,this.unobservedRenderOrder=Oi.RIGHT_DOWN,this.renderOrderAutoruns=null,this.unobservedHeight=-1,this.heightAutoruns=null,this.unobservedWidth=-1,this.widthAutoruns=null,this.unobservedOrientation=di.ORTHOGONAL,this.orientationAutoruns=null,this.unobservedName=null,this.nameAutoruns=null,this.unobservedLdtkLevel=null,this.ldtkLevelAutoruns=null,tc.call(this)}function wc(){this.unobservedTileHeight=-1,this.tileHeightAutoruns=null,this.unobservedTileWidth=-1,this.tileWidthAutoruns=null,this.unobservedShouldRenderTiles=!0,this.shouldRenderTilesAutoruns=null,this.computedOnceHasTiles=!1,this.hasTilesAutoruns=null,this.unobservedComputedTilesOffsetY=null,this.computedTilesOffsetYAutoruns=null,this.unobservedComputedTilesOffsetX=null,this.computedTilesOffsetXAutoruns=null,this.unobservedComputedTilesAlpha=null,this.computedTilesAlphaAutoruns=null,this.unobservedComputedTiles=null,this.computedTilesAutoruns=null,this.unobservedTilesOffsetY=null,this.tilesOffsetYAutoruns=null,this.unobservedTilesOffsetX=null,this.tilesOffsetXAutoruns=null,this.unobservedTilesAlpha=null,this.tilesAlphaAutoruns=null,this.unobservedTiles=null,this.tilesAutoruns=null,this.unobservedExtraOpacity=1,this.extraOpacityAutoruns=null,this.unobservedExtraBlending=0,this.extraBlendingAutoruns=null,this.unobservedColor=16777215,this.colorAutoruns=null,this.unobservedBlending=0,this.blendingAutoruns=null,this.unobservedExplicitDepth=null,this.explicitDepthAutoruns=null,this.unobservedOffsetY=0,this.offsetYAutoruns=null,this.unobservedOffsetX=0,this.offsetXAutoruns=null,this.unobservedVisible=!0,this.visibleAutoruns=null,this.unobservedOpacity=1,this.opacityAutoruns=null,this.unobservedRows=0,this.rowsAutoruns=null,this.unobservedColumns=0,this.columnsAutoruns=null,this.unobservedY=0,this.yAutoruns=null,this.unobservedX=0,this.xAutoruns=null,this.unobservedName=null,this.nameAutoruns=null,this.unobservedLdtkLayer=null,this.ldtkLayerAutoruns=null,tc.call(this)}function xc(){}(L.Project=x).__name__="Project",x.__super__=l,x.prototype=$extend(l.prototype,{ready:function(){var e=new Et;e.bindToScreenSize(),he.app.get_scenes().set_filter(e),he.app.get_scenes().set_main(new w)},__class__:x});var N=function(){},V=((L.Reflect=N).__name__="Reflect",N.field=function(e,n){try{return e[n]}catch(e){return Al.lastError=e,null}},N.getProperty=function(e,n){var t;return null==e?null:!!e.__properties__&&(t=e.__properties__["get_"+n])?e[t]():e[n]},N.setProperty=function(e,n,t){var i,l=!!e.__properties__&&(i=e.__properties__["set_"+n]);l?e[i](t):e[n]=t},N.fields=function(e){var n=[];if(null!=e){var t,i=Object.prototype.hasOwnProperty;for(t in e)"__id__"!=t&&"hx__closures__"!=t&&i.call(e,t)&&n.push(t)}return n},N.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},N.isObject=function(e){var n;return null!=e&&("string"==(n=typeof e)||"object"==n&&null==e.__enum__||"function"==n&&null!=(e.__name__||e.__ename__))},N.deleteField=function(e,n){return!!Object.prototype.hasOwnProperty.call(e,n)&&(delete e[n],!0)},function(){}),R=((L.Std=V).__name__="Std",V.string=function(e){return ys.__string_rec(e,"")},V.parseInt=function(e){e=parseInt(e);return isNaN(e)?null:e},(L.StringBuf=A).__name__="StringBuf",A.prototype={b:null,__class__:A},(L.StringTools=B).__name__="StringTools",B.htmlEscape=function(e,n){for(var t="",i=0,l=e;i<l.length;){var s=i++,r=(e=l).charCodeAt(s),a=(r=55296<=r&&r<=56319?r-55232<<10|1023&e.charCodeAt(1+s):r,65536<=r&&++i,r);switch(a){case 34:t+=n?"&quot;":String.fromCodePoint(a);break;case 38:t+="&amp;";break;case 39:t+=n?"&#039;":String.fromCodePoint(a);break;case 60:t+="&lt;";break;case 62:t+="&gt;";break;default:t+=String.fromCodePoint(a)}}return t},B.startsWith=function(e,n){return e.length>=n.length&&0==e.lastIndexOf(n,0)},B.endsWith=function(e,n){var t=n.length,i=e.length;return t<=i&&e.indexOf(n,i-t)==i-t},B.isSpace=function(e,n){e=h.cca(e,n);return 8<e&&e<14||32==e},B.ltrim=function(e){for(var n=e.length,t=0;t<n&&B.isSpace(e,t);)++t;return 0<t?h.substr(e,t,n-t):e},B.rtrim=function(e){for(var n=e.length,t=0;t<n&&B.isSpace(e,n-t-1);)++t;return 0<t?h.substr(e,0,n-t):e},B.trim=function(e){return B.ltrim(B.rtrim(e))},B.replace=function(e,n,t){return e.split(n).join(t)},B.hex=function(e,n){for(var t="";t="0123456789ABCDEF".charAt(15&e)+t,0<(e>>>=4););if(null!=n)for(;t.length<n;)t="0"+t;return t},I.ValueType={__ename__:"ValueType",__constructs__:null,TNull:{_hx_name:"TNull",_hx_index:0,__enum__:"ValueType",toString:d},TInt:{_hx_name:"TInt",_hx_index:1,__enum__:"ValueType",toString:d},TFloat:{_hx_name:"TFloat",_hx_index:2,__enum__:"ValueType",toString:d},TBool:{_hx_name:"TBool",_hx_index:3,__enum__:"ValueType",toString:d},TObject:{_hx_name:"TObject",_hx_index:4,__enum__:"ValueType",toString:d},TFunction:{_hx_name:"TFunction",_hx_index:5,__enum__:"ValueType",toString:d},TClass:((b=function(e){return{_hx_index:6,c:e,__enum__:"ValueType",toString:d}})._hx_name="TClass",b.__params__=["c"],b),TEnum:((b=function(e){return{_hx_index:7,e:e,__enum__:"ValueType",toString:d}})._hx_name="TEnum",b.__params__=["e"],b),TUnknown:{_hx_name:"TUnknown",_hx_index:8,__enum__:"ValueType",toString:d}}),le=(R.__constructs__=[R.TNull,R.TInt,R.TFloat,R.TBool,R.TObject,R.TFunction,R.TClass,R.TEnum,R.TUnknown],(L.Type=D).__name__="Type",D.createInstance=function(e,n){return new(Function.prototype.bind.apply(e,[null].concat(n)))},D.createEnum=function(e,n,t){var i=N.field(e,n);if(null==i)throw Q.thrown("No such constructor "+n);if(N.isFunction(i)){if(null==t)throw Q.thrown("Constructor "+n+" need parameters");return i.apply(e,t)}if(null!=t&&0!=t.length)throw Q.thrown("Constructor "+n+" does not need parameters");return i},D.getInstanceFields=function(e){var n,t=[];for(n in e.prototype)t.push(n);return h.remove(t,"__class__"),h.remove(t,"__properties__"),t},D.typeof=function(e){switch(typeof e){case"boolean":return R.TBool;case"function":return e.__name__||e.__ename__?R.TObject:R.TFunction;case"number":return Math.ceil(e)==e%2147483648?R.TInt:R.TFloat;case"object":var n;return null==e?R.TNull:null!=(n=e.__enum__)?R.TEnum(I[n]):null!=(n=ys.getClass(e))?R.TClass(n):R.TObject;case"string":return R.TClass(String);case"undefined":return R.TNull;default:return R.TUnknown}},D.enumParameters=function(e){var n=I[e.__enum__].__constructs__[e._hx_index].__params__;if(null==n)return[];for(var t=[],i=0;i<n.length;){var l=n[i];++i,t.push(e[l])}return t},{}),H=(le.toString=function(e){switch(e){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}},(L.Xml=F).__name__="Xml",F.parse=function(e){return Os.parse(e)},F.createElement=function(e){var n=new F(F.Element);if(n.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":le.toString(n.nodeType)));return n.nodeName=e,n},F.createPCData=function(e){var n=new F(F.PCData);if(n.nodeType==F.Document||n.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":le.toString(n.nodeType)));return n.nodeValue=e,n},F.createCData=function(e){var n=new F(F.CData);if(n.nodeType==F.Document||n.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":le.toString(n.nodeType)));return n.nodeValue=e,n},F.createComment=function(e){var n=new F(F.Comment);if(n.nodeType==F.Document||n.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":le.toString(n.nodeType)));return n.nodeValue=e,n},F.createDocType=function(e){var n=new F(F.DocType);if(n.nodeType==F.Document||n.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":le.toString(n.nodeType)));return n.nodeValue=e,n},F.createProcessingInstruction=function(e){var n=new F(F.ProcessingInstruction);if(n.nodeType==F.Document||n.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":le.toString(n.nodeType)));return n.nodeValue=e,n},F.createDocument=function(){return new F(F.Document)},F.prototype={nodeType:null,nodeName:null,nodeValue:null,parent:null,children:null,attributeMap:null,get:function(e){if(this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));return this.attributeMap.h[e]},set:function(e,n){if(this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));this.attributeMap.h[e]=n},exists:function(e){if(this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,e)},attributes:function(){if(this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));return new Yl(this.attributeMap.h)},elements:function(){if(this.nodeType!=F.Document&&this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));for(var e=[],n=0,t=this.children;n<t.length;){var i=t[n];++n,i.nodeType==F.Element&&e.push(i)}return new ls(e)},elementsNamed:function(e){if(this.nodeType!=F.Document&&this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));for(var n=[],t=0,i=this.children;t<i.length;){var l,s=i[t];if(++t,s.nodeType==F.Element){if(s.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":le.toString(s.nodeType)));l=s.nodeName==e}else l=!1;l&&n.push(s)}return new ls(n)},firstElement:function(){if(this.nodeType!=F.Document&&this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));for(var e=0,n=this.children;e<n.length;){var t=n[e];if(++e,t.nodeType==F.Element)return t}return null},addChild:function(e){if(this.nodeType!=F.Document&&this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));null!=e.parent&&e.parent.removeChild(e),this.children.push(e),e.parent=this},removeChild:function(e){if(this.nodeType!=F.Document&&this.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":le.toString(this.nodeType)));return!!h.remove(this.children,e)&&!(e.parent=null)},toString:function(){return fs.print(this)},__class__:F},(L["ase.types.Serializable"]=G).__name__="ase.types.Serializable",G.__isInterface__=!0,G.prototype={toBytes:null,__class__:G},e.Ase=function(){this.layers=[],this.frames=[]}),se=((L["ase.Ase"]=H).__name__="ase.Ase",H.__interfaces__=[G],H.create=function(e,n,t,i){null==t&&(t=32);var l=new H;return l.createHeader(),l.header.colorDepth=t,l.set_width(e),l.set_height(n),l.createFirstFrame(),l.initPalette(null!=i?i:be.DB32),l},H.fromBytes=function(e){for(var n=new $l(e),t=new H,i=(t.header=se.fromBytes(n.read(se.SIZE)),0),l=t.header.frames;i<l;){i++;var s=e.getInt32(n.pos),s=ce.fromBytes(n.read(s),t);t.frames.push(s)}var r=t.get_firstFrame().chunkTypes.h[8217];if(null!=r&&0<r.length)t.palette=be.fromChunk(r[0]);else{r=t.get_firstFrame().chunkTypes.h[4];if(!(null!=r&&0<r.length))throw Q.thrown("Failed to parse: missing palette chunk");t.palette=be.fromOldChunk(r[0])}return t.createLayers(),t},H.main=function(){},H.prototype={header:null,frames:null,get_colorDepth:function(){return this.header.colorDepth},get_fileSize:function(){return this.header.get_size()+i.fold(this.frames,function(e,n){return n+e.get_size()},0)},get_firstFrame:function(){return this.frames[0]},get_width:function(){return this.header.width},set_width:function(e){return this.header.width=e},get_height:function(){return this.header.height},set_height:function(e){return this.header.height=e},palette:null,layers:null,createHeader:function(){this.header=new se},createFirstFrame:function(){var e=new ce(null,this);e.createHeader(),e.addChunk(new Ce(!0)),this.frames=[e]},createLayers:function(){var e=this.get_firstFrame().chunkTypes.h[8196];if(null!=e)for(var n=0;n<e.length;){var t=e[n];++n,this.layers.push(new de(t))}},initPalette:function(e){this.palette=be.fromRGBA(e)},addFrame:function(e,n){null==n&&(n=100),null==e&&(e=!1);var t=new ce(null,this);if(t.set_duration(n),e)for(var i=this.frames[this.frames.length-1],l=0,s=this.layers.length;l<s;){var r=l++,a=i.cel(r);null!=a&&t.cel(r,a)}return this.frames.push(t),t},addLayer:function(e,n,t){null==t&&(t=!0),null==n&&(n=!0),null==e&&(e="Layer "+(this.layers.length+1));var i=new de;return i.set_editable(t),i.set_visible(n),i.set_name(e),this.layers.push(i),this.frames[0].addChunk(i.chunk),this},toBytes:function(e){for(var n=[],t=0,i=this.get_firstFrame().chunks;t<i.length;){var l=i[t];++t,-1==[4,8217].indexOf(l.header.type)&&n.push(l)}this.get_firstFrame().chunks=n,this.get_firstFrame().chunkTypes.remove(4),this.get_firstFrame().chunkTypes.remove(8217);for(var s=this.palette.toChunk(),r=(this.get_firstFrame().addChunk(s),this.header.fileSize=this.get_fileSize(),this.header.frames=this.frames.length,this.header.colorsNumber=this.palette.get_numColors(),null!=e?e:new Zl),n=(this.header.toBytes(r),0),t=this.frames;n<t.length;){var a=t[n];++n,a.toBytes(r)}return r.getBytes()},toString:function(){for(var e=[],n=0,t=this.frames;n<t.length;)for(var i=t[n],l=n++,s=(e.push("Frame #"+l),0),r=i.chunks;s<r.length;){var a=r[s];++s,e.push(a.toString())}return e.join("\n")},__class__:H,__properties__:{set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",get_firstFrame:"get_firstFrame",get_fileSize:"get_fileSize",get_colorDepth:"get_colorDepth"}},function(){this.gridHeight=16,this.gridWidth=16,this.gridY=0,this.gridX=0,this.pixelHeight=0,this.pixelWidth=0,this.colorsNumber=0,this.paletteEntry=0,this.speed=100,this.flags=1,this.colorDepth=32,this.magic=se.ASEPRITE_MAGIC}),ce=((L["ase.AseHeader"]=se).__name__="ase.AseHeader",se.__interfaces__=[G],se.fromBytes=function(e){var n=new se,e=new $l(e);if(n.fileSize=e.readInt32(),n.magic=e.readUInt16(),n.magic!=se.ASEPRITE_MAGIC)throw Q.thrown("Invalid magic number (should be 0xA5E0)");if(n.frames=e.readUInt16(),n.width=e.readUInt16(),n.height=e.readUInt16(),n.colorDepth=e.readUInt16(),n.flags=e.readInt32(),n.speed=e.readUInt16(),0!=e.readInt32()||0!=e.readInt32())throw Q.thrown("DWORDs at 20 and 24 should be zero");return n.paletteEntry=e.readByte(),e.read(3),n.colorsNumber=e.readUInt16(),n.pixelWidth=e.readByte(),n.pixelHeight=e.readByte(),n.gridX=e.readInt16(),n.gridY=e.readInt16(),n.gridWidth=e.readUInt16(),n.gridHeight=e.readUInt16(),e.read(84),n},se.prototype={fileSize:null,magic:null,frames:null,width:null,height:null,colorDepth:null,flags:null,speed:null,paletteEntry:null,colorsNumber:null,pixelWidth:null,pixelHeight:null,gridX:null,gridY:null,gridWidth:null,gridHeight:null,get_size:function(){return se.SIZE},toBytes:function(e){for(var n=null!=e?e:new Zl,t=(n.writeInt32(this.fileSize),n.writeUInt16(this.magic),n.writeUInt16(this.frames),n.writeUInt16(this.width),n.writeUInt16(this.height),n.writeUInt16(this.colorDepth),n.writeInt32(this.flags),n.writeUInt16(this.speed),n.writeInt32(0),n.writeInt32(0),n.writeByte(this.paletteEntry),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeUInt16(this.colorsNumber),n.writeByte(this.pixelWidth),n.writeByte(this.pixelHeight),n.writeInt16(this.gridX),n.writeInt16(this.gridY),n.writeUInt16(this.gridWidth),n.writeUInt16(this.gridHeight),0);t<84;){t++;n.writeByte(0)}return n.getBytes()},toString:function(){return["AseHeader:","  fileSize: "+this.fileSize,"  magic: "+this.magic,"  frames: "+this.frames,"  width: "+this.width,"  height: "+this.height,"  colorDepth: "+this.colorDepth,"  flags: "+this.flags,"  speed: "+this.speed,"  paletteEntry: "+this.paletteEntry,"  colorsNumber: "+this.colorsNumber,"  pixelWidth: "+this.pixelWidth,"  pixelHeight: "+this.pixelHeight,"  gridX: "+this.gridX,"  gridY: "+this.gridY,"  gridWidth: "+this.gridWidth,"  gridHeight: "+this.gridHeight].join("\n")},__class__:se,__properties__:{get_size:"get_size"}},(L["ase.Cel"]=J).__name__="ase.Cel",J.prototype={frame:null,chunk:null,get_pixelData:function(){return this.chunk.rawData},get_pixelDataLength:function(){return this.get_width()*this.get_height()*(this.frame.ase.get_colorDepth()/8|0)},get_width:function(){return this.chunk.width},get_height:function(){return this.chunk.height},get_layerIndex:function(){return this.chunk.layerIndex},set_layerIndex:function(e){return this.chunk.layerIndex=e},get_xPosition:function(){return this.chunk.xPosition},set_xPosition:function(e){return this.chunk.xPosition=e},get_yPosition:function(){return this.chunk.yPosition},set_yPosition:function(e){return this.chunk.yPosition=e},init:function(e,n){if(1==this.chunk.celType)throw Q.thrown("Can't initalize pixel data for a linked cel");this.chunk.width=e,this.chunk.height=n,this.setPixelData(new kl(new ArrayBuffer(this.get_pixelDataLength())))},fillColor:function(e){for(var n=0,t=this.get_width()*this.get_height();n<t;){var i=n++;this.chunk.rawData.setInt32(4*i,e)}2==this.chunk.celType&&this.chunk.compressData()},fillIndex:function(e){this.chunk.rawData.fill(0,this.chunk.rawData.length,e),2==this.chunk.celType&&this.chunk.compressData()},getPixel:function(e,n){if(!(0<=e&&e<this.get_width()&&0<=n&&n<this.get_height()))return null;var t=(this.get_width()*n+e)*(this.frame.ase.get_colorDepth()/8|0);switch(this.frame.ase.get_colorDepth()){case 8:return this.get_pixelData().b[t];case 16:return this.get_pixelData().getUInt16(t);case 32:return this.get_pixelData().getInt32(t)}},setPixel:function(e,n,t){if(0<=e&&e<this.get_width()&&0<=n&&n<this.get_height()){var i=(this.get_width()*n+e)*(this.frame.ase.get_colorDepth()/8|0);switch(this.frame.ase.get_colorDepth()){case 8:this.get_pixelData().b[i]=t;break;case 16:this.get_pixelData().setUInt16(i,t);break;case 32:this.get_pixelData().setInt32(i,t)}this.setPixelData(this.get_pixelData())}},setPixelData:function(e,n,t){if(null!=n&&null!=t||(n=this.get_width(),t=this.get_height()),e.length!=n*t*(this.frame.ase.get_colorDepth()/8|0))throw Q.thrown("Invalid data size");this.chunk.rawData=e,this.chunk.width=n,this.chunk.height=t,2==this.chunk.celType&&this.chunk.compressData()},link:function(e){this.chunk.celType=1,this.chunk.linkedFrame=e},clone:function(){return new J(this.chunk.clone(),null,this.frame,this.get_layerIndex())},__class__:J,__properties__:{set_yPosition:"set_yPosition",get_yPosition:"get_yPosition",set_xPosition:"set_xPosition",get_xPosition:"get_xPosition",set_layerIndex:"set_layerIndex",get_layerIndex:"get_layerIndex",get_height:"get_height",get_width:"get_width",get_pixelDataLength:"get_pixelDataLength",get_pixelData:"get_pixelData"}},function(e,n){this.cels=new Hl,this.chunkTypes=new Hl,this.chunks=[],this.header=null!=e?e:new _e,null!=n&&(this.ase=n)}),_e=((L["ase.Frame"]=ce).__name__="ase.Frame",ce.__interfaces__=[G],ce.fromBytes=function(e,n){for(var t=new $l(e),i=new ce(null,n),l=(i.header=_e.fromBytes(t.read(_e.BYTE_SIZE)),null),n=i.header.numChunks,s=0,r=n=0==n?i.header.oldNumChunks:n;s<r;){s++;var a,h,u,c=e.getInt32(t.pos),c=t.read(c),c=Oe.fromBytes(c);null!=c&&(null!=l&&(8224==c.header.type&&(l.userData=c),8198==c.header.type)&&8197==l.header.type&&(ys.__cast(l,pe).extra=c),8197==c.header.type&&(a=i.cels,h=c.layerIndex,u=new J(c,null,i,c.layerIndex),a.h[h]=u),i.addChunk(c),l=c)}return i},ce.prototype={ase:null,header:null,chunks:null,chunkTypes:null,cels:null,get_duration:function(){return this.header.duration},set_duration:function(e){return this.header.duration=e},get_size:function(){return i.fold(this.chunks,function(e,n){return n+e.get_size()},_e.BYTE_SIZE)},addChunk:function(e){this.chunks.push(e),this.chunkTypes.h.hasOwnProperty(e.header.type)?this.chunkTypes.h[e.header.type].push(e):this.chunkTypes.h[e.header.type]=[e]},cel:function(e,n){var t;return null!=n&&(null!=(t=this.cels.h[e])&&this.removeChunk(t.chunk),this.addChunk(n.chunk),(this.cels.h[e]=n).set_layerIndex(e)),this.cels.h[e]},createCel:function(e,n,t,i,l){n=new J(null,null,this,e,n,t);return null!=i&&n.set_xPosition(i),null!=l&&n.set_yPosition(l),this.addChunk(n.chunk),this.cels.h[e]=n},linkCel:function(e,n){var t=new J(null,null,this,e);return t.link(n),this.addChunk(t.chunk),this.cels.h[e]=t},clearCel:function(e){},createHeader:function(){this.header=new _e},removeChunk:function(e){h.remove(this.chunks,e),h.remove(this.chunkTypes.h[e.header.type],e)},toBytes:function(e){for(var n=null!=e?e:new Zl,t=(this.header.size=this.get_size(),this.header.numChunks=this.header.oldNumChunks=this.chunks.length,this.header.toBytes(n),0),i=this.chunks;t<i.length;){var l=i[t];++t,l.toBytes(n)}return n.getBytes()},__class__:ce,__properties__:{get_size:"get_size",set_duration:"set_duration",get_duration:"get_duration"}},function(){this.numChunks=0,this.duration=100,this.oldNumChunks=0,this.magic=_e.MAGIC,this.size=0}),de=((L["ase.FrameHeader"]=_e).__name__="ase.FrameHeader",_e.__interfaces__=[G],_e.fromBytes=function(e){var n=new _e,e=new $l(e);if(n.size=e.readInt32(),n.magic=e.readUInt16(),n.magic!=_e.MAGIC)throw Q.thrown("Invalid frame header magic number (should be 0xF1FA)");return n.oldNumChunks=e.readUInt16(),n.duration=e.readUInt16(),e.read(2),n.numChunks=e.readInt32(),n},_e.prototype={size:null,magic:null,oldNumChunks:null,duration:null,numChunks:null,toBytes:function(e){e=null!=e?e:new Zl;return e.writeInt32(this.size),e.writeUInt16(this.magic),e.writeUInt16(this.oldNumChunks),e.writeUInt16(this.duration),e.writeByte(0),e.writeByte(0),e.writeInt32(this.numChunks),e.getBytes()},toString:function(){return["FrameHeader:","  size: "+this.size,"  magic: "+B.hex(this.magic,4),"  oldNumChunks: "+this.oldNumChunks,"  duration: "+this.duration,"  numChunks: "+this.numChunks].join("\n")},__class__:_e},function(e){this.chunk=null!=e?e:new Te(!0)}),be=((L["ase.Layer"]=de).__name__="ase.Layer",de.prototype={chunk:null,get_editable:function(){return 2==(2&this.chunk.flags)},set_editable:function(e){var n=this.get_visible()?1:0;return this.chunk.flags=n|(e?2:0),this.get_editable()},get_name:function(){return this.chunk.name},set_name:function(e){return this.chunk.name=e},get_visible:function(){return 1==(1&this.chunk.flags)},set_visible:function(e){var n=this.get_editable()?2:0;return this.chunk.flags=(e?1:0)|n,this.get_visible()},__class__:de,__properties__:{set_visible:"set_visible",get_visible:"get_visible",set_name:"set_name",get_name:"get_name",set_editable:"set_editable",get_editable:"get_editable"}},function(e){this.entries=e}),Oe=((L["ase.Palette"]=be).__name__="ase.Palette",be.createDefault=function(){return be.fromRGBA(be.DB32)},be.fromRGBA=function(e){for(var n=new Array(e.length),t=0,i=e.length;t<i;){var l=t++,s=e[l];n[l]={red:s>>24&255,green:s>>16&255,blue:s>>8&255,alpha:255&s}}return new be(n)},be.fromChunk=function(e){for(var n=[],t=$getIterator(e.entries);t.hasNext();){var i=t.next();n.push({red:i.red,green:i.green,blue:i.blue,alpha:i.alpha})}return new be(n)},be.fromOldChunk=function(e){for(var n=[],t=0,i=e.packets;t<i.length;)for(var l=i[t],s=(++t,0),r=l.colors;s<r.length;){var a=r[s];++s,n.push({red:a.red,green:a.green,blue:a.blue,alpha:255})}return new be(n)},be.prototype={entries:null,get_numColors:function(){return this.entries.length},get_firstIndex:function(){return 0},get_lastIndex:function(){return this.entries.length-1},getEntry:function(e){return this.entries[e]},getRGBA:function(e){e=this.entries[e];return(255&e.red)<<24|(255&e.green)<<16|(255&e.blue)<<8|255&e.alpha},getARGB:function(e){e=this.entries[e];return(255&e.alpha)<<24|(255&e.red)<<16|(255&e.green)<<8|255&e.blue},toChunk:function(){var e;if(this.entries.length<=256){for(var n=[],t=0,i=this.entries;t<i.length;){var l=i[t];++t,255!=l.alpha&&n.push(l)}e=0==n.length}else e=!1;return(e?Ae:Se).fromPaletteEntries(this.entries)},__class__:be,__properties__:{get_lastIndex:"get_lastIndex",get_firstIndex:"get_firstIndex",get_numColors:"get_numColors"}},function(e,n){(e=null==e?!1:e)&&(this.header=new we(n))}),pe=((L["ase.chunks.Chunk"]=Oe).__name__="ase.chunks.Chunk",Oe.__interfaces__=[G],Oe.fromBytes=function(e){var n,e=new $l(e),t=we.fromBytes(e.read(6)),i=e.read(t.size-6);switch(ys.__cast(t.type,Ts)){case 4:case 17:n=Ae.fromBytes(i);break;case 8196:n=Te.fromBytes(i);break;case 8197:n=pe.fromBytes(i);break;case 8198:n=me.fromBytes(i);break;case 8199:n=Ce.fromBytes(i);break;case 8200:n=Ue.fromBytes(i);break;case 8214:n=De.fromBytes(i);break;case 8216:n=Me.fromBytes(i);break;case 8217:n=Se.fromBytes(i);break;case 8224:n=Ie.fromBytes(i);break;case 8226:n=Ee.fromBytes(i);break;case 8227:n=ke.fromBytes(i);break;default:return Dl.trace("Unknown chunk type: 0x"+B.hex(t.type,4),{fileName:"ase/chunks/Chunk.hx",lineNumber:58,className:"ase.chunks.Chunk",methodName:"fromBytes"}),null}return null!=n&&(n.header=t),n},Oe.prototype={header:null,userData:null,get_size:function(){return 6+this.getSizeWithoutHeader()},getSizeWithoutHeader:function(){var e=ys.getClass(this);throw Q.thrown(e.__name__+".getSizeWithoutHeader() is not implemented")},writeHeaderBytes:function(e){this.header.size=this.get_size(),this.header.toBytes(e)},toBytes:function(e){var n=ys.getClass(this);throw Q.thrown(n.__name__.split(".").pop()+".toBytes() is not implemented")},toString:function(){return"0x"+B.hex(this.header.type,4)+": "+ys.getClass(this).__name__.split(".").pop()},__class__:Oe,__properties__:{get_size:"get_size"}},function(e){null==e&&(e=!1),this.height=0,this.width=0,this.celType=2,this.opacity=255,this.yPosition=0,this.xPosition=0,this.layerIndex=0,Oe.call(this,e,8197)}),me=((L["ase.chunks.CelChunk"]=pe).__name__="ase.chunks.CelChunk",pe.fromBytes=function(e){var n=new pe,e=new $l(e);if(n.layerIndex=e.readUInt16(),n.xPosition=e.readInt16(),n.yPosition=e.readInt16(),n.opacity=e.readByte(),n.celType=e.readUInt16(),e.read(7),0==n.celType||2==n.celType||3==n.celType)n.width=e.readUInt16(),n.height=e.readUInt16(),2==n.celType?(n.compressedData=e.read(e.totlen-e.pos),n.rawData=vs.run(new $l(n.compressedData))):0==n.celType?n.rawData=e.read(e.totlen-e.pos):3==n.celType&&(n.bitsPerTile=e.readUInt16(),n.bitmaskTileId=e.readInt32(),n.bitmaskXFlip=e.readInt32(),n.bitmaskYFlip=e.readInt32(),n.bitmask90CWRotation=e.readInt32(),e.read(10),n.compressedTilemapData=e.read(e.totlen-e.pos),n.tilemapData=vs.run(new $l(n.compressedTilemapData)));else{if(1!=n.celType)return Dl.trace("Unknown cel type: "+n.celType,{fileName:"ase/chunks/CelChunk.hx",lineNumber:97,className:"ase.chunks.CelChunk",methodName:"fromBytes"}),null;n.linkedFrame=e.readUInt16()}return n},pe.__super__=Oe,pe.prototype=$extend(Oe.prototype,{layerIndex:null,xPosition:null,yPosition:null,opacity:null,celType:null,width:null,height:null,linkedFrame:null,extra:null,rawData:null,compressedData:null,bitsPerTile:null,bitmaskTileId:null,bitmaskXFlip:null,bitmaskYFlip:null,bitmask90CWRotation:null,compressedTilemapData:null,tilemapData:null,getSizeWithoutHeader:function(){var e=16;return 0==this.celType||2==this.celType||3==this.celType?(e+=4,2==this.celType?e+=this.compressedData.length:0==this.celType?e+=this.rawData.length:3==this.celType&&(e+=28+this.compressedTilemapData.length)):1==this.celType&&(e+=2),e},clone:function(){var e=new pe(!0);return e.layerIndex=this.layerIndex,e.xPosition=this.xPosition,e.yPosition=this.yPosition,e.opacity=this.opacity,e.celType=this.celType,e.width=this.width,e.height=this.height,e.linkedFrame=this.linkedFrame,null!=this.extra&&(e.extra=this.extra.clone()),1!=this.celType&&(null!=this.rawData&&(e.rawData=new kl(new ArrayBuffer(this.rawData.length)),e.rawData.blit(0,this.rawData,0,this.rawData.length)),null!=this.compressedData)&&(e.compressedData=new kl(new ArrayBuffer(this.compressedData.length)),e.compressedData.blit(0,this.compressedData,0,this.compressedData.length)),e},toBytes:function(e){var n=null!=e?e:new Zl;switch(this.writeHeaderBytes(n),n.writeUInt16(this.layerIndex),n.writeInt16(this.xPosition),n.writeInt16(this.yPosition),n.writeByte(this.opacity),n.writeUInt16(this.celType),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),this.celType){case 1:n.writeUInt16(this.linkedFrame);break;case 0:case 2:case 3:n.writeUInt16(this.width),n.writeUInt16(this.height),2==this.celType?n.writeBytes(this.compressedData,0,this.compressedData.length):0==this.celType?n.writeBytes(this.rawData,0,this.rawData.length):3==this.celType&&(n.writeUInt16(this.bitsPerTile),n.writeInt32(this.bitmaskTileId),n.writeInt32(this.bitmaskXFlip),n.writeInt32(this.bitmaskYFlip),n.writeInt32(this.bitmask90CWRotation),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeBytes(this.compressedTilemapData,0,this.compressedTilemapData.length))}return n.getBytes()},compressData:function(){2==this.celType&&(this.compressedData=ps.run(this.rawData,9)),3==this.celType&&(this.compressedTilemapData=ps.run(this.tilemapData,9))},__class__:pe}),function(e){Oe.call(this,e=null==e?!1:e,8198)}),we=((L["ase.chunks.CelExtraChunk"]=me).__name__="ase.chunks.CelExtraChunk",me.fromBytes=function(e){var n=new me,e=new $l(e);return n.flags=e.readUInt16(),n.preciseXPosition=e.readFloat(),n.preciseYPosition=e.readFloat(),n.widthInSprite=e.readFloat(),n.heightInSprite=e.readFloat(),e.read(16),n},me.__super__=Oe,me.prototype=$extend(Oe.prototype,{flags:null,preciseXPosition:null,preciseYPosition:null,widthInSprite:null,heightInSprite:null,getSizeWithoutHeader:function(){return 34},toBytes:function(e){e=null!=e?e:new Zl;return this.writeHeaderBytes(e),e.writeUInt16(this.flags),e.writeFloat(this.preciseXPosition),e.writeFloat(this.preciseYPosition),e.writeFloat(this.widthInSprite),e.writeFloat(this.heightInSprite),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.getBytes()},clone:function(){var e=new me(!0);return e.flags=this.flags,e.preciseXPosition=this.preciseXPosition,e.preciseYPosition=this.preciseYPosition,e.widthInSprite=this.widthInSprite,e.heightInSprite=this.heightInSprite,e},__class__:me}),function(e){this.size=0,null!=e&&(this.type=e)}),Ce=((L["ase.chunks.ChunkHeader"]=we).__name__="ase.chunks.ChunkHeader",we.fromBytes=function(e){var n=new we,e=new $l(e);return n.size=e.readInt32(),n.type=e.readUInt16(),n},we.prototype={size:null,type:null,toBytes:function(e){e=null!=e?e:new Zl;return e.writeInt32(this.size),e.writeUInt16(this.type),e.getBytes()},__class__:we},function(e){null==e&&(e=!1),this.gamma=0,this.flags=0,this.colorProfileType=1,Oe.call(this,e,8199)}),Ue=((L["ase.chunks.ColorProfileChunk"]=Ce).__name__="ase.chunks.ColorProfileChunk",Ce.fromBytes=function(e){var n,t=new Ce,e=new $l(e);return t.colorProfileType=e.readUInt16(),t.flags=e.readUInt16(),t.gamma=e.readFloat(),e.read(8),2==t.colorProfileType&&(n=e.readInt32(),t.iccProfileData=e.read(n)),t},Ce.__super__=Oe,Ce.prototype=$extend(Oe.prototype,{colorProfileType:null,flags:null,gamma:null,iccProfileData:null,getSizeWithoutHeader:function(){var e=16;return 2==this.colorProfileType&&(e+=4+this.iccProfileData.length),e},toBytes:function(e){e=null!=e?e:new Zl;if(this.writeHeaderBytes(e),e.writeUInt16(this.colorProfileType),e.writeUInt16(this.flags),e.writeFloat(this.gamma),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),2==this.colorProfileType){if(null==this.iccProfileData)throw Q.thrown("colorProfileType is set to EmbeddedICC but iccProfileData is not set");e.writeInt32(this.iccProfileData.length),e.writeBytes(this.iccProfileData,0,this.iccProfileData.length)}return e.getBytes()},__class__:Ce}),function(e){null==e&&(e=!1),this.entries=[],Oe.call(this,e,8200)}),Te=((L["ase.chunks.ExternalFilesChunk"]=Ue).__name__="ase.chunks.ExternalFilesChunk",Ue.fromBytes=function(e){for(var n=new Ue,t=new $l(e),i=(n.numEntries=t.readInt32(),t.read(8),0),l=n.numEntries;i<l;){i++;var s=t.readInt32(),r=(t.read(8),t.readString(t.readByte()));n.entries.push({id:s,fileName:r})}return n},Ue.__super__=Oe,Ue.prototype=$extend(Oe.prototype,{numEntries:null,entries:null,getSizeWithoutHeader:function(){for(var e=12,n=0,t=this.entries;n<t.length;){var i=t[n];++n,e+=13+i.fileName.length}return e},toBytes:function(e){for(var n=null!=e?e:new Zl,t=(n.writeInt32(this.numEntries),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),0),i=this.entries;t<i.length;){var l=i[t];++t,n.writeInt32(l.id),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(l.fileName.length),n.writeString(l.fileName)}return n.getBytes()},__class__:Ue}),function(e){null==e&&(e=!1),this.name="New Layer",this.opacity=255,this.blendMode=0,this.defaultHeight=0,this.defaultWidth=0,this.childLevel=0,this.layerType=0,this.flags=3,Oe.call(this,e,8196)}),De=((L["ase.chunks.LayerChunk"]=Te).__name__="ase.chunks.LayerChunk",Te.fromBytes=function(e){var n=new Te,e=new $l(e);return n.flags=e.readUInt16(),n.layerType=e.readInt16(),n.childLevel=e.readInt16(),n.defaultWidth=e.readInt16(),n.defaultHeight=e.readInt16(),n.blendMode=e.readInt16(),n.opacity=e.readByte(),e.read(3),n.name=e.readString(e.readUInt16()),2==n.layerType&&(n.tilesetIndex=e.readInt32()),n},Te.__super__=Oe,Te.prototype=$extend(Oe.prototype,{flags:null,layerType:null,childLevel:null,defaultWidth:null,defaultHeight:null,blendMode:null,opacity:null,name:null,tilesetIndex:null,getSizeWithoutHeader:function(){return 18+this.name.length+(2==this.layerType?4:0)},toBytes:function(e){e=null!=e?e:new Zl;return this.writeHeaderBytes(e),e.writeUInt16(this.flags),e.writeUInt16(this.layerType),e.writeUInt16(this.childLevel),e.writeUInt16(this.defaultWidth),e.writeUInt16(this.defaultHeight),e.writeUInt16(this.blendMode),e.writeByte(this.opacity),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeUInt16(this.name.length),e.writeString(this.name),2==this.layerType&&e.writeInt32(this.tilesetIndex),e.getBytes()},__class__:Te}),function(e){Oe.call(this,e=null==e?!1:e,8214)}),Ae=((L["ase.chunks.MaskChunk"]=De).__name__="ase.chunks.MaskChunk",De.fromBytes=function(e){var n=new De,e=new $l(e);return n.xPosition=e.readInt16(),n.yPosition=e.readInt16(),n.width=e.readUInt16(),n.height=e.readUInt16(),e.read(8),n},De.__super__=Oe,De.prototype=$extend(Oe.prototype,{xPosition:null,yPosition:null,width:null,height:null,__class__:De}),function(e){null==e&&(e=!1),this.packets=[],Oe.call(this,e,4)}),Se=((L["ase.chunks.OldPaleteChunk"]=Ae).__name__="ase.chunks.OldPaleteChunk",Ae.fromBytes=function(e){for(var n=new Ae,t=new $l(e),i=(n.numPackets=t.readUInt16(),0),l=n.numPackets;i<l;){i++;for(var s={skipEntries:t.readByte(),numColors:t.readByte(),colors:[]},r=0,a=s.numColors;r<a;){r++;s.colors.push({red:t.readByte(),green:t.readByte(),blue:t.readByte()})}n.packets.push(s)}return n},Ae.fromPaletteEntries=function(e){for(var n=new Ae(!0),t=(n.numPackets=1,0|Math.min(e.length,256)),i=e.slice(0,256),l=new Array(i.length),s=0,r=i.length;s<r;){var a=s++,h=i[a];l[a]={red:h.red,green:h.green,blue:h.blue}}return n.packets=[{skipEntries:0,numColors:t,colors:l}],n},Ae.__super__=Oe,Ae.prototype=$extend(Oe.prototype,{numPackets:null,packets:null,getSizeWithoutHeader:function(){for(var e=this.packets,n=new Array(e.length),t=0,l=e.length;t<l;){var s=t++;n[s]=2+3*e[s].colors.length}return 2+i.fold(n,function(e,n){return e+n},0)},toBytes:function(e){for(var n=null!=e?e:new Zl,t=(this.writeHeaderBytes(n),n.writeUInt16(this.numPackets),0),i=this.packets;t<i.length;)for(var l=i[t],s=(++t,n.writeByte(l.skipEntries),n.writeByte(l.numColors),0),r=l.colors;s<r.length;){var a=r[s];++s,n.writeByte(a.red),n.writeByte(a.green),n.writeByte(a.blue)}return n.getBytes()},toString:function(){for(var e=Oe.prototype.toString.call(this),n=" { numPackets: "+this.numPackets+", packets: [",t=this.packets,i=new Array(t.length),l=0,s=t.length;l<s;){var r=l++,a=t[r];i[r]="{ skipEntries: "+a.skipEntries+", numColors: "+a.numColors+" }"}return e+(n+i.join(", "))+"] }"},__class__:Ae}),(L["ase.chunks.PaletteChunkEntry"]=X).__name__="ase.chunks.PaletteChunkEntry",X.fromBytes=function(e){var n=new X,e=new $l(e);return n.flags=e.readUInt16(),n.red=e.readByte(),n.green=e.readByte(),n.blue=e.readByte(),n.alpha=e.readByte(),n.get_hasName()&&(n.name=e.readString(e.readUInt16())),n},X.prototype={flags:null,red:null,green:null,blue:null,alpha:null,name:null,get_hasName:function(){return 0!=(1&this.flags)},set_hasName:function(e){return this.flags|=e?1:0,e},toBytes:function(e){e=null!=e?e:new Zl;return e.writeUInt16(this.flags),e.writeByte(this.red),e.writeByte(this.green),e.writeByte(this.blue),e.writeByte(this.alpha),this.get_hasName()&&(e.writeUInt16(this.name.length),e.writeString(this.name)),e.getBytes()},toString:function(){return"(R: "+this.red+" G: "+this.green+" B: "+this.blue+" A: "+this.alpha+")"},__class__:X,__properties__:{set_hasName:"set_hasName",get_hasName:"get_hasName"}},function(e){null==e&&(e=!1),this.entries=new Hl,this.lastColorIndex=-1,this.firstColorIndex=0,this.paletteSize=0,Oe.call(this,e,8217)}),Ee=((L["ase.chunks.PaletteChunk"]=Se).__name__="ase.chunks.PaletteChunk",Se.fromBytes=function(e){for(var n=new Se,t=new $l(e),i=(n.paletteSize=t.readInt32(),n.firstColorIndex=t.readInt32(),n.lastColorIndex=t.readInt32(),t.read(8),t.pos,n.firstColorIndex),l=n.lastColorIndex+1;i<l;){var s=i++,r=X.fromBytes(t.read(6));n.entries.h[s]=r,0}return n},Se.fromPaletteEntries=function(e){for(var n=new Se(!0),t=0;t<e.length;){var i=e[t],l=(++t,new X);l.red=i.red,l.green=i.green,l.blue=i.blue,l.alpha=i.alpha,n.addEntry(l)}return n},Se.__super__=Oe,Se.prototype=$extend(Oe.prototype,{paletteSize:null,firstColorIndex:null,lastColorIndex:null,entries:null,getSizeWithoutHeader:function(){return 20+6*(this.lastColorIndex-this.firstColorIndex+1)},addEntry:function(e){this.lastColorIndex++,this.entries.h[this.lastColorIndex]=e,this.paletteSize++},toBytes:function(e){for(var n=null!=e?e:new Zl,t=(this.writeHeaderBytes(n),n.writeInt32(this.paletteSize),n.writeInt32(this.firstColorIndex),n.writeInt32(this.lastColorIndex),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),this.firstColorIndex),i=this.lastColorIndex+1;t<i;){var l=t++;this.entries.h[l].toBytes(n)}return n.getBytes()},toString:function(){return[Oe.prototype.toString.call(this),"paletteSize: "+this.paletteSize].join("\n")},__class__:Se}),(L["ase.chunks.SliceKey"]=Z).__name__="ase.chunks.SliceKey",Z.prototype={frameNumber:null,xOrigin:null,yOrigin:null,width:null,height:null,xCenter:null,yCenter:null,centerWidth:null,centerHeight:null,xPivot:null,yPivot:null,__class__:Z},function(e){null==e&&(e=!1),this.sliceKeys=[],Oe.call(this,e,8226)}),Me=((L["ase.chunks.SliceChunk"]=Ee).__name__="ase.chunks.SliceChunk",Ee.fromBytes=function(e){for(var n=new Ee,t=new $l(e),i=(n.numSliceKeys=t.readInt32(),n.flags=t.readInt32(),t.readInt32(),n.name=t.readString(t.readUInt16()),0),l=n.numSliceKeys;i<l;){i++;var s=new Z;s.frameNumber=t.readInt32(),s.xOrigin=t.readInt32(),s.yOrigin=t.readInt32(),s.width=t.readInt32(),s.height=t.readInt32(),0!=(1&n.flags)&&(n.has9Slices=!0,s.xCenter=t.readInt32(),s.yCenter=t.readInt32(),s.centerWidth=t.readInt32(),s.centerHeight=t.readInt32()),0!=(2&n.flags)&&(n.hasPivot=!0,s.xPivot=t.readInt32(),s.yPivot=t.readInt32()),n.sliceKeys.push(s)}return n},Ee.__super__=Oe,Ee.prototype=$extend(Oe.prototype,{numSliceKeys:null,flags:null,name:null,sliceKeys:null,has9Slices:null,hasPivot:null,getSizeWithoutHeader:function(){for(var e=14+this.name.length,n=this.sliceKeys,t=new Array(n.length),l=0,s=n.length;l<s;){var r=l++,a=20;this.has9Slices&&(a+=16),this.hasPivot&&(a+=8),t[r]=a}return e+i.fold(t,function(e,n){return n+e},0)},toBytes:function(e){for(var n=null!=e?e:new Zl,t=(this.writeHeaderBytes(n),n.writeInt32(this.numSliceKeys),n.writeInt32(this.flags),n.writeInt32(0),n.writeUInt16(this.name.length),n.writeString(this.name),0),i=this.sliceKeys;t<i.length;){var l=i[t];++t,n.writeInt32(l.frameNumber),n.writeInt32(l.xOrigin),n.writeInt32(l.yOrigin),n.writeInt32(l.width),n.writeInt32(l.height),0!=(1&this.flags)&&(n.writeInt32(l.xCenter),n.writeInt32(l.yCenter),n.writeInt32(l.centerWidth),n.writeInt32(l.centerHeight)),0!=(2&this.flags)&&(n.writeInt32(l.xPivot),n.writeInt32(l.yPivot))}return n.getBytes()},__class__:Ee}),function(e){null==e&&(e=!1),this.tags=[],Oe.call(this,e,8216)}),ke=((L["ase.chunks.TagsChunk"]=Me).__name__="ase.chunks.TagsChunk",Me.fromBytes=function(e){for(var n=new Me,t=new $l(e),i=(n.numTags=t.readUInt16(),t.read(8),0),l=n.numTags;i<l;){i++;var s={fromFrame:t.readUInt16(),toFrame:t.readUInt16(),animDirection:t.readByte(),reserved:t.read(8),tagColor:t.readInt24(),extraByte:t.readByte(),tagName:t.readString(t.readUInt16())};n.tags.push(s)}return n},Me.__super__=Oe,Me.prototype=$extend(Oe.prototype,{numTags:null,tags:null,getSizeWithoutHeader:function(){for(var e=this.tags,n=new Array(e.length),t=0,l=e.length;t<l;){var s=t++;n[s]=19+e[s].tagName.length}return 10+i.fold(n,function(e,n){return e+n},0)},toBytes:function(e){for(var n=null!=e?e:new Zl,t=(this.writeHeaderBytes(n),n.writeUInt16(this.numTags),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),0),i=this.tags;t<i.length;){var l=i[t];++t,n.writeInt16(l.fromFrame),n.writeInt16(l.toFrame),n.writeByte(l.animDirection),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeInt24(l.tagColor),n.writeByte(l.extraByte),n.writeUInt16(l.tagName.length),n.writeString(l.tagName)}return n.getBytes()},__class__:Me}),function(e){Oe.call(this,e=null==e?!1:e,8227)}),Ie=((L["ase.chunks.TilesetChunk"]=ke).__name__="ase.chunks.TilesetChunk",ke.fromBytes=function(e){var n=new ke,e=new $l(e);return n.id=e.readInt32(),n.flags=e.readInt32(),n.numTiles=e.readInt32(),n.width=e.readUInt16(),n.height=e.readUInt16(),n.baseIndex=e.readUInt16(),e.read(14),n.name=e.readString(e.readUInt16()),0!=(1&n.flags)&&(n.externalFileID=e.readInt32(),n.externalTilesetID=e.readInt32()),0!=(4&n.flags)&&(n.compressedDataLength=e.readInt32(),n.compressedTilesetImage=new kl(new ArrayBuffer(n.compressedDataLength)),e.readBytes(n.compressedTilesetImage,0,n.compressedDataLength),n.uncompressedTilesetImage=vs.run(new $l(n.compressedTilesetImage))),n},ke.__super__=Oe,ke.prototype=$extend(Oe.prototype,{id:null,flags:null,numTiles:null,width:null,height:null,baseIndex:null,reserved:null,name:null,externalFileID:null,externalTilesetID:null,compressedDataLength:null,compressedTilesetImage:null,uncompressedTilesetImage:null,getSizeWithoutHeader:function(){var e=34+this.name.length;return 1==this.flags&&(e+=8),2==this.flags&&(e+=4+this.compressedTilesetImage.length),e},toBytes:function(e){e=null!=e?e:new Zl;return e.writeInt32(this.id),e.writeInt32(this.flags),e.writeInt32(this.numTiles),e.writeUInt16(this.width),e.writeUInt16(this.height),e.writeUInt16(this.baseIndex),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeUInt16(this.name.length),e.writeString(this.name),1==this.flags&&(e.writeInt32(this.externalFileID),e.writeInt32(this.externalTilesetID)),2==this.flags&&(e.writeInt32(this.compressedDataLength),e.writeBytes(this.compressedTilesetImage,0,this.compressedDataLength)),e.getBytes()},__class__:ke}),function(e){Oe.call(this,e=null==e?!1:e,8224)}),Re=((L["ase.chunks.UserDataChunk"]=Ie).__name__="ase.chunks.UserDataChunk",Ie.fromBytes=function(e){var n=new Ie,e=new $l(e);return n.flags=e.readInt32(),n.hasText=0!=(1&n.flags),n.hasColor=0!=(2&n.flags),n.hasText&&(n.text=e.readString(e.readUInt16())),n.hasColor&&(n.red=e.readByte(),n.green=e.readByte(),n.blue=e.readByte(),n.alpha=e.readByte()),n},Ie.__super__=Oe,Ie.prototype=$extend(Oe.prototype,{flags:null,text:null,hasText:null,hasColor:null,red:null,green:null,blue:null,alpha:null,getSizeWithoutHeader:function(){return 4+(this.hasText?2+this.text.length:0)+(this.hasColor?4:0)},toBytes:function(e){e=null!=e?e:new Zl;return this.writeHeaderBytes(e),e.writeInt32(this.flags),this.hasText&&(e.writeUInt16(this.text.length),e.writeString(this.text)),this.hasColor&&(e.writeByte(this.red),e.writeByte(this.green),e.writeByte(this.blue),e.writeByte(this.alpha)),e.getBytes()},__class__:Ie}),function(){this.hotReload=!1,this.pendingAtlasPackers=null,this.atlasPacker=null,this.parent=null,this.reloadOnTextureDensityChange=!0,this.delayBetweenXAssets=-1,this.scheduleMethod=1,this.loadMethod=2,this.defaultImageOptions=null,this.runtimeAssets=null,this.immediate=new En,this.assetsByKindAndName=new z,this.addedAssets=[],l.call(this),Re.instances.push(this)}),Fe=((L["ceramic.Assets"]=Re).__name__="ceramic.Assets",Re.flushAllInstancesImmediate=function(){for(var e=Re.instances.length,n=0,t=e;n<t;){var i=n++;Re._instances[i]=Re.instances[i]}for(n=0,t=e;n<t;){var i=n++,l=Re._instances[i];Re._instances[i]=null,0<=l._lifecycleState&&l.immediate.flush()}},Re.decodePath=function(e){return new Ze(e)},Re.addAssetKind=function(e,n,t,i,l){var s=Re.customAssetKinds,n=new On(e,n,t,i,l);s.h[e]=n},Re.getAssetsPath=function(){return kt.getAssetsPath()},Re.assetNameFromPath=function(e){for(var n=Re.allByName.h,t=Object.keys(n),i=t.length,l=0;l<i;)for(var s=t[l++],r=Re.allByName.h[s],a=0,h=r.length;a<h;)if(r[a++]==e)return s;return null},Re.realAssetPath=function(e,n){return null!=n?null!=n.path?At.join([n.path,e]):e:e},Re.incrementReloadCount=function(e){e=At.normalize(e),null==Re.reloadCountByRealAssetPath&&(Re.reloadCountByRealAssetPath=new z),Object.prototype.hasOwnProperty.call(Re.reloadCountByRealAssetPath.h,e)?Re.reloadCountByRealAssetPath.h[e]+=1:Re.reloadCountByRealAssetPath.h[e]=1},Re.getReloadCount=function(e){return e=At.normalize(e),null!=Re.reloadCountByRealAssetPath&&Object.prototype.hasOwnProperty.call(Re.reloadCountByRealAssetPath.h,e)?Re.reloadCountByRealAssetPath.h[e]:0},Re.__super__=l,Re.prototype=$extend(l.prototype,{__cbOnComplete:null,__cbOnceComplete:null,__cbOnOwnerUnbindComplete:null,__cbOnceOwnerUnbindComplete:null,emitComplete:function(e){var n=0;if(null!=this.__cbOnComplete&&(n+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(n+=this.__cbOnceComplete.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnComplete)for(var s=0,r=this.__cbOnComplete.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnComplete[a],++l):--n}if(null!=this.__cbOnceComplete){for(var h=null,u=null,s=0,r=this.__cbOnceComplete.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceComplete[a],this.__cbOnceComplete[a]=null,c=this.__cbOnceOwnerUnbindComplete[a],(this.__cbOnceOwnerUnbindComplete[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindComplete[a]),u.push(this.__cbOnceComplete[a]))}this.__cbOnceOwnerUnbindComplete=h,this.__cbOnceComplete=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event complete because owner is destroyed!");var l=function(e){null!=t&&(i.offComplete(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(t)},onceComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event complete because owner is destroyed!");var l=function(e){null!=t&&(i.offComplete(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(t)},offComplete:function(e){if(null!=e){var n;null!=this.__cbOnComplete&&-1!=(n=this.__cbOnComplete.indexOf(e))&&(this.__cbOnComplete.splice(n,1),null!=(s=this.__cbOnOwnerUnbindComplete[n])&&s(),this.__cbOnOwnerUnbindComplete.splice(n,1)),null!=this.__cbOnceComplete&&-1!=(n=this.__cbOnceComplete.indexOf(e))&&(this.__cbOnceComplete.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindComplete[n])&&s(),this.__cbOnceOwnerUnbindComplete.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindComplete[l])&&s()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindComplete[l])&&s()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&0<this.__cbOnComplete.length||null!=this.__cbOnceComplete&&0<this.__cbOnceComplete.length},__cbOnUpdate:null,__cbOnceUpdate:null,__cbOnOwnerUnbindUpdate:null,__cbOnceOwnerUnbindUpdate:null,emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnUpdate)for(var s=0,r=this.__cbOnUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnUpdate[a],++l):--n}if(null!=this.__cbOnceUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,c=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),u.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindUpdate[n])&&s(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindUpdate[n])&&s(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindUpdate[l])&&s()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindUpdate[l])&&s()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},__cbOnProgress:null,__cbOnceProgress:null,__cbOnOwnerUnbindProgress:null,__cbOnceOwnerUnbindProgress:null,emitProgress:function(e,n,t){var i=0;if(null!=this.__cbOnProgress&&(i+=this.__cbOnProgress.length),null!=this.__cbOnceProgress&&(i+=this.__cbOnceProgress.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnProgress)for(var a=0,h=this.__cbOnProgress.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnProgress[u],++r):--i}if(null!=this.__cbOnceProgress){for(var c=null,o=null,a=0,h=this.__cbOnceProgress.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceProgress[u],this.__cbOnceProgress[u]=null,_=this.__cbOnceOwnerUnbindProgress[u],(this.__cbOnceOwnerUnbindProgress[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindProgress[u]),o.push(this.__cbOnceProgress[u]))}this.__cbOnceOwnerUnbindProgress=c,this.__cbOnceProgress=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onProgress:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event progress because owner is destroyed!");var l=function(e){null!=t&&(i.offProgress(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindProgress&&(this.__cbOnOwnerUnbindProgress=[]),this.__cbOnOwnerUnbindProgress.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindProgress&&(this.__cbOnOwnerUnbindProgress=[]),this.__cbOnOwnerUnbindProgress.push(null);null==this.__cbOnProgress&&(this.__cbOnProgress=[]),this.__cbOnProgress.push(t)},onceProgress:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event progress because owner is destroyed!");var l=function(e){null!=t&&(i.offProgress(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindProgress&&(this.__cbOnceOwnerUnbindProgress=[]),this.__cbOnceOwnerUnbindProgress.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindProgress&&(this.__cbOnceOwnerUnbindProgress=[]),this.__cbOnceOwnerUnbindProgress.push(null);null==this.__cbOnceProgress&&(this.__cbOnceProgress=[]),this.__cbOnceProgress.push(t)},offProgress:function(e){if(null!=e){var n;null!=this.__cbOnProgress&&-1!=(n=this.__cbOnProgress.indexOf(e))&&(this.__cbOnProgress.splice(n,1),null!=(s=this.__cbOnOwnerUnbindProgress[n])&&s(),this.__cbOnOwnerUnbindProgress.splice(n,1)),null!=this.__cbOnceProgress&&-1!=(n=this.__cbOnceProgress.indexOf(e))&&(this.__cbOnceProgress.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindProgress[n])&&s(),this.__cbOnceOwnerUnbindProgress.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindProgress){for(var t=0,i=this.__cbOnOwnerUnbindProgress.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindProgress[l])&&s()}this.__cbOnOwnerUnbindProgress=null}if(null!=this.__cbOnceOwnerUnbindProgress){for(t=0,i=this.__cbOnceOwnerUnbindProgress.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindProgress[l])&&s()}this.__cbOnceOwnerUnbindProgress=null}this.__cbOnProgress=null,this.__cbOnceProgress=null}},listensProgress:function(){return null!=this.__cbOnProgress&&0<this.__cbOnProgress.length||null!=this.__cbOnceProgress&&0<this.__cbOnceProgress.length},__cbOnAssetFilesChange:null,__cbOnceAssetFilesChange:null,__cbOnOwnerUnbindAssetFilesChange:null,__cbOnceOwnerUnbindAssetFilesChange:null,emitAssetFilesChange:function(e,n){var t=0;if(null!=this.__cbOnAssetFilesChange&&(t+=this.__cbOnAssetFilesChange.length),null!=this.__cbOnceAssetFilesChange&&(t+=this.__cbOnceAssetFilesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnAssetFilesChange)for(var r=0,a=this.__cbOnAssetFilesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnAssetFilesChange[h],++s):--t}if(null!=this.__cbOnceAssetFilesChange){for(var u=null,c=null,r=0,a=this.__cbOnceAssetFilesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceAssetFilesChange[h],this.__cbOnceAssetFilesChange[h]=null,o=this.__cbOnceOwnerUnbindAssetFilesChange[h],(this.__cbOnceOwnerUnbindAssetFilesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindAssetFilesChange[h]),c.push(this.__cbOnceAssetFilesChange[h]))}this.__cbOnceOwnerUnbindAssetFilesChange=u,this.__cbOnceAssetFilesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onAssetFilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event assetFilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offAssetFilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindAssetFilesChange&&(this.__cbOnOwnerUnbindAssetFilesChange=[]),this.__cbOnOwnerUnbindAssetFilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindAssetFilesChange&&(this.__cbOnOwnerUnbindAssetFilesChange=[]),this.__cbOnOwnerUnbindAssetFilesChange.push(null);null==this.__cbOnAssetFilesChange&&(this.__cbOnAssetFilesChange=[]),this.__cbOnAssetFilesChange.push(t)},onceAssetFilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event assetFilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offAssetFilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindAssetFilesChange&&(this.__cbOnceOwnerUnbindAssetFilesChange=[]),this.__cbOnceOwnerUnbindAssetFilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindAssetFilesChange&&(this.__cbOnceOwnerUnbindAssetFilesChange=[]),this.__cbOnceOwnerUnbindAssetFilesChange.push(null);null==this.__cbOnceAssetFilesChange&&(this.__cbOnceAssetFilesChange=[]),this.__cbOnceAssetFilesChange.push(t)},offAssetFilesChange:function(e){if(null!=e){var n;null!=this.__cbOnAssetFilesChange&&-1!=(n=this.__cbOnAssetFilesChange.indexOf(e))&&(this.__cbOnAssetFilesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindAssetFilesChange[n])&&s(),this.__cbOnOwnerUnbindAssetFilesChange.splice(n,1)),null!=this.__cbOnceAssetFilesChange&&-1!=(n=this.__cbOnceAssetFilesChange.indexOf(e))&&(this.__cbOnceAssetFilesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindAssetFilesChange[n])&&s(),this.__cbOnceOwnerUnbindAssetFilesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindAssetFilesChange){for(var t=0,i=this.__cbOnOwnerUnbindAssetFilesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindAssetFilesChange[l])&&s()}this.__cbOnOwnerUnbindAssetFilesChange=null}if(null!=this.__cbOnceOwnerUnbindAssetFilesChange){for(t=0,i=this.__cbOnceOwnerUnbindAssetFilesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindAssetFilesChange[l])&&s()}this.__cbOnceOwnerUnbindAssetFilesChange=null}this.__cbOnAssetFilesChange=null,this.__cbOnceAssetFilesChange=null}},listensAssetFilesChange:function(){return null!=this.__cbOnAssetFilesChange&&0<this.__cbOnAssetFilesChange.length||null!=this.__cbOnceAssetFilesChange&&0<this.__cbOnceAssetFilesChange.length},addedAssets:null,assetsByKindAndName:null,immediate:null,runtimeAssets:null,defaultImageOptions:null,loadMethod:null,scheduleMethod:null,delayBetweenXAssets:null,reloadOnTextureDensityChange:null,parent:null,atlasPacker:null,pendingAtlasPackers:null,destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),h.remove(Re.instances,this);for(var e,n=0,t=[].concat(this.addedAssets);n<t.length;){var i=t[n];++n,i.offDestroy($bind(this,this.assetDestroyed)),i.destroy()}if(this.addedAssets=null,(this.assetsByKindAndName=null)!=this.atlasPacker&&(e=this.atlasPacker,this.atlasPacker=null,e.destroy()),null!=this.pendingAtlasPackers)for(var s=this.pendingAtlasPackers,n=(this.pendingAtlasPackers=null,0),t=s.length;n<t;)s[n++].destroy()}},flush:function(){for(var e=0,n=[].concat(this.addedAssets);e<n.length;){var t=n[e];++e,0==t.refCount&&t.destroy()}},hasAsset:function(e){return-1!=this.addedAssets.indexOf(e)},add:function(e,n,t){var i="string"==typeof e?e:N.field(e,"_id"),l=i.indexOf(":");if(-1==l)throw Q.thrown("Assets: invalid asset id: "+e);var s=h.substr(i,0,l),r=h.substr(i,l+1,null);switch(s){case"atlas":this.addAtlas(r,n,t);break;case"binary":this.addBinary(r,n,t);break;case"database":this.addDatabase(r,n,t);break;case"font":this.addFont(r,n,t);break;case"fragments":this.addFragments(r,n,t);break;case"image":this.addImage(r,n,t);break;case"shader":this.addShader(r,n,t);break;case"sound":this.addSound(r,n,t);break;case"text":this.addText(r,n,t);break;default:if(!Object.prototype.hasOwnProperty.call(Re.customAssetKinds.h,s))throw Q.thrown("Assets: invalid asset kind ("+s+") for id: "+e);Re.customAssetKinds.h[s].add(this,r,n,t)}},addAll:function(e){he.app.backend.info;for(var n,t,i=(i=["png","jpg","jpeg"]).concat(["ase","aseprite"]),l=["txt","json","fnt","atlas"],s=(null!=We._soundExtensions||(We._soundExtensions=[],f=new Audio,d=null!=ie.navigator?ie.navigator.userAgent:"",t=We.RE_OPERA.match(d)&&parseInt(We.RE_OPERA.matched(0).split("/")[1],10)<33,n=-1!=d.indexOf("Safari")&&-1==d.indexOf("Chrome"),d=We.RE_SAFARI_VERSION.match(d),n&&d&&parseInt(We.RE_SAFARI_VERSION.matched(1),10),null!=(n=f.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=n&&""!=n&&We._soundExtensions.push("ogg"),d=f.canPlayType("audio/mpeg;"),n=f.canPlayType("audio/mp3;"),!t&&(null!=d&&"no"!=d&&""!=d||null!=n&&"no"!=n&&""!=n)&&We._soundExtensions.push("mp3"),t=f.canPlayType("audio/x-flac;"),d=f.canPlayType("audio/flac;"),(null!=t&&"no"!=t&&""!=t||null!=d&&"no"!=d&&""!=d)&&We._soundExtensions.push("flac"),n=f.canPlayType('audio/wav; codecs="1"'),t=f.canPlayType("audio/wav;"),(null!=n&&"no"!=n&&""!=n||null!=t&&"no"!=t&&""!=t)&&We._soundExtensions.push("wav")),[].concat(We._soundExtensions)),r=["frag","vert"],a=["fnt","ttf","otf"],h=["atlas"],u=["csv"],c=["fragments"],o=[],_=[],d=Re.customAssetKinds.h,P=d,b=Object.keys(d),B=b.length,g=0;g<B;){var O=P[b[g++]];o.push(O.extensions),_.push(O.add)}for(var f=Re.allByName,L=d=(f=null!=this.runtimeAssets?this.runtimeAssets.getLists().allByName:f).h,p=Object.keys(d),N=p.length,m=0;m<N;){var w=p[m++],v=w,y=L[w];if(null!=e){for(var C=!1,U=0,W=y.length;U<W;){var G=U++;if(e.match(y[G])){C=!0;break}}if(!C)continue}for(var x=At.extension(y[0]),T=!1,D=0,H=i.length;D<H;)if(i[D++]==x){this.addImage(v),T=!0;break}if(!T)for(var A=0,z=s.length;A<z;)if(s[A++]==x){this.addSound(v),T=!0;break}if(!T)for(var S=0,K=r.length;S<K;)if(r[S++]==x){this.addShader(v),T=!0;break}if(!T)for(var E=0,X=a.length;E<X;)if(a[E++]==x){this.addFont(v),T=!0;break}if(!T)for(var M=0,Y=h.length;M<Y;)if(h[M++]==x){this.addAtlas(v),T=!0;break}if(!T)for(var k=0,V=u.length;k<V;)if(u[k++]==x){this.addDatabase(v),T=!0;break}if(!T)for(var I=0,q=c.length;I<q;)if(c[I++]==x){this.addFragments(v),T=!0;break}if(!T)for(var R=0,j=o.length;R<j;){for(var F=R++,Q=o[F],$=0,Z=Q.length;$<Z;)if(Q[$++]==x){(0,_[F])(this,null,v,null),T=!0;break}if(T)break}if(!T)for(var J=0,ee=l.length;J<ee;)if(l[J++]==x){this.addText(v),T=!0;break}}},addImage:function(e,n,t){B.startsWith(e,"image:")&&(e=h.substr(e,6,null)),this.addAsset(new Sn(e,n,t))},addFont:function(e,n,t){B.startsWith(e,"font:")&&(e=h.substr(e,5,null)),this.addAsset(new xn(e,n,t))},addAtlas:function(e,n,t){B.startsWith(e,"atlas:")&&(e=h.substr(e,6,null)),this.addAsset(new en(e,n,t))},addText:function(e,n,t){B.startsWith(e,"text:")&&(e=h.substr(e,5,null)),this.addAsset(new ei(e,n,t))},addBinary:function(e,n,t){B.startsWith(e,"binary:")&&(e=h.substr(e,7,null)),this.addAsset(new ln(e,n,t))},addSound:function(e,n,t){B.startsWith(e,"sound:")&&(e=h.substr(e,6,null)),this.addAsset(new Qt(e,n,t))},addDatabase:function(e,n,t){B.startsWith(e,"database:")&&(e=h.substr(e,9,null)),this.addAsset(new fn(e,n,t))},addFragments:function(e,n,t){B.startsWith(e,"fragments:")&&(e=h.substr(e,10,null)),this.addAsset(new Tn(e,n,t))},addShader:function(e,n,t){B.startsWith(e,"shader:")&&(e=h.substr(e,7,null)),this.addAsset(new Yt(e,n,t))},addAsset:function(e){Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,e.kind)||(t=this.assetsByKindAndName,i=e.kind,n=new z,t.h[i]=n);var n,t=this.assetsByKindAndName.h[e.kind],i=(e instanceof Sn&&(e.defaultImageOptions=this.defaultImageOptions),t.h[e.fullName]);if(null!=i){if(i==e)return he.app.logger.warning("Cannot add asset "+V.string(e)+" because it is already added for name: "+e.fullName+".",{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:421,className:"ceramic.Assets",methodName:"addAsset"}),i;he.app.logger.info("Replace "+V.string(i)+" with "+V.string(e),{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:418,className:"ceramic.Assets",methodName:"addAsset"}),this.removeAsset(i)}return e.onDestroy(this,$bind(this,this.assetDestroyed)),null!=(t.h[e.fullName]=e).owner&&e.owner!=this&&e.owner.removeAsset(e),this.addedAssets.push(e),e.owner=this,e.set_runtimeAssets(this.runtimeAssets),e.set_hotReload(this.hotReload),i},assetDestroyed:function(e){for(var n=null,t=0,i=this.addedAssets;t<i.length;){var l=i[t];++t,l._lifecycleState<0&&(n=null==n?[]:n).push(l)}if(null!=n)for(t=0;t<n.length;){l=n[t];++t,this.removeAsset(l)}},imageAsset:function(e,n){return this.asset(e,"image",n)},fontAsset:function(e,n){return this.asset(e,"font",n)},atlasAsset:function(e,n){return this.asset(e,"atlas",n)},textAsset:function(e,n){return this.asset(e,"text",n)},soundAsset:function(e,n){return this.asset(e,"sound",n)},databaseAsset:function(e,n){return this.asset(e,"database",n)},fragmentsAsset:function(e,n){return this.asset(e,"fragments",n)},shaderAsset:function(e,n){return this.asset(e,"shader",n)},asset:function(e,n,t){var i="string"==typeof e?e:N.field(e,"_id"),l=i.indexOf(":"),s=i;return-1!=l&&(s=i.substring(l+1),n=i.substring(0,l)),null!=t&&(s+=":"+t),null==n||null==(i=this.assetsByKindAndName.h[n])||null==(l=i.h[s])?null!=this.parent?this.parent.asset(e,n,t):null:l},removeAsset:function(e){e.offDestroy($bind(this,this.assetDestroyed));var n=this.assetsByKindAndName.h[e.kind],t=n.h[e.fullName];if(e!=t)throw Q.thrown("Cannot remove asset "+V.string(e)+" if it was not added at the first place (existing: "+V.string(t)+").");h.remove(this.addedAssets,e);t=e.fullName;Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t],e.owner=null},moveAll:function(e){for(var n=[].concat(this.addedAssets),t=0,i=n.length;t<i;){var l=n[t++];this.removeAsset(l),e.addAsset(l)}},hasAnythingToLoad:function(){for(var e=0,n=this.addedAssets.length;e<n;){var t=e++;if(this.addedAssets[t].get_status()==Je.NONE)return!0}return!1},countAssetsWithStatus:function(e){for(var n=0,t=(this.addedAssets,0),i=this.addedAssets.length;t<i;){var l=t++;this.addedAssets[l].get_status()==e&&++n}return n},load:function(e,t){null==e&&(e=!0);for(var i=this,l=0,s=0,r=!0,n=[].concat(this.addedAssets),a=0;a<n.length;){var h=[n[a]];++a,h[0].get_status()==Je.NONE&&(h[0].onceComplete(this,function(n){return function(e){e||(r=!1,he.app.logger.error("Failed to load asset "+n[0].name+" ("+V.string(n[0])+")",t)),--s,i.emitProgress(l-s,l,r),0==s&&i._prepareComplete(r)}}(h)),s+=1,l+=1)}if(0<s){if(2==this.scheduleMethod){for(var u=[],a=0;a<n.length;){var c=n[a];++a,c.get_status()==Je.NONE&&u.push(c)}this._loadNextSerial(u,0)}else if(0<this.delayBetweenXAssets){for(u=[],a=0;a<n.length;){c=n[a];++a,c.get_status()==Je.NONE&&u.push(c)}this._loadNextParallel(u,0)}else for(a=0;a<n.length;){c=n[a];++a,c.get_status()==Je.NONE&&c.load()}this.immediate.flush()}else e&&he.app.logger.warning("There was no asset to load.",t),this._prepareComplete(!0)},_prepareComplete:function(e){var n=this;null!=this.pendingAtlasPackers&&0<this.pendingAtlasPackers.length?this._packNextAtlasPacker(function(){n._prepareComplete(e)}):this.emitComplete(!0)},_packNextAtlasPacker:function(n){this.pendingAtlasPackers.shift().pack(function(e){n()})},addPendingAtlasPacker:function(e){null==this.pendingAtlasPackers&&(this.pendingAtlasPackers=[]),-1==this.pendingAtlasPackers.indexOf(e)&&this.pendingAtlasPackers.push(e)},_loadNextSerial:function(n,t){var i=this,e=n.shift();e.get_status()==Je.NONE?(e.load(),e.onceComplete(this,function(e){i._assetCompleteSerial(e,n,t)})):0<n.length&&this._loadNextSerial(n,t)},_assetCompleteSerial:function(e,n,t){var i=this;t+=1,0<n.length&&(0<this.delayBetweenXAssets&&0<t&&t%this.delayBetweenXAssets==0?he.app.onceXUpdates(this,2,function(){i._loadNextSerial(n,t)}):this._loadNextSerial(n,t))},_loadNextParallel:function(e,n){var t=this;0<e.length&&(1<(n+=1)&&n%this.delayBetweenXAssets==0?he.app.onceXUpdates(this,2,function(){e.shift().load(),t._loadNextParallel(e,n)}):(e.shift().load(),this._loadNextParallel(e,n)))},ensure:function(e,n,t,i){var l=this.asset(e,null,n),s=null;null==(s=null==l?(this.add(e,n,t),this.asset(e,null,n)):l)?i(null):s.get_status()==Je.READY?i(s):s.get_status()==Je.LOADING||s.get_status()==Je.NONE?(s.onceComplete(null,function(e){i(e?s:null)}),s.get_status()==Je.NONE&&this.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:801,className:"ceramic.Assets",methodName:"ensure"})):i(null)},ensureImage:function(e,n,t,i){B.startsWith(e,"image:")||(e="image:"+e),this.ensure(e,n,t,function(e){i(e instanceof Sn?e:null)})},ensureFont:function(e,n,t,i){B.startsWith(e,"font:")||(e="font:"+e),this.ensure(e,n,t,function(e){i(e instanceof xn?e:null)})},ensureAtlas:function(e,n,t,i){B.startsWith(e,"atlas:")||(e="atlas:"+e),this.ensure(e,n,t,function(e){i(e instanceof en?e:null)})},ensureText:function(e,n,t,i){B.startsWith(e,"text:")||(e="text:"+e),this.ensure(e,n,t,function(e){i(e instanceof ei?e:null)})},ensureSound:function(e,n,t,i){B.startsWith(e,"sound:")||(e="sound:"+e),this.ensure(e,n,t,function(e){i(e instanceof Qt?e:null)})},ensureDatabase:function(e,n,t,i){B.startsWith(e,"database:")||(e="database:"+e),this.ensure(e,n,t,function(e){i(e instanceof fn?e:null)})},ensureShader:function(e,n,t,i){B.startsWith(e,"shader:")||(e="shader:"+e),this.ensure(e,n,t,function(e){i(e instanceof Yt?e:null)})},texture:function(e,n){var t=e;return B.startsWith(t,"image:")&&(t=h.substr(t,6,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"image")||null==(t=this.assetsByKindAndName.h.image.h[t])?null!=this.parent?this.parent.texture(e,n):null:t.get_texture()},font:function(e,n){var t=e;return B.startsWith(t,"font:")&&(t=h.substr(t,5,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"font")||null==(t=this.assetsByKindAndName.h.font.h[t])?null!=this.parent?this.parent.font(e,n):null:t.get_font()},atlas:function(e,n){var t=e;return B.startsWith(t,"atlas:")&&(t=h.substr(t,6,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"atlas")||null==(t=this.assetsByKindAndName.h.atlas.h[t])?null!=this.parent?this.parent.atlas(e,n):null:t.get_atlas()},sound:function(e,n){var t=e;return B.startsWith(t,"sound:")&&(t=h.substr(t,6,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"sound")||null==(t=this.assetsByKindAndName.h.sound.h[t])?null!=this.parent?this.parent.sound(e,n):null:t.get_sound()},text:function(e,n){var t=e;return B.startsWith(t,"text:")&&(t=h.substr(t,5,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"text")||null==(t=this.assetsByKindAndName.h.text.h[t])?null!=this.parent?this.parent.text(e,n):null:t.get_text()},bytes:function(e,n){var t=e;return B.startsWith(t,"binary:")&&(t=h.substr(t,7,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"binary")||null==(t=this.assetsByKindAndName.h.binary.h[t])?null!=this.parent?this.parent.bytes(e,n):null:t.get_bytes()},shader:function(e,n){var t=e;return B.startsWith(t,"shader:")&&(t=h.substr(t,7,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"shader")||null==(t=this.assetsByKindAndName.h.shader.h[t])?null!=this.parent?this.parent.shader(e,n):null:t.get_shader()},database:function(e,n){var t=e;return B.startsWith(t,"database:")&&(t=h.substr(t,9,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"database")||null==(t=this.assetsByKindAndName.h.database.h[t])?null!=this.parent?this.parent.database(e,n):null:t.get_database()},fragments:function(e,n){var t=e;return B.startsWith(t,"fragments:")&&(t=h.substr(t,10,null)),null!=n&&(t+=":"+n),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"fragments")||null==(t=this.assetsByKindAndName.h.fragments.h[t])?null!=this.parent?this.parent.fragments(e,n):null:t.get_fragments()},iterator:function(){for(var e=[],n=this.assetsByKindAndName.h,t=n,i=Object.keys(n),l=i.length,s=0;s<l;)for(var r=n=t[i[s++]].h,a=Object.keys(n),h=a.length,u=0;u<h;){var c=r[a[u++]];e.push(c)}return new ls(e)},hotReload:null,set_hotReload:function(e){if(this.hotReload!=e){this.hotReload=e;for(var n=0,t=this.addedAssets;n<t.length;){var i=t[n];++n,i.set_hotReload(e)}}return e},watchDirectory:function(d,e){null==e&&(e=!0);var b=this;if(null!=this.runtimeAssets)throw Q.thrown("There is already an instance of RuntimeAssets assigned. Cannot watch a directory, which also need its own instance");if(null==d)throw Q.thrown("Cannot watch directory when using web target! (unless using electron runner and `ceramic_use_electron` define)");null==this.defaultImageOptions&&(this.defaultImageOptions={}),this.defaultImageOptions.premultiplyAlpha=!0,e&&this.set_hotReload(e),this.runtimeAssets=Wt.fromPath(d);var n=new ki;return n.watchDirectory(d),n.onDirectoryChange(this,function(e,n,t){if(null==b.runtimeAssets?he.app.logger.warning("Missing instance of RuntimeAssets when watched directory changed (path: "+d+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Assets.hx",lineNumber:1087,className:"ceramic.Assets",methodName:"watchDirectory"}):b.runtimeAssets.reset(Cn.getFlatDirectory(d),d),null==Re.lastModifiedByRealAssetPath){Re.lastModifiedByRealAssetPath=new z;for(var i=u=t.h,l=(c=Object.keys(u)).length,s=0;s<l;){var r=_=c[s++],a=i[_],h=Re.realAssetPath(r,b.runtimeAssets);Re.lastModifiedByRealAssetPath.h[h]=a}}for(var u,c,o=new z,i=u=n.h,l=(c=Object.keys(u)).length,s=0;s<l;){var _,r=_=c[s++],a=i[_],h=Re.realAssetPath(r,b.runtimeAssets);o.h[h]=a,Object.prototype.hasOwnProperty.call(Re.lastModifiedByRealAssetPath.h,h)&&a!=Re.lastModifiedByRealAssetPath.h[h]&&Re.incrementReloadCount(h)}Re.lastModifiedByRealAssetPath=o,b.emitAssetFilesChange(n,t)}),this.onDestroy(n,function(e){n.destroy()}),n},inheritRuntimeAssetsFromAssets:function(e){this.runtimeAssets=e.runtimeAssets,this.defaultImageOptions=e.defaultImageOptions},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offComplete(),this.offUpdate(),this.offProgress(),this.offAssetFilesChange()},__class__:Re,__properties__:$extend(l.prototype.__properties__,{set_hotReload:"set_hotReload"})}),(L["assets.AllAssets"]=da).__name__="assets.AllAssets",da.bind=function(){Re.all=da.all,Re.allDirs=da.allDirs,Re.allDirsByName=da.allDirsByName,Re.allByName=da.allByName},function(){}),Pe=((L["assets.Tilemaps"]=Fe).__name__="assets.Tilemaps",(L["spec.Audio"]=fa).__name__="spec.Audio",fa.__isInterface__=!0,fa.prototype={load:null,createFromSamplesBuffer:null,supportsHotReloadPath:null,getDuration:null,resumeAudioContext:null,destroy:null,mute:null,play:null,pause:null,resume:null,stop:null,getVolume:null,setVolume:null,getPan:null,setPan:null,getPitch:null,setPitch:null,getPosition:null,setPosition:null,addFilter:null,removeFilter:null,filterParamsChanged:null,__class__:fa},(L["backend.Audio"]=ga).__name__="backend.Audio",ga.__interfaces__=[fa],ga._clayFilterCreate=function(e,n){var t;if(t=ga.activeBusFilters.length>e&&null!=(t=ga.activeBusFilters[e])&&t,ga.activeBusFilters[e]=!0,!t&&ga.busFilterReadyCallbacks.length>e&&0<ga.busFilterReadyCallbacks[e].length){for(var i=[];0<ga.busFilterReadyCallbacks[e].length;)i.push(ga.busFilterReadyCallbacks[e].shift());ga._notifyCallbacksInMainThread(i)}},ga._notifyCallbacksInMainThread=function(i){Nt.runInMain(function(){for(var e=0,n=i.length;e<n;){var t=e++;(0,i[t])()}})},ga._clayFilterDestroy=function(e,n){ga.activeBusFilters[e]=!1},ga.prototype={load:function(u,e,n){function qO(e){function zO(){n(e),n=null}null!=s?s.push(zO):he.app._onceImmediate(zO)}var t,i,c=this,l=null!=e&&2==e.loadMethod,s=null!=e?e.immediate:null,e=null!=e&&1==e.stream,r=B.startsWith(u,"http://")||B.startsWith(u,"https://");At.isAbsolute(u)||r||(u=At.join([he.app.settings.assetsPath,u])),Object.prototype.hasOwnProperty.call(this.loadedAudioResources.h,u)?(this.loadedAudioRetainCount.h[u]+=1,t=this.loadedAudioResources.h[u],qO(t)):Object.prototype.hasOwnProperty.call(this.loadingAudioCallbacks.h,u)?this.loadingAudioCallbacks.h[u].push(function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(c.loadedAudioRetainCount.h,u)?c.loadedAudioRetainCount.h[u]:0,c.loadedAudioRetainCount.h[u]=n+1),qO(e)}):(t=u,r||-1!=(i=t.indexOf("?"))&&(t=h.substr(t,0,i)),this.loadingAudioCallbacks.h[u]=[function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(c.loadedAudioRetainCount.h,u)?c.loadedAudioRetainCount.h[u]:0,c.loadedAudioRetainCount.h[u]=n+1),qO(e)}],i=r?t:C.app.assets.fullPath(t),C.app.audio.loadData(i,e,null,!l,function(e){if(null==e)for(var n=c.loadingAudioCallbacks.h[u],t=c.loadingAudioCallbacks,i=(Object.prototype.hasOwnProperty.call(t.h,u)&&delete t.h[u],0);i<n.length;){var l=n[i];++i;try{l(null)}catch(e){Al.lastError=e;l=[Q.caught(e).unwrap()];he.app._onceImmediate(function(e){return function(){throw Q.thrown(e[0])}}(l))}}else for(var s=new zi(C.app,e),r=(c.loadedAudioResources.h[u]=s,c.loadingAudioCallbacks.h[u]),t=c.loadingAudioCallbacks,a=(Object.prototype.hasOwnProperty.call(t.h,u)&&delete t.h[u],0);a<r.length;){var h=r[a];++a,h(s)}}),null!=s?s.push(Bi.flush):he.app._onceImmediate(Bi.flush))},nextSamplesBufferIndex:null,createFromSamplesBuffer:function(e,n,t,i,l){var s="samples:"+this.nextSamplesBufferIndex++,e=C.app.audio.dataFromPCM(s,e,n,t,i,l);return null!=e?(n=new zi(C.app,e),this.loadedAudioResources.h[s]=n,this.loadedAudioRetainCount.h[s]=1,n):null},getDuration:function(e){return e.getDuration()},resumeAudioContext:function(e){var n=C.app.audio;if(null!=n)try{n.context.resume().then(function(){e(!0)},function(){e(!1)})}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();he.app.logger.error("Failed to resume audio context: "+V.string(n),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:172,className:"backend.Audio",methodName:"resumeAudioContext"})}},supportsHotReloadPath:function(){return!0},destroy:function(e){for(var n=null,t=this.loadedAudioResources.h,i=t,l=Object.keys(t),s=l.length,r=0;r<s;){var a=l[r++];i[a]==e&&(n=a)}null==n?he.app.logger.error("Failed to destroy audio resource: "+V.string(e)+" because id could not be resolved",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:198,className:"backend.Audio",methodName:"destroy"}):1<this.loadedAudioRetainCount.h[n]?--this.loadedAudioRetainCount.h[n]:(t=this.loadedAudioResources,Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],t=this.loadedAudioRetainCount,Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],e.destroy())},mute:function(e){return-1},play:function(e,n,t,i,l,s,r){var a;return null==r&&(r=0),null==l&&(l=0),null==i&&(i=1),null==t&&(t=0),null==n&&(n=.5),C.app.audio.active?((e=e).data.isStream&&(i=1,t=l=0),a=(s=(a=null)==s?!1:s)?C.app.audio.loop(e,n,!1,r):C.app.audio.play(e,n,!1,r),0!=t&&C.app.audio.pan(a,t),1!=i&&C.app.audio.pitch(a,i),0!=l&&C.app.audio.position(a,l),a):-1},pause:function(e){C.app.audio.active&&null!=e&&-1!=e&&C.app.audio.pause(e)},resume:function(e){C.app.audio.active&&null!=e&&-1!=e&&C.app.audio.unPause(e)},stop:function(e){C.app.audio.active&&null!=e&&-1!=e&&null!=e&&-1!=e&&C.app.audio.stop(e)},getVolume:function(e){return!C.app.audio.active||null==e||-1==e?0:C.app.audio.volumeOf(e)},setVolume:function(e,n){C.app.audio.active&&null!=e&&-1!=e&&C.app.audio.volume(e,n)},getPan:function(e){return!C.app.audio.active||null==e||-1==e?0:C.app.audio.panOf(e)},setPan:function(e,n){var t;!C.app.audio.active||null==e||-1==e||null!=(t=C.app.audio.instanceOf(e))&&t.source.data.isStream||C.app.audio.pan(e,n)},getPitch:function(e){return!C.app.audio.active||null==e||-1==e?1:C.app.audio.pitchOf(e)},setPitch:function(e,n){var t;!C.app.audio.active||null==e||-1==e||null!=(t=C.app.audio.instanceOf(e))&&t.source.data.isStream||C.app.audio.pitch(e,n)},getPosition:function(e){return!C.app.audio.active||null==e||-1==e?0:C.app.audio.positionOf(e)},setPosition:function(e,n){var t;!C.app.audio.active||null==e||-1==e||null!=(t=C.app.audio.instanceOf(e))&&t.source.data.isStream||C.app.audio.position(e,n)},addFilter:function(e,n,t){var i=new Mi(function(){t(e)}),l=i.callback(),i=i.callback(),s=!1,r=ga.filterIdsByBus[e],a=(null==r&&(ga.filterIdsByBus[e]=r=[],s=!0),n.workletClass()),h=(r.push(new Pe(n.filterId,null,null,a,n)),function(){C.app.audio.addBusFilterWorklet(e,n.filterId,a,function(){l()})});s&&C.app.audio.createBusFilter("audio-worklets.min.js",e,function(e,n){ga._clayFilterCreate(e,n),null!=h&&(e=h,h=null,e())},ga._clayFilterDestroy),ga.activeBusFilters.length>e&&null!=(r=ga.activeBusFilters[e])&&r?i():(null==ga.busFilterReadyCallbacks[e]&&(ga.busFilterReadyCallbacks[e]=[]),ga.busFilterReadyCallbacks[e].push(i))},removeFilter:function(e,n){var t=ga.filterIdsByBus[e];if(null!=t){for(var i=-1,l=0,s=t.length;l<s;){var r=l++,a=t[r];if(a.id==n){i=r,0;break}}-1!=i&&t.splice(i,1)}C.app.audio.destroyBusFilterWorklet(e,n)},filterParamsChanged:function(e,n){var t=ga.filterIdsByBus[e];if(null!=t)for(var i=0,l=0,s=t.length;l<s;){var r=t[l++],a=r.filter;if(r.id==n){for(var h=0,u=a.numParams();h<u;){var c=h++;C.app.audio.setWorkletParameterByIndexWhenReady(e,i,a.params[c]),++i}break}i+=a.numParams()}},loadingAudioCallbacks:null,loadedAudioResources:null,loadedAudioRetainCount:null,__class__:ga},function(e,n,t,i,l){this.worklet=null,this.paramsDirty=!0,this.id=e,null!=n&&(this.paramsDirty=n),null!=t&&(this.worklet=t),this.workletClass=i,this.filter=l}),Be=((L["backend.AudioFilterInfo"]=Pe).__name__="backend.AudioFilterInfo",Pe.prototype={id:null,paramsDirty:null,worklet:null,workletClass:null,filter:null,__class__:Pe},(L["spec.Backend"]=ka).__name__="spec.Backend",ka.__isInterface__=!0,ka.prototype={init:null,setTargetFps:null,io:null,info:null,audio:null,draw:null,texts:null,binaries:null,textures:null,screen:null,textInput:null,clipboard:null,__class__:ka},(L["backend.Backend"]=la).__name__="backend.Backend",la.__interfaces__=[ka,k],la.prototype={io:null,info:null,audio:null,draw:null,texts:null,binaries:null,textures:null,shaders:null,screen:null,input:null,textInput:null,clipboard:null,init:function(e){},setTargetFps:function(e){C.app.config.updateRate=0<e?1/e:0},__cbOnReady:null,__cbOnceReady:null,__cbOnOwnerUnbindReady:null,__cbOnceOwnerUnbindReady:null,emitReady:function(){var e=0;if(null!=this.__cbOnReady&&(e+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(e+=this.__cbOnceReady.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReady)for(var l=0,s=this.__cbOnReady.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnReady[r],++i):--e}if(null!=this.__cbOnceReady){for(var a=null,h=null,l=0,s=this.__cbOnceReady.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceReady[r],this.__cbOnceReady[r]=null,u=this.__cbOnceOwnerUnbindReady[r],(this.__cbOnceOwnerUnbindReady[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReady[r]),h.push(this.__cbOnceReady[r]))}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReady[n])&&s(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReady[n])&&s(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReady[l])&&s()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReady[l])&&s()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},__cbOnUpdate:null,__cbOnceUpdate:null,__cbOnOwnerUnbindUpdate:null,__cbOnceOwnerUnbindUpdate:null,emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnUpdate)for(var s=0,r=this.__cbOnUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnUpdate[a],++l):--n}if(null!=this.__cbOnceUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,c=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),u.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindUpdate[n])&&s(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindUpdate[n])&&s(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindUpdate[l])&&s()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindUpdate[l])&&s()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},__cbOnRender:null,__cbOnceRender:null,__cbOnOwnerUnbindRender:null,__cbOnceOwnerUnbindRender:null,emitRender:function(){var e=0;if(null!=this.__cbOnRender&&(e+=this.__cbOnRender.length),null!=this.__cbOnceRender&&(e+=this.__cbOnceRender.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnRender)for(var l=0,s=this.__cbOnRender.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnRender[r],++i):--e}if(null!=this.__cbOnceRender){for(var a=null,h=null,l=0,s=this.__cbOnceRender.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceRender[r],this.__cbOnceRender[r]=null,u=this.__cbOnceOwnerUnbindRender[r],(this.__cbOnceOwnerUnbindRender[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindRender[r]),h.push(this.__cbOnceRender[r]))}this.__cbOnceOwnerUnbindRender=a,this.__cbOnceRender=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onRender:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event render because owner is destroyed!");var l=function(e){null!=t&&(i.offRender(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindRender&&(this.__cbOnOwnerUnbindRender=[]),this.__cbOnOwnerUnbindRender.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindRender&&(this.__cbOnOwnerUnbindRender=[]),this.__cbOnOwnerUnbindRender.push(null);null==this.__cbOnRender&&(this.__cbOnRender=[]),this.__cbOnRender.push(t)},onceRender:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event render because owner is destroyed!");var l=function(e){null!=t&&(i.offRender(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindRender&&(this.__cbOnceOwnerUnbindRender=[]),this.__cbOnceOwnerUnbindRender.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindRender&&(this.__cbOnceOwnerUnbindRender=[]),this.__cbOnceOwnerUnbindRender.push(null);null==this.__cbOnceRender&&(this.__cbOnceRender=[]),this.__cbOnceRender.push(t)},offRender:function(e){if(null!=e){var n;null!=this.__cbOnRender&&-1!=(n=this.__cbOnRender.indexOf(e))&&(this.__cbOnRender.splice(n,1),null!=(s=this.__cbOnOwnerUnbindRender[n])&&s(),this.__cbOnOwnerUnbindRender.splice(n,1)),null!=this.__cbOnceRender&&-1!=(n=this.__cbOnceRender.indexOf(e))&&(this.__cbOnceRender.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindRender[n])&&s(),this.__cbOnceOwnerUnbindRender.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindRender){for(var t=0,i=this.__cbOnOwnerUnbindRender.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindRender[l])&&s()}this.__cbOnOwnerUnbindRender=null}if(null!=this.__cbOnceOwnerUnbindRender){for(t=0,i=this.__cbOnceOwnerUnbindRender.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindRender[l])&&s()}this.__cbOnceOwnerUnbindRender=null}this.__cbOnRender=null,this.__cbOnceRender=null}},listensRender:function(){return null!=this.__cbOnRender&&0<this.__cbOnRender.length||null!=this.__cbOnceRender&&0<this.__cbOnceRender.length},unbindEvents:function(){this.offReady(),this.offUpdate(),this.offRender()},__class__:la},(L["spec.Binaries"]=ma).__name__="spec.Binaries",ma.__isInterface__=!0,ma.prototype={load:null,supportsHotReloadPath:null,__class__:ma},function(){this.loadingBinaryCallbacks=new z}),Le=((L["backend.Binaries"]=Be).__name__="backend.Binaries",Be.__interfaces__=[ma],Be.prototype={load:function(r,e,n){function FS(e){function LS(){n(e),n=null}null!=l?l.push(LS):he.app._onceImmediate(LS)}var t,i,a=this,l=null!=e?e.immediate:null,e=B.startsWith(r,"http://")||B.startsWith(r,"https://");At.isAbsolute(r)||e||(r=At.join([he.app.settings.assetsPath,r])),Object.prototype.hasOwnProperty.call(this.loadingBinaryCallbacks.h,r)?this.loadingBinaryCallbacks.h[r].push(function(e){FS(e)}):(this.loadingBinaryCallbacks.h[r]=[],t=r,e||-1!=(i=t.indexOf("?"))&&(t=h.substr(t,0,i)),i=e?t:C.app.assets.fullPath(t),C.app.io.loadData(i,!0,null,function(e){if(null==e)if(null!=(l=a.loadingBinaryCallbacks.h[r]))for(var n=a.loadingBinaryCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,r)&&delete n.h[r],FS(null),0);t<l.length;){var i=l[t];++t,i(null)}else FS(null);else{var l,s=new kl(new Uint8Array(e.buffer));if(null!=(l=a.loadingBinaryCallbacks.h[r]))for(n=a.loadingBinaryCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,r)&&delete n.h[r],FS(s),0);t<l.length;){i=l[t];++t,i(s)}else FS(s)}}),null!=l?l.push(Bi.flush):he.app._onceImmediate(Bi.flush))},supportsHotReloadPath:function(){return!0},loadingBinaryCallbacks:null,__class__:Be},(L["clay.Events"]=oa).__name__="clay.Events",oa.prototype={ready:function(){},tick:function(e){},render:function(){},freeze:function(){},unfreeze:function(){},keyDown:function(e,n,t,i,l,s){},keyUp:function(e,n,t,i,l,s){},text:function(e,n,t,i,l,s){},mouseMove:function(e,n,t,i,l,s){},mouseDown:function(e,n,t,i,l){},mouseUp:function(e,n,t,i,l){},mouseWheel:function(e,n,t,i){},touchDown:function(e,n,t,i,l,s){},touchUp:function(e,n,t,i,l,s){},touchMove:function(e,n,t,i,l,s){},gamepadAxis:function(e,n,t,i){},gamepadDown:function(e,n,t,i){},gamepadUp:function(e,n,t,i){},gamepadGyro:function(e,n,t,i,l){},gamepadDevice:function(e,n,t,i){},windowEvent:function(e,n,t,i,l){},appEvent:function(e){},audioEvent:function(e,n){},__class__:oa},(L["backend.ClayEvents"]=pa).__name__="backend.ClayEvents",pa.__super__=oa,pa.prototype=$extend(oa.prototype,{backend:null,lastDensity:null,lastWidth:null,lastHeight:null,touches:null,touchIndexes:null,mouseDownButtons:null,mouseX:null,mouseY:null,activeGamepads:null,removedGamepads:null,swapAbGamepads:null,swapXyGamepads:null,gamepadAxisToButton:null,gamepadButtonMapping:null,gamepadPressedValues:null,gamepadAxisValues:null,gamepadGyroValues:null,handleReady:null,gamepadsEnabled:null,configureGamepadMapping:function(){},ready:function(){this.backend=he.app.backend,this.lastDensity=C.app.screenDensity,this.lastWidth=C.app.screenWidth,this.lastHeight=C.app.screenHeight,this.handleReady(),this.backend.emitReady()},tick:function(e){this.triggerResizeIfNeeded(),this.backend.emitUpdate(e)},render:function(){this.backend.emitRender()},triggerResizeIfNeeded:function(){var e=C.app.screenDensity,n=C.app.screenWidth,t=C.app.screenHeight;this.lastDensity==e&&this.lastWidth==n&&this.lastHeight==t||(this.lastDensity=e,this.lastWidth=n,this.lastHeight=t,this.backend.screen.emitResize())},appEvent:function(e){switch(e){case 0:break;case 11:he.app.emitTerminate();break;case 12:he.app.emitLowMemory();break;case 13:he.app.emitBeginEnterBackground();break;case 14:he.app.emitFinishEnterBackground();break;case 15:he.app.emitBeginEnterForeground();break;case 16:he.app.emitFinishEnterForeground()}},mouseDown:function(e,n,t,i,l){this.mouseDownButtons.intMap.h.hasOwnProperty(0|t)&&this.mouseUp(e,n,t,i,l),this.mouseX=e/C.app.screenDensity,this.mouseY=n/C.app.screenDensity,this.mouseDownButtons.set(t,1),this.backend.screen.emitMouseDown(t,this.mouseX,this.mouseY)},mouseUp:function(e,n,t,i,l){this.mouseDownButtons.intMap.h.hasOwnProperty(0|t)&&(this.mouseX=e/C.app.screenDensity,this.mouseY=n/C.app.screenDensity,this.mouseDownButtons.remove(t),this.backend.screen.emitMouseUp(t,this.mouseX,this.mouseY))},mouseMove:function(e,n,t,i,l,s){this.mouseX=e/C.app.screenDensity,this.mouseY=n/C.app.screenDensity,this.backend.screen.emitMouseMove(this.mouseX,this.mouseY)},mouseWheel:function(e,n,t,i){this.backend.screen.emitMouseWheel(e,n)},touchDown:function(e,n,t,i,l,s){for(var r=0;this.touchIndexes.intMap.h.hasOwnProperty(0|r);)++r;this.touches.set(l,r),this.touchIndexes.set(r,l),this.backend.screen.emitTouchDown(r,e*this.lastWidth,n*this.lastHeight)},touchUp:function(e,n,t,i,l,s){this.touches.intMap.h.hasOwnProperty(0|l)||this.touchDown(e,n,t,i,l,s);t=this.touches.intMap.h[0|l],i=null!=t?t:0;this.backend.screen.emitTouchUp(i,e*this.lastWidth,n*this.lastHeight),this.touches.remove(l),this.touchIndexes.remove(i)},touchMove:function(e,n,t,i,l,s){this.touches.intMap.h.hasOwnProperty(0|l)||this.touchDown(e,n,t,i,l,s);t=this.touches.intMap.h[0|l];this.backend.screen.emitTouchMove(null!=t?t:0,e*this.lastWidth,n*this.lastHeight)},keyDown:function(e,n,t,i,l,s){this.backend.input.emitKeyDown(new qn(e,n)),this.backend.textInput.handleKeyDown(e,n)},keyUp:function(e,n,t,i,l,s){this.backend.input.emitKeyUp(new qn(e,n)),this.backend.textInput.handleKeyUp(e,n)},_configureGamepad:function(e,n){null!=n&&(-1!=(n=n.toLowerCase()).indexOf(" vendor: 057e ")||B.startsWith(n,"057e-"))?(this.swapAbGamepads.set(e,1),this.swapXyGamepads.set(e,1)):(this.swapAbGamepads.set(e,0),this.swapXyGamepads.set(e,0))},gamepadAxis:function(e,n,t,i){var l,s;this.gamepadsEnabled&&(this.activeGamepads.intMap.h.hasOwnProperty(0|e)||this.removedGamepads.intMap.h.hasOwnProperty(0|e)||(this.activeGamepads.set(e,1),l=C.app.runtime.getGamepadName(e),this._configureGamepad(e,l),this.backend.input.emitGamepadEnable(e,l)),this.gamepadAxisToButton.intMap.h.hasOwnProperty(0|n)&&(l=null!=(s=this.gamepadAxisToButton.intMap.h[0|n])?s:0,.5<=t?1!=(null!=(s=this.gamepadPressedValues.intMap.h[32*e+l|0])?s:0)&&(this.gamepadPressedValues.set(32*e+l,1),this.backend.input.emitGamepadDown(e,l)):1==(null!=(s=this.gamepadPressedValues.intMap.h[32*e+l|0])?s:0)&&(this.gamepadPressedValues.set(32*e+l,0),this.backend.input.emitGamepadUp(e,l))),l=null!=(s=this.gamepadAxisValues.intMap.h[32*e+n|0])?s:0,s=Math.round(100*t)/100,.01<Math.abs(l-s))&&(this.gamepadAxisValues.set(32*e+n,s),this.backend.input.emitGamepadAxis(e,n,s))},gamepadDown:function(e,n,t,i){if(this.gamepadsEnabled){if(!this.activeGamepads.intMap.h.hasOwnProperty(0|e)&&!this.removedGamepads.intMap.h.hasOwnProperty(0|e)){this.activeGamepads.set(e,1);for(var l=0;l<32;){var s=l++;this.gamepadPressedValues.set(32*e+s,0)}var r=C.app.runtime.getGamepadName(e);this._configureGamepad(e,r),this.backend.input.emitGamepadEnable(e,r)}0!=(n=this.gamepadButtonMapping.intMap.h.hasOwnProperty(0|n)?null!=(t=this.gamepadButtonMapping.intMap.h[0|n])?t:0:n)&&1!=n||0!=(null!=(t=this.swapAbGamepads.intMap.h[0|e])?t:0)&&(n=1==n?0:1),2!=n&&3!=n||0!=(null!=(t=this.swapXyGamepads.intMap.h[0|e])?t:0)&&(n=2==n?3:2),1!=(null!=(t=this.gamepadPressedValues.intMap.h[32*e+n|0])?t:0)&&(this.gamepadPressedValues.set(32*e+n,1),this.backend.input.emitGamepadDown(e,n))}},gamepadUp:function(e,n,t,i){if(this.gamepadsEnabled){if(!this.activeGamepads.intMap.h.hasOwnProperty(0|e)&&!this.removedGamepads.intMap.h.hasOwnProperty(0|e)){this.activeGamepads.set(e,1);for(var l=0;l<32;){var s=l++;this.gamepadPressedValues.set(32*e+s,0)}var r=C.app.runtime.getGamepadName(e);this._configureGamepad(e,r),this.backend.input.emitGamepadEnable(e,r)}0!=(n=this.gamepadButtonMapping.intMap.h.hasOwnProperty(0|n)?null!=(t=this.gamepadButtonMapping.intMap.h[0|n])?t:0:n)&&1!=n||0!=(null!=(t=this.swapAbGamepads.intMap.h[0|e])?t:0)&&(n=1==n?0:1),2!=n&&3!=n||0!=(null!=(t=this.swapXyGamepads.intMap.h[0|e])?t:0)&&(n=2==n?3:2),1==(null!=(t=this.gamepadPressedValues.intMap.h[32*e+n|0])?t:0)&&(this.gamepadPressedValues.set(32*e+n,0),this.backend.input.emitGamepadUp(e,n))}},gamepadGyro:function(e,n,t,i,l){if(this.gamepadsEnabled){if(!this.activeGamepads.intMap.h.hasOwnProperty(0|e)&&!this.removedGamepads.intMap.h.hasOwnProperty(0|e)){this.activeGamepads.set(e,1);for(var s=0;s<32;){var r=s++;this.gamepadPressedValues.set(32*e+r,0)}var a=C.app.runtime.getGamepadName(e);this._configureGamepad(e,a),this.backend.input.emitGamepadEnable(e,a)}a=.23225806451612904;this.backend.input.emitGamepadGyro(e,n*a,t*a,i*a)}},gamepadDevice:function(n,e,t,i){var l=this;if(this.gamepadsEnabled)if(2==t){if(this.activeGamepads.intMap.h.hasOwnProperty(0|n)){for(var s=0;s<32;){var r=s++,a=this.gamepadPressedValues.intMap.h[32*n+r|0];1==(null!=a?a:0)&&(this.backend.input.emitGamepadUp(n,r),this.gamepadPressedValues.set(32*n+r,0))}this.backend.input.emitGamepadDisable(n),this.activeGamepads.remove(n),this.removedGamepads.set(n,1),he.app.onceUpdate(null,function(e){l.removedGamepads.remove(n)})}}else if(1==t&&!this.activeGamepads.intMap.h.hasOwnProperty(0|n)){this.activeGamepads.set(n,1);for(s=0;s<32;){r=s++;this.gamepadPressedValues.set(32*n+r,0)}this.removedGamepads.remove(n);e=C.app.runtime.getGamepadName(n);this._configureGamepad(n,e),this.backend.input.emitGamepadEnable(n,e)}},text:function(e,n,t,i,l,s){this.backend.textInput.inputActive&&this.backend.textInput.handleTextInput(e)},windowEvent:function(e,n,t,i,l){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:break;case 15:he.app.settings.set_fullscreen(!0);break;case 16:he.app.settings.set_fullscreen(!1)}},__class__:pa}),(L["spec.Clipboard"]=qa).__name__="spec.Clipboard",qa.__isInterface__=!0,qa.prototype={getText:null,setText:null,__class__:qa},function(){this.didBindBrowserClipboard=!1,this.didLogBrowserClipboardWriteWarning=!1,this.didLogBrowserClipboardReadWarning=!1,this.clipboardText=null}),K=((L["backend.Clipboard"]=Le).__name__="backend.Clipboard",Le.__interfaces__=[qa],Le.prototype={clipboardText:null,didLogBrowserClipboardReadWarning:null,didLogBrowserClipboardWriteWarning:null,didBindBrowserClipboard:null,bindBrowserClipboard:function(){var e=this;this.didBindBrowserClipboard=!0,this.readBrowserClipboard(),window.addEventListener("focus",function(){e.readBrowserClipboard()})},readBrowserClipboard:function(){var n=this,t=ie.navigator;try{t.clipboard.readText().then(function(e){n.clipboardText!=e&&(n.clipboardText=e)})}catch(e){Al.lastError=e;t=Q.caught(e).unwrap();this.didLogBrowserClipboardReadWarning||(this.didLogBrowserClipboardReadWarning=!0,he.app.logger.warning("Failed to read browser clipboard: "+V.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Clipboard.hx",lineNumber:68,className:"backend.Clipboard",methodName:"readBrowserClipboard"}))}},writeBrowserClipboard:function(e){var n=ie.navigator;try{n.clipboard.writeText(e).then(function(){})}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();this.didLogBrowserClipboardWriteWarning||(this.didLogBrowserClipboardWriteWarning=!0,he.app.logger.warning("Failed to write browser clipboard: "+V.string(n),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Clipboard.hx",lineNumber:87,className:"backend.Clipboard",methodName:"writeBrowserClipboard"}))}},getText:function(){return this.clipboardText},setText:function(e){this.clipboardText=e,this.didBindBrowserClipboard&&this.writeBrowserClipboard(e)},__class__:Le},(L["spec.Draw"]=sa).__name__="spec.Draw",sa.__isInterface__=!0,sa.prototype={draw:null,swap:null,initBuffers:null,beginRender:null,setRenderTarget:null,useShader:null,clear:null,enableBlending:null,disableBlending:null,setBlendFuncSeparate:null,getActiveTexture:null,setActiveTexture:null,textureBackendItemMatchesId:null,getTextureId:null,bindTexture:null,bindNoTexture:null,setPrimitiveType:null,beginDrawQuad:null,endDrawQuad:null,beginDrawMesh:null,endDrawMesh:null,beginDrawingInStencilBuffer:null,endDrawingInStencilBuffer:null,drawWithStencilTest:null,drawWithoutStencilTest:null,enableScissor:null,disableScissor:null,getNumPos:null,putPos:null,putPosAndTextureSlot:null,putIndice:null,putUVs:null,putColor:null,beginFloatAttributes:null,putFloatAttribute:null,endFloatAttributes:null,clearAndApplyBackground:null,getTextureWidth:null,getTextureHeight:null,getTextureWidthActual:null,getTextureHeightActual:null,shouldFlush:null,remainingVertices:null,remainingIndices:null,hasAnythingToFlush:null,flush:null,__class__:sa},function(){this.renderer=new Pt,this.renderer=new Pt}),Ne=((L["backend.Draw"]=K).__name__="backend.Draw",K.__interfaces__=[sa],K.prototype={renderer:null,begin:function(){},end:function(){},draw:function(e){this.renderer.render(!0,e)},swap:function(){},initBuffers:function(){K._activeTextureSlot=0,K._buffersIndex=-1,this.prepareNextBuffers()},prepareNextBuffers:function(){K._buffersIndex++,64<K._buffersIndex&&(K._buffersIndex=0),K._posListArray.length<=K._buffersIndex&&(K._posListArray[K._buffersIndex]=new Float32Array(65536),K._uvListArray[K._buffersIndex]=new Float32Array(43691),K._colorListArray[K._buffersIndex]=new Float32Array(65536),K._indiceListArray[K._buffersIndex]=new Uint16Array(32768)),K._posList=K._posListArray[K._buffersIndex],K._uvList=K._uvListArray[K._buffersIndex],K._colorList=K._colorListArray[K._buffersIndex],K._indiceList=K._indiceListArray[K._buffersIndex]},beginRender:function(){Y.gl.enableVertexAttribArray(0),Y.gl.enableVertexAttribArray(1),Y.gl.enableVertexAttribArray(2)},clear:function(){Y.gl.clearColor((K._whiteTransparentColor>>16&255)/255,(K._whiteTransparentColor>>8&255)/255,(255&K._whiteTransparentColor)/255,K._whiteTransparentColor>>24&255),0<C.app.config.render.depth?(Y.gl.clear(16640),Y.gl.clearDepth(1)):Y.gl.clear(16384),null!=K._currentRenderTarget&&(K._didUpdateCurrentRenderTarget=!0)},clearAndApplyBackground:function(){var e=he.app.settings.get_background();Y.gl.clearColor((e>>16&255)/255,(e>>8&255)/255,(255&e)/255,1),0<C.app.config.render.depth?(Y.gl.clear(16640),Y.gl.clearDepth(1)):Y.gl.clear(16384),null!=K._currentRenderTarget&&(K._didUpdateCurrentRenderTarget=!0)},enableBlending:function(){Y.gl.enable(3042)},disableBlending:function(){Y.gl.disable(3042)},setActiveTexture:function(e){if(K._activeTextureSlot=e,T._activeTextureSlot!=e){for(T._activeTextureSlot=e;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984+e)}},setPrimitiveType:function(e){K._primitiveType=2==e?1:4},getActiveTexture:function(){return K._activeTextureSlot},setRenderTarget:function(e,n){var t,i,l,s,r,a,h,u,c,o,_,d,b,g,O,f,p,m,w,v,y;null==n&&(n=!1),K._currentRenderTarget==e&&!n||(null!=K._currentRenderTarget&&K._currentRenderTarget!=e&&K._didUpdateCurrentRenderTarget&&1<(n=K._currentRenderTarget.backendItem).antialiasing&&T.blitRenderTargetBuffers(n.renderTarget,n.width,n.height),K._currentRenderTarget=e,K._didUpdateCurrentRenderTarget=!0,null!=e?(null!=(n=e.backendItem.renderTarget)?(T.bindFramebuffer(n.framebuffer),T.bindRenderbuffer(n.renderbuffer)):(T.bindFramebuffer(null),T.bindRenderbuffer(null)),g=((l=e.width)+(t=0))/(h=l-t),O=((i=0)+(s=e.height))/(u=i-s),o=((a=-1e3)+(r=1e3))/(c=a-r),(v=K._projectionMatrix)[0]=2/h,v[4]=0,v[8]=0,v[12]=-g,v[1]=0,v[5]=2/u,v[9]=0,v[13]=-O,v[2]=0,v[6]=0,v[10]=-2/c,v[14]=-o,v[3]=0,v[7]=0,v[11]=0,v[15]=1,(f=K._renderTargetTransform).a=1,f.b=0,f.c=0,f.d=1,f.tx=0,f.ty=0,f.changedDirty=!0,f=K._renderTargetTransform,n=e.density,_=e.density,f.a*=n,f.b*=_,f.c*=n,f.d*=_,f.tx*=n,f.ty*=_,f.changedDirty=!0,_=e.density,d=e.width,b=e.height,null==(n=-1)&&(n=1),null!=(y=K._renderTargetTransform)?((f=K._modelViewTransform).a=y.a,f.b=y.b,f.c=y.c,f.d=y.d,f.tx=y.tx,f.ty=y.ty,f.changedDirty=!0,0==(p=(f=K._modelViewTransform).a*f.d-f.b*f.c)?(f.a=f.b=f.c=f.d=0,f.tx=-f.tx,f.ty=-f.ty):(m=f.d*(p=1/p),f.d=f.a*p,f.a=m,f.b*=-p,f.c*=-p,w=-f.a*f.tx-f.c*f.ty,f.ty=-f.b*f.tx-f.d*f.ty,f.tx=w)):((f=K._modelViewTransform).a=1,f.b=0,f.c=0,f.d=1,f.tx=0,f.ty=0),f.changedDirty=!0,g=K._modelViewTransform.tx,O=K._modelViewTransform.ty,(f=K._modelViewTransform).tx+=-g,f.ty+=-O,f.changedDirty=!0,(f=K._modelViewTransform).a*=_,f.b*=_,f.c*=_,f.d*=_,f.tx*=_,f.ty*=_,f.changedDirty=!0,(f=K._modelViewTransform).tx+=g,f.ty+=O,f.changedDirty=!0,-1==n&&((f=K._modelViewTransform).tx+=.5*-d,f.ty+=.5*-b,f.changedDirty=!0,(f=K._modelViewTransform).a*=1,f.b*=-1,f.c*=1,f.d*=-1,f.tx*=1,f.ty*=-1,f.changedDirty=!0,(f=K._modelViewTransform).tx+=.5*d,f.ty+=.5*b,f.changedDirty=!0),0==(p=(f=K._modelViewTransform).a*f.d-f.b*f.c)?(f.a=f.b=f.c=f.d=0,f.tx=-f.tx,f.ty=-f.ty):(m=f.d*(p=1/p),f.d=f.a*p,f.a=m,f.b*=-p,f.c*=-p,w=-f.a*f.tx-f.c*f.ty,f.ty=-f.b*f.tx-f.d*f.ty,f.tx=w),f.changedDirty=!0,v=K._modelViewMatrix,y=K._modelViewTransform,v[0]=y.a,v[4]=y.c,v[8]=0,v[12]=y.tx,v[1]=y.b,v[5]=y.d,v[9]=0,v[13]=y.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,K._viewportDensity=e.density,K._viewportWidth=e.width*K._viewportDensity,K._viewportHeight=e.height*K._viewportDensity,Y.gl.viewport(0,0,e.width*e.density|0,e.height*e.density|0),e.clearOnRender&&(T.clear((K._blackTransparentColor>>16&255)/255,(K._blackTransparentColor>>8&255)/255,(255&K._blackTransparentColor)/255,(K._blackTransparentColor>>24&255)/255),K._didUpdateCurrentRenderTarget=!0)):(null!=(e=null)?(T.bindFramebuffer(e.framebuffer),T.bindRenderbuffer(e.renderbuffer)):(T.bindFramebuffer(null),T.bindRenderbuffer(null)),g=((l=C.app.screenWidth)+(t=0))/(h=l-t),O=((i=0)+(s=C.app.screenHeight))/(u=i-s),o=((a=-1e3)+(r=1e3))/(c=a-r),(v=K._projectionMatrix)[0]=2/h,v[4]=0,v[8]=0,v[12]=-g,v[1]=0,v[5]=2/u,v[9]=0,v[13]=-O,v[2]=0,v[6]=0,v[10]=-2/c,v[14]=-o,v[3]=0,v[7]=0,v[11]=0,v[15]=1,_=C.app.screenDensity,d=C.app.screenWidth,b=C.app.screenHeight,null!=(y=he.app.screen.matrix)?((f=K._modelViewTransform).a=y.a,f.b=y.b,f.c=y.c,f.d=y.d,f.tx=y.tx,f.ty=y.ty,f.changedDirty=!0,0==(p=(f=K._modelViewTransform).a*f.d-f.b*f.c)?(f.a=f.b=f.c=f.d=0,f.tx=-f.tx,f.ty=-f.ty):(m=f.d*(p=1/p),f.d=f.a*p,f.a=m,f.b*=-p,f.c*=-p,w=-f.a*f.tx-f.c*f.ty,f.ty=-f.b*f.tx-f.d*f.ty,f.tx=w)):((f=K._modelViewTransform).a=1,f.b=0,f.c=0,f.d=1,f.tx=0,f.ty=0),f.changedDirty=!0,g=K._modelViewTransform.tx,O=K._modelViewTransform.ty,(f=K._modelViewTransform).tx+=-g,f.ty+=-O,f.changedDirty=!0,(f=K._modelViewTransform).a*=_,f.b*=_,f.c*=_,f.d*=_,f.tx*=_,f.ty*=_,f.changedDirty=!0,(f=K._modelViewTransform).tx+=g,f.ty+=O,f.changedDirty=!0,0==(p=(f=K._modelViewTransform).a*f.d-f.b*f.c)?(f.a=f.b=f.c=f.d=0,f.tx=-f.tx,f.ty=-f.ty):(m=f.d*(p=1/p),f.d=f.a*p,f.a=m,f.b*=-p,f.c*=-p,w=-f.a*f.tx-f.c*f.ty,f.ty=-f.b*f.tx-f.d*f.ty,f.tx=w),f.changedDirty=!0,v=K._modelViewMatrix,y=K._modelViewTransform,v[0]=y.a,v[4]=y.c,v[8]=0,v[12]=y.tx,v[1]=y.b,v[5]=y.d,v[9]=0,v[13]=y.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,K._viewportDensity=C.app.screenDensity,K._viewportWidth=C.app.screenWidth*K._viewportDensity,K._viewportHeight=C.app.screenHeight*K._viewportDensity,Y.gl.viewport(0,0,0|K._viewportWidth,0|K._viewportHeight)))},useShader:function(e){(K._activeShader=e).uniforms.setMatrix4("projectionMatrix",K._projectionMatrix),e.uniforms.setMatrix4("modelViewMatrix",K._modelViewMatrix);var n=he.app.backend.shaders,t=0,i=K._activeShader.customAttributes;if(null!=i)for(var l=0,s=i.length;l<s;)t+=i[l++].size;K._floatAttributesSize=t,K._batchMultiTexture=n.canBatchWithMultipleTextures(K._activeShader),K._vertexSize=3+K._floatAttributesSize+(K._batchMultiTexture?1:0),K._posSize=K._vertexSize,K._vertexSize<4&&(K._vertexSize=4),K._maxVerts=0|Math.floor(65536/K._vertexSize),e.activate(),0==K._numPos&&(K._numIndices=0,K._numPos=0,K._numUVs=0,K._numColors=0,K._posIndex=0,K._uvIndex=0,K._colorIndex=0)},resetIndexes:function(){K._numIndices=0,K._numPos=0,K._numUVs=0,K._numColors=0,K._posIndex=0,K._uvIndex=0,K._colorIndex=0},setBlendFuncSeparate:function(e,n,t,i){Y.gl.blendFuncSeparate(e,n,t,i)},beginDrawQuad:function(e){},endDrawQuad:function(){},beginDrawMesh:function(e){},endDrawMesh:function(){},enableScissor:function(e,n,t,i){Y.gl.enable(3089);var l=K._viewportDensity,s=K._modelViewTransform,r=(e*s.a+n*s.c+s.tx)*l,a=(e*(s=K._modelViewTransform).b+n*s.d+s.ty)*l,h=((e+t)*(s=K._modelViewTransform).a+(n+i)*s.c+s.tx)*l,e=((e+t)*(s=K._modelViewTransform).b+(n+i)*s.d+s.ty)*l;null!=K._currentRenderTarget?Y.gl.scissor(Math.round(r),Math.round(K._viewportHeight-a),Math.round(h-r),Math.round(a-e)):Y.gl.scissor(Math.round(r),Math.round(K._viewportHeight-e),Math.round(h-r),Math.round(e-a))},disableScissor:function(){Y.gl.disable(3089)},drawWithStencilTest:function(){Y.gl.stencilFunc(514,1,255),Y.gl.stencilMask(0),Y.gl.colorMask(!0,!0,!0,!0),Y.gl.enable(2960)},drawWithoutStencilTest:function(){Y.gl.stencilFunc(519,1,255),Y.gl.stencilMask(255),Y.gl.colorMask(!0,!0,!0,!0),Y.gl.disable(2960)},beginDrawingInStencilBuffer:function(){K._drawingInStencilBuffer=!0,Y.gl.stencilMask(255),Y.gl.clearStencil(255),Y.gl.clear(1024),Y.gl.enable(2960),Y.gl.stencilOp(7680,7680,7681),Y.gl.stencilFunc(519,1,255),Y.gl.stencilMask(255),Y.gl.colorMask(!1,!1,!1,!1)},endDrawingInStencilBuffer:function(){K._drawingInStencilBuffer=!1},bindTexture:function(e){e=e.textureId;T._boundTexture2D[T._activeTextureSlot]!=e&&(T._boundTexture2D[T._activeTextureSlot]=e,Y.gl.bindTexture(3553,e))},bindNoTexture:function(){var e=he.app.defaultWhiteTexture.backendItem.textureId;T._boundTexture2D[T._activeTextureSlot]!=e&&(T._boundTexture2D[T._activeTextureSlot]=e,Y.gl.bindTexture(3553,e))},textureBackendItemMatchesId:function(e,n){return e.textureId==n},getTextureId:function(e){return e.textureId},getTextureWidth:function(e){return e.width},getTextureHeight:function(e){return e.height},getTextureWidthActual:function(e){return e.widthActual},getTextureHeightActual:function(e){return e.heightActual},updateProjectionMatrix:function(e,n){var t=+e,i=0-n,e=(e+0)/t,n=(0+n)/i,l=K._projectionMatrix;l[0]=2/t,l[4]=0,l[8]=0,l[12]=-e,l[1]=0,l[5]=2/i,l[9]=0,l[13]=-n,l[2]=0,l[6]=0,l[10]=.001,l[14]=0,l[3]=0,l[7]=0,l[11]=0,l[15]=1},updateViewMatrix:function(e,n,t,i,l){null==l&&(l=1),null!=i?((a=K._modelViewTransform).a=i.a,a.b=i.b,a.c=i.c,a.d=i.d,a.tx=i.tx,a.ty=i.ty,a.changedDirty=!0,0==(h=(a=K._modelViewTransform).a*a.d-a.b*a.c)?(a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty):(u=a.d*(h=1/h),a.d=a.a*h,a.a=u,a.b*=-h,a.c*=-h,c=-a.a*a.tx-a.c*a.ty,a.ty=-a.b*a.tx-a.d*a.ty,a.tx=c)):((a=K._modelViewTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0),a.changedDirty=!0;var s=K._modelViewTransform.tx,r=K._modelViewTransform.ty,a=K._modelViewTransform;a.tx+=-s,a.ty+=-r,a.changedDirty=!0,(a=K._modelViewTransform).a*=e,a.b*=e,a.c*=e,a.d*=e,a.tx*=e,a.ty*=e,a.changedDirty=!0,(a=K._modelViewTransform).tx+=s,a.ty+=r,a.changedDirty=!0,-1==l&&((a=K._modelViewTransform).tx+=.5*-n,a.ty+=.5*-t,a.changedDirty=!0,(a=K._modelViewTransform).a*=1,a.b*=-1,a.c*=1,a.d*=-1,a.tx*=1,a.ty*=-1,a.changedDirty=!0,(a=K._modelViewTransform).tx+=.5*n,a.ty+=.5*t,a.changedDirty=!0);0==(h=(a=K._modelViewTransform).a*a.d-a.b*a.c)?(a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty):(u=a.d*(h=1/h),a.d=a.a*h,a.a=u,a.b*=-h,a.c*=-h,c=-a.a*a.tx-a.c*a.ty,a.ty=-a.b*a.tx-a.d*a.ty,a.tx=c),a.changedDirty=!0;var h,u,c,e=K._modelViewMatrix,i=K._modelViewTransform;e[0]=i.a,e[4]=i.c,e[8]=0,e[12]=i.tx,e[1]=i.b,e[5]=i.d,e[9]=0,e[13]=i.ty,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1},matrixIdentity:function(e){e[0]=1,e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=1,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1},setMatrixToTransform:function(e,n){e[0]=n.a,e[4]=n.c,e[8]=0,e[12]=n.tx,e[1]=n.b,e[5]=n.d,e[9]=0,e[13]=n.ty,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1},getNumPos:function(){return K._numPos},putPos:function(e,n,t){K._posList[K._posIndex]=e,K._posList[K._posIndex+1]=n,K._posList[K._posIndex+2]=t,K._posIndex+=3,K._numPos++},putPosAndTextureSlot:function(e,n,t,i){K._posList[K._posIndex]=e,K._posList[K._posIndex+1]=n,K._posList[K._posIndex+2]=t,K._posList[K._posIndex+3]=i,K._posIndex+=4,K._numPos++},beginFloatAttributes:function(){},putFloatAttribute:function(e,n){K._posList[K._posIndex+e]=n},endFloatAttributes:function(){K._posIndex+=K._floatAttributesSize},putIndice:function(e){K._indiceList[K._numIndices]=e,K._numIndices++},putUVs:function(e,n){K._uvList[K._uvIndex]=e,K._uvList[K._uvIndex+1]=n,K._uvIndex+=2,K._numUVs++},putColor:function(e,n,t,i){K._colorList[K._colorIndex]=e,K._colorList[K._colorIndex+1]=n,K._colorList[K._colorIndex+2]=t,K._colorList[K._colorIndex+3]=i,K._colorIndex+=4,K._numColors++},hasAnythingToFlush:function(){return 0<K._numPos},shouldFlush:function(e,n,t){return!(K._numPos+e<=K._maxVerts)||16384<K._numIndices+n},remainingVertices:function(){return K._maxVerts-K._numPos},remainingIndices:function(){return 16384-K._numIndices},flush:function(){var e=K._batchMultiTexture,n=new Float32Array(K._posList.buffer,0,4*K._posIndex/4|0),t=new Float32Array(K._uvList.buffer,0,4*K._uvIndex/4|0),i=new Float32Array(K._colorList.buffer,0,4*K._colorIndex/4|0),l=new Uint16Array(K._indiceList.buffer,0,2*K._numIndices/2|0),s=Y.gl.createBuffer(),r=Y.gl.createBuffer(),a=Y.gl.createBuffer(),h=Y.gl.createBuffer(),u=(Y.gl.enableVertexAttribArray(0),Y.gl.enableVertexAttribArray(1),Y.gl.enableVertexAttribArray(2),Y.gl.bindBuffer(34962,s),Y.gl.vertexAttribPointer(0,3,5126,!1,4*K._posSize,0),Y.gl.bufferData(34962,n,35040),Y.gl.bindBuffer(34962,a),Y.gl.vertexAttribPointer(1,2,5126,!1,0,0),Y.gl.bufferData(34962,t,35040),Y.gl.bindBuffer(34962,r),Y.gl.vertexAttribPointer(2,4,5126,!1,0,0),Y.gl.bufferData(34962,i,35040),3),c=3,t=0;if(e&&(O=Y.gl.createBuffer(),K._customGLBuffers[t++]=O,Y.gl.enableVertexAttribArray(c),Y.gl.bindBuffer(34962,O),Y.gl.vertexAttribPointer(c,1,5126,!1,4*K._posSize,4*u),Y.gl.bufferData(34962,n,35040),++c,++u),null!=K._activeShader&&null!=K._activeShader.customAttributes)for(var o=K._activeShader.customAttributes,_=t,i=_+o.length,d=(t+=o.length,_),b=i;d<b;){var g=o[(f=d++)-_],O=Y.gl.createBuffer();K._customGLBuffers[f]=O,Y.gl.enableVertexAttribArray(c),Y.gl.bindBuffer(34962,O),Y.gl.vertexAttribPointer(c,g.size,5126,!1,4*K._posSize,4*u),Y.gl.bufferData(34962,n,35040),++c,u+=g.size}if(Y.gl.bindBuffer(34963,h),Y.gl.bufferData(34963,l,35040),Y.gl.drawElements(K._primitiveType,K._numIndices,5123,0),Y.gl.deleteBuffer(s),Y.gl.deleteBuffer(r),Y.gl.deleteBuffer(a),0<t)for(c=3,d=0,b=t;d<b;){var f=d++,O=K._customGLBuffers[f];Y.gl.deleteBuffer(O),Y.gl.disableVertexAttribArray(c),++c}Y.gl.bindBuffer(34963,null),Y.gl.deleteBuffer(h),null!=K._currentRenderTarget&&(K._didUpdateCurrentRenderTarget=!0),n=null,K._numIndices=0,K._numPos=0,K._numUVs=0,K._numColors=0,K._posIndex=0,K._uvIndex=0,K._colorIndex=0,this.prepareNextBuffers()},__class__:K},(L["backend.ElectronRunner"]=ua).__name__="backend.ElectronRunner",(L["spec.IO"]=va).__name__="spec.IO",va.__isInterface__=!0,va.prototype={saveString:null,appendString:null,readString:null,__class__:va},function(){}),We=((L["backend.IO"]=Ne).__name__="backend.IO",Ne.__interfaces__=[va],Ne.prototype={initKeyValueIfNeeded:function(){},saveString:function(n,e){try{var t=window.localStorage;if(null==t)return he.app.logger.error("Cannot save string: localStorage not supported on this browser",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:200,className:"backend.IO",methodName:"saveString"}),!1;t.setItem(n,An.encode(e))}catch(e){Al.lastError=e;t=Q.caught(e).unwrap();return he.app.logger.error("Failed to save string (key="+n+"): "+V.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:207,className:"backend.IO",methodName:"saveString"}),!1}return!0},appendString:function(n,e){try{var t=window.localStorage;if(null==t)return he.app.logger.error("Cannot append string: localStorage not supported on this browser",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:220,className:"backend.IO",methodName:"appendString"}),!1;var i=t.getItem(n);null==i?t.setItem(n,An.encode(e)):t.setItem(n,i+An.encode(e))}catch(e){Al.lastError=e;t=Q.caught(e).unwrap();return he.app.logger.error("Failed to append string (key="+n+"): "+V.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:233,className:"backend.IO",methodName:"appendString"}),!1}return!0},readString:function(n){try{var e,t=window.localStorage;return null==t?(he.app.logger.error("Cannot read string: localStorage not supported on this browser",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:246,className:"backend.IO",methodName:"readString"}),null):null!=(e=t.getItem(n))?An.decode(e):null}catch(e){Al.lastError=e;t=Q.caught(e).unwrap();return he.app.logger.error("Failed to read string (key="+n+"): "+V.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:254,className:"backend.IO",methodName:"readString"}),null}},__class__:Ne},(L["spec.Info"]=xa).__name__="spec.Info",xa.__isInterface__=!0,xa.prototype={storageDirectory:null,imageExtensions:null,textExtensions:null,soundExtensions:null,shaderExtensions:null,__class__:xa},function(){}),Ge=((L["backend.Info"]=We).__name__="backend.Info",We.__interfaces__=[xa],We.prototype={storageDirectory:function(){return null},imageExtensions:function(){return["png","jpg","jpeg"]},textExtensions:function(){return["txt","json","fnt","atlas"]},soundExtensions:function(){var e,n,t,i;return null==We._soundExtensions&&(We._soundExtensions=[],e=new Audio,n=null!=ie.navigator?ie.navigator.userAgent:"",i=We.RE_OPERA.match(n)&&parseInt(We.RE_OPERA.matched(0).split("/")[1],10)<33,t=-1!=n.indexOf("Safari")&&-1==n.indexOf("Chrome"),n=We.RE_SAFARI_VERSION.match(n),t&&n&&parseInt(We.RE_SAFARI_VERSION.matched(1),10),null!=(t=e.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=t&&""!=t&&We._soundExtensions.push("ogg"),n=e.canPlayType("audio/mpeg;"),t=e.canPlayType("audio/mp3;"),!i&&(null!=n&&"no"!=n&&""!=n||null!=t&&"no"!=t&&""!=t)&&We._soundExtensions.push("mp3"),i=e.canPlayType("audio/x-flac;"),n=e.canPlayType("audio/flac;"),(null!=i&&"no"!=i&&""!=i||null!=n&&"no"!=n&&""!=n)&&We._soundExtensions.push("flac"),t=e.canPlayType('audio/wav; codecs="1"'),i=e.canPlayType("audio/wav;"),null!=t&&"no"!=t&&""!=t||null!=i&&"no"!=i&&""!=i)&&We._soundExtensions.push("wav"),[].concat(We._soundExtensions)},shaderExtensions:function(){return["frag","vert"]},__class__:We},(L["spec.Input"]=za).__name__="spec.Input",za.__isInterface__=!0,function(){}),He=((L["backend.Input"]=Ge).__name__="backend.Input",Ge.__interfaces__=[za,k],Ge.prototype={__cbOnKeyDown:null,__cbOnceKeyDown:null,__cbOnOwnerUnbindKeyDown:null,__cbOnceOwnerUnbindKeyDown:null,emitKeyDown:function(e){var n=0;if(null!=this.__cbOnKeyDown&&(n+=this.__cbOnKeyDown.length),null!=this.__cbOnceKeyDown&&(n+=this.__cbOnceKeyDown.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnKeyDown)for(var s=0,r=this.__cbOnKeyDown.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnKeyDown[a],++l):--n}if(null!=this.__cbOnceKeyDown){for(var h=null,u=null,s=0,r=this.__cbOnceKeyDown.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceKeyDown[a],this.__cbOnceKeyDown[a]=null,c=this.__cbOnceOwnerUnbindKeyDown[a],(this.__cbOnceOwnerUnbindKeyDown[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindKeyDown[a]),u.push(this.__cbOnceKeyDown[a]))}this.__cbOnceOwnerUnbindKeyDown=h,this.__cbOnceKeyDown=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyDown because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(null);null==this.__cbOnKeyDown&&(this.__cbOnKeyDown=[]),this.__cbOnKeyDown.push(t)},onceKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyDown because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(null);null==this.__cbOnceKeyDown&&(this.__cbOnceKeyDown=[]),this.__cbOnceKeyDown.push(t)},offKeyDown:function(e){if(null!=e){var n;null!=this.__cbOnKeyDown&&-1!=(n=this.__cbOnKeyDown.indexOf(e))&&(this.__cbOnKeyDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindKeyDown[n])&&s(),this.__cbOnOwnerUnbindKeyDown.splice(n,1)),null!=this.__cbOnceKeyDown&&-1!=(n=this.__cbOnceKeyDown.indexOf(e))&&(this.__cbOnceKeyDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindKeyDown[n])&&s(),this.__cbOnceOwnerUnbindKeyDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyDown){for(var t=0,i=this.__cbOnOwnerUnbindKeyDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindKeyDown[l])&&s()}this.__cbOnOwnerUnbindKeyDown=null}if(null!=this.__cbOnceOwnerUnbindKeyDown){for(t=0,i=this.__cbOnceOwnerUnbindKeyDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindKeyDown[l])&&s()}this.__cbOnceOwnerUnbindKeyDown=null}this.__cbOnKeyDown=null,this.__cbOnceKeyDown=null}},listensKeyDown:function(){return null!=this.__cbOnKeyDown&&0<this.__cbOnKeyDown.length||null!=this.__cbOnceKeyDown&&0<this.__cbOnceKeyDown.length},__cbOnKeyUp:null,__cbOnceKeyUp:null,__cbOnOwnerUnbindKeyUp:null,__cbOnceOwnerUnbindKeyUp:null,emitKeyUp:function(e){var n=0;if(null!=this.__cbOnKeyUp&&(n+=this.__cbOnKeyUp.length),null!=this.__cbOnceKeyUp&&(n+=this.__cbOnceKeyUp.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnKeyUp)for(var s=0,r=this.__cbOnKeyUp.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnKeyUp[a],++l):--n}if(null!=this.__cbOnceKeyUp){for(var h=null,u=null,s=0,r=this.__cbOnceKeyUp.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceKeyUp[a],this.__cbOnceKeyUp[a]=null,c=this.__cbOnceOwnerUnbindKeyUp[a],(this.__cbOnceOwnerUnbindKeyUp[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindKeyUp[a]),u.push(this.__cbOnceKeyUp[a]))}this.__cbOnceOwnerUnbindKeyUp=h,this.__cbOnceKeyUp=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyUp because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(null);null==this.__cbOnKeyUp&&(this.__cbOnKeyUp=[]),this.__cbOnKeyUp.push(t)},onceKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyUp because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(null);null==this.__cbOnceKeyUp&&(this.__cbOnceKeyUp=[]),this.__cbOnceKeyUp.push(t)},offKeyUp:function(e){if(null!=e){var n;null!=this.__cbOnKeyUp&&-1!=(n=this.__cbOnKeyUp.indexOf(e))&&(this.__cbOnKeyUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindKeyUp[n])&&s(),this.__cbOnOwnerUnbindKeyUp.splice(n,1)),null!=this.__cbOnceKeyUp&&-1!=(n=this.__cbOnceKeyUp.indexOf(e))&&(this.__cbOnceKeyUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindKeyUp[n])&&s(),this.__cbOnceOwnerUnbindKeyUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyUp){for(var t=0,i=this.__cbOnOwnerUnbindKeyUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindKeyUp[l])&&s()}this.__cbOnOwnerUnbindKeyUp=null}if(null!=this.__cbOnceOwnerUnbindKeyUp){for(t=0,i=this.__cbOnceOwnerUnbindKeyUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindKeyUp[l])&&s()}this.__cbOnceOwnerUnbindKeyUp=null}this.__cbOnKeyUp=null,this.__cbOnceKeyUp=null}},listensKeyUp:function(){return null!=this.__cbOnKeyUp&&0<this.__cbOnKeyUp.length||null!=this.__cbOnceKeyUp&&0<this.__cbOnceKeyUp.length},__cbOnGamepadAxis:null,__cbOnceGamepadAxis:null,__cbOnOwnerUnbindGamepadAxis:null,__cbOnceOwnerUnbindGamepadAxis:null,emitGamepadAxis:function(e,n,t){var i=0;if(null!=this.__cbOnGamepadAxis&&(i+=this.__cbOnGamepadAxis.length),null!=this.__cbOnceGamepadAxis&&(i+=this.__cbOnceGamepadAxis.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnGamepadAxis)for(var a=0,h=this.__cbOnGamepadAxis.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnGamepadAxis[u],++r):--i}if(null!=this.__cbOnceGamepadAxis){for(var c=null,o=null,a=0,h=this.__cbOnceGamepadAxis.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceGamepadAxis[u],this.__cbOnceGamepadAxis[u]=null,_=this.__cbOnceOwnerUnbindGamepadAxis[u],(this.__cbOnceOwnerUnbindGamepadAxis[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadAxis[u]),o.push(this.__cbOnceGamepadAxis[u]))}this.__cbOnceOwnerUnbindGamepadAxis=c,this.__cbOnceGamepadAxis=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadAxis(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(null);null==this.__cbOnGamepadAxis&&(this.__cbOnGamepadAxis=[]),this.__cbOnGamepadAxis.push(t)},onceGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadAxis(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(null);null==this.__cbOnceGamepadAxis&&(this.__cbOnceGamepadAxis=[]),this.__cbOnceGamepadAxis.push(t)},offGamepadAxis:function(e){if(null!=e){var n;null!=this.__cbOnGamepadAxis&&-1!=(n=this.__cbOnGamepadAxis.indexOf(e))&&(this.__cbOnGamepadAxis.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadAxis[n])&&s(),this.__cbOnOwnerUnbindGamepadAxis.splice(n,1)),null!=this.__cbOnceGamepadAxis&&-1!=(n=this.__cbOnceGamepadAxis.indexOf(e))&&(this.__cbOnceGamepadAxis.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadAxis[n])&&s(),this.__cbOnceOwnerUnbindGamepadAxis.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadAxis){for(var t=0,i=this.__cbOnOwnerUnbindGamepadAxis.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadAxis[l])&&s()}this.__cbOnOwnerUnbindGamepadAxis=null}if(null!=this.__cbOnceOwnerUnbindGamepadAxis){for(t=0,i=this.__cbOnceOwnerUnbindGamepadAxis.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadAxis[l])&&s()}this.__cbOnceOwnerUnbindGamepadAxis=null}this.__cbOnGamepadAxis=null,this.__cbOnceGamepadAxis=null}},listensGamepadAxis:function(){return null!=this.__cbOnGamepadAxis&&0<this.__cbOnGamepadAxis.length||null!=this.__cbOnceGamepadAxis&&0<this.__cbOnceGamepadAxis.length},__cbOnGamepadDown:null,__cbOnceGamepadDown:null,__cbOnOwnerUnbindGamepadDown:null,__cbOnceOwnerUnbindGamepadDown:null,emitGamepadDown:function(e,n){var t=0;if(null!=this.__cbOnGamepadDown&&(t+=this.__cbOnGamepadDown.length),null!=this.__cbOnceGamepadDown&&(t+=this.__cbOnceGamepadDown.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGamepadDown)for(var r=0,a=this.__cbOnGamepadDown.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGamepadDown[h],++s):--t}if(null!=this.__cbOnceGamepadDown){for(var u=null,c=null,r=0,a=this.__cbOnceGamepadDown.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGamepadDown[h],this.__cbOnceGamepadDown[h]=null,o=this.__cbOnceOwnerUnbindGamepadDown[h],(this.__cbOnceOwnerUnbindGamepadDown[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGamepadDown[h]),c.push(this.__cbOnceGamepadDown[h]))}this.__cbOnceOwnerUnbindGamepadDown=u,this.__cbOnceGamepadDown=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDown because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(null);null==this.__cbOnGamepadDown&&(this.__cbOnGamepadDown=[]),this.__cbOnGamepadDown.push(t)},onceGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDown because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(null);null==this.__cbOnceGamepadDown&&(this.__cbOnceGamepadDown=[]),this.__cbOnceGamepadDown.push(t)},offGamepadDown:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDown&&-1!=(n=this.__cbOnGamepadDown.indexOf(e))&&(this.__cbOnGamepadDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadDown[n])&&s(),this.__cbOnOwnerUnbindGamepadDown.splice(n,1)),null!=this.__cbOnceGamepadDown&&-1!=(n=this.__cbOnceGamepadDown.indexOf(e))&&(this.__cbOnceGamepadDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadDown[n])&&s(),this.__cbOnceOwnerUnbindGamepadDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDown){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadDown[l])&&s()}this.__cbOnOwnerUnbindGamepadDown=null}if(null!=this.__cbOnceOwnerUnbindGamepadDown){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadDown[l])&&s()}this.__cbOnceOwnerUnbindGamepadDown=null}this.__cbOnGamepadDown=null,this.__cbOnceGamepadDown=null}},listensGamepadDown:function(){return null!=this.__cbOnGamepadDown&&0<this.__cbOnGamepadDown.length||null!=this.__cbOnceGamepadDown&&0<this.__cbOnceGamepadDown.length},__cbOnGamepadUp:null,__cbOnceGamepadUp:null,__cbOnOwnerUnbindGamepadUp:null,__cbOnceOwnerUnbindGamepadUp:null,emitGamepadUp:function(e,n){var t=0;if(null!=this.__cbOnGamepadUp&&(t+=this.__cbOnGamepadUp.length),null!=this.__cbOnceGamepadUp&&(t+=this.__cbOnceGamepadUp.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGamepadUp)for(var r=0,a=this.__cbOnGamepadUp.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGamepadUp[h],++s):--t}if(null!=this.__cbOnceGamepadUp){for(var u=null,c=null,r=0,a=this.__cbOnceGamepadUp.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGamepadUp[h],this.__cbOnceGamepadUp[h]=null,o=this.__cbOnceOwnerUnbindGamepadUp[h],(this.__cbOnceOwnerUnbindGamepadUp[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGamepadUp[h]),c.push(this.__cbOnceGamepadUp[h]))}this.__cbOnceOwnerUnbindGamepadUp=u,this.__cbOnceGamepadUp=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadUp because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(null);null==this.__cbOnGamepadUp&&(this.__cbOnGamepadUp=[]),this.__cbOnGamepadUp.push(t)},onceGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadUp because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(null);null==this.__cbOnceGamepadUp&&(this.__cbOnceGamepadUp=[]),this.__cbOnceGamepadUp.push(t)},offGamepadUp:function(e){if(null!=e){var n;null!=this.__cbOnGamepadUp&&-1!=(n=this.__cbOnGamepadUp.indexOf(e))&&(this.__cbOnGamepadUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadUp[n])&&s(),this.__cbOnOwnerUnbindGamepadUp.splice(n,1)),null!=this.__cbOnceGamepadUp&&-1!=(n=this.__cbOnceGamepadUp.indexOf(e))&&(this.__cbOnceGamepadUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadUp[n])&&s(),this.__cbOnceOwnerUnbindGamepadUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadUp){for(var t=0,i=this.__cbOnOwnerUnbindGamepadUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadUp[l])&&s()}this.__cbOnOwnerUnbindGamepadUp=null}if(null!=this.__cbOnceOwnerUnbindGamepadUp){for(t=0,i=this.__cbOnceOwnerUnbindGamepadUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadUp[l])&&s()}this.__cbOnceOwnerUnbindGamepadUp=null}this.__cbOnGamepadUp=null,this.__cbOnceGamepadUp=null}},listensGamepadUp:function(){return null!=this.__cbOnGamepadUp&&0<this.__cbOnGamepadUp.length||null!=this.__cbOnceGamepadUp&&0<this.__cbOnceGamepadUp.length},__cbOnGamepadGyro:null,__cbOnceGamepadGyro:null,__cbOnOwnerUnbindGamepadGyro:null,__cbOnceOwnerUnbindGamepadGyro:null,emitGamepadGyro:function(e,n,t,i){var l=0;if(null!=this.__cbOnGamepadGyro&&(l+=this.__cbOnGamepadGyro.length),null!=this.__cbOnceGamepadGyro&&(l+=this.__cbOnceGamepadGyro.length),0<l){var s=f.pool(l),r=s.get(),a=0;if(null!=this.__cbOnGamepadGyro)for(var h=0,u=this.__cbOnGamepadGyro.length;h<u;){var c=h++;!0?(r.vector[a]=this.__cbOnGamepadGyro[c],++a):--l}if(null!=this.__cbOnceGamepadGyro){for(var o=null,_=null,h=0,u=this.__cbOnceGamepadGyro.length;h<u;){var d,c=h++;!0?(r.vector[a]=this.__cbOnceGamepadGyro[c],this.__cbOnceGamepadGyro[c]=null,d=this.__cbOnceOwnerUnbindGamepadGyro[c],(this.__cbOnceOwnerUnbindGamepadGyro[c]=null)!=d&&d(),++a):(--l,null==o&&(o=[],_=[],0),o.push(this.__cbOnceOwnerUnbindGamepadGyro[c]),_.push(this.__cbOnceGamepadGyro[c]))}this.__cbOnceOwnerUnbindGamepadGyro=o,this.__cbOnceGamepadGyro=_}for(h=0,u=l;h<u;){a=h++;(0,r.vector[a])(e,n,t,i)}s.release(r)}},onGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadGyro(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(null);null==this.__cbOnGamepadGyro&&(this.__cbOnGamepadGyro=[]),this.__cbOnGamepadGyro.push(t)},onceGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadGyro(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(null);null==this.__cbOnceGamepadGyro&&(this.__cbOnceGamepadGyro=[]),this.__cbOnceGamepadGyro.push(t)},offGamepadGyro:function(e){if(null!=e){var n;null!=this.__cbOnGamepadGyro&&-1!=(n=this.__cbOnGamepadGyro.indexOf(e))&&(this.__cbOnGamepadGyro.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadGyro[n])&&s(),this.__cbOnOwnerUnbindGamepadGyro.splice(n,1)),null!=this.__cbOnceGamepadGyro&&-1!=(n=this.__cbOnceGamepadGyro.indexOf(e))&&(this.__cbOnceGamepadGyro.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadGyro[n])&&s(),this.__cbOnceOwnerUnbindGamepadGyro.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadGyro){for(var t=0,i=this.__cbOnOwnerUnbindGamepadGyro.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadGyro[l])&&s()}this.__cbOnOwnerUnbindGamepadGyro=null}if(null!=this.__cbOnceOwnerUnbindGamepadGyro){for(t=0,i=this.__cbOnceOwnerUnbindGamepadGyro.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadGyro[l])&&s()}this.__cbOnceOwnerUnbindGamepadGyro=null}this.__cbOnGamepadGyro=null,this.__cbOnceGamepadGyro=null}},listensGamepadGyro:function(){return null!=this.__cbOnGamepadGyro&&0<this.__cbOnGamepadGyro.length||null!=this.__cbOnceGamepadGyro&&0<this.__cbOnceGamepadGyro.length},__cbOnGamepadEnable:null,__cbOnceGamepadEnable:null,__cbOnOwnerUnbindGamepadEnable:null,__cbOnceOwnerUnbindGamepadEnable:null,emitGamepadEnable:function(e,n){var t=0;if(null!=this.__cbOnGamepadEnable&&(t+=this.__cbOnGamepadEnable.length),null!=this.__cbOnceGamepadEnable&&(t+=this.__cbOnceGamepadEnable.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGamepadEnable)for(var r=0,a=this.__cbOnGamepadEnable.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGamepadEnable[h],++s):--t}if(null!=this.__cbOnceGamepadEnable){for(var u=null,c=null,r=0,a=this.__cbOnceGamepadEnable.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGamepadEnable[h],this.__cbOnceGamepadEnable[h]=null,o=this.__cbOnceOwnerUnbindGamepadEnable[h],(this.__cbOnceOwnerUnbindGamepadEnable[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGamepadEnable[h]),c.push(this.__cbOnceGamepadEnable[h]))}this.__cbOnceOwnerUnbindGamepadEnable=u,this.__cbOnceGamepadEnable=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadEnable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(null);null==this.__cbOnGamepadEnable&&(this.__cbOnGamepadEnable=[]),this.__cbOnGamepadEnable.push(t)},onceGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadEnable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(null);null==this.__cbOnceGamepadEnable&&(this.__cbOnceGamepadEnable=[]),this.__cbOnceGamepadEnable.push(t)},offGamepadEnable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadEnable&&-1!=(n=this.__cbOnGamepadEnable.indexOf(e))&&(this.__cbOnGamepadEnable.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadEnable[n])&&s(),this.__cbOnOwnerUnbindGamepadEnable.splice(n,1)),null!=this.__cbOnceGamepadEnable&&-1!=(n=this.__cbOnceGamepadEnable.indexOf(e))&&(this.__cbOnceGamepadEnable.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadEnable[n])&&s(),this.__cbOnceOwnerUnbindGamepadEnable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadEnable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadEnable.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadEnable[l])&&s()}this.__cbOnOwnerUnbindGamepadEnable=null}if(null!=this.__cbOnceOwnerUnbindGamepadEnable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadEnable.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadEnable[l])&&s()}this.__cbOnceOwnerUnbindGamepadEnable=null}this.__cbOnGamepadEnable=null,this.__cbOnceGamepadEnable=null}},listensGamepadEnable:function(){return null!=this.__cbOnGamepadEnable&&0<this.__cbOnGamepadEnable.length||null!=this.__cbOnceGamepadEnable&&0<this.__cbOnceGamepadEnable.length},__cbOnGamepadDisable:null,__cbOnceGamepadDisable:null,__cbOnOwnerUnbindGamepadDisable:null,__cbOnceOwnerUnbindGamepadDisable:null,emitGamepadDisable:function(e){var n=0;if(null!=this.__cbOnGamepadDisable&&(n+=this.__cbOnGamepadDisable.length),null!=this.__cbOnceGamepadDisable&&(n+=this.__cbOnceGamepadDisable.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnGamepadDisable)for(var s=0,r=this.__cbOnGamepadDisable.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnGamepadDisable[a],++l):--n}if(null!=this.__cbOnceGamepadDisable){for(var h=null,u=null,s=0,r=this.__cbOnceGamepadDisable.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceGamepadDisable[a],this.__cbOnceGamepadDisable[a]=null,c=this.__cbOnceOwnerUnbindGamepadDisable[a],(this.__cbOnceOwnerUnbindGamepadDisable[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindGamepadDisable[a]),u.push(this.__cbOnceGamepadDisable[a]))}this.__cbOnceOwnerUnbindGamepadDisable=h,this.__cbOnceGamepadDisable=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDisable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(null);null==this.__cbOnGamepadDisable&&(this.__cbOnGamepadDisable=[]),this.__cbOnGamepadDisable.push(t)},onceGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDisable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(null);null==this.__cbOnceGamepadDisable&&(this.__cbOnceGamepadDisable=[]),this.__cbOnceGamepadDisable.push(t)},offGamepadDisable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDisable&&-1!=(n=this.__cbOnGamepadDisable.indexOf(e))&&(this.__cbOnGamepadDisable.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadDisable[n])&&s(),this.__cbOnOwnerUnbindGamepadDisable.splice(n,1)),null!=this.__cbOnceGamepadDisable&&-1!=(n=this.__cbOnceGamepadDisable.indexOf(e))&&(this.__cbOnceGamepadDisable.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadDisable[n])&&s(),this.__cbOnceOwnerUnbindGamepadDisable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDisable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDisable.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadDisable[l])&&s()}this.__cbOnOwnerUnbindGamepadDisable=null}if(null!=this.__cbOnceOwnerUnbindGamepadDisable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDisable.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadDisable[l])&&s()}this.__cbOnceOwnerUnbindGamepadDisable=null}this.__cbOnGamepadDisable=null,this.__cbOnceGamepadDisable=null}},listensGamepadDisable:function(){return null!=this.__cbOnGamepadDisable&&0<this.__cbOnGamepadDisable.length||null!=this.__cbOnceGamepadDisable&&0<this.__cbOnceGamepadDisable.length},startGamepadRumble:function(e,n,t,i){C.app.runtime.startGamepadRumble(e,n,t,i)},stopGamepadRumble:function(e){C.app.runtime.stopGamepadRumble(e)},unbindEvents:function(){this.offKeyDown(),this.offKeyUp(),this.offGamepadAxis(),this.offGamepadDown(),this.offGamepadUp(),this.offGamepadGyro(),this.offGamepadEnable(),this.offGamepadDisable()},__class__:Ge},(L["backend.Main"]=Ba).__name__="backend.Main",Ba.main=function(){Ba.events=new pa(Ba.ready),new C(Ba.configure,Ba.events)},Ba.configure=function(i){var n;if(i.window.backgroundSleep=.016666666666666666,i.render.webgl.version=2,-1<ie.navigator.userAgent.toLowerCase().indexOf(" electron/"))try{var e=require("@electron/remote").require("./app.js");e.isCeramicRunner&&(ua.electronRunner=e)}catch(e){Al.lastError=e}null!=ua.electronRunner&&(document.getElementsByTagName("html")[0].className+=" in-electron-runner",Tt._hasElectronRunner=!0,n=console.log,console.log=function(e){ua.electronRunner.consoleLog(e),n(e)},window.addEventListener("error",function(e){for(var e=e.error,n=(e instanceof Ml&&e.get_stack(),null!=e?(""+e.stack).split("\n"):[]),t=n.length-1,i=-1!=navigator.platform.indexOf("Win");0<=t;){var l=n[t],l=B.ltrim(l);l=B.replace(l,"http://localhost:"+V.string(ua.electronRunner.serverPort)+"/file:"+(i?"/":""),""),l=B.replace(l,"http://localhost:"+V.string(ua.electronRunner.serverPort)+"/",V.string(ua.electronRunner.appFiles)+"/"),ua.electronRunner.consoleLog("[error] "+l),--t}}));var e=he.init(),l=(Ba.project=new x(e),Ba.app=he.app,i.runtime.preventDefaultMouseWheel=e.settings.get_preventDefaultMouseWheel(),Ba.app.settings.onPreventDefaultMouseWheelChange(Ba.app,function(e,n){i.runtime.preventDefaultMouseWheel=e||0<Ba.app.numBlockingDefaultScroll}),i.runtime.preventDefaultTouches=e.settings.get_preventDefaultTouches(),Ba.app.settings.onPreventDefaultTouchesChange(Ba.app,function(e,n){i.runtime.preventDefaultTouches=e||0<Ba.app.numBlockingDefaultScroll}),Ba.app.numBlockingDefaultScroll);Ba.app.onPostUpdate(Ba.app,function(e){var n,t=Ba.app.numBlockingDefaultScroll;l!=t&&(l=t,n=Ba.app.settings.get_preventDefaultTouches()||0<t,i.runtime.preventDefaultTouches=n,n=Ba.app.settings.get_preventDefaultMouseWheel()||0<t,i.runtime.preventDefaultMouseWheel=n)}),null==ua.electronRunner&&Ba.app.settings.get_fullscreen()&&Ba.app.settings.set_fullscreen(!1),i.render.antialiasing=Ba.app.settings.antialiasing,0<Ba.app.settings.get_windowWidth()?i.window.width=Ba.app.settings.get_windowWidth():0<Ba.app.settings.get_targetWidth()&&(i.window.width=Ba.app.settings.get_targetWidth()),0<Ba.app.settings.get_windowHeight()?i.window.height=Ba.app.settings.get_windowHeight():0<Ba.app.settings.get_targetHeight()&&(i.window.height=Ba.app.settings.get_targetHeight()),i.window.fullscreen=Ba.app.settings.get_fullscreen(),i.window.resizable=Ba.app.settings.resizable,i.window.title=Ba.app.settings.get_title(),i.render.stencil=2,i.render.depth=16,Ba.configureOrientation(),null!=Ba.app.settings.backend.webParent?i.runtime.windowParent=Ba.app.settings.backend.webParent:i.runtime.windowParent=window.document.getElementById("ceramic-app"),i.runtime.mouseUseBrowserWindowEvents=!0,Ba.app.settings.backend.allowDefaultKeys&&(i.runtime.preventDefaultKeys=[]),Ba.containerElId=null!=Ba.app.settings.backend.webParent?Ba.app.settings.backend.webParent.id:"ceramic-app",Ba.containerWidth=0,Ba.containerHeight=0,Ba.containerPixelRatio=0,window.document.body.classList.add("ceramic-invisible"),window.requestAnimationFrame(Ba._updateContainerSizeIfNeeded),null!=ua.electronRunner&&(null!=ua.electronRunner.ceramicSettings&&ua.electronRunner.ceramicSettings({trace:function(e){},title:Ba.app.settings.get_title(),fullscreen:Ba.app.settings.get_fullscreen(),resizable:Ba.app.settings.resizable,targetWidth:0<Ba.app.settings.get_windowWidth()?Ba.app.settings.get_windowWidth():Ba.app.settings.get_targetWidth(),targetHeight:0<Ba.app.settings.get_windowHeight()?Ba.app.settings.get_windowHeight():Ba.app.settings.get_targetHeight()}),null!=ua.electronRunner.listenFullscreen)&&ua.electronRunner.listenFullscreen(function(e){he.app.settings.set_fullscreen(!0)},function(e){he.app.settings.set_fullscreen(!1)})},Ba._updateContainerSizeIfNeeded=function(e){null==e&&(e=.016);var e=window.document.getElementById(Ba.containerElId),n=window.document.getElementById("app");if(null!=e&&null!=n){var t,i=e.offsetWidth,e=e.offsetHeight,l=window.performance.now()/1e3;if(-1!=Ba.lastResizeTime&&(i!=Ba.lastNewWidth||e!=Ba.lastNewHeight))return-1==Ba.lastNewWidth&&-1==Ba.lastNewHeight||window.document.body.classList.add("ceramic-invisible"),Ba.lastResizeTime=l,Ba.lastNewWidth=i,Ba.lastNewHeight=e,void window.requestAnimationFrame(Ba._updateContainerSizeIfNeeded);if(-1!=Ba.lastResizeTime&&l-Ba.lastResizeTime<.1)return void window.requestAnimationFrame(Ba._updateContainerSizeIfNeeded);i==Ba.containerWidth&&e==Ba.containerHeight&&window.devicePixelRatio==Ba.containerPixelRatio||(Ba.containerWidth=i,Ba.containerHeight=e,Ba.containerPixelRatio=window.devicePixelRatio,n.style.width=Ba.containerWidth+"px",n.style.height=Ba.containerHeight+"px",n.width=Math.round(Ba.containerWidth*window.devicePixelRatio),n.height=Math.round(Ba.containerHeight*window.devicePixelRatio),Ba.resizing++,-1!=Ba.lastResizeTime&&window.document.body.classList.add("ceramic-invisible"),t=function(){0==Ba.resizing&&Ba.readyToDisplay&&window.document.body.classList.remove("ceramic-invisible")},window.setTimeout(function(){Ba.resizing--,t()},100),Ba.lastResizeTime=l)}window.requestAnimationFrame(Ba._updateContainerSizeIfNeeded)},Ba._appLoaderCheckDisplayReady=function(e){Ba._displayReady?e():Ba._pendingDisplayReadyDone=e},Ba.ready=function(){Ba.app.backend.io.initKeyValueIfNeeded(),Ba._displayReady=!1,Ba.app.loaders.push(Ba._appLoaderCheckDisplayReady);Y.gl.getExtension("OES_standard_derivatives");null!=ua.electronRunner&&ua.electronRunner.ceramicReady();var n=null,n=window.setInterval(function(){var e=null!=Ba.app.settings.backend.webParent?Ba.app.settings.backend.webParent.id:"ceramic-app",e=window.document.getElementById(e);window.document.getElementById("app").offsetWidth==e.offsetWidth&&(Ba.readyToDisplay=!0,window.clearInterval(n)),Ba.readyToDisplay&&(0==Ba.resizing&&window.document.body.classList.remove("ceramic-invisible"),Ba._displayReady=!0,null!=Ba._pendingDisplayReadyDone)&&(e=Ba._pendingDisplayReadyDone,Ba._pendingDisplayReadyDone=null,e())},500)},Ba.configureOrientation=function(){},(L["spec.Screen"]=Ca).__name__="spec.Screen",Ca.__isInterface__=!0,Ca.prototype={getWidth:null,getHeight:null,getDensity:null,setBackground:null,setWindowTitle:null,setWindowFullscreen:null,screenshotToTexture:null,screenshotToPng:null,screenshotToPixels:null,__class__:Ca},function(){this.nextScreenshotIndex=0,this.didTryResumeAudioContext=!1}),ze=((L["backend.Screen"]=He).__name__="backend.Screen",He.__interfaces__=[Ca,k],He.prototype={__cbOnResize:null,__cbOnceResize:null,__cbOnOwnerUnbindResize:null,__cbOnceOwnerUnbindResize:null,emitResize:function(){var e=0;if(null!=this.__cbOnResize&&(e+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(e+=this.__cbOnceResize.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnResize)for(var l=0,s=this.__cbOnResize.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnResize[r],++i):--e}if(null!=this.__cbOnceResize){for(var a=null,h=null,l=0,s=this.__cbOnceResize.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceResize[r],this.__cbOnceResize[r]=null,u=this.__cbOnceOwnerUnbindResize[r],(this.__cbOnceOwnerUnbindResize[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindResize[r]),h.push(this.__cbOnceResize[r]))}this.__cbOnceOwnerUnbindResize=a,this.__cbOnceResize=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event resize because owner is destroyed!");var l=function(e){null!=t&&(i.offResize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(t)},onceResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event resize because owner is destroyed!");var l=function(e){null!=t&&(i.offResize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(t)},offResize:function(e){if(null!=e){var n;null!=this.__cbOnResize&&-1!=(n=this.__cbOnResize.indexOf(e))&&(this.__cbOnResize.splice(n,1),null!=(s=this.__cbOnOwnerUnbindResize[n])&&s(),this.__cbOnOwnerUnbindResize.splice(n,1)),null!=this.__cbOnceResize&&-1!=(n=this.__cbOnceResize.indexOf(e))&&(this.__cbOnceResize.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindResize[n])&&s(),this.__cbOnceOwnerUnbindResize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindResize[l])&&s()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindResize[l])&&s()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&0<this.__cbOnResize.length||null!=this.__cbOnceResize&&0<this.__cbOnceResize.length},__cbOnMouseDown:null,__cbOnceMouseDown:null,__cbOnOwnerUnbindMouseDown:null,__cbOnceOwnerUnbindMouseDown:null,emitMouseDown:function(e,n,t){this.tryResumeAudioContextIfNeeded();var i=0;if(null!=this.__cbOnMouseDown&&(i+=this.__cbOnMouseDown.length),null!=this.__cbOnceMouseDown&&(i+=this.__cbOnceMouseDown.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnMouseDown)for(var a=0,h=this.__cbOnMouseDown.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnMouseDown[u],++r):--i}if(null!=this.__cbOnceMouseDown){for(var c=null,o=null,a=0,h=this.__cbOnceMouseDown.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceMouseDown[u],this.__cbOnceMouseDown[u]=null,_=this.__cbOnceOwnerUnbindMouseDown[u],(this.__cbOnceOwnerUnbindMouseDown[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseDown[u]),o.push(this.__cbOnceMouseDown[u]))}this.__cbOnceOwnerUnbindMouseDown=c,this.__cbOnceMouseDown=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseDown because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(null);null==this.__cbOnMouseDown&&(this.__cbOnMouseDown=[]),this.__cbOnMouseDown.push(t)},onceMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseDown because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(null);null==this.__cbOnceMouseDown&&(this.__cbOnceMouseDown=[]),this.__cbOnceMouseDown.push(t)},offMouseDown:function(e){if(null!=e){var n;null!=this.__cbOnMouseDown&&-1!=(n=this.__cbOnMouseDown.indexOf(e))&&(this.__cbOnMouseDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseDown[n])&&s(),this.__cbOnOwnerUnbindMouseDown.splice(n,1)),null!=this.__cbOnceMouseDown&&-1!=(n=this.__cbOnceMouseDown.indexOf(e))&&(this.__cbOnceMouseDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseDown[n])&&s(),this.__cbOnceOwnerUnbindMouseDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseDown){for(var t=0,i=this.__cbOnOwnerUnbindMouseDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseDown[l])&&s()}this.__cbOnOwnerUnbindMouseDown=null}if(null!=this.__cbOnceOwnerUnbindMouseDown){for(t=0,i=this.__cbOnceOwnerUnbindMouseDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseDown[l])&&s()}this.__cbOnceOwnerUnbindMouseDown=null}this.__cbOnMouseDown=null,this.__cbOnceMouseDown=null}},listensMouseDown:function(){return null!=this.__cbOnMouseDown&&0<this.__cbOnMouseDown.length||null!=this.__cbOnceMouseDown&&0<this.__cbOnceMouseDown.length},__cbOnMouseUp:null,__cbOnceMouseUp:null,__cbOnOwnerUnbindMouseUp:null,__cbOnceOwnerUnbindMouseUp:null,emitMouseUp:function(e,n,t){var i=0;if(null!=this.__cbOnMouseUp&&(i+=this.__cbOnMouseUp.length),null!=this.__cbOnceMouseUp&&(i+=this.__cbOnceMouseUp.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnMouseUp)for(var a=0,h=this.__cbOnMouseUp.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnMouseUp[u],++r):--i}if(null!=this.__cbOnceMouseUp){for(var c=null,o=null,a=0,h=this.__cbOnceMouseUp.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceMouseUp[u],this.__cbOnceMouseUp[u]=null,_=this.__cbOnceOwnerUnbindMouseUp[u],(this.__cbOnceOwnerUnbindMouseUp[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseUp[u]),o.push(this.__cbOnceMouseUp[u]))}this.__cbOnceOwnerUnbindMouseUp=c,this.__cbOnceMouseUp=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseUp because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(null);null==this.__cbOnMouseUp&&(this.__cbOnMouseUp=[]),this.__cbOnMouseUp.push(t)},onceMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseUp because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(null);null==this.__cbOnceMouseUp&&(this.__cbOnceMouseUp=[]),this.__cbOnceMouseUp.push(t)},offMouseUp:function(e){if(null!=e){var n;null!=this.__cbOnMouseUp&&-1!=(n=this.__cbOnMouseUp.indexOf(e))&&(this.__cbOnMouseUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseUp[n])&&s(),this.__cbOnOwnerUnbindMouseUp.splice(n,1)),null!=this.__cbOnceMouseUp&&-1!=(n=this.__cbOnceMouseUp.indexOf(e))&&(this.__cbOnceMouseUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseUp[n])&&s(),this.__cbOnceOwnerUnbindMouseUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseUp){for(var t=0,i=this.__cbOnOwnerUnbindMouseUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseUp[l])&&s()}this.__cbOnOwnerUnbindMouseUp=null}if(null!=this.__cbOnceOwnerUnbindMouseUp){for(t=0,i=this.__cbOnceOwnerUnbindMouseUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseUp[l])&&s()}this.__cbOnceOwnerUnbindMouseUp=null}this.__cbOnMouseUp=null,this.__cbOnceMouseUp=null}},listensMouseUp:function(){return null!=this.__cbOnMouseUp&&0<this.__cbOnMouseUp.length||null!=this.__cbOnceMouseUp&&0<this.__cbOnceMouseUp.length},__cbOnMouseWheel:null,__cbOnceMouseWheel:null,__cbOnOwnerUnbindMouseWheel:null,__cbOnceOwnerUnbindMouseWheel:null,emitMouseWheel:function(e,n){var t=0;if(null!=this.__cbOnMouseWheel&&(t+=this.__cbOnMouseWheel.length),null!=this.__cbOnceMouseWheel&&(t+=this.__cbOnceMouseWheel.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMouseWheel)for(var r=0,a=this.__cbOnMouseWheel.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMouseWheel[h],++s):--t}if(null!=this.__cbOnceMouseWheel){for(var u=null,c=null,r=0,a=this.__cbOnceMouseWheel.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMouseWheel[h],this.__cbOnceMouseWheel[h]=null,o=this.__cbOnceOwnerUnbindMouseWheel[h],(this.__cbOnceOwnerUnbindMouseWheel[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMouseWheel[h]),c.push(this.__cbOnceMouseWheel[h]))}this.__cbOnceOwnerUnbindMouseWheel=u,this.__cbOnceMouseWheel=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseWheel because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseWheel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(null);null==this.__cbOnMouseWheel&&(this.__cbOnMouseWheel=[]),this.__cbOnMouseWheel.push(t)},onceMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseWheel because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseWheel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(null);null==this.__cbOnceMouseWheel&&(this.__cbOnceMouseWheel=[]),this.__cbOnceMouseWheel.push(t)},offMouseWheel:function(e){if(null!=e){var n;null!=this.__cbOnMouseWheel&&-1!=(n=this.__cbOnMouseWheel.indexOf(e))&&(this.__cbOnMouseWheel.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseWheel[n])&&s(),this.__cbOnOwnerUnbindMouseWheel.splice(n,1)),null!=this.__cbOnceMouseWheel&&-1!=(n=this.__cbOnceMouseWheel.indexOf(e))&&(this.__cbOnceMouseWheel.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseWheel[n])&&s(),this.__cbOnceOwnerUnbindMouseWheel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseWheel){for(var t=0,i=this.__cbOnOwnerUnbindMouseWheel.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseWheel[l])&&s()}this.__cbOnOwnerUnbindMouseWheel=null}if(null!=this.__cbOnceOwnerUnbindMouseWheel){for(t=0,i=this.__cbOnceOwnerUnbindMouseWheel.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseWheel[l])&&s()}this.__cbOnceOwnerUnbindMouseWheel=null}this.__cbOnMouseWheel=null,this.__cbOnceMouseWheel=null}},listensMouseWheel:function(){return null!=this.__cbOnMouseWheel&&0<this.__cbOnMouseWheel.length||null!=this.__cbOnceMouseWheel&&0<this.__cbOnceMouseWheel.length},__cbOnMouseMove:null,__cbOnceMouseMove:null,__cbOnOwnerUnbindMouseMove:null,__cbOnceOwnerUnbindMouseMove:null,emitMouseMove:function(e,n){var t=0;if(null!=this.__cbOnMouseMove&&(t+=this.__cbOnMouseMove.length),null!=this.__cbOnceMouseMove&&(t+=this.__cbOnceMouseMove.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMouseMove)for(var r=0,a=this.__cbOnMouseMove.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMouseMove[h],++s):--t}if(null!=this.__cbOnceMouseMove){for(var u=null,c=null,r=0,a=this.__cbOnceMouseMove.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMouseMove[h],this.__cbOnceMouseMove[h]=null,o=this.__cbOnceOwnerUnbindMouseMove[h],(this.__cbOnceOwnerUnbindMouseMove[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMouseMove[h]),c.push(this.__cbOnceMouseMove[h]))}this.__cbOnceOwnerUnbindMouseMove=u,this.__cbOnceMouseMove=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseMove because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(null);null==this.__cbOnMouseMove&&(this.__cbOnMouseMove=[]),this.__cbOnMouseMove.push(t)},onceMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseMove because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(null);null==this.__cbOnceMouseMove&&(this.__cbOnceMouseMove=[]),this.__cbOnceMouseMove.push(t)},offMouseMove:function(e){if(null!=e){var n;null!=this.__cbOnMouseMove&&-1!=(n=this.__cbOnMouseMove.indexOf(e))&&(this.__cbOnMouseMove.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseMove[n])&&s(),this.__cbOnOwnerUnbindMouseMove.splice(n,1)),null!=this.__cbOnceMouseMove&&-1!=(n=this.__cbOnceMouseMove.indexOf(e))&&(this.__cbOnceMouseMove.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseMove[n])&&s(),this.__cbOnceOwnerUnbindMouseMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseMove){for(var t=0,i=this.__cbOnOwnerUnbindMouseMove.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseMove[l])&&s()}this.__cbOnOwnerUnbindMouseMove=null}if(null!=this.__cbOnceOwnerUnbindMouseMove){for(t=0,i=this.__cbOnceOwnerUnbindMouseMove.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseMove[l])&&s()}this.__cbOnceOwnerUnbindMouseMove=null}this.__cbOnMouseMove=null,this.__cbOnceMouseMove=null}},listensMouseMove:function(){return null!=this.__cbOnMouseMove&&0<this.__cbOnMouseMove.length||null!=this.__cbOnceMouseMove&&0<this.__cbOnceMouseMove.length},__cbOnTouchDown:null,__cbOnceTouchDown:null,__cbOnOwnerUnbindTouchDown:null,__cbOnceOwnerUnbindTouchDown:null,emitTouchDown:function(e,n,t){this.tryResumeAudioContextIfNeeded();var i=0;if(null!=this.__cbOnTouchDown&&(i+=this.__cbOnTouchDown.length),null!=this.__cbOnceTouchDown&&(i+=this.__cbOnceTouchDown.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnTouchDown)for(var a=0,h=this.__cbOnTouchDown.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnTouchDown[u],++r):--i}if(null!=this.__cbOnceTouchDown){for(var c=null,o=null,a=0,h=this.__cbOnceTouchDown.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceTouchDown[u],this.__cbOnceTouchDown[u]=null,_=this.__cbOnceOwnerUnbindTouchDown[u],(this.__cbOnceOwnerUnbindTouchDown[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTouchDown[u]),o.push(this.__cbOnceTouchDown[u]))}this.__cbOnceOwnerUnbindTouchDown=c,this.__cbOnceTouchDown=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchDown because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(null);null==this.__cbOnTouchDown&&(this.__cbOnTouchDown=[]),this.__cbOnTouchDown.push(t)},onceTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchDown because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(null);null==this.__cbOnceTouchDown&&(this.__cbOnceTouchDown=[]),this.__cbOnceTouchDown.push(t)},offTouchDown:function(e){if(null!=e){var n;null!=this.__cbOnTouchDown&&-1!=(n=this.__cbOnTouchDown.indexOf(e))&&(this.__cbOnTouchDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTouchDown[n])&&s(),this.__cbOnOwnerUnbindTouchDown.splice(n,1)),null!=this.__cbOnceTouchDown&&-1!=(n=this.__cbOnceTouchDown.indexOf(e))&&(this.__cbOnceTouchDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTouchDown[n])&&s(),this.__cbOnceOwnerUnbindTouchDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchDown){for(var t=0,i=this.__cbOnOwnerUnbindTouchDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTouchDown[l])&&s()}this.__cbOnOwnerUnbindTouchDown=null}if(null!=this.__cbOnceOwnerUnbindTouchDown){for(t=0,i=this.__cbOnceOwnerUnbindTouchDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTouchDown[l])&&s()}this.__cbOnceOwnerUnbindTouchDown=null}this.__cbOnTouchDown=null,this.__cbOnceTouchDown=null}},listensTouchDown:function(){return null!=this.__cbOnTouchDown&&0<this.__cbOnTouchDown.length||null!=this.__cbOnceTouchDown&&0<this.__cbOnceTouchDown.length},__cbOnTouchUp:null,__cbOnceTouchUp:null,__cbOnOwnerUnbindTouchUp:null,__cbOnceOwnerUnbindTouchUp:null,emitTouchUp:function(e,n,t){var i=0;if(null!=this.__cbOnTouchUp&&(i+=this.__cbOnTouchUp.length),null!=this.__cbOnceTouchUp&&(i+=this.__cbOnceTouchUp.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnTouchUp)for(var a=0,h=this.__cbOnTouchUp.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnTouchUp[u],++r):--i}if(null!=this.__cbOnceTouchUp){for(var c=null,o=null,a=0,h=this.__cbOnceTouchUp.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceTouchUp[u],this.__cbOnceTouchUp[u]=null,_=this.__cbOnceOwnerUnbindTouchUp[u],(this.__cbOnceOwnerUnbindTouchUp[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTouchUp[u]),o.push(this.__cbOnceTouchUp[u]))}this.__cbOnceOwnerUnbindTouchUp=c,this.__cbOnceTouchUp=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchUp because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(null);null==this.__cbOnTouchUp&&(this.__cbOnTouchUp=[]),this.__cbOnTouchUp.push(t)},onceTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchUp because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(null);null==this.__cbOnceTouchUp&&(this.__cbOnceTouchUp=[]),this.__cbOnceTouchUp.push(t)},offTouchUp:function(e){if(null!=e){var n;null!=this.__cbOnTouchUp&&-1!=(n=this.__cbOnTouchUp.indexOf(e))&&(this.__cbOnTouchUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTouchUp[n])&&s(),this.__cbOnOwnerUnbindTouchUp.splice(n,1)),null!=this.__cbOnceTouchUp&&-1!=(n=this.__cbOnceTouchUp.indexOf(e))&&(this.__cbOnceTouchUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTouchUp[n])&&s(),this.__cbOnceOwnerUnbindTouchUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchUp){for(var t=0,i=this.__cbOnOwnerUnbindTouchUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTouchUp[l])&&s()}this.__cbOnOwnerUnbindTouchUp=null}if(null!=this.__cbOnceOwnerUnbindTouchUp){for(t=0,i=this.__cbOnceOwnerUnbindTouchUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTouchUp[l])&&s()}this.__cbOnceOwnerUnbindTouchUp=null}this.__cbOnTouchUp=null,this.__cbOnceTouchUp=null}},listensTouchUp:function(){return null!=this.__cbOnTouchUp&&0<this.__cbOnTouchUp.length||null!=this.__cbOnceTouchUp&&0<this.__cbOnceTouchUp.length},__cbOnTouchMove:null,__cbOnceTouchMove:null,__cbOnOwnerUnbindTouchMove:null,__cbOnceOwnerUnbindTouchMove:null,emitTouchMove:function(e,n,t){var i=0;if(null!=this.__cbOnTouchMove&&(i+=this.__cbOnTouchMove.length),null!=this.__cbOnceTouchMove&&(i+=this.__cbOnceTouchMove.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnTouchMove)for(var a=0,h=this.__cbOnTouchMove.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnTouchMove[u],++r):--i}if(null!=this.__cbOnceTouchMove){for(var c=null,o=null,a=0,h=this.__cbOnceTouchMove.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceTouchMove[u],this.__cbOnceTouchMove[u]=null,_=this.__cbOnceOwnerUnbindTouchMove[u],(this.__cbOnceOwnerUnbindTouchMove[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTouchMove[u]),o.push(this.__cbOnceTouchMove[u]))}this.__cbOnceOwnerUnbindTouchMove=c,this.__cbOnceTouchMove=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchMove because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(null);null==this.__cbOnTouchMove&&(this.__cbOnTouchMove=[]),this.__cbOnTouchMove.push(t)},onceTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchMove because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(null);null==this.__cbOnceTouchMove&&(this.__cbOnceTouchMove=[]),this.__cbOnceTouchMove.push(t)},offTouchMove:function(e){if(null!=e){var n;null!=this.__cbOnTouchMove&&-1!=(n=this.__cbOnTouchMove.indexOf(e))&&(this.__cbOnTouchMove.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTouchMove[n])&&s(),this.__cbOnOwnerUnbindTouchMove.splice(n,1)),null!=this.__cbOnceTouchMove&&-1!=(n=this.__cbOnceTouchMove.indexOf(e))&&(this.__cbOnceTouchMove.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTouchMove[n])&&s(),this.__cbOnceOwnerUnbindTouchMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchMove){for(var t=0,i=this.__cbOnOwnerUnbindTouchMove.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTouchMove[l])&&s()}this.__cbOnOwnerUnbindTouchMove=null}if(null!=this.__cbOnceOwnerUnbindTouchMove){for(t=0,i=this.__cbOnceOwnerUnbindTouchMove.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTouchMove[l])&&s()}this.__cbOnceOwnerUnbindTouchMove=null}this.__cbOnTouchMove=null,this.__cbOnceTouchMove=null}},listensTouchMove:function(){return null!=this.__cbOnTouchMove&&0<this.__cbOnTouchMove.length||null!=this.__cbOnceTouchMove&&0<this.__cbOnceTouchMove.length},didTryResumeAudioContext:null,willEmitMouseDown:function(e,n,t){this.tryResumeAudioContextIfNeeded()},willEmitTouchDown:function(e,n,t){this.tryResumeAudioContextIfNeeded()},tryResumeAudioContextIfNeeded:function(){this.didTryResumeAudioContext||(this.didTryResumeAudioContext=!0,he.app.backend.audio.resumeAudioContext(function(e){e?he.app.logger.success("Did resume audio context",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Screen.hx",lineNumber:55,className:"backend.Screen",methodName:"tryResumeAudioContextIfNeeded"}):he.app.logger.error("Failed to resume audio context",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Screen.hx",lineNumber:58,className:"backend.Screen",methodName:"tryResumeAudioContextIfNeeded"})}))},getWidth:function(){return C.app.screenWidth},getHeight:function(){return C.app.screenHeight},getDensity:function(){return C.app.screenDensity},setBackground:function(e){},setWindowTitle:function(e){C.app.runtime.setWindowTitle(e)},setWindowFullscreen:function(e){null!=ua.electronRunner&&null!=ua.electronRunner.setFullscreen?ua.electronRunner.setFullscreen(e):C.app.runtime.setWindowFullscreen(e)||he.app.settings.set_fullscreen(!e)},nextScreenshotIndex:null,screenshotToTexture:function(t){var i=this;C.app.runtime.window.toBlob(function(e){e.arrayBuffer().then(function(e){e=new Uint8Array(e,0,e.byteLength);C.app.assets.imageFromBytes(e,"png",4,!0,function(e){var n;null!=e?(n="screenshot:"+i.nextScreenshotIndex++,(e=Xi.fromImage(e)).id=n,e.init(),t(e)):t(null)})})},"image/png")},screenshotToPng:function(n,t){C.app.runtime.window.toBlob(function(e){e.arrayBuffer().then(function(e){e=new kl(new Uint8Array(new Uint8Array(e,0,e.byteLength).buffer));null!=n?(Cn.saveBytes(n,e),t()):t(e)})},"image/png")},screenshotToPixels:function(n){C.app.runtime.window.toBlob(function(e){e.arrayBuffer().then(function(e){e=new Uint8Array(e,0,e.byteLength);C.app.assets.imageFromBytes(e,"png",4,!1,function(e){null!=e?n(e.pixels,e.width,e.height):n(null,0,0)})})},"image/png")},unbindEvents:function(){this.offResize(),this.offMouseDown(),this.offMouseUp(),this.offMouseWheel(),this.offMouseMove(),this.offTouchDown(),this.offTouchUp(),this.offTouchMove()},__class__:He},(L["clay.Resource"]=Ea).__name__="clay.Resource",Ea.prototype={id:null,__class__:Ea},(L["clay.graphics.Shader"]=Fa).__name__="clay.graphics.Shader",Fa.__super__=Ea,Fa.prototype=$extend(Ea.prototype,{vertSource:null,fragSource:null,attributes:null,textures:null,uniforms:null,gpuShader:null,init:function(){if(this.gpuShader=T.createShader(this.vertSource,this.fragSource,this.attributes,this.textures),null==this.gpuShader)throw Q.thrown("Failed to create shader (id="+this.id+")");this.uniforms=new Vi(this.gpuShader)},activate:function(){var e=this.gpuShader;T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),null!=this.uniforms&&this.uniforms.apply()},destroy:function(){T.deleteShader(this.gpuShader)},__class__:Fa}),(L["backend.ShaderImpl"]=Ga).__name__="backend.ShaderImpl",Ga.__super__=Fa,Ga.prototype=$extend(Fa.prototype,{customAttributes:null,isBatchingMultiTexture:null,clone:function(){var e=new Ga;return e.vertSource=this.vertSource,e.fragSource=this.fragSource,e.customAttributes=this.customAttributes,e.isBatchingMultiTexture=this.isBatchingMultiTexture,e.attributes=this.attributes,e.textures=this.textures,e.init(),e},__class__:Ga}),(L["spec.Shaders"]=Ha).__name__="spec.Shaders",Ha.__isInterface__=!0,Ha.prototype={destroy:null,fromSource:null,clone:null,setInt:null,setFloat:null,setColor:null,setVec2:null,setVec3:null,setVec4:null,setFloatArray:null,setTexture:null,customFloatAttributesSize:null,maxIfStatementsByFragmentShader:null,canBatchWithMultipleTextures:null,supportsHotReloadPath:null,__class__:Ha},function(){}),Ke=((L["backend.Shaders"]=ze).__name__="backend.Shaders",ze.__interfaces__=[Ha],ze.removeExtensions=function(e){for(var n=[],t=0,i=e.split("\n");t<i.length;){var l=i[t];++t,B.startsWith(B.trim(l),"#extension GL_OES_")||B.startsWith(l,"#extension OES_")||n.push(l)}return e=n.join("\n")},ze.convertToGLES3=function(e,n){var t=e.split("\n");return B.startsWith(B.trim(t[0]),"#version 100")&&(t.shift(),e=t.join("\n")),B.startsWith(e,"#version ")||(e="#version 300 es\n"+e,n&&(e=B.replace(e,"void main(","out vec4 fragColor;\nvoid main(")),e=Ei.replaceIdentifier(e,"attribute","in"),e=n?Ei.replaceIdentifier(e,"varying","in"):Ei.replaceIdentifier(e,"varying","out"),e=Ei.replaceIdentifier(e,"texture2D","texture"),e=Ei.replaceIdentifier(e,"gl_FragColor","fragColor")),e},ze.processMultiTextureVertTemplate=function(e,n,t){for(var i=e.split("\n"),l=[],s=0,r=i.length;s<r;){var a=i[s++],h=B.replace(B.trim(a)," ","").toLowerCase();l.push("//ceramic:multitexture/vertextextureid"==h?"attribute float vertexTextureId;":"//ceramic:multitexture/textureid"==h?"varying float textureId;":"//ceramic:multitexture/assigntextureid"==h?"textureId = vertexTextureId;":a)}return l.join("\n")},ze.processMultiTextureFragTemplate=function(e,n,t){for(var i=0|Math.min(n,t),l=e.split("\n"),s=[],r=!1,a=!1,h=[],u=0,c=l.length;u<c;){var o=l[u++],_=B.replace(B.trim(o)," ","").toLowerCase();if(r)for(var r=!1,d=0,b=i;d<b;){var g=d++;s.push(0==g?o:B.replace(o,"tex0","tex"+g))}else if(a)if("//ceramic:multitexture/endif"==_){if(a=!1,0<h.length)for(var O=0,f=i;O<f;){for(var p=O++,m=(s.push(0==p?"if (textureId == 0.0) {":"else if (textureId == "+p+".0) {"),0),w=h.length;m<w;){var v=m++;s.push(0==p?h[v]:B.replace(h[v],"tex0","tex"+p))}s.push("}")}}else h.push(o);else B.startsWith(_,"//ceramic:multitexture")?"//ceramic:multitexture/texture"==_?r=!0:"//ceramic:multitexture/textureid"==_?s.push("varying float textureId;"):"//ceramic:multitexture/if"==_&&(a=!0):s.push(o)}return s.join("\n")},ze.computeMaxIfStatementsByFragmentShaderIfNeeded=function(e){if(null==e&&(e=32),-1==ze._maxIfStatementsByFragmentShader){for(var n=B.trim("\n#ifdef GL_ES\nprecision mediump float;\n#else\n#define mediump\n#endif\nvarying float test;\nvoid main() {\n    {{CONDITIONS}}\n    gl_FragColor = vec4(0.0);\n}\n"),t=Y.gl.createShader(35632);0<e;){var i=B.replace(n,"{{CONDITIONS}}",ze.generateIfStatements(e));if(Y.gl.shaderSource(t,i),Y.gl.compileShader(t),0!=Y.gl.getShaderParameter(t,35713)){ze._maxIfStatementsByFragmentShader=e;break}e=e/2|0}Y.gl.deleteShader(t)}},ze.generateIfStatements=function(e){for(var n="",t=0,i=e;t<i;){var l=t++;0<l&&(n+="\nelse "),l<e-1&&(n+=V.string("if (test == "+l+".0) {}"))}return n},ze.prototype={fromSource:function(e,n,t){for(var i=!1,l=0,s=n.split("\n");l<s.length;){var r=s[l];if(++l,"//ceramic:multitexture"==B.replace(B.trim(r)," ","").toLowerCase()){i=!0;break}}var a=["tex0"];if(i){var h=he.app.backend.textures.maxTexturesByBatch(),u=this.maxIfStatementsByFragmentShader(),c=0|Math.min(h,u);if(1<c)for(var o=1;o<=c;)a.push("tex"+o),++o;n=ze.processMultiTextureFragTemplate(n,h,u),e=ze.processMultiTextureVertTemplate(e,h,u)}h=!1,u=!1,2<=C.app.runtime.webglVersion&&(u=h=!0),h&&(n=ze.removeExtensions(n),e=ze.removeExtensions(e)),u&&(n=ze.convertToGLES3(n,!0),e=ze.convertToGLES3(e,!1)),h=new Ga;return h.attributes=i?ze.SHADER_ATTRIBUTES_MULTITEXTURE:ze.SHADER_ATTRIBUTES,h.textures=a,h.vertSource=e,h.fragSource=n,h.isBatchingMultiTexture=i,h.customAttributes=t,h.init(),h},destroy:function(e){e.destroy()},clone:function(e){return e.clone()},setInt:function(e,n,t){e.uniforms.setInt(n,t)},setFloat:function(e,n,t){e.uniforms.setFloat(n,t)},setColor:function(e,n,t,i,l,s){e.uniforms.setColor(n,t,i,l,s)},setVec2:function(e,n,t,i){e.uniforms.setVector2(n,t,i)},setVec3:function(e,n,t,i,l){e.uniforms.setVector3(n,t,i,l)},setVec4:function(e,n,t,i,l,s){e.uniforms.setVector4(n,t,i,l,s)},setFloatArray:function(e,n,t){e.uniforms.setFloatArray(n,new Float32Array(t))},setTexture:function(e,n,t,i){e.uniforms.setTexture(n,t,i)},setMat4FromTransform:function(e,n,t){e.uniforms.setMatrix4(n,new Float32Array([t.a,t.b,0,0,t.c,t.d,0,0,0,0,1,0,t.tx,t.ty,0,1]))},customFloatAttributesSize:function(e){var n=0,t=e.customAttributes;if(null!=t)for(var i=0,l=t.length;i<l;)n+=t[i++].size;return n},maxIfStatementsByFragmentShader:function(){var e=32;if(-1==ze._maxIfStatementsByFragmentShader){for(var n=B.trim("\n#ifdef GL_ES\nprecision mediump float;\n#else\n#define mediump\n#endif\nvarying float test;\nvoid main() {\n    {{CONDITIONS}}\n    gl_FragColor = vec4(0.0);\n}\n"),t=Y.gl.createShader(35632);0<e;){var i=B.replace(n,"{{CONDITIONS}}",ze.generateIfStatements(e));if(Y.gl.shaderSource(t,i),Y.gl.compileShader(t),0!=Y.gl.getShaderParameter(t,35713)){ze._maxIfStatementsByFragmentShader=e;break}e=e/2|0}Y.gl.deleteShader(t)}return ze._maxIfStatementsByFragmentShader},canBatchWithMultipleTextures:function(e){return e.isBatchingMultiTexture},supportsHotReloadPath:function(){return!0},__class__:ze},(L["spec.TextInput"]=Ja).__name__="spec.TextInput",Ja.__isInterface__=!0,Ja.prototype={start:null,stop:null,__class__:Ja},function(){this.inputRectH=0,this.inputRectW=0,this.inputRectY=0,this.inputRectX=0,this.inputActive=!1}),Xe=((L["backend.TextInput"]=Ke).__name__="backend.TextInput",Ke.__interfaces__=[Ja],Ke.prototype={inputActive:null,inputRectX:null,inputRectY:null,inputRectW:null,inputRectH:null,start:function(e,n,t,i,l){this.inputActive||(this.inputRectX=0|n,this.inputRectY=0|t,this.inputRectW=0|Math.max(1,i),this.inputRectH=0|Math.max(1,l),this.inputActive=!0)},stop:function(){this.inputActive&&(this.inputRectX=0,this.inputRectY=0,this.inputRectW=0,this.inputRectH=0,this.inputActive=!1)},handleTextInput:function(e){" "!=e&&he.app.textInput.appendText(e)},handleKeyDown:function(e,n){this.inputActive&&(42==n?he.app.textInput.backspace():44==n?he.app.textInput.space():40==n?he.app.textInput.enter():88==n?he.app.textInput.kpEnter():41==n?he.app.textInput.escape():80==n?he.app.textInput.moveLeft():79==n?he.app.textInput.moveRight():82==n?he.app.textInput.moveUp():81==n&&he.app.textInput.moveDown()),225==n?he.app.textInput.lshiftDown():229==n?he.app.textInput.rshiftDown():224==n?he.app.textInput.lctrlDown():228==n?he.app.textInput.rctrlDown():227==n?he.app.textInput.lmetaDown():231==n&&he.app.textInput.rmetaDown()},handleKeyUp:function(e,n){225==n?he.app.textInput.lshiftUp():229==n?he.app.textInput.rshiftUp():224==n?he.app.textInput.lctrlUp():228==n?he.app.textInput.rctrlUp():227==n?he.app.textInput.lmetaUp():231==n&&he.app.textInput.rmetaUp()},__class__:Ke},(L["spec.Texts"]=La).__name__="spec.Texts",La.__isInterface__=!0,La.prototype={load:null,supportsHotReloadPath:null,__class__:La},function(){this.loadingTextCallbacks=new z}),Ye=((L["backend.Texts"]=Xe).__name__="backend.Texts",Xe.__interfaces__=[La],Xe.prototype={load:function(r,e,n){function B5a(e){function H5a(){n(e),n=null}null!=s?s.push(H5a):he.app._onceImmediate(H5a)}var t,i,a=this,l=null!=e&&2==e.loadMethod,s=null!=e?e.immediate:null,e=B.startsWith(r,"http://")||B.startsWith(r,"https://");At.isAbsolute(r)||e||(r=At.join([he.app.settings.assetsPath,r])),Object.prototype.hasOwnProperty.call(this.loadingTextCallbacks.h,r)?this.loadingTextCallbacks.h[r].push(function(e){B5a(e)}):(this.loadingTextCallbacks.h[r]=[],t=r,e||-1!=(i=t.indexOf("?"))&&(t=h.substr(t,0,i)),i=e?t:C.app.assets.fullPath(t),C.app.io.loadData(i,!0,!l,function(e){if(null==e)if(null!=(l=a.loadingTextCallbacks.h[r]))for(var n=a.loadingTextCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,r)&&delete n.h[r],B5a(null),0);t<l.length;){var i=l[t];++t,i(null)}else B5a(null);else{var l,s=new kl(new Uint8Array(e.buffer)).toString();if(null!=(l=a.loadingTextCallbacks.h[r]))for(n=a.loadingTextCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,r)&&delete n.h[r],B5a(s),0);t<l.length;){i=l[t];++t,i(s)}else B5a(s)}}),null!=s?s.push(Bi.flush):he.app._onceImmediate(Bi.flush))},supportsHotReloadPath:function(){return!0},loadingTextCallbacks:null,__class__:Xe},(L["spec.Textures"]=Oa).__name__="spec.Textures",Oa.__isInterface__=!0,Oa.prototype={load:null,loadFromBytes:null,supportsHotReloadPath:null,createTexture:null,destroyTexture:null,getTextureId:null,getTextureWidth:null,getTextureHeight:null,getTextureWidthActual:null,getTextureHeightActual:null,fetchTexturePixels:null,submitTexturePixels:null,setTextureFilter:null,setTextureWrapS:null,setTextureWrapT:null,createRenderTarget:null,maxTexturesByBatch:null,getTextureIndex:null,textureToPng:null,pixelsToPng:null,__class__:Oa},function(){this.loadedTexturesRetainCount=new z,this.loadedTextures=new z,this.loadingTextureCallbacks=new z,this.nextBytesIndex=0,this.nextPixelsIndex=0,this.nextRenderIndex=0}),e=((L["backend.Textures"]=Ye).__name__="backend.Textures",Ye.__interfaces__=[Oa],Ye.computeMaxTexturesByBatchIfNeeded=function(){-1==Ye._maxTexturesByBatch&&(Ye._maxTexturesByBatch=0|Math.min(32,Y.gl.getParameter(34930)))},Ye.prototype={load:function(r,e,n){function V5a(e){function cga(){n(e),n=null}null!=s?s.push(cga):he.app._onceImmediate(cga)}var t,i,a,u,c=this,l=null!=e&&2==e.loadMethod,s=null!=e?e.immediate:null,o=B.startsWith(r,"http://")||B.startsWith(r,"https://");At.isAbsolute(r)||o||(r=At.join([he.app.settings.assetsPath,r])),Object.prototype.hasOwnProperty.call(this.loadedTextures.h,r)?(this.loadedTexturesRetainCount.h[r]+=1,t=this.loadedTextures.h[r],V5a(t)):Object.prototype.hasOwnProperty.call(this.loadingTextureCallbacks.h,r)?this.loadingTextureCallbacks.h[r].push(function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(c.loadedTexturesRetainCount.h,r)?c.loadedTexturesRetainCount.h[r]:0,c.loadedTexturesRetainCount.h[r]=n+1),V5a(e)}):(t=r,o||-1!=(i=t.indexOf("?"))&&(t=h.substr(t,0,i)),this.loadingTextureCallbacks.h[r]=[function(e){var n;null!=e&&(n=Object.prototype.hasOwnProperty.call(c.loadedTexturesRetainCount.h,r)?c.loadedTexturesRetainCount.h[r]:0,c.loadedTexturesRetainCount.h[r]=n+1),V5a(e)}],i=o?t:C.app.assets.fullPath(t),a=!0,null!=e&&null!=e.premultiplyAlpha&&(a=e.premultiplyAlpha),u=function(){for(var e=c.loadingTextureCallbacks.h[r],n=c.loadingTextureCallbacks,t=(Object.prototype.hasOwnProperty.call(n.h,r)&&delete n.h[r],0);t<e.length;){var i=e[t];++t;try{i(null)}catch(e){Al.lastError=e;i=[Q.caught(e).unwrap()];he.app._onceImmediate(function(e){return function(){throw Q.thrown(e[0])}}(i))}}},C.app.assets.loadImage(i,null,!l,function(e){if(null==e)u();else{var n=null;try{if(null==(n=Xi.fromImage(e,a)))return void u();n.id=r,n.init()}catch(l){Al.lastError=l;var t=Q.caught(l).unwrap();return he.app.logger.error("Failed to create texture: "+V.string(t),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:127,className:"backend.Textures",methodName:"load"}),void u()}c.loadedTextures.h[r]=n;for(var i=c.loadingTextureCallbacks.h[r],e=c.loadingTextureCallbacks,l=(Object.prototype.hasOwnProperty.call(e.h,r)&&delete e.h[r],0);l<i.length;){var s=i[l];++l;try{s(n)}catch(e){Al.lastError=e;t=[Q.caught(e).unwrap()];he.app._onceImmediate(function(e){return function(){throw Q.thrown(e[0])}}(t))}}}}),null!=s?s.push(Bi.flush):he.app._onceImmediate(Bi.flush))},loadFromBytes:function(e,n,t,i){function Fga(e){function Kga(){i(e),i=null}null!=r?r.push(Kga):he.app._onceImmediate(Kga)}var l=this,s="bytes:"+this.nextBytesIndex++,r=(null!=t&&t.loadMethod,null!=t?t.immediate:null),a=!0;null!=t&&null!=t.premultiplyAlpha&&(a=t.premultiplyAlpha);C.app.assets.imageFromBytes(new Uint8Array(e.b.bufferValue),n,null,null,function(n){if(null==n)Fga(null);else{var e=null;try{if(null==(e=Xi.fromImage(n,a)))return void Fga(null);e.id=s,e.init()}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();return he.app.logger.error("Failed to create texture: "+V.string(n),{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:205,className:"backend.Textures",methodName:"loadFromBytes"}),void Fga(null)}l.loadedTexturesRetainCount.h[s]=1,Fga(e)}}),null!=r?r.push(Bi.flush):he.app._onceImmediate(Bi.flush)},supportsHotReloadPath:function(){return!0},nextRenderIndex:null,nextPixelsIndex:null,nextBytesIndex:null,createTexture:function(e,n,t){var i="pixels:"+this.nextPixelsIndex++,l=new Xi;return l.id=i,l.width=e,l.height=n,l.pixels=t,l.init(),this.loadedTexturesRetainCount.h[i]=1,l},createRenderTarget:function(e,n,t,i,l){var s="render:"+this.nextRenderIndex++,r=C.app.runtime.webglVersion,a=new Yi;return a.id=s,a.width=e,a.height=n,a.depth=t,a.stencil=i,a.antialiasing=2<=r?l:0,a.init(),this.loadedTexturesRetainCount.h[s]=1,a},fetchTexturePixels:function(e,n){var t=e.width,i=e.height;return null==n&&(n=new Uint8Array(t*i*4)),e.fetch(n),n},submitTexturePixels:function(e,n){e.submit(n)},destroyTexture:function(e){var n,t=e.id;1<this.loadedTexturesRetainCount.h[t]?--this.loadedTexturesRetainCount.h[t]:(n=this.loadedTextures,Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t],n=this.loadedTexturesRetainCount,Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t],e.destroy())},getTextureId:function(e){return e.textureId},getTextureWidth:function(e){return e.width},getTextureHeight:function(e){return e.height},getTextureWidthActual:function(e){return e.widthActual},getTextureHeightActual:function(e){return e.heightActual},getTextureIndex:function(e){return e.index},setTextureFilter:function(e,n){switch(n._hx_index){case 0:e.set_filterMin(9729),e.set_filterMag(9729);break;case 1:e.set_filterMin(9728),e.set_filterMag(9728)}},setTextureWrapS:function(e,n){switch(n){case 0:e.set_wrapS(33071);break;case 1:e.set_wrapS(10497);break;case 2:e.set_wrapS(33648)}},setTextureWrapT:function(e,n){switch(n){case 0:e.set_wrapT(33071);break;case 1:e.set_wrapT(10497);break;case 2:e.set_wrapT(33648)}},maxTextureWidth:function(){return 2048},maxTextureHeight:function(){return 2048},maxTexturesByBatch:function(){return-1==Ye._maxTexturesByBatch&&(Ye._maxTexturesByBatch=0|Math.min(32,Y.gl.getParameter(34930))),Ye._maxTexturesByBatch},textureToPng:function(e,n,t,i){null==n&&(n=!0);var l=this.fetchTexturePixels(e);e.id;n&&It.reversePremultiplyAlpha(l),C.app.assets.pixelsToPngData(e.width,e.height,l,function(e){null!=e?null!=t?(Cn.saveBytes(t,new kl(new Uint8Array(e.buffer))),i()):i(new kl(new Uint8Array(e.buffer))):(he.app.logger.warning("Failed to get PNG data from texture",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:540,className:"backend.Textures",methodName:"textureToPng"}),i(null))})},pixelsToPng:function(e,n,t,i,l){C.app.assets.pixelsToPngData(e,n,t,function(e){null!=e?null!=i?(Cn.saveBytes(i,new kl(new Uint8Array(e.buffer))),l()):l(new kl(new Uint8Array(e.buffer))):(he.app.logger.warning("Failed to get PNG data from pixels",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:560,className:"backend.Textures",methodName:"pixelsToPng"}),l(null))})},loadingTextureCallbacks:null,loadedTextures:null,loadedTexturesRetainCount:null,__class__:Ye},I["backend.VisualItem"]={__ename__:"backend.VisualItem",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"backend.VisualItem",toString:d},QUAD:{_hx_name:"QUAD",_hx_index:1,__enum__:"backend.VisualItem",toString:d},MESH:{_hx_name:"MESH",_hx_index:2,__enum__:"backend.VisualItem",toString:d}}),Ve=(e.__constructs__=[e.NONE,e.QUAD,e.MESH],(L["binpacking.IOccupancy"]=Ra).__name__="binpacking.IOccupancy",Ra.__isInterface__=!0,Ra.prototype={occupancy:null,__class__:Ra},(L["binpacking.MaxRectsPackerBestFitPosition"]=Sa).__name__="binpacking.MaxRectsPackerBestFitPosition",Sa.prototype={bestNode:null,bestAreaFit:null,bestShortSideFit:null,bestLongSideFit:null,bestContactScore:null,bestX:null,bestY:null,__class__:Sa},(L["binpacking.MaxRectsPackerRectScore"]=Ta).__name__="binpacking.MaxRectsPackerRectScore",Ta.prototype={rect:null,primaryScore:null,secondaryScore:null,__class__:Ta},(L["binpacking.MaxRectsPacker"]=Ua).__name__="binpacking.MaxRectsPacker",Ua.__interfaces__=[Ra],Ua.prototype={binWidth:null,binHeight:null,binAllowFlip:null,usedRectangles:null,freeRectangles:null,_bestFitPosition:null,insert:function(e,n,t){var i;switch(t){case 1:i=this.findPositionForNewNodeBestShortSideFit(e,n,this._bestFitPosition).bestNode;break;case 2:i=this.findPositionForNewNodeBestLongSideFit(e,n,this._bestFitPosition).bestNode;break;case 3:i=this.findPositionForNewNodeBestAreaFit(e,n,this._bestFitPosition).bestNode;break;case 4:i=this.findPositionForNewNodeBottomLeft(e,n,this._bestFitPosition).bestNode;break;case 5:i=this.findPositionForNewNodeContactPoint(e,n,this._bestFitPosition).bestNode}if(null==i||0==i.width||0==i.height)return null;for(var l=this.freeRectangles.length,s=0;s<l;)this.splitFreeNode(this.freeRectangles[s],i)&&(this.freeRectangles.splice(s,1),--s,--l),++s;return this.pruneFreeList(),this.usedRectangles.push(i),i},occupancy:function(){if(0==this.usedRectangles.length)return 0;for(var e=0,n=0,t=this.usedRectangles.length;n<t;){var i=n++;e+=this.usedRectangles[i].width*this.usedRectangles[i].height}return e/(this.binWidth*this.binHeight)},scoreRect:function(e,n,t){var i=new Ve,l=1073741823,s=1073741823;switch(t){case 1:var r,i=(r=this.findPositionForNewNodeBestShortSideFit(e,n,this._bestFitPosition)).bestNode,l=r.bestShortSideFit,s=r.bestLongSideFit;break;case 2:i=(r=this.findPositionForNewNodeBestLongSideFit(e,n,this._bestFitPosition)).bestNode,l=r.bestLongSideFit,s=r.bestLongSideFit;break;case 3:i=(r=this.findPositionForNewNodeBestAreaFit(e,n,this._bestFitPosition)).bestNode,l=r.bestAreaFit,s=r.bestShortSideFit;break;case 4:i=(r=this.findPositionForNewNodeBottomLeft(e,n,this._bestFitPosition)).bestNode,l=r.bestY,s=r.bestX;break;case 5:i=(r=this.findPositionForNewNodeContactPoint(e,n,this._bestFitPosition)).bestNode,l=-r.bestContactScore}return 0==i.height&&(s=l=1073741823),new Ta(i,l,s)},contactPointScoreNode:function(e,n,t,i){for(var l=0,s=(0!=e&&e+t!=this.binWidth||(l+=i),0!=n&&n+i!=this.binHeight||(l+=t),0),r=this.usedRectangles.length;s<r;){var a=s++;this.usedRectangles[a].x!=e+t&&this.usedRectangles[a].x+this.usedRectangles[a].width!=e||(l+=0|this.commonIntervalLength(this.usedRectangles[a].y,this.usedRectangles[a].height,n,n+i)),this.usedRectangles[a].y!=n+i&&this.usedRectangles[a].y+this.usedRectangles[a].height!=n||(l+=0|this.commonIntervalLength(this.usedRectangles[a].x,this.usedRectangles[a].x+this.usedRectangles[a].width,e,e+t))}return l},findPositionForNewNodeBottomLeft:function(e,n,t){for(var i=new Ve,l=1073741823,s=1073741823,r=0,a=this.freeRectangles.length;r<a;){var h,u=r++;this.freeRectangles[u].width>=e&&this.freeRectangles[u].height<s&&(h=this.freeRectangles[u].y+n|0,i.x=this.freeRectangles[u].x,i.y=this.freeRectangles[u].y,i.width=e,i.height=n,l=h,s=0|this.freeRectangles[u].x),this.binAllowFlip&&this.freeRectangles[u].width>=n&&this.freeRectangles[u].height>=e&&(h=this.freeRectangles[u].y+n|0,i.x=this.freeRectangles[u].x,i.y=this.freeRectangles[u].y,i.width=e,i.height=n,l=h,s=0|this.freeRectangles[u].x)}return t.bestNode=i,t.bestY=l,t.bestX=s,t},findPositionForNewNodeBestShortSideFit:function(e,n,t){for(var i=new Ve,l=1073741823,s=1073741823,r=0,a=this.freeRectangles.length;r<a;){var h,u,c,o,_=r++;this.freeRectangles[_].width>=e&&this.freeRectangles[_].height>=n&&(c=Math.abs(this.freeRectangles[_].width-e),h=Math.abs(this.freeRectangles[_].height-n),u=Math.min(c,h),c=Math.max(c,h),u<l||u==l&&c<s)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=e,i.height=n,l=0|u,s=0|c),this.binAllowFlip&&this.freeRectangles[_].width>=n&&this.freeRectangles[_].height>=e&&(h=Math.abs(this.freeRectangles[_].width-n),u=Math.abs(this.freeRectangles[_].height-e),c=Math.min(h,u),o=Math.max(h,u),c<l||c==l&&o<s)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=n,i.height=e,i.flipped=!i.flipped,l=0|c,s=0|o)}return t.bestNode=i,t.bestShortSideFit=l,t.bestLongSideFit=s,t},findPositionForNewNodeBestLongSideFit:function(e,n,t){for(var i=new Ve,l=1073741823,s=1073741823,r=0,a=this.freeRectangles.length;r<a;){var h,u,c,o,_=r++;this.freeRectangles[_].width>=e&&this.freeRectangles[_].height>=n&&(c=Math.abs(this.freeRectangles[_].width-e),h=Math.abs(this.freeRectangles[_].height-n),u=Math.min(c,h),(c=Math.max(c,h))<s||c==s&&u<l)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=e,i.height=n,l=0|u,s=0|c),this.binAllowFlip&&this.freeRectangles[_].width>=n&&this.freeRectangles[_].height>=e&&(h=Math.abs(this.freeRectangles[_].width-e),u=Math.abs(this.freeRectangles[_].height-n),c=Math.min(h,u),(o=Math.max(h,u))<s||o==s&&c<l)&&(i.x=this.freeRectangles[_].x,i.y=this.freeRectangles[_].y,i.width=n,i.height=e,i.flipped=!i.flipped,l=0|c,s=0|o)}return t.bestNode=i,t.bestShortSideFit=l,t.bestLongSideFit=s,t},findPositionForNewNodeBestAreaFit:function(e,n,t){for(var i=new Ve,l=1073741823,s=1073741823,r=0,a=this.freeRectangles.length;r<a;){var h,u,c,o=r++,_=this.freeRectangles[o].width*this.freeRectangles[o].height-e*n;this.freeRectangles[o].width>=e&&this.freeRectangles[o].height>=n&&(u=Math.abs(this.freeRectangles[o].width-e),h=Math.abs(this.freeRectangles[o].height-n),u=Math.min(u,h),_<l||_==l&&u<s)&&(i.x=this.freeRectangles[o].x,i.y=this.freeRectangles[o].y,i.width=e,i.height=n,s=0|u,l=0|_),this.binAllowFlip&&this.freeRectangles[o].width>=n&&this.freeRectangles[o].height>=e&&(h=Math.abs(this.freeRectangles[o].width-n),u=Math.abs(this.freeRectangles[o].height-e),c=Math.min(h,u),_<l||_==l&&c<s)&&(i.x=this.freeRectangles[o].x,i.y=this.freeRectangles[o].y,i.width=n,i.height=e,i.flipped=!i.flipped,s=0|c,l=0|_)}return t.bestNode=i,t.bestAreaFit=l,t.bestShortSideFit=s,t},findPositionForNewNodeContactPoint:function(e,n,t){for(var i=new Ve,l=-1,s=0,r=this.freeRectangles.length;s<r;){var a,h=s++;this.freeRectangles[h].width>=e&&this.freeRectangles[h].height>=n&&l<(a=this.contactPointScoreNode(0|this.freeRectangles[h].x,0|this.freeRectangles[h].y,e,n))&&(i.x=this.freeRectangles[h].x,i.y=this.freeRectangles[h].y,i.width=e,i.height=n,l=a),this.freeRectangles[h].width>=n&&this.freeRectangles[h].height>=e&&l<(a=this.contactPointScoreNode(0|this.freeRectangles[h].x,0|this.freeRectangles[h].y,n,e))&&(i.x=this.freeRectangles[h].x,i.y=this.freeRectangles[h].y,i.width=n,i.height=e,i.flipped=!i.flipped,l=a)}return t.bestNode=i,t.bestContactScore=l,t},splitFreeNode:function(e,n){var t;return!(n.x>=e.x+e.width||n.x+n.width<=e.x||n.y>=e.y+e.height||n.y+n.height<=e.y||(n.x<e.x+e.width&&n.x+n.width>e.x&&(n.y>e.y&&n.y<e.y+e.height&&((t=new Ve(e.x,e.y,e.width,e.height)).height=n.y-t.y,this.freeRectangles.push(t)),n.y+n.height<e.y+e.height)&&((t=new Ve(e.x,e.y,e.width,e.height)).y=n.y+n.height,t.height=e.y+e.height-(n.y+n.height),this.freeRectangles.push(t)),n.y<e.y+e.height&&n.y+n.height>e.y&&(n.x>e.x&&n.x<e.x+e.width&&((t=new Ve(e.x,e.y,e.width,e.height)).width=n.x-t.x,this.freeRectangles.push(t)),n.x+n.width<e.x+e.width)&&((t=new Ve(e.x,e.y,e.width,e.height)).x=n.x+n.width,t.width=e.x+e.width-(n.x+n.width),this.freeRectangles.push(t)),0))},pruneFreeList:function(){for(var e=0;e<this.freeRectangles.length;){for(var n=e+1;n<this.freeRectangles.length;){var t=this.freeRectangles[e],i=this.freeRectangles[n];if(t.x>=i.x&&t.y>=i.y&&t.x+t.width<=i.x+i.width&&t.y+t.height<=i.y+i.height){this.freeRectangles.splice(e,1),--e;break}t=this.freeRectangles[n],i=this.freeRectangles[e];t.x>=i.x&&t.y>=i.y&&t.x+t.width<=i.x+i.width&&t.y+t.height<=i.y+i.height?this.freeRectangles.splice(n,1):++n}++e}},commonIntervalLength:function(e,n,t,i){return n<t||i<e?0:(n<i?n:i)-(t<e?e:t)},__class__:Ua},(L["binpacking.RectSize"]=Va).__name__="binpacking.RectSize",Va.prototype={width:null,height:null,__class__:Va},function(e,n,t,i,l){null==l&&(l=!1),null==i&&(i=0),null==t&&(t=0),null==n&&(n=0),this.x=e=null==e?0:e,this.y=n,this.width=t,this.height=i,this.flipped=l}),he=((L["binpacking.Rect"]=Ve).__name__="binpacking.Rect",Ve.prototype={x:null,y:null,width:null,height:null,flipped:null,clone:function(){return new Ve(this.x,this.y,this.width,this.height)},isContainedIn:function(e){return this.x>=e.x&&this.y>=e.y&&this.x+this.width<=e.x+e.width&&this.y+this.height<=e.y+e.height},__class__:Ve},(L["binpacking.DisjointRectCollection"]=Xa).__name__="binpacking.DisjointRectCollection",Xa.rectsDisjoint=function(e,n){return e.x+e.width<=n.x||n.x+n.width<=e.x||e.y+e.height<=n.y||n.y+n.height<=e.y},Xa.prototype={rects:null,add:function(e){if(0!=e.width&&0!=e.height){if(!this.disjoint(e))return!1;this.rects.push(e)}return!0},clear:function(){this.rects=[]},disjoint:function(e){if(0!=e.width&&0!=e.height)for(var n=0,t=this.rects.length;n<t;){var i=n++;if(!Xa.rectsDisjoint(this.rects[i],e))return!1}return!0},__class__:Xa},function(){this.info={name:"ldtk-level",collections:{},version:"1.0",package:null,author:"Jeremy Faivre",displayName:"LDtk Level"},this._computeRenderTexturesPriorityQueue=[],this.numBlockingDefaultScroll=0,this.disposedEntities=[],this.beginUpdateCallbacks=[],this.visualsContentDirty=!1,this.hierarchyDirty=!1,this.lazyScenes=!0,this.timelines=new Ui,this.converters=new z,this.textInput=null,this.persistent=null,this.projectDir=null,this.defaultFont=null,this.defaultWhiteTexture=null,this.defaultTexturedShader=null,this.renderTextures=[],this.groups=[],this.destroyedVisuals=[],this.pendingVisuals=[],this.visuals=[],this.logger=new Tt,this.frame=0,this._computeFps=new an,this.inUpdate=!1,this._xUpdatesToCallNow=[],this._xUpdatesHandlers=[],this._xUpdatesHandlersPool=new o,this.loaders=[],this.postFlushImmediateCallbacksLen=0,this.postFlushImmediateCallbacksCapacity=0,this.postFlushImmediateCallbacks=[],this.immediateCallbacksLen=0,this.immediateCallbacksCapacity=0,this.immediateCallbacks=[],l.call(this),he.app=this,bi.pluginInit(),Nt.init(),Us.backend=new Si,this.settings=new Xt,this.screen=new zt,this.audio=new nn,this.input=new kn,this.systems=new $t,this.assets=new Re,this.backend=new la,this.backend.onceReady(this,$bind(this,this.backendReady)),this.backend.init(this)}),Qe=((L["ceramic.App"]=he).__name__="ceramic.App",he.__properties__={get_app:"get_app"},he.get_app=function(){return he.app},he.oncePreInit=function(e){null==he.preInitCallbacks&&(he.preInitCallbacks=[]),he.preInitCallbacks.push(e)},he.init=function(){return da.bind(),new he,new Mn(he.app.settings)},he.__super__=l,he.prototype=$extend(l.prototype,{__cbOnReady:null,__cbOnceReady:null,__cbOnOwnerUnbindReady:null,__cbOnceOwnerUnbindReady:null,emitReady:function(){var e=0;if(null!=this.__cbOnReady&&(e+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(e+=this.__cbOnceReady.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReady)for(var l=0,s=this.__cbOnReady.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnReady[r],++i):--e}if(null!=this.__cbOnceReady){for(var a=null,h=null,l=0,s=this.__cbOnceReady.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceReady[r],this.__cbOnceReady[r]=null,u=this.__cbOnceOwnerUnbindReady[r],(this.__cbOnceOwnerUnbindReady[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReady[r]),h.push(this.__cbOnceReady[r]))}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReady[n])&&s(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReady[n])&&s(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReady[l])&&s()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReady[l])&&s()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},__cbOnUpdate:null,__cbOnceUpdate:null,__cbOnOwnerUnbindUpdate:null,__cbOnceOwnerUnbindUpdate:null,emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnUpdate)for(var s=0,r=this.__cbOnUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnUpdate[a],++l):--n}if(null!=this.__cbOnceUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,c=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),u.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindUpdate[n])&&s(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindUpdate[n])&&s(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindUpdate[l])&&s()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindUpdate[l])&&s()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},__cbOnPreUpdate:null,__cbOncePreUpdate:null,__cbOnOwnerUnbindPreUpdate:null,__cbOnceOwnerUnbindPreUpdate:null,emitPreUpdate:function(e){var n=0;if(null!=this.__cbOnPreUpdate&&(n+=this.__cbOnPreUpdate.length),null!=this.__cbOncePreUpdate&&(n+=this.__cbOncePreUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPreUpdate)for(var s=0,r=this.__cbOnPreUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPreUpdate[a],++l):--n}if(null!=this.__cbOncePreUpdate){for(var h=null,u=null,s=0,r=this.__cbOncePreUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePreUpdate[a],this.__cbOncePreUpdate[a]=null,c=this.__cbOnceOwnerUnbindPreUpdate[a],(this.__cbOnceOwnerUnbindPreUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPreUpdate[a]),u.push(this.__cbOncePreUpdate[a]))}this.__cbOnceOwnerUnbindPreUpdate=h,this.__cbOncePreUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPreUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event preUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offPreUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPreUpdate&&(this.__cbOnOwnerUnbindPreUpdate=[]),this.__cbOnOwnerUnbindPreUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPreUpdate&&(this.__cbOnOwnerUnbindPreUpdate=[]),this.__cbOnOwnerUnbindPreUpdate.push(null);null==this.__cbOnPreUpdate&&(this.__cbOnPreUpdate=[]),this.__cbOnPreUpdate.push(t)},oncePreUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event preUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offPreUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPreUpdate&&(this.__cbOnceOwnerUnbindPreUpdate=[]),this.__cbOnceOwnerUnbindPreUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPreUpdate&&(this.__cbOnceOwnerUnbindPreUpdate=[]),this.__cbOnceOwnerUnbindPreUpdate.push(null);null==this.__cbOncePreUpdate&&(this.__cbOncePreUpdate=[]),this.__cbOncePreUpdate.push(t)},offPreUpdate:function(e){if(null!=e){var n;null!=this.__cbOnPreUpdate&&-1!=(n=this.__cbOnPreUpdate.indexOf(e))&&(this.__cbOnPreUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPreUpdate[n])&&s(),this.__cbOnOwnerUnbindPreUpdate.splice(n,1)),null!=this.__cbOncePreUpdate&&-1!=(n=this.__cbOncePreUpdate.indexOf(e))&&(this.__cbOncePreUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPreUpdate[n])&&s(),this.__cbOnceOwnerUnbindPreUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPreUpdate){for(var t=0,i=this.__cbOnOwnerUnbindPreUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPreUpdate[l])&&s()}this.__cbOnOwnerUnbindPreUpdate=null}if(null!=this.__cbOnceOwnerUnbindPreUpdate){for(t=0,i=this.__cbOnceOwnerUnbindPreUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPreUpdate[l])&&s()}this.__cbOnceOwnerUnbindPreUpdate=null}this.__cbOnPreUpdate=null,this.__cbOncePreUpdate=null}},listensPreUpdate:function(){return null!=this.__cbOnPreUpdate&&0<this.__cbOnPreUpdate.length||null!=this.__cbOncePreUpdate&&0<this.__cbOncePreUpdate.length},__cbOnPostUpdate:null,__cbOncePostUpdate:null,__cbOnOwnerUnbindPostUpdate:null,__cbOnceOwnerUnbindPostUpdate:null,emitPostUpdate:function(e){var n=0;if(null!=this.__cbOnPostUpdate&&(n+=this.__cbOnPostUpdate.length),null!=this.__cbOncePostUpdate&&(n+=this.__cbOncePostUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPostUpdate)for(var s=0,r=this.__cbOnPostUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPostUpdate[a],++l):--n}if(null!=this.__cbOncePostUpdate){for(var h=null,u=null,s=0,r=this.__cbOncePostUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePostUpdate[a],this.__cbOncePostUpdate[a]=null,c=this.__cbOnceOwnerUnbindPostUpdate[a],(this.__cbOnceOwnerUnbindPostUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPostUpdate[a]),u.push(this.__cbOncePostUpdate[a]))}this.__cbOnceOwnerUnbindPostUpdate=h,this.__cbOncePostUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPostUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event postUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offPostUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPostUpdate&&(this.__cbOnOwnerUnbindPostUpdate=[]),this.__cbOnOwnerUnbindPostUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPostUpdate&&(this.__cbOnOwnerUnbindPostUpdate=[]),this.__cbOnOwnerUnbindPostUpdate.push(null);null==this.__cbOnPostUpdate&&(this.__cbOnPostUpdate=[]),this.__cbOnPostUpdate.push(t)},oncePostUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event postUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offPostUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPostUpdate&&(this.__cbOnceOwnerUnbindPostUpdate=[]),this.__cbOnceOwnerUnbindPostUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPostUpdate&&(this.__cbOnceOwnerUnbindPostUpdate=[]),this.__cbOnceOwnerUnbindPostUpdate.push(null);null==this.__cbOncePostUpdate&&(this.__cbOncePostUpdate=[]),this.__cbOncePostUpdate.push(t)},offPostUpdate:function(e){if(null!=e){var n;null!=this.__cbOnPostUpdate&&-1!=(n=this.__cbOnPostUpdate.indexOf(e))&&(this.__cbOnPostUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPostUpdate[n])&&s(),this.__cbOnOwnerUnbindPostUpdate.splice(n,1)),null!=this.__cbOncePostUpdate&&-1!=(n=this.__cbOncePostUpdate.indexOf(e))&&(this.__cbOncePostUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPostUpdate[n])&&s(),this.__cbOnceOwnerUnbindPostUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPostUpdate){for(var t=0,i=this.__cbOnOwnerUnbindPostUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPostUpdate[l])&&s()}this.__cbOnOwnerUnbindPostUpdate=null}if(null!=this.__cbOnceOwnerUnbindPostUpdate){for(t=0,i=this.__cbOnceOwnerUnbindPostUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPostUpdate[l])&&s()}this.__cbOnceOwnerUnbindPostUpdate=null}this.__cbOnPostUpdate=null,this.__cbOncePostUpdate=null}},listensPostUpdate:function(){return null!=this.__cbOnPostUpdate&&0<this.__cbOnPostUpdate.length||null!=this.__cbOncePostUpdate&&0<this.__cbOncePostUpdate.length},__cbOnDefaultAssetsLoad:null,__cbOnceDefaultAssetsLoad:null,__cbOnOwnerUnbindDefaultAssetsLoad:null,__cbOnceOwnerUnbindDefaultAssetsLoad:null,emitDefaultAssetsLoad:function(e){var n=0;if(null!=this.__cbOnDefaultAssetsLoad&&(n+=this.__cbOnDefaultAssetsLoad.length),null!=this.__cbOnceDefaultAssetsLoad&&(n+=this.__cbOnceDefaultAssetsLoad.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnDefaultAssetsLoad)for(var s=0,r=this.__cbOnDefaultAssetsLoad.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnDefaultAssetsLoad[a],++l):--n}if(null!=this.__cbOnceDefaultAssetsLoad){for(var h=null,u=null,s=0,r=this.__cbOnceDefaultAssetsLoad.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceDefaultAssetsLoad[a],this.__cbOnceDefaultAssetsLoad[a]=null,c=this.__cbOnceOwnerUnbindDefaultAssetsLoad[a],(this.__cbOnceOwnerUnbindDefaultAssetsLoad[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindDefaultAssetsLoad[a]),u.push(this.__cbOnceDefaultAssetsLoad[a]))}this.__cbOnceOwnerUnbindDefaultAssetsLoad=h,this.__cbOnceDefaultAssetsLoad=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onDefaultAssetsLoad:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event defaultAssetsLoad because owner is destroyed!");var l=function(e){null!=t&&(i.offDefaultAssetsLoad(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindDefaultAssetsLoad&&(this.__cbOnOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnOwnerUnbindDefaultAssetsLoad.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindDefaultAssetsLoad&&(this.__cbOnOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnOwnerUnbindDefaultAssetsLoad.push(null);null==this.__cbOnDefaultAssetsLoad&&(this.__cbOnDefaultAssetsLoad=[]),this.__cbOnDefaultAssetsLoad.push(t)},onceDefaultAssetsLoad:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event defaultAssetsLoad because owner is destroyed!");var l=function(e){null!=t&&(i.offDefaultAssetsLoad(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindDefaultAssetsLoad&&(this.__cbOnceOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnceOwnerUnbindDefaultAssetsLoad.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindDefaultAssetsLoad&&(this.__cbOnceOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnceOwnerUnbindDefaultAssetsLoad.push(null);null==this.__cbOnceDefaultAssetsLoad&&(this.__cbOnceDefaultAssetsLoad=[]),this.__cbOnceDefaultAssetsLoad.push(t)},offDefaultAssetsLoad:function(e){if(null!=e){var n;null!=this.__cbOnDefaultAssetsLoad&&-1!=(n=this.__cbOnDefaultAssetsLoad.indexOf(e))&&(this.__cbOnDefaultAssetsLoad.splice(n,1),null!=(s=this.__cbOnOwnerUnbindDefaultAssetsLoad[n])&&s(),this.__cbOnOwnerUnbindDefaultAssetsLoad.splice(n,1)),null!=this.__cbOnceDefaultAssetsLoad&&-1!=(n=this.__cbOnceDefaultAssetsLoad.indexOf(e))&&(this.__cbOnceDefaultAssetsLoad.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindDefaultAssetsLoad[n])&&s(),this.__cbOnceOwnerUnbindDefaultAssetsLoad.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDefaultAssetsLoad){for(var t=0,i=this.__cbOnOwnerUnbindDefaultAssetsLoad.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindDefaultAssetsLoad[l])&&s()}this.__cbOnOwnerUnbindDefaultAssetsLoad=null}if(null!=this.__cbOnceOwnerUnbindDefaultAssetsLoad){for(t=0,i=this.__cbOnceOwnerUnbindDefaultAssetsLoad.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindDefaultAssetsLoad[l])&&s()}this.__cbOnceOwnerUnbindDefaultAssetsLoad=null}this.__cbOnDefaultAssetsLoad=null,this.__cbOnceDefaultAssetsLoad=null}},listensDefaultAssetsLoad:function(){return null!=this.__cbOnDefaultAssetsLoad&&0<this.__cbOnDefaultAssetsLoad.length||null!=this.__cbOnceDefaultAssetsLoad&&0<this.__cbOnceDefaultAssetsLoad.length},__cbOnCriticalError:null,__cbOnceCriticalError:null,__cbOnOwnerUnbindCriticalError:null,__cbOnceOwnerUnbindCriticalError:null,emitCriticalError:function(e,n){var t=0;if(null!=this.__cbOnCriticalError&&(t+=this.__cbOnCriticalError.length),null!=this.__cbOnceCriticalError&&(t+=this.__cbOnceCriticalError.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnCriticalError)for(var r=0,a=this.__cbOnCriticalError.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnCriticalError[h],++s):--t}if(null!=this.__cbOnceCriticalError){for(var u=null,c=null,r=0,a=this.__cbOnceCriticalError.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceCriticalError[h],this.__cbOnceCriticalError[h]=null,o=this.__cbOnceOwnerUnbindCriticalError[h],(this.__cbOnceOwnerUnbindCriticalError[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindCriticalError[h]),c.push(this.__cbOnceCriticalError[h]))}this.__cbOnceOwnerUnbindCriticalError=u,this.__cbOnceCriticalError=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onCriticalError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event criticalError because owner is destroyed!");var l=function(e){null!=t&&(i.offCriticalError(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindCriticalError&&(this.__cbOnOwnerUnbindCriticalError=[]),this.__cbOnOwnerUnbindCriticalError.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindCriticalError&&(this.__cbOnOwnerUnbindCriticalError=[]),this.__cbOnOwnerUnbindCriticalError.push(null);null==this.__cbOnCriticalError&&(this.__cbOnCriticalError=[]),this.__cbOnCriticalError.push(t)},onceCriticalError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event criticalError because owner is destroyed!");var l=function(e){null!=t&&(i.offCriticalError(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindCriticalError&&(this.__cbOnceOwnerUnbindCriticalError=[]),this.__cbOnceOwnerUnbindCriticalError.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindCriticalError&&(this.__cbOnceOwnerUnbindCriticalError=[]),this.__cbOnceOwnerUnbindCriticalError.push(null);null==this.__cbOnceCriticalError&&(this.__cbOnceCriticalError=[]),this.__cbOnceCriticalError.push(t)},offCriticalError:function(e){if(null!=e){var n;null!=this.__cbOnCriticalError&&-1!=(n=this.__cbOnCriticalError.indexOf(e))&&(this.__cbOnCriticalError.splice(n,1),null!=(s=this.__cbOnOwnerUnbindCriticalError[n])&&s(),this.__cbOnOwnerUnbindCriticalError.splice(n,1)),null!=this.__cbOnceCriticalError&&-1!=(n=this.__cbOnceCriticalError.indexOf(e))&&(this.__cbOnceCriticalError.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindCriticalError[n])&&s(),this.__cbOnceOwnerUnbindCriticalError.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindCriticalError){for(var t=0,i=this.__cbOnOwnerUnbindCriticalError.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindCriticalError[l])&&s()}this.__cbOnOwnerUnbindCriticalError=null}if(null!=this.__cbOnceOwnerUnbindCriticalError){for(t=0,i=this.__cbOnceOwnerUnbindCriticalError.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindCriticalError[l])&&s()}this.__cbOnceOwnerUnbindCriticalError=null}this.__cbOnCriticalError=null,this.__cbOnceCriticalError=null}},listensCriticalError:function(){return null!=this.__cbOnCriticalError&&0<this.__cbOnCriticalError.length||null!=this.__cbOnceCriticalError&&0<this.__cbOnceCriticalError.length},__cbOnBeginEnterBackground:null,__cbOnceBeginEnterBackground:null,__cbOnOwnerUnbindBeginEnterBackground:null,__cbOnceOwnerUnbindBeginEnterBackground:null,emitBeginEnterBackground:function(){var e=0;if(null!=this.__cbOnBeginEnterBackground&&(e+=this.__cbOnBeginEnterBackground.length),null!=this.__cbOnceBeginEnterBackground&&(e+=this.__cbOnceBeginEnterBackground.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginEnterBackground)for(var l=0,s=this.__cbOnBeginEnterBackground.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnBeginEnterBackground[r],++i):--e}if(null!=this.__cbOnceBeginEnterBackground){for(var a=null,h=null,l=0,s=this.__cbOnceBeginEnterBackground.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceBeginEnterBackground[r],this.__cbOnceBeginEnterBackground[r]=null,u=this.__cbOnceOwnerUnbindBeginEnterBackground[r],(this.__cbOnceOwnerUnbindBeginEnterBackground[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginEnterBackground[r]),h.push(this.__cbOnceBeginEnterBackground[r]))}this.__cbOnceOwnerUnbindBeginEnterBackground=a,this.__cbOnceBeginEnterBackground=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onBeginEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginEnterBackground because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginEnterBackground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBeginEnterBackground&&(this.__cbOnOwnerUnbindBeginEnterBackground=[]),this.__cbOnOwnerUnbindBeginEnterBackground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBeginEnterBackground&&(this.__cbOnOwnerUnbindBeginEnterBackground=[]),this.__cbOnOwnerUnbindBeginEnterBackground.push(null);null==this.__cbOnBeginEnterBackground&&(this.__cbOnBeginEnterBackground=[]),this.__cbOnBeginEnterBackground.push(t)},onceBeginEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginEnterBackground because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginEnterBackground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBeginEnterBackground&&(this.__cbOnceOwnerUnbindBeginEnterBackground=[]),this.__cbOnceOwnerUnbindBeginEnterBackground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBeginEnterBackground&&(this.__cbOnceOwnerUnbindBeginEnterBackground=[]),this.__cbOnceOwnerUnbindBeginEnterBackground.push(null);null==this.__cbOnceBeginEnterBackground&&(this.__cbOnceBeginEnterBackground=[]),this.__cbOnceBeginEnterBackground.push(t)},offBeginEnterBackground:function(e){if(null!=e){var n;null!=this.__cbOnBeginEnterBackground&&-1!=(n=this.__cbOnBeginEnterBackground.indexOf(e))&&(this.__cbOnBeginEnterBackground.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBeginEnterBackground[n])&&s(),this.__cbOnOwnerUnbindBeginEnterBackground.splice(n,1)),null!=this.__cbOnceBeginEnterBackground&&-1!=(n=this.__cbOnceBeginEnterBackground.indexOf(e))&&(this.__cbOnceBeginEnterBackground.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBeginEnterBackground[n])&&s(),this.__cbOnceOwnerUnbindBeginEnterBackground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEnterBackground){for(var t=0,i=this.__cbOnOwnerUnbindBeginEnterBackground.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBeginEnterBackground[l])&&s()}this.__cbOnOwnerUnbindBeginEnterBackground=null}if(null!=this.__cbOnceOwnerUnbindBeginEnterBackground){for(t=0,i=this.__cbOnceOwnerUnbindBeginEnterBackground.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBeginEnterBackground[l])&&s()}this.__cbOnceOwnerUnbindBeginEnterBackground=null}this.__cbOnBeginEnterBackground=null,this.__cbOnceBeginEnterBackground=null}},listensBeginEnterBackground:function(){return null!=this.__cbOnBeginEnterBackground&&0<this.__cbOnBeginEnterBackground.length||null!=this.__cbOnceBeginEnterBackground&&0<this.__cbOnceBeginEnterBackground.length},__cbOnFinishEnterBackground:null,__cbOnceFinishEnterBackground:null,__cbOnOwnerUnbindFinishEnterBackground:null,__cbOnceOwnerUnbindFinishEnterBackground:null,emitFinishEnterBackground:function(){var e=0;if(null!=this.__cbOnFinishEnterBackground&&(e+=this.__cbOnFinishEnterBackground.length),null!=this.__cbOnceFinishEnterBackground&&(e+=this.__cbOnceFinishEnterBackground.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishEnterBackground)for(var l=0,s=this.__cbOnFinishEnterBackground.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnFinishEnterBackground[r],++i):--e}if(null!=this.__cbOnceFinishEnterBackground){for(var a=null,h=null,l=0,s=this.__cbOnceFinishEnterBackground.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceFinishEnterBackground[r],this.__cbOnceFinishEnterBackground[r]=null,u=this.__cbOnceOwnerUnbindFinishEnterBackground[r],(this.__cbOnceOwnerUnbindFinishEnterBackground[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishEnterBackground[r]),h.push(this.__cbOnceFinishEnterBackground[r]))}this.__cbOnceOwnerUnbindFinishEnterBackground=a,this.__cbOnceFinishEnterBackground=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onFinishEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishEnterBackground because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishEnterBackground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFinishEnterBackground&&(this.__cbOnOwnerUnbindFinishEnterBackground=[]),this.__cbOnOwnerUnbindFinishEnterBackground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFinishEnterBackground&&(this.__cbOnOwnerUnbindFinishEnterBackground=[]),this.__cbOnOwnerUnbindFinishEnterBackground.push(null);null==this.__cbOnFinishEnterBackground&&(this.__cbOnFinishEnterBackground=[]),this.__cbOnFinishEnterBackground.push(t)},onceFinishEnterBackground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishEnterBackground because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishEnterBackground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFinishEnterBackground&&(this.__cbOnceOwnerUnbindFinishEnterBackground=[]),this.__cbOnceOwnerUnbindFinishEnterBackground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFinishEnterBackground&&(this.__cbOnceOwnerUnbindFinishEnterBackground=[]),this.__cbOnceOwnerUnbindFinishEnterBackground.push(null);null==this.__cbOnceFinishEnterBackground&&(this.__cbOnceFinishEnterBackground=[]),this.__cbOnceFinishEnterBackground.push(t)},offFinishEnterBackground:function(e){if(null!=e){var n;null!=this.__cbOnFinishEnterBackground&&-1!=(n=this.__cbOnFinishEnterBackground.indexOf(e))&&(this.__cbOnFinishEnterBackground.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFinishEnterBackground[n])&&s(),this.__cbOnOwnerUnbindFinishEnterBackground.splice(n,1)),null!=this.__cbOnceFinishEnterBackground&&-1!=(n=this.__cbOnceFinishEnterBackground.indexOf(e))&&(this.__cbOnceFinishEnterBackground.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFinishEnterBackground[n])&&s(),this.__cbOnceOwnerUnbindFinishEnterBackground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishEnterBackground){for(var t=0,i=this.__cbOnOwnerUnbindFinishEnterBackground.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFinishEnterBackground[l])&&s()}this.__cbOnOwnerUnbindFinishEnterBackground=null}if(null!=this.__cbOnceOwnerUnbindFinishEnterBackground){for(t=0,i=this.__cbOnceOwnerUnbindFinishEnterBackground.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFinishEnterBackground[l])&&s()}this.__cbOnceOwnerUnbindFinishEnterBackground=null}this.__cbOnFinishEnterBackground=null,this.__cbOnceFinishEnterBackground=null}},listensFinishEnterBackground:function(){return null!=this.__cbOnFinishEnterBackground&&0<this.__cbOnFinishEnterBackground.length||null!=this.__cbOnceFinishEnterBackground&&0<this.__cbOnceFinishEnterBackground.length},__cbOnBeginEnterForeground:null,__cbOnceBeginEnterForeground:null,__cbOnOwnerUnbindBeginEnterForeground:null,__cbOnceOwnerUnbindBeginEnterForeground:null,emitBeginEnterForeground:function(){var e=0;if(null!=this.__cbOnBeginEnterForeground&&(e+=this.__cbOnBeginEnterForeground.length),null!=this.__cbOnceBeginEnterForeground&&(e+=this.__cbOnceBeginEnterForeground.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginEnterForeground)for(var l=0,s=this.__cbOnBeginEnterForeground.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnBeginEnterForeground[r],++i):--e}if(null!=this.__cbOnceBeginEnterForeground){for(var a=null,h=null,l=0,s=this.__cbOnceBeginEnterForeground.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceBeginEnterForeground[r],this.__cbOnceBeginEnterForeground[r]=null,u=this.__cbOnceOwnerUnbindBeginEnterForeground[r],(this.__cbOnceOwnerUnbindBeginEnterForeground[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginEnterForeground[r]),h.push(this.__cbOnceBeginEnterForeground[r]))}this.__cbOnceOwnerUnbindBeginEnterForeground=a,this.__cbOnceBeginEnterForeground=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onBeginEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginEnterForeground because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginEnterForeground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBeginEnterForeground&&(this.__cbOnOwnerUnbindBeginEnterForeground=[]),this.__cbOnOwnerUnbindBeginEnterForeground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBeginEnterForeground&&(this.__cbOnOwnerUnbindBeginEnterForeground=[]),this.__cbOnOwnerUnbindBeginEnterForeground.push(null);null==this.__cbOnBeginEnterForeground&&(this.__cbOnBeginEnterForeground=[]),this.__cbOnBeginEnterForeground.push(t)},onceBeginEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginEnterForeground because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginEnterForeground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBeginEnterForeground&&(this.__cbOnceOwnerUnbindBeginEnterForeground=[]),this.__cbOnceOwnerUnbindBeginEnterForeground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBeginEnterForeground&&(this.__cbOnceOwnerUnbindBeginEnterForeground=[]),this.__cbOnceOwnerUnbindBeginEnterForeground.push(null);null==this.__cbOnceBeginEnterForeground&&(this.__cbOnceBeginEnterForeground=[]),this.__cbOnceBeginEnterForeground.push(t)},offBeginEnterForeground:function(e){if(null!=e){var n;null!=this.__cbOnBeginEnterForeground&&-1!=(n=this.__cbOnBeginEnterForeground.indexOf(e))&&(this.__cbOnBeginEnterForeground.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBeginEnterForeground[n])&&s(),this.__cbOnOwnerUnbindBeginEnterForeground.splice(n,1)),null!=this.__cbOnceBeginEnterForeground&&-1!=(n=this.__cbOnceBeginEnterForeground.indexOf(e))&&(this.__cbOnceBeginEnterForeground.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBeginEnterForeground[n])&&s(),this.__cbOnceOwnerUnbindBeginEnterForeground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEnterForeground){for(var t=0,i=this.__cbOnOwnerUnbindBeginEnterForeground.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBeginEnterForeground[l])&&s()}this.__cbOnOwnerUnbindBeginEnterForeground=null}if(null!=this.__cbOnceOwnerUnbindBeginEnterForeground){for(t=0,i=this.__cbOnceOwnerUnbindBeginEnterForeground.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBeginEnterForeground[l])&&s()}this.__cbOnceOwnerUnbindBeginEnterForeground=null}this.__cbOnBeginEnterForeground=null,this.__cbOnceBeginEnterForeground=null}},listensBeginEnterForeground:function(){return null!=this.__cbOnBeginEnterForeground&&0<this.__cbOnBeginEnterForeground.length||null!=this.__cbOnceBeginEnterForeground&&0<this.__cbOnceBeginEnterForeground.length},__cbOnFinishEnterForeground:null,__cbOnceFinishEnterForeground:null,__cbOnOwnerUnbindFinishEnterForeground:null,__cbOnceOwnerUnbindFinishEnterForeground:null,emitFinishEnterForeground:function(){var e=0;if(null!=this.__cbOnFinishEnterForeground&&(e+=this.__cbOnFinishEnterForeground.length),null!=this.__cbOnceFinishEnterForeground&&(e+=this.__cbOnceFinishEnterForeground.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishEnterForeground)for(var l=0,s=this.__cbOnFinishEnterForeground.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnFinishEnterForeground[r],++i):--e}if(null!=this.__cbOnceFinishEnterForeground){for(var a=null,h=null,l=0,s=this.__cbOnceFinishEnterForeground.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceFinishEnterForeground[r],this.__cbOnceFinishEnterForeground[r]=null,u=this.__cbOnceOwnerUnbindFinishEnterForeground[r],(this.__cbOnceOwnerUnbindFinishEnterForeground[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishEnterForeground[r]),h.push(this.__cbOnceFinishEnterForeground[r]))}this.__cbOnceOwnerUnbindFinishEnterForeground=a,this.__cbOnceFinishEnterForeground=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onFinishEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishEnterForeground because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishEnterForeground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFinishEnterForeground&&(this.__cbOnOwnerUnbindFinishEnterForeground=[]),this.__cbOnOwnerUnbindFinishEnterForeground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFinishEnterForeground&&(this.__cbOnOwnerUnbindFinishEnterForeground=[]),this.__cbOnOwnerUnbindFinishEnterForeground.push(null);null==this.__cbOnFinishEnterForeground&&(this.__cbOnFinishEnterForeground=[]),this.__cbOnFinishEnterForeground.push(t)},onceFinishEnterForeground:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishEnterForeground because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishEnterForeground(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFinishEnterForeground&&(this.__cbOnceOwnerUnbindFinishEnterForeground=[]),this.__cbOnceOwnerUnbindFinishEnterForeground.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFinishEnterForeground&&(this.__cbOnceOwnerUnbindFinishEnterForeground=[]),this.__cbOnceOwnerUnbindFinishEnterForeground.push(null);null==this.__cbOnceFinishEnterForeground&&(this.__cbOnceFinishEnterForeground=[]),this.__cbOnceFinishEnterForeground.push(t)},offFinishEnterForeground:function(e){if(null!=e){var n;null!=this.__cbOnFinishEnterForeground&&-1!=(n=this.__cbOnFinishEnterForeground.indexOf(e))&&(this.__cbOnFinishEnterForeground.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFinishEnterForeground[n])&&s(),this.__cbOnOwnerUnbindFinishEnterForeground.splice(n,1)),null!=this.__cbOnceFinishEnterForeground&&-1!=(n=this.__cbOnceFinishEnterForeground.indexOf(e))&&(this.__cbOnceFinishEnterForeground.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFinishEnterForeground[n])&&s(),this.__cbOnceOwnerUnbindFinishEnterForeground.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishEnterForeground){for(var t=0,i=this.__cbOnOwnerUnbindFinishEnterForeground.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFinishEnterForeground[l])&&s()}this.__cbOnOwnerUnbindFinishEnterForeground=null}if(null!=this.__cbOnceOwnerUnbindFinishEnterForeground){for(t=0,i=this.__cbOnceOwnerUnbindFinishEnterForeground.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFinishEnterForeground[l])&&s()}this.__cbOnceOwnerUnbindFinishEnterForeground=null}this.__cbOnFinishEnterForeground=null,this.__cbOnceFinishEnterForeground=null}},listensFinishEnterForeground:function(){return null!=this.__cbOnFinishEnterForeground&&0<this.__cbOnFinishEnterForeground.length||null!=this.__cbOnceFinishEnterForeground&&0<this.__cbOnceFinishEnterForeground.length},__cbOnBeginSortVisuals:null,__cbOnceBeginSortVisuals:null,__cbOnOwnerUnbindBeginSortVisuals:null,__cbOnceOwnerUnbindBeginSortVisuals:null,emitBeginSortVisuals:function(){var e=0;if(null!=this.__cbOnBeginSortVisuals&&(e+=this.__cbOnBeginSortVisuals.length),null!=this.__cbOnceBeginSortVisuals&&(e+=this.__cbOnceBeginSortVisuals.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginSortVisuals)for(var l=0,s=this.__cbOnBeginSortVisuals.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnBeginSortVisuals[r],++i):--e}if(null!=this.__cbOnceBeginSortVisuals){for(var a=null,h=null,l=0,s=this.__cbOnceBeginSortVisuals.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceBeginSortVisuals[r],this.__cbOnceBeginSortVisuals[r]=null,u=this.__cbOnceOwnerUnbindBeginSortVisuals[r],(this.__cbOnceOwnerUnbindBeginSortVisuals[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginSortVisuals[r]),h.push(this.__cbOnceBeginSortVisuals[r]))}this.__cbOnceOwnerUnbindBeginSortVisuals=a,this.__cbOnceBeginSortVisuals=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onBeginSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginSortVisuals because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginSortVisuals(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBeginSortVisuals&&(this.__cbOnOwnerUnbindBeginSortVisuals=[]),this.__cbOnOwnerUnbindBeginSortVisuals.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBeginSortVisuals&&(this.__cbOnOwnerUnbindBeginSortVisuals=[]),this.__cbOnOwnerUnbindBeginSortVisuals.push(null);null==this.__cbOnBeginSortVisuals&&(this.__cbOnBeginSortVisuals=[]),this.__cbOnBeginSortVisuals.push(t)},onceBeginSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginSortVisuals because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginSortVisuals(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBeginSortVisuals&&(this.__cbOnceOwnerUnbindBeginSortVisuals=[]),this.__cbOnceOwnerUnbindBeginSortVisuals.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBeginSortVisuals&&(this.__cbOnceOwnerUnbindBeginSortVisuals=[]),this.__cbOnceOwnerUnbindBeginSortVisuals.push(null);null==this.__cbOnceBeginSortVisuals&&(this.__cbOnceBeginSortVisuals=[]),this.__cbOnceBeginSortVisuals.push(t)},offBeginSortVisuals:function(e){if(null!=e){var n;null!=this.__cbOnBeginSortVisuals&&-1!=(n=this.__cbOnBeginSortVisuals.indexOf(e))&&(this.__cbOnBeginSortVisuals.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBeginSortVisuals[n])&&s(),this.__cbOnOwnerUnbindBeginSortVisuals.splice(n,1)),null!=this.__cbOnceBeginSortVisuals&&-1!=(n=this.__cbOnceBeginSortVisuals.indexOf(e))&&(this.__cbOnceBeginSortVisuals.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBeginSortVisuals[n])&&s(),this.__cbOnceOwnerUnbindBeginSortVisuals.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginSortVisuals){for(var t=0,i=this.__cbOnOwnerUnbindBeginSortVisuals.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBeginSortVisuals[l])&&s()}this.__cbOnOwnerUnbindBeginSortVisuals=null}if(null!=this.__cbOnceOwnerUnbindBeginSortVisuals){for(t=0,i=this.__cbOnceOwnerUnbindBeginSortVisuals.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBeginSortVisuals[l])&&s()}this.__cbOnceOwnerUnbindBeginSortVisuals=null}this.__cbOnBeginSortVisuals=null,this.__cbOnceBeginSortVisuals=null}},listensBeginSortVisuals:function(){return null!=this.__cbOnBeginSortVisuals&&0<this.__cbOnBeginSortVisuals.length||null!=this.__cbOnceBeginSortVisuals&&0<this.__cbOnceBeginSortVisuals.length},__cbOnFinishSortVisuals:null,__cbOnceFinishSortVisuals:null,__cbOnOwnerUnbindFinishSortVisuals:null,__cbOnceOwnerUnbindFinishSortVisuals:null,emitFinishSortVisuals:function(){var e=0;if(null!=this.__cbOnFinishSortVisuals&&(e+=this.__cbOnFinishSortVisuals.length),null!=this.__cbOnceFinishSortVisuals&&(e+=this.__cbOnceFinishSortVisuals.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishSortVisuals)for(var l=0,s=this.__cbOnFinishSortVisuals.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnFinishSortVisuals[r],++i):--e}if(null!=this.__cbOnceFinishSortVisuals){for(var a=null,h=null,l=0,s=this.__cbOnceFinishSortVisuals.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceFinishSortVisuals[r],this.__cbOnceFinishSortVisuals[r]=null,u=this.__cbOnceOwnerUnbindFinishSortVisuals[r],(this.__cbOnceOwnerUnbindFinishSortVisuals[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishSortVisuals[r]),h.push(this.__cbOnceFinishSortVisuals[r]))}this.__cbOnceOwnerUnbindFinishSortVisuals=a,this.__cbOnceFinishSortVisuals=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onFinishSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishSortVisuals because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishSortVisuals(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFinishSortVisuals&&(this.__cbOnOwnerUnbindFinishSortVisuals=[]),this.__cbOnOwnerUnbindFinishSortVisuals.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFinishSortVisuals&&(this.__cbOnOwnerUnbindFinishSortVisuals=[]),this.__cbOnOwnerUnbindFinishSortVisuals.push(null);null==this.__cbOnFinishSortVisuals&&(this.__cbOnFinishSortVisuals=[]),this.__cbOnFinishSortVisuals.push(t)},onceFinishSortVisuals:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishSortVisuals because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishSortVisuals(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFinishSortVisuals&&(this.__cbOnceOwnerUnbindFinishSortVisuals=[]),this.__cbOnceOwnerUnbindFinishSortVisuals.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFinishSortVisuals&&(this.__cbOnceOwnerUnbindFinishSortVisuals=[]),this.__cbOnceOwnerUnbindFinishSortVisuals.push(null);null==this.__cbOnceFinishSortVisuals&&(this.__cbOnceFinishSortVisuals=[]),this.__cbOnceFinishSortVisuals.push(t)},offFinishSortVisuals:function(e){if(null!=e){var n;null!=this.__cbOnFinishSortVisuals&&-1!=(n=this.__cbOnFinishSortVisuals.indexOf(e))&&(this.__cbOnFinishSortVisuals.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFinishSortVisuals[n])&&s(),this.__cbOnOwnerUnbindFinishSortVisuals.splice(n,1)),null!=this.__cbOnceFinishSortVisuals&&-1!=(n=this.__cbOnceFinishSortVisuals.indexOf(e))&&(this.__cbOnceFinishSortVisuals.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFinishSortVisuals[n])&&s(),this.__cbOnceOwnerUnbindFinishSortVisuals.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishSortVisuals){for(var t=0,i=this.__cbOnOwnerUnbindFinishSortVisuals.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFinishSortVisuals[l])&&s()}this.__cbOnOwnerUnbindFinishSortVisuals=null}if(null!=this.__cbOnceOwnerUnbindFinishSortVisuals){for(t=0,i=this.__cbOnceOwnerUnbindFinishSortVisuals.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFinishSortVisuals[l])&&s()}this.__cbOnceOwnerUnbindFinishSortVisuals=null}this.__cbOnFinishSortVisuals=null,this.__cbOnceFinishSortVisuals=null}},listensFinishSortVisuals:function(){return null!=this.__cbOnFinishSortVisuals&&0<this.__cbOnFinishSortVisuals.length||null!=this.__cbOnceFinishSortVisuals&&0<this.__cbOnceFinishSortVisuals.length},__cbOnBeginDraw:null,__cbOnceBeginDraw:null,__cbOnOwnerUnbindBeginDraw:null,__cbOnceOwnerUnbindBeginDraw:null,emitBeginDraw:function(){var e=0;if(null!=this.__cbOnBeginDraw&&(e+=this.__cbOnBeginDraw.length),null!=this.__cbOnceBeginDraw&&(e+=this.__cbOnceBeginDraw.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnBeginDraw)for(var l=0,s=this.__cbOnBeginDraw.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnBeginDraw[r],++i):--e}if(null!=this.__cbOnceBeginDraw){for(var a=null,h=null,l=0,s=this.__cbOnceBeginDraw.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceBeginDraw[r],this.__cbOnceBeginDraw[r]=null,u=this.__cbOnceOwnerUnbindBeginDraw[r],(this.__cbOnceOwnerUnbindBeginDraw[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindBeginDraw[r]),h.push(this.__cbOnceBeginDraw[r]))}this.__cbOnceOwnerUnbindBeginDraw=a,this.__cbOnceBeginDraw=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onBeginDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginDraw because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginDraw(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBeginDraw&&(this.__cbOnOwnerUnbindBeginDraw=[]),this.__cbOnOwnerUnbindBeginDraw.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBeginDraw&&(this.__cbOnOwnerUnbindBeginDraw=[]),this.__cbOnOwnerUnbindBeginDraw.push(null);null==this.__cbOnBeginDraw&&(this.__cbOnBeginDraw=[]),this.__cbOnBeginDraw.push(t)},onceBeginDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginDraw because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginDraw(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBeginDraw&&(this.__cbOnceOwnerUnbindBeginDraw=[]),this.__cbOnceOwnerUnbindBeginDraw.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBeginDraw&&(this.__cbOnceOwnerUnbindBeginDraw=[]),this.__cbOnceOwnerUnbindBeginDraw.push(null);null==this.__cbOnceBeginDraw&&(this.__cbOnceBeginDraw=[]),this.__cbOnceBeginDraw.push(t)},offBeginDraw:function(e){if(null!=e){var n;null!=this.__cbOnBeginDraw&&-1!=(n=this.__cbOnBeginDraw.indexOf(e))&&(this.__cbOnBeginDraw.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBeginDraw[n])&&s(),this.__cbOnOwnerUnbindBeginDraw.splice(n,1)),null!=this.__cbOnceBeginDraw&&-1!=(n=this.__cbOnceBeginDraw.indexOf(e))&&(this.__cbOnceBeginDraw.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBeginDraw[n])&&s(),this.__cbOnceOwnerUnbindBeginDraw.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginDraw){for(var t=0,i=this.__cbOnOwnerUnbindBeginDraw.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBeginDraw[l])&&s()}this.__cbOnOwnerUnbindBeginDraw=null}if(null!=this.__cbOnceOwnerUnbindBeginDraw){for(t=0,i=this.__cbOnceOwnerUnbindBeginDraw.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBeginDraw[l])&&s()}this.__cbOnceOwnerUnbindBeginDraw=null}this.__cbOnBeginDraw=null,this.__cbOnceBeginDraw=null}},listensBeginDraw:function(){return null!=this.__cbOnBeginDraw&&0<this.__cbOnBeginDraw.length||null!=this.__cbOnceBeginDraw&&0<this.__cbOnceBeginDraw.length},__cbOnFinishDraw:null,__cbOnceFinishDraw:null,__cbOnOwnerUnbindFinishDraw:null,__cbOnceOwnerUnbindFinishDraw:null,emitFinishDraw:function(){var e=0;if(null!=this.__cbOnFinishDraw&&(e+=this.__cbOnFinishDraw.length),null!=this.__cbOnceFinishDraw&&(e+=this.__cbOnceFinishDraw.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishDraw)for(var l=0,s=this.__cbOnFinishDraw.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnFinishDraw[r],++i):--e}if(null!=this.__cbOnceFinishDraw){for(var a=null,h=null,l=0,s=this.__cbOnceFinishDraw.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceFinishDraw[r],this.__cbOnceFinishDraw[r]=null,u=this.__cbOnceOwnerUnbindFinishDraw[r],(this.__cbOnceOwnerUnbindFinishDraw[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishDraw[r]),h.push(this.__cbOnceFinishDraw[r]))}this.__cbOnceOwnerUnbindFinishDraw=a,this.__cbOnceFinishDraw=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onFinishDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishDraw because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishDraw(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFinishDraw&&(this.__cbOnOwnerUnbindFinishDraw=[]),this.__cbOnOwnerUnbindFinishDraw.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFinishDraw&&(this.__cbOnOwnerUnbindFinishDraw=[]),this.__cbOnOwnerUnbindFinishDraw.push(null);null==this.__cbOnFinishDraw&&(this.__cbOnFinishDraw=[]),this.__cbOnFinishDraw.push(t)},onceFinishDraw:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishDraw because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishDraw(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFinishDraw&&(this.__cbOnceOwnerUnbindFinishDraw=[]),this.__cbOnceOwnerUnbindFinishDraw.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFinishDraw&&(this.__cbOnceOwnerUnbindFinishDraw=[]),this.__cbOnceOwnerUnbindFinishDraw.push(null);null==this.__cbOnceFinishDraw&&(this.__cbOnceFinishDraw=[]),this.__cbOnceFinishDraw.push(t)},offFinishDraw:function(e){if(null!=e){var n;null!=this.__cbOnFinishDraw&&-1!=(n=this.__cbOnFinishDraw.indexOf(e))&&(this.__cbOnFinishDraw.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFinishDraw[n])&&s(),this.__cbOnOwnerUnbindFinishDraw.splice(n,1)),null!=this.__cbOnceFinishDraw&&-1!=(n=this.__cbOnceFinishDraw.indexOf(e))&&(this.__cbOnceFinishDraw.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFinishDraw[n])&&s(),this.__cbOnceOwnerUnbindFinishDraw.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishDraw){for(var t=0,i=this.__cbOnOwnerUnbindFinishDraw.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFinishDraw[l])&&s()}this.__cbOnOwnerUnbindFinishDraw=null}if(null!=this.__cbOnceOwnerUnbindFinishDraw){for(t=0,i=this.__cbOnceOwnerUnbindFinishDraw.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFinishDraw[l])&&s()}this.__cbOnceOwnerUnbindFinishDraw=null}this.__cbOnFinishDraw=null,this.__cbOnceFinishDraw=null}},listensFinishDraw:function(){return null!=this.__cbOnFinishDraw&&0<this.__cbOnFinishDraw.length||null!=this.__cbOnceFinishDraw&&0<this.__cbOnceFinishDraw.length},__cbOnLowMemory:null,__cbOnceLowMemory:null,__cbOnOwnerUnbindLowMemory:null,__cbOnceOwnerUnbindLowMemory:null,emitLowMemory:function(){var e=0;if(null!=this.__cbOnLowMemory&&(e+=this.__cbOnLowMemory.length),null!=this.__cbOnceLowMemory&&(e+=this.__cbOnceLowMemory.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnLowMemory)for(var l=0,s=this.__cbOnLowMemory.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnLowMemory[r],++i):--e}if(null!=this.__cbOnceLowMemory){for(var a=null,h=null,l=0,s=this.__cbOnceLowMemory.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceLowMemory[r],this.__cbOnceLowMemory[r]=null,u=this.__cbOnceOwnerUnbindLowMemory[r],(this.__cbOnceOwnerUnbindLowMemory[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindLowMemory[r]),h.push(this.__cbOnceLowMemory[r]))}this.__cbOnceOwnerUnbindLowMemory=a,this.__cbOnceLowMemory=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onLowMemory:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event lowMemory because owner is destroyed!");var l=function(e){null!=t&&(i.offLowMemory(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindLowMemory&&(this.__cbOnOwnerUnbindLowMemory=[]),this.__cbOnOwnerUnbindLowMemory.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindLowMemory&&(this.__cbOnOwnerUnbindLowMemory=[]),this.__cbOnOwnerUnbindLowMemory.push(null);null==this.__cbOnLowMemory&&(this.__cbOnLowMemory=[]),this.__cbOnLowMemory.push(t)},onceLowMemory:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event lowMemory because owner is destroyed!");var l=function(e){null!=t&&(i.offLowMemory(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindLowMemory&&(this.__cbOnceOwnerUnbindLowMemory=[]),this.__cbOnceOwnerUnbindLowMemory.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindLowMemory&&(this.__cbOnceOwnerUnbindLowMemory=[]),this.__cbOnceOwnerUnbindLowMemory.push(null);null==this.__cbOnceLowMemory&&(this.__cbOnceLowMemory=[]),this.__cbOnceLowMemory.push(t)},offLowMemory:function(e){if(null!=e){var n;null!=this.__cbOnLowMemory&&-1!=(n=this.__cbOnLowMemory.indexOf(e))&&(this.__cbOnLowMemory.splice(n,1),null!=(s=this.__cbOnOwnerUnbindLowMemory[n])&&s(),this.__cbOnOwnerUnbindLowMemory.splice(n,1)),null!=this.__cbOnceLowMemory&&-1!=(n=this.__cbOnceLowMemory.indexOf(e))&&(this.__cbOnceLowMemory.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindLowMemory[n])&&s(),this.__cbOnceOwnerUnbindLowMemory.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindLowMemory){for(var t=0,i=this.__cbOnOwnerUnbindLowMemory.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindLowMemory[l])&&s()}this.__cbOnOwnerUnbindLowMemory=null}if(null!=this.__cbOnceOwnerUnbindLowMemory){for(t=0,i=this.__cbOnceOwnerUnbindLowMemory.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindLowMemory[l])&&s()}this.__cbOnceOwnerUnbindLowMemory=null}this.__cbOnLowMemory=null,this.__cbOnceLowMemory=null}},listensLowMemory:function(){return null!=this.__cbOnLowMemory&&0<this.__cbOnLowMemory.length||null!=this.__cbOnceLowMemory&&0<this.__cbOnceLowMemory.length},__cbOnTerminate:null,__cbOnceTerminate:null,__cbOnOwnerUnbindTerminate:null,__cbOnceOwnerUnbindTerminate:null,emitTerminate:function(){var e=0;if(null!=this.__cbOnTerminate&&(e+=this.__cbOnTerminate.length),null!=this.__cbOnceTerminate&&(e+=this.__cbOnceTerminate.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnTerminate)for(var l=0,s=this.__cbOnTerminate.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnTerminate[r],++i):--e}if(null!=this.__cbOnceTerminate){for(var a=null,h=null,l=0,s=this.__cbOnceTerminate.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceTerminate[r],this.__cbOnceTerminate[r]=null,u=this.__cbOnceOwnerUnbindTerminate[r],(this.__cbOnceOwnerUnbindTerminate[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindTerminate[r]),h.push(this.__cbOnceTerminate[r]))}this.__cbOnceOwnerUnbindTerminate=a,this.__cbOnceTerminate=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onTerminate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event terminate because owner is destroyed!");var l=function(e){null!=t&&(i.offTerminate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTerminate&&(this.__cbOnOwnerUnbindTerminate=[]),this.__cbOnOwnerUnbindTerminate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTerminate&&(this.__cbOnOwnerUnbindTerminate=[]),this.__cbOnOwnerUnbindTerminate.push(null);null==this.__cbOnTerminate&&(this.__cbOnTerminate=[]),this.__cbOnTerminate.push(t)},onceTerminate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event terminate because owner is destroyed!");var l=function(e){null!=t&&(i.offTerminate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTerminate&&(this.__cbOnceOwnerUnbindTerminate=[]),this.__cbOnceOwnerUnbindTerminate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTerminate&&(this.__cbOnceOwnerUnbindTerminate=[]),this.__cbOnceOwnerUnbindTerminate.push(null);null==this.__cbOnceTerminate&&(this.__cbOnceTerminate=[]),this.__cbOnceTerminate.push(t)},offTerminate:function(e){if(null!=e){var n;null!=this.__cbOnTerminate&&-1!=(n=this.__cbOnTerminate.indexOf(e))&&(this.__cbOnTerminate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTerminate[n])&&s(),this.__cbOnOwnerUnbindTerminate.splice(n,1)),null!=this.__cbOnceTerminate&&-1!=(n=this.__cbOnceTerminate.indexOf(e))&&(this.__cbOnceTerminate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTerminate[n])&&s(),this.__cbOnceOwnerUnbindTerminate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTerminate){for(var t=0,i=this.__cbOnOwnerUnbindTerminate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTerminate[l])&&s()}this.__cbOnOwnerUnbindTerminate=null}if(null!=this.__cbOnceOwnerUnbindTerminate){for(t=0,i=this.__cbOnceOwnerUnbindTerminate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTerminate[l])&&s()}this.__cbOnceOwnerUnbindTerminate=null}this.__cbOnTerminate=null,this.__cbOnceTerminate=null}},listensTerminate:function(){return null!=this.__cbOnTerminate&&0<this.__cbOnTerminate.length||null!=this.__cbOnceTerminate&&0<this.__cbOnceTerminate.length},immediateCallbacks:null,immediateCallbacksCapacity:null,immediateCallbacksLen:null,postFlushImmediateCallbacks:null,postFlushImmediateCallbacksCapacity:null,postFlushImmediateCallbacksLen:null,loaders:null,_onceImmediateWithOwner:function(e,n){this._onceImmediate(function(){(null==e||0<=e._lifecycleState)&&n()})},_onceImmediate:function(e){if(null==e)throw Q.thrown("Immediate callback should not be null!");this.immediateCallbacksLen<this.immediateCallbacksCapacity?(this.immediateCallbacks[this.immediateCallbacksLen]=e,this.immediateCallbacksLen++):(this.immediateCallbacks[this.immediateCallbacksLen++]=e,this.immediateCallbacksCapacity++)},_oncePostFlushImmediateWithOwner:function(e,n,t){this._oncePostFlushImmediate(function(){(null==e||0<=e._lifecycleState)&&n()},t)},_oncePostFlushImmediate:function(n,e){var t=this;e?he.app._onceImmediate(function(){var e=!1;t._oncePostFlushImmediate(n,e=null==e?!0:e)}):0==this.immediateCallbacksLen?n():this.postFlushImmediateCallbacksLen<this.postFlushImmediateCallbacksCapacity?(this.postFlushImmediateCallbacks[this.postFlushImmediateCallbacksLen]=n,this.postFlushImmediateCallbacksLen++):(this.postFlushImmediateCallbacks[this.postFlushImmediateCallbacksLen++]=n,this.postFlushImmediateCallbacksCapacity++)},flushImmediate:function(){for(var e=!1;0<this.immediateCallbacksLen;){for(var e=!0,n=(u=f.pool(this.immediateCallbacksLen)).get(),t=this.immediateCallbacksLen,i=this.immediateCallbacksLen=0,l=t;i<l;){var s=i++;n.vector[s]=this.immediateCallbacks[s],this.immediateCallbacks[s]=null}for(var r=0,a=t;r<a;){var h=r++;(0,n.vector[h])()}u.release(n)}if(0<this.postFlushImmediateCallbacksLen){for(var u,n=(u=f.pool(this.postFlushImmediateCallbacksLen)).get(),t=this.postFlushImmediateCallbacksLen,i=this.postFlushImmediateCallbacksLen=0,l=t;i<l;){s=i++;n.vector[s]=this.postFlushImmediateCallbacks[s],this.postFlushImmediateCallbacks[s]=null}for(i=0,l=t;i<l;){s=i++;(0,n.vector[s])()}u.release(n)}return e},_xUpdatesHandlersPool:null,_xUpdatesHandlers:null,_xUpdatesToCallNow:null,onceXUpdates:function(e,n,t){for(var i=this._xUpdatesHandlersPool,l=0<i.availableItems.length?i.availableItems.pop():null,s=((l=null==l?new Qe:l).owner=e,l.numUpdates=n,l.callback=t,!1),r=0,a=this._xUpdatesHandlers.length;r<a;){var h=r++;if(null==this._xUpdatesHandlers[h]){this._xUpdatesHandlers[h]=l,s=!0;break}}s||this._xUpdatesHandlers.push(l)},offXUpdates:function(e){for(var n=!1,t=0,i=this._xUpdatesHandlers.length;t<i;){var l=t++,s=this._xUpdatesHandlers[l];s.callback==e&&(s.reset(),this._xUpdatesHandlersPool.recycle(s),n=!(this._xUpdatesHandlers[l]=null))}n&&this.cleanXUpdatesNullValues()},tickOnceXUpdates:function(){for(var e=0,n=!1,t=0,i=this._xUpdatesHandlers.length;t<i;){var l,s=t++,r=this._xUpdatesHandlers[s];null!=r&&(r.numUpdates--,r.numUpdates<=0)&&((null==(l=r.owner)||0<=l._lifecycleState)&&(this._xUpdatesToCallNow[e]=r.callback,++e),n=!(this._xUpdatesHandlers[s]=null))}if(0<e)for(t=0,i=e;t<i;){var s=t++,a=this._xUpdatesToCallNow[s];this._xUpdatesToCallNow[s]=null,a()}n&&this.cleanXUpdatesNullValues()},cleanXUpdatesNullValues:function(){for(var e=0,n=0,t=this._xUpdatesHandlers.length;e<t;){do{}while(null==this._xUpdatesHandlers[e]&&(++n,++e<t));0!=n&&e<t&&(this._xUpdatesHandlers[e-n]=this._xUpdatesHandlers[e]),++e}var i=this._xUpdatesHandlers,l=t-n;if(i.length!=l)if(i.length>l)i.splice(l,i.length-l);else for(var s=i;s.length<l;)s.push(null)},inUpdate:null,get_computedFps:function(){return this._computeFps.fps},_computeFps:null,frame:null,delta:null,realDelta:null,backend:null,screen:null,audio:null,settings:null,systems:null,logger:null,visuals:null,pendingVisuals:null,destroyedVisuals:null,groups:null,input:null,renderTextures:null,assets:null,defaultTexturedShader:null,defaultWhiteTexture:null,defaultFont:null,projectDir:null,persistent:null,textInput:null,converters:null,timelines:null,lazyScenes:null,scenes:null,get_scenes:function(){return this.lazyScenes&&(this.lazyScenes=!1,this.scenes=Ht.get_shared()),this.scenes},set_scenes:function(e){return this.scenes=e},hierarchyDirty:null,visualsContentDirty:null,beginUpdateCallbacks:null,disposedEntities:null,numBlockingDefaultScroll:null,quit:function(){kt.quit()},backendReady:function(){var n=this;if(this.backend.onUpdate(this,$bind(this,this.updatePreReady)),this.persistent=new St("app"),this.textInput=new ni,this.bindSettings(),this.screen.backendReady(),null!=he.preInitCallbacks){for(var e=0,t=[].concat(he.preInitCallbacks);e<t.length;){var i=t[e];++e,i()}he.preInitCallbacks=null}this.initFieldConverters(),null!=this.settings.collections&&this.initCollections(this.settings.collections(),this.settings.appInfo),this.assets.add(this.settings.defaultShader),this.assets.add("shader:msdf"),this.assets.add("shader:pixelArt"),this.assets.onceComplete(this,function(e){n.assets.add(n.settings.defaultFont),n.assets.add("image:white"),n.assets.onceComplete(n,function(e){e?(n.defaultFont=n.assets.font(n.settings.defaultFont),n.defaultWhiteTexture=n.assets.texture("image:white"),n.defaultTexturedShader=n.assets.shader(n.settings.defaultShader),n.logger.success("Default assets loaded.",{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:900,className:"ceramic.App",methodName:"backendReady"}),n.assetsLoaded()):he.app.logger.error("Failed to load default assets.",{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:903,className:"ceramic.App",methodName:"backendReady"})}),n.emitDefaultAssetsLoad(n.assets),n.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:911,className:"ceramic.App",methodName:"backendReady"}),n.assets.immediate.flush(),n.flushImmediate()}),this.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/App.hx",lineNumber:917,className:"ceramic.App",methodName:"backendReady"}),this.assets.immediate.flush(),this.flushImmediate()},bindSettings:function(){this.settings.onTargetFpsChange(this,function(e,n){he.app.backend.setTargetFps(e)}),he.app.backend.setTargetFps(this.settings.get_targetFps())},initFieldConverters:function(){var e=this.converters,n=new gn,e=(e.h["ceramic.Texture"]=n,this.converters),n=new on,e=(e.h["ceramic.BitmapFont"]=n,this.converters),n=new _n,e=(e.h["ceramic.FragmentData"]=n,this.converters),n=new un,e=(e.h["ceramic.Color"]=n,this.converters),n=new bn,e=(e.h["Map<String,String>"]=n,this.converters),n=new bn,e=(e.h["Map<String,Bool>"]=n,this.converters),n=new bn,e=(e.h["ceramic.ReadOnlyMap<String,String>"]=n,this.converters),n=new bn,e=(e.h["ceramic.ReadOnlyMap<String,Bool>"]=n,this.converters),n=new hn,e=(e.h["Array<Float>"]=n,this.converters),n=new hn,e=(e.h["Array<Int>"]=n,this.converters),n=new hn,e=(e.h["Array<String>"]=n,this.converters),n=new hn,e=(e.h["ceramic.ReadOnlyArray<Float>"]=n,this.converters),n=new hn,e=(e.h["ceramic.ReadOnlyArray<Int>"]=n,this.converters),n=new hn,e=(e.h["ceramic.ReadOnlyArray<String>"]=n,this.converters),n=new cn,e=(e.h["Map<String,ceramic.Component>"]=n,this.converters),n=new cn,e=(e.h["ceramic.ReadOnlyMap<String,ceramic.Component>"]=n,this.converters),n=new dn;e.h["ceramic.IntBoolMap"]=n},initCollections:function(g,O){for(var f=this,e=(null==O&&(O=this.info),Object.create(null)),n=0,t=0,i=N.fields(O.collections);t<i.length;)for(var l=i[t],s=(++t,0),r=N.fields(N.field(O.collections,l));s<r.length;){var a=r[s],a=(++s,N.field(N.field(O.collections,l),a));"string"==typeof a||null==(a=a.data)||Object.prototype.hasOwnProperty.call(e,a)||(e[a]=!0,this.assets.addDatabase(a),++n)}0<n&&this.assets.onceComplete(this,function(e){for(var n=0,t=N.fields(O.collections);n<t.length;)for(var i=t[n],l=(++n,0),s=N.fields(N.field(O.collections,i));l<s.length;){var r=s[l],a=(++l,N.field(N.field(O.collections,i),r));if("string"!=typeof a){var h=a.data;if(null!=h){for(var u=f.assets.database(h),c=N.field(g,r),h=a.type,o=L[h],_=0;_<u.length;){var d=u[_],b=(++_,D.createInstance(o,[null,null]));b.setRawData(d),c.push(b)}c.synchronize()}}}})},assetsLoaded:function(){this.runNextLoader()},runNextLoader:function(){0<this.loaders.length?this.loaders.shift()($bind(this,this.runNextLoader)):(this.loaders=null,this.runReady())},runReady:function(){var l=this;kt.postAppInit(),this.emitReady(),this.screen.resize(),this.backend.offUpdate($bind(this,this.updatePreReady)),this.backend.onUpdate(this,$bind(this,this.update)),this.backend.onRender(this,$bind(this,this.render)),this.backend.input.onKeyDown(this,function(e){l.beginUpdateCallbacks.push(function(){l.input.emitKeyDown(e)})}),this.backend.input.onKeyUp(this,function(e){l.beginUpdateCallbacks.push(function(){l.input.emitKeyUp(e)})}),this.backend.input.onGamepadEnable(this,function(e,n){l.beginUpdateCallbacks.push(function(){l.input.emitGamepadEnable(e,n)})}),this.backend.input.onGamepadDisable(this,function(e){l.beginUpdateCallbacks.push(function(){l.input.emitGamepadDisable(e)})}),this.backend.input.onGamepadDown(this,function(e,n){l.beginUpdateCallbacks.push(function(){l.input.emitGamepadDown(e,n)})}),this.backend.input.onGamepadUp(this,function(e,n){l.beginUpdateCallbacks.push(function(){l.input.emitGamepadUp(e,n)})}),this.backend.input.onGamepadGyro(this,function(e,n,t,i){l.beginUpdateCallbacks.push(function(){l.input.emitGamepadGyro(e,n,t,i)})}),this.backend.input.onGamepadAxis(this,function(e,n,t){l.beginUpdateCallbacks.push(function(){l.input.emitGamepadAxis(e,n,t)})})},updatePreReady:function(e){Re.flushAllInstancesImmediate(),this.flushImmediate()},update:function(e){999999999<++this.frame&&(this.frame-=999999999);var n=e;if(n>this.settings.get_maxDelta()&&(n=this.settings.get_maxDelta()),0<=this.settings.get_overrideDelta()&&(n=this.settings.get_overrideDelta()),this._computeFps.addFrame(n),this.delta=n,this.realDelta=e,xi.update(n,e),Nt.tick(),this.screen.updatePointerOverState(n),this.inUpdate=!0,this.screen.resetDeltas(),this.input.resetDeltas(),0<this.beginUpdateCallbacks.length)for(var t=this.beginUpdateCallbacks,i=(this.beginUpdateCallbacks=[],0);i<t.length;){var l=t[i];++i,l()}for(this.emitPreUpdate(n),this.systems.earlyUpdate(n),Re.flushAllInstancesImmediate(),this.flushImmediate(),0<n&&(P.tick(n),this.flushImmediate()),this.emitUpdate(n),this.tickOnceXUpdates(),this.flushImmediate(),this.systems.lateUpdate(n),this.emitPostUpdate(n),this.flushImmediate();0<this.disposedEntities.length;)this.disposedEntities.shift().destroy();this.syncPendingVisuals();var s,r=this.visuals,a=0,h=!1;do{this.visualsContentDirty=!1;(f=this.screen.matrix).changedDirty&&(f.changed=f.tx!=f._txPrev||f.ty!=f._tyPrev||f.a!=f._aPrev||f.b!=f._bPrev||f.c!=f._cPrev||f.d!=f._dPrev,f.changedDirty=!1),this.screen.matrix.changed&&this.screen.matrix.emitChange();for(var i=0,u=r.length;i<u;)0<=(v=r[O=i++])._lifecycleState&&(v.touchableDirty&&v.computeTouchable(),v.contentDirty)&&(v.visibilityDirty&&v.computeVisibility(),v.computedVisible)&&v.computeContent();for(var c=0,o=r.length;c<o;){var _=r[c++];0<=_._lifecycleState&&null!=_.transform&&((U=_.transform).changedDirty&&(U.changed=U.tx!=U._txPrev||U.ty!=U._tyPrev||U.a!=U._aPrev||U.b!=U._bPrev||U.c!=U._cPrev||U.d!=U._dPrev,U.changedDirty=!1),_.transform.changed)&&_.transform.emitChange()}if(9999<a++){if(h&&this.visualsContentDirty)throw Q.thrown("Failed to update visuals because flushImmediate() is being called continuously and visuals content stays dirty.");if(h)throw Q.thrown("Failed to update visuals because flushImmediate() is being called continuously.");for(var d=0,b=r.length;d<b;){var g=r[d++];if(0<=g._lifecycleState&&g.contentDirty)throw Q.thrown("Failed to update visuals because visuals content stays dirty. ("+V.string(g)+")")}}}while(h=this.flushImmediate(),s=this.syncPendingVisuals(),h||this.visualsContentDirty||s);for(i=0,u=this.renderTextures.length;i<u;){var O=i++;null!=(M=this.renderTextures[O]).dependingTextures&&M.dependingTextures.clear()}for(i=0,u=r.length;i<u;){var f,p,m,w,v=r[O=i++];if(0<=v._lifecycleState)if(v.renderTargetDirty&&v.computeRenderTarget(),v.matrixDirty&&v.computeMatrix(),v.visibilityDirty&&v.computeVisibility(),v.computedVisible)if(v.clipDirty&&v.computeClip(),null!=v.computedRenderTarget)if(null!=v.asQuad){if(null!=v.asQuad._texture&&(f=v.computedRenderTarget,p=v.asQuad._texture,null==f.dependingTextures&&(f.dependingTextures=new rn),F=f.dependingTextures.intMap.h[0|p.index],f.dependingTextures.set(p.index,(null!=F?F:0)+1)),null!=v.shader&&null!=v.shader.usedTextures)for(var y=v.shader.usedTextures,c=0,o=y.length;c<o;){var C=c++,U=v.computedRenderTarget,C=y[C],x=(null==U.dependingTextures&&(U.dependingTextures=new rn),U.dependingTextures.intMap.h[0|C.index]);U.dependingTextures.set(C.index,(null!=x?x:0)+1)}}else if(null!=v.asMesh)if(null!=v.asMesh.texture&&(p=v.computedRenderTarget,m=v.asMesh.texture,null==p.dependingTextures&&(p.dependingTextures=new rn),w=p.dependingTextures.intMap.h[0|m.index],p.dependingTextures.set(m.index,(null!=w?w:0)+1)),null!=v.shader&&null!=v.shader.usedTextures)for(var T=v.shader.usedTextures,d=0,b=T.length;d<b;){var D=d++,A=v.computedRenderTarget,D=T[D],S=(null==A.dependingTextures&&(A.dependingTextures=new rn),A.dependingTextures.intMap.h[0|D.index]);A.dependingTextures.set(D.index,(null!=S?S:0)+1)}}this.computeHierarchy();var E=this.renderTextures;if(0!=E.length){for(var M,k=E.length,i=0,u=k;i<u;)(M=E[O=i++]).priority=0;for(i=0,u=k;i<u;)for(var I=E[O=i++],c=0,o=k;c<o;){var R=E[c++];null!=I.dependingTextures&&0<(null!=(F=I.dependingTextures.intMap.h[0|R.index])?F:0)&&R.priority<=I.priority&&(R.priority=I.priority+1)}for(i=0,u=k;i<u;)for(I=E[O=i++],c=0,o=k;c<o;){var F,R=E[c++];null!=I.dependingTextures&&0<(null!=(F=I.dependingTextures.intMap.h[0|R.index])?F:0)&&R.priority<=I.priority&&(R.priority=I.priority+1)}}this.syncDestroyedVisuals();r=this.visuals;this.emitBeginSortVisuals(),qt.rec(r,0,r.length),this.emitFinishSortVisuals(),this.inUpdate=!1},render:function(){this.emitBeginDraw(),this.backend.draw.draw(this.visuals),this.emitFinishDraw(),P.endFrame()},addVisual:function(e){this.pendingVisuals.push(e)},removeVisual:function(e){this.destroyedVisuals.push(e)},syncPendingVisuals:function(){if(0<this.pendingVisuals.length){for(;0<this.pendingVisuals.length;)this.visuals.push(this.pendingVisuals.pop());return this.hierarchyDirty=!0}return!1},syncDestroyedVisuals:function(){if(0<this.destroyedVisuals.length){for(var e=0,n=0,t=this.visuals.length;e<t;){do{}while(this.visuals[e]._lifecycleState<0&&(++n,++e<t));0!=n&&e<t&&(this.visuals[e-n]=this.visuals[e]),++e}var i=this.destroyedVisuals;if(0!=i.length)if(0<i.length)i.splice(0,i.length);else for(var l=i;l.length<0;)l.push(null);var s=t-n;if((i=this.visuals).length!=s)if(i.length>s)i.splice(s,i.length-s);else for(l=i;l.length<s;)l.push(null);this.hierarchyDirty=!0}},updateVisuals:function(e){var n,t=0,i=!1;do{this.visualsContentDirty=!1;(b=this.screen.matrix).changedDirty&&(b.changed=b.tx!=b._txPrev||b.ty!=b._tyPrev||b.a!=b._aPrev||b.b!=b._bPrev||b.c!=b._cPrev||b.d!=b._dPrev,b.changedDirty=!1),this.screen.matrix.changed&&this.screen.matrix.emitChange();for(var l=0,s=e.length;l<s;)0<=(p=e[_=l++])._lifecycleState&&(p.touchableDirty&&p.computeTouchable(),p.contentDirty)&&(p.visibilityDirty&&p.computeVisibility(),p.computedVisible)&&p.computeContent();for(var r=0,a=e.length;r<a;){var h=e[r++];0<=h._lifecycleState&&null!=h.transform&&((v=h.transform).changedDirty&&(v.changed=v.tx!=v._txPrev||v.ty!=v._tyPrev||v.a!=v._aPrev||v.b!=v._bPrev||v.c!=v._cPrev||v.d!=v._dPrev,v.changedDirty=!1),h.transform.changed)&&h.transform.emitChange()}if(9999<t++){if(i&&this.visualsContentDirty)throw Q.thrown("Failed to update visuals because flushImmediate() is being called continuously and visuals content stays dirty.");if(i)throw Q.thrown("Failed to update visuals because flushImmediate() is being called continuously.");for(var u=0,c=e.length;u<c;){var o=e[u++];if(0<=o._lifecycleState&&o.contentDirty)throw Q.thrown("Failed to update visuals because visuals content stays dirty. ("+V.string(o)+")")}}}while(i=this.flushImmediate(),n=this.syncPendingVisuals(),i||this.visualsContentDirty||n);for(l=0,s=this.renderTextures.length;l<s;){var _=l++,d=this.renderTextures[_];null!=d.dependingTextures&&d.dependingTextures.clear()}for(l=0,s=e.length;l<s;){var b,g,O,f,p=e[_=l++];if(0<=p._lifecycleState)if(p.renderTargetDirty&&p.computeRenderTarget(),p.matrixDirty&&p.computeMatrix(),p.visibilityDirty&&p.computeVisibility(),p.computedVisible)if(p.clipDirty&&p.computeClip(),null!=p.computedRenderTarget)if(null!=p.asQuad){if(null!=p.asQuad._texture&&(b=p.computedRenderTarget,g=p.asQuad._texture,null==b.dependingTextures&&(b.dependingTextures=new rn),O=b.dependingTextures.intMap.h[0|g.index],b.dependingTextures.set(g.index,(null!=O?O:0)+1)),null!=p.shader&&null!=p.shader.usedTextures)for(var m=p.shader.usedTextures,r=0,a=m.length;r<a;){var w=r++,v=p.computedRenderTarget,w=m[w],y=(null==v.dependingTextures&&(v.dependingTextures=new rn),v.dependingTextures.intMap.h[0|w.index]);v.dependingTextures.set(w.index,(null!=y?y:0)+1)}}else if(null!=p.asMesh)if(null!=p.asMesh.texture&&(g=p.computedRenderTarget,O=p.asMesh.texture,null==g.dependingTextures&&(g.dependingTextures=new rn),f=g.dependingTextures.intMap.h[0|O.index],g.dependingTextures.set(O.index,(null!=f?f:0)+1)),null!=p.shader&&null!=p.shader.usedTextures)for(var C=p.shader.usedTextures,u=0,c=C.length;u<c;){var U=u++,x=p.computedRenderTarget,U=C[U],T=(null==x.dependingTextures&&(x.dependingTextures=new rn),x.dependingTextures.intMap.h[0|U.index]);x.dependingTextures.set(U.index,(null!=T?T:0)+1)}}},computeHierarchy:function(){if(this.hierarchyDirty){for(var e=0,n=this.visuals.length;e<n;){var t=e++,t=this.visuals[t];0<=t._lifecycleState&&null==t.parent&&(t.computedDepth=1e3*t.depth,null!=t.children)&&q._computeChildrenDepth0(t)}this.hierarchyDirty=!1}},_computeRenderTexturesPriorityQueue:null,computeRenderTexturesPriority:function(e){if(0!=e.length){for(var n=e.length,t=0,i=n;t<i;)e[t++].priority=0;for(t=0,i=n;t<i;)for(var l=e[t++],s=0,r=n;s<r;){var a=e[s++];null!=l.dependingTextures&&0<(null!=(h=l.dependingTextures.intMap.h[0|a.index])?h:0)&&a.priority<=l.priority&&(a.priority=l.priority+1)}for(t=0,i=n;t<i;)for(l=e[t++],s=0,r=n;s<r;){var h,a=e[s++];null!=l.dependingTextures&&0<(null!=(h=l.dependingTextures.intMap.h[0|a.index])?h:0)&&a.priority<=l.priority&&(a.priority=l.priority+1)}}},sortVisuals:function(e){this.emitBeginSortVisuals(),qt.rec(e,0,e.length),this.emitFinishSortVisuals()},group:function(e,n){null==n&&(n=!0);for(var t=0,i=this.groups.length;t<i;){var l=t++,l=this.groups[l];if(l.id==e)return l}return n?new Dn(e):null},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offReady(),this.offUpdate(),this.offPreUpdate(),this.offPostUpdate(),this.offDefaultAssetsLoad(),this.offCriticalError(),this.offBeginEnterBackground(),this.offFinishEnterBackground(),this.offBeginEnterForeground(),this.offFinishEnterForeground(),this.offBeginSortVisuals(),this.offFinishSortVisuals(),this.offBeginDraw(),this.offFinishDraw(),this.offLowMemory(),this.offTerminate()},info:null,__class__:he,__properties__:$extend(l.prototype.__properties__,{set_scenes:"set_scenes",get_scenes:"get_scenes",get_computedFps:"get_computedFps"})}),function(){this.callback=null,this.numUpdates=-1,this.owner=null}),f=((L["ceramic.AppXUpdatesHandler"]=Qe).__name__="ceramic.AppXUpdatesHandler",Qe.prototype={owner:null,numUpdates:null,callback:null,reset:function(){this.owner=null,this.numUpdates=-1,this.callback=null},__class__:Qe},function(e){this.nextFree=0,this.arrays=null,this.arrayLengths=e}),$e=((L["ceramic.ArrayPool"]=f).__name__="ceramic.ArrayPool",f.pool=function(e){return e<=10?f.dynPool10:e<=100?f.dynPool100:e<=1e3?f.dynPool1000:e<=1e4?f.dynPool10000:e<=1e5?f.dynPool100000:(f.didNotifyLargePool||(f.didNotifyLargePool=!0,xi.schedule(null,.5,function(){f.didNotifyLargePool=!1},-1),he.app.logger.warning("You should avoid asking a pool for arrays with more than 100000 elements (asked: "+e+") because it needs allocating a temporary one-time pool each time for that.",{fileName:"../../../../ceramic/runtime/src/ceramic/ArrayPool.hx",lineNumber:45,className:"ceramic.ArrayPool",methodName:"pool"})),new f(e))},f.prototype={arrays:null,nextFree:null,arrayLengths:null,get:function(){null==this.arrays?this.arrays=new Lt(f.ALLOC_STEP):this.nextFree>=this.arrays.length&&(e=this.arrays).set_length(e.length+f.ALLOC_STEP);var e=this.arrays.vector[this.nextFree];for(null==e&&(e=new Lt(this.arrayLengths),this.arrays.vector[this.nextFree]=e),e._poolIndex=this.nextFree;;){if(this.nextFree++,this.nextFree==this.arrays.length)break;var n=this.arrays.vector[this.nextFree];if(null==n)break;if(-1==n._poolIndex)break}return e},release:function(e){for(var n=e._poolIndex,t=(e._poolIndex=-1,this.nextFree>n&&(this.nextFree=n),0),i=e.length;t<i;){var l=t++;e.vector[l]=null}},__class__:f},(L["ceramic.AsepriteBlendFuncs"]=a0).__name__="ceramic.AsepriteBlendFuncs",a0.min=function(e,n){return e<n?e:n},a0.max=function(e,n){return n<e?e:n},a0.abs=function(e){return e<0?-e:e},a0.half=function(e){return e/2>>0},a0.div=function(e,n){return e/n>>0},a0.blendMultiply=function(e,n,t){return((t=e*n+128)>>8)+t>>8},a0.blendScreen=function(e,n,t){return e+n-(((t=e*n+128)>>8)+t>>8)},a0.blendOverlay=function(e,n,t){var i;return e<128?(i=t,((i=n*(e<<1)+128)>>8)+i>>8):(t=i=t,n+(e=(e<<1)-255)-(((i=t=n*e+128)>>8)+i>>8))},a0.blendDarken=function(e,n){return e<n?e:n},a0.blendLighten=function(e,n){return n<e?e:n},a0.blendHardLight=function(e,n,t){var i;return n<128?(i=t,((i=e*(n<<1)+128)>>8)+i>>8):(t=i=t,e+(n=(n<<1)-255)-(((i=t=e*n+128)>>8)+i>>8))},a0.blendDifference=function(e,n){e-=n;return e<0?-e:e},a0.blendExclusion=function(e,n,t){return e+n-2*(t=((t=e*n+128)>>8)+t>>8)},a0.blendColorDodge=function(e,n){return 0==e?0:(n=255-n)<=e?255:(255*e+(n/2>>0))/n},a0.blendColorBurn=function(e,n){return 255==e?255:n<=(e=255-e)?0:255-(255*e+(n/2>>0))/n},a0.blendSoftLight=function(e,n){var e=e/255,n=n/255,t=0,t=e<=.25?((16*e-12)*e+4)*e:Math.sqrt(e);return 255*(n<=.5?e-(1-2*n)*e*(1-e):e+(2*n-1)*(t-e))+.5|0},a0.blendDivide=function(e,n){return 0==e?0:n<=e?255:(255*e+(n/2>>0))/n},a0.mul_un8_0=function(e,n,t){return e*n+128},a0.mul_un8_1=function(e){return(e>>8)+e>>8},a0.div_un8=function(e,n){return(255*e+(n/2>>0))/n},a0.rgba=function(e,n,t,i){var l=0,l=(0|(((l&65535|(255<e?255:e<0?0:e)<<16)&16711935|(255<n?255:n<0?0:n)<<8)&16776960|(255<t?255:t<0?0:t)))-16777216;return l&16777215|(255<(i=null==i?255:i)?255:i<0?0:i)<<24},a0.rgbaLuma=function(e){return 2126*(e>>16&255)+7152*(e>>8&255)+722*(255&e)>>0},a0.rgbLuma=function(e,n,t){return 2126*e+7152*n+722*t>>0},a0.rgbaBlenderSrc=function(e,n,t){return n},a0.rgbaBlenderMerge=function(e,n,t){var i=0,l=0,s=0,r=0,a=e>>16&255,h=e>>8&255,u=255&e,c=n>>16&255,o=n>>8&255,_=255&n,n=n>>24&255,c=(s=0==(e=e>>24&255)?(i=c,l=o,_):0==n?(i=a,l=h,u):(i=a+(((r=(c-a)*t+128)>>8)+r>>8),l=h+(((r=(o-h)*t+128)>>8)+r>>8),u+(((r=(_-u)*t+128)>>8)+r>>8)),0),o=a=e+(((r=(n-e)*t+128)>>8)+r>>8),h=(0|(((c&65535|(255<(i=0==a?l=s=0:i)?255:i<0?0:i)<<16)&16711935|(255<l?255:l<0?0:l)<<8)&16776960|(255<s?255:s<0?0:s)))-16777216;return h&16777215|(255<(o=null==o?255:o)?255:o<0?0:o)<<24},a0.rgbaBlenderNegBw=function(e,n,t){var i;return 0!=(-16777216&e)&&2126*(e>>16&255)+7152*(e>>8&255)+722*(255&e)>>0<128?16777215&(0|(((0&65535|16711680)&16711935|65280)&16776960|255))-16777216|(255<(i=null==(i=255)?255:i)?255:i<0?0:i)<<24:16777215&(0|(((0&65535|0)&16711935|0)&16776960|0))-16777216|(255<(i=null==(i=255)?255:i)?255:i<0?0:i)<<24},a0.rgbaBlenderRedTint=function(e,n,t){var i=2126*(n>>16&255)+7152*(n>>8&255)+722*(255&n)>>0,l=(255+i)/2>>0,s=i/2>>0,i=i/2>>0,r=0,a=n>>24&255,r=(0|(((r&65535|(255<l?255:l<0?0:l)<<16)&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216;return a0.rgbaBlenderNormal(e,n=r&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24,t)},a0.rgbaBlenderBlueTint=function(e,n,t){var i=2126*(n>>16&255)+7152*(n>>8&255)+722*(255&n)>>0,l=i/2>>0,s=i/2>>0,i=(255+i)/2>>0,r=0,a=n>>24&255,r=(0|(((r&65535|(255<l?255:l<0?0:l)<<16)&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216;return a0.rgbaBlenderNormal(e,n=r&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24,t)},a0.rgbaBlenderNormal=function(e,n,t){var i,l,s=0;return 0==(-16777216&e)?(i=((s=(i=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(i<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,t=(i=(s>>8)+s>>8)+(t=e>>24&255)-(((s=t*i+128)>>8)+s>>8),16777215&((s=0)|(s=(s=(s=s&65535|(255<(l=(l=e>>16&255)+((n>>16&255)-l)*i/t>>0)?255:l<0?0:l)<<16)&16711935|(255<(l=(l=e>>8&255)+((n>>8&255)-l)*i/t>>0)?255:l<0?0:l)<<8)&16776960|(255<(e=(l=255&e)+((255&n)-l)*i/t>>0)?255:e<0?0:e)))-16777216|(255<(n=null==(n=t)?255:n)?255:n<0?0:n)<<24)},a0.rgbaBlenderNormalDstOver=function(e,n,t){s=0;var i,l,t=((s=(n>>24&255)*t+128)>>8)+s>>8,s=0;return 0==(-16777216&(n=16777215&n|t<<24))?(i=((s=255*(i=e>>24&255)+128)>>8)+s>>8,16777215&e|(i<<=24)):0==(-16777216&e)?n:(s=255*(e>>24&255)+128,i=(t=(s>>8)+s>>8)+(i=n>>24&255)-(((s=i*t+128)>>8)+s>>8),16777215&((s=0)|(s=(s=(s=s&65535|(255<(l=(l=n>>16&255)+((e>>16&255)-l)*t/i>>0)?255:l<0?0:l)<<16)&16711935|(255<(l=(l=n>>8&255)+((e>>8&255)-l)*t/i>>0)?255:l<0?0:l)<<8)&16776960|(255<(n=(l=255&n)+((255&e)-l)*t/i>>0)?255:n<0?0:n)))-16777216|(255<(e=null==(e=i)?255:e)?255:e<0?0:e)<<24)},a0.rgbaBlenderMultiply=function(e,n,t){var i=r=0,l=((i=(e>>16&255)*(n>>16&255)+128)>>8)+i>>8,s=(i=r,((i=(e>>8&255)*(n>>8&255)+128)>>8)+i>>8),r=i=r,a=((i=r=(255&e)*(255&n)+128)>>8)+i>>8,h=0,u=0,h=(0|(((h&65535|(255<l?255:l<0?0:l)<<16)&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<a?255:a<0?0:a)))-16777216,r=(n=h&16777215|(255<(u=null==u?255:u)?255:u<0?0:u)<<24|-16777216&n,0);return 0==(-16777216&e)?(i=r,l=((r=i=(l=n>>24&255)*t+128)>>8)+r>>8,16777215&n|(l<<=24)):0==(-16777216&n)?e:(i=r,i=r=(n>>24&255)*t+128,h=(s=(r>>8)+r>>8)+(a=e>>24&255)-(((r=i=a*s+128)>>8)+r>>8),16777215&(0|(((0&65535|(255<(t=(l=e>>16&255)+((n>>16&255)-l)*s/h>>0)?255:t<0?0:t)<<16)&16711935|(255<(i=(a=e>>8&255)+((n>>8&255)-a)*s/h>>0)?255:i<0?0:i)<<8)&16776960|(255<(l=(r=255&e)+((255&n)-r)*s/h>>0)?255:l<0?0:l)))-16777216|(255<(u=null==(u=h)?255:u)?255:u<0?0:u)<<24)},a0.rgbaBlenderScreen=function(e,n,t){var i=e>>16&255,l=n>>16&255,s=h=0,r=i+l-(((s=i*l+128)>>8)+s>>8),a=(s=h,(i=e>>8&255)+(l=n>>8&255)-(((s=i*l+128)>>8)+s>>8)),h=s=h,i=(i=255&e)+(l=255&n)-(((s=h=i*l+128)>>8)+s>>8),l=0,u=0,l=(0|(((l&65535|(255<r?255:r<0?0:r)<<16)&16711935|(255<a?255:a<0?0:a)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,h=(n=l&16777215|(255<(u=null==u?255:u)?255:u<0?0:u)<<24|-16777216&n,0);return 0==(-16777216&e)?(s=h,r=((h=s=(r=n>>24&255)*t+128)>>8)+h>>8,16777215&n|(r<<=24)):0==(-16777216&n)?e:(s=h,s=h=(n>>24&255)*t+128,l=(a=(h>>8)+h>>8)+(i=e>>24&255)-(((h=s=i*a+128)>>8)+h>>8),16777215&(0|(((0&65535|(255<(t=(r=e>>16&255)+((n>>16&255)-r)*a/l>>0)?255:t<0?0:t)<<16)&16711935|(255<(s=(i=e>>8&255)+((n>>8&255)-i)*a/l>>0)?255:s<0?0:s)<<8)&16776960|(255<(r=(h=255&e)+((255&n)-h)*a/l>>0)?255:r<0?0:r)))-16777216|(255<(u=null==(u=l)?255:u)?255:u<0?0:u)<<24)},a0.rgbaBlenderOverlay=function(e,n,t){var i,l,s,r=0,a=n>>16&255,h=(o=(h=e>>16&255)<128?(s=r,((s=a*(h<<1)+128)>>8)+s>>8):(s=r,a+(l=(h<<1)-255)-(((s=a*l+128)>>8)+s>>8)),e>>8&255),a=n>>8&255,h=(i=h<128?(s=r,((s=a*(h<<1)+128)>>8)+s>>8):(s=r,a+(l=(h<<1)-255)-(((s=a*l+128)>>8)+s>>8)),255&e),a=255&n,u=0,c=0,o=(0|(((u&65535|(255<o?255:o<0?0:o)<<16)&16711935|(255<i?255:i<0?0:i)<<8)&16776960|(255<(u=h<128?(s=r,((s=a*(h<<1)+128)>>8)+s>>8):(r=s=r,a+(l=(h<<1)-255)-(((s=r=a*l+128)>>8)+s>>8)))?255:u<0?0:u)))-16777216,r=(n=o&16777215|(255<(c=null==c?255:c)?255:c<0?0:c)<<24|-16777216&n,0);return 0==(-16777216&e)?(s=r,i=((r=s=(i=n>>24&255)*t+128)>>8)+r>>8,16777215&n|(i<<=24)):0==(-16777216&n)?e:(s=r,s=r=(n>>24&255)*t+128,l=(h=(r>>8)+r>>8)+(a=e>>24&255)-(((r=s=a*h+128)>>8)+r>>8),16777215&(0|(((0&65535|(255<(o=(u=e>>16&255)+((n>>16&255)-u)*h/l>>0)?255:o<0?0:o)<<16)&16711935|(255<(t=(i=e>>8&255)+((n>>8&255)-i)*h/l>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(a=255&e)+((255&n)-a)*h/l>>0)?255:s<0?0:s)))-16777216|(255<(c=null==(c=l)?255:c)?255:c<0?0:c)<<24)},a0.rgbaBlenderDarken=function(e,n,t){var i=e>>16&255,l=n>>16&255,s=i<l?i:l,r=(i=e>>8&255)<(l=n>>8&255)?i:l,i=(i=255&e)<(l=255&n)?i:l,l=0,a=0,l=(0|(((l&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,s=(n=l&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(r=((s=(r=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(r<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,r=(i=(s>>8)+s>>8)+(l=e>>24&255)-(((s=l*i+128)>>8)+s>>8),16777215&(0|(((0&65535|(255<(l=(t=e>>16&255)+((n>>16&255)-t)*i/r>>0)?255:l<0?0:l)<<16)&16711935|(255<(t=(s=e>>8&255)+((n>>8&255)-s)*i/r>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(l=255&e)+((255&n)-l)*i/r>>0)?255:s<0?0:s)))-16777216|(255<(a=null==(a=r)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderLighten=function(e,n,t){var i=e>>16&255,l=n>>16&255,s=l<i?i:l,r=(l=n>>8&255)<(i=e>>8&255)?i:l,i=(l=255&n)<(i=255&e)?i:l,l=0,a=0,l=(0|(((l&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,s=(n=l&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(r=((s=(r=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(r<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,r=(i=(s>>8)+s>>8)+(l=e>>24&255)-(((s=l*i+128)>>8)+s>>8),16777215&(0|(((0&65535|(255<(l=(t=e>>16&255)+((n>>16&255)-t)*i/r>>0)?255:l<0?0:l)<<16)&16711935|(255<(t=(s=e>>8&255)+((n>>8&255)-s)*i/r>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(l=255&e)+((255&n)-l)*i/r>>0)?255:s<0?0:s)))-16777216|(255<(a=null==(a=r)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderColorDodge=function(e,n,t){var i=e>>16&255,l=n>>16&255,s=0==i?0:(l=255-l)<=i?255:(255*i+(l/2>>0))/l,l=n>>8&255,r=0==(i=e>>8&255)?0:(l=255-l)<=i?255:(255*i+(l/2>>0))/l,l=255&n,i=0==(i=255&e)?0:(l=255-l)<=i?255:(255*i+(l/2>>0))/l,l=0,a=0,l=(0|(((l&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,s=(n=l&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(r=((s=(r=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(r<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,r=(i=(s>>8)+s>>8)+(l=e>>24&255)-(((s=l*i+128)>>8)+s>>8),16777215&(0|(((0&65535|(255<(l=(t=e>>16&255)+((n>>16&255)-t)*i/r>>0)?255:l<0?0:l)<<16)&16711935|(255<(t=(s=e>>8&255)+((n>>8&255)-s)*i/r>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(l=255&e)+((255&n)-l)*i/r>>0)?255:s<0?0:s)))-16777216|(255<(a=null==(a=r)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderColorBurn=function(e,n,t){var i=e>>16&255,l=n>>16&255,s=255==i?255:l<=(i=255-i)?0:255-(255*i+(l/2>>0))/l,l=n>>8&255,r=255==(i=e>>8&255)?255:l<=(i=255-i)?0:255-(255*i+(l/2>>0))/l,l=255&n,i=255==(i=255&e)?255:l<=(i=255-i)?0:255-(255*i+(l/2>>0))/l,l=0,a=0,l=(0|(((l&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,s=(n=l&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(r=((s=(r=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(r<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,r=(i=(s>>8)+s>>8)+(l=e>>24&255)-(((s=l*i+128)>>8)+s>>8),16777215&(0|(((0&65535|(255<(l=(t=e>>16&255)+((n>>16&255)-t)*i/r>>0)?255:l<0?0:l)<<16)&16711935|(255<(t=(s=e>>8&255)+((n>>8&255)-s)*i/r>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(l=255&e)+((255&n)-l)*i/r>>0)?255:s<0?0:s)))-16777216|(255<(a=null==(a=r)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderHardLight=function(e,n,t){var i,l,s,r=0,a=e>>16&255,h=n>>16&255,a=(o=h<128?(s=r,((s=a*(h<<1)+128)>>8)+s>>8):(s=r,a+(l=(h<<1)-255)-(((s=a*l+128)>>8)+s>>8)),e>>8&255),a=(i=(h=n>>8&255)<128?(s=r,((s=a*(h<<1)+128)>>8)+s>>8):(s=r,a+(l=(h<<1)-255)-(((s=a*l+128)>>8)+s>>8)),255&e),u=0,c=0,o=(0|(((u&65535|(255<o?255:o<0?0:o)<<16)&16711935|(255<i?255:i<0?0:i)<<8)&16776960|(255<(u=(h=255&n)<128?(s=r,((s=a*(h<<1)+128)>>8)+s>>8):(r=s=r,a+(l=(h<<1)-255)-(((s=r=a*l+128)>>8)+s>>8)))?255:u<0?0:u)))-16777216,r=(n=o&16777215|(255<(c=null==c?255:c)?255:c<0?0:c)<<24|-16777216&n,0);return 0==(-16777216&e)?(s=r,i=((r=s=(i=n>>24&255)*t+128)>>8)+r>>8,16777215&n|(i<<=24)):0==(-16777216&n)?e:(s=r,s=r=(n>>24&255)*t+128,l=(h=(r>>8)+r>>8)+(a=e>>24&255)-(((r=s=a*h+128)>>8)+r>>8),16777215&(0|(((0&65535|(255<(o=(u=e>>16&255)+((n>>16&255)-u)*h/l>>0)?255:o<0?0:o)<<16)&16711935|(255<(t=(i=e>>8&255)+((n>>8&255)-i)*h/l>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(a=255&e)+((255&n)-a)*h/l>>0)?255:s<0?0:s)))-16777216|(255<(c=null==(c=l)?255:c)?255:c<0?0:c)<<24)},a0.rgbaBlenderSoftLight=function(e,n,t){var i=(e>>16&255)/255,l=(n>>16&255)/255,s=0,r=(s=i<=.25?((16*i-12)*i+4)*i:Math.sqrt(i),255*(l<=.5?i-(1-2*l)*i*(1-i):i+(2*l-1)*(s-i))+.5|0),l=(n>>8&255)/255,s=0,a=(s=(i=(e>>8&255)/255)<=.25?((16*i-12)*i+4)*i:Math.sqrt(i),255*(l<=.5?i-(1-2*l)*i*(1-i):i+(2*l-1)*(s-i))+.5|0),l=(255&n)/255,s=0;s=(i=(255&e)/255)<=.25?((16*i-12)*i+4)*i:Math.sqrt(i);var h=0,u=0,h=(0|(((h&65535|(255<r?255:r<0?0:r)<<16)&16711935|(255<a?255:a<0?0:a)<<8)&16776960|(255<(i=255*(l<=.5?i-(1-2*l)*i*(1-i):i+(2*l-1)*(s-i))+.5|0)?255:i<0?0:i)))-16777216,r=(n=h&16777215|(255<(u=null==u?255:u)?255:u<0?0:u)<<24|-16777216&n,0);return 0==(-16777216&e)?(a=((r=(a=n>>24&255)*t+128)>>8)+r>>8,16777215&n|(a<<=24)):0==(-16777216&n)?e:(r=(n>>24&255)*t+128,i=(l=(r>>8)+r>>8)+(s=e>>24&255)-(((r=s*l+128)>>8)+r>>8),16777215&(0|(((0&65535|(255<(a=(h=e>>16&255)+((n>>16&255)-h)*l/i>>0)?255:a<0?0:a)<<16)&16711935|(255<(s=(t=e>>8&255)+((n>>8&255)-t)*l/i>>0)?255:s<0?0:s)<<8)&16776960|(255<(h=(r=255&e)+((255&n)-r)*l/i>>0)?255:h<0?0:h)))-16777216|(255<(u=null==(u=i)?255:u)?255:u<0?0:u)<<24)},a0.rgbaBlenderDifference=function(e,n,t){var i=(e>>16&255)-(n>>16&255),l=i<0?-i:i,s=(i=(e>>8&255)-(n>>8&255))<0?-i:i,i=(i=(255&e)-(255&n))<0?-i:i,r=0,a=0,r=(0|(((r&65535|(255<l?255:l<0?0:l)<<16)&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,l=(n=r&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(s=((l=(s=n>>24&255)*t+128)>>8)+l>>8,16777215&n|(s<<=24)):0==(-16777216&n)?e:(l=(n>>24&255)*t+128,s=(i=(l>>8)+l>>8)+(r=e>>24&255)-(((l=r*i+128)>>8)+l>>8),16777215&(0|(((0&65535|(255<(r=(t=e>>16&255)+((n>>16&255)-t)*i/s>>0)?255:r<0?0:r)<<16)&16711935|(255<(t=(l=e>>8&255)+((n>>8&255)-l)*i/s>>0)?255:t<0?0:t)<<8)&16776960|(255<(l=(r=255&e)+((255&n)-r)*i/s>>0)?255:l<0?0:l)))-16777216|(255<(a=null==(a=s)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderExclusion=function(e,n,t){var i=e>>16&255,l=n>>16&255,s=h=0,r=i+l-2*(s=((s=i*l+128)>>8)+s>>8),a=(s=h,(i=e>>8&255)+(l=n>>8&255)-2*(s=((s=i*l+128)>>8)+s>>8)),h=s=h,i=(i=255&e)+(l=255&n)-2*(s=((s=h=i*l+128)>>8)+s>>8),l=0,u=0,l=(0|(((l&65535|(255<r?255:r<0?0:r)<<16)&16711935|(255<a?255:a<0?0:a)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,h=(n=l&16777215|(255<(u=null==u?255:u)?255:u<0?0:u)<<24|-16777216&n,0);return 0==(-16777216&e)?(s=h,r=((h=s=(r=n>>24&255)*t+128)>>8)+h>>8,16777215&n|(r<<=24)):0==(-16777216&n)?e:(s=h,s=h=(n>>24&255)*t+128,l=(a=(h>>8)+h>>8)+(i=e>>24&255)-(((h=s=i*a+128)>>8)+h>>8),16777215&(0|(((0&65535|(255<(t=(r=e>>16&255)+((n>>16&255)-r)*a/l>>0)?255:t<0?0:t)<<16)&16711935|(255<(s=(i=e>>8&255)+((n>>8&255)-i)*a/l>>0)?255:s<0?0:s)<<8)&16776960|(255<(r=(h=255&e)+((255&n)-h)*a/l>>0)?255:r<0?0:r)))-16777216|(255<(u=null==(u=l)?255:u)?255:u<0?0:u)<<24)},a0.lum=function(e,n,t){return.3*e+.59*n+.11*t},a0.sat=function(e,n,t){return Math.max(e,Math.max(n,t))-Math.min(e,Math.min(n,t))},a0.clipColor=function(){var e=.3*a0._float_r+.59*a0._float_g+.11*a0._float_b,n=Math.min(a0._float_r,Math.min(a0._float_g,a0._float_b)),t=Math.max(a0._float_r,Math.max(a0._float_g,a0._float_b));n<0&&(a0._float_r=e+(a0._float_r-e)*e/(e-n),a0._float_g=e+(a0._float_g-e)*e/(e-n),a0._float_b=e+(a0._float_b-e)*e/(e-n)),1<t&&(a0._float_r=e+(a0._float_r-e)*(1-e)/(t-e),a0._float_g=e+(a0._float_g-e)*(1-e)/(t-e),a0._float_b=e+(a0._float_b-e)*(1-e)/(t-e))},a0.setLum=function(e){var n=e-(.3*a0._float_r+.59*a0._float_g+.11*a0._float_b),e=.3*(a0._float_r+=n)+.59*(a0._float_g+=n)+.11*(a0._float_b+=n),n=Math.min(a0._float_r,Math.min(a0._float_g,a0._float_b)),t=Math.max(a0._float_r,Math.max(a0._float_g,a0._float_b));n<0&&(a0._float_r=e+(a0._float_r-e)*e/(e-n),a0._float_g=e+(a0._float_g-e)*e/(e-n),a0._float_b=e+(a0._float_b-e)*e/(e-n)),1<t&&(a0._float_r=e+(a0._float_r-e)*(1-e)/(t-e),a0._float_g=e+(a0._float_g-e)*(1-e)/(t-e),a0._float_b=e+(a0._float_b-e)*(1-e)/(t-e))},a0.setSat=function(e){var n=a0._float_r,t=a0._float_g,i=a0._float_b,l=t<i?t:i,s=n<l?n:l,t=(l=(i=a0._float_b)<(t=a0._float_g)?t:i)<(n=a0._float_r)?n:l;s<t?t=e:t=0},a0.rgbaBlenderHslHue=function(e,n,t){var i=(e>>16&255)/255,l=(e>>8&255)/255,s=(255&e)/255,r=Math.max(i,Math.max(l,s))-Math.min(i,Math.min(l,s)),i=.3*i+.59*l+.11*s,l=(n>>8&255)/255,s=(255&n)/255;a0._float_r=(n>>16&255)/255;var l=a0._float_g=l,s=a0._float_b=s,a=l<s?l:s,h=(u=a0._float_r)<a?u:a,l=(s=a0._float_g,u=a0._float_r,(a=(s=a0._float_b)<(l=a0._float_g)?l:s)<(u=a0._float_r)?u:a),s=(h<l?l=r:l=0,i-(.3*a0._float_r+.59*a0._float_g+.11*a0._float_b)),i=.3*(a0._float_r+=s)+.59*(a0._float_g+=s)+.11*(a0._float_b+=s),a=Math.min(a0._float_r,Math.min(a0._float_g,a0._float_b)),u=Math.max(a0._float_r,Math.max(a0._float_g,a0._float_b)),h=(a<0&&(a0._float_r=i+(a0._float_r-i)*i/(i-a),a0._float_g=i+(a0._float_g-i)*i/(i-a),a0._float_b=i+(a0._float_b-i)*i/(i-a)),1<u&&(a0._float_r=i+(a0._float_r-i)*(1-i)/(u-i),a0._float_g=i+(a0._float_g-i)*(1-i)/(u-i),a0._float_b=i+(a0._float_b-i)*(1-i)/(u-i)),255*a0._float_r|0),r=255*a0._float_g|0,l=255*a0._float_b|0,s=0,a=0,u=(0|(((s&65535|(255<h?255:h<0?0:h)<<16)&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<l?255:l<0?0:l)))-16777216,i=(n=u&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(s=((i=(s=n>>24&255)*t+128)>>8)+i>>8,16777215&n|(s<<=24)):0==(-16777216&n)?e:(i=(n>>24&255)*t+128,l=(h=(i>>8)+i>>8)+(r=e>>24&255)-(((i=r*h+128)>>8)+i>>8),16777215&(0|(((0&65535|(255<(s=(u=e>>16&255)+((n>>16&255)-u)*h/l>>0)?255:s<0?0:s)<<16)&16711935|(255<(r=(t=e>>8&255)+((n>>8&255)-t)*h/l>>0)?255:r<0?0:r)<<8)&16776960|(255<(u=(i=255&e)+((255&n)-i)*h/l>>0)?255:u<0?0:u)))-16777216|(255<(a=null==(a=l)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderHslSaturation=function(e,n,t){var i=(n>>16&255)/255,l=(n>>8&255)/255,s=(255&n)/255,r=Math.max(i,Math.max(l,s))-Math.min(i,Math.min(l,s)),a=.3*(i=(e>>16&255)/255)+.59*(l=(e>>8&255)/255)+.11*(s=(255&e)/255),i=a0._float_r=i,l=a0._float_g=l,s=a0._float_b=s,h=l<s?l:s,u=i<h?i:h,l=(s=a0._float_g,i=a0._float_r,(h=(s=a0._float_b)<(l=a0._float_g)?l:s)<(i=a0._float_r)?i:h),s=(u<l?l=r:l=0,a-(.3*a0._float_r+.59*a0._float_g+.11*a0._float_b)),a=.3*(a0._float_r+=s)+.59*(a0._float_g+=s)+.11*(a0._float_b+=s),h=Math.min(a0._float_r,Math.min(a0._float_g,a0._float_b)),i=Math.max(a0._float_r,Math.max(a0._float_g,a0._float_b)),u=(h<0&&(a0._float_r=a+(a0._float_r-a)*a/(a-h),a0._float_g=a+(a0._float_g-a)*a/(a-h),a0._float_b=a+(a0._float_b-a)*a/(a-h)),1<i&&(a0._float_r=a+(a0._float_r-a)*(1-a)/(i-a),a0._float_g=a+(a0._float_g-a)*(1-a)/(i-a),a0._float_b=a+(a0._float_b-a)*(1-a)/(i-a)),255*a0._float_r|0),r=255*a0._float_g|0,l=255*a0._float_b|0,s=0,h=0,i=(0|(((s&65535|(255<u?255:u<0?0:u)<<16)&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<l?255:l<0?0:l)))-16777216,a=(n=i&16777215|(255<(h=null==h?255:h)?255:h<0?0:h)<<24|-16777216&n,0);return 0==(-16777216&e)?(s=((a=(s=n>>24&255)*t+128)>>8)+a>>8,16777215&n|(s<<=24)):0==(-16777216&n)?e:(a=(n>>24&255)*t+128,l=(u=(a>>8)+a>>8)+(r=e>>24&255)-(((a=r*u+128)>>8)+a>>8),16777215&(0|(((0&65535|(255<(s=(i=e>>16&255)+((n>>16&255)-i)*u/l>>0)?255:s<0?0:s)<<16)&16711935|(255<(r=(t=e>>8&255)+((n>>8&255)-t)*u/l>>0)?255:r<0?0:r)<<8)&16776960|(255<(i=(a=255&e)+((255&n)-a)*u/l>>0)?255:i<0?0:i)))-16777216|(255<(h=null==(h=l)?255:h)?255:h<0?0:h)<<24)},a0.rgbaBlenderHslColor=function(e,n,t){var i=.3*((e>>16&255)/255)+.59*((e>>8&255)/255)+.11*((255&e)/255),l=(n>>8&255)/255,s=(255&n)/255,l=i-(.3*(a0._float_r=(n>>16&255)/255)+.59*(a0._float_g=l)+.11*(a0._float_b=s)),i=.3*(a0._float_r+=l)+.59*(a0._float_g+=l)+.11*(a0._float_b+=l),s=Math.min(a0._float_r,Math.min(a0._float_g,a0._float_b)),l=Math.max(a0._float_r,Math.max(a0._float_g,a0._float_b)),s=(s<0&&(a0._float_r=i+(a0._float_r-i)*i/(i-s),a0._float_g=i+(a0._float_g-i)*i/(i-s),a0._float_b=i+(a0._float_b-i)*i/(i-s)),1<l&&(a0._float_r=i+(a0._float_r-i)*(1-i)/(l-i),a0._float_g=i+(a0._float_g-i)*(1-i)/(l-i),a0._float_b=i+(a0._float_b-i)*(1-i)/(l-i)),255*a0._float_r|0),l=255*a0._float_g|0,i=255*a0._float_b|0,r=0,a=0,r=(0|(((r&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<l?255:l<0?0:l)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,s=(n=r&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(l=((s=(l=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(l<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,l=(i=(s>>8)+s>>8)+(r=e>>24&255)-(((s=r*i+128)>>8)+s>>8),16777215&(0|(((0&65535|(255<(r=(t=e>>16&255)+((n>>16&255)-t)*i/l>>0)?255:r<0?0:r)<<16)&16711935|(255<(t=(s=e>>8&255)+((n>>8&255)-s)*i/l>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(r=255&e)+((255&n)-r)*i/l>>0)?255:s<0?0:s)))-16777216|(255<(a=null==(a=l)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderHslLuminosity=function(e,n,t){var i=.3*((n>>16&255)/255)+.59*((n>>8&255)/255)+.11*((255&n)/255),l=(e>>8&255)/255,s=(255&e)/255,l=i-(.3*(a0._float_r=(e>>16&255)/255)+.59*(a0._float_g=l)+.11*(a0._float_b=s)),i=.3*(a0._float_r+=l)+.59*(a0._float_g+=l)+.11*(a0._float_b+=l),s=Math.min(a0._float_r,Math.min(a0._float_g,a0._float_b)),l=Math.max(a0._float_r,Math.max(a0._float_g,a0._float_b)),s=(s<0&&(a0._float_r=i+(a0._float_r-i)*i/(i-s),a0._float_g=i+(a0._float_g-i)*i/(i-s),a0._float_b=i+(a0._float_b-i)*i/(i-s)),1<l&&(a0._float_r=i+(a0._float_r-i)*(1-i)/(l-i),a0._float_g=i+(a0._float_g-i)*(1-i)/(l-i),a0._float_b=i+(a0._float_b-i)*(1-i)/(l-i)),255*a0._float_r|0),l=255*a0._float_g|0,i=255*a0._float_b|0,r=0,a=0,r=(0|(((r&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<l?255:l<0?0:l)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,s=(n=r&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(l=((s=(l=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(l<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,l=(i=(s>>8)+s>>8)+(r=e>>24&255)-(((s=r*i+128)>>8)+s>>8),16777215&(0|(((0&65535|(255<(r=(t=e>>16&255)+((n>>16&255)-t)*i/l>>0)?255:r<0?0:r)<<16)&16711935|(255<(t=(s=e>>8&255)+((n>>8&255)-s)*i/l>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(r=255&e)+((255&n)-r)*i/l>>0)?255:s<0?0:s)))-16777216|(255<(a=null==(a=l)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderAddition=function(e,n,t){var i=(e>>16&255)+(n>>16&255),l=(e>>8&255)+(n>>8&255),s=(255&e)+(255&n),i=i<255?i:255,l=l<255?l:255,s=s<255?s:255,r=0,a=0,r=(0|(((r&65535|(255<i?255:i<0?0:i)<<16)&16711935|(255<l?255:l<0?0:l)<<8)&16776960|(255<s?255:s<0?0:s)))-16777216,i=(n=r&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(l=((i=(l=n>>24&255)*t+128)>>8)+i>>8,16777215&n|(l<<=24)):0==(-16777216&n)?e:(i=(n>>24&255)*t+128,l=(s=(i>>8)+i>>8)+(r=e>>24&255)-(((i=r*s+128)>>8)+i>>8),16777215&(0|(((0&65535|(255<(r=(t=e>>16&255)+((n>>16&255)-t)*s/l>>0)?255:r<0?0:r)<<16)&16711935|(255<(t=(i=e>>8&255)+((n>>8&255)-i)*s/l>>0)?255:t<0?0:t)<<8)&16776960|(255<(i=(r=255&e)+((255&n)-r)*s/l>>0)?255:i<0?0:i)))-16777216|(255<(a=null==(a=l)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderSubtract=function(e,n,t){var i=(e>>16&255)-(n>>16&255),l=(e>>8&255)-(n>>8&255),s=(255&e)-(255&n),i=0<i?i:0,l=0<l?l:0,s=0<s?s:0,r=0,a=0,r=(0|(((r&65535|(255<i?255:i<0?0:i)<<16)&16711935|(255<l?255:l<0?0:l)<<8)&16776960|(255<s?255:s<0?0:s)))-16777216,i=(n=r&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(l=((i=(l=n>>24&255)*t+128)>>8)+i>>8,16777215&n|(l<<=24)):0==(-16777216&n)?e:(i=(n>>24&255)*t+128,l=(s=(i>>8)+i>>8)+(r=e>>24&255)-(((i=r*s+128)>>8)+i>>8),16777215&(0|(((0&65535|(255<(r=(t=e>>16&255)+((n>>16&255)-t)*s/l>>0)?255:r<0?0:r)<<16)&16711935|(255<(t=(i=e>>8&255)+((n>>8&255)-i)*s/l>>0)?255:t<0?0:t)<<8)&16776960|(255<(i=(r=255&e)+((255&n)-r)*s/l>>0)?255:i<0?0:i)))-16777216|(255<(a=null==(a=l)?255:a)?255:a<0?0:a)<<24)},a0.rgbaBlenderDivide=function(e,n,t){var i=e>>16&255,l=n>>16&255,s=0==i?0:l<=i?255:(255*i+(l/2>>0))/l,l=n>>8&255,r=0==(i=e>>8&255)?0:l<=i?255:(255*i+(l/2>>0))/l,l=255&n,i=0==(i=255&e)?0:l<=i?255:(255*i+(l/2>>0))/l,l=0,a=0,l=(0|(((l&65535|(255<s?255:s<0?0:s)<<16)&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<i?255:i<0?0:i)))-16777216,s=(n=l&16777215|(255<(a=null==a?255:a)?255:a<0?0:a)<<24|-16777216&n,0);return 0==(-16777216&e)?(r=((s=(r=n>>24&255)*t+128)>>8)+s>>8,16777215&n|(r<<=24)):0==(-16777216&n)?e:(s=(n>>24&255)*t+128,r=(i=(s>>8)+s>>8)+(l=e>>24&255)-(((s=l*i+128)>>8)+s>>8),16777215&(0|(((0&65535|(255<(l=(t=e>>16&255)+((n>>16&255)-t)*i/r>>0)?255:l<0?0:l)<<16)&16711935|(255<(t=(s=e>>8&255)+((n>>8&255)-s)*i/r>>0)?255:t<0?0:t)<<8)&16776960|(255<(s=(l=255&e)+((255&n)-l)*i/r>>0)?255:s<0?0:s)))-16777216|(255<(a=null==(a=r)?255:a)?255:a<0?0:a)<<24)},(L["ceramic.AsepriteData"]=b0).__name__="ceramic.AsepriteData",b0.__super__=l,b0.prototype=$extend(l.prototype,{ase:null,palette:null,tags:null,slices:null,layers:null,duration:null,prefix:null,frames:null,atlasPacker:null,get_atlas:function(){return null!=this.atlasPacker?this.atlasPacker.atlas:null},imageAsset:null,destroy:function(){var e;this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.atlasPacker&&null!=this.prefix&&this.atlasPacker.removeRegionsWithPrefix(null,this.prefix+"#"),null!=this.imageAsset&&(e=this.imageAsset,this.imageAsset=null,e.destroy()),this._lifecycleState=-1,l.prototype.destroy.call(this))},__class__:b0,__properties__:$extend(l.prototype.__properties__,{get_atlas:"get_atlas"})}),(L["ceramic.AsepriteFrame"]=c0).__name__="ceramic.AsepriteFrame",c0.prototype={aseFrame:null,index:null,duration:null,tags:null,pixels:null,hash:null,hashIndex:null,duplicateOfIndex:null,duplicateSameOffset:null,offsetX:null,offsetY:null,packedWidth:null,packedHeight:null,__class__:c0},(L["ceramic.AsepriteFrameLayer"]=d0).__name__="ceramic.AsepriteFrameLayer",d0.prototype={layer:null,celChunk:null,pixels:null,__class__:d0},(L["ceramic.AsepritePalette"]=e0).__name__="ceramic.AsepritePalette",e0.fromChunk=function(e){for(var n=new rn,t=new kl(new ArrayBuffer(4)),i=e.entries.keys();i.hasNext();){var l=i.next(),s=e.entries.h[l];t.b[0]=s.red,t.b[1]=s.green,t.b[2]=s.blue,t.b[3]=s.alpha,n.set(l,t.getInt32(0))}return new e0(n,e)},e0.prototype={entries:null,chunk:null,__class__:e0},(L["ceramic.AsepriteParser"]=f0).__name__="ceramic.AsepriteParser",f0.parseAse=function(e,n,t,i,l,s){null==l&&(l=!0),null==i&&(i=-1);for(var r=null,a=new z,h=new z,u=[],c=0,o=[],_=null!=s?s.layers:null,P=kl.ofHex("BFC5Ef3C3658436E836E89DA70186280"),B=new Bl(Pl.SHA1),L=0,d=0,b=(C=e.frames[0]).chunks.length;d<b;){var N=d++,g=C.chunks[N];switch(g.header.type){case 8196:u.push(g);break;case 8216:for(var O=0,f=g.tags;O<f.length;){var p=f[O],m=(++O,$e.fromChunk(p));if(Object.prototype.hasOwnProperty.call(a.h,m.name)){for(var w=1,v=m.name+"_"+w;Object.prototype.hasOwnProperty.call(a.h,v);)++w,v=m.name+"_"+w;he.app.logger.warning('Duplicate "'+m.name+'" tag. Rename it to "'+v+'"',{fileName:"../../../../ceramic/plugins/ase/runtime/src/ceramic/AsepriteParser.hx",lineNumber:60,className:"ceramic.AsepriteParser",methodName:"parseAse"}),a.h[v]=m}else a.h[p.tagName]=m}break;case 8217:r=e0.fromChunk(g);break;case 8226:h.h[g.name]=g}}for(d=0,b=e.frames.length;d<b;){var y=d++;if(0<=i&&i<y)break;var C=e.frames[y];c+=(I=new c0(C,y,C.header.duration/1e3,null,null,null,null,null,null,null,null,null,null)).duration,o.push(I)}for(var s=a.h,W=s,U=Object.keys(s),G=U.length,x=0;x<G;)for(d=(m=W[U[x++]]).fromFrame,b=m.toFrame+1;d<b;){var T=d++;if(0<=i&&i<T)break;o[T].tags.push(m.name)}for(var H=[],d=0,b=o.length;d<b;){y=d++;if(0<=i&&i<y)break;for(var D,A,S,E,M,k,I=o[y],O=(f0.parseAseFramePixels(e,r,u,I,H,_),I.hash=B.make(P,new kl(new Uint8Array(I.pixels.buffer))),0),f=y;O<f;){var R=O++,F=o[R];if(F.duplicateOfIndex<0&&I.packedWidth==F.packedWidth&&I.packedHeight==F.packedHeight&&0==I.hash.compare(F.hash)&&0==new kl(new Uint8Array(I.pixels.buffer)).compare(new kl(new Uint8Array(F.pixels.buffer)))){I.hashIndex=F.hashIndex,I.duplicateOfIndex=R,I.duplicateSameOffset=I.offsetX==F.offsetX&&I.offsetY==F.offsetY;break}}I.duplicateOfIndex<0?(I.hashIndex=L++,null!=t&&(A=I.pixels,S=e.get_width(),E=e.get_height(),M=I.packedHeight,k=I.offsetX,null==(D=I.offsetY)&&(D=0),null==k&&(k=0),null==M&&(M=-1),t._addRegionFromPixels(n+"#"+y,A,S,E,I.packedWidth,M,k,D))):I.duplicateSameOffset||null!=t&&(A=n+"#"+I.duplicateOfIndex,S=e.get_width(),E=e.get_height(),M=I.offsetX,null==(k=I.offsetY)&&(k=0),null==M&&(M=0),t._addVariantRegion(n+"#"+y,A,S,E,M,k))}if(l)for(d=0,b=o.length;d<b;){T=d++;It.premultiplyAlpha(o[T].pixels)}return new b0(e,r,a,h,u,c,n,o,t,null)},f0.parseTextureFromAsepriteData=function(e,n,t){null==t&&(t=1);n=e.frames[n];if(null!=n){for(var i,l=n;0<=l.duplicateOfIndex;)l=e.frames[l.duplicateOfIndex];if(null!=l.pixels)return l.packedWidth==e.ase.get_width()&&l.packedHeight==e.ase.get_height()&&0==n.offsetX&&0==n.offsetY?Rt.fromPixels(e.ase.get_width(),e.ase.get_height(),l.pixels,t):(i=Mt.create(e.ase.get_width(),e.ase.get_height(),0),Mt.copy(l.pixels,l.packedWidth,i,e.ase.get_width(),0,0,l.packedWidth,l.packedHeight,n.offsetX,n.offsetY),Rt.fromPixels(e.ase.get_width(),e.ase.get_height(),i,t))}return null},f0.parseGridTextureFromAsepriteData=function(e,n,t,i,l,s,r,a){if(null==a&&(a=1),null==r&&(r=0),null==s&&(s=0),e.ase.get_width()+r>i||e.ase.get_height()+r>l)throw Q.thrown("Cannot create grid texture of size "+i+" x "+l+" because ase frame size ("+(e.ase.get_width()+r)+" x "+(e.ase.get_height()+r)+") won't fit");for(var h=Mt.create(i,l,0),u=r,c=r,o=n,_=t+1;o<_;){var d=o++,d=e.frames[d];if(null!=d){for(var b=d;0<=b.duplicateOfIndex;)b=e.frames[b.duplicateOfIndex];null!=b.pixels&&(b.packedWidth==e.ase.get_width()&&b.packedHeight==e.ase.get_height()&&0==d.offsetX&&0==d.offsetY?Mt.copy(b.pixels,b.packedWidth,h,i,0,0,b.packedWidth,b.packedHeight,u,c):Mt.copy(b.pixels,b.packedWidth,h,i,0,0,b.packedWidth,b.packedHeight,u+d.offsetX,c+d.offsetY))}if((u+=e.ase.get_width()+s)+e.ase.get_width()>i&&(u=r,(c+=e.ase.get_height()+s)+e.ase.get_height()>l))break}return Rt.fromPixels(i,l,h,a)},f0.parseAseFramePixels=function(e,n,t,i,l,s){e.get_width(),e.get_height();for(var r,a,h=e.get_width(),u=e.get_height(),c=0,o=0,_=[],d=0,b=t.length;d<b;){var g=d++;_.push(new d0(t[g],null,null))}l.push(_);for(var O=i.aseFrame,d=0,b=O.chunks.length;d<b;){var f=d++,f=O.chunks[f];8197==f.header.type&&(p=null,1==(f=f).celType?((p=_[f.layerIndex]).celChunk=l[f.linkedFrame][f.layerIndex].celChunk,p.pixels=l[f.linkedFrame][f.layerIndex].pixels):((p=_[f.layerIndex]).celChunk=f,p.pixels=f0.parseAseCelPixels(e,n,f)),null!=p&&null==s&&1==(1&p.layer.flags)||null!=s&&-1!=s.indexOf(p.layer.name))&&((m=p.celChunk).xPosition<h&&(h=m.xPosition),m.yPosition<u&&(u=m.yPosition),m.xPosition+m.width>c&&(c=m.xPosition+m.width),m.yPosition+m.height>o)&&(o=m.yPosition+m.height)}h<0&&(h=0),u<0&&(u=0),c>e.get_width()&&(c=e.get_width()),o>e.get_height()&&(o=e.get_height()),i.pixels=Mt.create(r=c-h,a=o-u,0),i.offsetX=h,i.offsetY=u,i.packedWidth=r,i.packedHeight=a;for(var p,m,w,v,y,C,U,x,g=0;g<_.length;)(null!=(p=_[g]).pixels&&null==s&&1==(1&p.layer.flags)||null!=s&&-1!=s.indexOf(p.layer.name))&&null!=(m=p.celChunk)&&(y=m.xPosition-h,C=m.yPosition-u,U=m.width,x=m.height,y<(v=w=0)&&(w-=y,U+=y,y=0),C<0&&(v-=C,x+=C,C=0),a<C+x&&(x=a-C),0<(U=r<y+U?r-y:U))&&0<x&&f0.blendAseFrameLayerPixels(p.pixels,m.width,i.pixels,r,w,v,U,x,y,C,p.layer.blendMode,p.layer.opacity),++g},f0.blendAseFrameLayerPixels=function(e,n,t,i,l,s,r,a,h,u,c,o){switch(c){case 0:f0.blendAseFrameLayerPixelsNormal(e,n,t,i,l,s,r,a,h,u,o);break;case 1:f0.blendAseFrameLayerPixelsMultiply(e,n,t,i,l,s,r,a,h,u,o);break;case 2:f0.blendAseFrameLayerPixelsScreen(e,n,t,i,l,s,r,a,h,u,o);break;case 3:f0.blendAseFrameLayerPixelsOverlay(e,n,t,i,l,s,r,a,h,u,o);break;case 4:f0.blendAseFrameLayerPixelsDarken(e,n,t,i,l,s,r,a,h,u,o);break;case 5:f0.blendAseFrameLayerPixelsLighten(e,n,t,i,l,s,r,a,h,u,o);break;case 6:f0.blendAseFrameLayerPixelsColorDodge(e,n,t,i,l,s,r,a,h,u,o);break;case 7:f0.blendAseFrameLayerPixelsColorBurn(e,n,t,i,l,s,r,a,h,u,o);break;case 8:f0.blendAseFrameLayerPixelsHardLight(e,n,t,i,l,s,r,a,h,u,o);break;case 9:f0.blendAseFrameLayerPixelsSoftLight(e,n,t,i,l,s,r,a,h,u,o);break;case 10:f0.blendAseFrameLayerPixelsDifference(e,n,t,i,l,s,r,a,h,u,o);break;case 11:f0.blendAseFrameLayerPixelsExclusion(e,n,t,i,l,s,r,a,h,u,o);break;case 12:f0.blendAseFrameLayerPixelsHue(e,n,t,i,l,s,r,a,h,u,o);break;case 13:f0.blendAseFrameLayerPixelsSaturation(e,n,t,i,l,s,r,a,h,u,o);break;case 14:f0.blendAseFrameLayerPixelsColor(e,n,t,i,l,s,r,a,h,u,o);break;case 15:f0.blendAseFrameLayerPixelsLuminosity(e,n,t,i,l,s,r,a,h,u,o);break;case 16:f0.blendAseFrameLayerPixelsAddition(e,n,t,i,l,s,r,a,h,u,o);break;case 17:f0.blendAseFrameLayerPixelsSubtract(e,n,t,i,l,s,r,a,h,u,o);break;case 18:f0.blendAseFrameLayerPixelsDivide(e,n,t,i,l,s,r,a,h,u,o)}},f0.blendAseFrameLayerPixelsNormal=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderNormal(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsMultiply=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderMultiply(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsScreen=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderScreen(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsOverlay=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderOverlay(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsDarken=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderDarken(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsLighten=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderLighten(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsColorDodge=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderColorDodge(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsColorBurn=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderColorBurn(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsHardLight=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderHardLight(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsSoftLight=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderSoftLight(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsDifference=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderDifference(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsExclusion=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderExclusion(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsHue=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderHslHue(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsSaturation=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderHslSaturation(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsColor=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderHslColor(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsLuminosity=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderHslLuminosity(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsAddition=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderAddition(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsSubtract=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderSubtract(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.blendAseFrameLayerPixelsDivide=function(e,n,t,i,l,s,r,a,h,u,c){for(var o=l+r,_=s+a,d=l,b=s,g=h,O=u;b<_;){for(var f=b*n,p=O*i;d<o;){var m=4*(f+d),w=4*(p+g),v=e[m],y=e[1+m],C=e[2+m],U=0,v=(U=(U=(U=U&65535|(255<v?255:v<0?0:v)<<16)&16711935|(255<y?255:y<0?0:y)<<8)&16776960|(255<C?255:C<0?0:C),e[3+m]),y=(0|U)-16777216,C=(y=y&16777215|(255<(v=null==v?255:v)?255:v<0?0:v)<<24,t[w]),m=t[1+w],U=t[2+w],v=0,C=(v=(v=(v=v&65535|(255<C?255:C<0?0:C)<<16)&16711935|(255<m?255:m<0?0:m)<<8)&16776960|(255<U?255:U<0?0:U),t[3+w]),m=(0|v)-16777216,U=(m=m&16777215|(255<(C=null==C?255:C)?255:C<0?0:C)<<24,a0.rgbaBlenderDivide(m,y,c));t[w]=U>>16&255,t[1+w]=U>>8&255,t[2+w]=255&U,t[3+w]=U>>24&255,++d,++g}++b,++O,d=l,g=h}},f0.parseAseCelPixels=function(e,n,t){if(32==e.header.colorDepth)return Mt.fromBytes(t.rawData);var i=new $l(t.rawData),l=new Ql;switch(e.header.colorDepth){case 8:for(var s=e.header.paletteEntry,r=0,a=t.height;r<a;){r++;for(var h=0,u=t.width;h<u;){h++;var c=i.readByte();c!=s&&n.entries.intMap.h.hasOwnProperty(0|c)?(c=n.entries.intMap.h[0|c],l.addInt32(null!=c?c:0)):l.addInt32(0)}}break;case 16:for(var o=new kl(new ArrayBuffer(4)),r=0,a=t.height;r<a;){r++;for(h=0,u=t.width;h<u;){h++;var _=i.read(2),d=_.b[0];o.b[0]=d,o.b[1]=d,o.b[2]=d,o.b[3]=_.b[1],l.addInt32(o.getInt32(0))}}}return i.close(),Mt.fromBytes(l.getBytes())},function(e,n,t,i){this.name=e,this.fromFrame=n,this.toFrame=t,this.direction=i}),Ze=((L["ceramic.AsepriteTag"]=$e).__name__="ceramic.AsepriteTag",$e.fromChunk=function(e){return new $e(e.tagName,e.fromFrame,e.toFrame,e.animDirection)},$e.prototype={name:null,fromFrame:null,toFrame:null,direction:null,__class__:$e},(L["ceramic.Assert"]=h0).__name__="ceramic.Assert",(L["ceramic.Asset"]=i0).__name__="ceramic.Asset",i0.__interfaces__=[u],i0.__super__=l,i0.prototype=$extend(l.prototype,{__cbOnObservedDirty:null,__cbOnceObservedDirty:null,__cbOnOwnerUnbindObservedDirty:null,__cbOnceOwnerUnbindObservedDirty:null,emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnObservedDirty)for(var r=0,a=this.__cbOnObservedDirty.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnObservedDirty[h],++s):--t}if(null!=this.__cbOnceObservedDirty){for(var u=null,c=null,r=0,a=this.__cbOnceObservedDirty.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,o=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindObservedDirty[h]),c.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=u,this.__cbOnceObservedDirty=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindObservedDirty[n])&&s(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindObservedDirty[n])&&s(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindObservedDirty[l])&&s()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindObservedDirty[l])&&s()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},observedDirty:null,__cbOnComplete:null,__cbOnceComplete:null,__cbOnOwnerUnbindComplete:null,__cbOnceOwnerUnbindComplete:null,emitComplete:function(e){e&&null!=this.owner&&this.owner.emitUpdate(this);var n=0;if(null!=this.__cbOnComplete&&(n+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(n+=this.__cbOnceComplete.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnComplete)for(var s=0,r=this.__cbOnComplete.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnComplete[a],++l):--n}if(null!=this.__cbOnceComplete){for(var h=null,u=null,s=0,r=this.__cbOnceComplete.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceComplete[a],this.__cbOnceComplete[a]=null,c=this.__cbOnceOwnerUnbindComplete[a],(this.__cbOnceOwnerUnbindComplete[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindComplete[a]),u.push(this.__cbOnceComplete[a]))}this.__cbOnceOwnerUnbindComplete=h,this.__cbOnceComplete=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event complete because owner is destroyed!");var l=function(e){null!=t&&(i.offComplete(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(t)},onceComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event complete because owner is destroyed!");var l=function(e){null!=t&&(i.offComplete(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(t)},offComplete:function(e){if(null!=e){var n;null!=this.__cbOnComplete&&-1!=(n=this.__cbOnComplete.indexOf(e))&&(this.__cbOnComplete.splice(n,1),null!=(s=this.__cbOnOwnerUnbindComplete[n])&&s(),this.__cbOnOwnerUnbindComplete.splice(n,1)),null!=this.__cbOnceComplete&&-1!=(n=this.__cbOnceComplete.indexOf(e))&&(this.__cbOnceComplete.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindComplete[n])&&s(),this.__cbOnceOwnerUnbindComplete.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindComplete[l])&&s()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindComplete[l])&&s()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&0<this.__cbOnComplete.length||null!=this.__cbOnceComplete&&0<this.__cbOnceComplete.length},kind:null,name:null,variant:null,fullName:null,path:null,allPaths:null,density:null,owner:null,runtimeAssets:null,options:null,assets:null,refCount:null,statusAutoruns:null,get_status:function(){var e,n,t=this.unobservedStatus;return null!=M.current&&(e=M.current,null!=(n=this.statusAutoruns)||(n=M.getAutorunArray(),null!=(this.statusAutoruns=n)))&&e.bindToAutorunArray(n),t},set_status:function(e){var n=this.unobservedStatus;return n!=(this.unobservedStatus=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitStatusChange(e,n),null!=(n=this.statusAutoruns))&&(this.statusAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateStatus:function(){var e=this.unobservedStatus,e=(this.emitStatusChange(e,e),this.statusAutoruns);null!=e&&(this.statusAutoruns=null,M.invalidateAutorunArray(e))},unobservedStatus:null,__cbOnStatusChange:null,__cbOnceStatusChange:null,__cbOnOwnerUnbindStatusChange:null,__cbOnceOwnerUnbindStatusChange:null,emitStatusChange:function(e,n){var t=0;if(null!=this.__cbOnStatusChange&&(t+=this.__cbOnStatusChange.length),null!=this.__cbOnceStatusChange&&(t+=this.__cbOnceStatusChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnStatusChange)for(var r=0,a=this.__cbOnStatusChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnStatusChange[h],++s):--t}if(null!=this.__cbOnceStatusChange){for(var u=null,c=null,r=0,a=this.__cbOnceStatusChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceStatusChange[h],this.__cbOnceStatusChange[h]=null,o=this.__cbOnceOwnerUnbindStatusChange[h],(this.__cbOnceOwnerUnbindStatusChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindStatusChange[h]),c.push(this.__cbOnceStatusChange[h]))}this.__cbOnceOwnerUnbindStatusChange=u,this.__cbOnceStatusChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event statusChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStatusChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(null);null==this.__cbOnStatusChange&&(this.__cbOnStatusChange=[]),this.__cbOnStatusChange.push(t)},onceStatusChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event statusChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStatusChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(null);null==this.__cbOnceStatusChange&&(this.__cbOnceStatusChange=[]),this.__cbOnceStatusChange.push(t)},offStatusChange:function(e){if(null!=e){var n;null!=this.__cbOnStatusChange&&-1!=(n=this.__cbOnStatusChange.indexOf(e))&&(this.__cbOnStatusChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindStatusChange[n])&&s(),this.__cbOnOwnerUnbindStatusChange.splice(n,1)),null!=this.__cbOnceStatusChange&&-1!=(n=this.__cbOnceStatusChange.indexOf(e))&&(this.__cbOnceStatusChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindStatusChange[n])&&s(),this.__cbOnceOwnerUnbindStatusChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStatusChange){for(var t=0,i=this.__cbOnOwnerUnbindStatusChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindStatusChange[l])&&s()}this.__cbOnOwnerUnbindStatusChange=null}if(null!=this.__cbOnceOwnerUnbindStatusChange){for(t=0,i=this.__cbOnceOwnerUnbindStatusChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindStatusChange[l])&&s()}this.__cbOnceOwnerUnbindStatusChange=null}this.__cbOnStatusChange=null,this.__cbOnceStatusChange=null}},listensStatusChange:function(){return null!=this.__cbOnStatusChange&&0<this.__cbOnStatusChange.length||null!=this.__cbOnceStatusChange&&0<this.__cbOnceStatusChange.length},handleTexturesDensityChange:null,hotReload:null,customExtensions:null,load:function(){this.set_status(Je.BROKEN),he.app.logger.error("This asset as no load implementation.",{fileName:"../../../../ceramic/runtime/src/ceramic/Asset.hx",lineNumber:108,className:"ceramic.Asset",methodName:"load"}),this.emitComplete(!1)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),null!=this.owner&&(this.owner.removeAsset(this),this.owner=null),null!=this.assets&&(this.assets.destroy(),this.assets=null))},computePath:function(e,n,t){if(null==t&&null!=this.runtimeAssets&&(t=this.runtimeAssets),null==e)switch(this.kind){case"atlas":e=["atlas"];break;case"database":e=["csv"];break;case"font":e=["fnt","ttf","otf"];break;case"fragments":e=["fragments"];break;case"image":e=["png","jpg","jpeg"].concat(["ase","aseprite"]);break;case"shader":e=["frag","vert"];break;case"sound":var i,l,s,r;he.app.backend.info;e=(null!=We._soundExtensions||(We._soundExtensions=[],i=new Audio,l=null!=ie.navigator?ie.navigator.userAgent:"",r=We.RE_OPERA.match(l)&&parseInt(We.RE_OPERA.matched(0).split("/")[1],10)<33,s=-1!=l.indexOf("Safari")&&-1==l.indexOf("Chrome"),l=We.RE_SAFARI_VERSION.match(l),s&&l&&parseInt(We.RE_SAFARI_VERSION.matched(1),10),null!=(s=i.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=s&&""!=s&&We._soundExtensions.push("ogg"),l=i.canPlayType("audio/mpeg;"),s=i.canPlayType("audio/mp3;"),!r&&(null!=l&&"no"!=l&&""!=l||null!=s&&"no"!=s&&""!=s)&&We._soundExtensions.push("mp3"),r=i.canPlayType("audio/x-flac;"),l=i.canPlayType("audio/flac;"),(null!=r&&"no"!=r&&""!=r||null!=l&&"no"!=l&&""!=l)&&We._soundExtensions.push("flac"),s=i.canPlayType('audio/wav; codecs="1"'),r=i.canPlayType("audio/wav;"),(null!=s&&"no"!=s&&""!=s||null!=r&&"no"!=r&&""!=r)&&We._soundExtensions.push("wav")),[].concat(We._soundExtensions));break;case"text":e=["txt","json","fnt","atlas"];break;default:e=null}null!=e&&null!=n||Object.prototype.hasOwnProperty.call(Re.customAssetKinds.h,this.kind)&&(_=Re.customAssetKinds.h[this.kind],null==e&&(e=_.extensions),null==n)&&(n=_.dir),null==e&&(e=[]),null!=this.customExtensions&&(e=e.concat(this.customExtensions)),null==n&&(n=!1);var a=he.app.screen.get_texturesDensity(),u=null,c=[],o=null,_=n?(null!=t?t.getLists():Re).allDirsByName:(null!=t?t.getLists():Re).allByName,d=this.name;if(null==u&&null!=d&&At.isAbsolute(d)&&(u=d),0<e.length){for(var b=0;b<e.length;){var g=e[b];if(++b,B.endsWith(d,"."+g)){d=h.substr(d,0,d.length-g.length-1);break}}var O=!1;if(Object.prototype.hasOwnProperty.call(_.h,d))for(var f=_.h[d],b=0;b<e.length;){for(var g=e[b],p=(++b,99999999999),m=0;m<f.length;){var w,v=f[m],v=(++m,Re.decodePath(v));v.extension==g&&(O||(w=Math.abs(a-v.density))<p&&(p=w,v.density,u=v.path,o=v),c.push(v.path))}null!=u&&(O=!0)}}if(null==u&&(u=d),this.allPaths=c,this.set_path(u),null!=o&&null!=o.flags)for(var n=o.flags.h,y=Object.keys(n),C=y.length,U=0;U<C;){var x=y[U++];Object.prototype.hasOwnProperty.call(this.options,x)||(this.options[x]=o.flags.h[x])}},set_path:function(e){return this.path!=e&&(this.get_status()==Je.READY&&this.set_status(Je.NONE),this.path=e,this.density=null==e?1:Re.decodePath(e).density),e},set_name:function(e){return this.name!=e&&(this.name=e,this.fullName=null!=this.variant?e+":"+this.variant:e,this.id="asset:"+this.kind+":"+this.fullName),e},set_variant:function(e){return this.variant==e?e:(this.variant=e,this.fullName=null!=e?this.name+":"+e:this.name,this.id="asset:"+this.kind+":"+this.fullName,this.name)},set_runtimeAssets:function(e){return this.runtimeAssets!=e&&(this.runtimeAssets=e,this.computePath()),e},set_handleTexturesDensityChange:function(e){return this.handleTexturesDensityChange!=e&&((this.handleTexturesDensityChange=e)?he.app.screen.onTexturesDensityChange(this,$bind(this,this.texturesDensityDidChange)):he.app.screen.offTexturesDensityChange($bind(this,this.texturesDensityDidChange))),e},texturesDensityDidChange:function(e,n){},set_hotReload:function(e){return this.hotReload!=e&&((this.hotReload=e)?this.owner.onAssetFilesChange(this,$bind(this,this.assetFilesDidChange)):this.owner.offAssetFilesChange($bind(this,this.assetFilesDidChange))),e},assetFilesDidChange:function(e,n){},toString:function(){var e=this.className();return null!=this.path&&""!=B.trim(this.path)?e+"("+this.fullName+" "+this.path+")":e+"("+this.fullName+")"},willEmitComplete:function(e){e&&null!=this.owner&&this.owner.emitUpdate(this)},retain:function(){this.refCount++},release:function(){0==this.refCount?he.app.logger.warning("Called release() on asset "+V.string(this)+" when its refCount is already 0 (destroyed="+V.string(this._lifecycleState<0)+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Asset.hx",lineNumber:400,className:"ceramic.Asset",methodName:"release"}):this.refCount--},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offStatusChange(),this.offComplete()},__class__:i0,__properties__:$extend(l.prototype.__properties__,{set_hotReload:"set_hotReload",set_handleTexturesDensityChange:"set_handleTexturesDensityChange",set_status:"set_status",get_status:"get_status",set_runtimeAssets:"set_runtimeAssets",set_path:"set_path",set_variant:"set_variant",set_name:"set_name"})}),function(e){var n=(this.path=e).lastIndexOf("."),t=(this.extension=h.substr(e,n+1,null).toLowerCase(),h.substr(e,0,n)),i=t.lastIndexOf("@");if(-(this.density=1)==i)i=n;else for(var l=0,s=h.substr(t,i+1,null).split("+");l<s.length;){var r,a=s[l],u=(++l,!0);B.endsWith(a,"x")&&(r=parseFloat(h.substr(a,0,a.length-1)),isNaN(r)||(this.density=r,u=!1)),u&&(null==this.flags&&(this.flags=new z),-1==(r=a.indexOf("="))?this.flags.h[a]=!0:(u=h.substr(a,0,r),a=h.substr(a,r+1,null),this.flags.h[u]=a))}this.name=h.substr(e,0,Math.min(i,n))}),Je=((L["ceramic.AssetPathInfo"]=Ze).__name__="ceramic.AssetPathInfo",Ze.prototype={density:null,extension:null,name:null,path:null,flags:null,toString:function(){return""+V.string({extension:this.extension,name:this.name,path:this.path,density:this.density})},__class__:Ze},I["ceramic.AssetStatus"]={__ename__:"ceramic.AssetStatus",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"ceramic.AssetStatus",toString:d},LOADING:{_hx_name:"LOADING",_hx_index:1,__enum__:"ceramic.AssetStatus",toString:d},READY:{_hx_name:"READY",_hx_index:2,__enum__:"ceramic.AssetStatus",toString:d},BROKEN:{_hx_name:"BROKEN",_hx_index:3,__enum__:"ceramic.AssetStatus",toString:d}}),en=(Je.__constructs__=[Je.NONE,Je.LOADING,Je.READY,Je.BROKEN],function(e,n,t){this.parseAtlas=null,this.unobservedText=null,this.textAutoruns=null,this.unobservedAtlas=null,this.atlasAutoruns=null,i0.call(this,"atlas",e,n,t),this.set_handleTexturesDensityChange(!0),this.assets=new Re}),nn=((L["ceramic.AtlasAsset"]=en).__name__="ceramic.AtlasAsset",en.__super__=i0,en.prototype=$extend(i0.prototype,{__cbOnReplaceAtlas:null,__cbOnceReplaceAtlas:null,__cbOnOwnerUnbindReplaceAtlas:null,__cbOnceOwnerUnbindReplaceAtlas:null,emitReplaceAtlas:function(e,n){var t=0;if(null!=this.__cbOnReplaceAtlas&&(t+=this.__cbOnReplaceAtlas.length),null!=this.__cbOnceReplaceAtlas&&(t+=this.__cbOnceReplaceAtlas.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnReplaceAtlas)for(var r=0,a=this.__cbOnReplaceAtlas.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnReplaceAtlas[h],++s):--t}if(null!=this.__cbOnceReplaceAtlas){for(var u=null,c=null,r=0,a=this.__cbOnceReplaceAtlas.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceReplaceAtlas[h],this.__cbOnceReplaceAtlas[h]=null,o=this.__cbOnceOwnerUnbindReplaceAtlas[h],(this.__cbOnceOwnerUnbindReplaceAtlas[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindReplaceAtlas[h]),c.push(this.__cbOnceReplaceAtlas[h]))}this.__cbOnceOwnerUnbindReplaceAtlas=u,this.__cbOnceReplaceAtlas=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onReplaceAtlas:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceAtlas because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceAtlas(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReplaceAtlas&&(this.__cbOnOwnerUnbindReplaceAtlas=[]),this.__cbOnOwnerUnbindReplaceAtlas.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReplaceAtlas&&(this.__cbOnOwnerUnbindReplaceAtlas=[]),this.__cbOnOwnerUnbindReplaceAtlas.push(null);null==this.__cbOnReplaceAtlas&&(this.__cbOnReplaceAtlas=[]),this.__cbOnReplaceAtlas.push(t)},onceReplaceAtlas:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceAtlas because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceAtlas(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReplaceAtlas&&(this.__cbOnceOwnerUnbindReplaceAtlas=[]),this.__cbOnceOwnerUnbindReplaceAtlas.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReplaceAtlas&&(this.__cbOnceOwnerUnbindReplaceAtlas=[]),this.__cbOnceOwnerUnbindReplaceAtlas.push(null);null==this.__cbOnceReplaceAtlas&&(this.__cbOnceReplaceAtlas=[]),this.__cbOnceReplaceAtlas.push(t)},offReplaceAtlas:function(e){if(null!=e){var n;null!=this.__cbOnReplaceAtlas&&-1!=(n=this.__cbOnReplaceAtlas.indexOf(e))&&(this.__cbOnReplaceAtlas.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReplaceAtlas[n])&&s(),this.__cbOnOwnerUnbindReplaceAtlas.splice(n,1)),null!=this.__cbOnceReplaceAtlas&&-1!=(n=this.__cbOnceReplaceAtlas.indexOf(e))&&(this.__cbOnceReplaceAtlas.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReplaceAtlas[n])&&s(),this.__cbOnceOwnerUnbindReplaceAtlas.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceAtlas){for(var t=0,i=this.__cbOnOwnerUnbindReplaceAtlas.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReplaceAtlas[l])&&s()}this.__cbOnOwnerUnbindReplaceAtlas=null}if(null!=this.__cbOnceOwnerUnbindReplaceAtlas){for(t=0,i=this.__cbOnceOwnerUnbindReplaceAtlas.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReplaceAtlas[l])&&s()}this.__cbOnceOwnerUnbindReplaceAtlas=null}this.__cbOnReplaceAtlas=null,this.__cbOnceReplaceAtlas=null}},listensReplaceAtlas:function(){return null!=this.__cbOnReplaceAtlas&&0<this.__cbOnReplaceAtlas.length||null!=this.__cbOnceReplaceAtlas&&0<this.__cbOnceReplaceAtlas.length},atlasAutoruns:null,get_atlas:function(){var e,n,t=this.unobservedAtlas;return null!=M.current&&(e=M.current,null!=(n=this.atlasAutoruns)||(n=M.getAutorunArray(),null!=(this.atlasAutoruns=n)))&&e.bindToAutorunArray(n),t},set_atlas:function(e){var n=this.unobservedAtlas;return n!=(this.unobservedAtlas=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitAtlasChange(e,n),null!=(n=this.atlasAutoruns))&&(this.atlasAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateAtlas:function(){var e=this.unobservedAtlas,e=(this.emitAtlasChange(e,e),this.atlasAutoruns);null!=e&&(this.atlasAutoruns=null,M.invalidateAutorunArray(e))},unobservedAtlas:null,__cbOnAtlasChange:null,__cbOnceAtlasChange:null,__cbOnOwnerUnbindAtlasChange:null,__cbOnceOwnerUnbindAtlasChange:null,emitAtlasChange:function(e,n){var t=0;if(null!=this.__cbOnAtlasChange&&(t+=this.__cbOnAtlasChange.length),null!=this.__cbOnceAtlasChange&&(t+=this.__cbOnceAtlasChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnAtlasChange)for(var r=0,a=this.__cbOnAtlasChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnAtlasChange[h],++s):--t}if(null!=this.__cbOnceAtlasChange){for(var u=null,c=null,r=0,a=this.__cbOnceAtlasChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceAtlasChange[h],this.__cbOnceAtlasChange[h]=null,o=this.__cbOnceOwnerUnbindAtlasChange[h],(this.__cbOnceOwnerUnbindAtlasChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindAtlasChange[h]),c.push(this.__cbOnceAtlasChange[h]))}this.__cbOnceOwnerUnbindAtlasChange=u,this.__cbOnceAtlasChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onAtlasChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event atlasChange because owner is destroyed!");var l=function(e){null!=t&&(i.offAtlasChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindAtlasChange&&(this.__cbOnOwnerUnbindAtlasChange=[]),this.__cbOnOwnerUnbindAtlasChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindAtlasChange&&(this.__cbOnOwnerUnbindAtlasChange=[]),this.__cbOnOwnerUnbindAtlasChange.push(null);null==this.__cbOnAtlasChange&&(this.__cbOnAtlasChange=[]),this.__cbOnAtlasChange.push(t)},onceAtlasChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event atlasChange because owner is destroyed!");var l=function(e){null!=t&&(i.offAtlasChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindAtlasChange&&(this.__cbOnceOwnerUnbindAtlasChange=[]),this.__cbOnceOwnerUnbindAtlasChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindAtlasChange&&(this.__cbOnceOwnerUnbindAtlasChange=[]),this.__cbOnceOwnerUnbindAtlasChange.push(null);null==this.__cbOnceAtlasChange&&(this.__cbOnceAtlasChange=[]),this.__cbOnceAtlasChange.push(t)},offAtlasChange:function(e){if(null!=e){var n;null!=this.__cbOnAtlasChange&&-1!=(n=this.__cbOnAtlasChange.indexOf(e))&&(this.__cbOnAtlasChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindAtlasChange[n])&&s(),this.__cbOnOwnerUnbindAtlasChange.splice(n,1)),null!=this.__cbOnceAtlasChange&&-1!=(n=this.__cbOnceAtlasChange.indexOf(e))&&(this.__cbOnceAtlasChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindAtlasChange[n])&&s(),this.__cbOnceOwnerUnbindAtlasChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindAtlasChange){for(var t=0,i=this.__cbOnOwnerUnbindAtlasChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindAtlasChange[l])&&s()}this.__cbOnOwnerUnbindAtlasChange=null}if(null!=this.__cbOnceOwnerUnbindAtlasChange){for(t=0,i=this.__cbOnceOwnerUnbindAtlasChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindAtlasChange[l])&&s()}this.__cbOnceOwnerUnbindAtlasChange=null}this.__cbOnAtlasChange=null,this.__cbOnceAtlasChange=null}},listensAtlasChange:function(){return null!=this.__cbOnAtlasChange&&0<this.__cbOnAtlasChange.length||null!=this.__cbOnceAtlasChange&&0<this.__cbOnceAtlasChange.length},textAutoruns:null,get_text:function(){var e,n,t=this.unobservedText;return null!=M.current&&(e=M.current,null!=(n=this.textAutoruns)||(n=M.getAutorunArray(),null!=(this.textAutoruns=n)))&&e.bindToAutorunArray(n),t},set_text:function(e){var n=this.unobservedText;return n!=(this.unobservedText=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextChange(e,n),null!=(n=this.textAutoruns))&&(this.textAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateText:function(){var e=this.unobservedText,e=(this.emitTextChange(e,e),this.textAutoruns);null!=e&&(this.textAutoruns=null,M.invalidateAutorunArray(e))},unobservedText:null,__cbOnTextChange:null,__cbOnceTextChange:null,__cbOnOwnerUnbindTextChange:null,__cbOnceOwnerUnbindTextChange:null,emitTextChange:function(e,n){var t=0;if(null!=this.__cbOnTextChange&&(t+=this.__cbOnTextChange.length),null!=this.__cbOnceTextChange&&(t+=this.__cbOnceTextChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTextChange)for(var r=0,a=this.__cbOnTextChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTextChange[h],++s):--t}if(null!=this.__cbOnceTextChange){for(var u=null,c=null,r=0,a=this.__cbOnceTextChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTextChange[h],this.__cbOnceTextChange[h]=null,o=this.__cbOnceOwnerUnbindTextChange[h],(this.__cbOnceOwnerUnbindTextChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTextChange[h]),c.push(this.__cbOnceTextChange[h]))}this.__cbOnceOwnerUnbindTextChange=u,this.__cbOnceTextChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(null);null==this.__cbOnTextChange&&(this.__cbOnTextChange=[]),this.__cbOnTextChange.push(t)},onceTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(null);null==this.__cbOnceTextChange&&(this.__cbOnceTextChange=[]),this.__cbOnceTextChange.push(t)},offTextChange:function(e){if(null!=e){var n;null!=this.__cbOnTextChange&&-1!=(n=this.__cbOnTextChange.indexOf(e))&&(this.__cbOnTextChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTextChange[n])&&s(),this.__cbOnOwnerUnbindTextChange.splice(n,1)),null!=this.__cbOnceTextChange&&-1!=(n=this.__cbOnceTextChange.indexOf(e))&&(this.__cbOnceTextChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTextChange[n])&&s(),this.__cbOnceOwnerUnbindTextChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextChange){for(var t=0,i=this.__cbOnOwnerUnbindTextChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTextChange[l])&&s()}this.__cbOnOwnerUnbindTextChange=null}if(null!=this.__cbOnceOwnerUnbindTextChange){for(t=0,i=this.__cbOnceOwnerUnbindTextChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTextChange[l])&&s()}this.__cbOnceOwnerUnbindTextChange=null}this.__cbOnTextChange=null,this.__cbOnceTextChange=null}},listensTextChange:function(){return null!=this.__cbOnTextChange&&0<this.__cbOnTextChange.length||null!=this.__cbOnceTextChange&&0<this.__cbOnceTextChange.length},parseAtlas:null,load:function(){for(var o=this,_=(null!=this.owner&&(this.assets.inheritRuntimeAssetsFromAssets(this.owner),this.assets.loadMethod=this.owner.loadMethod,this.assets.scheduleMethod=this.owner.scheduleMethod,this.assets.delayBetweenXAssets=this.owner.delayBetweenXAssets),[]),h=this.assets.iterator();h.hasNext();){var e=h.next();_.push(e)}this.set_status(Je.LOADING),null==this.path?(he.app.logger.warning("Cannot load atlas asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:55,className:"ceramic.AtlasAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1)):(he.app.logger.info("Load atlas "+this.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:61,className:"ceramic.AtlasAsset",methodName:"load"}),this.assets.runtimeAssets=this.runtimeAssets,(h=new ei(this.name)).set_handleTexturesDensityChange(!1),this.assets.addAsset(h),h.set_path(this.path),this.assets.onceComplete(this,function(e){if(o.set_text(h.get_text()),null!=o.get_text())try{for(var u=null!=o.parseAtlas?o.parseAtlas(o.get_text()):si.parse(o.get_text()),c=(u.id="atlas:"+o.path,[]),n=0,t=u.pages.length;n<t;){var i=n++,l=u.pages[i].get_name(),s=At.directory(o.path),r=(null!=s&&0<s.length&&(l=At.join([s,l])),Re.decodePath(l)),a=new Sn(r.name);a.set_handleTexturesDensityChange(!1),a.set_path(r.path),o.assets.addAsset(a),c.push(a)}o.assets.onceComplete(o,function(e){if(e){for(var n=0,t=c.length;n<t;){var i=n++,l=(h=c[i]).get_texture();null!=l&&l.set_filter(u.pages[i].get_filter()),u.pages[i].set_texture(l)}u.computeFrames();var s=o.get_atlas();if((u.asset=o).set_atlas(u),null!=s){o.emitReplaceAtlas(o.get_atlas(),s);for(n=0,t=[].concat(he.app.visuals);n<t.length;){var r,a=t[n];++n,0<=a._lifecycleState&&null!=a.asQuad&&null!=(a=a.asQuad).tile&&a.tile instanceof hi&&null!=(r=a.tile)&&r.atlas==s&&(null!=(r=r.name)&&null!=(r=u.region(r))?a.set_tile(r):a.set_tile(null))}s.asset=null,s.destroy()}for(n=0;n<_.length;){var h=_[n];++n,h instanceof Sn&&-1!=c.indexOf(h)||h.destroy()}o.set_status(Je.READY),o.emitComplete(!0),o.handleTexturesDensityChange&&o.checkTexturesDensity()}else o.set_status(Je.BROKEN),he.app.logger.error("Failed to load textures for atlas at path: "+o.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:189,className:"ceramic.AtlasAsset",methodName:"load"}),o.emitComplete(!1)}),o.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:195,className:"ceramic.AtlasAsset",methodName:"load"})}catch(n){Al.lastError=n,o.set_status(Je.BROKEN),he.app.logger.error("Failed to decode atlas data at path: "+o.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:199,className:"ceramic.AtlasAsset",methodName:"load"}),o.emitComplete(!1)}else o.set_status(Je.BROKEN),he.app.logger.error("Failed to load atlas data at path: "+o.path,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:205,className:"ceramic.AtlasAsset",methodName:"load"}),o.emitComplete(!1)}),this.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:210,className:"ceramic.AtlasAsset",methodName:"load"}))},texturesDensityDidChange:function(e,n){this.get_status()==Je.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var e;null!=this.owner&&this.owner.reloadOnTextureDensityChange&&(e=this.path,this.computePath(),e!=this.path)&&(he.app.logger.info("Reload atlas ("+e+" -> "+this.path+")",{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:234,className:"ceramic.AtlasAsset",methodName:"checkTexturesDensity"}),this.load())},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload atlas (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:255,className:"ceramic.AtlasAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),null!=this.get_atlas()&&(this.get_atlas().destroy(),this.set_atlas(null)))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offReplaceAtlas(),this.offAtlasChange(),this.offTextChange()},__class__:en,__properties__:$extend(i0.prototype.__properties__,{set_text:"set_text",get_text:"get_text",set_atlas:"set_atlas",get_atlas:"get_atlas"})}),function(){this.busFilters=[],l.call(this),this.mixers=new Kn,this.mixers.exists(0)||this.mixers.set(0,new tn(0))}),tn=((L["ceramic.Audio"]=nn).__name__="ceramic.Audio",nn.__super__=l,nn.prototype=$extend(l.prototype,{mixers:null,busFilters:null,initMixerIfNeeded:function(e){this.mixers.exists(e)||this.mixers.set(e,new tn(e))},mixer:function(e){this.mixers.exists(e)||this.mixers.set(e,new tn(e));var n=this.mixers,t=n._keys.intMap.h[0|e];return 2<=(e=null!=t?t:0)?n.values[e-2]:Kn.RET_NULL},addFilter:function(e,n){if((n=null==n?0:n)<0)throw Q.thrown("Invalid bus "+n+", must be 0 or higher");for(-1!=e.bus&&this._removeFilter(e,e.bus);this.busFilters.length<=n;)this.busFilters.push([]);this.busFilters[n].push(e),e.attach(n),he.app.backend.audio.addFilter(n,e,$bind(e,e.emitReady));for(var t=0,i=this.busFilters[n].length;t<i;){var l=t++;he.app.backend.audio.filterParamsChanged(n,this.busFilters[n][l].filterId)}},removeFilter:function(e,n){this._removeFilter(e,n)},_removeFilter:function(e,n){if(!((n=null==n?e.bus:n)<0||n>=this.busFilters.length)){var t=this.busFilters[n].indexOf(e);if(-1!=t){e.detach(n),this.busFilters[n].splice(t,1),he.app.backend.audio.removeFilter(n,e.filterId);for(var i=0,l=this.busFilters[n].length;i<l;){var s=i++;he.app.backend.audio.filterParamsChanged(n,this.busFilters[n][s].filterId)}}}},filters:function(e){e=this.busFilters[e];return e=null!=e?[].concat(e):[]},clearFilters:function(e){if(e<this.busFilters.length)for(var n=this.busFilters[e];0<n.length;)this._removeFilter(n[n.length-1],e)},__class__:nn}),(L["ceramic.AudioFilter"]=p0).__name__="ceramic.AudioFilter",p0.__super__=l,p0.prototype=$extend(l.prototype,{__cbOnReady:null,__cbOnceReady:null,__cbOnOwnerUnbindReady:null,__cbOnceOwnerUnbindReady:null,emitReady:function(e){var n=0;if(null!=this.__cbOnReady&&(n+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(n+=this.__cbOnceReady.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnReady)for(var s=0,r=this.__cbOnReady.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnReady[a],++l):--n}if(null!=this.__cbOnceReady){for(var h=null,u=null,s=0,r=this.__cbOnceReady.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceReady[a],this.__cbOnceReady[a]=null,c=this.__cbOnceOwnerUnbindReady[a],(this.__cbOnceOwnerUnbindReady[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindReady[a]),u.push(this.__cbOnceReady[a]))}this.__cbOnceOwnerUnbindReady=h,this.__cbOnceReady=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReady[n])&&s(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReady[n])&&s(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReady[l])&&s()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReady[l])&&s()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},filterId:null,bus:null,active:null,params:null,paramsChanged:null,paramsAcquired:null,getBool:function(e){e=this.params[e];return null!=e&&0!=e},getInt:function(e){e=this.params[e];return null!=e?0|e:0},getFloat:function(e){e=this.params[e];return null!=e?e:0},setBool:function(e,n){var t=!this.paramsAcquired,i=(t&&this.acquireParams(),this.params[e]),n=n?1:0;(this.params[e]=n)!=i&&(this.paramsChanged=!0),t&&this.releaseParams()},setInt:function(e,n){var t=!this.paramsAcquired,i=(t&&this.acquireParams(),this.params[e]);(this.params[e]=n)!=i&&(this.paramsChanged=!0),t&&this.releaseParams()},setFloat:function(e,n){var t=!this.paramsAcquired,i=(t&&this.acquireParams(),this.params[e]);(this.params[e]=n)!=i&&(this.paramsChanged=!0),t&&this.releaseParams()},acquireParams:function(){this.paramsChanged=!1,this.paramsAcquired=!0},releaseParams:function(){var e=this.paramsChanged;this.paramsChanged=!1,this.paramsAcquired=!1,e&&0<=this.bus&&he.app.backend.audio.filterParamsChanged(this.bus,this.filterId)},_initDefaultParamValues:function(){},attach:function(e){this.bus=e},detach:function(e){this.bus=-1},workletClass:null,numParams:function(){return 0},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,-1!=this.bus&&he.app.audio.removeFilter(this),this._lifecycleState=-1,l.prototype.destroy.call(this))},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offReady()},__class__:p0}),(L["ceramic.AudioFilterWorklet"]=q0).__name__="ceramic.AudioFilterWorklet",q0.prototype={filterId:null,bus:null,active:null,params:null,getBool:function(e){e=this.params[e];return null!=e&&0!=e},getInt:function(e){e=this.params[e];return null!=e?0|e:0},getFloat:function(e){e=this.params[e];return null!=e?e:0},numParams:function(){return 0},process:null,__class__:q0},function(e){this.mute=!1,this.pitch=1,this.pan=0,this.volume=.5,l.call(this),this.index=e}),ln=((L["ceramic.AudioMixer"]=tn).__name__="ceramic.AudioMixer",tn.__super__=l,tn.prototype=$extend(l.prototype,{volume:null,pan:null,pitch:null,mute:null,index:null,__class__:tn}),(L["ceramic.AutoCollections"]=s0).__name__="ceramic.AutoCollections",s0.__isInterface__=!0,(L["ceramic.BackgroundQueue"]=t0).__name__="ceramic.BackgroundQueue",t0.__super__=l,t0.prototype=$extend(l.prototype,{checkInterval:null,runsInBackground:null,stop:null,pending:null,schedule:function(e){he.app._onceImmediate(e)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),this.stop=!0)},__class__:t0}),(L["ceramic.BezierEasing"]=u0).__name__="ceramic.BezierEasing",u0.quadraticToCubicCP1=function(e){return u0.TWO_THIRD*e},u0.quadraticToCubicCP2=function(e){return 1+u0.TWO_THIRD*(e-1)},u0.cacheKey=function(e,n,t,i){return 0|1e4*e+1e5*n+1e6*t+1e7*i},u0.clearCache=function(){u0.cachedInstances=null,u0.numCachedInstances=0},u0.get=function(e,n,t,i){var l=null==t||null==i,s=l?u0.TWO_THIRD*e:e,r=l?u0.TWO_THIRD*n:n,a=l?1+u0.TWO_THIRD*(e-1):t,h=l?1+u0.TWO_THIRD*(n-1):i,u=null,l=0|1e4*s+1e5*r+1e6*a+1e7*h,c=u0.cachedInstances=null==u0.cachedInstances?new Kn:u0.cachedInstances,o=c._keys.intMap.h[0|l],o=null!=o?o:0,_=2<=o?c.values[o-2]:Kn.RET_NULL;if(null==_)u0.CACHE_SIZE<=u0.numCachedInstances&&u0.clearCache(),u=new u0(s,r,a,h),u0.cachedInstances.set(l,[u]),u0.numCachedInstances++;else{for(var d=_.length-1;0<=d;){var b=_[d];if(b.mX1==s&&b.mY1==r&&b.mX2==a&&b.mY2==h){u=b;break}--d}null==u&&((u=new u0(e,n,t,i)).cached=!0,_.push(u))}return u},u0.prototype={linearEasing:null,sampleValues:null,cached:null,quadratic:null,mQuadraticX1:null,mQuadraticX2:null,mX1:null,mY1:null,mX2:null,mY2:null,configure:function(e,n,t,i){if(this.cached&&this.removeFromCache(this.mX1,this.mY1,this.mX2,this.mY2),null==t||null==i?(this.quadratic=!0,this.mQuadraticX1=e,this.mQuadraticX2=t,this.mX1=u0.TWO_THIRD*e,this.mY1=u0.TWO_THIRD*n,this.mX2=1+u0.TWO_THIRD*(e-1),this.mY2=1+u0.TWO_THIRD*(n-1)):(this.quadratic=!1,this.mX1=e,this.mY1=n,this.mX2=t,this.mY2=i),this.mX1==this.mY1&&this.mX2==this.mY2)this.linearEasing=!0;else{this.linearEasing=!1,null==this.sampleValues&&(this.sampleValues=[]);for(var l=0,s=u0.SPLINE_TABLE_SIZE;l<s;){var r=l++,a=r*u0.SAMPLE_STEP_SIZE,h=this.mX1,u=this.mX2;this.sampleValues[r]=(((1-3*u+3*h)*a+(3*u-6*h))*a+3*h)*a}}},ease:function(e){if(this.linearEasing)return e;if(0==e)return 0;if(1==e)return 1;for(var n=0,t=1,i=u0.SPLINE_TABLE_SIZE-1;t!=i&&this.sampleValues[t]<=e;)n+=u0.SAMPLE_STEP_SIZE,++t;var l,s=n+(e-this.sampleValues[--t])/(this.sampleValues[t+1]-this.sampleValues[t])*u0.SAMPLE_STEP_SIZE,r=this.mX1,a=this.mX2,h=3*(1-3*a+3*r)*s*s+2*(3*a-6*r)*s+3*r;if(u0.NEWTON_MIN_SLOPE<=h)l=this.newtonRaphsonIterate(e,s,this.mX1,this.mX2);else if(0==h)l=s;else{for(var u,c,o=n,_=n+u0.SAMPLE_STEP_SIZE,d=this.mX1,b=this.mX2,g=0;0<(u=(((1-3*b+3*d)*(c=o+(_-o)/2)+(3*b-6*d))*c+3*d)*c-e)?_=c:o=c,Math.abs(u)>u0.SUBDIVISION_PRECISION&&++g<u0.SUBDIVISION_MAX_ITERATIONS;);l=c}r=this.mY1;return(((1-3*(a=this.mY2)+3*r)*l+(3*a-6*r))*l+3*r)*l},getTForX:function(e){for(var n=0,t=1,i=u0.SPLINE_TABLE_SIZE-1;t!=i&&this.sampleValues[t]<=e;)n+=u0.SAMPLE_STEP_SIZE,++t;var l=n+(e-this.sampleValues[--t])/(this.sampleValues[t+1]-this.sampleValues[t])*u0.SAMPLE_STEP_SIZE,s=this.mX1,r=this.mX2,r=3*(1-3*r+3*s)*l*l+2*(3*r-6*s)*l+3*s;if(u0.NEWTON_MIN_SLOPE<=r)return this.newtonRaphsonIterate(e,l,this.mX1,this.mX2);if(0==r)return l;for(var a,h,u=n,c=n+u0.SAMPLE_STEP_SIZE,o=this.mX1,_=this.mX2,d=0;0<(a=(((1-3*_+3*o)*(h=u+(c-u)/2)+(3*_-6*o))*h+3*o)*h-e)?c=h:u=h,Math.abs(a)>u0.SUBDIVISION_PRECISION&&++d<u0.SUBDIVISION_MAX_ITERATIONS;);return h},calcBezier:function(e,n,t){return(((1-3*t+3*n)*e+(3*t-6*n))*e+3*n)*e},getSlope:function(e,n,t){return 3*(1-3*t+3*n)*e*e+2*(3*t-6*n)*e+3*n},binarySubdivide:function(e,n,t,i,l){for(var s,r,a=0;0<(s=(((1-3*l+3*i)*(r=n+(t-n)/2)+(3*l-6*i))*r+3*i)*r-e)?t=r:n=r,Math.abs(s)>u0.SUBDIVISION_PRECISION&&++a<u0.SUBDIVISION_MAX_ITERATIONS;);return r},newtonRaphsonIterate:function(e,n,t,i){for(var l=0,s=u0.NEWTON_ITERATIONS;l<s;){l++;var r=3*(1-3*i+3*t)*n*n+2*(3*i-6*t)*n+3*t;if(0==r)return n;n-=((((1-3*i+3*t)*n+(3*i-6*t))*n+3*t)*n-e)/r}return n},A:function(e,n){return 1-3*n+3*e},B:function(e,n){return 3*n-6*e},C:function(e){return 3*e},removeFromCache:function(e,n,t,i){this.cached=!1;e=0|1e4*e+1e5*n+1e6*t+1e7*i;null!=u0.cachedInstances&&null!=(t=2<=(i=null!=(t=(n=u0.cachedInstances)._keys.intMap.h[0|e])?t:0)?n.values[i-2]:Kn.RET_NULL)&&(1==t.length&&t[0]==this?u0.cachedInstances.remove(e):h.remove(t,this))},__class__:u0},function(e,n,t){this.unobservedBytes=null,this.bytesAutoruns=null,i0.call(this,"binary",e,n,t)}),sn=((L["ceramic.BinaryAsset"]=ln).__name__="ceramic.BinaryAsset",ln.__super__=i0,ln.prototype=$extend(i0.prototype,{bytesAutoruns:null,get_bytes:function(){var e,n,t=this.unobservedBytes;return null!=M.current&&(e=M.current,null!=(n=this.bytesAutoruns)||(n=M.getAutorunArray(),null!=(this.bytesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_bytes:function(e){var n=this.unobservedBytes;return n!=(this.unobservedBytes=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitBytesChange(e,n),null!=(n=this.bytesAutoruns))&&(this.bytesAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateBytes:function(){var e=this.unobservedBytes,e=(this.emitBytesChange(e,e),this.bytesAutoruns);null!=e&&(this.bytesAutoruns=null,M.invalidateAutorunArray(e))},unobservedBytes:null,__cbOnBytesChange:null,__cbOnceBytesChange:null,__cbOnOwnerUnbindBytesChange:null,__cbOnceOwnerUnbindBytesChange:null,emitBytesChange:function(e,n){var t=0;if(null!=this.__cbOnBytesChange&&(t+=this.__cbOnBytesChange.length),null!=this.__cbOnceBytesChange&&(t+=this.__cbOnceBytesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnBytesChange)for(var r=0,a=this.__cbOnBytesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnBytesChange[h],++s):--t}if(null!=this.__cbOnceBytesChange){for(var u=null,c=null,r=0,a=this.__cbOnceBytesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceBytesChange[h],this.__cbOnceBytesChange[h]=null,o=this.__cbOnceOwnerUnbindBytesChange[h],(this.__cbOnceOwnerUnbindBytesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindBytesChange[h]),c.push(this.__cbOnceBytesChange[h]))}this.__cbOnceOwnerUnbindBytesChange=u,this.__cbOnceBytesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onBytesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event bytesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBytesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBytesChange&&(this.__cbOnOwnerUnbindBytesChange=[]),this.__cbOnOwnerUnbindBytesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBytesChange&&(this.__cbOnOwnerUnbindBytesChange=[]),this.__cbOnOwnerUnbindBytesChange.push(null);null==this.__cbOnBytesChange&&(this.__cbOnBytesChange=[]),this.__cbOnBytesChange.push(t)},onceBytesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event bytesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBytesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBytesChange&&(this.__cbOnceOwnerUnbindBytesChange=[]),this.__cbOnceOwnerUnbindBytesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBytesChange&&(this.__cbOnceOwnerUnbindBytesChange=[]),this.__cbOnceOwnerUnbindBytesChange.push(null);null==this.__cbOnceBytesChange&&(this.__cbOnceBytesChange=[]),this.__cbOnceBytesChange.push(t)},offBytesChange:function(e){if(null!=e){var n;null!=this.__cbOnBytesChange&&-1!=(n=this.__cbOnBytesChange.indexOf(e))&&(this.__cbOnBytesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBytesChange[n])&&s(),this.__cbOnOwnerUnbindBytesChange.splice(n,1)),null!=this.__cbOnceBytesChange&&-1!=(n=this.__cbOnceBytesChange.indexOf(e))&&(this.__cbOnceBytesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBytesChange[n])&&s(),this.__cbOnceOwnerUnbindBytesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBytesChange){for(var t=0,i=this.__cbOnOwnerUnbindBytesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBytesChange[l])&&s()}this.__cbOnOwnerUnbindBytesChange=null}if(null!=this.__cbOnceOwnerUnbindBytesChange){for(t=0,i=this.__cbOnceOwnerUnbindBytesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBytesChange[l])&&s()}this.__cbOnceOwnerUnbindBytesChange=null}this.__cbOnBytesChange=null,this.__cbOnceBytesChange=null}},listensBytesChange:function(){return null!=this.__cbOnBytesChange&&0<this.__cbOnBytesChange.length||null!=this.__cbOnceBytesChange&&0<this.__cbOnceBytesChange.length},load:function(){var n=this;if(this.set_status(Je.LOADING),null==this.path)he.app.logger.warning("Cannot load binary asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:21,className:"ceramic.BinaryAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1);else{var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.options)for(var t=0,i=N.fields(this.options);t<i.length;){var l=i[t];++t,e[l]=N.field(this.options,l)}var s=this.path,r=Re.realAssetPath(s,this.runtimeAssets),a=Re.getReloadCount(r);0<a&&(r+="?hot="+a,s+="?hot="+a),he.app.logger.info("Load binary "+s,{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:47,className:"ceramic.BinaryAsset",methodName:"load"}),he.app.backend.binaries.load(r,e,function(e){null!=e?(n.set_bytes(e),n.set_status(Je.READY),n.emitComplete(!0)):(n.set_status(Je.BROKEN),he.app.logger.error("Failed to load binary at path: "+n.path,{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:57,className:"ceramic.BinaryAsset",methodName:"load"}),n.emitComplete(!1))})}},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload binary (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:80,className:"ceramic.BinaryAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),this.set_bytes(null))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offBytesChange()},__class__:ln,__properties__:$extend(i0.prototype.__properties__,{set_bytes:"set_bytes",get_bytes:"get_bytes"})}),(L["ceramic.BitmapFont"]=w0).__name__="ceramic.BitmapFont",w0.__super__=l,w0.prototype=$extend(l.prototype,{pages:null,fontData:null,set_fontData:function(e){return null!=(this.fontData=e)&&(this.spaceChar=e.chars.get(32),null==e.chars.get(160))&&e.chars.set(160,this.spaceChar),e},get_face:function(){return this.fontData.face},set_face:function(e){return this.fontData.face=e},get_pointSize:function(){return this.fontData.pointSize},set_pointSize:function(e){return this.fontData.pointSize=e},get_baseSize:function(){return this.fontData.baseSize},set_baseSize:function(e){return this.fontData.baseSize=e},get_chars:function(){return this.fontData.chars},set_chars:function(e){return this.fontData.chars=e},get_charCount:function(){return this.fontData.charCount},set_charCount:function(e){return this.fontData.charCount=e},get_lineHeight:function(){return this.fontData.lineHeight},set_lineHeight:function(e){return this.fontData.lineHeight=e},get_kernings:function(){return this.fontData.kernings},set_kernings:function(e){return this.fontData.kernings=e},get_msdf:function(){return null!=this.fontData.distanceField&&"msdf"==this.fontData.distanceField.fieldType},spaceChar:null,pageShaders:null,preRenderedPages:null,_preRenderingPages:null,asset:null,destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),null!=this.pages){for(var e=this.pages.iterableKeys,n=0,t=e.length;n<t;){var i=n++;(a=this.pages.get(e[i])).destroy()}this.pages=null}if(null!=this.pageShaders){for(var s=this.pageShaders.iterator();s.hasNext();)s.next().destroy();this.pageShaders=null}if(null!=this.preRenderedPages){for(var r=this.preRenderedPages.iterator();r.hasNext();)for(var a=r.next().iterator();a.hasNext();)a.next().destroy();this.preRenderedPages=null}}},needsToPreRenderAtSize:function(e){if(null==this.preRenderedPages||!this.preRenderedPages.h.hasOwnProperty(e))return!0;for(var n=this.preRenderedPages.h[e],t=0,i=this.pages.iterableKeys;t<i.length;){var l=i[t];if(++t,!n.h.hasOwnProperty(l))return!0}return!1},preRenderAtSize:function(e,n){for(var t=0,i=0,l=this.pages.iterableKeys;i<l.length;){var s=l[i];++i,t+=1,this.preRenderPage(s,e,function(){0==--t&&(n(),n=null)})}},preRenderPage:function(e,n,t){var i,l=this;if((null==this.preRenderedPages&&(this.preRenderedPages=new Hl),null!=this._preRenderingPages)&&null!=(i=this._preRenderingPages.h[n]))return void(null!=(s=i.h[e])&&s.push(t));null==this._preRenderingPages&&(this._preRenderingPages=new Hl),null==(i=this._preRenderingPages.h[n])&&(i=new Hl,this._preRenderingPages.h[n]=i);null==(s=i.h[e])&&(s=[],i.h[e]=s);var s,a=this.preRenderedPages.h[n],h=this.pages.get(e);if(null==h)throw Q.thrown("Invalid bitmap font page with id "+e);var u=n/this.fontData.pointSize,c=Math.ceil(h.width*h.density*u),u=Math.ceil(h.width*h.density*u),o=new Ft(c,u,1),_=(o.clearOnRender=!0,o.autoRender=!1,new r);_._texture!=h&&_._set_texture(h),_.set_width(c),_.set_height(u),_.set_shader(null!=this.pageShaders?this.pageShaders.h[e]:null),_.set_visible(!1),null!=a&&a.h.hasOwnProperty(e)&&a.h[e].destroy(),o.stamp(_,function(){for(_.destroy(),(_=null)==a&&(a=new Hl,l.preRenderedPages.h[n]=a),a.h[e]=o,t(),t=null,i.remove(e);0<s.length;)s.shift()(),0})},kerning:function(e,n){var e=this.fontData.kernings.get(e);return null!=e&&e.intMap.h.hasOwnProperty(0|n)&&null!=(e=e.intMap.h[0|n])?e:0},__class__:w0,__properties__:$extend(l.prototype.__properties__,{get_msdf:"get_msdf",set_kernings:"set_kernings",get_kernings:"get_kernings",set_lineHeight:"set_lineHeight",get_lineHeight:"get_lineHeight",set_charCount:"set_charCount",get_charCount:"get_charCount",set_chars:"set_chars",get_chars:"get_chars",set_baseSize:"set_baseSize",get_baseSize:"get_baseSize",set_pointSize:"set_pointSize",get_pointSize:"get_pointSize",set_face:"set_face",get_face:"get_face",set_fontData:"set_fontData"})}),(L["ceramic.BitmapFontCharacter"]=x0).__name__="ceramic.BitmapFontCharacter",x0.prototype={id:null,x:null,y:null,width:null,height:null,xOffset:null,yOffset:null,xAdvance:null,page:null,__class__:x0},(L["ceramic.BitmapFontData"]=y0).__name__="ceramic.BitmapFontData",y0.prototype={face:null,path:null,pointSize:null,baseSize:null,chars:null,charCount:null,distanceField:null,pages:null,lineHeight:null,kernings:null,__class__:y0},(L["ceramic.BitmapFontDataPage"]=z0).__name__="ceramic.BitmapFontDataPage",z0.prototype={id:null,file:null,__class__:z0},(L["ceramic.BitmapFontDistanceFieldData"]=A0).__name__="ceramic.BitmapFontDistanceFieldData",A0.prototype={fieldType:null,distanceRange:null,__class__:A0},(L["ceramic.BitmapFontParser"]=B0).__name__="ceramic.BitmapFontParser",B0.parse=function(e){if(0==e.length)throw Q.thrown("BitmapFont: fontData is 0 length");if(B.startsWith(B.trim(e),"<"))try{e=B0.convertXmlFontData(e)}catch(l){Al.lastError=l;var n=Q.caught(l).unwrap();throw Q.thrown("BitmapFont: invalid xml font data specified for parser: "+V.string(n))}var t=new y0(null,".",0,0,new Kn,0,null,[],0,new Kn),i=B.replace(B.replace(e,"\r",""),"\t"," ").split("\n");if(0==i.length)throw Q.thrown("BitmapFont: invalid font data specified for parser.");n=i[0];if("info"!=h.substr(B.ltrim(n),0,4))throw Q.thrown("BitmapFont: invalid font data specified for parser. Format should be plain ascii text .fnt file only currently.");for(var l=0;l<i.length;){var s=i[l];++l,B0.parseLine(s,t)}return i=null,t},B0.convertXmlFontData=function(e){for(var n="",t=F.parse(e).firstElement().elements();t.hasNext();){var i=t.next();if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));switch(i.nodeName){case"chars":case"pages":if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));if("chars"==i.nodeName){if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));n+=V.string(i.nodeName);for(var l=i.attributes();l.hasNext();){var s=l.next(),r=i.get(s);null!=r&&(n=(n+=" ")+V.string(s)+"=","face"==s||"char"==s||"file"==s||-1!=r.indexOf(" ")||-1!=r.indexOf('"')||-1!=r.indexOf("=")?n+=V.string(JSON.stringify(r)):n+=V.string(r))}n+="\n"}for(var a=i.elements();a.hasNext();){var h=a.next();if(h.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==h.nodeType?"null":le.toString(h.nodeType)));n+=V.string(h.nodeName);for(var u=h.attributes();u.hasNext();){var c=u.next(),o=h.get(c);null!=o&&(n=(n+=" ")+V.string(c)+"=","face"==c||"char"==c||"file"==c||-1!=o.indexOf(" ")||-1!=o.indexOf('"')||-1!=o.indexOf("=")?n+=V.string(JSON.stringify(o)):n+=V.string(o))}n+="\n"}break;default:if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));n+=V.string(i.nodeName);for(var _=i.attributes();_.hasNext();){var d=_.next(),b=i.get(d);null!=b&&(n=(n+=" ")+V.string(d)+"=","face"==d||"char"==d||"file"==d||-1!=b.indexOf(" ")||-1!=b.indexOf('"')||-1!=b.indexOf("=")?n+=V.string(JSON.stringify(b)):n+=V.string(b))}n+="\n"}}return n},B0.parseLine=function(e,n){var t=new z;switch(B0.extractLineTokens(e,t)){case"char":var i=new x0(V.parseInt(t.h.id),parseFloat(t.h.x),parseFloat(t.h.y),parseFloat(t.h.width),parseFloat(t.h.height),parseFloat(t.h.xoffset),parseFloat(t.h.yoffset),parseFloat(t.h.xadvance),V.parseInt(t.h.page));n.chars.set(i.id,i);break;case"chars":n.charCount=V.parseInt(t.h.count);break;case"common":n.lineHeight=parseFloat(t.h.lineHeight),n.baseSize=parseFloat(t.h.base);break;case"distanceField":var i=t.h.fieldType,l=V.parseInt(t.h.distanceRange);n.distanceField=new A0(i,l);break;case"info":var s=(u=t.h.face).length;34==h.cca(u,0)&&34==h.cca(u,s-1)&&(u=u.substring(1,s-1)),n.face=u,n.pointSize=parseFloat(t.h.size);break;case"kerning":var i=V.parseInt(t.h.first),l=V.parseInt(t.h.second),r=parseFloat(t.h.amount),a=n.kernings.get(i);null==a&&(a=new Bn,n.kernings.set(i,a)),a.set(l,r);break;case"page":var u,s=(u=t.h.file).length;34==h.cca(u,0)&&34==h.cca(u,s-1)&&(u=u.substring(1,s-1)),n.pages.push(new z0(V.parseInt(t.h.id),B.trim(u)))}},B0.extractLineTokens=function(e,n){for(var t=0,i=e.length,l=null,s=null,r=null,a=!1;t<i;){var u=h.cca(e,t);if(a){if(92==u?(u=h.cca(e,t),++t):34==u&&(a=!1),null==r)throw Q.thrown("Invalid bitmap font line: "+e);r.b+=V.string(e.charAt(t))}else if(32==u)null!=r&&(null==l?l=r.b:null==s?(s=r.b,n.h[s]=null):n.h[s]=r.b,r=s=null);else if(null==s&&61==u){if(null==r)throw Q.thrown("Invalid bitmap font line: "+e);s=r.b,r=null}else 34==u&&(a=!0),(r=null==r?new A:r).b+=V.string(e.charAt(t));++t}return null!=r&&(null==l?l=r.b:null==s?(s=r.b,n.h[s]=null):n.h[s]=r.b,r=s=null),l},B0.unquote=function(e){var n=e.length;return e=34==h.cca(e,0)&&34==h.cca(e,n-1)?e.substring(1,n-1):e},function(){this.combinedCollectionLastChanges=null,this.combinedCollections=null,this.filter=null,this.byId=null,this.entriesDirty=!1,this.indexDirty=!0,this.entries=[],this.lastChange=0,this.internalId=sn._nextInternalId++}),rn=((L["ceramic.CollectionImpl"]=sn).__name__="ceramic.CollectionImpl",sn.__interfaces__=[k],sn.prototype={internalId:null,lastChange:null,entries:null,indexDirty:null,entriesDirty:null,byId:null,filter:null,combinedCollections:null,combinedCollectionLastChanges:null,get_length:function(){if(null!=this.combinedCollections&&sn._lastCheckedCombined!=this){for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}sn._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries.length},pushAll:function(e){for(var n=0;n<e.length;){var t=e[n];++n,this.entries.push(t)}this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,sn._lastCheckedCombined=null},clear:function(){var e=this.entries.length;0<e&&this.entries.splice(0,e),this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,sn._lastCheckedCombined=null},push:function(e){this.entries.push(e),this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,sn._lastCheckedCombined=null},remove:function(e){h.remove(this.entries,e),this.indexDirty=!0,this.lastChange=999999999<this.lastChange?-999999999:this.lastChange+1,sn._lastCheckedCombined=null},synchronize:function(){this.entriesDirty&&this.computeEntries(),this.indexDirty&&this.computeIndex()},get:function(e){if(null==e)throw Q.thrown("Cannot get a collection entry with a null id!");if(null!=this.combinedCollections&&sn._lastCheckedCombined!=this){for(var n=0,t=this.combinedCollections.length;n<t;){var i=n++,l=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=l.lastChange){this.entriesDirty=!0;break}}sn._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.indexDirty&&this.computeIndex(),this.byId.h[e]},getByIndex:function(e){if(null!=this.combinedCollections&&sn._lastCheckedCombined!=this){for(var n=0,t=this.combinedCollections.length;n<t;){var i=n++,l=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=l.lastChange){this.entriesDirty=!0;break}}sn._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries[e]},indexOfId:function(e){e=this.get(e);return null==e?-1:this.indexOf(e)},indexOf:function(e){if(null!=this.combinedCollections&&sn._lastCheckedCombined!=this){for(var n=0,t=this.combinedCollections.length;n<t;){var i=n++,l=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=l.lastChange){this.entriesDirty=!0;break}}sn._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries.indexOf(e)},iterator:function(){if(null!=this.combinedCollections&&sn._lastCheckedCombined!=this){for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}sn._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),new ls(this.entries)},checkCombined:function(){if(null!=this.combinedCollections&&sn._lastCheckedCombined!=this){for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}sn._lastCheckedCombined=this}},computeIndex:function(){this.entriesDirty&&this.computeEntries(),this.byId=new z;for(var e=0,n=this.entries;e<n.length;){var t=n[e];++e,Object.prototype.hasOwnProperty.call(this.byId.h,t.id)||(this.byId.h[t.id]=t)}this.indexDirty=!1},computeEntries:function(){this.entries=[];for(var e=0,n=this.combinedCollections.length;e<n;){var t=e++,i=this.combinedCollections[t];if(null!=i.combinedCollections&&sn._lastCheckedCombined!=i){for(var l=0,s=i.combinedCollections.length;l<s;){var r=l++,a=i.combinedCollections[r];if(i.combinedCollectionLastChanges[r]!=a.lastChange){i.entriesDirty=!0;break}}sn._lastCheckedCombined=i}i.entriesDirty&&i.computeEntries();for(var h=0,u=i.entries;h<u.length;){var c=u[h++];this.entries.push(c)}this.combinedCollectionLastChanges[t]=i.lastChange}null!=this.filter&&(this.entries=this.filter(this.entries)),this.entriesDirty=!1,this.indexDirty=!0,sn._lastCheckedCombined!=this&&(sn._lastCheckedCombined=null)},__class__:sn,__properties__:{get_length:"get_length"}},(L["ceramic.CollectionEntry"]=E0).__name__="ceramic.CollectionEntry",E0.prototype={id:null,name:null,index:null,setRawData:function(e){for(var n=ys.getClass(this),t=n.__name__,i=vn.types(t),t=i.h,l=Object.keys(t),s=l.length,r=0;r<s;){var a=l[r++],h=i.h[a];if(Object.prototype.hasOwnProperty.call(e,a)){var u=N.field(e,a),c=null;if(!this.setRawField(a,u)){var o=n.__name__;if(yn._hasMeta(n,o,a,"skipEmpty",!0)){if(null==u)continue;if("string"==typeof u)if(0==u.length)continue}if(null==h){var _=B.trim((""+V.string(u)).toLowerCase()),d=I[h];if(null!=d){for(var b=0,g=d.__constructs__,O=new Array(g.length),f=0,p=g.length;f<p;){var m=f++;O[m]=g[m]._hx_name}for(var w=O;b<w.length;){var v=w[b];if(++b,v.toLowerCase()==_){c=D.createEnum(d,v);break}}}}else switch(h){case"Bool":c="boolean"==typeof u?u:""!=(u=B.trim((""+V.string(u)).toLowerCase()))&&"0"!=u&&"false"!=u&&"no"!=u;break;case"Float":"number"==typeof u&&(0|u)===u||"number"==typeof u?c=u:null!=(c=parseFloat(B.replace(""+V.string(u),",",".")))&&!isNaN(c)||(c=0);break;case"String":c=null==u||"null"==u?null:""+V.string(u);break;case"Int":case"ceramic.Color":"number"==typeof u&&(0|u)===u||"number"==typeof u?c=0|u:null!=(c=V.parseInt(""+V.string(u)))&&!isNaN(c)||(c=0);break;default:var y=B.trim((""+V.string(u)).toLowerCase()),C=I[h];if(null!=C){for(var U=0,x=C.__constructs__,T=new Array(x.length),A=0,S=x.length;A<S;){var E=A++;T[E]=x[E]._hx_name}for(var M=T;U<M.length;){var k=M[U];if(++U,k.toLowerCase()==y){c=D.createEnum(C,k);break}}}}this[a]=c}}}},setRawField:function(e,n){return!1},__class__:E0},function(e,n,t){null==t&&(t=!1),null==n&&(n=.5),null==e&&(e=16),this.size=0,this.iterableKeysUsed=null,this.iterableKeys=null,this.intMap=new Hl,t&&(this.iterableKeys=[],this.iterableKeysUsed=new rn(16,.5,!1))}),E=((L["ceramic.IntIntMap"]=rn).__name__="ceramic.IntIntMap",rn.prototype={intMap:null,iterableKeys:null,iterableKeysUsed:null,size:null,clear:function(){this.intMap.h={},this.size=0,null!=this.iterableKeys&&(this.iterableKeys=[],this.iterableKeysUsed=new rn(16,.5,!1))},exists:function(e){return this.intMap.h.hasOwnProperty(0|e)},set:function(e,n){null!=this.iterableKeys&&0==(null!=(t=this.iterableKeysUsed.intMap.h[0|e])?t:0)&&(this.iterableKeysUsed.set(e,1),this.iterableKeys.push(e));var t=0|e;return this.intMap.h.hasOwnProperty(t)||this.size++,this.intMap.h[t]=0|n,n},get:function(e){e=this.intMap.h[0|e];return null!=e?e:0},remove:function(e){var n,t=0|e,i=0;return null!=this.iterableKeys&&0!=(null!=(n=this.iterableKeysUsed.intMap.h[0|e])?n:0)&&(this.iterableKeysUsed.set(e,0),this.iterableKeys.splice(this.iterableKeys.indexOf(e),1)),this.intMap.h.hasOwnProperty(t)&&(i=this.intMap.h[t],this.size--),this.intMap.remove(t),i},getInline:function(e){e=this.intMap.h[0|e];return null!=e?e:0},existsInline:function(e){return this.intMap.h.hasOwnProperty(0|e)},copy:function(){var e=new rn;return e.intMap=this.intMap.copy(),e.size=this.size,e.iterableKeys=null!=this.iterableKeys?this.iterableKeys.slice():null,e.iterableKeysUsed=null!=this.iterableKeysUsed?In.copy(this.iterableKeysUsed):null,e},iterator:function(){return new Gn(this)},keys:function(){return new Hn(this)},keyValueIterator:function(){return new zn(this)},__class__:rn},{}),an=(E.__properties__={set_lightnessHSLuv:"set_lightnessHSLuv",get_lightnessHSLuv:"get_lightnessHSLuv",set_saturationHSLuv:"set_saturationHSLuv",get_saturationHSLuv:"get_saturationHSLuv",set_hueHSLuv:"set_hueHSLuv",get_hueHSLuv:"get_hueHSLuv",set_lightness:"set_lightness",get_lightness:"get_lightness",set_brightness:"set_brightness",get_brightness:"get_brightness",set_saturation:"set_saturation",get_saturation:"get_saturation",set_hue:"set_hue",get_hue:"get_hue",set_black:"set_black",get_black:"get_black",set_yellow:"set_yellow",get_yellow:"get_yellow",set_magenta:"set_magenta",get_magenta:"get_magenta",set_cyan:"set_cyan",get_cyan:"get_cyan",set_blueFloat:"set_blueFloat",get_blueFloat:"get_blueFloat",set_greenFloat:"set_greenFloat",get_greenFloat:"get_greenFloat",set_redFloat:"set_redFloat",get_redFloat:"get_redFloat",set_blue:"set_blue",get_blue:"get_blue",set_green:"set_green",get_green:"get_green",set_red:"set_red",get_red:"get_red"},E.toAlphaColor=function(e){e=(0|e)-16777216;return e&16777215|-16777216},E.random=function(e,n){null==n&&(n=.5),null==e&&(e=.5);var t=360*Math.random(),e=Math.random()*(1-e)+e,n=Math.random()*(1-n)+n;return E.fromHSB(t,e,n)},E.fromInt=function(e){return null==e?0:e},E.fromRGB=function(e,n,t){var i=0;return((i&65535|(255<e?255:e<0?0:e)<<16)&16711935|(255<n?255:n<0?0:n)<<8)&16776960|(255<t?255:t<0?0:t)},E.fromRGBFloat=function(e,n,t){var i=0,e=(i=i&65535|(255<(e=Math.round(255*e))?255:e<0?0:e)<<16,Math.round(255*n)),e=(i=i&16711935|(255<e?255:e<0?0:e)<<8,Math.round(255*t));return i=i&16776960|(255<e?255:e<0?0:e)},E.fromCMYK=function(e,n,t,i){var l=0,e=(1-e)*(1-i),e=(l=l&65535|(255<(s=Math.round(255*e))?255:s<0?0:s)<<16,(1-n)*(1-i)),s=Math.round(255*e),e=(1-t)*(1-i);return l=(l=l&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<(s=Math.round(255*e))?255:s<0?0:s)},E.fromHSB=function(e,n,t){var i=0,n=t*n,l=t-n,t=e,s=n,e=(t%=360)/60,r=s*(1-Math.abs(e%2-1))+l;switch(s+=l,0|e){case 0:i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16;var a=Math.round(255*r),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l)),i=i&16776960|(255<a?255:a<0?0:a);break;case 1:a=(i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));i=i&16776960|(255<a?255:a<0?0:a);break;case 2:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a);break;case 3:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));i=i&16776960|(255<a?255:a<0?0:a);break;case 4:a=(i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*l)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));i=i&16776960|(255<a?255:a<0?0:a);break;case 5:a=(i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a)}return i},E.fromHSL=function(e,n,t){var i=0,n=(1-Math.abs(2*t-1))*n,l=t-n/2,t=e,s=n,e=(t%=360)/60,r=s*(1-Math.abs(e%2-1))+l;switch(s+=l,0|e){case 0:i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16;var a=Math.round(255*r),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l)),i=i&16776960|(255<a?255:a<0?0:a);break;case 1:a=(i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));i=i&16776960|(255<a?255:a<0?0:a);break;case 2:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a);break;case 3:a=(i=i&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));i=i&16776960|(255<a?255:a<0?0:a);break;case 4:a=(i=i&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*l)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));i=i&16776960|(255<a?255:a<0?0:a);break;case 5:a=(i=i&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(i=i&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));i=i&16776960|(255<a?255:a<0?0:a)}return i},E.fromString=function(e){var n,t,i=null;if(e=B.trim(e),B.startsWith(e,"0x"))i=h=null==(h=V.parseInt(e.substring(0,8)))?0:h;else if(B.startsWith(e,"#"))i=9<=e.length?(t="0x"+e.substring(1,9),16776960&(16711935&(65535&0|(255<(n=(l=V.parseInt(t))>>16&255)?255:n<0?0:n)<<16)|(255<(n=l>>8&255)?255:n<0?0:n)<<8)|(255<(n=255&l)?255:n<0?0:n)):(t="0x"+e.substring(1,7),h=null==(h=V.parseInt(t))?0:h);else{e=e.toUpperCase();for(var l=E.colorLookup.h,s=Object.keys(l),r=s.length,a=0;a<r;){var h,u=s[a++];if(u==e){i=h=null==(h=E.colorLookup.h[u])?0:h;break}}}return i},E.getHSBColorWheel=function(){for(var e=[],n=0;n<360;){var t=n++;e.push(E.fromHSB(t,1,1))}return e},E.interpolate=function(e,n,t){var i=((n>>16&255)-(e>>16&255))*(t=null==t?.5:t)+(e>>16&255)|0,l=((n>>8&255)-(e>>8&255))*t+(e>>8&255)|0,n=((255&n)-(255&e))*t+(255&e)|0,t=0;return((t&65535|(255<i?255:i<0?0:i)<<16)&16711935|(255<l?255:l<0?0:l)<<8)&16776960|(255<n?255:n<0?0:n)},E.gradient=function(e,n,t,i){for(var l=[],s=(null==i&&(i=function(e){return e}),0),r=t;s<r;){var a=s++,h=i(a/(t-1)),u=((n>>16&255)-(e>>16&255))*(h=null==h?.5:h)+(e>>16&255)|0,c=((n>>8&255)-(e>>8&255))*h+(e>>8&255)|0,h=((255&n)-(255&e))*h+(255&e)|0,o=0;l[a]=((o&65535|(255<u?255:u<0?0:u)<<16)&16711935|(255<c?255:c<0?0:c)<<8)&16776960|(255<h?255:h<0?0:h)}return l},E.multiply=function(e,n){var t=(e>>8&255)/255*((n>>8&255)/255),i=(255&e)/255*((255&n)/255),l=0,e=(l=l&65535|(255<(e=Math.round(255*((e>>16&255)/255*((n>>16&255)/255))))?255:e<0?0:e)<<16,Math.round(255*t)),e=(l=l&16711935|(255<e?255:e<0?0:e)<<8,Math.round(255*i));return l=l&16776960|(255<e?255:e<0?0:e)},E.add=function(e,n){var t=(e>>16&255)+(n>>16&255),i=(e>>8&255)+(n>>8&255),e=(255&e)+(255&n),n=0;return((n&65535|(255<t?255:t<0?0:t)<<16)&16711935|(255<i?255:i<0?0:i)<<8)&16776960|(255<e?255:e<0?0:e)},E.subtract=function(e,n){var t=(e>>16&255)-(n>>16&255),i=(e>>8&255)-(n>>8&255),e=(255&e)-(255&n),n=0;return((n&65535|(255<t?255:t<0?0:t)<<16)&16711935|(255<i?255:i<0?0:i)<<8)&16776960|(255<e?255:e<0?0:e)},E.toHexString=function(e,n){return((n=null==n?!0:n)?"0x":"")+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2)},E.toWebString=function(e){var n=!1;return"#"+((n=null==n?!0:n)?"0x":"")+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2)},E.getColorInfo=function(e){var n="0x"+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2)+"\n";return(n+="red: "+(e>>16&255)+" green: "+(e>>8&255)+" blue: "+(255&e)+"\n")+("hue: "+E.roundDecimal(E.get_hue(e),2)+" saturation: "+E.roundDecimal((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),2)+" brightness: "+E.roundDecimal(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),2)+" lightness: "+E.roundDecimal((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))+Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/2,2))},E.getDarkened=function(e,n){var t=(n=null==n?.2:n)<0?0:n,i=(n=1<t?1:t,e),l=(Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))+Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/2*(1-n),t=E.get_hue(i),e=(1-Math.abs(2*l-1))*((Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))-Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))),s=l-e/2,n=t,r=e,t=(n%=360)/60,a=r*(1-Math.abs(t%2-1))+s;switch(r+=s,0|t){case 0:l=(i=i&65535|(255<(l=Math.round(255*r))?255:l<0?0:l)<<16,Math.round(255*a)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*s)),i=i&16776960|(255<l?255:l<0?0:l);break;case 1:l=(i=i&65535|(255<(l=Math.round(255*a))?255:l<0?0:l)<<16,Math.round(255*r)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*s));i=i&16776960|(255<l?255:l<0?0:l);break;case 2:l=(i=i&65535|(255<(l=Math.round(255*s))?255:l<0?0:l)<<16,Math.round(255*r)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*a));i=i&16776960|(255<l?255:l<0?0:l);break;case 3:l=(i=i&65535|(255<(l=Math.round(255*s))?255:l<0?0:l)<<16,Math.round(255*a)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*r));i=i&16776960|(255<l?255:l<0?0:l);break;case 4:l=(i=i&65535|(255<(l=Math.round(255*a))?255:l<0?0:l)<<16,Math.round(255*s)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*r));i=i&16776960|(255<l?255:l<0?0:l);break;case 5:l=(i=i&65535|(255<(l=Math.round(255*r))?255:l<0?0:l)<<16,Math.round(255*s)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*a));i=i&16776960|(255<l?255:l<0?0:l)}return i},E.getLightened=function(e,n){var t=(n=null==n?.2:n)<0?0:n,i=(n=1<t?1:t,e),l=(Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))+Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/2+(1-(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))+Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/2)*n,t=E.get_hue(i),e=(1-Math.abs(2*l-1))*((Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))-Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))),s=l-e/2,n=t,r=e,t=(n%=360)/60,a=r*(1-Math.abs(t%2-1))+s;switch(r+=s,0|t){case 0:l=(i=i&65535|(255<(l=Math.round(255*r))?255:l<0?0:l)<<16,Math.round(255*a)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*s)),i=i&16776960|(255<l?255:l<0?0:l);break;case 1:l=(i=i&65535|(255<(l=Math.round(255*a))?255:l<0?0:l)<<16,Math.round(255*r)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*s));i=i&16776960|(255<l?255:l<0?0:l);break;case 2:l=(i=i&65535|(255<(l=Math.round(255*s))?255:l<0?0:l)<<16,Math.round(255*r)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*a));i=i&16776960|(255<l?255:l<0?0:l);break;case 3:l=(i=i&65535|(255<(l=Math.round(255*s))?255:l<0?0:l)<<16,Math.round(255*a)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*r));i=i&16776960|(255<l?255:l<0?0:l);break;case 4:l=(i=i&65535|(255<(l=Math.round(255*a))?255:l<0?0:l)<<16,Math.round(255*s)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*r));i=i&16776960|(255<l?255:l<0?0:l);break;case 5:l=(i=i&65535|(255<(l=Math.round(255*r))?255:l<0?0:l)<<16,Math.round(255*s)),l=(i=i&16711935|(255<l?255:l<0?0:l)<<8,Math.round(255*a));i=i&16776960|(255<l?255:l<0?0:l)}return i},E.getInverted=function(e){var n=255-(e>>16&255),t=255-(e>>8&255),e=255-(255&e),i=0;i=16776960&(i=16711935&(i=0|(255<n?255:n<0?0:n)<<16)|(255<t?255:t<0?0:t)<<8)|(255<e?255:e<0?0:e);return i},E.setRGB=function(e,n,t,i){return e=(e=(e=e&65535|(255<n?255:n<0?0:n)<<16)&16711935|(255<t?255:t<0?0:t)<<8)&16776960|(255<i?255:i<0?0:i)},E.setRGBFloat=function(e,n,t,i){e=65535&e|(255<(n=Math.round(255*n))?255:n<0?0:n)<<16;n=Math.round(255*t),e=16711935&e|(255<n?255:n<0?0:n)<<8,n=Math.round(255*i);return e=e&16776960|(255<n?255:n<0?0:n)},E.setCMYK=function(e,n,t,i,l){var n=(1-n)*(1-l),n=(e=e&65535|(255<(s=Math.round(255*n))?255:s<0?0:s)<<16,(1-t)*(1-l)),s=Math.round(255*n),n=(1-i)*(1-l);return e=(e=e&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<(s=Math.round(255*n))?255:s<0?0:s)},E.setHSB=function(e,n,t,i){var t=i*t,l=i-t,i=n,s=t,n=(i%=360)/60,r=s*(1-Math.abs(n%2-1))+l;switch(s+=l,0|n){case 0:e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16;var a=Math.round(255*r),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a)}return e},E.setHSL=function(e,n,t,i){var t=(1-Math.abs(2*i-1))*t,l=i-t/2,i=n,s=t,n=(i%=360)/60,r=s*(1-Math.abs(n%2-1))+l;switch(s+=l,0|n){case 0:e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16;var a=Math.round(255*r),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a)}return e},E.setHSChromaMatch=function(e,n,t,i,l){var n=(n%=360)/60,s=i*(1-Math.abs(n%2-1))+l;switch(i+=l,0|n){case 0:e=e&65535|(255<(r=Math.round(255*i))?255:r<0?0:r)<<16;var r=Math.round(255*s),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 1:r=(e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,Math.round(255*i)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*l));e=e&16776960|(255<r?255:r<0?0:r);break;case 2:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*i)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*s));e=e&16776960|(255<r?255:r<0?0:r);break;case 3:r=(e=e&65535|(255<(r=Math.round(255*l))?255:r<0?0:r)<<16,Math.round(255*s)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*i));e=e&16776960|(255<r?255:r<0?0:r);break;case 4:r=(e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*i));e=e&16776960|(255<r?255:r<0?0:r);break;case 5:r=(e=e&65535|(255<(r=Math.round(255*i))?255:r<0?0:r)<<16,Math.round(255*l)),r=(e=e&16711935|(255<r?255:r<0?0:r)<<8,Math.round(255*s));e=e&16776960|(255<r?255:r<0?0:r)}return e},E._new=function(e){return e=null==e?0:e},E.get_red=function(e){return e>>16&255},E.get_green=function(e){return e>>8&255},E.get_blue=function(e){return 255&e},E.get_redFloat=function(e){return(e>>16&255)/255},E.get_greenFloat=function(e){return(e>>8&255)/255},E.get_blueFloat=function(e){return(255&e)/255},E.set_red=function(e,n){return e=e&65535|(255<n?255:n<0?0:n)<<16,n},E.set_green=function(e,n){return e=e&16711935|(255<n?255:n<0?0:n)<<8,n},E.set_blue=function(e,n){return e=e&16776960|(255<n?255:n<0?0:n),n},E.set_redFloat=function(e,n){var t=Math.round(255*n);return e=e&65535|(255<t?255:t<0?0:t)<<16,n},E.set_greenFloat=function(e,n){var t=Math.round(255*n);return e=e&16711935|(255<t?255:t<0?0:t)<<8,n},E.set_blueFloat=function(e,n){var t=Math.round(255*n);return e=e&16776960|(255<t?255:t<0?0:t),n},E.get_cyan=function(e){return(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},E.get_magenta=function(e){return(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},E.get_yellow=function(e){return(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},E.get_black=function(e){return 1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},E.set_cyan=function(e,n){var t=(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),l=1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),s=(1-n)*(1-l),s=(e=e&65535|(255<(r=Math.round(255*s))?255:r<0?0:r)<<16,(1-t)*(1-l)),r=Math.round(255*s),s=(1-i)*(1-l);return e=(e=e&16711935|(255<r?255:r<0?0:r)<<8)&16776960|(255<(r=Math.round(255*s))?255:r<0?0:r),n},E.set_magenta=function(e,n){var t=(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),l=(1-(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)))*(1-i),l=(e=e&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(1-n)*(1-i)),s=Math.round(255*l),l=(1-t)*(1-i);return e=(e=e&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<(s=Math.round(255*l))?255:s<0?0:s),n},E.set_yellow=function(e,n){var t=(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),l=(1-(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)))*(1-i),l=(e=e&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(1-t)*(1-i)),s=Math.round(255*l),l=(1-n)*(1-i);return e=(e=e&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<(s=Math.round(255*l))?255:s<0?0:s),n},E.set_black=function(e,n){var t=(1-(e>>8&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=(1-(255&e)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),l=(1-(1-(e>>16&255)/255-(1-Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)))*(1-n),l=(e=e&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(1-t)*(1-n)),s=Math.round(255*l),l=(1-i)*(1-n);return e=(e=e&16711935|(255<s?255:s<0?0:s)<<8)&16776960|(255<(s=Math.round(255*l))?255:s<0?0:s),n},E.get_hue=function(e){var n=0;return(n=0!=Math.atan2(Math.sqrt(3)*((e>>8&255)/255-(255&e)/255),(e>>16&255)/255*2-(e>>8&255)/255-(255&e)/255)?180/Math.PI*Math.atan2(Math.sqrt(3)*((e>>8&255)/255-(255&e)/255),(e>>16&255)/255*2-(e>>8&255)/255-(255&e)/255):n)<0?n+360:n},E.get_brightness=function(e){return Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},E.get_saturation=function(e){return(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},E.get_lightness=function(e){return(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))+Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/2},E.set_hue=function(e,n){var t=Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),i=t*((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))),l=t-i,t=n,s=i,i=(t%=360)/60,r=s*(1-Math.abs(i%2-1))+l;switch(s+=l,0|i){case 0:e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16;var a=Math.round(255*r),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a)}return n},E.set_saturation=function(e,n){var t=E.get_hue(e),i=Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),l=i*n,s=i-l,i=t,r=l,t=(i%=360)/60,a=r*(1-Math.abs(t%2-1))+s;switch(r+=s,0|t){case 0:e=e&65535|(255<(h=Math.round(255*r))?255:h<0?0:h)<<16;var h=Math.round(255*a),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*s));e=e&16776960|(255<h?255:h<0?0:h);break;case 1:h=(e=e&65535|(255<(h=Math.round(255*a))?255:h<0?0:h)<<16,Math.round(255*r)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*s));e=e&16776960|(255<h?255:h<0?0:h);break;case 2:h=(e=e&65535|(255<(h=Math.round(255*s))?255:h<0?0:h)<<16,Math.round(255*r)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*a));e=e&16776960|(255<h?255:h<0?0:h);break;case 3:h=(e=e&65535|(255<(h=Math.round(255*s))?255:h<0?0:h)<<16,Math.round(255*a)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*r));e=e&16776960|(255<h?255:h<0?0:h);break;case 4:h=(e=e&65535|(255<(h=Math.round(255*a))?255:h<0?0:h)<<16,Math.round(255*s)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*r));e=e&16776960|(255<h?255:h<0?0:h);break;case 5:h=(e=e&65535|(255<(h=Math.round(255*r))?255:h<0?0:h)<<16,Math.round(255*s)),h=(e=e&16711935|(255<h?255:h<0?0:h)<<8,Math.round(255*a));e=e&16776960|(255<h?255:h<0?0:h)}return n},E.set_brightness=function(e,n){var t=E.get_hue(e),i=n*((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))),l=n-i,s=i,i=(t%=360)/60,r=s*(1-Math.abs(i%2-1))+l;switch(s+=l,0|i){case 0:e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16;var a=Math.round(255*r),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a)}return n},E.set_lightness=function(e,n){var t=E.get_hue(e),i=(1-Math.abs(2*n-1))*((Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))),l=n-i/2,s=i,i=(t%=360)/60,r=s*(1-Math.abs(i%2-1))+l;switch(s+=l,0|i){case 0:e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16;var a=Math.round(255*r),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 1:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*l));e=e&16776960|(255<a?255:a<0?0:a);break;case 2:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*s)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a);break;case 3:a=(e=e&65535|(255<(a=Math.round(255*l))?255:a<0?0:a)<<16,Math.round(255*r)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 4:a=(e=e&65535|(255<(a=Math.round(255*r))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*s));e=e&16776960|(255<a?255:a<0?0:a);break;case 5:a=(e=e&65535|(255<(a=Math.round(255*s))?255:a<0?0:a)<<16,Math.round(255*l)),a=(e=e&16711935|(255<a?255:a<0?0:a)<<8,Math.round(255*r));e=e&16776960|(255<a?255:a<0?0:a)}return n},E.maxColor=function(e){return Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))},E.minColor=function(e){return Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255))},E.boundChannel=function(e,n){return 255<n?255:n<0?0:n},E.roundDecimal=function(e,n){for(var t=1,i=0,l=n;i<l;){i++;t*=10}return Math.round(e*t)/t},E.bound=function(e,n,t){n=null!=n&&e<n?n:e;return null!=t&&t<n?t:n},E.toString=function(e){return-1==e?"NONE":"0x"+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2)},E.get_hueHSLuv=function(e){var n,t=E._hsluvCacheMap.intMap.h[0|e],t=null!=t?t:0;return 0==t&&(t=1+(E._hsluvCacheValues.length/3|0),E._hsluvCacheMap.set(e,t),null==(n=E._hsluvResult)&&(n=[0,0,0]),E._hsluvTuple[0]=(e>>16&255)/255,E._hsluvTuple[1]=(e>>8&255)/255,E._hsluvTuple[2]=(255&e)/255,S.rgbToHsluv(E._hsluvTuple,n),n[1]*=.01,n[2]*=.01,E._hsluvCacheValues.push(E._hsluvResult[0]),E._hsluvCacheValues.push(E._hsluvResult[1]),E._hsluvCacheValues.push(E._hsluvResult[2])),E._hsluvCacheValues[3*(t-1)]},E.set_hueHSLuv=function(e,n){var t=E.get_saturationHSLuv(e),i=E.get_lightnessHSLuv(e);if(E._hsluvTuple[0]=n,E._hsluvTuple[1]=100*t,E._hsluvTuple[2]=100*i,.001<i){S.hsluvToRgb(E._hsluvTuple,E._hsluvResult);var l=E._hsluvResult[0];l<0&&(l=0);e=e&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(l=E._hsluvResult[1])<0&&(l=0);var s=Math.round(255*l),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,(l=E._hsluvResult[2])<0&&(l=0),Math.round(255*l));e=e&16776960|(255<s?255:s<0?0:s)}else{var l=(1-Math.abs(2*i-1))*t,r=i-l/2,t=n,a=l,i=(t%=360)/60,h=a*(1-Math.abs(i%2-1))+r;switch(a+=r,0|i){case 0:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 1:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 2:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s);break;case 3:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 4:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 5:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s)}}return n},E.get_saturationHSLuv=function(e){var n,t=E._hsluvCacheMap.intMap.h[0|e],t=null!=t?t:0;return 0==t&&(t=1+(E._hsluvCacheValues.length/3|0),E._hsluvCacheMap.set(e,t),null==(n=E._hsluvResult)&&(n=[0,0,0]),E._hsluvTuple[0]=(e>>16&255)/255,E._hsluvTuple[1]=(e>>8&255)/255,E._hsluvTuple[2]=(255&e)/255,S.rgbToHsluv(E._hsluvTuple,n),n[1]*=.01,n[2]*=.01,E._hsluvCacheValues.push(E._hsluvResult[0]),E._hsluvCacheValues.push(E._hsluvResult[1]),E._hsluvCacheValues.push(E._hsluvResult[2])),E._hsluvCacheValues[3*(t-1)+1]},E.set_saturationHSLuv=function(e,n){var t=E.get_hueHSLuv(e),i=E.get_lightnessHSLuv(e);if(E._hsluvTuple[0]=t,E._hsluvTuple[1]=100*n,E._hsluvTuple[2]=100*i,.001<i){S.hsluvToRgb(E._hsluvTuple,E._hsluvResult);var l=E._hsluvResult[0];l<0&&(l=0);e=e&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(l=E._hsluvResult[1])<0&&(l=0);var s=Math.round(255*l),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,(l=E._hsluvResult[2])<0&&(l=0),Math.round(255*l));e=e&16776960|(255<s?255:s<0?0:s)}else{var l=(1-Math.abs(2*i-1))*n,r=i-l/2,i=t,a=l,t=(i%=360)/60,h=a*(1-Math.abs(t%2-1))+r;switch(a+=r,0|t){case 0:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 1:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 2:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s);break;case 3:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 4:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 5:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s)}}return n},E.get_lightnessHSLuv=function(e){var n,t=E._hsluvCacheMap.intMap.h[0|e],t=null!=t?t:0;return 0==t&&(t=1+(E._hsluvCacheValues.length/3|0),E._hsluvCacheMap.set(e,t),null==(n=E._hsluvResult)&&(n=[0,0,0]),E._hsluvTuple[0]=(e>>16&255)/255,E._hsluvTuple[1]=(e>>8&255)/255,E._hsluvTuple[2]=(255&e)/255,S.rgbToHsluv(E._hsluvTuple,n),n[1]*=.01,n[2]*=.01,E._hsluvCacheValues.push(E._hsluvResult[0]),E._hsluvCacheValues.push(E._hsluvResult[1]),E._hsluvCacheValues.push(E._hsluvResult[2])),E._hsluvCacheValues[3*(t-1)+2]},E.set_lightnessHSLuv=function(e,n){var t=E.get_hueHSLuv(e),i=E.get_saturationHSLuv(e);if(E._hsluvTuple[0]=t,E._hsluvTuple[1]=100*i,E._hsluvTuple[2]=100*n,.001<n){S.hsluvToRgb(E._hsluvTuple,E._hsluvResult);var l=E._hsluvResult[0];l<0&&(l=0);e=e&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(l=E._hsluvResult[1])<0&&(l=0);var s=Math.round(255*l),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,(l=E._hsluvResult[2])<0&&(l=0),Math.round(255*l));e=e&16776960|(255<s?255:s<0?0:s)}else{var l=(1-Math.abs(2*n-1))*i,r=n-l/2,i=t,a=l,t=(i%=360)/60,h=a*(1-Math.abs(t%2-1))+r;switch(a+=r,0|t){case 0:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 1:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 2:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s);break;case 3:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 4:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 5:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s)}}return n},E._getOrCreateCachedHSLuvComponent=function(e,n){var t,i=E._hsluvCacheMap.intMap.h[0|e],i=null!=i?i:0;return 0==i&&(i=1+(E._hsluvCacheValues.length/3|0),E._hsluvCacheMap.set(e,i),null==(t=E._hsluvResult)&&(t=[0,0,0]),E._hsluvTuple[0]=(e>>16&255)/255,E._hsluvTuple[1]=(e>>8&255)/255,E._hsluvTuple[2]=(255&e)/255,S.rgbToHsluv(E._hsluvTuple,t),t[1]*=.01,t[2]*=.01,E._hsluvCacheValues.push(E._hsluvResult[0]),E._hsluvCacheValues.push(E._hsluvResult[1]),E._hsluvCacheValues.push(E._hsluvResult[2])),E._hsluvCacheValues[3*(i-1)+n]},E.fromHSLuv=function(e,n,t){var i=0;if(E._hsluvTuple[0]=e,E._hsluvTuple[1]=100*n,E._hsluvTuple[2]=100*t,.001<t){S.hsluvToRgb(E._hsluvTuple,E._hsluvResult);var l=E._hsluvResult[0];l<0&&(l=0);i=i&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(l=E._hsluvResult[1])<0&&(l=0);var s=Math.round(255*l),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,(l=E._hsluvResult[2])<0&&(l=0),Math.round(255*l)),i=i&16776960|(255<s?255:s<0?0:s)}else{var l=(1-Math.abs(2*t-1))*n,r=t-l/2,n=e,a=l,t=(n%=360)/60,h=a*(1-Math.abs(t%2-1))+r;switch(a+=r,0|t){case 0:s=(i=i&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*h)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));i=i&16776960|(255<s?255:s<0?0:s);break;case 1:s=(i=i&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*a)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));i=i&16776960|(255<s?255:s<0?0:s);break;case 2:s=(i=i&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*a)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));i=i&16776960|(255<s?255:s<0?0:s);break;case 3:s=(i=i&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*h)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));i=i&16776960|(255<s?255:s<0?0:s);break;case 4:s=(i=i&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*r)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));i=i&16776960|(255<s?255:s<0?0:s);break;case 5:s=(i=i&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*r)),s=(i=i&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));i=i&16776960|(255<s?255:s<0?0:s)}}return i},E.setHSLuv=function(e,n,t,i){if(E._hsluvTuple[0]=n,E._hsluvTuple[1]=100*t,E._hsluvTuple[2]=100*i,.001<i){S.hsluvToRgb(E._hsluvTuple,E._hsluvResult);var l=E._hsluvResult[0];l<0&&(l=0);e=e&65535|(255<(s=Math.round(255*l))?255:s<0?0:s)<<16,(l=E._hsluvResult[1])<0&&(l=0);var s=Math.round(255*l),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,(l=E._hsluvResult[2])<0&&(l=0),Math.round(255*l));e=e&16776960|(255<s?255:s<0?0:s)}else{var l=(1-Math.abs(2*i-1))*t,r=i-l/2,t=n,a=l,i=(t%=360)/60,h=a*(1-Math.abs(i%2-1))+r;switch(a+=r,0|i){case 0:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 1:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*r));e=e&16776960|(255<s?255:s<0?0:s);break;case 2:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*a)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s);break;case 3:s=(e=e&65535|(255<(s=Math.round(255*r))?255:s<0?0:s)<<16,Math.round(255*h)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 4:s=(e=e&65535|(255<(s=Math.round(255*h))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*a));e=e&16776960|(255<s?255:s<0?0:s);break;case 5:s=(e=e&65535|(255<(s=Math.round(255*a))?255:s<0?0:s)<<16,Math.round(255*r)),s=(e=e&16711935|(255<s?255:s<0?0:s)<<8,Math.round(255*h));e=e&16776960|(255<s?255:s<0?0:s)}}return e},E.getHSLuv=function(e,n){return null==n&&(n=[0,0,0]),E._hsluvTuple[0]=(e>>16&255)/255,E._hsluvTuple[1]=(e>>8&255)/255,E._hsluvTuple[2]=(255&e)/255,S.rgbToHsluv(E._hsluvTuple,n),n[1]*=.01,n[2]*=.01,n},(L["ceramic.Component"]=H0).__name__="ceramic.Component",H0.__isInterface__=!0,H0.prototype={initializerName:null,setEntity:null,getEntity:null,bindAsComponent:null,__class__:H0},function(e){null==e&&(e=10),this.fps=0,this.index=0,this.size=e,this.frames=[];for(var n=0,t=e;n<t;){n++;this.frames.push(0)}}),hn=((L["ceramic.ComputeFps"]=an).__name__="ceramic.ComputeFps",an.prototype={frames:null,index:null,size:null,fps:null,addFrame:function(e){this.frames[this.index]=e,this.index=(this.index+1)%this.size;for(var n=0,t=0,i=this.size;t<i;){var l=t++;n+=this.frames[l]}n=0<n?this.size/n:0,this.fps=Math.round(Math.min(999,n))},__class__:an},(L["ceramic.ConvertField"]=J0).__name__="ceramic.ConvertField",J0.__isInterface__=!0,J0.prototype={basicToField:null,fieldToBasic:null,__class__:J0},function(){}),un=((L["ceramic.ConvertArray"]=hn).__name__="ceramic.ConvertArray",hn.__interfaces__=[J0],hn.prototype={basicToField:function(e,n,t,i,l){l(null==i?null:[].concat(i))},fieldToBasic:function(e,n,t){return null==t?null:[].concat(t)},__class__:hn},function(){this.preferStringBasic=!1}),cn=((L["ceramic.ConvertColor"]=un).__name__="ceramic.ConvertColor",un.__interfaces__=[J0],un.prototype={preferStringBasic:null,basicToField:function(e,n,t,i,l){l(null!=i?"string"==typeof i?E.fromString(i):0|i:0)},fieldToBasic:function(e,n,t){var i;return this.preferStringBasic?"#"+((i=null==(i=!1)?!0:i)?"0x":"")+B.hex(t>>16&255,2)+B.hex(t>>8&255,2)+B.hex(255&t,2):t},__class__:un},function(){}),on=((L["ceramic.ConvertComponentMap"]=cn).__name__="ceramic.ConvertComponentMap",cn.__interfaces__=[J0],cn.prototype={basicToField:function(e,n,t,i,l){if(null==i)l(null);else{for(var s=new z,r=0,a=N.fields(i);r<a.length;){var h=a[r];++r,i[h];he.app.logger.error("Not using component initializers anymore. Need to implement event based solution!",{fileName:"../../../../ceramic/runtime/src/ceramic/ConvertComponentMap.hx",lineNumber:38,className:"ceramic.ConvertComponentMap",methodName:"basicToField"})}l(s)}},fieldToBasic:function(e,n,t){if(null==t)return null;for(var i={},l=t.h,s=Object.keys(l),r=s.length,a=0;a<r;){var h=s[a++],u=t.h[h];null!=u&&null!=u.initializerName&&(i[h]=u.initializerName)}return i},__class__:cn},function(){}),_n=((L["ceramic.ConvertFont"]=on).__name__="ceramic.ConvertFont",on.__interfaces__=[J0],on.prototype={basicToField:function(e,n,t,i,l){null!=i?i==he.app.defaultFont.asset.name?l(he.app.defaultFont):t.ensureFont(i,null,null,function(e){l(null!=e?e.get_font():null)}):l(null)},fieldToBasic:function(e,n,t){return null==t||null==t.asset?null:t.asset.name},__class__:on},function(){}),dn=((L["ceramic.ConvertFragmentData"]=_n).__name__="ceramic.ConvertFragmentData",_n.__interfaces__=[J0],_n.prototype={basicToField:function(e,n,t,i,l){l(i)},fieldToBasic:function(e,n,t){return t},__class__:_n},function(){}),bn=((L["ceramic.ConvertIntBoolMap"]=dn).__name__="ceramic.ConvertIntBoolMap",dn.__interfaces__=[J0],dn.prototype={basicToField:function(e,n,t,i,l){if(null==i)l(null);else{for(var s=new rn(16,.5,!1),r=0,a=N.fields(i);r<a.length;){var h=a[r];++r,s.set(V.parseInt(h),N.field(i,h)?1:0)}l(s)}},fieldToBasic:function(e,n,t){return null==t?null:(he.app.logger.warning("ConvertIntBoolMap.fieldToBasic() not implemented!",{fileName:"../../../../ceramic/runtime/src/ceramic/ConvertIntBoolMap.hx",lineNumber:47,className:"ceramic.ConvertIntBoolMap",methodName:"fieldToBasic"}),{})},__class__:dn},function(){}),gn=((L["ceramic.ConvertMap"]=bn).__name__="ceramic.ConvertMap",bn.__interfaces__=[J0],bn.prototype={basicToField:function(e,n,t,i,l){if(null==i)l(null);else{for(var s=new z,r=0,a=N.fields(i);r<a.length;){var h=a[r];++r,s.h[h]=i[h]}l(s)}},fieldToBasic:function(e,n,t){if(null==t)return null;for(var i={},l=t.h,s=Object.keys(l),r=s.length,a=0;a<r;){var h=s[a++];i[h]=t.h[h]}return i},__class__:bn},function(){}),On=((L["ceramic.ConvertTexture"]=gn).__name__="ceramic.ConvertTexture",gn.__interfaces__=[J0],gn.prototype={basicToField:function(e,n,t,i,l){null!=i?t.ensureImage(i,null,null,function(e){l(null!=e?e.get_texture():null)}):l(null)},fieldToBasic:function(e,n,t){return null==t||null==t.asset?null:t.asset.name},__class__:gn},(L["ceramic.ConvertTilemapData"]=S0).__name__="ceramic.ConvertTilemapData",S0.__interfaces__=[J0],S0.prototype={basicToField:function(e,n,t,i,l){null!=i?bi.ensureTilemap(t,i,null,null,function(e){l(null!=e?e.get_tilemapData():null)}):l(null)},fieldToBasic:function(e,n,t){return null==t||null==t.asset?null:t.asset.name},__class__:S0},(L["ceramic.Csv"]=T0).__name__="ceramic.Csv",T0.parse=function(e){for(var n="",t=0,i="",l=(e=B.trim(e)).length,s=!1,r="",a=[];t<l;)if(i=e.charAt(t),s)'"'==i?'""'==i+e.charAt(t+1)?(r+='"',t+=2):(s=!1,++t):(r+=i,++t);else{if("\n"==i){++t;break}""==r&&'"'==i?s=!0:""==n?","==i||";"==i?(n=i,a.push(B.replace(r,"\r","")),r=""):r+=i:i==n?(a.push(B.replace(r,"\r","")),r=""):r+=i,++t}""!=r&&a.push(B.replace(r,"\r",""));for(var s=!1,r="",h={},u=!1,c=[],o=0,_="",d=-1;t<l;)i=e.charAt(t),s?'"'==i?'""'==i+e.charAt(t+1)?(r+='"',t+=2):(s=!1,++t):(r+=i,++t):("\n"==i?(null!=(_=a[o++])?(h[_]=B.replace(r,"\r",""),u=!0):-1==d&&(d=c.length),r="",c.push(h),u=!1,o=0,h={}):""==r&&'"'==i?s=!0:i==n?(null!=(_=a[o++])?(h[_]=B.replace(r,"\r",""),u=!0):-1==d&&(d=c.length),r=""):r+=i,++t);return null!=(_=a[o++])?(h[_]=B.replace(r,"\r",""),u=!0):-1==d&&(T0.warning(h),d=c.length),r="",u&&c.push(h),0<=d&&T0.warning("Malformed CSV: too many columns at row #"+d),c},T0.stringify=function(e,n){if(null==n){n=[];for(var t=Object.create(null),i=0;i<e.length;)for(var l=e[i],s=(++i,0),r=N.fields(l);s<r.length;){var a=r[s];++s,Object.prototype.hasOwnProperty.call(t,a)||(n.push(a),t[a]=!0)}}for(var h="",u=0,i=0;i<n.length;){a=n[i];if(++i,0<u++&&(h+=","),0!=a.length){h+='"';for(s=0,r=a.length;s<r;){var c=s++;h+='"'==(b=a.charAt(c))?'""':V.string(b)}h+='"'}}for(i=0;i<e.length;)for(l=e[i],s=(++i,h+="\n",u=0);s<n.length;){var a=n[s],o=(++s,0<u++&&(h+=","),N.field(l,a)),_=null!=o?V.string(o):"";if(0!=_.length){h+='"';for(var r=0,d=_.length;r<d;){var b,c=r++;h+='"'==(b=_.charAt(c))?'""':V.string(b)}h+='"'}}return h},T0.warning=function(e){he.app.logger.warning(e,{fileName:"../../../../ceramic/runtime/src/ceramic/Csv.hx",lineNumber:238,className:"ceramic.Csv",methodName:"warning"})},function(e,n,t,i,l){this.kind=e,this.add=n,this.extensions=t,this.dir=i,this.types=l}),fn=((L["ceramic.CustomAssetKind"]=On).__name__="ceramic.CustomAssetKind",On.prototype={kind:null,add:null,extensions:null,dir:null,types:null,__class__:On},function(e,n,t){this.unobservedDatabase=null,this.databaseAutoruns=null,i0.call(this,"database",e,n,t)}),pn=((L["ceramic.DatabaseAsset"]=fn).__name__="ceramic.DatabaseAsset",fn.__super__=i0,fn.prototype=$extend(i0.prototype,{databaseAutoruns:null,get_database:function(){var e,n,t=this.unobservedDatabase;return null!=M.current&&(e=M.current,null!=(n=this.databaseAutoruns)||(n=M.getAutorunArray(),null!=(this.databaseAutoruns=n)))&&e.bindToAutorunArray(n),t},set_database:function(e){var n=this.unobservedDatabase;return this.unobservedDatabase=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitDatabaseChange(e,n),null!=(n=this.databaseAutoruns)&&(this.databaseAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateDatabase:function(){var e=this.unobservedDatabase,e=(this.emitDatabaseChange(e,e),this.databaseAutoruns);null!=e&&(this.databaseAutoruns=null,M.invalidateAutorunArray(e))},unobservedDatabase:null,__cbOnDatabaseChange:null,__cbOnceDatabaseChange:null,__cbOnOwnerUnbindDatabaseChange:null,__cbOnceOwnerUnbindDatabaseChange:null,emitDatabaseChange:function(e,n){var t=0;if(null!=this.__cbOnDatabaseChange&&(t+=this.__cbOnDatabaseChange.length),null!=this.__cbOnceDatabaseChange&&(t+=this.__cbOnceDatabaseChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnDatabaseChange)for(var r=0,a=this.__cbOnDatabaseChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnDatabaseChange[h],++s):--t}if(null!=this.__cbOnceDatabaseChange){for(var u=null,c=null,r=0,a=this.__cbOnceDatabaseChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceDatabaseChange[h],this.__cbOnceDatabaseChange[h]=null,o=this.__cbOnceOwnerUnbindDatabaseChange[h],(this.__cbOnceOwnerUnbindDatabaseChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindDatabaseChange[h]),c.push(this.__cbOnceDatabaseChange[h]))}this.__cbOnceOwnerUnbindDatabaseChange=u,this.__cbOnceDatabaseChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onDatabaseChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event databaseChange because owner is destroyed!");var l=function(e){null!=t&&(i.offDatabaseChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindDatabaseChange&&(this.__cbOnOwnerUnbindDatabaseChange=[]),this.__cbOnOwnerUnbindDatabaseChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindDatabaseChange&&(this.__cbOnOwnerUnbindDatabaseChange=[]),this.__cbOnOwnerUnbindDatabaseChange.push(null);null==this.__cbOnDatabaseChange&&(this.__cbOnDatabaseChange=[]),this.__cbOnDatabaseChange.push(t)},onceDatabaseChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event databaseChange because owner is destroyed!");var l=function(e){null!=t&&(i.offDatabaseChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindDatabaseChange&&(this.__cbOnceOwnerUnbindDatabaseChange=[]),this.__cbOnceOwnerUnbindDatabaseChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindDatabaseChange&&(this.__cbOnceOwnerUnbindDatabaseChange=[]),this.__cbOnceOwnerUnbindDatabaseChange.push(null);null==this.__cbOnceDatabaseChange&&(this.__cbOnceDatabaseChange=[]),this.__cbOnceDatabaseChange.push(t)},offDatabaseChange:function(e){if(null!=e){var n;null!=this.__cbOnDatabaseChange&&-1!=(n=this.__cbOnDatabaseChange.indexOf(e))&&(this.__cbOnDatabaseChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindDatabaseChange[n])&&s(),this.__cbOnOwnerUnbindDatabaseChange.splice(n,1)),null!=this.__cbOnceDatabaseChange&&-1!=(n=this.__cbOnceDatabaseChange.indexOf(e))&&(this.__cbOnceDatabaseChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindDatabaseChange[n])&&s(),this.__cbOnceOwnerUnbindDatabaseChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDatabaseChange){for(var t=0,i=this.__cbOnOwnerUnbindDatabaseChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindDatabaseChange[l])&&s()}this.__cbOnOwnerUnbindDatabaseChange=null}if(null!=this.__cbOnceOwnerUnbindDatabaseChange){for(t=0,i=this.__cbOnceOwnerUnbindDatabaseChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindDatabaseChange[l])&&s()}this.__cbOnceOwnerUnbindDatabaseChange=null}this.__cbOnDatabaseChange=null,this.__cbOnceDatabaseChange=null}},listensDatabaseChange:function(){return null!=this.__cbOnDatabaseChange&&0<this.__cbOnDatabaseChange.length||null!=this.__cbOnceDatabaseChange&&0<this.__cbOnceDatabaseChange.length},load:function(){var e,n,t,i,l=this;this.set_status(Je.LOADING),null==this.path?(he.app.logger.warning("Cannot load database asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:21,className:"ceramic.DatabaseAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1)):(e={},null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),n=this.path,t=Re.realAssetPath(n,this.runtimeAssets),0<(i=Re.getReloadCount(t))&&(t+="?hot="+i,n+="?hot="+i),he.app.logger.info("Load database "+n,{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:42,className:"ceramic.DatabaseAsset",methodName:"load"}),he.app.backend.texts.load(t,e,function(e){if(null!=e){try{l.set_database(T0.parse(e))}catch(e){return Al.lastError=e,l.set_status(Je.BROKEN),he.app.logger.error("Failed to parse database at path: "+l.path,{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:50,className:"ceramic.DatabaseAsset",methodName:"load"}),void l.emitComplete(!1)}l.set_status(Je.READY),l.emitComplete(!0)}else l.set_status(Je.BROKEN),he.app.logger.error("Failed to load database at path: "+l.path,{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:59,className:"ceramic.DatabaseAsset",methodName:"load"}),l.emitComplete(!1)}))},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload database (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:82,className:"ceramic.DatabaseAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),this.set_database(null))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offDatabaseChange()},__class__:fn,__properties__:$extend(i0.prototype.__properties__,{set_database:"set_database",get_database:"get_database"})}),(L["ceramic.DynamicData"]=W0).__name__="ceramic.DynamicData",W0.__interfaces__=[H0],W0.__super__=l,W0.prototype=$extend(l.prototype,{_data:null,get_hasData:function(){return null!=this._data},get_data:function(){return null==this._data&&(this._data={}),this._data},set_data:function(e){return this._data=e},bindAsComponent:function(){},entity:null,setEntity:function(e){this.entity=e instanceof l?e:null},getEntity:function(){return this.entity},initializerName:null,__class__:W0,__properties__:$extend(l.prototype.__properties__,{set_data:"set_data",get_data:"get_data",get_hasData:"get_hasData"})}),I["ceramic.Easing"]={__ename__:"ceramic.Easing",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"ceramic.Easing",toString:d},LINEAR:{_hx_name:"LINEAR",_hx_index:1,__enum__:"ceramic.Easing",toString:d},BACK_EASE_IN:{_hx_name:"BACK_EASE_IN",_hx_index:2,__enum__:"ceramic.Easing",toString:d},BACK_EASE_IN_OUT:{_hx_name:"BACK_EASE_IN_OUT",_hx_index:3,__enum__:"ceramic.Easing",toString:d},BACK_EASE_OUT:{_hx_name:"BACK_EASE_OUT",_hx_index:4,__enum__:"ceramic.Easing",toString:d},QUAD_EASE_IN:{_hx_name:"QUAD_EASE_IN",_hx_index:5,__enum__:"ceramic.Easing",toString:d},QUAD_EASE_IN_OUT:{_hx_name:"QUAD_EASE_IN_OUT",_hx_index:6,__enum__:"ceramic.Easing",toString:d},QUAD_EASE_OUT:{_hx_name:"QUAD_EASE_OUT",_hx_index:7,__enum__:"ceramic.Easing",toString:d},CUBIC_EASE_IN:{_hx_name:"CUBIC_EASE_IN",_hx_index:8,__enum__:"ceramic.Easing",toString:d},CUBIC_EASE_IN_OUT:{_hx_name:"CUBIC_EASE_IN_OUT",_hx_index:9,__enum__:"ceramic.Easing",toString:d},CUBIC_EASE_OUT:{_hx_name:"CUBIC_EASE_OUT",_hx_index:10,__enum__:"ceramic.Easing",toString:d},QUART_EASE_IN:{_hx_name:"QUART_EASE_IN",_hx_index:11,__enum__:"ceramic.Easing",toString:d},QUART_EASE_IN_OUT:{_hx_name:"QUART_EASE_IN_OUT",_hx_index:12,__enum__:"ceramic.Easing",toString:d},QUART_EASE_OUT:{_hx_name:"QUART_EASE_OUT",_hx_index:13,__enum__:"ceramic.Easing",toString:d},QUINT_EASE_IN:{_hx_name:"QUINT_EASE_IN",_hx_index:14,__enum__:"ceramic.Easing",toString:d},QUINT_EASE_IN_OUT:{_hx_name:"QUINT_EASE_IN_OUT",_hx_index:15,__enum__:"ceramic.Easing",toString:d},QUINT_EASE_OUT:{_hx_name:"QUINT_EASE_OUT",_hx_index:16,__enum__:"ceramic.Easing",toString:d},BOUNCE_EASE_IN:{_hx_name:"BOUNCE_EASE_IN",_hx_index:17,__enum__:"ceramic.Easing",toString:d},BOUNCE_EASE_IN_OUT:{_hx_name:"BOUNCE_EASE_IN_OUT",_hx_index:18,__enum__:"ceramic.Easing",toString:d},BOUNCE_EASE_OUT:{_hx_name:"BOUNCE_EASE_OUT",_hx_index:19,__enum__:"ceramic.Easing",toString:d},ELASTIC_EASE_IN:{_hx_name:"ELASTIC_EASE_IN",_hx_index:20,__enum__:"ceramic.Easing",toString:d},ELASTIC_EASE_IN_OUT:{_hx_name:"ELASTIC_EASE_IN_OUT",_hx_index:21,__enum__:"ceramic.Easing",toString:d},ELASTIC_EASE_OUT:{_hx_name:"ELASTIC_EASE_OUT",_hx_index:22,__enum__:"ceramic.Easing",toString:d},EXPO_EASE_IN:{_hx_name:"EXPO_EASE_IN",_hx_index:23,__enum__:"ceramic.Easing",toString:d},EXPO_EASE_IN_OUT:{_hx_name:"EXPO_EASE_IN_OUT",_hx_index:24,__enum__:"ceramic.Easing",toString:d},EXPO_EASE_OUT:{_hx_name:"EXPO_EASE_OUT",_hx_index:25,__enum__:"ceramic.Easing",toString:d},SINE_EASE_IN:{_hx_name:"SINE_EASE_IN",_hx_index:26,__enum__:"ceramic.Easing",toString:d},SINE_EASE_IN_OUT:{_hx_name:"SINE_EASE_IN_OUT",_hx_index:27,__enum__:"ceramic.Easing",toString:d},SINE_EASE_OUT:{_hx_name:"SINE_EASE_OUT",_hx_index:28,__enum__:"ceramic.Easing",toString:d},BEZIER:((b=function(e,n,t,i){return{_hx_index:29,x1:e,y1:n,x2:t,y2:i,__enum__:"ceramic.Easing",toString:d}})._hx_name="BEZIER",b.__params__=["x1","y1","x2","y2"],b),CUSTOM:((b=function(e){return{_hx_index:30,easing:e,__enum__:"ceramic.Easing",toString:d}})._hx_name="CUSTOM",b.__params__=["easing"],b)}),mn=(pn.__constructs__=[pn.NONE,pn.LINEAR,pn.BACK_EASE_IN,pn.BACK_EASE_IN_OUT,pn.BACK_EASE_OUT,pn.QUAD_EASE_IN,pn.QUAD_EASE_IN_OUT,pn.QUAD_EASE_OUT,pn.CUBIC_EASE_IN,pn.CUBIC_EASE_IN_OUT,pn.CUBIC_EASE_OUT,pn.QUART_EASE_IN,pn.QUART_EASE_IN_OUT,pn.QUART_EASE_OUT,pn.QUINT_EASE_IN,pn.QUINT_EASE_IN_OUT,pn.QUINT_EASE_OUT,pn.BOUNCE_EASE_IN,pn.BOUNCE_EASE_IN_OUT,pn.BOUNCE_EASE_OUT,pn.ELASTIC_EASE_IN,pn.ELASTIC_EASE_IN_OUT,pn.ELASTIC_EASE_OUT,pn.EXPO_EASE_IN,pn.EXPO_EASE_IN_OUT,pn.EXPO_EASE_OUT,pn.SINE_EASE_IN,pn.SINE_EASE_IN_OUT,pn.SINE_EASE_OUT,pn.BEZIER,pn.CUSTOM],(L["ceramic.EasingUtils"]=Y0).__name__="ceramic.EasingUtils",Y0.easingFromString=function(e){return D.createEnum(pn,e,Y0._emptyArray)},Y0.easingToString=function(e){return I[e.__enum__].__constructs__[e._hx_index]._hx_name},(L["ceramic.EntityData"]=Z0).__name__="ceramic.EntityData",Z0.removeData=function(e){var n=e.component("data");null!=n&&n instanceof W0&&e.removeComponent("data")},Z0.data=function(e,n){var t=e.component("data");return null==t?(t=new W0(null!=n?n:{}),e.component("data",t)):null!=n&&t.set_data(n),t.get_data()},function(){}),wn=((L["ceramic.Errors"]=mn).__name__="ceramic.Errors",mn.handleUncaughtError=function(e){for(var n=he.app,n=(null!=n.__cbOnCriticalError&&0<n.__cbOnCriticalError.length||null!=n.__cbOnceCriticalError&&n.__cbOnceCriticalError.length,Tl.exceptionStack()),t=[].concat(n),i=(t.reverse(),he.app.emitCriticalError(e,t),0);i<t.length;){var l=t[i];++i,console.log(""+V.string(Ei.stackItemToString(l)))}console.log(""+V.string("[error] "+V.string(e)))},function(){}),vn=((L["ceramic.Extensions"]=wn).__name__="ceramic.Extensions",wn.unsafeGet=function(e,n){return e[n]},wn.unsafeSet=function(e,n,t){e[n]=t},wn.setArrayLength=function(e,n){if(e.length!=n)if(e.length>n)e.splice(n,e.length-n);else for(var t=e;t.length<n;)t.push(null)},wn.randomElement=function(e){return e[Math.floor(.99999*Math.random()*e.length)]},wn.randomElementExcept=function(e,n,t){if(t=null==t?!1:t){for(var i=null;(i=e[Math.floor(.99999*Math.random()*e.length)])==n;);return i}for(var l=[],s=0;s<e.length;){var r=e[s];++s,l.push(r)}wn.shuffle(l);for(s=0;s<l.length;){r=l[s];if(++s,r!=n)return r}return null},wn.randomElementMatchingValidator=function(e,n){for(var t=[],i=0;i<e.length;){var l=e[i];++i,t.push(l)}wn.shuffle(t);for(i=0;i<t.length;){l=t[i];if(++i,n(l))return l}return null},wn.shuffle=function(e){if(null!=e)for(var n=0,t=e.length;n<t;){var i=n++,l=Math.floor((e.length-1+1)*Math.random()),s=e[i],r=e[l];e[i]=r,e[l]=s}},wn.swapElements=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},wn.removeNullElements=function(e){for(var n=0,t=0,i=e.length;n<i;){do{}while(null==e[n]&&(++t,++n<i));0!=t&&n<i&&(e[n-t]=e[n]),++n}var l=i-t;if(e.length!=l)if(e.length>l)e.splice(l,e.length-l);else for(var s=e;s.length<l;)s.push(null)},wn.setProperty=function(e,n,t){N.setProperty(e,n,t)},wn.getProperty=function(e,n){return N.getProperty(e,n)},function(){}),yn=((L["ceramic.FieldInfo"]=vn).__name__="ceramic.FieldInfo",vn.types=function(e,n){null==n&&(n=!0);var t=vn.fieldInfoMap.h[e];if(null==t){t=new z,vn.fieldInfoMap.h[e]=t;for(var i=L[e];null!=i;){var l=N.field(i,"_fieldInfo");if(null!=l)for(var s=l,r=N.fields(l),a=0;a<r.length;){var h=r[a++],u=h,h=s[h];Object.prototype.hasOwnProperty.call(t.h,u)||(t.h[u]=h.type)}if(!n)break;i=i.__super__}}return t},vn.typeOf=function(e,n){return vn.types(e).h[n]},function(){}),Cn=((L["ceramic.FieldMeta"]=yn).__name__="ceramic.FieldMeta",yn._hasMeta=function(e,n,t,i,l){e=yn._getMeta(e,n,t,l);return null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)},yn._getMeta=function(e,n,t,i){var l=null,s=i?yn.metaMapRecursive:yn.metaMap;if(Object.prototype.hasOwnProperty.call(s.h,n))l=s.h[n];else{for(l=new z;null!=e;){var r=us.getFields(e);if(null!=r)for(var a=0,h=N.fields(r);a<h.length;){var u=h[a],c=(++a,l.h[u]),o=(null==c&&(c=new z,l.h[u]=c),N.field(r,u));if(null!=o)for(var _=0,d=N.fields(o);_<d.length;){var b=d[_];++_,Object.prototype.hasOwnProperty.call(c.h,b)||(c.h[b]=N.field(o,b))}}if(!i)break;e=e.__super__}s.h[n]=l}return Object.prototype.hasOwnProperty.call(l.h,t)?l.h[t]:null},function(){}),Un=((L["ceramic.Files"]=Cn).__name__="ceramic.Files",Cn.haveSameContent=function(e,n){return he.app.logger.warning("haveSameContent() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:41,className:"ceramic.Files",methodName:"haveSameContent"}),!1},Cn.haveSameLastModified=function(e,n){return he.app.logger.warning("haveSameLastModified() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:78,className:"ceramic.Files",methodName:"haveSameLastModified"}),!1},Cn.setToSameLastModified=function(e,n){he.app.logger.warning("setToSameLastModified() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:103,className:"ceramic.Files",methodName:"setToSameLastModified"})},Cn.getFlatDirectory=function(e,n,t,i){return null==i&&(i=!0),null==t&&(t=!1),null==n&&(n=!0),[]},Cn.getLastModified=function(e){return-1},Cn.removeEmptyDirectories=function(e,n){null==n&&(n=!0),he.app.logger.warning("removeEmptyDirectories() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:234,className:"ceramic.Files",methodName:"removeEmptyDirectories"})},Cn.isEmptyDirectory=function(e,n){return null==n&&(n=!0),he.app.logger.warning("isEmptyDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:255,className:"ceramic.Files",methodName:"isEmptyDirectory"}),!1},Cn.deleteRecursive=function(e){he.app.logger.warning("deleteRecursive() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:299,className:"ceramic.Files",methodName:"deleteRecursive"})},Cn.getRelativePath=function(e,n){for(var t=h.substr(At.normalize(n),1,null).split("/"),i=h.substr(At.normalize(e),1,null).split("/"),n=Math.min(t.length,i.length),l=n,s=0,r=n;s<r;)if(t[u=s++]!=i[u]){l=u;break}for(var a=[],s=l,r=t.length;s<r;){var u=s++;a.push("..")}n=(a=a.concat(i.slice(l))).join("/");return B.endsWith(e,"/")&&!B.endsWith(n,"/")&&(n+="/"),n=B.startsWith(n,".")?n:"./"+n},Cn.copyFileWithIntermediateDirs=function(e,n){he.app.logger.warning("copyFileWithIntermediateDirs() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:355,className:"ceramic.Files",methodName:"copyFileWithIntermediateDirs"})},Cn.copyDirectory=function(e,n,t){null==t&&(t=!1),he.app.logger.warning("copyDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:389,className:"ceramic.Files",methodName:"copyDirectory"})},Cn.deleteFile=function(e){he.app.logger.warning("deleteFile() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:415,className:"ceramic.Files",methodName:"deleteFile"})},Cn.getContent=function(e){return he.app.logger.warning("getContent() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:441,className:"ceramic.Files",methodName:"getContent"}),null},Cn.getBytes=function(e){return he.app.logger.warning("getBytes() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:469,className:"ceramic.Files",methodName:"getBytes"}),null},Cn.saveContent=function(e,n){he.app.logger.warning("saveContent() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:495,className:"ceramic.Files",methodName:"saveContent"})},Cn.saveBytes=function(e,n){he.app.logger.warning("saveBytes() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:521,className:"ceramic.Files",methodName:"saveBytes"})},Cn.createDirectory=function(e){he.app.logger.warning("createDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:546,className:"ceramic.Files",methodName:"createDirectory"})},Cn.exists=function(e){return he.app.logger.warning("exists() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:598,className:"ceramic.Files",methodName:"exists"}),!1},Cn.isDirectory=function(e){return he.app.logger.warning("isDirectory() is not supported on this target",{fileName:"../../../../ceramic/runtime/src/ceramic/Files.hx",lineNumber:631,className:"ceramic.Files",methodName:"isDirectory"}),!1},function(){this.explicitRenderPendingResultCallbacks=null,this.explicitRenderState=0,this.neverEmpty=!1,this.density=-1,this.unobservedRenderTexture=null,this.renderTextureAutoruns=null,this.textureTile=null,this.textureTilePacker=null,this.explicitRender=!1,this.autoRender=!0,this.antialiasing=0,this.stencil=!0,this.depthBuffer=!0,this.textureFilter=ui.LINEAR,this.enabled=!0,this.hitVisual=null,this.destroyMeshOnRemove=!0,this.neverEmptyQuad=null,this.meshDirty=!1,this.mesh=null,this.textureId=null,this.observedDirty=!1,s.call(this),this.flags&=-17,this.content=new r,this.content.flags|=16,this.content.color=16777215,this.add(this.content),this.set_hitVisual(this),he.app.screen.onTexturesDensityChange(this,$bind(this,this.handleTexturesDensityChange))}),xn=((L["ceramic.Filter"]=Un).__name__="ceramic.Filter",Un.__interfaces__=[u],Un.__super__=s,Un.prototype=$extend(s.prototype,{__cbOnObservedDirty:null,__cbOnceObservedDirty:null,__cbOnOwnerUnbindObservedDirty:null,__cbOnceOwnerUnbindObservedDirty:null,emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnObservedDirty)for(var r=0,a=this.__cbOnObservedDirty.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnObservedDirty[h],++s):--t}if(null!=this.__cbOnceObservedDirty){for(var u=null,c=null,r=0,a=this.__cbOnceObservedDirty.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,o=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindObservedDirty[h]),c.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=u,this.__cbOnceObservedDirty=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindObservedDirty[n])&&s(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindObservedDirty[n])&&s(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindObservedDirty[l])&&s()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindObservedDirty[l])&&s()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},observedDirty:null,textureId:null,set_textureId:function(e){return this.textureId=e,null!=this.get_renderTexture()&&(this.get_renderTexture().id=e),e},mesh:null,set_mesh:function(e){var n;return this.mesh!=e&&(null!=this.mesh&&(this.destroyMeshOnRemove?(n=this.mesh,this.mesh=null,n.destroy()):this.remove(this.mesh)),this.mesh=e,null!=this.mesh&&this.add(this.mesh),this.meshDirty=!0,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},meshDirty:null,neverEmptyQuad:null,destroyMeshOnRemove:null,content:null,hitVisual:null,set_hitVisual:function(e){return this.hitVisual!=e&&(null!=this.hitVisual&&he.app.screen.removeHitVisual(this.hitVisual),this.hitVisual=e,null!=this.hitVisual)&&he.app.screen.addHitVisual(this.hitVisual),e},enabled:null,set_enabled:function(e){return this.enabled!=e&&(this.enabled=e,this.flags=!e?16|this.flags:-17&this.flags,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},textureFilter:null,set_textureFilter:function(e){return this.textureFilter!=e&&(this.textureFilter=e,null!=this.get_renderTexture())&&this.get_renderTexture().set_filter(e),e},depthBuffer:null,set_depthBuffer:function(e){return this.depthBuffer!=e&&(this.depthBuffer=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},stencil:null,set_stencil:function(e){return this.stencil!=e&&(this.stencil=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},antialiasing:null,set_antialiasing:function(e){return this.antialiasing!=e&&(this.antialiasing=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},autoRender:null,set_autoRender:function(e){return this.autoRender!=e&&(this.autoRender=e,null!=this.get_renderTexture())&&(this.get_renderTexture().autoRender=e),e},explicitRender:null,set_explicitRender:function(e){return this.explicitRender!=e&&(this.explicitRender=e,this.content.set_active(!e)),e},textureTilePacker:null,set_textureTilePacker:function(e){return this.textureTilePacker!=e&&(null!=this.textureTile&&null!=this.textureTilePacker&&(this.textureTilePacker.releaseTile(this.textureTile),this.textureTile=null,this.set_tile(null),this.set_tile(null),this.content.set_renderTarget(null)),this.textureTilePacker=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},textureTile:null,renderTextureAutoruns:null,get_renderTexture:function(){var e,n,t=this.unobservedRenderTexture;return null!=M.current&&(e=M.current,null!=(n=this.renderTextureAutoruns)||(n=M.getAutorunArray(),null!=(this.renderTextureAutoruns=n)))&&e.bindToAutorunArray(n),t},set_renderTexture:function(e){var n=this.unobservedRenderTexture;return n!=(this.unobservedRenderTexture=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitRenderTextureChange(e,n),null!=(n=this.renderTextureAutoruns))&&(this.renderTextureAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateRenderTexture:function(){var e=this.unobservedRenderTexture,e=(this.emitRenderTextureChange(e,e),this.renderTextureAutoruns);null!=e&&(this.renderTextureAutoruns=null,M.invalidateAutorunArray(e))},unobservedRenderTexture:null,__cbOnRenderTextureChange:null,__cbOnceRenderTextureChange:null,__cbOnOwnerUnbindRenderTextureChange:null,__cbOnceOwnerUnbindRenderTextureChange:null,emitRenderTextureChange:function(e,n){var t=0;if(null!=this.__cbOnRenderTextureChange&&(t+=this.__cbOnRenderTextureChange.length),null!=this.__cbOnceRenderTextureChange&&(t+=this.__cbOnceRenderTextureChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnRenderTextureChange)for(var r=0,a=this.__cbOnRenderTextureChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnRenderTextureChange[h],++s):--t}if(null!=this.__cbOnceRenderTextureChange){for(var u=null,c=null,r=0,a=this.__cbOnceRenderTextureChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceRenderTextureChange[h],this.__cbOnceRenderTextureChange[h]=null,o=this.__cbOnceOwnerUnbindRenderTextureChange[h],(this.__cbOnceOwnerUnbindRenderTextureChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindRenderTextureChange[h]),c.push(this.__cbOnceRenderTextureChange[h]))}this.__cbOnceOwnerUnbindRenderTextureChange=u,this.__cbOnceRenderTextureChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onRenderTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event renderTextureChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRenderTextureChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindRenderTextureChange&&(this.__cbOnOwnerUnbindRenderTextureChange=[]),this.__cbOnOwnerUnbindRenderTextureChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindRenderTextureChange&&(this.__cbOnOwnerUnbindRenderTextureChange=[]),this.__cbOnOwnerUnbindRenderTextureChange.push(null);null==this.__cbOnRenderTextureChange&&(this.__cbOnRenderTextureChange=[]),this.__cbOnRenderTextureChange.push(t)},onceRenderTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event renderTextureChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRenderTextureChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindRenderTextureChange&&(this.__cbOnceOwnerUnbindRenderTextureChange=[]),this.__cbOnceOwnerUnbindRenderTextureChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindRenderTextureChange&&(this.__cbOnceOwnerUnbindRenderTextureChange=[]),this.__cbOnceOwnerUnbindRenderTextureChange.push(null);null==this.__cbOnceRenderTextureChange&&(this.__cbOnceRenderTextureChange=[]),this.__cbOnceRenderTextureChange.push(t)},offRenderTextureChange:function(e){if(null!=e){var n;null!=this.__cbOnRenderTextureChange&&-1!=(n=this.__cbOnRenderTextureChange.indexOf(e))&&(this.__cbOnRenderTextureChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindRenderTextureChange[n])&&s(),this.__cbOnOwnerUnbindRenderTextureChange.splice(n,1)),null!=this.__cbOnceRenderTextureChange&&-1!=(n=this.__cbOnceRenderTextureChange.indexOf(e))&&(this.__cbOnceRenderTextureChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindRenderTextureChange[n])&&s(),this.__cbOnceOwnerUnbindRenderTextureChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindRenderTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindRenderTextureChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindRenderTextureChange[l])&&s()}this.__cbOnOwnerUnbindRenderTextureChange=null}if(null!=this.__cbOnceOwnerUnbindRenderTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindRenderTextureChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindRenderTextureChange[l])&&s()}this.__cbOnceOwnerUnbindRenderTextureChange=null}this.__cbOnRenderTextureChange=null,this.__cbOnceRenderTextureChange=null}},listensRenderTextureChange:function(){return null!=this.__cbOnRenderTextureChange&&0<this.__cbOnRenderTextureChange.length||null!=this.__cbOnceRenderTextureChange&&0<this.__cbOnceRenderTextureChange.length},density:null,set_density:function(e){return this.density!=e&&(this.density=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},neverEmpty:null,set_neverEmpty:function(e){var n;return this.neverEmpty!=e&&((this.neverEmpty=e)?null==this.neverEmptyQuad&&(this.neverEmptyQuad=new r,(n=this.neverEmptyQuad).set_width(1),n.set_height(1),(n=this.neverEmptyQuad).set_x(-999999999),n.set_y(-999999999),this.content.add(this.neverEmptyQuad)):null!=this.neverEmptyQuad&&(this.neverEmptyQuad.destroy(),this.neverEmptyQuad=null)),e},explicitRenderState:null,explicitRenderPendingResultCallbacks:null,handleTexturesDensityChange:function(e,n){e!=n&&-1==this.density&&(this.updateRenderTextureAndContent(Math.ceil(this.get_width()),Math.ceil(this.get_height()),e,this.depthBuffer,this.stencil,this.antialiasing),this.contentDirty=!1)},updateRenderTextureAndContent:function(e,n,t,i,l,s){var r=null!=this.mesh?this.mesh.texture:this._texture,a=(this.enabled?(this.meshDirty||null==this.get_renderTexture()||(null==this.textureTilePacker||!this.textureTilePacker.managesTexture(this.get_renderTexture()))&&(this.get_renderTexture().width!=e||this.get_renderTexture().height!=n||-1!=t&&this.get_renderTexture().density!=t||this.get_renderTexture().depth!=i||this.get_renderTexture().stencil!=l||this.get_renderTexture().antialiasing!=s)||null!=this.textureTilePacker&&!this.textureTilePacker.managesTexture(this.get_renderTexture())||null!=this.textureTile&&(this.textureTile.frameWidth!=e||this.textureTile.frameHeight!=n))&&(null==this.get_renderTexture()||null!=this.textureTilePacker&&this.textureTilePacker.managesTexture(this.get_renderTexture())||(r=null,this.get_renderTexture().destroy(),this.set_renderTexture(null)),null!=this.textureTile&&null!=this.textureTilePacker&&(this.textureTilePacker.releaseTile(this.textureTile),this.textureTile=null),0<e)&&0<n&&(null!=this.textureTilePacker?(this.set_renderTexture(this.textureTilePacker.texture),this.textureTile=this.textureTilePacker.allocTile(e,n),this.set_tile(this.textureTile)):(this.set_renderTexture(new Ft(e,n,t,i,l,s)),this.get_renderTexture().id=this.textureId,this.get_renderTexture().set_filter(this.textureFilter),this.get_renderTexture().autoRender=this.autoRender,this.set_tile(null),r=this.get_renderTexture())):null==this.get_renderTexture()||null!=this.textureTilePacker&&this.textureTilePacker.managesTexture(this.get_renderTexture())||(this.set_tile(null),r=null,this.get_renderTexture().destroy(),this.set_renderTexture(null)),null!=this.mesh?((a=this.mesh).texture!=r&&(null!=a.texture&&(a.texture.offDestroy($bind(a,a.textureDestroyed)),null!=a.texture.asset)&&a.texture.asset.release(),a.texture=r,null!=a.texture)&&(a.texture.onDestroy(a,$bind(a,a.textureDestroyed)),null!=a.texture.asset)&&a.texture.asset.retain(),null!=this._texture&&this._set_texture(null)):this._texture!=r&&this._set_texture(r),this.meshDirty=!1,this.content);a.set_width(e),a.set_height(n),this.content.set_renderTarget(this.get_renderTexture()),null!=this.textureTile?(a=this.content,t=this.textureTile.frameY,a.set_x(this.textureTile.frameX),a.set_y(t)):((a=this.content).set_x(0),a.set_y(0)),this.content.contentDirty&&this.content.computeContent()},render:function(r){var a=this;if(this.explicitRender)if(1==this.explicitRenderState)null!=r&&(null==this.explicitRenderPendingResultCallbacks&&(this.explicitRenderPendingResultCallbacks=[]),this.explicitRenderPendingResultCallbacks.push(r),r=null);else if(2==this.explicitRenderState)null!=r&&(null==this.explicitRenderPendingResultCallbacks&&(this.explicitRenderPendingResultCallbacks=[]),this.explicitRenderPendingResultCallbacks.push(function(){a.render(r),r=null}));else if(this.explicitRenderState=1,this.contentDirty&&this.computeContent(),null==this.get_renderTexture()){this.explicitRenderState=0;var e=this.explicitRenderPendingResultCallbacks;if((this.explicitRenderPendingResultCallbacks=null)!=r&&(r(),r=null),null!=e)for(var n=0,t=e.length;n<t;){var i=n++,l=e[i];e[i]=null,l(),l=null}}else this.content.set_active(!0),he.app.onceUpdate(null,function(e){if(a._lifecycleState<0)r=null;else if(a.explicitRenderState=2,a.contentDirty&&a.computeContent(),null==a.get_renderTexture()){a.content.set_active(!1),a.explicitRenderState=0;var n=a.explicitRenderPendingResultCallbacks;if((a.explicitRenderPendingResultCallbacks=null)!=r&&(r(),r=null),null!=n)for(var t=0,i=n.length;t<i;){var l=t++,s=n[l];n[l]=null,s(),s=null}}else a.get_renderTexture().renderDirty=!0,he.app.onceFinishDraw(null,function(){if(a._lifecycleState<0)r=null;else{a.content.set_active(!1),a.explicitRenderState=0;var e=a.explicitRenderPendingResultCallbacks;if((a.explicitRenderPendingResultCallbacks=null)!=r&&(r(),r=null),null!=e)for(var n=0,t=e.length;n<t;){var i=n++,l=e[i];e[i]=null,l(),l=null}}})});else he.app.logger.warning("Explicit render is disabled on this filter. Ignoring render() call.",{fileName:"../../../../ceramic/runtime/src/ceramic/Filter.hx",lineNumber:363,className:"ceramic.Filter",methodName:"render"})},visualInContentHits:function(e,n,t){var i=zt.matchedHitVisual;if(zt.matchedHitVisual=null,this.hitVisual._hits(n,t,!1)){zt.matchedHitVisual=i,e.matrixDirty&&e.computeMatrix();var l=Un._matrix,s=(l.a=e.matA,l.b=e.matB,l.c=e.matC,l.d=e.matD,l.tx=e.matTX,l.ty=e.matTY,l.changedDirty=!0,this.hitVisual);do{s.matrixDirty&&s.computeMatrix();var r=Un._matrix.a*s.matA+Un._matrix.b*s.matC,a=(Un._matrix.b=Un._matrix.a*s.matB+Un._matrix.b*s.matD,Un._matrix.a=r,Un._matrix.c*s.matA+Un._matrix.d*s.matC),h=(Un._matrix.d=Un._matrix.c*s.matB+Un._matrix.d*s.matD,Un._matrix.c=a,Un._matrix.tx*s.matA+Un._matrix.ty*s.matC+s.matTX);if(Un._matrix.ty=Un._matrix.tx*s.matB+Un._matrix.ty*s.matD+s.matTY,Un._matrix.tx=h,null!=s.computedRenderTarget){var u=!1,c=s.parent;if(null!=c)do{if(null!=c.asQuad&&c instanceof Un){var o=c;if(o.get_renderTexture()==s.computedRenderTarget){s=o.hitVisual,u=!0;break}}}while(null!=(c=c.parent));if(!u)return!1}else s=null}while(null!=s);var _=(l=Un._matrix).a*l.d-l.b*l.c;return 0==_?(l.a=l.b=l.c=l.d=0,l.tx=-l.tx,l.ty=-l.ty):(r=l.d*(_=1/_),l.d=l.a*_,l.a=r,l.b*=-_,l.c*=-_,h=-l.a*l.tx-l.c*l.ty,l.ty=-l.b*l.tx-l.d*l.ty,l.tx=h),l.changedDirty=!0,e.hitTest(n,t,Un._matrix)}return zt.matchedHitVisual=i,!1},set_width:function(e){return this.get_width()==e?e:(this.contentDirty=!0,he.app.visualsContentDirty=!0,s.prototype.set_width.call(this,e))},set_height:function(e){return this.get_height()==e?e:(this.contentDirty=!0,he.app.visualsContentDirty=!0,s.prototype.set_height.call(this,e))},computeContent:function(){this.updateRenderTextureAndContent(Math.ceil(this.get_width()),Math.ceil(this.get_height()),this.density,this.depthBuffer,this.stencil,this.antialiasing),this.contentDirty=!1},destroy:function(){var e;this._lifecycleState<=-2||(this._lifecycleState=-2,this.set_hitVisual(null),null!=this._texture&&this._set_texture(null),null==this.get_renderTexture()||null!=this.textureTilePacker&&this.textureTilePacker.managesTexture(this.get_renderTexture())||(this.get_renderTexture().destroy(),this.set_renderTexture(null)),this.set_textureTilePacker(null),this.set_renderTexture(null),null!=this.mesh&&(e=this.mesh,this.set_mesh(null),e.destroy()),this.set_neverEmpty(!1),this.explicitRenderPendingResultCallbacks=null,this.content=null,this._lifecycleState=-1,s.prototype.destroy.call(this))},unbindEvents:function(){s.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offRenderTextureChange()},__class__:Un,__properties__:$extend(s.prototype.__properties__,{set_neverEmpty:"set_neverEmpty",set_density:"set_density",set_renderTexture:"set_renderTexture",get_renderTexture:"get_renderTexture",set_textureTilePacker:"set_textureTilePacker",set_explicitRender:"set_explicitRender",set_autoRender:"set_autoRender",set_antialiasing:"set_antialiasing",set_stencil:"set_stencil",set_depthBuffer:"set_depthBuffer",set_textureFilter:"set_textureFilter",set_enabled:"set_enabled",set_hitVisual:"set_hitVisual",set_mesh:"set_mesh",set_textureId:"set_textureId"})}),function(e,n,t){this.transformedPath=null,this.unobservedFont=null,this.fontAutoruns=null,this.pages=null,this.fontData=null,i0.call(this,"font",e,n,t),this.set_handleTexturesDensityChange(!0),this.assets=new Re}),Tn=((L["ceramic.FontAsset"]=xn).__name__="ceramic.FontAsset",xn.__super__=i0,xn.prototype=$extend(i0.prototype,{__cbOnReplaceFont:null,__cbOnceReplaceFont:null,__cbOnOwnerUnbindReplaceFont:null,__cbOnceOwnerUnbindReplaceFont:null,emitReplaceFont:function(e,n){var t=0;if(null!=this.__cbOnReplaceFont&&(t+=this.__cbOnReplaceFont.length),null!=this.__cbOnceReplaceFont&&(t+=this.__cbOnceReplaceFont.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnReplaceFont)for(var r=0,a=this.__cbOnReplaceFont.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnReplaceFont[h],++s):--t}if(null!=this.__cbOnceReplaceFont){for(var u=null,c=null,r=0,a=this.__cbOnceReplaceFont.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceReplaceFont[h],this.__cbOnceReplaceFont[h]=null,o=this.__cbOnceOwnerUnbindReplaceFont[h],(this.__cbOnceOwnerUnbindReplaceFont[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindReplaceFont[h]),c.push(this.__cbOnceReplaceFont[h]))}this.__cbOnceOwnerUnbindReplaceFont=u,this.__cbOnceReplaceFont=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onReplaceFont:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceFont because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceFont(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReplaceFont&&(this.__cbOnOwnerUnbindReplaceFont=[]),this.__cbOnOwnerUnbindReplaceFont.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReplaceFont&&(this.__cbOnOwnerUnbindReplaceFont=[]),this.__cbOnOwnerUnbindReplaceFont.push(null);null==this.__cbOnReplaceFont&&(this.__cbOnReplaceFont=[]),this.__cbOnReplaceFont.push(t)},onceReplaceFont:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceFont because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceFont(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReplaceFont&&(this.__cbOnceOwnerUnbindReplaceFont=[]),this.__cbOnceOwnerUnbindReplaceFont.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReplaceFont&&(this.__cbOnceOwnerUnbindReplaceFont=[]),this.__cbOnceOwnerUnbindReplaceFont.push(null);null==this.__cbOnceReplaceFont&&(this.__cbOnceReplaceFont=[]),this.__cbOnceReplaceFont.push(t)},offReplaceFont:function(e){if(null!=e){var n;null!=this.__cbOnReplaceFont&&-1!=(n=this.__cbOnReplaceFont.indexOf(e))&&(this.__cbOnReplaceFont.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReplaceFont[n])&&s(),this.__cbOnOwnerUnbindReplaceFont.splice(n,1)),null!=this.__cbOnceReplaceFont&&-1!=(n=this.__cbOnceReplaceFont.indexOf(e))&&(this.__cbOnceReplaceFont.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReplaceFont[n])&&s(),this.__cbOnceOwnerUnbindReplaceFont.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceFont){for(var t=0,i=this.__cbOnOwnerUnbindReplaceFont.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReplaceFont[l])&&s()}this.__cbOnOwnerUnbindReplaceFont=null}if(null!=this.__cbOnceOwnerUnbindReplaceFont){for(t=0,i=this.__cbOnceOwnerUnbindReplaceFont.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReplaceFont[l])&&s()}this.__cbOnceOwnerUnbindReplaceFont=null}this.__cbOnReplaceFont=null,this.__cbOnceReplaceFont=null}},listensReplaceFont:function(){return null!=this.__cbOnReplaceFont&&0<this.__cbOnReplaceFont.length||null!=this.__cbOnceReplaceFont&&0<this.__cbOnceReplaceFont.length},fontData:null,pages:null,fontAutoruns:null,get_font:function(){var e,n,t=this.unobservedFont;return null!=M.current&&(e=M.current,null!=(n=this.fontAutoruns)||(n=M.getAutorunArray(),null!=(this.fontAutoruns=n)))&&e.bindToAutorunArray(n),t},set_font:function(e){var n=this.unobservedFont;return n!=(this.unobservedFont=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFontChange(e,n),null!=(n=this.fontAutoruns))&&(this.fontAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateFont:function(){var e=this.unobservedFont,e=(this.emitFontChange(e,e),this.fontAutoruns);null!=e&&(this.fontAutoruns=null,M.invalidateAutorunArray(e))},unobservedFont:null,__cbOnFontChange:null,__cbOnceFontChange:null,__cbOnOwnerUnbindFontChange:null,__cbOnceOwnerUnbindFontChange:null,emitFontChange:function(e,n){var t=0;if(null!=this.__cbOnFontChange&&(t+=this.__cbOnFontChange.length),null!=this.__cbOnceFontChange&&(t+=this.__cbOnceFontChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnFontChange)for(var r=0,a=this.__cbOnFontChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnFontChange[h],++s):--t}if(null!=this.__cbOnceFontChange){for(var u=null,c=null,r=0,a=this.__cbOnceFontChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceFontChange[h],this.__cbOnceFontChange[h]=null,o=this.__cbOnceOwnerUnbindFontChange[h],(this.__cbOnceOwnerUnbindFontChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindFontChange[h]),c.push(this.__cbOnceFontChange[h]))}this.__cbOnceOwnerUnbindFontChange=u,this.__cbOnceFontChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onFontChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event fontChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFontChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFontChange&&(this.__cbOnOwnerUnbindFontChange=[]),this.__cbOnOwnerUnbindFontChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFontChange&&(this.__cbOnOwnerUnbindFontChange=[]),this.__cbOnOwnerUnbindFontChange.push(null);null==this.__cbOnFontChange&&(this.__cbOnFontChange=[]),this.__cbOnFontChange.push(t)},onceFontChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event fontChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFontChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFontChange&&(this.__cbOnceOwnerUnbindFontChange=[]),this.__cbOnceOwnerUnbindFontChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFontChange&&(this.__cbOnceOwnerUnbindFontChange=[]),this.__cbOnceOwnerUnbindFontChange.push(null);null==this.__cbOnceFontChange&&(this.__cbOnceFontChange=[]),this.__cbOnceFontChange.push(t)},offFontChange:function(e){if(null!=e){var n;null!=this.__cbOnFontChange&&-1!=(n=this.__cbOnFontChange.indexOf(e))&&(this.__cbOnFontChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFontChange[n])&&s(),this.__cbOnOwnerUnbindFontChange.splice(n,1)),null!=this.__cbOnceFontChange&&-1!=(n=this.__cbOnceFontChange.indexOf(e))&&(this.__cbOnceFontChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFontChange[n])&&s(),this.__cbOnceOwnerUnbindFontChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFontChange){for(var t=0,i=this.__cbOnOwnerUnbindFontChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFontChange[l])&&s()}this.__cbOnOwnerUnbindFontChange=null}if(null!=this.__cbOnceOwnerUnbindFontChange){for(t=0,i=this.__cbOnceOwnerUnbindFontChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFontChange[l])&&s()}this.__cbOnceOwnerUnbindFontChange=null}this.__cbOnFontChange=null,this.__cbOnceFontChange=null}},listensFontChange:function(){return null!=this.__cbOnFontChange&&0<this.__cbOnFontChange.length||null!=this.__cbOnceFontChange&&0<this.__cbOnceFontChange.length},transformedPath:null,load:function(){for(var o,e,_=this,d=(null!=this.owner&&(this.assets.inheritRuntimeAssetsFromAssets(this.owner),this.assets.loadMethod=this.owner.loadMethod,this.assets.scheduleMethod=this.owner.scheduleMethod,this.assets.delayBetweenXAssets=this.owner.delayBetweenXAssets),[]),b=this.assets.iterator();b.hasNext();){var n=b.next();d.push(n)}this.set_status(Je.LOADING),null==this.path?(he.app.logger.warning("Cannot load font asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:54,className:"ceramic.FontAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1)):(e=(o=this.path).toLowerCase(),(B.endsWith(e,".ttf")||B.endsWith(e,".otf"))&&(o=o.substring(0,o.length-4)+".fnt"),he.app.logger.info("Load font "+o,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:69,className:"ceramic.FontAsset",methodName:"load"}),null!=this.transformedPath&&(o=At.join([this.transformedPath,o])),this.assets.runtimeAssets=this.runtimeAssets,(b=new ei(this.name)).set_handleTexturesDensityChange(!1),b.set_path(o),this.assets.addAsset(b),this.assets.onceComplete(this,function(e){var n=b.get_text(),t=At.directory(o);if(""==t&&(t="."),null!=n)try{_.fontData=B0.parse(n),_.fontData.path=t;for(var h=new z,u=[],i=0,l=_.fontData.pages;i<l.length;){var s=l[i],r=(++i,s.file),a=(""!=t&&(r=At.join([t,r])),Re.decodePath(r)),c=new Sn(a.name);c.set_handleTexturesDensityChange(!1),c.set_path(a.path),_.assets.addAsset(c),u.push(c)}_.assets.onceComplete(_,function(e){if(e){for(var n=0;n<u.length;){var t=u[n],i=(++n,t.path),l=t.get_texture();h.h[i]=l}var s=_.get_font(),e=new w0(_.fontData,h);if(e.id="font:"+_.path,(e.asset=_).set_font(e),null!=s){_.emitReplaceFont(_.get_font(),s),s==he.app.defaultFont&&(he.app.defaultFont=_.get_font());for(var n=0,r=[].concat(he.app.visuals);n<r.length;){var a=r[n];++n,0<=a._lifecycleState&&a instanceof Zt&&(a=a).font==s&&a.set_font(_.get_font())}s.asset=null,s.destroy()}for(n=0;n<d.length;){t=d[n];++n,t instanceof Sn&&-1!=u.indexOf(t)||t.destroy()}_.set_status(Je.READY),_.emitComplete(!0),_.handleTexturesDensityChange&&_.checkTexturesDensity()}else _.set_status(Je.BROKEN),he.app.logger.error("Failed to load textures for font at path: "+_.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:187,className:"ceramic.FontAsset",methodName:"load"}),_.emitComplete(!1)}),_.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:193,className:"ceramic.FontAsset",methodName:"load"})}catch(i){Al.lastError=i,_.set_status(Je.BROKEN),he.app.logger.error("Failed to decode font data at path: "+_.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:197,className:"ceramic.FontAsset",methodName:"load"}),_.emitComplete(!1)}else _.set_status(Je.BROKEN),he.app.logger.error("Failed to load font data at path: "+_.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:203,className:"ceramic.FontAsset",methodName:"load"}),_.emitComplete(!1)}),this.assets.load(null,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:208,className:"ceramic.FontAsset",methodName:"load"}))},texturesDensityDidChange:function(e,n){this.get_status()==Je.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var e;null!=this.owner&&this.owner.reloadOnTextureDensityChange&&(e=this.path,this.computePath(),e!=this.path)&&(he.app.logger.info("Reload font ("+e+" -> "+this.path+")",{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:232,className:"ceramic.FontAsset",methodName:"checkTexturesDensity"}),this.load())},assetFilesDidChange:function(e,n){var a=this,t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload font (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:253,className:"ceramic.FontAsset",methodName:"assetFilesDidChange"}),e=this.path.toLowerCase(),null!=(null!=(n=this.owner)?n.runtimeAssets:null)&&B.endsWith(e,".ttf")||B.endsWith(e,".otf")?(this.path,this.owner.runtimeAssets.requestTransformedDir(function(r){kt.runCeramic(["assets","--filter",a.path,"--from",a.owner.runtimeAssets.path,"--to",r,"--list-changed"],function(e,n,t){if(0==e){a.transformedPath=r;for(var i=JSON.parse(B.trim(n)),l=0;l<i.length;){var s=i[l];++l,he.app.logger.debug("Updated on the fly: "+s,{fileName:"../../../../ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:271,className:"ceramic.FontAsset",methodName:"assetFilesDidChange"}),Re.incrementReloadCount(s)}a.load()}})})):this.load())},destroy:function(){if(!(this._lifecycleState<=-2)&&(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),null!=this.get_font()&&(this.get_font().destroy(),this.set_font(null)),null!=this.pages)){for(var e=this.pages.h,n=Object.keys(e),t=n.length,i=0;i<t;){var l=n[i++];this.pages.h[l].destroy()}this.pages=null}},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offReplaceFont(),this.offFontChange()},__class__:xn,__properties__:$extend(i0.prototype.__properties__,{set_font:"set_font",get_font:"get_font"})}),(L["ceramic.Value"]=gb).__name__="ceramic.Value",gb.prototype={value:null,__class__:gb},(L["ceramic.Fragment"]=hb).__name__="ceramic.Fragment",hb.cacheData=function(e){hb.cachedFragmentData.h[e.id]=e},hb.getData=function(e){return hb.cachedFragmentData.h[e]},hb.__super__=s,hb.prototype=$extend(s.prototype,{assets:null,entities:null,items:null,tracks:null,fps:null,fragmentData:null,resizable:null,autoUpdateTimeline:null,set_autoUpdateTimeline:function(e){return this.autoUpdateTimeline!=e&&(this.autoUpdateTimeline=e,null!=this.timeline)&&this.timeline.set_autoUpdate(e),e},pendingLoads:null,timeline:null,ready:null,__cbOnReady:null,__cbOnceReady:null,__cbOnOwnerUnbindReady:null,__cbOnceOwnerUnbindReady:null,emitReady:function(){this.willEmitReady();var e=0;if(null!=this.__cbOnReady&&(e+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(e+=this.__cbOnceReady.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReady)for(var l=0,s=this.__cbOnReady.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnReady[r],++i):--e}if(null!=this.__cbOnceReady){for(var a=null,h=null,l=0,s=this.__cbOnceReady.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceReady[r],this.__cbOnceReady[r]=null,u=this.__cbOnceOwnerUnbindReady[r],(this.__cbOnceOwnerUnbindReady[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReady[r]),h.push(this.__cbOnceReady[r]))}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(t)},onceReady:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ready because owner is destroyed!");var l=function(e){null!=t&&(i.offReady(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(t)},offReady:function(e){if(null!=e){var n;null!=this.__cbOnReady&&-1!=(n=this.__cbOnReady.indexOf(e))&&(this.__cbOnReady.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReady[n])&&s(),this.__cbOnOwnerUnbindReady.splice(n,1)),null!=this.__cbOnceReady&&-1!=(n=this.__cbOnceReady.indexOf(e))&&(this.__cbOnceReady.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReady[n])&&s(),this.__cbOnceOwnerUnbindReady.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReady[l])&&s()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReady[l])&&s()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&0<this.__cbOnReady.length||null!=this.__cbOnceReady&&0<this.__cbOnceReady.length},scheduleWhenReady:function(e,n){this.ready?n():this.onceReady(e,n)},willEmitReady:function(){this.ready=!0},set_fragmentData:function(e){var n,t=this,i=(this.pendingLoads++,this.fragmentData=e,Object.create(null));if(null!=e&&(this.set_width(e.width),this.set_height(e.height),null!=e.color?this.color=e.color:this.color=0,null!=e.transparent?(n=e.transparent,this.flags=n?16|this.flags:-17&this.flags):this.flags|=16,null!=e.items))for(var l=0,s=e.items;l<s.length;){var r=s[l];++l,this.putItem(r),i[r.id]=!0}if(null==e||Object.prototype.hasOwnProperty.call(e,"items")){for(var a=null,l=0,s=this.entities;l<s.length;){var h=s[l];++l,Object.prototype.hasOwnProperty.call(i,h.id)||(a=null==a?[]:a).push(h.id)}if(null!=a)for(l=0;l<a.length;){var u=a[l];++l,this.removeItem(u)}}null!=e&&(this.pendingLoads++,he.app.converters.h["ceramic.ReadOnlyMap<String,ceramic.Component>"].basicToField(this,"components",this.assets,e.components,function(e){t._lifecycleState<0||(t.pendingLoads--,t.onceReady(t,function(){t.set_fragmentComponents(e)}),0==t.pendingLoads&&t.emitReady())})),null!=e&&null!=e.fps&&this.set_fps(e.fps);var c=null;if(null!=e&&null!=e.tracks){for(l=0,s=e.tracks;l<s.length;){var o=s[l];++l,(c=null==c?new z:c).h[o.entity+"#"+o.field]=!0,this.putTrack(null,o)}if(null!=this.timeline&&0<this.timeline.tracks.length)for(l=0,s=[].concat(this.timeline.tracks);l<s.length;){var _,d=s[l];++l,null!=c&&Object.prototype.hasOwnProperty.call(c.h,d.id)||(2==(_=d.id.split("#")).length?this.removeTrack(_[0],_[1]):he.app.logger.warning("Cannot remove track with unhandled id: "+d.id,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:226,className:"ceramic.Fragment",methodName:"set_fragmentData"}))}}var b=null;if(null!=e&&null!=e.labels){for(var g=e.labels,l=0,s=N.fields(g);l<s.length;){var O=s[l],f=(++l,(b=null==b?new z:b).h[O]=!0,g[O]);this.putLabel(f,O)}if(null!=this.timeline&&null!=this.timeline.labels)for(l=0,s=[].concat(this.timeline.labels);l<s.length;){var p=s[l];++l,null!=b&&Object.prototype.hasOwnProperty.call(b.h,p)||this.timeline.removeLabel(p)}}return this.pendingLoads--,0==this.pendingLoads&&this.emitReady(),e},set_fps:function(e){if(this.fps!=e&&(this.fps=e,null!=this.timeline&&(this.timeline.fps=e),null!=this.tracks))for(var n=0,t=this.tracks;n<t.length;){var i=t[n];++n,this.putTrack(null,i)}return e},putItem:function(e){var n,t=this._get(e.id),i=!1,l=(null!=t?(i=t instanceof q,s=ys.getClass(t),e.entity!=s.__name__&&(this.removeItem(e.id),t=null)):this.items.push(e),e.entity),s=L[l],r=null!=t?t:null,a="ceramic.Fragment"==e.entity;if(null==r&&(n=[],a&&(n.push(this.assets),n.push(!1)),r=D.createInstance(s,n)),null==r)throw Q.thrown("Failed to create instance of "+e.entity);if(r.id=e.id,a&&r.set_depthRange(1),null!=e.props){for(var h=N.fields(e.props),u=(Gl.sort(h,function(e,n){return 0}),0);u<h.length;){var c=h[u],o=(++u,this.typeOfItemField(e,c)),_=N.field(e.props,c);if(null!=(v=null!=o?he.app.converters.h[o]:null))this.putItemField(a,e,r,c,_,v);else{if(!Object.prototype.hasOwnProperty.call(hb.basicTypes.h,o)){var d=I[o];if(null!=d){for(var b=0,g=d.__constructs__,O=new Array(g.length),f=0,p=g.length;f<p;){var m=f++;O[m]=g[m]._hx_name}for(var w=O;b<w.length;){l=w[b];if(++b,l.toLowerCase()==_.toLowerCase()){_=D.createEnum(d,l);break}}}}N.setProperty(r,c,_)}}var v,o=this.typeOfItemField(e,"components"),_=e.components;null!=(v=null!=o?he.app.converters.h[o]:null)?this.putItemField(a,e,r,"components",_,v):he.app.logger.warning("No converter found for field: components (type: "+o+")",{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:379,className:"ceramic.Fragment",methodName:"putItem"})}return null==t&&("ceramic.Assets"==this.typeOfItemField(e,"assets")&&N.setProperty(r,"assets",this.assets),this.entities.push(r)),r instanceof q&&!i&&this.add(r),null==t&&this.putTracksForItem(e.id),r},typeOfItemField:function(e,n){return null!=e.schema?N.field(e.schema,n):vn.typeOf(e.entity,n)},putItemField:function(n,e,h,t,i,l){var s=this;this.pendingLoads++,l.basicToField(h,t,this.assets,i,function(a){var e;s.pendingLoads--,s._lifecycleState<0||(0<=h._lifecycleState&&(n&&"fragmentData"==t?(e=h,s.pendingLoads++,e.onceReady(s,function(){s.pendingLoads--,s._lifecycleState<0||0==s.pendingLoads&&s.emitReady()}),e.set_fragmentData(a)):"components"!=t?N.setProperty(h,t,a):s.onceReady(s,function(){var e;if(null!=a&&null!=(e=a))for(var n=e.h,t=Object.keys(n),i=t.length,l=0;l<i;){var s=t[l++],r=e.h[s];null!=r&&h.component(s,r)}})),0==s.pendingLoads&&s.emitReady())})},_get:function(e){for(var n=0,t=this.entities;n<t.length;){var i=t[n];if(++n,i.id==e)return i}return null},_getWithType:function(e,n){e=this._get(e);return null!=e?e:null},getItemInstanceByName:function(e){for(var n=0,t=this.entities;n<t.length;){var i=t[n];if(++n,i.id==e)return i}return null},getItem:function(e){for(var n=0,t=this.items;n<t.length;){var i=t[n];if(++n,i.id==e)return i}return null},getItemByName:function(e){for(var n=0,t=this.items;n<t.length;){var i=t[n];if(++n,i.name==e)return i}return null},typeOfItem:function(e){var n=this.getItem(e);return null!=n?n.entity:(he.app.logger.warning("Failed to resolve entity type for item "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:584,className:"ceramic.Fragment",methodName:"typeOfItem"}),null)},removeItem:function(e){for(var n=0,t=this.entities;n<t.length;){var i=t[n];if(++n,i.id==e){h.remove(this.entities,i),i.destroy();break}}for(n=0,t=this.items;n<t.length;){var l=t[n];if(++n,l.id==e){h.remove(this.items,l);break}}},removeAllItems:function(){for(var e=0,n=[].concat(this.entities);e<n.length;){var t=n[e];++e,h.remove(this.entities,t),t.destroy()}for(e=0,n=[].concat(this.items);e<n.length;){var i=n[e];++e,h.remove(this.items,i)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,s.prototype.destroy.call(this),null!=this.timeline&&(this.timeline.destroy(),this.timeline=null),this.removeAllItems())},set_components:function(e){if(this._components!=e){if(null!=this._components){l=this._components.h;for(var n=(s=Object.keys(l)).length,t=0;t<n;){var i=s[t++];null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)||null!=this.fragmentComponents&&Object.prototype.hasOwnProperty.call(this.fragmentComponents.h,i)||this.removeComponent(i)}}if(null!=e){l=e.h;for(var l,s,n=(s=Object.keys(l)).length,t=0;t<n;){var r,i=s[t++],a=e.h[i];null!=this._components&&null!=(r=this._components.h[i])?r!=a&&(this.removeComponent(i),this.component(i,a)):this.component(i,a)}}this._components=e}return e},fragmentComponents:null,set_fragmentComponents:function(e){if(this.fragmentComponents!=e){if(null!=this.fragmentComponents){l=this.fragmentComponents.h;for(var n=(s=Object.keys(l)).length,t=0;t<n;){var i=s[t++];null!=e&&Object.prototype.hasOwnProperty.call(e.h,i)||this.removeComponent(i)}}if(null!=e){l=e.h;for(var l,s,n=(s=Object.keys(l)).length,t=0;t<n;){var r,i=s[t++],a=e.h[i];null!=this.fragmentComponents&&null!=(r=this.fragmentComponents.h[i])?r!=a&&(this.removeComponent(i),this.component(i,a)):this.component(i,a)}}this.fragmentComponents=e}return e},isManagedComponent:function(){},putTrack:function(e,n){var t=null;if(null==(p=this.getTrack(n.entity,n.field)))null==this.tracks&&(this.tracks=[]),this.tracks.push(n);else{for(var t=new Hl,i=0,l=p.keyframes;i<l.length;){var s=l[i];++i,t.h[s.index]=!0}var r=this.tracks.indexOf(p);this.tracks[r]=n}var r=n.entity,a=this._get(r);if(null!=n.keyframes&&0<n.keyframes.length){this.createTimelineIfNeeded();var h=n.field,u=r+"#"+h,c=n.options;if(null==(e=null==e?this.typeOfItem(n.entity):e))he.app.logger.warning("Cannot update timeline track "+u+": failed to resolve entity type",{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:802,className:"ceramic.Fragment",methodName:"putTrack"});else{var r=vn.types(e),o=null!=r?r.h[h]:null;if(null==o)he.app.logger.warning("Cannot update timeline track "+u+": failed to resolve info for "+h+" of entity type "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:809,className:"ceramic.Fragment",methodName:"putTrack"});else{var _=this.timeline.get(u);if(null==_){if(null==a)return void he.app.logger.warning("Failed to create timeline track "+u+" because there is no entity with id "+n.entity,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:817,className:"ceramic.Fragment",methodName:"putTrack"});if(hb._trackResult.value=null,he.app.timelines.emitCreateTrack(o,c,hb._trackResult),null==(_=hb._trackResult.value))return void he.app.logger.warning("Failed to create timeline track "+u+" for "+h+" of entity type "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:825,className:"ceramic.Fragment",methodName:"putTrack"});a.onDestroy(_,function(e){_.destroy()}),_.id=u,he.app.timelines.emitBindTrack(o,c,_,a,h),this.timeline.add(_)}if(_.loop=n.loop,0<hb._usedKeyframes.length){for(i=0,l=hb._usedKeyframes.length;i<l;){var d=i++;hb._usedKeyframes[d]=null}if(0!=(C=hb._usedKeyframes).length)if(0<C.length)C.splice(0,C.length);else for(var b=C;b.length<0;)b.push(null)}for(var g=-1,O=!0,i=0,l=n.keyframes;i<l.length;){var s=l[i],f=(++i,s.index),p=(f<g&&(O=!1),_.findKeyframeAtIndex(g=f));if(hb._keyframeResult.value=null,he.app.timelines.emitCreateKeyframe(o,c,s.value,f,Y0.easingFromString(s.easing),p,hb._keyframeResult),null==(y=hb._keyframeResult.value))return void he.app.logger.warning("Failed to create or update keyframe #"+V.string($bind(this,this.frame))+" of track "+u+" for field "+h+" of entity type "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:882,className:"ceramic.Fragment",methodName:"putTrack"});hb._usedKeyframes.push(y),null!=p?p!=y&&(_.remove(p),_.add(y)):_.add(y)}var m=null,w=_.keyframes;if(O)for(var v=0,i=0,l=w.length;i<l;){var y=w[d=i++];hb._usedKeyframes[v]==y?++v:(m=null==m?[]:m).push(y)}else{he.app.logger.warning("Input keyframe array should be sorted by time in ascending order!",{fileName:"../../../../ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:912,className:"ceramic.Fragment",methodName:"putTrack"});for(i=0,l=w.length;i<l;){y=w[d=i++];-1==hb._usedKeyframes.indexOf(y)&&(m=null==m?[]:m).push(y)}}if(null!=m){for(i=0;i<m.length;){y=m[i];++i,_.remove(y)}m=null}if(0<hb._usedKeyframes.length){for(var C,i=0,l=hb._usedKeyframes.length;i<l;){d=i++;hb._usedKeyframes[d]=null}if(0!=(C=hb._usedKeyframes).length)if(0<C.length)C.splice(0,C.length);else for(b=C;b.length<0;)b.push(null)}_.apply()}}}},putTracksForItem:function(e){if(null!=this.tracks)for(var n=0,t=this.tracks.length;n<t;){var i=n++,i=this.tracks[i];i.entity==e&&this.putTrack(null,i)}},getTrack:function(e,n){if(null!=this.tracks)for(var t=0,i=this.tracks;t<i.length;){var l=i[t];if(++t,l.entity==e&&l.field==n)return l}return null},removeTrack:function(e,n){if(null!=this.tracks){for(var t,i=-1,l=0,s=this.tracks.length;l<s;){var r=l++,a=this.tracks[r];if(a.entity==e&&a.field==n){i=r;break}}-1!=i&&(this.tracks.splice(i,1),null!=this.timeline)&&null!=(t=this.timeline.get(e+"#"+n))&&(this.timeline.remove(t),t.destroy())}},createTimelineIfNeeded:function(){null==this.timeline&&(this.timeline=new Ci,this.timeline.fps=this.fps,this.timeline.set_autoUpdate(this.autoUpdateTimeline))},putLabel:function(e,n){this.createTimelineIfNeeded(),this.timeline.setLabel(e,n)},indexOfLabel:function(e){return null!=this.timeline?this.timeline.indexOfLabel(e):-1},labelAtIndex:function(e){return null!=this.timeline?this.timeline.labelAtIndex(e):null},removeLabel:function(e){null!=this.timeline&&this.timeline.removeLabel(e)},removeLabelAtIndex:function(e){null!=this.timeline&&this.timeline.removeLabelAtIndex(e)},get_paused:function(){return null!=this.timeline&&this.timeline.paused},set_paused:function(e){return(null!=this.timeline&&this.timeline.paused)!=e&&(this.createTimelineIfNeeded(),this.timeline.set_paused(e)),e},unbindEvents:function(){s.prototype.unbindEvents.call(this),this.offReady()},__class__:hb,__properties__:$extend(s.prototype.__properties__,{set_paused:"set_paused",get_paused:"get_paused",set_fragmentComponents:"set_fragmentComponents",set_autoUpdateTimeline:"set_autoUpdateTimeline",set_fragmentData:"set_fragmentData",set_fps:"set_fps"})}),function(e,n,t){this.unobservedFragments=null,this.fragmentsAutoruns=null,i0.call(this,"fragments",e,n,t)}),Dn=((L["ceramic.FragmentsAsset"]=Tn).__name__="ceramic.FragmentsAsset",Tn.fromRawFragments=function(e){var n={},t=0|e.version;if(1==t){var i=e.fragments;if(null!=i)for(var l=0;l<i.length;){var s=i[l],r=(++l,s.data),a=s.components,r={id:s.id,data:null!=r?r:{},width:s.width,height:s.height,components:null!=a?a:{}},h=(Object.prototype.hasOwnProperty.call(s,"color")&&(r.color=E.fromString(s.color)),Object.prototype.hasOwnProperty.call(s,"transparent")&&(r.transparent=1==s.transparent),e.schema),u=[];if(Object.prototype.hasOwnProperty.call(s,"visuals"))for(var c=s.visuals,o=0;o<c.length;){for(var _=c[o],d=(++o,_.data),b=_.components,g={id:_.id,data:null!=d?d:{},entity:_.entity,components:null!=b?b:{},props:{}},O=0,f=N.fields(_);O<f.length;){var p=f[O];switch(++O,p){case"components":case"data":case"id":case"kind":case"locked":break;case"entity":var m=N.field(_,p);null!=h&&null!=m&&Object.prototype.hasOwnProperty.call(h,m)&&(g.schema=N.field(h,m));break;default:g.props[p]=N.field(_,p)}}u.push(g)}if(Object.prototype.hasOwnProperty.call(s,"entities"))for(var w=s.entities,v=0;v<w.length;){for(var y=w[v],C=(++v,y.data),U=y.components,x={id:y.id,data:null!=C?C:{},entity:y.entity,components:null!=U?U:{},props:{}},T=0,D=N.fields(y);T<D.length;){var A=D[T];switch(++T,A){case"components":case"data":case"id":case"kind":case"locked":break;case"entity":var S=N.field(y,A);null!=h&&null!=S&&Object.prototype.hasOwnProperty.call(h,S)&&(x.schema=N.field(h,S));break;default:x.props[A]=N.field(y,A)}}u.push(x)}r.items=u,n[r.id]=r}}else he.app.logger.warning("Unsupported fragments file version: "+t,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:177,className:"ceramic.FragmentsAsset",methodName:"fromRawFragments"});return n},Tn.__super__=i0,Tn.prototype=$extend(i0.prototype,{fragmentsAutoruns:null,get_fragments:function(){var e,n,t=this.unobservedFragments;return null!=M.current&&(e=M.current,null!=(n=this.fragmentsAutoruns)||(n=M.getAutorunArray(),null!=(this.fragmentsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_fragments:function(e){var n=this.unobservedFragments;return n!=(this.unobservedFragments=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFragmentsChange(e,n),null!=(n=this.fragmentsAutoruns))&&(this.fragmentsAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateFragments:function(){var e=this.unobservedFragments,e=(this.emitFragmentsChange(e,e),this.fragmentsAutoruns);null!=e&&(this.fragmentsAutoruns=null,M.invalidateAutorunArray(e))},unobservedFragments:null,__cbOnFragmentsChange:null,__cbOnceFragmentsChange:null,__cbOnOwnerUnbindFragmentsChange:null,__cbOnceOwnerUnbindFragmentsChange:null,emitFragmentsChange:function(e,n){var t=0;if(null!=this.__cbOnFragmentsChange&&(t+=this.__cbOnFragmentsChange.length),null!=this.__cbOnceFragmentsChange&&(t+=this.__cbOnceFragmentsChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnFragmentsChange)for(var r=0,a=this.__cbOnFragmentsChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnFragmentsChange[h],++s):--t}if(null!=this.__cbOnceFragmentsChange){for(var u=null,c=null,r=0,a=this.__cbOnceFragmentsChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceFragmentsChange[h],this.__cbOnceFragmentsChange[h]=null,o=this.__cbOnceOwnerUnbindFragmentsChange[h],(this.__cbOnceOwnerUnbindFragmentsChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindFragmentsChange[h]),c.push(this.__cbOnceFragmentsChange[h]))}this.__cbOnceOwnerUnbindFragmentsChange=u,this.__cbOnceFragmentsChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onFragmentsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event fragmentsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFragmentsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFragmentsChange&&(this.__cbOnOwnerUnbindFragmentsChange=[]),this.__cbOnOwnerUnbindFragmentsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFragmentsChange&&(this.__cbOnOwnerUnbindFragmentsChange=[]),this.__cbOnOwnerUnbindFragmentsChange.push(null);null==this.__cbOnFragmentsChange&&(this.__cbOnFragmentsChange=[]),this.__cbOnFragmentsChange.push(t)},onceFragmentsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event fragmentsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFragmentsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFragmentsChange&&(this.__cbOnceOwnerUnbindFragmentsChange=[]),this.__cbOnceOwnerUnbindFragmentsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFragmentsChange&&(this.__cbOnceOwnerUnbindFragmentsChange=[]),this.__cbOnceOwnerUnbindFragmentsChange.push(null);null==this.__cbOnceFragmentsChange&&(this.__cbOnceFragmentsChange=[]),this.__cbOnceFragmentsChange.push(t)},offFragmentsChange:function(e){if(null!=e){var n;null!=this.__cbOnFragmentsChange&&-1!=(n=this.__cbOnFragmentsChange.indexOf(e))&&(this.__cbOnFragmentsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFragmentsChange[n])&&s(),this.__cbOnOwnerUnbindFragmentsChange.splice(n,1)),null!=this.__cbOnceFragmentsChange&&-1!=(n=this.__cbOnceFragmentsChange.indexOf(e))&&(this.__cbOnceFragmentsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFragmentsChange[n])&&s(),this.__cbOnceOwnerUnbindFragmentsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFragmentsChange){for(var t=0,i=this.__cbOnOwnerUnbindFragmentsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFragmentsChange[l])&&s()}this.__cbOnOwnerUnbindFragmentsChange=null}if(null!=this.__cbOnceOwnerUnbindFragmentsChange){for(t=0,i=this.__cbOnceOwnerUnbindFragmentsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFragmentsChange[l])&&s()}this.__cbOnceOwnerUnbindFragmentsChange=null}this.__cbOnFragmentsChange=null,this.__cbOnceFragmentsChange=null}},listensFragmentsChange:function(){return null!=this.__cbOnFragmentsChange&&0<this.__cbOnFragmentsChange.length||null!=this.__cbOnceFragmentsChange&&0<this.__cbOnceFragmentsChange.length},load:function(){var e,n,t,i=this;this.set_status(Je.LOADING),null==this.path?(he.app.logger.warning("Cannot load fragments asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:22,className:"ceramic.FragmentsAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1)):(e=this.path,n=Re.realAssetPath(e,this.runtimeAssets),0<(t=Re.getReloadCount(n))&&(n+="?hot="+t,e+="?hot="+t),t={},null!=this.owner&&(t.immediate=this.owner.immediate,t.loadMethod=this.owner.loadMethod),he.app.logger.info("Load fragments "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:43,className:"ceramic.FragmentsAsset",methodName:"load"}),he.app.backend.texts.load(n,t,function(e){if(null!=e){try{var n=JSON.parse(e);Object.prototype.hasOwnProperty.call(n,"version")?i.set_fragments(Tn.fromRawFragments(n)):i.set_fragments(n)}catch(e){return Al.lastError=e,i.set_status(Je.BROKEN),he.app.logger.error("Failed to parse fragments at path: "+i.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:57,className:"ceramic.FragmentsAsset",methodName:"load"}),void i.emitComplete(!1)}i.set_status(Je.READY),i.emitComplete(!0)}else i.set_status(Je.BROKEN),he.app.logger.error("Failed to load fragments at path: "+i.path,{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:66,className:"ceramic.FragmentsAsset",methodName:"load"}),i.emitComplete(!1)}))},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload fragments (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:199,className:"ceramic.FragmentsAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),this.set_fragments(null))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offFragmentsChange()},__class__:Tn,__properties__:$extend(i0.prototype.__properties__,{set_fragments:"set_fragments",get_fragments:"get_fragments"})}),(L["ceramic.GeometryUtils"]=lb).__name__="ceramic.GeometryUtils",lb.pointInTriangle=function(e,n,t,i,l,s,r,a){var h=(e-l)*(i-s)-(t-l)*(n-s),s=(e-r)*(s-a)-(l-r)*(n-a),l=(e-t)*(a-i)-(r-t)*(n-i);return!((h<0||s<0||l<0)&&(0<h||0<s||0<l))},lb.pointInRectangle=function(e,n,t,i,l,s){return!(e<t||n<i||t+l<=e||i+s<=n)},lb.pointInCircle=function(e,n,t,i,l){return(e-t)*(e-t)+(n-i)*(n-i)<=l*l},lb.intersectCircles=function(e,n,t,i,l,s){i-=e,e=l-n,l=t+s;return i*i+e*e<=l*l},lb.distance=function(e,n,t,i){t-=e,e=i-n;return Math.sqrt(t*t+e*e)},lb.squareDistance=function(e,n,t,i){t-=e,e=i-n;return t*t+e*e},lb.angleTo=function(e,n,t,i){i=57.29577951308232*Math.atan2(i-n,t-e)+90;return i<0?i+=360:360<=i&&(i-=360),i},lb.angleDelta=function(e,n){for(var t=e;t<0;)t+=360;for(;360<=t;)t-=360;e=t;for(t=n;t<0;)t+=360;for(;360<=t;)t-=360;var i=(n=t)-e;return 180<i?n-=360:i<-180&&(n+=360),n-e},lb.clampDegrees=function(e){for(;e<0;)e+=360;for(;360<=e;)e-=360;return e},lb.angleDirection=function(e,n){e=.017453292519943295*(e-90);return n.x=Math.cos(e),n.y=Math.sin(e),n},lb.isClockwise=function(e,n,t){if(t<=2)return!1;for(var i=0,l=n+t-2,s=e[l],r=e[1+l],a=n;a<=l;){var h=e[a],u=e[a+1];i+=s*u-h*r,s=h,r=u,a+=2}return i<0},(L["ceramic.GlyphQuad"]=mb).__name__="ceramic.GlyphQuad",mb.__super__=r,mb.prototype=$extend(r.prototype,{__cbOnClear:null,__cbOnceClear:null,__cbOnOwnerUnbindClear:null,__cbOnceOwnerUnbindClear:null,emitClear:function(e){var n=0;if(null!=this.__cbOnClear&&(n+=this.__cbOnClear.length),null!=this.__cbOnceClear&&(n+=this.__cbOnceClear.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnClear)for(var s=0,r=this.__cbOnClear.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnClear[a],++l):--n}if(null!=this.__cbOnceClear){for(var h=null,u=null,s=0,r=this.__cbOnceClear.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceClear[a],this.__cbOnceClear[a]=null,c=this.__cbOnceOwnerUnbindClear[a],(this.__cbOnceOwnerUnbindClear[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindClear[a]),u.push(this.__cbOnceClear[a]))}this.__cbOnceOwnerUnbindClear=h,this.__cbOnceClear=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onClear:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event clear because owner is destroyed!");var l=function(e){null!=t&&(i.offClear(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindClear&&(this.__cbOnOwnerUnbindClear=[]),this.__cbOnOwnerUnbindClear.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindClear&&(this.__cbOnOwnerUnbindClear=[]),this.__cbOnOwnerUnbindClear.push(null);null==this.__cbOnClear&&(this.__cbOnClear=[]),this.__cbOnClear.push(t)},onceClear:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event clear because owner is destroyed!");var l=function(e){null!=t&&(i.offClear(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindClear&&(this.__cbOnceOwnerUnbindClear=[]),this.__cbOnceOwnerUnbindClear.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindClear&&(this.__cbOnceOwnerUnbindClear=[]),this.__cbOnceOwnerUnbindClear.push(null);null==this.__cbOnceClear&&(this.__cbOnceClear=[]),this.__cbOnceClear.push(t)},offClear:function(e){if(null!=e){var n;null!=this.__cbOnClear&&-1!=(n=this.__cbOnClear.indexOf(e))&&(this.__cbOnClear.splice(n,1),null!=(s=this.__cbOnOwnerUnbindClear[n])&&s(),this.__cbOnOwnerUnbindClear.splice(n,1)),null!=this.__cbOnceClear&&-1!=(n=this.__cbOnceClear.indexOf(e))&&(this.__cbOnceClear.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindClear[n])&&s(),this.__cbOnceOwnerUnbindClear.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindClear){for(var t=0,i=this.__cbOnOwnerUnbindClear.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindClear[l])&&s()}this.__cbOnOwnerUnbindClear=null}if(null!=this.__cbOnceOwnerUnbindClear){for(t=0,i=this.__cbOnceOwnerUnbindClear.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindClear[l])&&s()}this.__cbOnceOwnerUnbindClear=null}this.__cbOnClear=null,this.__cbOnceClear=null}},listensClear:function(){return null!=this.__cbOnClear&&0<this.__cbOnClear.length||null!=this.__cbOnceClear&&0<this.__cbOnceClear.length},char:null,glyph:null,index:null,posInLine:null,line:null,code:null,glyphX:null,glyphY:null,glyphAdvance:null,toString:function(){return"GlyphQuad(c="+this.char+",i="+this.index+",l="+this.line+",x="+this.glyphX+",y="+this.glyphY+")"},clear:function(){this.emitClear(this),r.prototype.clear.call(this)},unbindEvents:function(){r.prototype.unbindEvents.call(this),this.offClear()},__class__:mb}),function(e){this.items=[],l.call(this),null!=e&&(this.id=e),he.app.groups.push(this)}),An=((L["ceramic.Group"]=Dn).__name__="ceramic.Group",Dn.__super__=l,Dn.prototype=$extend(l.prototype,{items:null,add:function(e){var n=this.items;-1!=n.indexOf(e)?he.app.logger.warning("Cannot add item "+V.string(e)+" to group, already inside group",{fileName:"../../../../ceramic/runtime/src/ceramic/Group.hx",lineNumber:42,className:"ceramic.Group",methodName:"add"}):(n.push(e),e.onDestroy(this,$bind(this,this.itemDestroyed)))},remove:function(e){var n=this.items,t=n.indexOf(e);-1!=t?(n.splice(t,1),e.offDestroy($bind(this,this.itemDestroyed))):he.app.logger.warning("Cannot remove item "+V.string(e)+" from group, index is -1",{fileName:"../../../../ceramic/runtime/src/ceramic/Group.hx",lineNumber:61,className:"ceramic.Group",methodName:"remove"})},contains:function(e){return-1!=this.items.indexOf(e)},itemDestroyed:function(e){this.remove(e)},clear:function(){var e=this.items;if(0<e.length){for(var n=e.length,t=f.pool(n),i=t.get(),l=0,s=n;l<s;){var r=l++;i.vector[r]=e[r]}for(l=0,s=n;l<s;){var r=l++,a=i.vector[r];a.offDestroy($bind(this,this.itemDestroyed)),a.destroy()}if(0!=e.length)if(0<e.length)e.splice(0,e.length);else for(var h=e;h.length<0;)h.push(null);t.release(i)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),h.remove(he.app.groups,this),this.clear())},__class__:Dn}),function(){}),Sn=((L["ceramic.HashedString"]=An).__name__="ceramic.HashedString",An.encode=function(e){return Ll.encode(e)+""+e.length+";"+e},An.append=function(e,n){return e+An.encode(n)},An.decode=function(e){An._lastDecodeIncomplete=!1;for(var n=0,t=e.length,i=null;n<t;){for(var l=e.substring(n,n+32),s=n+=32;s<t&&59!=h.cca(e,s);)++s;var r=V.parseInt(e.substring(n,s));if(null==r||r<=0){he.app.logger.warning("Failed to parse all encoded string: invalid section length",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:63,className:"ceramic.HashedString",methodName:"decode"}),An._lastDecodeIncomplete=!0;break}var n=s+1,a=e.substring(n,n+r);if(null==a){he.app.logger.warning("Failed to parse all encoded string: null section",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:72,className:"ceramic.HashedString",methodName:"decode"}),An._lastDecodeIncomplete=!0;break}if(Ll.encode(a)!=l){he.app.logger.warning("Failed to parse all encoded string: section hash mismatch",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:77,className:"ceramic.HashedString",methodName:"decode"}),An._lastDecodeIncomplete=!0;break}n+=r,(i=null==i?new A:i).b+=null==a?"null":""+a}return null!=i?i.b:(he.app.logger.error("Invalid encoded string",{fileName:"../../../../ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:95,className:"ceramic.HashedString",methodName:"decode"}),An._lastDecodeIncomplete=!0,null)},An.prototype={isLastDecodeIncomplete:function(){return An._lastDecodeIncomplete},__class__:An},function(e,n,t){this.aseSpacing=0,this.asePadding=0,this.aseTexHeight=-1,this.aseTexWidth=-1,this.reloadBecauseOfDensityChange=!1,this.defaultImageOptions=null,this.unobservedTexture=null,this.textureAutoruns=null,i0.call(this,"image",e,n,t),this.set_handleTexturesDensityChange(!0)}),En=((L["ceramic.ImageAsset"]=Sn).__name__="ceramic.ImageAsset",Sn.__super__=i0,Sn.prototype=$extend(i0.prototype,{__cbOnReplaceTexture:null,__cbOnceReplaceTexture:null,__cbOnOwnerUnbindReplaceTexture:null,__cbOnceOwnerUnbindReplaceTexture:null,emitReplaceTexture:function(e,n){var t=0;if(null!=this.__cbOnReplaceTexture&&(t+=this.__cbOnReplaceTexture.length),null!=this.__cbOnceReplaceTexture&&(t+=this.__cbOnceReplaceTexture.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnReplaceTexture)for(var r=0,a=this.__cbOnReplaceTexture.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnReplaceTexture[h],++s):--t}if(null!=this.__cbOnceReplaceTexture){for(var u=null,c=null,r=0,a=this.__cbOnceReplaceTexture.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceReplaceTexture[h],this.__cbOnceReplaceTexture[h]=null,o=this.__cbOnceOwnerUnbindReplaceTexture[h],(this.__cbOnceOwnerUnbindReplaceTexture[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindReplaceTexture[h]),c.push(this.__cbOnceReplaceTexture[h]))}this.__cbOnceOwnerUnbindReplaceTexture=u,this.__cbOnceReplaceTexture=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onReplaceTexture:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceTexture because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceTexture(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReplaceTexture&&(this.__cbOnOwnerUnbindReplaceTexture=[]),this.__cbOnOwnerUnbindReplaceTexture.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReplaceTexture&&(this.__cbOnOwnerUnbindReplaceTexture=[]),this.__cbOnOwnerUnbindReplaceTexture.push(null);null==this.__cbOnReplaceTexture&&(this.__cbOnReplaceTexture=[]),this.__cbOnReplaceTexture.push(t)},onceReplaceTexture:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceTexture because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceTexture(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReplaceTexture&&(this.__cbOnceOwnerUnbindReplaceTexture=[]),this.__cbOnceOwnerUnbindReplaceTexture.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReplaceTexture&&(this.__cbOnceOwnerUnbindReplaceTexture=[]),this.__cbOnceOwnerUnbindReplaceTexture.push(null);null==this.__cbOnceReplaceTexture&&(this.__cbOnceReplaceTexture=[]),this.__cbOnceReplaceTexture.push(t)},offReplaceTexture:function(e){if(null!=e){var n;null!=this.__cbOnReplaceTexture&&-1!=(n=this.__cbOnReplaceTexture.indexOf(e))&&(this.__cbOnReplaceTexture.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReplaceTexture[n])&&s(),this.__cbOnOwnerUnbindReplaceTexture.splice(n,1)),null!=this.__cbOnceReplaceTexture&&-1!=(n=this.__cbOnceReplaceTexture.indexOf(e))&&(this.__cbOnceReplaceTexture.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReplaceTexture[n])&&s(),this.__cbOnceOwnerUnbindReplaceTexture.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceTexture){for(var t=0,i=this.__cbOnOwnerUnbindReplaceTexture.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReplaceTexture[l])&&s()}this.__cbOnOwnerUnbindReplaceTexture=null}if(null!=this.__cbOnceOwnerUnbindReplaceTexture){for(t=0,i=this.__cbOnceOwnerUnbindReplaceTexture.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReplaceTexture[l])&&s()}this.__cbOnceOwnerUnbindReplaceTexture=null}this.__cbOnReplaceTexture=null,this.__cbOnceReplaceTexture=null}},listensReplaceTexture:function(){return null!=this.__cbOnReplaceTexture&&0<this.__cbOnReplaceTexture.length||null!=this.__cbOnceReplaceTexture&&0<this.__cbOnceReplaceTexture.length},textureAutoruns:null,get_texture:function(){var e,n,t=this.unobservedTexture;return null!=M.current&&(e=M.current,null!=(n=this.textureAutoruns)||(n=M.getAutorunArray(),null!=(this.textureAutoruns=n)))&&e.bindToAutorunArray(n),t},set_texture:function(e){var n=this.unobservedTexture;return n!=(this.unobservedTexture=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextureChange(e,n),null!=(n=this.textureAutoruns))&&(this.textureAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTexture:function(){var e=this.unobservedTexture,e=(this.emitTextureChange(e,e),this.textureAutoruns);null!=e&&(this.textureAutoruns=null,M.invalidateAutorunArray(e))},unobservedTexture:null,__cbOnTextureChange:null,__cbOnceTextureChange:null,__cbOnOwnerUnbindTextureChange:null,__cbOnceOwnerUnbindTextureChange:null,emitTextureChange:function(e,n){var t=0;if(null!=this.__cbOnTextureChange&&(t+=this.__cbOnTextureChange.length),null!=this.__cbOnceTextureChange&&(t+=this.__cbOnceTextureChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTextureChange)for(var r=0,a=this.__cbOnTextureChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTextureChange[h],++s):--t}if(null!=this.__cbOnceTextureChange){for(var u=null,c=null,r=0,a=this.__cbOnceTextureChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTextureChange[h],this.__cbOnceTextureChange[h]=null,o=this.__cbOnceOwnerUnbindTextureChange[h],(this.__cbOnceOwnerUnbindTextureChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTextureChange[h]),c.push(this.__cbOnceTextureChange[h]))}this.__cbOnceOwnerUnbindTextureChange=u,this.__cbOnceTextureChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textureChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextureChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(null);null==this.__cbOnTextureChange&&(this.__cbOnTextureChange=[]),this.__cbOnTextureChange.push(t)},onceTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textureChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextureChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(null);null==this.__cbOnceTextureChange&&(this.__cbOnceTextureChange=[]),this.__cbOnceTextureChange.push(t)},offTextureChange:function(e){if(null!=e){var n;null!=this.__cbOnTextureChange&&-1!=(n=this.__cbOnTextureChange.indexOf(e))&&(this.__cbOnTextureChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTextureChange[n])&&s(),this.__cbOnOwnerUnbindTextureChange.splice(n,1)),null!=this.__cbOnceTextureChange&&-1!=(n=this.__cbOnceTextureChange.indexOf(e))&&(this.__cbOnceTextureChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTextureChange[n])&&s(),this.__cbOnceOwnerUnbindTextureChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindTextureChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTextureChange[l])&&s()}this.__cbOnOwnerUnbindTextureChange=null}if(null!=this.__cbOnceOwnerUnbindTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindTextureChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTextureChange[l])&&s()}this.__cbOnceOwnerUnbindTextureChange=null}this.__cbOnTextureChange=null,this.__cbOnceTextureChange=null}},listensTextureChange:function(){return null!=this.__cbOnTextureChange&&0<this.__cbOnTextureChange.length||null!=this.__cbOnceTextureChange&&0<this.__cbOnceTextureChange.length},defaultImageOptions:null,reloadBecauseOfDensityChange:null,aseTexWidth:null,aseTexHeight:null,asePadding:null,aseSpacing:null,load:function(){var _=this,d=(this.set_status(Je.LOADING),this.reloadBecauseOfDensityChange);if(this.reloadBecauseOfDensityChange=!1,null==this.path)he.app.logger.warning("Cannot load image asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:57,className:"ceramic.ImageAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1);else{var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.defaultImageOptions)for(var n=0,t=N.fields(this.defaultImageOptions);n<t.length;){var i=t[n];++n,e[i]=N.field(this.defaultImageOptions,i)}if(null!=this.options)for(n=0,t=N.fields(this.options);n<t.length;){i=t[n];++n,e[i]=N.field(this.options,i)}this.loadTexture(this.path,e,function(e,n){if(null!=e){var t=_.get_texture();if(e.id="texture:"+n,_.set_texture(e),_.get_texture().asset=_,null!=t){_.get_texture().set_filter(t.filter),_.emitReplaceTexture(_.get_texture(),t);for(var i=0,l=[].concat(he.app.visuals);i<l.length;){var s,r,a,h,u,c,o=l[i];++i,0<=o._lifecycleState&&(null!=o.asQuad?(s=o.asQuad)._texture==t&&(c=s.frameX,r=s.frameY,a=s.frameWidth,h=s.frameHeight,u=_.get_texture(),s._texture!=u&&s._set_texture(u),!d&&0==c&&0==r&&a==t.width&&h==t.height||(s.frameX=c,s.frameY=r,s.frameWidth!=a&&-1!=(s.frameWidth=a)&&s.set_width(a),s.frameHeight==h)||-1==(s.frameHeight=h)||s.set_height(h)):null!=o.asMesh&&(u=o.asMesh).texture==t&&(c=_.get_texture(),u.texture!=c)&&(null!=u.texture&&(u.texture.offDestroy($bind(u,u.textureDestroyed)),null!=u.texture.asset)&&u.texture.asset.release(),u.texture=c,null!=u.texture)&&(u.texture.onDestroy(u,$bind(u,u.textureDestroyed)),null!=u.texture.asset)&&u.texture.asset.retain())}t.asset=null,t.destroy()}_.set_status(Je.READY),_.emitComplete(!0),_.handleTexturesDensityChange&&_.checkTexturesDensity()}else he.app.logger.warning("Failed to decode texture",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:155,className:"ceramic.ImageAsset",methodName:"load"}),_.set_status(Je.BROKEN),_.emitComplete(!1)})}},loadTexture:function(r,e,a){var h=this,u=r,n=Re.realAssetPath(u,this.runtimeAssets),t=Re.getReloadCount(n);0<t&&(n+="?hot="+t,u+="?hot="+t),he.app.logger.info("Load image "+u+" (density="+this.density+")",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:175,className:"ceramic.ImageAsset",methodName:"loadTexture"}),null!=r&&(B.endsWith(r.toLowerCase(),".ase")||B.endsWith(r.toLowerCase(),".aseprite"))?he.app.backend.binaries.load(n,e,function(n){if(null!=n)try{null!=h.options&&null!=h.options.width&&null!=h.options.height&&(h.aseTexWidth=h.options.width,h.aseTexHeight=h.options.height);var e=0<h.aseTexWidth&&0<h.aseTexHeight,t=H.fromBytes(n),i=h.options,l=f0.parseAse(t,u,null,e?-1:0,null,{layers:null!=i?i.layers:null}),s=e?f0.parseGridTextureFromAsepriteData(l,0,l.frames.length+1,h.aseTexWidth,h.aseTexHeight,h.aseSpacing,h.asePadding,h.density):f0.parseTextureFromAsepriteData(l,0,h.density);l.destroy(),a(s,u)}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();h.set_status(Je.BROKEN),he.app.logger.error("Failed to decode ase image at path: "+r+" ("+V.string(n)+")",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:215,className:"ceramic.ImageAsset",methodName:"loadTexture"}),h.emitComplete(!1)}else h.set_status(Je.BROKEN),he.app.logger.error("Failed to load ase image at path: "+r,{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:221,className:"ceramic.ImageAsset",methodName:"loadTexture"}),h.emitComplete(!1)}):he.app.backend.textures.load(n,e,function(e){null!=e?(e=new Rt(e,h.density),a(e,u)):(h.set_status(Je.BROKEN),he.app.logger.error("Failed to load texture at path: "+r,{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:241,className:"ceramic.ImageAsset",methodName:"loadTexture"}),h.emitComplete(!1))})},texturesDensityDidChange:function(e,n){this.get_status()==Je.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var e;null!=this.owner&&this.owner.reloadOnTextureDensityChange&&(e=this.path,this.computePath(),e!=this.path)&&(he.app.logger.info("Reload texture ("+e+" -> "+this.path+")",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:273,className:"ceramic.ImageAsset",methodName:"checkTexturesDensity"}),this.reloadBecauseOfDensityChange=!0,this.load())},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload texture (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:295,className:"ceramic.ImageAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),null!=this.get_texture()&&(this.get_texture().destroy(),this.set_texture(null)))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offReplaceTexture(),this.offTextureChange()},__class__:Sn,__properties__:$extend(i0.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),function(){this.immediateCallbacksLen=0,this.immediateCallbacksCapacity=0,this.immediateCallbacks=[]}),Mn=((L["ceramic.Immediate"]=En).__name__="ceramic.Immediate",En.prototype={immediateCallbacks:null,immediateCallbacksCapacity:null,immediateCallbacksLen:null,push:function(e){if(null==e)throw Q.thrown("Immediate callback should not be null!");this.immediateCallbacksLen<this.immediateCallbacksCapacity?(this.immediateCallbacks[this.immediateCallbacksLen]=e,this.immediateCallbacksLen++):(this.immediateCallbacks[this.immediateCallbacksLen++]=e,this.immediateCallbacksCapacity++)},flush:function(){for(var e=!1;0<this.immediateCallbacksLen;){for(var e=!0,n=f.pool(this.immediateCallbacksLen),t=n.get(),i=this.immediateCallbacksLen,l=this.immediateCallbacksLen=0,s=i;l<s;){var r=l++;t.vector[r]=this.immediateCallbacks[r],this.immediateCallbacks[r]=null}for(var a=0,h=i;a<h;){var u=a++;(0,t.vector[u])()}n.release(t)}return e},__class__:En},function(e){this.settings=e}),kn=((L["ceramic.InitSettings"]=Mn).__name__="ceramic.InitSettings",Mn.prototype={settings:null,get_targetWidth:function(){return this.settings.get_targetWidth()},set_targetWidth:function(e){return this.settings.set_targetWidth(e)},get_targetHeight:function(){return this.settings.get_targetHeight()},set_targetHeight:function(e){return this.settings.set_targetHeight(e)},targetSize:function(e,n){this.settings.set_targetWidth(e),this.settings.set_targetHeight(n)},get_windowWidth:function(){return this.settings.get_windowWidth()},set_windowWidth:function(e){return this.settings.set_windowWidth(e)},get_windowHeight:function(){return this.settings.get_windowHeight()},set_windowHeight:function(e){return this.settings.set_windowHeight(e)},windowSize:function(e,n){this.settings.set_windowWidth(e),this.settings.set_windowHeight(n)},get_targetDensity:function(){return this.settings.get_targetDensity()},set_targetDensity:function(e){return this.settings.set_targetDensity(e)},get_background:function(){return this.settings.get_background()},set_background:function(e){return this.settings.set_background(e)},get_scaling:function(){return this.settings.get_scaling()},set_scaling:function(e){return this.settings.set_scaling(e)},get_title:function(){return this.settings.get_title()},set_title:function(e){return this.settings.set_title(e)},get_fullscreen:function(){return this.settings.get_fullscreen()},set_fullscreen:function(e){return this.settings.set_fullscreen(e)},get_targetFps:function(){return this.settings.get_targetFps()},set_targetFps:function(e){return this.settings.set_targetFps(e)},get_maxDelta:function(){return this.settings.get_maxDelta()},set_maxDelta:function(e){return this.settings.set_maxDelta(e)},get_overrideDelta:function(){return this.settings.get_overrideDelta()},set_overrideDelta:function(e){return this.settings.set_overrideDelta(e)},get_preventDefaultMouseWheel:function(){return this.settings.get_preventDefaultMouseWheel()},set_preventDefaultMouseWheel:function(e){return this.settings.set_preventDefaultMouseWheel(e)},get_preventDefaultTouches:function(){return this.settings.get_preventDefaultTouches()},set_preventDefaultTouches:function(e){return this.settings.set_preventDefaultTouches(e)},get_orientation:function(){return this.settings.orientation},set_orientation:function(e){return this.settings.orientation=e},get_antialiasing:function(){return this.settings.antialiasing},set_antialiasing:function(e){return this.settings.antialiasing=e},get_collections:function(){return this.settings.collections},set_collections:function(e){return this.settings.collections=e},get_appInfo:function(){return this.settings.appInfo},set_appInfo:function(e){return this.settings.appInfo=e},get_resizable:function(){return this.settings.resizable},set_resizable:function(e){return this.settings.resizable=e},get_assetsPath:function(){return this.settings.assetsPath},set_assetsPath:function(e){return this.settings.assetsPath=e},get_backend:function(){return this.settings.backend},set_backend:function(e){return this.settings.backend=e},get_defaultFont:function(){return this.settings.defaultFont},set_defaultFont:function(e){return this.settings.defaultFont=e},get_defaultShader:function(){return this.settings.defaultShader},set_defaultShader:function(e){return this.settings.defaultShader=e},__class__:Mn,__properties__:{set_defaultShader:"set_defaultShader",get_defaultShader:"get_defaultShader",set_defaultFont:"set_defaultFont",get_defaultFont:"get_defaultFont",set_backend:"set_backend",get_backend:"get_backend",set_assetsPath:"set_assetsPath",get_assetsPath:"get_assetsPath",set_resizable:"set_resizable",get_resizable:"get_resizable",set_appInfo:"set_appInfo",get_appInfo:"get_appInfo",set_collections:"set_collections",get_collections:"get_collections",set_antialiasing:"set_antialiasing",get_antialiasing:"get_antialiasing",set_orientation:"set_orientation",get_orientation:"get_orientation",set_preventDefaultTouches:"set_preventDefaultTouches",get_preventDefaultTouches:"get_preventDefaultTouches",set_preventDefaultMouseWheel:"set_preventDefaultMouseWheel",get_preventDefaultMouseWheel:"get_preventDefaultMouseWheel",set_overrideDelta:"set_overrideDelta",get_overrideDelta:"get_overrideDelta",set_maxDelta:"set_maxDelta",get_maxDelta:"get_maxDelta",set_targetFps:"set_targetFps",get_targetFps:"get_targetFps",set_fullscreen:"set_fullscreen",get_fullscreen:"get_fullscreen",set_title:"set_title",get_title:"get_title",set_scaling:"set_scaling",get_scaling:"get_scaling",set_background:"set_background",get_background:"get_background",set_targetDensity:"set_targetDensity",get_targetDensity:"get_targetDensity",set_windowHeight:"set_windowHeight",get_windowHeight:"get_windowHeight",set_windowWidth:"set_windowWidth",get_windowWidth:"get_windowWidth",set_targetHeight:"set_targetHeight",get_targetHeight:"get_targetHeight",set_targetWidth:"set_targetWidth",get_targetWidth:"get_targetWidth"}},function(){this.activeGamepads=[],this.gamepadNames=new Kn,this.gamepadGyroKeys=[],this.gamepadGyroDeltas=new Kn,this.gamepadAxisValues=new Bn(16,.5,!1),this.pressedGamepadButtons=new rn(16,.5,!1),this.pressedKeyCodes=new rn(16,.5,!1),this.pressedScanCodes=new rn(16,.5,!1),l.call(this)}),In=((L["ceramic.Input"]=kn).__name__="ceramic.Input",kn.__super__=l,kn.prototype=$extend(l.prototype,{__cbOnKeyDown:null,__cbOnceKeyDown:null,__cbOnOwnerUnbindKeyDown:null,__cbOnceOwnerUnbindKeyDown:null,emitKeyDown:function(e){this.willEmitKeyDown(e);var n=0;if(null!=this.__cbOnKeyDown&&(n+=this.__cbOnKeyDown.length),null!=this.__cbOnceKeyDown&&(n+=this.__cbOnceKeyDown.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnKeyDown)for(var s=0,r=this.__cbOnKeyDown.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnKeyDown[a],++l):--n}if(null!=this.__cbOnceKeyDown){for(var h=null,u=null,s=0,r=this.__cbOnceKeyDown.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceKeyDown[a],this.__cbOnceKeyDown[a]=null,c=this.__cbOnceOwnerUnbindKeyDown[a],(this.__cbOnceOwnerUnbindKeyDown[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindKeyDown[a]),u.push(this.__cbOnceKeyDown[a]))}this.__cbOnceOwnerUnbindKeyDown=h,this.__cbOnceKeyDown=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyDown because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(null);null==this.__cbOnKeyDown&&(this.__cbOnKeyDown=[]),this.__cbOnKeyDown.push(t)},onceKeyDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyDown because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(null);null==this.__cbOnceKeyDown&&(this.__cbOnceKeyDown=[]),this.__cbOnceKeyDown.push(t)},offKeyDown:function(e){if(null!=e){var n;null!=this.__cbOnKeyDown&&-1!=(n=this.__cbOnKeyDown.indexOf(e))&&(this.__cbOnKeyDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindKeyDown[n])&&s(),this.__cbOnOwnerUnbindKeyDown.splice(n,1)),null!=this.__cbOnceKeyDown&&-1!=(n=this.__cbOnceKeyDown.indexOf(e))&&(this.__cbOnceKeyDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindKeyDown[n])&&s(),this.__cbOnceOwnerUnbindKeyDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyDown){for(var t=0,i=this.__cbOnOwnerUnbindKeyDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindKeyDown[l])&&s()}this.__cbOnOwnerUnbindKeyDown=null}if(null!=this.__cbOnceOwnerUnbindKeyDown){for(t=0,i=this.__cbOnceOwnerUnbindKeyDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindKeyDown[l])&&s()}this.__cbOnceOwnerUnbindKeyDown=null}this.__cbOnKeyDown=null,this.__cbOnceKeyDown=null}},listensKeyDown:function(){return null!=this.__cbOnKeyDown&&0<this.__cbOnKeyDown.length||null!=this.__cbOnceKeyDown&&0<this.__cbOnceKeyDown.length},__cbOnKeyUp:null,__cbOnceKeyUp:null,__cbOnOwnerUnbindKeyUp:null,__cbOnceOwnerUnbindKeyUp:null,emitKeyUp:function(e){this.willEmitKeyUp(e);var n=0;if(null!=this.__cbOnKeyUp&&(n+=this.__cbOnKeyUp.length),null!=this.__cbOnceKeyUp&&(n+=this.__cbOnceKeyUp.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnKeyUp)for(var s=0,r=this.__cbOnKeyUp.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnKeyUp[a],++l):--n}if(null!=this.__cbOnceKeyUp){for(var h=null,u=null,s=0,r=this.__cbOnceKeyUp.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceKeyUp[a],this.__cbOnceKeyUp[a]=null,c=this.__cbOnceOwnerUnbindKeyUp[a],(this.__cbOnceOwnerUnbindKeyUp[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindKeyUp[a]),u.push(this.__cbOnceKeyUp[a]))}this.__cbOnceOwnerUnbindKeyUp=h,this.__cbOnceKeyUp=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyUp because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(null);null==this.__cbOnKeyUp&&(this.__cbOnKeyUp=[]),this.__cbOnKeyUp.push(t)},onceKeyUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event keyUp because owner is destroyed!");var l=function(e){null!=t&&(i.offKeyUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(null);null==this.__cbOnceKeyUp&&(this.__cbOnceKeyUp=[]),this.__cbOnceKeyUp.push(t)},offKeyUp:function(e){if(null!=e){var n;null!=this.__cbOnKeyUp&&-1!=(n=this.__cbOnKeyUp.indexOf(e))&&(this.__cbOnKeyUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindKeyUp[n])&&s(),this.__cbOnOwnerUnbindKeyUp.splice(n,1)),null!=this.__cbOnceKeyUp&&-1!=(n=this.__cbOnceKeyUp.indexOf(e))&&(this.__cbOnceKeyUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindKeyUp[n])&&s(),this.__cbOnceOwnerUnbindKeyUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindKeyUp){for(var t=0,i=this.__cbOnOwnerUnbindKeyUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindKeyUp[l])&&s()}this.__cbOnOwnerUnbindKeyUp=null}if(null!=this.__cbOnceOwnerUnbindKeyUp){for(t=0,i=this.__cbOnceOwnerUnbindKeyUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindKeyUp[l])&&s()}this.__cbOnceOwnerUnbindKeyUp=null}this.__cbOnKeyUp=null,this.__cbOnceKeyUp=null}},listensKeyUp:function(){return null!=this.__cbOnKeyUp&&0<this.__cbOnKeyUp.length||null!=this.__cbOnceKeyUp&&0<this.__cbOnceKeyUp.length},__cbOnGamepadAxis:null,__cbOnceGamepadAxis:null,__cbOnOwnerUnbindGamepadAxis:null,__cbOnceOwnerUnbindGamepadAxis:null,emitGamepadAxis:function(e,n,t){this.gamepadAxisValues.set(32*e+n,t);var i=0;if(null!=this.__cbOnGamepadAxis&&(i+=this.__cbOnGamepadAxis.length),null!=this.__cbOnceGamepadAxis&&(i+=this.__cbOnceGamepadAxis.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnGamepadAxis)for(var a=0,h=this.__cbOnGamepadAxis.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnGamepadAxis[u],++r):--i}if(null!=this.__cbOnceGamepadAxis){for(var c=null,o=null,a=0,h=this.__cbOnceGamepadAxis.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceGamepadAxis[u],this.__cbOnceGamepadAxis[u]=null,_=this.__cbOnceOwnerUnbindGamepadAxis[u],(this.__cbOnceOwnerUnbindGamepadAxis[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindGamepadAxis[u]),o.push(this.__cbOnceGamepadAxis[u]))}this.__cbOnceOwnerUnbindGamepadAxis=c,this.__cbOnceGamepadAxis=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadAxis(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(null);null==this.__cbOnGamepadAxis&&(this.__cbOnGamepadAxis=[]),this.__cbOnGamepadAxis.push(t)},onceGamepadAxis:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadAxis(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(null);null==this.__cbOnceGamepadAxis&&(this.__cbOnceGamepadAxis=[]),this.__cbOnceGamepadAxis.push(t)},offGamepadAxis:function(e){if(null!=e){var n;null!=this.__cbOnGamepadAxis&&-1!=(n=this.__cbOnGamepadAxis.indexOf(e))&&(this.__cbOnGamepadAxis.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadAxis[n])&&s(),this.__cbOnOwnerUnbindGamepadAxis.splice(n,1)),null!=this.__cbOnceGamepadAxis&&-1!=(n=this.__cbOnceGamepadAxis.indexOf(e))&&(this.__cbOnceGamepadAxis.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadAxis[n])&&s(),this.__cbOnceOwnerUnbindGamepadAxis.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadAxis){for(var t=0,i=this.__cbOnOwnerUnbindGamepadAxis.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadAxis[l])&&s()}this.__cbOnOwnerUnbindGamepadAxis=null}if(null!=this.__cbOnceOwnerUnbindGamepadAxis){for(t=0,i=this.__cbOnceOwnerUnbindGamepadAxis.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadAxis[l])&&s()}this.__cbOnceOwnerUnbindGamepadAxis=null}this.__cbOnGamepadAxis=null,this.__cbOnceGamepadAxis=null}},listensGamepadAxis:function(){return null!=this.__cbOnGamepadAxis&&0<this.__cbOnGamepadAxis.length||null!=this.__cbOnceGamepadAxis&&0<this.__cbOnceGamepadAxis.length},__cbOnGamepadDown:null,__cbOnceGamepadDown:null,__cbOnOwnerUnbindGamepadDown:null,__cbOnceOwnerUnbindGamepadDown:null,emitGamepadDown:function(e,n){this.willEmitGamepadDown(e,n);var t=0;if(null!=this.__cbOnGamepadDown&&(t+=this.__cbOnGamepadDown.length),null!=this.__cbOnceGamepadDown&&(t+=this.__cbOnceGamepadDown.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGamepadDown)for(var r=0,a=this.__cbOnGamepadDown.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGamepadDown[h],++s):--t}if(null!=this.__cbOnceGamepadDown){for(var u=null,c=null,r=0,a=this.__cbOnceGamepadDown.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGamepadDown[h],this.__cbOnceGamepadDown[h]=null,o=this.__cbOnceOwnerUnbindGamepadDown[h],(this.__cbOnceOwnerUnbindGamepadDown[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGamepadDown[h]),c.push(this.__cbOnceGamepadDown[h]))}this.__cbOnceOwnerUnbindGamepadDown=u,this.__cbOnceGamepadDown=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDown because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(null);null==this.__cbOnGamepadDown&&(this.__cbOnGamepadDown=[]),this.__cbOnGamepadDown.push(t)},onceGamepadDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDown because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(null);null==this.__cbOnceGamepadDown&&(this.__cbOnceGamepadDown=[]),this.__cbOnceGamepadDown.push(t)},offGamepadDown:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDown&&-1!=(n=this.__cbOnGamepadDown.indexOf(e))&&(this.__cbOnGamepadDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadDown[n])&&s(),this.__cbOnOwnerUnbindGamepadDown.splice(n,1)),null!=this.__cbOnceGamepadDown&&-1!=(n=this.__cbOnceGamepadDown.indexOf(e))&&(this.__cbOnceGamepadDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadDown[n])&&s(),this.__cbOnceOwnerUnbindGamepadDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDown){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadDown[l])&&s()}this.__cbOnOwnerUnbindGamepadDown=null}if(null!=this.__cbOnceOwnerUnbindGamepadDown){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadDown[l])&&s()}this.__cbOnceOwnerUnbindGamepadDown=null}this.__cbOnGamepadDown=null,this.__cbOnceGamepadDown=null}},listensGamepadDown:function(){return null!=this.__cbOnGamepadDown&&0<this.__cbOnGamepadDown.length||null!=this.__cbOnceGamepadDown&&0<this.__cbOnceGamepadDown.length},__cbOnGamepadUp:null,__cbOnceGamepadUp:null,__cbOnOwnerUnbindGamepadUp:null,__cbOnceOwnerUnbindGamepadUp:null,emitGamepadUp:function(e,n){this.willEmitGamepadUp(e,n);var t=0;if(null!=this.__cbOnGamepadUp&&(t+=this.__cbOnGamepadUp.length),null!=this.__cbOnceGamepadUp&&(t+=this.__cbOnceGamepadUp.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGamepadUp)for(var r=0,a=this.__cbOnGamepadUp.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGamepadUp[h],++s):--t}if(null!=this.__cbOnceGamepadUp){for(var u=null,c=null,r=0,a=this.__cbOnceGamepadUp.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGamepadUp[h],this.__cbOnceGamepadUp[h]=null,o=this.__cbOnceOwnerUnbindGamepadUp[h],(this.__cbOnceOwnerUnbindGamepadUp[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGamepadUp[h]),c.push(this.__cbOnceGamepadUp[h]))}this.__cbOnceOwnerUnbindGamepadUp=u,this.__cbOnceGamepadUp=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadUp because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(null);null==this.__cbOnGamepadUp&&(this.__cbOnGamepadUp=[]),this.__cbOnGamepadUp.push(t)},onceGamepadUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadUp because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(null);null==this.__cbOnceGamepadUp&&(this.__cbOnceGamepadUp=[]),this.__cbOnceGamepadUp.push(t)},offGamepadUp:function(e){if(null!=e){var n;null!=this.__cbOnGamepadUp&&-1!=(n=this.__cbOnGamepadUp.indexOf(e))&&(this.__cbOnGamepadUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadUp[n])&&s(),this.__cbOnOwnerUnbindGamepadUp.splice(n,1)),null!=this.__cbOnceGamepadUp&&-1!=(n=this.__cbOnceGamepadUp.indexOf(e))&&(this.__cbOnceGamepadUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadUp[n])&&s(),this.__cbOnceOwnerUnbindGamepadUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadUp){for(var t=0,i=this.__cbOnOwnerUnbindGamepadUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadUp[l])&&s()}this.__cbOnOwnerUnbindGamepadUp=null}if(null!=this.__cbOnceOwnerUnbindGamepadUp){for(t=0,i=this.__cbOnceOwnerUnbindGamepadUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadUp[l])&&s()}this.__cbOnceOwnerUnbindGamepadUp=null}this.__cbOnGamepadUp=null,this.__cbOnceGamepadUp=null}},listensGamepadUp:function(){return null!=this.__cbOnGamepadUp&&0<this.__cbOnGamepadUp.length||null!=this.__cbOnceGamepadUp&&0<this.__cbOnceGamepadUp.length},__cbOnGamepadGyro:null,__cbOnceGamepadGyro:null,__cbOnOwnerUnbindGamepadGyro:null,__cbOnceOwnerUnbindGamepadGyro:null,emitGamepadGyro:function(e,n,t,i){this.willEmitGamepadGyro(e,n,t,i);var l=0;if(null!=this.__cbOnGamepadGyro&&(l+=this.__cbOnGamepadGyro.length),null!=this.__cbOnceGamepadGyro&&(l+=this.__cbOnceGamepadGyro.length),0<l){var s=f.pool(l),r=s.get(),a=0;if(null!=this.__cbOnGamepadGyro)for(var h=0,u=this.__cbOnGamepadGyro.length;h<u;){var c=h++;!0?(r.vector[a]=this.__cbOnGamepadGyro[c],++a):--l}if(null!=this.__cbOnceGamepadGyro){for(var o=null,_=null,h=0,u=this.__cbOnceGamepadGyro.length;h<u;){var d,c=h++;!0?(r.vector[a]=this.__cbOnceGamepadGyro[c],this.__cbOnceGamepadGyro[c]=null,d=this.__cbOnceOwnerUnbindGamepadGyro[c],(this.__cbOnceOwnerUnbindGamepadGyro[c]=null)!=d&&d(),++a):(--l,null==o&&(o=[],_=[],0),o.push(this.__cbOnceOwnerUnbindGamepadGyro[c]),_.push(this.__cbOnceGamepadGyro[c]))}this.__cbOnceOwnerUnbindGamepadGyro=o,this.__cbOnceGamepadGyro=_}for(h=0,u=l;h<u;){a=h++;(0,r.vector[a])(e,n,t,i)}s.release(r)}},onGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadGyro(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(null);null==this.__cbOnGamepadGyro&&(this.__cbOnGamepadGyro=[]),this.__cbOnGamepadGyro.push(t)},onceGamepadGyro:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadGyro(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(null);null==this.__cbOnceGamepadGyro&&(this.__cbOnceGamepadGyro=[]),this.__cbOnceGamepadGyro.push(t)},offGamepadGyro:function(e){if(null!=e){var n;null!=this.__cbOnGamepadGyro&&-1!=(n=this.__cbOnGamepadGyro.indexOf(e))&&(this.__cbOnGamepadGyro.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadGyro[n])&&s(),this.__cbOnOwnerUnbindGamepadGyro.splice(n,1)),null!=this.__cbOnceGamepadGyro&&-1!=(n=this.__cbOnceGamepadGyro.indexOf(e))&&(this.__cbOnceGamepadGyro.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadGyro[n])&&s(),this.__cbOnceOwnerUnbindGamepadGyro.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadGyro){for(var t=0,i=this.__cbOnOwnerUnbindGamepadGyro.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadGyro[l])&&s()}this.__cbOnOwnerUnbindGamepadGyro=null}if(null!=this.__cbOnceOwnerUnbindGamepadGyro){for(t=0,i=this.__cbOnceOwnerUnbindGamepadGyro.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadGyro[l])&&s()}this.__cbOnceOwnerUnbindGamepadGyro=null}this.__cbOnGamepadGyro=null,this.__cbOnceGamepadGyro=null}},listensGamepadGyro:function(){return null!=this.__cbOnGamepadGyro&&0<this.__cbOnGamepadGyro.length||null!=this.__cbOnceGamepadGyro&&0<this.__cbOnceGamepadGyro.length},__cbOnGamepadEnable:null,__cbOnceGamepadEnable:null,__cbOnOwnerUnbindGamepadEnable:null,__cbOnceOwnerUnbindGamepadEnable:null,emitGamepadEnable:function(e,n){this.willEmitGamepadEnable(e,n);var t=0;if(null!=this.__cbOnGamepadEnable&&(t+=this.__cbOnGamepadEnable.length),null!=this.__cbOnceGamepadEnable&&(t+=this.__cbOnceGamepadEnable.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGamepadEnable)for(var r=0,a=this.__cbOnGamepadEnable.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGamepadEnable[h],++s):--t}if(null!=this.__cbOnceGamepadEnable){for(var u=null,c=null,r=0,a=this.__cbOnceGamepadEnable.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGamepadEnable[h],this.__cbOnceGamepadEnable[h]=null,o=this.__cbOnceOwnerUnbindGamepadEnable[h],(this.__cbOnceOwnerUnbindGamepadEnable[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGamepadEnable[h]),c.push(this.__cbOnceGamepadEnable[h]))}this.__cbOnceOwnerUnbindGamepadEnable=u,this.__cbOnceGamepadEnable=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadEnable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(null);null==this.__cbOnGamepadEnable&&(this.__cbOnGamepadEnable=[]),this.__cbOnGamepadEnable.push(t)},onceGamepadEnable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadEnable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(null);null==this.__cbOnceGamepadEnable&&(this.__cbOnceGamepadEnable=[]),this.__cbOnceGamepadEnable.push(t)},offGamepadEnable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadEnable&&-1!=(n=this.__cbOnGamepadEnable.indexOf(e))&&(this.__cbOnGamepadEnable.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadEnable[n])&&s(),this.__cbOnOwnerUnbindGamepadEnable.splice(n,1)),null!=this.__cbOnceGamepadEnable&&-1!=(n=this.__cbOnceGamepadEnable.indexOf(e))&&(this.__cbOnceGamepadEnable.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadEnable[n])&&s(),this.__cbOnceOwnerUnbindGamepadEnable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadEnable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadEnable.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadEnable[l])&&s()}this.__cbOnOwnerUnbindGamepadEnable=null}if(null!=this.__cbOnceOwnerUnbindGamepadEnable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadEnable.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadEnable[l])&&s()}this.__cbOnceOwnerUnbindGamepadEnable=null}this.__cbOnGamepadEnable=null,this.__cbOnceGamepadEnable=null}},listensGamepadEnable:function(){return null!=this.__cbOnGamepadEnable&&0<this.__cbOnGamepadEnable.length||null!=this.__cbOnceGamepadEnable&&0<this.__cbOnceGamepadEnable.length},__cbOnGamepadDisable:null,__cbOnceGamepadDisable:null,__cbOnOwnerUnbindGamepadDisable:null,__cbOnceOwnerUnbindGamepadDisable:null,emitGamepadDisable:function(e){this.willEmitGamepadDisable(e);var n=0;if(null!=this.__cbOnGamepadDisable&&(n+=this.__cbOnGamepadDisable.length),null!=this.__cbOnceGamepadDisable&&(n+=this.__cbOnceGamepadDisable.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnGamepadDisable)for(var s=0,r=this.__cbOnGamepadDisable.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnGamepadDisable[a],++l):--n}if(null!=this.__cbOnceGamepadDisable){for(var h=null,u=null,s=0,r=this.__cbOnceGamepadDisable.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceGamepadDisable[a],this.__cbOnceGamepadDisable[a]=null,c=this.__cbOnceOwnerUnbindGamepadDisable[a],(this.__cbOnceOwnerUnbindGamepadDisable[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindGamepadDisable[a]),u.push(this.__cbOnceGamepadDisable[a]))}this.__cbOnceOwnerUnbindGamepadDisable=h,this.__cbOnceGamepadDisable=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDisable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(null);null==this.__cbOnGamepadDisable&&(this.__cbOnGamepadDisable=[]),this.__cbOnGamepadDisable.push(t)},onceGamepadDisable:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var l=function(e){null!=t&&(i.offGamepadDisable(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(null);null==this.__cbOnceGamepadDisable&&(this.__cbOnceGamepadDisable=[]),this.__cbOnceGamepadDisable.push(t)},offGamepadDisable:function(e){if(null!=e){var n;null!=this.__cbOnGamepadDisable&&-1!=(n=this.__cbOnGamepadDisable.indexOf(e))&&(this.__cbOnGamepadDisable.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGamepadDisable[n])&&s(),this.__cbOnOwnerUnbindGamepadDisable.splice(n,1)),null!=this.__cbOnceGamepadDisable&&-1!=(n=this.__cbOnceGamepadDisable.indexOf(e))&&(this.__cbOnceGamepadDisable.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGamepadDisable[n])&&s(),this.__cbOnceOwnerUnbindGamepadDisable.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDisable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDisable.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGamepadDisable[l])&&s()}this.__cbOnOwnerUnbindGamepadDisable=null}if(null!=this.__cbOnceOwnerUnbindGamepadDisable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDisable.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGamepadDisable[l])&&s()}this.__cbOnceOwnerUnbindGamepadDisable=null}this.__cbOnGamepadDisable=null,this.__cbOnceGamepadDisable=null}},listensGamepadDisable:function(){return null!=this.__cbOnGamepadDisable&&0<this.__cbOnGamepadDisable.length||null!=this.__cbOnceGamepadDisable&&0<this.__cbOnceGamepadDisable.length},pressedScanCodes:null,pressedKeyCodes:null,pressedGamepadButtons:null,gamepadAxisValues:null,gamepadGyroDeltas:null,gamepadGyroKeys:null,gamepadNames:null,activeGamepads:null,resetDeltas:function(){for(;0<this.gamepadGyroKeys.length;){var e=this.gamepadGyroKeys.pop(),e=this.gamepadGyroDeltas.get(e);null!=e&&(e[0]=0,e[1]=0,e[2]=0)}},willEmitKeyDown:function(n){var t=this,e=this.pressedScanCodes.intMap.h[0|n.scanCode],i=null!=e?e:0,e=null!=(e=this.pressedKeyCodes.intMap.h[0|n.keyCode])?e:0;-1==i&&(e=i=0),this.pressedScanCodes.set(n.scanCode,i+1),this.pressedKeyCodes.set(n.keyCode,e+1),0==i&&he.app.beginUpdateCallbacks.push(function(){var e=t.pressedScanCodes.intMap.h[0|n.scanCode];1==(null!=e?e:0)&&t.pressedScanCodes.set(n.scanCode,2),1==(null!=(e=t.pressedKeyCodes.intMap.h[0|n.keyCode])?e:0)&&t.pressedKeyCodes.set(n.keyCode,2)})},willEmitKeyUp:function(n){var t=this,e=this.pressedScanCodes.intMap.h[0|n.scanCode];0!=(null!=e?e:0)&&(this.pressedScanCodes.set(n.scanCode,-1),this.pressedKeyCodes.set(n.keyCode,-1),he.app.beginUpdateCallbacks.push(function(){var e=t.pressedScanCodes.intMap.h[0|n.scanCode];-1==(null!=e?e:0)&&t.pressedScanCodes.set(n.scanCode,0),-1==(null!=(e=t.pressedKeyCodes.intMap.h[0|n.keyCode])?e:0)&&t.pressedKeyCodes.set(n.keyCode,0)}))},_keyPressed:function(e){e=this.pressedKeyCodes.intMap.h[0|e];return 0<(null!=e?e:0)},_keyJustPressed:function(e){e=this.pressedKeyCodes.intMap.h[0|e];return 1==(null!=e?e:0)},_keyJustReleased:function(e){e=this.pressedKeyCodes.intMap.h[0|e];return-1==(null!=e?e:0)},_scanPressed:function(e){e=this.pressedScanCodes.intMap.h[0|e];return 0<(null!=e?e:0)},_scanJustPressed:function(e){e=this.pressedScanCodes.intMap.h[0|e];return 1==(null!=e?e:0)},_scanJustReleased:function(e){e=this.pressedScanCodes.intMap.h[0|e];return-1==(null!=e?e:0)},willEmitGamepadEnable:function(e,n){for(var t=32*e,i=0;i<32;){var l=t+i++;this.pressedGamepadButtons.set(l,0),this.gamepadAxisValues.set(l,0)}-1==this.activeGamepads.indexOf(e)&&this.activeGamepads.push(e),this.gamepadNames.set(e,n)},willEmitGamepadDisable:function(e){for(var n=32*e,t=0;t<32;){var i=t++,l=n+i,s=this.pressedGamepadButtons.intMap.h[0|l],s=(0<(null!=s?s:0)&&this.emitGamepadUp(e,i),this.gamepadAxisValues.intMap.h[0|l]),l=null!=s?s:0;0!=l&&this.emitGamepadAxis(e,i,l)}var r=this.activeGamepads.indexOf(e);-1!=r&&this.activeGamepads.splice(r,1),this.gamepadNames.remove(e)},willEmitGamepadDown:function(e,n){var t=this,i=32*e+n,e=this.pressedGamepadButtons.intMap.h[0|i],n=null!=e?e:0;this.pressedGamepadButtons.set(i,(n=-1==n?0:n)+1),0==n&&he.app.beginUpdateCallbacks.push(function(){var e=t.pressedGamepadButtons.intMap.h[0|i];1==(null!=e?e:0)&&t.pressedGamepadButtons.set(i,2)})},willEmitGamepadUp:function(e,n){var t=this,i=32*e+n;this.pressedGamepadButtons.set(i,-1),he.app.beginUpdateCallbacks.push(function(){var e=t.pressedGamepadButtons.intMap.h[0|i];-1==(null!=e?e:0)&&t.pressedGamepadButtons.set(i,0)})},willEmitGamepadGyro:function(e,n,t,i){var l=this.gamepadGyroDeltas.get(e);null==l&&this.gamepadGyroDeltas.set(e,l=[0,0,0]),-1==this.gamepadGyroKeys.indexOf(e)&&this.gamepadGyroKeys.push(e),l[0]+=n,l[1]+=t,l[2]+=i},_gamepadPressed:function(e,n){e=this.pressedGamepadButtons.intMap.h[0|32*e+n];return 0<(null!=e?e:0)},_gamepadJustPressed:function(e,n){e=this.pressedGamepadButtons.intMap.h[0|32*e+n];return 1==(null!=e?e:0)},_gamepadJustReleased:function(e,n){e=this.pressedGamepadButtons.intMap.h[0|32*e+n];return-1==(null!=e?e:0)},willEmitGamepadAxis:function(e,n,t){this.gamepadAxisValues.set(32*e+n,t)},gamepadAxisValue:function(e,n){e=this.gamepadAxisValues.intMap.h[0|32*e+n];return null!=e?e:0},gamepadGyroDeltaX:function(e){e=this.gamepadGyroDeltas.get(e);return null!=e?e[0]:0},gamepadGyroDeltaY:function(e){e=this.gamepadGyroDeltas.get(e);return null!=e?e[1]:0},gamepadGyroDeltaZ:function(e){e=this.gamepadGyroDeltas.get(e);return null!=e?e[2]:0},startGamepadRumble:function(e,n,t,i){he.app.backend.input.startGamepadRumble(e,t,i,n)},stopGamepadRumble:function(e){he.app.backend.input.stopGamepadRumble(e)},gamepadName:function(e){return this.gamepadNames.get(e)},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offKeyDown(),this.offKeyUp(),this.offGamepadAxis(),this.offGamepadDown(),this.offGamepadUp(),this.offGamepadGyro(),this.offGamepadEnable(),this.offGamepadDisable()},__class__:kn}),{}),Rn=(In.__properties__={get_iterableKeys:"get_iterableKeys",get_size:"get_size"},In.get_size=function(e){return e.size},In.get_iterableKeys=function(e){return e.iterableKeys},In._asIntBoolMap=function(e){return e},In._new=function(e,n,t){return new rn(e=null==e?16:e,n=null==n?.5:n,t=null==t?!1:t)},In.exists=function(e,n){return e.intMap.h.hasOwnProperty(0|n)},In.existsInline=function(e,n){return e.intMap.h.hasOwnProperty(0|n)},In.get=function(e,n){e=e.intMap.h[0|n];return 0!=(null!=e?e:0)},In.getInline=function(e,n){e=e.intMap.h[0|n];return 0!=(null!=e?e:0)},In.set=function(e,n,t){e.set(n,t?1:0)},In.remove=function(e,n){return 0!=e.remove(n)},In.clear=function(e){e.clear()},In.copy=function(e){var n=new rn;return n.intMap=e.intMap.copy(),n.size=e.size,n.iterableKeys=null!=e.iterableKeys?e.iterableKeys.slice():null,n.iterableKeysUsed=null!=e.iterableKeysUsed?In.copy(e.iterableKeysUsed):null,n},In.iterator=function(e){return new Rn(e)},In.keys=function(e){return new Fn(e)},In.keyValueIterator=function(e){return new Pn(e)},function(e){this.intBoolMap=e,this.i=0;e=this.intBoolMap.iterableKeys;this.len=null!=e?e.length:-1}),Fn=((L["ceramic.IntBoolMapIterator"]=Rn).__name__="ceramic.IntBoolMapIterator",Rn.prototype={intBoolMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intBoolMap.iterableKeys[e],e=this.intBoolMap.intMap.h[0|e];return 0!=(null!=e?e:0)},__class__:Rn},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),Pn=((L["ceramic.IntBoolMapKeyIterator"]=Fn).__name__="ceramic.IntBoolMapKeyIterator",Fn.prototype={iterableKeys:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:Fn},function(e){this.intBoolMap=e,this.i=0;e=this.intBoolMap.iterableKeys;this.len=null!=e?e.length:-1}),Bn=((L["ceramic.IntBoolMapKeyValueIterator"]=Pn).__name__="ceramic.IntBoolMapKeyValueIterator",Pn.prototype={intBoolMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intBoolMap.iterableKeys[e],n=this.intBoolMap.intMap.h[0|e];return{key:e,value:0!=(null!=n?n:0)}},__class__:Pn},function(e,n,t){null==t&&(t=!1),null==n&&(n=.5),null==e&&(e=16),this.size=0,this.iterableKeysUsed=null,this.iterableKeys=null,this.intMap=new Hl,t&&(this.iterableKeys=[],this.iterableKeysUsed=new rn(16,.5,!1))}),Ln=((L["ceramic.IntFloatMap"]=Bn).__name__="ceramic.IntFloatMap",Bn.prototype={intMap:null,iterableKeys:null,iterableKeysUsed:null,size:null,clear:function(){this.intMap.h={},this.size=0,null!=this.iterableKeys&&(this.iterableKeys=[],this.iterableKeysUsed=new rn(16,.5,!1))},exists:function(e){return this.intMap.h.hasOwnProperty(0|e)},set:function(e,n){null!=this.iterableKeys&&0==(null!=(t=this.iterableKeysUsed.intMap.h[0|e])?t:0)&&(this.iterableKeysUsed.set(e,1),this.iterableKeys.push(e));var t=0|e;return this.intMap.h.hasOwnProperty(t)||this.size++,this.intMap.h[t]=n},get:function(e){e=this.intMap.h[0|e];return null!=e?e:0},remove:function(e){var n,t=0|e,i=0;return null!=this.iterableKeys&&0!=(null!=(n=this.iterableKeysUsed.intMap.h[0|e])?n:0)&&(this.iterableKeysUsed.set(e,0),this.iterableKeys.splice(this.iterableKeys.indexOf(e),1)),this.intMap.h.hasOwnProperty(t)&&(i=this.intMap.h[t],this.size--),this.intMap.remove(t),i},getInline:function(e){e=this.intMap.h[0|e];return null!=e?e:0},existsInline:function(e){return this.intMap.h.hasOwnProperty(0|e)},copy:function(){var e=new Bn;return e.intMap=this.intMap.copy(),e.size=this.size,e.iterableKeys=null!=this.iterableKeys?this.iterableKeys.slice():null,e.iterableKeysUsed=null!=this.iterableKeysUsed?In.copy(this.iterableKeysUsed):null,e},iterator:function(){return new Ln(this)},keys:function(){return new Nn(this)},keyValueIterator:function(){return new Wn(this)},__class__:Bn},function(e){this.intFloatMap=e,this.i=0;e=this.intFloatMap.iterableKeys;this.len=null!=e?e.length:-1}),Nn=((L["ceramic.IntFloatMapIterator"]=Ln).__name__="ceramic.IntFloatMapIterator",Ln.prototype={intFloatMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intFloatMap.iterableKeys[e],e=this.intFloatMap.intMap.h[0|e];return null!=e?e:0},__class__:Ln},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),Wn=((L["ceramic.IntFloatMapKeyIterator"]=Nn).__name__="ceramic.IntFloatMapKeyIterator",Nn.prototype={iterableKeys:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:Nn},function(e){this.intFloatMap=e,this.i=0;e=this.intFloatMap.iterableKeys;this.len=null!=e?e.length:-1}),Gn=((L["ceramic.IntFloatMapKeyValueIterator"]=Wn).__name__="ceramic.IntFloatMapKeyValueIterator",Wn.prototype={intFloatMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intFloatMap.iterableKeys[e],n=this.intFloatMap.intMap.h[0|e];return{key:e,value:null!=n?n:0}},__class__:Wn},function(e){this.intIntMap=e,this.i=0;e=this.intIntMap.iterableKeys;this.len=null!=e?e.length:-1}),Hn=((L["ceramic.IntIntMapIterator"]=Gn).__name__="ceramic.IntIntMapIterator",Gn.prototype={intIntMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intIntMap.iterableKeys[e],e=this.intIntMap.intMap.h[0|e];return null!=e?e:0},__class__:Gn},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),zn=((L["ceramic.IntIntMapKeyIterator"]=Hn).__name__="ceramic.IntIntMapKeyIterator",Hn.prototype={iterableKeys:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:Hn},function(e){this.intIntMap=e,this.i=0;e=this.intIntMap.iterableKeys;this.len=null!=e?e.length:-1}),Kn=((L["ceramic.IntIntMapKeyValueIterator"]=zn).__name__="ceramic.IntIntMapKeyValueIterator",zn.prototype={intIntMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intIntMap.iterableKeys[e],n=this.intIntMap.intMap.h[0|e];return{key:e,value:null!=n?n:0}},__class__:zn},function(e,n,t){null==t&&(t=!1),null==n&&(n=.5),null==e&&(e=16),this.iterableKeys=null,this.nextFreeIndex=0,this.initialSize=e,this.initialFillFactor=n,this._keys=new rn(e,n),this.values=new Array(e),t&&(this.iterableKeys=[])}),Xn=((L["ceramic.IntMap"]=Kn).__name__="ceramic.IntMap",Kn.prototype={_keys:null,nextFreeIndex:null,initialSize:null,initialFillFactor:null,iterableKeys:null,values:null,get:function(e){e=this._keys.intMap.h[0|e],e=null!=e?e:0;return 2<=e?this.values[e-2]:Kn.RET_NULL},getInline:function(e){e=this._keys.intMap.h[0|e],e=null!=e?e:0;return 2<=e?this.values[e-2]:Kn.RET_NULL},exists:function(e){return this._keys.intMap.h.hasOwnProperty(0|e)},existsInline:function(e){return this._keys.intMap.h.hasOwnProperty(0|e)},set:function(e,n){var t=this._keys.intMap.h[0|e],t=null!=t?t:0;if(2<=t)t-=2,null!=n?this.values[t]=n:(this.values[t]=null,this.nextFreeIndex>t&&(this.nextFreeIndex=t),this._keys.set(e,1));else if(null==n)1!=t&&(this._keys.set(e,1),null!=this.iterableKeys)&&this.iterableKeys.push(e);else{var i=this.values.length;for(this.nextFreeIndex>=i&&this.resizeValues(2*this.values.length),this.values[this.nextFreeIndex]=n,this._keys.set(e,this.nextFreeIndex+2),1!=t&&null!=this.iterableKeys&&this.iterableKeys.push(e);this.nextFreeIndex++,this.nextFreeIndex<i&&null!=this.values[this.nextFreeIndex];);}},remove:function(e){var n=this._keys.intMap.h[0|e],n=null!=n?n:0;0!=n&&(1!=n&&(this.values[n-=2]=null,this.nextFreeIndex>n)&&(this.nextFreeIndex=n),this._keys.remove(e),null!=this.iterableKeys)&&this.iterableKeys.splice(this.iterableKeys.indexOf(e),1)},copy:function(){var e=new Kn,n=(e.initialSize=this.initialSize,e.initialFillFactor=this.initialFillFactor,this._keys),t=new rn,n=(t.intMap=n.intMap.copy(),t.size=n.size,t.iterableKeys=null!=n.iterableKeys?n.iterableKeys.slice():null,t.iterableKeysUsed=null!=n.iterableKeysUsed?In.copy(n.iterableKeysUsed):null,e._keys=t,e.nextFreeIndex=this.nextFreeIndex,e.iterableKeys=null!=this.iterableKeys?this.iterableKeys.slice():null,this.values),t=new Array(n.length);return jl.blit(n,0,t,0,n.length),e.values=t,e},clear:function(){if(this._keys=new rn(this.initialSize,this.initialFillFactor),this.values=new Array(this.initialSize),this.nextFreeIndex=0,null!=this.iterableKeys){var e=this.iterableKeys;if(0!=e.length)if(0<e.length)e.splice(0,e.length);else for(var n=e;n.length<0;)n.push(null)}},iterator:function(){return new Xn(this)},keys:function(){return new Yn(this)},keyValueIterator:function(){return new Vn(this)},resizeValues:function(e){for(var n=this.values,t=(this.values=new Array(e),0),i=n.length;t<i;){var l=t++;this.values[l]=n[l]}},__class__:Kn},function(e){this.intMap=e,this.i=0;e=this.intMap.iterableKeys;this.len=null!=e?e.length:-1}),Yn=((L["ceramic.IntMapIterator"]=Xn).__name__="ceramic.IntMapIterator",Xn.prototype={intMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intMap.iterableKeys[e];return this.intMap.get(e)},__class__:Xn},function(e){this.i=0,this.iterableKeys=e.iterableKeys,this.len=null!=this.iterableKeys?this.iterableKeys.length:-1}),Vn=((L["ceramic.IntMapKeyIterator"]=Yn).__name__="ceramic.IntMapKeyIterator",Yn.prototype={iterableKeys:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++;return this.iterableKeys[e]},__class__:Yn},function(e){this.intMap=e,this.i=0;e=this.intMap.iterableKeys;this.len=null!=e?e.length:-1}),qn=((L["ceramic.IntMapKeyValueIterator"]=Vn).__name__="ceramic.IntMapKeyValueIterator",Vn.prototype={intMap:null,i:null,len:null,hasNext:function(){return this.i<this.len},next:function(){var e=this.i++,e=this.intMap.iterableKeys[e];return{key:e,value:this.intMap.get(e)}},__class__:Vn},(L["ceramic.Json"]=Ib).__name__="ceramic.Json",Ib.stringify=function(e,n,t){return JSON.stringify(e,n,t)},Ib.parse=function(e){return JSON.parse(e)},function(e,n){this.keyCode=e,this.scanCode=n}),a=((L["ceramic.Key"]=qn).__name__="ceramic.Key",qn.prototype={keyCode:null,keyCodeName:null,get_keyCodeName:function(){return a.$name(this.keyCode)},scanCode:null,scanCodeName:null,get_scanCodeName:function(){return c.$name(this.scanCode)},toString:function(){return"Key("+this.keyCode+" "+a.$name(this.keyCode)+" / "+this.scanCode+" "+c.$name(this.scanCode)+")"},__class__:qn,__properties__:{get_scanCodeName:"get_scanCodeName",get_keyCodeName:"get_keyCodeName"}},{}),jn=(a.$name=function(e){if(0!=(e&c.MASK))return c.$name(e&~c.MASK);switch(e){case 8:return c.$name(42);case 9:return c.$name(43);case 13:return c.$name(40);case 27:return c.$name(41);case 32:return c.$name(44);case 97:return c.$name(4);case 98:return c.$name(5);case 99:return c.$name(6);case 100:return c.$name(7);case 101:return c.$name(8);case 102:return c.$name(9);case 103:return c.$name(10);case 104:return c.$name(11);case 105:return c.$name(12);case 106:return c.$name(13);case 107:return c.$name(14);case 108:return c.$name(15);case 109:return c.$name(16);case 110:return c.$name(17);case 111:return c.$name(18);case 112:return c.$name(19);case 113:return c.$name(20);case 114:return c.$name(21);case 115:return c.$name(22);case 116:return c.$name(23);case 117:return c.$name(24);case 118:return c.$name(25);case 119:return c.$name(26);case 120:return c.$name(27);case 121:return c.$name(28);case 122:return c.$name(29);case 127:return c.$name(76);default:return String.fromCodePoint(e)}},a.toString=function(e){return"KeyCode("+e+" "+a.$name(e)+")"},(L["ceramic.LdtkData"]=Lb).__name__="ceramic.LdtkData",Lb.__super__=l,Lb.prototype=$extend(l.prototype,{version:null,iid:null,bgColor:null,defs:null,externalLevels:null,toc:null,worlds:null,asset:null,loadExternalLevelData:null,loadLevelCeramicTilemap:null,destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-2,null!=this.defs&&null!=this.defs.tilesets)for(var e=this.defs.tilesets,n=0,t=e.length;n<t;){var i,s=e[r=n++];null!=s.ceramicTileset&&(i=s.ceramicTileset,s.ceramicTileset=null,i.destroy())}if(null!=this.worlds)for(n=0,t=this.worlds.length;n<t;){var r=n++,a=this.worlds[r];if(null!=a.levels)for(var h=a.levels,u=0,c=h.length;u<c;){var o,_=h[u++];null!=_.ceramicTilemap&&(o=_.ceramicTilemap,_.ceramicTilemap=null,o.destroy())}}null!=this.asset&&this.asset.destroy(),this._lifecycleState=-1,l.prototype.destroy.call(this)}},world:function(e){if(null!=this.worlds)for(var n=0,t=this.worlds.length;n<t;){var i=n++,i=this.worlds[i];if(i.identifier==e)return i}return null},worldByIid:function(e){if(null!=this.worlds)for(var n=0,t=this.worlds.length;n<t;){var i=n++,i=this.worlds[i];if(Dl.trace("world="+V.string(i),{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/LdtkData.hx",lineNumber:190,className:"ceramic.LdtkData",methodName:"worldByIid"}),i.iid==e)return i}return null},tocEntry:function(e){if(null!=this.toc)for(var n=0,t=this.toc.length;n<t;){var i=n++,i=this.toc[i];if(i.identifier==e)return i}return null},_findLayerDefWithIdentifier:function(e){for(var n=this.defs.layers,t=0,i=n.length;t<i;){var l=n[t++];if(l.identifier==e)return l}return null},_findLayerDefWithUid:function(e){for(var n=this.defs.layers,t=0,i=n.length;t<i;){var l=n[t++];if(l.uid==e)return l}return null},_findTilesetDefWithIdentifier:function(e){for(var n=this.defs.tilesets,t=0,i=n.length;t<i;){var l=n[t++];if(l.identifier==e)return l}return null},_findTilesetDefWithUid:function(e){for(var n=this.defs.tilesets,t=0,i=n.length;t<i;){var l=n[t++];if(l.uid==e)return l}return null},_findEntityDefWithIdentifier:function(e){for(var n=this.defs.entities,t=0,i=n.length;t<i;){var l=n[t++];if(l.identifier==e)return l}return null},_findEntityDefWithUid:function(e){for(var n=this.defs.entities,t=0,i=n.length;t<i;){var l=n[t++];if(l.uid==e)return l}return null},_resolveEntityInstance:function(e,n,t){var i=null;if(null!=Lb._entityInstances){if(null!=e.iid){for(var i=e.iid,l=0,s=Lb._entityInstances.length;l<s;){var r=l++;if(Lb._entityInstances[r].iid==i)return Lb._entityInstances[r]}var a=new Ut(this,n,e,$bind(this,this._registerEntity));return null!=t&&(a.layerInstance=t),a}if(null!=Lb._rootJson&&null!=e.entityIid){i=e.entityIid;for(l=0,s=Lb._entityInstances.length;l<s;){r=l++;if(Lb._entityInstances[r].iid==i)return null!=t&&(Lb._entityInstances[r].layerInstance=t),Lb._entityInstances[r]}var h=Lb._rootJson.levels;if(null!=n&&(null==h||0==h.length)){var u=Lb._rootJson.worlds;if(null!=u)for(l=0,s=u.length;l<s;){var c=u[r=l++];if(c.iid==n.iid){h=c.levels;break}}}for(l=0,s=h.length;l<s;)for(var o=h[r=l++].layerInstances,_=0,d=o.length;_<d;)for(var b=o[_++].entityInstances,g=0,O=b.length;g<O;){var f=b[g++];if(f.iid==i)return a=new Ut(this,n,f,$bind(this,this._registerEntity)),null!=t&&(a.layerInstance=t),a}}}return null},_cleanUnusedEntityInstances:function(){if(null!=Lb._entityInstances&&0<Lb._entityInstances.length){var e=null;if(null!=this.worlds)for(var n=0,t=this.worlds.length;n<t;){var i=n++,i=this.worlds[i];if(null!=i.levels)for(var l=i.levels,s=0,r=l.length;s<r;){var a=l[s++];null!=a.fieldInstances&&(e=this._markEntityInstancesUsedInFieldInstances(e,a.fieldInstances)),null!=a.layerInstances&&(e=this._markEntityInstancesUsedInLayerInstances(e,a.layerInstances))}}var h=null;if(null!=e){for(n=0,t=Lb._entityInstances.length;n<t;){var u=n++,c=Lb._entityInstances[u];-1==e.indexOf(c)&&(h=null==h?[]:h).push(u)}if(null!=h)for(var o=h.length-1;0<=o;)Lb._entityInstances.splice(h[o],1),--o}}},_markEntityInstancesUsedInFieldInstances:function(e,n){if(null!=n)for(var t=0,i=n.length;t<i;){var l=n[t++];if("EntityRef"==l.def.type)e=this._markEntityInstanceUsed(e,l.value);else if("Array<EntityRef>"==l.def.type)for(var s=l.value,r=0,a=s.length;r<a;){var h=r++;e=this._markEntityInstanceUsed(e,s[h])}}return e},_markEntityInstancesUsedInLayerInstances:function(e,n){if(null!=n)for(var t=0,i=n.length;t<i;){var l=n[t++];if(null!=l.entityInstances)for(var s=l.entityInstances,r=0,a=s.length;r<a;){var h=r++;e=this._markEntityInstanceUsed(e,s[h])}}return e},_markEntityInstanceUsed:function(e,n){return e=null!=n&&-1==(e=null==e?[]:e).indexOf(n)&&(e.push(n),null!=n.fieldInstances)?this._markEntityInstancesUsedInFieldInstances(e,n.fieldInstances):e},_registerEntity:function(e,n){Lb._entityInstances.push(e)},toString:function(){var e,n,t;return y.beginObjectToString(this)?(t=""+this.version,e=""+this.iid,n=null==this.bgColor?"null":-1==(n=this.bgColor)?"NONE":"0x"+B.hex(n>>16&255,2)+B.hex(n>>8&255,2)+B.hex(255&n,2),t="LdtkData"+y.objectToString({version:t,iid:e,bgColor:""+n,defs:""+V.string(this.defs),externalLevels:""+V.string(this.externalLevels),worlds:""+V.string(this.worlds)}),y.endObjectToString(),t):y.HIDDEN_VALUE},__class__:Lb}),function(e,n){if(this.ldtkData=e,null!=n){this.identifier=n.identifier;var t,i=n.instancesData;if(null!=i){for(var l=[],s=0,r=i.length;s<r;){var a=s++;l.push(new Qn(this,i[a]))}t=l}else t=[];this.instancesData=t}}),Qn=((L["ceramic.LdtkTocEntry"]=jn).__name__="ceramic.LdtkTocEntry",jn.prototype={ldtkData:null,identifier:null,instancesData:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkTocEntry"+y.objectToString({identifier:""+this.identifier,instancesData:""+V.string(this.instancesData)}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:jn},function(e,n){this.tocEntry=e,null!=n&&(this.fields=n.fields,this.widPx=0|n.widPx,this.heiPx=0|n.heiPx,this.worldX=0|n.worldX,this.worldY=0|n.worldY,Object.prototype.hasOwnProperty.call(n,"iids"))&&(e=n.iids,this.worldIid=e.worldIid,this.levelIid=e.levelIid,this.layerIid=e.layerIid,this.entityIid=e.entityIid)}),$n=((L["ceramic.LdtkTocInstanceData"]=Qn).__name__="ceramic.LdtkTocInstanceData",Qn.prototype={tocEntry:null,fields:null,widPx:null,heiPx:null,worldX:null,worldY:null,worldIid:null,levelIid:null,layerIid:null,entityIid:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkTocInstanceData"+y.objectToString({fields:""+V.string(this.fields),widPx:""+this.widPx,heiPx:""+this.heiPx,worldX:""+this.worldX,worldY:""+this.worldY,worldIid:""+this.worldIid,levelIid:""+this.levelIid,layerIid:""+this.layerIid,entityIid:""+this.entityIid}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:Qn},function(e,n){if(this.ldtkData=e,null!=n){this.identifier=n.identifier,this.iid=n.iid;var t,i=n.levels;if(null!=i){for(var l=[],s=0,r=i.length;s<r;){var a=s++;l.push(new pt(e,this,i[a]))}t=l}else t=[];this.levels=t,this.worldGridWidth=null!=n.worldGridWidth?n.worldGridWidth:-1,this.worldGridHeight=null!=n.worldGridHeight?n.worldGridHeight:-1,this.worldLayout=null!=n.worldLayout?Zn.fromString(n.worldLayout):0}}),Zn=((L["ceramic.LdtkWorld"]=$n).__name__="ceramic.LdtkWorld",$n.prototype={ldtkData:null,identifier:null,iid:null,levels:null,worldGridWidth:null,worldGridHeight:null,worldLayout:null,level:function(e){if(null!=this.levels)for(var n=0,t=this.levels.length;n<t;){var i=n++,i=this.levels[i];if(i.identifier==e)return i}return null},levelByIid:function(e){if(null!=this.levels)for(var n=0,t=this.levels.length;n<t;){var i=n++,i=this.levels[i];if(i.iid==e)return i}return null},toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkWorld"+y.objectToString({identifier:""+this.identifier,iid:""+this.iid,levels:""+V.string(this.levels),worldGridWidth:""+this.worldGridWidth,worldGridHeight:""+this.worldGridHeight,worldLayout:""+(null==this.worldLayout?"null":Zn.toString(this.worldLayout))}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:$n},{}),Jn=(Zn.fromString=function(e){switch(e){case"Free":return 1;case"GridVania":return 2;case"LinearHorizontal":return 3;case"LinearVertical":return 4;default:return 0}},Zn.toString=function(e){var n;switch(e){case 0:n="None";break;case 1:n="Free";break;case 2:n="GridVania";break;case 3:n="LinearHorizontal";break;case 4:n="LinearVertical";break;default:n="_"}return"LdtkWorldLayout."+n},function(e,n){if(null!=e&&((this.ldtkData=e).defs=this),null!=n){var t=n.tilesets;if(null!=t){for(var i=[],l=0,s=t.length;l<s;){var r=l++;i.push(new ut(this,t[r]))}o=i}else o=[];this.tilesets=o;var a=n.entities;if(null!=a){for(i=[],l=0,s=a.length;l<s;){r=l++;i.push(new et(this,a[r]))}o=i}else o=[];this.entities=o;var h=n.enums;if(null!=h){for(i=[],l=0,s=h.length;l<s;){r=l++;i.push(new lt(this,h[r]))}o=i}else o=[];this.enums=o;var u=n.externalEnums;if(null!=u){for(i=[],l=0,s=u.length;l<s;){r=l++;i.push(new lt(this,u[r]))}o=i}else o=[];this.externalEnums=o;var c=n.layers;if(null!=c){for(i=[],l=0,s=c.length;l<s;){r=l++;i.push(new at(this,c[r]))}o=i}else o=[];this.layers=o;var o,_=n.levelFields;if(null!=_){for(i=[],l=0,s=_.length;l<s;){r=l++;i.push(new ht(this,_[r]))}o=i}else o=[];this.levelFields=o}}),et=((L["ceramic.LdtkDefinitions"]=Jn).__name__="ceramic.LdtkDefinitions",Jn.prototype={ldtkData:null,entities:null,enums:null,externalEnums:null,layers:null,levelFields:null,tilesets:null,entity:function(e){if(null!=this.entities)for(var n=0,t=this.entities.length;n<t;){var i=n++,i=this.entities[i];if(i.identifier==e)return i}return null},layer:function(e){if(null!=this.layers)for(var n=0,t=this.layers.length;n<t;){var i=n++,i=this.layers[i];if(i.identifier==e)return i}return null},tileset:function(e){if(null!=this.tilesets)for(var n=0,t=this.tilesets.length;n<t;){var i=n++,i=this.tilesets[i];if(i.identifier==e)return i}return null},levelField:function(e){if(null!=this.levelFields)for(var n=0,t=this.levelFields.length;n<t;){var i=n++,i=this.levelFields[i];if(i.identifier==e)return i}return null},enumDef:function(e){if(null!=this.enums)for(var n=0,t=this.enums.length;n<t;){var i=n++,i=this.enums[i];if(i.identifier==e)return i}return null},externalEnumDef:function(e){if(null!=this.externalEnums)for(var n=0,t=this.externalEnums.length;n<t;){var i=n++,i=this.externalEnums[i];if(i.identifier==e)return i}return null},toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkDefinitions"+y.objectToString({entities:""+V.string(this.entities),enums:""+V.string(this.enums),externalEnums:""+V.string(this.externalEnums),layers:""+V.string(this.layers),levelFields:""+V.string(this.levelFields),tilesets:""+V.string(this.tilesets)}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:Jn},function(e,n){if(this.tileset=null,this.defs=e,null!=n){this.color=E.fromString(n.color),this.width=0|n.width,this.height=0|n.height,this.identifier=n.identifier,this.nineSliceBorders=y.toIntArray(n.nineSliceBorders),this.pivotX=n.pivotX,this.pivotY=n.pivotY,this.renderMode=tt.fromString(n.renderMode),this.tileRect=new nt(null!=e?e.ldtkData:null,n.tileRect),this.tileRenderMode=it.fromString(n.tileRenderMode),null!=e&&null!=e.ldtkData&&(this.tileset=e.ldtkData._findTilesetDefWithUid(0|n.tilesetId)),this.uid=0|n.uid,this.tags=y.toStringArray(n.tags);var t,i=n.fieldDefs;if(null!=i){for(var l=[],s=0,r=i.length;s<r;){var a=s++;l.push(new ht(e,i[a]))}t=l}else t=[];this.fieldDefs=t}}),nt=((L["ceramic.LdtkEntityDefinition"]=et).__name__="ceramic.LdtkEntityDefinition",et.prototype={defs:null,color:null,width:null,height:null,identifier:null,nineSliceBorders:null,pivotX:null,pivotY:null,renderMode:null,tileRect:null,tileRenderMode:null,tileset:null,uid:null,tags:null,fieldDefs:null,isRenderable:function(e){var n=!1;return n=this.renderMode==e&&null!=this.tileset&&null!=(e=this.tileset.ceramicTileset)&&null!=(null!=e.get_image()?e.unobservedImage.texture:null)?!0:n},toString:function(){var e;return y.beginObjectToString(this)?(e=null==this.color?"null":-1==(e=this.color)?"NONE":"0x"+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2),e="LdtkEntityDefinition"+y.objectToString({color:""+e,width:""+this.width,height:""+this.height,identifier:""+this.identifier,nineSliceBorders:""+V.string(this.nineSliceBorders),pivotX:""+this.pivotX,pivotY:""+this.pivotY,tileRect:""+V.string(this.tileRect),tileRenderMode:""+(null==this.tileRenderMode?"null":it.toString(this.tileRenderMode)),tileset:""+V.string(this.tileset),uid:""+this.uid}),y.endObjectToString(),e):y.HIDDEN_VALUE},fieldDef:function(e){if(null!=this.fieldDefs)for(var n=0,t=this.fieldDefs.length;n<t;){var i=n++,i=this.fieldDefs[i];if(i.identifier==e)return i}return null},__class__:et},function(e,n){(this.tileset=null)!=n&&(null!=e&&(this.tileset=e._findTilesetDefWithUid(0|n.tilesetUid)),this.x=n.x,this.y=n.y,this.w=n.w,this.h=n.h)}),tt=((L["ceramic.LdtkTilesetRectangle"]=nt).__name__="ceramic.LdtkTilesetRectangle",nt.prototype={tileset:null,x:null,y:null,w:null,h:null,ceramicTile:null,get_ceramicTile:function(){var e;return null==this.ceramicTile&&null!=this.tileset&&null!=this.tileset.ceramicTileset&&(e=this.tileset.ceramicTileset,this.ceramicTile=new ai(null!=e.get_image()?e.unobservedImage.texture:null,this.x,this.y,this.w,this.h,!1,0)),this.ceramicTile},toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkTilesetRectangle"+y.objectToString({tileset:""+V.string(this.tileset),x:""+this.x,y:""+this.y,w:""+this.w,h:""+this.h}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:nt,__properties__:{get_ceramicTile:"get_ceramicTile"}},{}),it=(tt.fromString=function(e){switch(e){case"Cross":return 4;case"Ellipse":return 2;case"Rectangle":return 1;case"Tile":return 3;default:return 0}},tt.toString=function(e){var n;switch(e){case 1:n="Rectangle";break;case 2:n="Ellipse";break;case 3:n="Tile";break;case 4:n="Cross";break;default:n="_"}return"LdtkTileRenderMode."+n},{}),lt=(it.fromString=function(e){switch(e){case"Cover":return 1;case"FitInside":return 2;case"FullSizeCropped":return 5;case"FullSizeUncropped":return 6;case"NineSlice":return 7;case"Repeat":return 3;case"Stretch":return 4;default:return 0}},it.toString=function(e){var n;switch(e){case 1:n="Cover";break;case 2:n="FitInside";break;case 3:n="Repeat";break;case 4:n="Stretch";break;case 5:n="FullSizeCropped";break;case 6:n="FullSizeUncropped";break;case 7:n="NineSlice";break;default:n="_"}return"LdtkTileRenderMode."+n},function(e,n){if(this.defs=e,null!=n){this.externalRelPath=n.externalRelPath,this.iconTilesetUid=null!=n.iconTilesetUid?0|n.iconTilesetUid:-1,this.identifier=n.identifier,this.tags=y.toStringArray(n.tags),this.uid=0|n.uid;var t,i=n.values;if(null!=i){for(var l=[],s=0,r=i.length;s<r;){var a=s++;l.push(new st(e,i[a]))}t=l}else t=[];this.values=t}}),st=((L["ceramic.LdtkEnumDefinition"]=lt).__name__="ceramic.LdtkEnumDefinition",lt.prototype={defs:null,externalRelPath:null,iconTilesetUid:null,identifier:null,tags:null,uid:null,values:null,value:function(e){if(null!=this.values)for(var n=0,t=this.values.length;n<t;){var i=n++,i=this.values[i];if(i.id==e)return i}return null},toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkEnumDefinition"+y.objectToString({externalRelPath:""+this.externalRelPath,iconTilesetUid:""+this.iconTilesetUid,identifier:""+this.identifier,tags:""+V.string(this.tags),uid:""+this.uid,values:""+V.string(this.values)}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:lt},function(e,n){this.defs=e,null!=n&&(this.tileSrcRect=null!=n.__tileSrcRect?y.toIntArray(n.__tileSrcRect):null,this.color=0|n.color,this.id=n.id,this.tileId=null!=n.tileId?n.tileId:-1)}),rt=((L["ceramic.LdtkEnumValueDefinition"]=st).__name__="ceramic.LdtkEnumValueDefinition",st.prototype={defs:null,tileSrcRect:null,color:null,id:null,tileId:null,toString:function(){var e,n;return y.beginObjectToString(this)?(n=""+V.string(this.tileSrcRect),e=null==this.color?"null":-1==(e=this.color)?"NONE":"0x"+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2),n="LdtkEnumValueDefinition"+y.objectToString({tileSrcRect:n,color:""+e,id:""+this.id,tileId:""+this.tileId}),y.endObjectToString(),n):y.HIDDEN_VALUE},__class__:st},{}),at=(rt.fromString=function(e){switch(e){case"AutoLayer":return 4;case"Entities":return 2;case"IntGrid":return 1;case"Tiles":return 3;default:return 0}},rt.toString=function(e){var n;switch(e){case 1:n="IntGrid";break;case 2:n="Entities";break;case 3:n="Tiles";break;case 4:n="AutoLayer";break;default:n="_"}return"LdtkLayerType."+n},function(e,n){if(this.parallaxScaling=!0,this.parallaxFactorY=0,this.parallaxFactorX=0,this.defs=e,null!=n){this.type=rt.fromString(n.__type),this.autoSourceLayerDefUid=null!=n.autoSourceLayerDefUid?0|n.autoSourceLayerDefUid:-1,this.displayOpacity=n.displayOpacity,this.gridSize=0|n.gridSize,this.identifier=n.identifier;var t=n.intGridValues;if(null!=t){for(var i=[],l=0,s=t.length;l<s;){var r=l++;i.push(new ft(t[r]))}a=i}else a=[];this.intGridValues=a,this.parallaxFactorX=n.parallaxFactorX,this.parallaxFactorY=n.parallaxFactorY,this.parallaxScaling=n.parallaxScaling,this.pxOffsetX=0|n.pxOffsetX,this.pxOffsetY=0|n.pxOffsetY,this.tilesetDefUid=null!=n.tilesetDefUid?0|n.tilesetDefUid:-1,this.uid=0|n.uid;var a,h=n.autoRuleGroups;if(null!=h){for(i=[],l=0,s=h.length;l<s;){r=l++;i.push(new dt(h[r]))}a=i}else a=[];this.autoRuleGroups=a,this.tilePivotX=n.tilePivotX,this.tilePivotY=n.tilePivotY}}),ht=((L["ceramic.LdtkLayerDefinition"]=at).__name__="ceramic.LdtkLayerDefinition",at.prototype={defs:null,type:null,autoSourceLayerDefUid:null,displayOpacity:null,gridSize:null,identifier:null,intGridValues:null,parallaxFactorX:null,parallaxFactorY:null,parallaxScaling:null,pxOffsetX:null,pxOffsetY:null,tilesetDefUid:null,uid:null,autoRuleGroups:null,tilePivotX:null,tilePivotY:null,autoRuleGroup:function(e){if(null!=this.autoRuleGroups)for(var n=0,t=this.autoRuleGroups.length;n<t;){var i=n++,i=this.autoRuleGroups[i];if(i.name==e)return i}return null},findRule:function(e){var n=this.autoRuleGroups;if(null!=n)for(var t=0,i=n.length;t<i;){var l=n[t++];if(null!=l&&null!=l.rules)for(var s=l.rules,r=0,a=s.length;r<a;){var h=s[r++];if(h.uid==e)return h}}return null},toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkLayerDefinition"+y.objectToString({type:""+(null==this.type?"null":rt.toString(this.type)),autoSourceLayerDefUid:""+this.autoSourceLayerDefUid,displayOpacity:""+this.displayOpacity,gridSize:""+this.gridSize,identifier:""+this.identifier,intGridValues:""+V.string(this.intGridValues),parallaxFactorX:""+this.parallaxFactorX,parallaxFactorY:""+this.parallaxFactorY,parallaxScaling:""+V.string(this.parallaxScaling),pxOffsetX:""+this.pxOffsetX,pxOffsetY:""+this.pxOffsetY,autoRuleGroups:""+V.string(this.autoRuleGroups),tilePivotX:""+this.tilePivotX,tilePivotY:""+this.tilePivotY}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:at},function(e,n){this.defs=e,null!=n&&(this.type=n.__type,this.identifier=n.identifier,this.uid=0|n.uid,this.isArray=n.isArray)}),ut=((L["ceramic.LdtkFieldDefinition"]=ht).__name__="ceramic.LdtkFieldDefinition",ht.prototype={defs:null,type:null,identifier:null,uid:null,isArray:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkFieldDefinition"+y.objectToString({type:""+this.type,identifier:""+this.identifier,uid:""+this.uid,isArray:""+V.string(this.isArray)}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:ht},function(e,n){if(this.averageColors=null,this.ceramicTileset=null,this.defs=e,null!=n){this.cHei=0|n.__cHei,this.cWid=0|n.__cWid;var t=n.customData;if(null!=t){for(var i=[],l=0,s=t.length;l<s;){var r=l++;i.push(new ct(t[r]))}a=i}else a=[];this.customData=a,this.embedAtlas=ot.fromString(n.embedAtlas);var a,u=n.enumTags;if(null!=u){for(i=[],l=0,s=u.length;l<s;){r=l++;i.push(new _t(u[r]))}a=i}else a=[];if(this.enumTags=a,this.identifier=n.identifier,this.padding=0|n.padding,this.pxHei=0|n.pxHei,this.pxWid=0|n.pxWid,this.relPath=n.relPath,this.spacing=0|n.spacing,this.tags=y.toStringArray(n.tags),this.tagsSourceEnumUid=null!=n.tagsSourceEnumUid?0|n.tagsSourceEnumUid:-1,this.tileGridSize=0|n.tileGridSize,this.uid=0|n.uid,null!=n.cachedPixelData){e=n.cachedPixelData;if(null!=e.averageColors){var c=e.averageColors,o=0,_=c.length;for(this.averageColors=[];o<_;){var d=y.colorValueFromCharCode(h.cca(c,o)),b=(++o,y.colorValueFromCharCode(h.cca(c,o))),g=(++o,y.colorValueFromCharCode(h.cca(c,o))),O=(++o,y.colorValueFromCharCode(h.cca(c,o))),f=(++o,0),f=(0|(((f&65535|(255<b?255:b<0?0:b)<<16)&16711935|(255<g?255:g<0?0:g)<<8)&16776960|(255<O?255:O<0?0:O)))-16777216;f=f&16777215|(255<(d=null==d?255:d)?255:d<0?0:d)<<24;this.averageColors.push(f)}}}}}),ct=((L["ceramic.LdtkTilesetDefinition"]=ut).__name__="ceramic.LdtkTilesetDefinition",ut.prototype={defs:null,ceramicTileset:null,cHei:null,cWid:null,customData:null,embedAtlas:null,enumTags:null,identifier:null,padding:null,pxHei:null,pxWid:null,relPath:null,spacing:null,tags:null,tagsSourceEnumUid:null,tileGridSize:null,uid:null,averageColors:null,tileIdByCustomData:function(e){if(null!=this.customData)for(var n=0,t=this.customData.length;n<t;){var i=n++,i=this.customData[i];if(i.data==e)return i.tileId}return-1},averageColor:function(e){return null!=this.averageColors&&this.averageColors.length>e?this.averageColors[e]:-1},toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkTilesetDefinition"+y.objectToString({cHei:""+this.cHei,cWid:""+this.cWid,embedAtlas:""+(null==this.embedAtlas?"null":ot.toString(this.embedAtlas)),enumTags:""+V.string(this.enumTags),identifier:""+this.identifier,padding:""+this.padding,pxHei:""+this.pxHei,pxWid:""+this.pxWid,relPath:""+this.relPath,spacing:""+this.spacing,tags:""+V.string(this.tags),tagsSourceEnumUid:""+this.tagsSourceEnumUid,tileGridSize:""+this.tileGridSize,uid:""+this.uid}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:ut},function(e){null!=e&&(this.data=e.data,this.tileId=0|e.tileId)}),ot=((L["ceramic.LdtkTileCustomData"]=ct).__name__="ceramic.LdtkTileCustomData",ct.prototype={data:null,tileId:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkTileCustomData"+y.objectToString({data:""+this.data,tileId:""+this.tileId}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:ct},{}),_t=(ot.fromString=function(e){return"LdtkIcons"!==e?0:1},ot.toString=function(e){var n;switch(e){case 0:n="None";break;case 1:n="LdtkIcons";break;default:n="_"}return"LdtkEmbedAtlas."+n},function(e){null!=e&&(this.enumValueId=e.enumValueId,this.tileIds=y.toIntArray(e.tileIds))}),dt=((L["ceramic.LdtkEnumTag"]=_t).__name__="ceramic.LdtkEnumTag",_t.prototype={enumValueId:null,tileIds:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkEnumTag"+y.objectToString({enumValueId:""+this.enumValueId,tileIds:""+V.string(this.tileIds)}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:_t},function(e){if(null!=e){this.active=e.active,this.isOptional=e.isOptional,this.name=e.name;var n,t=e.rules;if(null!=t){for(var i=[],l=0,s=t.length;l<s;){var r=l++;i.push(new bt(t[r]))}n=i}else n=[];this.rules=n,this.uid=0|e.uid,this.usesWizard=e.usesWizard}}),bt=((L["ceramic.LdtkAutoRuleGroup"]=dt).__name__="ceramic.LdtkAutoRuleGroup",dt.prototype={active:null,isOptional:null,name:null,rules:null,uid:null,usesWizard:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkAutoRuleGroup"+y.objectToString({active:""+V.string(this.active),isOptional:""+V.string(this.isOptional),name:""+this.name,rules:""+V.string(this.rules),uid:""+this.uid,usesWizard:""+V.string(this.usesWizard)}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:dt},function(e){this.breakOnMatch=!0,null!=e&&(this.active=e.active,this.breakOnMatch=e.breakOnMatch,this.chance=e.chance,this.checker=gt.fromString(e.checker),this.flipX=e.flipX,this.flipY=e.flipY,this.outOfBoundsValue=null!=e.outOfBoundsValue?0|e.outOfBoundsValue:-1,this.pattern=y.toIntArray(e.pattern),this.perlinActive=e.perlinActive,this.perlinOctaves=e.perlinOctaves,this.perlinScale=e.perlinScale,this.perlinSeed=e.perlinSeed,this.pivotX=e.pivotX,this.pivotY=e.pivotY,this.size=0|e.size,this.tileIds=y.toIntArray(e.tileIds),this.tileMode=Ot.fromString(e.tileMode),this.uid=0|e.uid,this.xModulo=0|e.xModulo,this.xOffset=0|e.xOffset,this.yModulo=0|e.yModulo,this.yOffset=0|e.yOffset)}),gt=((L["ceramic.LdtkAutoLayerRuleDefinition"]=bt).__name__="ceramic.LdtkAutoLayerRuleDefinition",bt.prototype={active:null,breakOnMatch:null,chance:null,checker:null,flipX:null,flipY:null,outOfBoundsValue:null,pattern:null,perlinActive:null,perlinOctaves:null,perlinScale:null,perlinSeed:null,pivotX:null,pivotY:null,size:null,tileIds:null,tileMode:null,uid:null,xModulo:null,xOffset:null,yModulo:null,yOffset:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkAutoLayerRuleDefinition"+y.objectToString({active:""+V.string(this.active),breakOnMatch:""+V.string(this.breakOnMatch),chance:""+this.chance,checker:""+(null==this.checker?"null":gt.toString(this.checker)),flipX:""+V.string(this.flipX),flipY:""+V.string(this.flipY),outOfBoundsValue:""+this.outOfBoundsValue,pattern:""+V.string(this.pattern),perlinActive:""+V.string(this.perlinActive),perlinOctaves:""+this.perlinOctaves,perlinScale:""+this.perlinScale,perlinSeed:""+this.perlinSeed,pivotX:""+this.pivotX,pivotY:""+this.pivotY,size:""+this.size,tileIds:""+V.string(this.tileIds),tileMode:""+(null==this.tileMode?"null":Ot.toString(this.tileMode)),uid:""+this.uid,xModulo:""+this.xModulo,xOffset:""+this.xOffset,yModulo:""+this.yModulo,yOffset:""+this.yOffset}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:bt},{}),Ot=(gt.fromString=function(e){switch(e){case"Horizontal":return 1;case"None":return 0;case"Vertical":return 2;default:return 0}},gt.toString=function(e){var n;switch(e){case 0:n="None";break;case 1:n="Horizontal";break;case 2:n="Vertical";break;default:n="_"}return"LdtkCheckerMode."+n},{}),ft=(Ot.fromString=function(e){switch(e){case"Single":return 1;case"Stamp":return 2;default:return 0}},Ot.toString=function(e){var n;switch(e){case 1:n="Single";break;case 2:n="Stamp";break;default:n="_"}return"LdtkTileMode."+n},function(e){null!=e&&(this.color=E.fromString(e.color),this.identifier=e.identifier,this.value=0|e.value)}),pt=((L["ceramic.LdtkIntGridValue"]=ft).__name__="ceramic.LdtkIntGridValue",ft.prototype={color:null,identifier:null,value:null,toString:function(){var e;return y.beginObjectToString(this)?(e=null==this.color?"null":-1==(e=this.color)?"NONE":"0x"+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2),e="LdtkIntGridValue"+y.objectToString({color:""+e,identifier:""+this.identifier,value:""+this.value}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:ft},function(e,n,t){if(this.ceramicTilemap=null,this.world=n,null!=t){this.bgColor=E.fromString(t.__bgColor),this.bgPos=null!=t.__bgPos?new mt(t.__bgPos):null,this.bgRelPath=t.bgRelPath;var i=t.__neighbours;if(null!=i){for(var l=[],s=0,r=i.length;s<r;){var a=s++;l.push(new wt(i[a]))}u=l}else u=[];this.neighbours=u,this.externalRelPath=t.externalRelPath;var h=t.fieldInstances;if(null!=h){for(l=[],s=0,r=h.length;s<r;){a=s++;l.push(new yt(e,n,h[a]))}u=l}else u=[];this.fieldInstances=u,this.iid=t.iid,this.identifier=t.identifier,this.pxWid=0|t.pxWid,this.pxHei=0|t.pxHei,this.uid=0|t.uid,this.worldDepth=0|t.worldDepth,this.worldX=0|t.worldX,this.worldY=0|t.worldY;var u,c=t.layerInstances;if(null!=c){for(l=[],s=0,r=c.length;s<r;){a=s++;l.push(new Ct(this,e,n,c[a]))}u=l}else u=null;this.layerInstances=u}}),mt=((L["ceramic.LdtkLevel"]=pt).__name__="ceramic.LdtkLevel",pt.prototype={world:null,ceramicTilemap:null,bgColor:null,bgPos:null,bgRelPath:null,neighbours:null,externalRelPath:null,fieldInstances:null,identifier:null,iid:null,layerInstances:null,pxWid:null,pxHei:null,uid:null,worldDepth:null,worldX:null,worldY:null,ensureLoaded:function(a){var h=this;null!=this.externalRelPath&&null==this.layerInstances?null!=this.world&&null!=this.world.ldtkData&&null!=this.world.ldtkData.loadExternalLevelData?this.world.ldtkData.loadExternalLevelData(this.externalRelPath,function(e){if(null!=e){var n,t=e.layerInstances;if(null!=t){for(var i=[],l=0,s=t.length;l<s;){var r=l++;i.push(new Ct(h,h.world.ldtkData,h.world,t[r]))}n=i}else n=null;h.layerInstances=n,null!=h.world.ldtkData.loadLevelCeramicTilemap&&h.world.ldtkData.loadLevelCeramicTilemap(h)}else he.app.logger.error("Failed to read external level JSON data",{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/LdtkData.hx",lineNumber:2560,className:"ceramic.LdtkLevel",methodName:"ensureLoaded"});a()}):(he.app.logger.error("Cannot load external level data because there is no way to load it.",{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/LdtkData.hx",lineNumber:2568,className:"ceramic.LdtkLevel",methodName:"ensureLoaded"}),a()):(null==this.ceramicTilemap&&null!=this.world.ldtkData.loadLevelCeramicTilemap&&this.world.ldtkData.loadLevelCeramicTilemap(this),a())},unload:function(){var e;null!=this.externalRelPath&&null!=this.layerInstances?((this.layerInstances=null)!=this.ceramicTilemap&&(e=this.ceramicTilemap,this.ceramicTilemap=null,e.destroy()),null!=this.world&&null!=this.world.ldtkData&&this.world.ldtkData._cleanUnusedEntityInstances()):null!=this.ceramicTilemap&&(e=this.ceramicTilemap,this.ceramicTilemap=null,e.destroy())},layerInstance:function(e){if(null!=this.layerInstances)for(var n=0,t=this.layerInstances.length;n<t;){var i=n++,i=this.layerInstances[i];if(i.def.identifier==e)return i}return null},fieldInstance:function(e){if(null!=this.fieldInstances)for(var n=0,t=this.fieldInstances.length;n<t;){var i=n++,i=this.fieldInstances[i];if(i.def.identifier==e)return i}return null},_mapEntities:function(e,n){for(var t=0,i=this.layerInstances;t<i.length;){var l=i[t],s=(++t,0);if(null!=l.autoLayerTiles&&(s=Math.max(s,l.autoLayerTiles.length/7)),null!=l.gridTiles&&(s=Math.max(s,l.gridTiles.length/7)),null!=l.entityInstances)for(var r=0,a=l.entityInstances;r<a.length;){var h=a[r];++r,null!=e&&h.def.identifier!=e||n(h)}}},createVisualsForEntities:function(e,n,t){for(var i=0,l=this.layerInstances;i<l.length;){var s=l[i],r=(++i,0);if(null!=s.ceramicLayer){var a=e.layer(s.ceramicLayer.get_name());if(null!=a){if(null!=s.autoLayerTiles&&(r=Math.max(r,s.autoLayerTiles.length/7)),null!=s.gridTiles&&(r=Math.max(r,s.gridTiles.length/7)),null!=s.entityInstances)for(var h=0,u=s.entityInstances;h<u.length;){var c,o=u[h];++h,null!=n&&o.def.identifier!=n||((c=null)==t?o.def.isRenderable(3)&&(c=new xt(o)):c=t(o),null!=c&&(c.set_depth(r++),a.add(c)))}}else he.app.logger.warning("Cannot create visuals for layer "+s.ceramicLayer.get_name()+" because there is no matching layer visual",{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/LdtkData.hx",lineNumber:2725,className:"ceramic.LdtkLevel",methodName:"createVisualsForEntities"})}else he.app.logger.warning("Cannot create visuals because there is no ceramic layer for LDtk layer "+s.def.identifier,{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/LdtkData.hx",lineNumber:2729,className:"ceramic.LdtkLevel",methodName:"createVisualsForEntities"})}},toString:function(){var e;return y.beginObjectToString(this)?(e=null==this.bgColor?"null":-1==(e=this.bgColor)?"NONE":"0x"+B.hex(e>>16&255,2)+B.hex(e>>8&255,2)+B.hex(255&e,2),e="LdtkLevel"+y.objectToString({bgColor:""+e,bgPos:""+V.string(this.bgPos),bgRelPath:""+this.bgRelPath,neighbours:""+V.string(this.neighbours),externalRelPath:""+this.externalRelPath,fieldInstances:""+V.string(this.fieldInstances),identifier:""+this.identifier,layerInstances:""+V.string(this.layerInstances),pxWid:""+this.pxWid,pxHei:""+this.pxHei,uid:""+this.uid,worldDepth:""+this.worldDepth,worldX:""+this.worldX,worldY:""+this.worldY}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:pt},function(e){var n;null!=e&&(n=e.cropRect,this.cropX=n[0],this.cropY=n[1],this.cropWidth=n[2],this.cropHeight=n[3],n=e.scale,this.scaleX=n[0],this.scaleY=n[1],n=y.toIntArray(e.topLeftPx),this.pxLeft=n[0],this.pxTop=n[1])}),wt=((L["ceramic.LdtkBackgroundPosition"]=mt).__name__="ceramic.LdtkBackgroundPosition",mt.prototype={cropX:null,cropY:null,cropWidth:null,cropHeight:null,scaleX:null,scaleY:null,pxLeft:null,pxTop:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkBackgroundPosition"+y.objectToString({cropX:""+this.cropX,cropY:""+this.cropY,cropWidth:""+this.cropWidth,cropHeight:""+this.cropHeight,scaleX:""+this.scaleX,scaleY:""+this.scaleY,pxLeft:""+this.pxLeft,pxTop:""+this.pxTop}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:mt},function(e){null!=e&&(this.dir=vt.fromString(e.dir),this.levelIid=e.levelIid)}),vt=((L["ceramic.LdtkLevelNeighbour"]=wt).__name__="ceramic.LdtkLevelNeighbour",wt.prototype={dir:null,levelIid:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkLevelNeighbour"+y.objectToString({dir:""+(null==this.dir?"null":vt.toString(this.dir)),levelIid:""+this.levelIid}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:wt},{}),yt=(vt.fromString=function(e){switch(e){case"East":case"e":return 4;case"North":case"n":return 1;case"ne":return 5;case"nw":return 6;case"South":case"s":return 3;case"se":return 7;case"sw":return 8;case"West":case"w":return 2;default:return 0}},vt.toString=function(e){var n;switch(e){case 1:n="North";break;case 2:n="West";break;case 3:n="South";break;case 4:n="East";break;default:n="_"}return"LdtkLevelLocation."+n},function(e,n,t,i){if(this.def=null,this.def=i,null!=t){var l=0|t.defUid;if(null!=e)for(var s=e.defs.levelFields,r=0,a=s.length;r<a;){var h=s[r++];if(h.uid==l){i=h;break}}this.tile=null!=t.tile?new nt(e,t.tile):null;var u=t.__value,c=t.__type;if(B.startsWith(c,"Array<")){var o,c=c.substring(6,c.length-1);if(u instanceof Array){for(var r=[],a=0,_=ys.__cast(u,Array);a<_.length;){var d=_[a];++a,r.push(yt.rawValueToValue(e,n,d,c))}o=r}else o=null;this.value=o}else this.value=yt.rawValueToValue(e,n,u,c)}}),Ct=((L["ceramic.LdtkFieldInstance"]=yt).__name__="ceramic.LdtkFieldInstance",yt.rawValueToValue=function(e,n,t,i){if(null==t)return null;if(null==i)return t;switch(i){case"Color":return E.fromString(t);case"EntityRef":return null!=e?e._resolveEntityInstance(t,n):null;case"Int":case"Integer":return 0|t;case"Bool":case"Boolean":case"FilePath":case"Float":case"Multilines":case"String":case"Text":return t;case"Point":return new p(0|N.field(t,"cx"),0|N.field(t,"cy"));case"Tile":return new nt(e,t);default:return t}},yt.prototype={def:null,value:null,tile:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkFieldInstance"+y.objectToString({identifier:""+(null!=this.def?this.def.identifier:null),value:""+(null==this.value?"null":V.string(this.value)),tile:""+V.string(this.tile)}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:yt},function(e,n,t,i){if(this.tileset=null,this.def=null,this.level=null,(this.ceramicLayer=null)!=i){null!=e&&(this.level=null);var e=0|i.layerDefUid,l=null!=i.__tilesetDefUid?0|i.__tilesetDefUid:-1;if(null!=n){this.def=n._findLayerDefWithUid(e),this.tileset=-1!=l?n._findTilesetDefWithUid(l):null;var s=i.entityInstances;if(null!=s){for(var r=[],a=0,h=s.length;a<h;){var u=a++;r.push(n._resolveEntityInstance(s[u],t,this))}_=r}else _=null;this.entityInstances=_}null==this.def&&he.app.logger.warning("Missing definition for layer instance with identifier: "+V.string(i.__identifier),{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/LdtkData.hx",lineNumber:3212,className:"ceramic.LdtkLayerInstance",methodName:"new"}),this.opacity=i.__opacity,this.cWid=0|i.__cWid,this.cHei=0|i.__cHei,this.pxTotalOffsetX=0|i.__pxTotalOffsetX,this.pxTotalOffsetY=0|i.__pxTotalOffsetY;var c=i.autoLayerTiles;if(null!=c){this.autoLayerTiles=[];for(r=0,a=c.length;r<a;){var o=c[u=r++],_=(this.autoLayerTiles.push(0|o.t),this.autoLayerTiles.push(0|o.f),this.autoLayerTiles.push(0|o.px[0]),this.autoLayerTiles.push(0|o.px[1]),this.autoLayerTiles.push(0|o.src[0]),this.autoLayerTiles.push(0|o.src[1]),o.a);this.autoLayerTiles.push(Math.round(4096*(null!=_?_:1)))}}else this.autoLayerTiles=null;var d=i.gridTiles;if(null!=d){this.gridTiles=[];for(r=0,a=d.length;r<a;){o=d[u=r++],_=(this.gridTiles.push(0|o.t),this.gridTiles.push(0|o.f),this.gridTiles.push(0|o.px[0]),this.gridTiles.push(0|o.px[1]),this.gridTiles.push(0|o.src[0]),this.gridTiles.push(0|o.src[1]),o.a);this.gridTiles.push(Math.round(4096*(null!=_?_:1)))}}else this.gridTiles=null;this.iid=i.iid,this.intGrid=null!=i.intGridCsv?y.toIntArray(i.intGridCsv):null,this.levelId=0|i.levelId,this.pxOffsetX=0|i.pxOffsetX,this.pxOffsetY=0|i.pxOffsetY,this.visible=i.visible,this.optionalRules=null!=i.optionalRules?y.toIntArray(i.optionalRules):null,this.seed=0|i.seed}}),Ut=((L["ceramic.LdtkLayerInstance"]=Ct).__name__="ceramic.LdtkLayerInstance",Ct.prototype={ceramicLayer:null,level:null,def:null,opacity:null,cWid:null,cHei:null,pxTotalOffsetX:null,pxTotalOffsetY:null,tileset:null,autoLayerTiles:null,entityInstances:null,gridTiles:null,iid:null,intGrid:null,levelId:null,pxOffsetX:null,pxOffsetY:null,visible:null,optionalRules:null,seed:null,toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkLayerInstance"+y.objectToString({def:""+V.string(this.def),tileset:""+V.string(this.tileset),opacity:""+this.opacity,pxTotalOffsetX:""+this.pxTotalOffsetX,pxTotalOffsetY:""+this.pxTotalOffsetY,autoLayerTiles:""+V.string(this.autoLayerTiles),gridTiles:""+V.string(this.gridTiles),iid:""+this.iid,intGrid:""+V.string(this.intGrid),levelId:""+this.levelId,pxOffsetX:""+this.pxOffsetX,pxOffsetY:""+this.pxOffsetY,visible:""+V.string(this.visible),optionalRules:""+V.string(this.optionalRules),seed:""+this.seed}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:Ct},function(e,n,t,i){if(this.layerInstance=null,(this.def=null)!=i&&i(this,t),null!=t){this.width=0|t.width,this.height=0|t.height,this.iid=t.iid;var l,i=0|t.defUid,i=(null!=e&&(this.def=e._findEntityDefWithUid(i)),null==this.def&&he.app.logger.warning("Missing definition for entity instance with identifier: "+V.string(t.__identifier)+" / ldtkData null? "+V.string(null==e),{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/LdtkData.hx",lineNumber:3370,className:"ceramic.LdtkEntityInstance",methodName:"new"}),y.toIntArray(t.__grid)),i=(this.gridX=0|i[0],this.gridY=0|i[1],y.toIntArray(t.px)),s=(this.pxX=0|i[0],this.pxY=0|i[1],t.fieldInstances);if(null!=s){for(var r=[],a=0,h=s.length;a<h;){var u=s[a++],c=u.__identifier;r.push(new yt(e,n,u,this.def.fieldDef(c)))}l=r}else l=[];this.fieldInstances=l}}),y=((L["ceramic.LdtkEntityInstance"]=Ut).__name__="ceramic.LdtkEntityInstance",Ut.prototype={def:null,layerInstance:null,gridX:null,gridY:null,pxX:null,pxY:null,fieldInstances:null,width:null,height:null,iid:null,fieldInstance:function(e){if(null!=this.fieldInstances)for(var n=0,t=this.fieldInstances.length;n<t;){var i=n++,i=this.fieldInstances[i];if(i.def.identifier==e)return i}return null},toString:function(){var e;return y.beginObjectToString(this)?(e="LdtkEntityInstance"+y.objectToString({identifier:null!=this.def&&null!=this.def.identifier?this.def.identifier:"",def:""+V.string(this.def),gridX:""+this.gridX,gridY:""+this.gridY,pxX:""+this.pxX,pxY:""+this.pxY,fieldInstances:""+V.string(this.fieldInstances),width:""+this.width,height:""+this.height,iid:""+this.iid}),y.endObjectToString(),e):y.HIDDEN_VALUE},__class__:Ut},function(){}),xt=((L["ceramic.LdtkDataHelpers"]=y).__name__="ceramic.LdtkDataHelpers",y.toIntArray=function(e){var n=e,t=[];if(null!=n)for(var i=0,l=n.length;i<l;){var s=i++;t.push(0|n[s])}return t},y.toFloatArray=function(e){var n=e,t=[];if(null!=n)for(var i=0,l=n.length;i<l;){var s=i++;t.push(n[s])}return t},y.toStringArray=function(e){var n=e,t=[];if(null!=n)for(var i=0,l=n.length;i<l;){var s=i++;t.push(n[s])}return t},y.beginObjectToString=function(e){var n=!1;return 0==y._objectToStringCount?y._objectToStringList=[]:n=-1!=y._objectToStringList.indexOf(e),!n&&(y._objectToStringCount++,!0)},y.endObjectToString=function(){y._objectToStringCount--,0==y._objectToStringCount&&(y._objectToStringList=null)},y.objectToString=function(e){for(var n="",t=0,i=(n+="(",0),l=N.fields(e);i<l.length;)var s=l[i],r=(++i,0<t++&&(n+=" "),N.field(e,s)),n=r.length<=y.TO_STRING_MAX_ITEM_LENGTH?(n+=null==s?"null":""+s)+"="+(null==r?"null":""+r):(n=n+(null==s?"null":""+s)+"=")+V.string(y.HIDDEN_VALUE);return n+=")"},y.colorValueFromCharCode=function(e){switch(e){case 48:return 0;case 49:return 17;case 50:return 34;case 51:return 51;case 52:return 68;case 53:return 85;case 54:return 102;case 55:return 119;case 56:return 136;case 57:return 153;case 65:case 97:return 170;case 66:case 98:return 187;case 67:case 99:return 204;case 68:case 100:return 221;case 69:case 101:return 238;case 70:case 102:return 255;default:return 0}},function(e){r.call(this),this.ldtkEntity=e,this.setup()}),Tt=((L["ceramic.LdtkVisual"]=xt).__name__="ceramic.LdtkVisual",xt.__super__=r,xt.prototype=$extend(r.prototype,{ldtkEntity:null,setup:function(){this.flags|=16;var e=this.ldtkEntity.width,n=this.ldtkEntity.height,t=this.ldtkEntity.pxY,i=(this.set_x(this.ldtkEntity.pxX),this.set_y(t),this.set_width(e),this.set_height(n),this.ldtkEntity.def),l=i.pivotY;if(this.set_anchorX(i.pivotX),this.set_anchorY(l),null!=this.ldtkEntity.def&&null!=this.ldtkEntity.def.tileset&&null!=this.ldtkEntity.def.tileset.ceramicTileset){var s=this.ldtkEntity.def.tileset.ceramicTileset,a=null!=s.get_image()?s.unobservedImage.texture:null;if(null!=a&&0<e&&0<n&&0<i.tileRect.w&&0<i.tileRect.h)switch(i.tileRenderMode){case 1:var h=Math.max(e/i.tileRect.w,n/i.tileRect.h),u=i.tileRect.w*h,h=i.tileRect.h*h,u=i.tileRect.w*e/u,h=i.tileRect.h*n/h,c=i.tileRect.x+(i.tileRect.w-u)*this.anchorX,o=i.tileRect.y+(i.tileRect.h-h)*this.anchorY,l=((f=new r)._texture!=a&&f._set_texture(a),f.frameX=c,f.frameY=o,f.frameWidth!=u&&-1!=(f.frameWidth=u)&&f.set_width(u),f.frameHeight!=h&&-1!=(f.frameHeight=h)&&f.set_height(h),this.anchorY),t=(f.set_anchorX(this.anchorX),f.set_anchorY(l),n*this.anchorY);f.set_x(e*this.anchorX),f.set_y(t),f.set_width(e),f.set_height(n),this.add(f);break;case 2:var c=Math.min(e/i.tileRect.w,n/i.tileRect.h),_=((f=new r)._texture!=a&&f._set_texture(a),i.tileRect.w),d=i.tileRect.h,l=(f.frameX=i.tileRect.x,f.frameY=i.tileRect.y,f.frameWidth!=_&&-1!=(f.frameWidth=_)&&f.set_width(_),f.frameHeight!=d&&-1!=(f.frameHeight=d)&&f.set_height(d),this.anchorY),b=(f.set_anchorX(this.anchorX),f.set_anchorY(l),i.tileRect.h*c),t=(f.set_width(i.tileRect.w*c),f.set_height(b),n*this.anchorY);f.set_x(e*this.anchorX),f.set_y(t),this.add(f);break;case 3:var o=new Bt,g=i.tileRect.get_ceramicTile(),l=(o.tile!=g&&(o.tile=g,o._set_tile(g)),this.anchorY),t=(o.set_anchorX(this.anchorX),o.set_anchorY(l),o.set_width(e),o.set_height(n),n*this.anchorY);o.set_x(e*this.anchorX),o.set_y(t),this.add(o);break;case 4:(f=new r)._texture!=a&&f._set_texture(a);var _=i.tileRect.w,d=i.tileRect.h,l=(f.frameX=i.tileRect.x,f.frameY=i.tileRect.y,f.frameWidth!=_&&-1!=(f.frameWidth=_)&&f.set_width(_),f.frameHeight!=d&&-1!=(f.frameHeight=d)&&f.set_height(d),this.anchorY),O=(f.set_anchorX(this.anchorX),f.set_anchorY(l),f.set_width(e),f.set_height(n),e*this.anchorX+(e-f.get_width())*this.anchorX),t=n*this.anchorY+(n-f.get_height())*this.anchorY;f.set_x(O),f.set_y(t),this.add(f);break;case 5:var f=new r,u=Math.min(i.tileRect.w,e),h=Math.min(i.tileRect.h,n),l=(f._texture!=a&&f._set_texture(a),f.frameX=i.tileRect.x+(i.tileRect.w-u)*this.anchorX,f.frameY=i.tileRect.y+(i.tileRect.h-h)*this.anchorY,f.frameWidth!=u&&-1!=(f.frameWidth=u)&&f.set_width(u),f.frameHeight!=h&&-1!=(f.frameHeight=h)&&f.set_height(h),this.anchorY),O=(f.set_anchorX(this.anchorX),f.set_anchorY(l),f.set_width(u),f.set_height(h),e*this.anchorX+(u-f.get_width())*this.anchorX),t=n*this.anchorY+(h-f.get_height())*this.anchorY;f.set_x(O),f.set_y(t),this.add(f);break;case 6:_=((f=new r)._texture!=a&&f._set_texture(a),i.tileRect.w),d=i.tileRect.h,l=(f.frameX=i.tileRect.x,f.frameY=i.tileRect.y,f.frameWidth!=_&&-1!=(f.frameWidth=_)&&f.set_width(_),f.frameHeight!=d&&-1!=(f.frameHeight=d)&&f.set_height(d),this.anchorY),b=(f.set_anchorX(this.anchorX),f.set_anchorY(l),i.tileRect.h),t=(f.set_width(i.tileRect.w),f.set_height(b),n*this.anchorY);f.set_x(e*this.anchorX),f.set_y(t),this.add(f);break;case 7:c=new Dt,g=(c._rendering(2,2),i.tileRect.get_ceramicTile()),l=(c.tile!=g&&(c.tile=g,c._set_tile(g)),c._slice(i.nineSliceBorders[0],i.nineSliceBorders[1],i.nineSliceBorders[2],i.nineSliceBorders[3]),this.anchorY),O=(c.set_anchorX(this.anchorX),c.set_anchorY(l),c.set_width(e),c.set_height(n),e*this.anchorX+(e-c.get_width())*this.anchorX),t=n*this.anchorY+(n-c.get_height())*this.anchorY;c.set_x(O),c.set_y(t),this.add(c)}}},__class__:xt}),function(){this.indentPrefix="",l.call(this),Tt.didInitOnce||(Tt.didInitOnce=!0)}),Dt=((L["ceramic.Logger"]=Tt).__name__="ceramic.Logger",Tt.__super__=l,Tt.prototype=$extend(l.prototype,{__cbOnInfo:null,__cbOnceInfo:null,__cbOnOwnerUnbindInfo:null,__cbOnceOwnerUnbindInfo:null,emitInfo:function(e,n){var t=0;if(null!=this.__cbOnInfo&&(t+=this.__cbOnInfo.length),null!=this.__cbOnceInfo&&(t+=this.__cbOnceInfo.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnInfo)for(var r=0,a=this.__cbOnInfo.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnInfo[h],++s):--t}if(null!=this.__cbOnceInfo){for(var u=null,c=null,r=0,a=this.__cbOnceInfo.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceInfo[h],this.__cbOnceInfo[h]=null,o=this.__cbOnceOwnerUnbindInfo[h],(this.__cbOnceOwnerUnbindInfo[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindInfo[h]),c.push(this.__cbOnceInfo[h]))}this.__cbOnceOwnerUnbindInfo=u,this.__cbOnceInfo=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onInfo:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event info because owner is destroyed!");var l=function(e){null!=t&&(i.offInfo(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindInfo&&(this.__cbOnOwnerUnbindInfo=[]),this.__cbOnOwnerUnbindInfo.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindInfo&&(this.__cbOnOwnerUnbindInfo=[]),this.__cbOnOwnerUnbindInfo.push(null);null==this.__cbOnInfo&&(this.__cbOnInfo=[]),this.__cbOnInfo.push(t)},onceInfo:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event info because owner is destroyed!");var l=function(e){null!=t&&(i.offInfo(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindInfo&&(this.__cbOnceOwnerUnbindInfo=[]),this.__cbOnceOwnerUnbindInfo.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindInfo&&(this.__cbOnceOwnerUnbindInfo=[]),this.__cbOnceOwnerUnbindInfo.push(null);null==this.__cbOnceInfo&&(this.__cbOnceInfo=[]),this.__cbOnceInfo.push(t)},offInfo:function(e){if(null!=e){var n;null!=this.__cbOnInfo&&-1!=(n=this.__cbOnInfo.indexOf(e))&&(this.__cbOnInfo.splice(n,1),null!=(s=this.__cbOnOwnerUnbindInfo[n])&&s(),this.__cbOnOwnerUnbindInfo.splice(n,1)),null!=this.__cbOnceInfo&&-1!=(n=this.__cbOnceInfo.indexOf(e))&&(this.__cbOnceInfo.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindInfo[n])&&s(),this.__cbOnceOwnerUnbindInfo.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindInfo){for(var t=0,i=this.__cbOnOwnerUnbindInfo.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindInfo[l])&&s()}this.__cbOnOwnerUnbindInfo=null}if(null!=this.__cbOnceOwnerUnbindInfo){for(t=0,i=this.__cbOnceOwnerUnbindInfo.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindInfo[l])&&s()}this.__cbOnceOwnerUnbindInfo=null}this.__cbOnInfo=null,this.__cbOnceInfo=null}},listensInfo:function(){return null!=this.__cbOnInfo&&0<this.__cbOnInfo.length||null!=this.__cbOnceInfo&&0<this.__cbOnceInfo.length},__cbOnDebug:null,__cbOnceDebug:null,__cbOnOwnerUnbindDebug:null,__cbOnceOwnerUnbindDebug:null,emitDebug:function(e,n){var t=0;if(null!=this.__cbOnDebug&&(t+=this.__cbOnDebug.length),null!=this.__cbOnceDebug&&(t+=this.__cbOnceDebug.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnDebug)for(var r=0,a=this.__cbOnDebug.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnDebug[h],++s):--t}if(null!=this.__cbOnceDebug){for(var u=null,c=null,r=0,a=this.__cbOnceDebug.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceDebug[h],this.__cbOnceDebug[h]=null,o=this.__cbOnceOwnerUnbindDebug[h],(this.__cbOnceOwnerUnbindDebug[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindDebug[h]),c.push(this.__cbOnceDebug[h]))}this.__cbOnceOwnerUnbindDebug=u,this.__cbOnceDebug=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onDebug:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event debug because owner is destroyed!");var l=function(e){null!=t&&(i.offDebug(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindDebug&&(this.__cbOnOwnerUnbindDebug=[]),this.__cbOnOwnerUnbindDebug.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindDebug&&(this.__cbOnOwnerUnbindDebug=[]),this.__cbOnOwnerUnbindDebug.push(null);null==this.__cbOnDebug&&(this.__cbOnDebug=[]),this.__cbOnDebug.push(t)},onceDebug:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event debug because owner is destroyed!");var l=function(e){null!=t&&(i.offDebug(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindDebug&&(this.__cbOnceOwnerUnbindDebug=[]),this.__cbOnceOwnerUnbindDebug.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindDebug&&(this.__cbOnceOwnerUnbindDebug=[]),this.__cbOnceOwnerUnbindDebug.push(null);null==this.__cbOnceDebug&&(this.__cbOnceDebug=[]),this.__cbOnceDebug.push(t)},offDebug:function(e){if(null!=e){var n;null!=this.__cbOnDebug&&-1!=(n=this.__cbOnDebug.indexOf(e))&&(this.__cbOnDebug.splice(n,1),null!=(s=this.__cbOnOwnerUnbindDebug[n])&&s(),this.__cbOnOwnerUnbindDebug.splice(n,1)),null!=this.__cbOnceDebug&&-1!=(n=this.__cbOnceDebug.indexOf(e))&&(this.__cbOnceDebug.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindDebug[n])&&s(),this.__cbOnceOwnerUnbindDebug.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDebug){for(var t=0,i=this.__cbOnOwnerUnbindDebug.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindDebug[l])&&s()}this.__cbOnOwnerUnbindDebug=null}if(null!=this.__cbOnceOwnerUnbindDebug){for(t=0,i=this.__cbOnceOwnerUnbindDebug.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindDebug[l])&&s()}this.__cbOnceOwnerUnbindDebug=null}this.__cbOnDebug=null,this.__cbOnceDebug=null}},listensDebug:function(){return null!=this.__cbOnDebug&&0<this.__cbOnDebug.length||null!=this.__cbOnceDebug&&0<this.__cbOnceDebug.length},__cbOnSuccess:null,__cbOnceSuccess:null,__cbOnOwnerUnbindSuccess:null,__cbOnceOwnerUnbindSuccess:null,emitSuccess:function(e,n){var t=0;if(null!=this.__cbOnSuccess&&(t+=this.__cbOnSuccess.length),null!=this.__cbOnceSuccess&&(t+=this.__cbOnceSuccess.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnSuccess)for(var r=0,a=this.__cbOnSuccess.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnSuccess[h],++s):--t}if(null!=this.__cbOnceSuccess){for(var u=null,c=null,r=0,a=this.__cbOnceSuccess.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceSuccess[h],this.__cbOnceSuccess[h]=null,o=this.__cbOnceOwnerUnbindSuccess[h],(this.__cbOnceOwnerUnbindSuccess[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindSuccess[h]),c.push(this.__cbOnceSuccess[h]))}this.__cbOnceOwnerUnbindSuccess=u,this.__cbOnceSuccess=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onSuccess:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event success because owner is destroyed!");var l=function(e){null!=t&&(i.offSuccess(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindSuccess&&(this.__cbOnOwnerUnbindSuccess=[]),this.__cbOnOwnerUnbindSuccess.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindSuccess&&(this.__cbOnOwnerUnbindSuccess=[]),this.__cbOnOwnerUnbindSuccess.push(null);null==this.__cbOnSuccess&&(this.__cbOnSuccess=[]),this.__cbOnSuccess.push(t)},onceSuccess:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event success because owner is destroyed!");var l=function(e){null!=t&&(i.offSuccess(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindSuccess&&(this.__cbOnceOwnerUnbindSuccess=[]),this.__cbOnceOwnerUnbindSuccess.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindSuccess&&(this.__cbOnceOwnerUnbindSuccess=[]),this.__cbOnceOwnerUnbindSuccess.push(null);null==this.__cbOnceSuccess&&(this.__cbOnceSuccess=[]),this.__cbOnceSuccess.push(t)},offSuccess:function(e){if(null!=e){var n;null!=this.__cbOnSuccess&&-1!=(n=this.__cbOnSuccess.indexOf(e))&&(this.__cbOnSuccess.splice(n,1),null!=(s=this.__cbOnOwnerUnbindSuccess[n])&&s(),this.__cbOnOwnerUnbindSuccess.splice(n,1)),null!=this.__cbOnceSuccess&&-1!=(n=this.__cbOnceSuccess.indexOf(e))&&(this.__cbOnceSuccess.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindSuccess[n])&&s(),this.__cbOnceOwnerUnbindSuccess.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSuccess){for(var t=0,i=this.__cbOnOwnerUnbindSuccess.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindSuccess[l])&&s()}this.__cbOnOwnerUnbindSuccess=null}if(null!=this.__cbOnceOwnerUnbindSuccess){for(t=0,i=this.__cbOnceOwnerUnbindSuccess.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindSuccess[l])&&s()}this.__cbOnceOwnerUnbindSuccess=null}this.__cbOnSuccess=null,this.__cbOnceSuccess=null}},listensSuccess:function(){return null!=this.__cbOnSuccess&&0<this.__cbOnSuccess.length||null!=this.__cbOnceSuccess&&0<this.__cbOnceSuccess.length},__cbOnWarning:null,__cbOnceWarning:null,__cbOnOwnerUnbindWarning:null,__cbOnceOwnerUnbindWarning:null,emitWarning:function(e,n){var t=0;if(null!=this.__cbOnWarning&&(t+=this.__cbOnWarning.length),null!=this.__cbOnceWarning&&(t+=this.__cbOnceWarning.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnWarning)for(var r=0,a=this.__cbOnWarning.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnWarning[h],++s):--t}if(null!=this.__cbOnceWarning){for(var u=null,c=null,r=0,a=this.__cbOnceWarning.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceWarning[h],this.__cbOnceWarning[h]=null,o=this.__cbOnceOwnerUnbindWarning[h],(this.__cbOnceOwnerUnbindWarning[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindWarning[h]),c.push(this.__cbOnceWarning[h]))}this.__cbOnceOwnerUnbindWarning=u,this.__cbOnceWarning=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onWarning:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event warning because owner is destroyed!");var l=function(e){null!=t&&(i.offWarning(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindWarning&&(this.__cbOnOwnerUnbindWarning=[]),this.__cbOnOwnerUnbindWarning.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindWarning&&(this.__cbOnOwnerUnbindWarning=[]),this.__cbOnOwnerUnbindWarning.push(null);null==this.__cbOnWarning&&(this.__cbOnWarning=[]),this.__cbOnWarning.push(t)},onceWarning:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event warning because owner is destroyed!");var l=function(e){null!=t&&(i.offWarning(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindWarning&&(this.__cbOnceOwnerUnbindWarning=[]),this.__cbOnceOwnerUnbindWarning.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindWarning&&(this.__cbOnceOwnerUnbindWarning=[]),this.__cbOnceOwnerUnbindWarning.push(null);null==this.__cbOnceWarning&&(this.__cbOnceWarning=[]),this.__cbOnceWarning.push(t)},offWarning:function(e){if(null!=e){var n;null!=this.__cbOnWarning&&-1!=(n=this.__cbOnWarning.indexOf(e))&&(this.__cbOnWarning.splice(n,1),null!=(s=this.__cbOnOwnerUnbindWarning[n])&&s(),this.__cbOnOwnerUnbindWarning.splice(n,1)),null!=this.__cbOnceWarning&&-1!=(n=this.__cbOnceWarning.indexOf(e))&&(this.__cbOnceWarning.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindWarning[n])&&s(),this.__cbOnceOwnerUnbindWarning.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWarning){for(var t=0,i=this.__cbOnOwnerUnbindWarning.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindWarning[l])&&s()}this.__cbOnOwnerUnbindWarning=null}if(null!=this.__cbOnceOwnerUnbindWarning){for(t=0,i=this.__cbOnceOwnerUnbindWarning.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindWarning[l])&&s()}this.__cbOnceOwnerUnbindWarning=null}this.__cbOnWarning=null,this.__cbOnceWarning=null}},listensWarning:function(){return null!=this.__cbOnWarning&&0<this.__cbOnWarning.length||null!=this.__cbOnceWarning&&0<this.__cbOnceWarning.length},__cbOnError:null,__cbOnceError:null,__cbOnOwnerUnbindError:null,__cbOnceOwnerUnbindError:null,emitError:function(e,n){var t=0;if(null!=this.__cbOnError&&(t+=this.__cbOnError.length),null!=this.__cbOnceError&&(t+=this.__cbOnceError.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnError)for(var r=0,a=this.__cbOnError.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnError[h],++s):--t}if(null!=this.__cbOnceError){for(var u=null,c=null,r=0,a=this.__cbOnceError.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceError[h],this.__cbOnceError[h]=null,o=this.__cbOnceOwnerUnbindError[h],(this.__cbOnceOwnerUnbindError[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindError[h]),c.push(this.__cbOnceError[h]))}this.__cbOnceOwnerUnbindError=u,this.__cbOnceError=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event error because owner is destroyed!");var l=function(e){null!=t&&(i.offError(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindError&&(this.__cbOnOwnerUnbindError=[]),this.__cbOnOwnerUnbindError.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindError&&(this.__cbOnOwnerUnbindError=[]),this.__cbOnOwnerUnbindError.push(null);null==this.__cbOnError&&(this.__cbOnError=[]),this.__cbOnError.push(t)},onceError:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event error because owner is destroyed!");var l=function(e){null!=t&&(i.offError(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindError&&(this.__cbOnceOwnerUnbindError=[]),this.__cbOnceOwnerUnbindError.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindError&&(this.__cbOnceOwnerUnbindError=[]),this.__cbOnceOwnerUnbindError.push(null);null==this.__cbOnceError&&(this.__cbOnceError=[]),this.__cbOnceError.push(t)},offError:function(e){if(null!=e){var n;null!=this.__cbOnError&&-1!=(n=this.__cbOnError.indexOf(e))&&(this.__cbOnError.splice(n,1),null!=(s=this.__cbOnOwnerUnbindError[n])&&s(),this.__cbOnOwnerUnbindError.splice(n,1)),null!=this.__cbOnceError&&-1!=(n=this.__cbOnceError.indexOf(e))&&(this.__cbOnceError.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindError[n])&&s(),this.__cbOnceOwnerUnbindError.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindError){for(var t=0,i=this.__cbOnOwnerUnbindError.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindError[l])&&s()}this.__cbOnOwnerUnbindError=null}if(null!=this.__cbOnceOwnerUnbindError){for(t=0,i=this.__cbOnceOwnerUnbindError.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindError[l])&&s()}this.__cbOnceOwnerUnbindError=null}this.__cbOnError=null,this.__cbOnceError=null}},listensError:function(){return null!=this.__cbOnError&&0<this.__cbOnError.length||null!=this.__cbOnceError&&0<this.__cbOnceError.length},indentPrefix:null,debug:function(e,n){this.emitDebug(e,n),Dl.trace(this.prefixLines("[debug] ",e),n)},info:function(e,n){this.emitInfo(e,n),Dl.trace(this.prefixLines("[info] ",e),n)},success:function(e,n){this.emitSuccess(e,n),Dl.trace(this.prefixLines("[success] ",e),n)},warning:function(e,n){this.emitWarning(e,n),Tt._hasElectronRunner?Dl.trace(this.prefixLines("[warning] ",e),n):console.warn(e)},error:function(e,n){this.emitError(e,n),Tt._hasElectronRunner?Dl.trace(this.prefixLines("[error] ",e),n):console.error(e)},pushIndent:function(){this.indentPrefix+="    "},popIndent:function(){this.indentPrefix=this.indentPrefix.substring(0,this.indentPrefix.length-4)},prefixLines:function(e,n){for(var t=[],i=0,l=V.string(n).split("\n");i<l.length;){var s=l[i];++i,t.push(e+this.indentPrefix+s)}return t.join("\n")},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offInfo(),this.offDebug(),this.offSuccess(),this.offWarning(),this.offError()},__class__:Tt}),(L["ceramic.Mesh"]=r1).__name__="ceramic.Mesh",r1.__super__=q,r1.prototype=$extend(q.prototype,{colorMapping:null,customFloatAttributesSize:null,complexHit:null,destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.texture&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.release(),(this.texture=null)!=this.texture)&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.retain(),this._lifecycleState=-1,q.prototype.destroy.call(this))},get_color:function(){var e,n,t,i;return null!=this.floatColors&&3<=this.floatColors.length?(n=this.floatColors[0],t=this.floatColors[1],i=this.floatColors[2],16776960&(16711935&(65535&0|(255<(e=Math.round(255*n))?255:e<0?0:e)<<16)|(255<(e=Math.round(255*t))?255:e<0?0:e)<<8)|(255<(e=Math.round(255*i))?255:e<0?0:e)):null!=this.colors&&0<this.colors.length?16776960&(16711935&(65535&0|(255<(n=(e=this.colors[0])>>16&255)?255:n<0?0:n)<<16)|(255<(t=e>>8&255)?255:t<0?0:t)<<8)|(255<(i=255&e)?255:i<0?0:i):16777215},set_color:function(e){var n;return null!=this.floatColors?(this.floatColors[0]=(e>>16&255)/255,this.floatColors[1]=(e>>8&255)/255,this.floatColors[2]=(255&e)/255,this.floatColors[3]=1):(null==this.colors&&(this.colors=[]),this.colors[0]=(0|e)-16777216&16777215|((n=255)<(n=null==n?255:n)?255:n<0?0:n)<<24),e},vertices:null,indices:null,colors:null,floatColors:null,texture:null,set_texture:function(e){return this.texture!=e&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.release(),this.texture=e,null!=this.texture&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset))&&this.texture.asset.retain(),e},uvs:null,textureDestroyed:function(e){null!=this.texture&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.release(),(this.texture=null)!=this.texture)&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset)&&this.texture.asset.retain()},hitTest:function(e,n,t){if(this.complexHit){for(var i,l,s,r=e*t.a+n*t.c+t.tx,a=e*t.b+n*t.d+t.ty,h=2+this.customFloatAttributesSize,u=0,c=0,o=this.indices.length/3|0;u<o;){b=this.indices[c],++c,g=this.indices[c],++c,s=this.indices[c],++c,i=this.vertices[b=b*h],++b,l=this.vertices[b],g=this.vertices[b=g*h],++b,_=this.vertices[b],s=this.vertices[b=s*h],++b;var _,d=(r-g)*(l-_)-(i-g)*(a-_),b=(r-s)*(_-(_=this.vertices[b]))-(g-s)*(a-_),g=(r-i)*(_-l)-(s-i)*(a-l);if(!(d<0||b<0||g<0)||!(0<d||0<b||0<g))return!0;++u}return!1}return q.prototype.hitTest.call(this,e,n,t)},set_shader:function(e){return null!=(this.shader=e)&&(this.customFloatAttributesSize=e.customFloatAttributesSize),e},computeSize:function(){if(null!=this.vertices&&2<=this.vertices.length){var e,n,t=0,i=0,l=0,s=this.vertices.length-1;if(0<this.customFloatAttributesSize)for(;l<s;)t<(e=this.vertices[l])&&(t=e),++l,i<(n=this.vertices[l])&&(i=n),l+=1+this.customFloatAttributesSize;else for(;l<s;)t<(e=this.vertices[l])&&(t=e),++l,i<(n=this.vertices[l])&&(i=n),++l;var r=Math.round(1e3*i)/1e3;this.set_width(Math.round(1e3*t)/1e3),this.set_height(r)}else this.set_width(0),this.set_height(0)},grid:function(e,n,t,i){for(var l,s=(t=-1==(t=null==t?-1:t)?this._width:t)/e,r=(i=-1==(i=null==i?-1:i)?this._height:i)/n,a=0,h=0,u=0,c=n+1;u<c;)for(var o=u++,_=o*r,d=0,b=e+1;d<b;){var g=d++;this.vertices[a]=g*s,++a,this.vertices[a]=_,++a,0<o&&0<g&&(this.indices[h]=g=(o-1)*(e+1)+g-1,++h,this.indices[h]=1+g,++h,this.indices[h]=g+(e+1),++h,this.indices[h]=1+g,++h,this.indices[h]=g+(e+1),++h,this.indices[h]=g+(e+1)+1,++h)}if(this.vertices.length>a&&(l=this.vertices).length!=a)if(l.length>a)l.splice(a,l.length-a);else for(var O=l;O.length<a;)O.push(null);if(this.indices.length>h&&(l=this.indices).length!=h)if(l.length>h)l.splice(h,l.length-h);else for(O=l;O.length<h;)O.push(null)},gridFromTexture:function(e,n,t){null==t&&(t=this.texture),this.grid(e,n,t.width,t.height);for(var i=0,l=1/e,s=1/n,r=0,a=n+1;r<a;)for(var h=r++*s,u=(this.uvs[i]=0,this.uvs[++i]=h,++i,1),c=e+1;u<c;){var o=u++;this.uvs[i]=o*l,++i,this.uvs[i]=h,++i}if(this.uvs.length>i){t=this.uvs;if(t.length!=i)if(t.length>i)t.splice(i,t.length-i);else for(var _=t;_.length<i;)_.push(null)}},__class__:r1,__properties__:$extend(q.prototype.__properties__,{set_texture:"set_texture",set_color:"set_color",get_color:"get_color"})}),function(){this.repeatCenter=null,this.repeatLeft=null,this.repeatBottom=null,this.repeatRight=null,this.repeatTop=null,this.quadCenter=null,this.quadLeft=null,this.quadBottom=null,this.quadRight=null,this.quadTop=null,this.tile=null,this.edgeRendering=1,this.innerRendering=1,this.renderingDirty=!0,this.sliceLeft=0,this.sliceBottom=0,this.sliceRight=0,this.sliceTop=0,q.call(this),this.createCornerQuads()}),At=((L["ceramic.NineSlice"]=Dt).__name__="ceramic.NineSlice",Dt.__super__=q,Dt.prototype=$extend(q.prototype,{sliceTop:null,set_sliceTop:function(e){return this.sliceTop!=e&&(this.sliceTop=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},sliceRight:null,set_sliceRight:function(e){return this.sliceRight!=e&&(this.sliceRight=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},sliceBottom:null,set_sliceBottom:function(e){return this.sliceBottom!=e&&(this.sliceBottom=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},sliceLeft:null,set_sliceLeft:function(e){return this.sliceLeft!=e&&(this.sliceLeft=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},_slice:function(e,n,t,i){this.set_sliceTop(e),this.set_sliceRight(n),this.set_sliceBottom(t),this.set_sliceLeft(i)},renderingDirty:null,innerRendering:null,set_innerRendering:function(e){return this.innerRendering!=e&&(this.innerRendering=e,this.renderingDirty=!0,this.contentDirty=!0,he.app.visualsContentDirty=!0),this.innerRendering},edgeRendering:null,set_edgeRendering:function(e){return this.edgeRendering!=e&&(this.edgeRendering=e,this.renderingDirty=!0,this.contentDirty=!0,he.app.visualsContentDirty=!0),this.edgeRendering},_rendering:function(e,n){this.set_innerRendering(e),this.set_edgeRendering(n)},get_texture:function(){return this.quadTopLeft._texture},set_texture:function(e){return this.quadTopLeft._texture!=e&&this._set_texture(e),e},_set_texture:function(e){null!=this.quadTop&&((n=this.quadTop)._texture!=e&&n._set_texture(e),(n=this.quadRight)._texture!=e&&n._set_texture(e),(n=this.quadBottom)._texture!=e&&n._set_texture(e),(n=this.quadLeft)._texture!=e)&&n._set_texture(e),null!=this.quadCenter&&(n=this.quadCenter)._texture!=e&&n._set_texture(e);var n=this.quadTopRight;n._texture!=e&&n._set_texture(e),(n=this.quadBottomRight)._texture!=e&&n._set_texture(e),(n=this.quadBottomLeft)._texture!=e&&n._set_texture(e),(n=this.quadTopLeft)._texture!=e&&n._set_texture(e),null!=e&&(n=e.height,this.set_width(e.width),this.set_height(n)),this.contentDirty=!0,he.app.visualsContentDirty=!0},get_rotateFrame:function(){return 32==(32&this.quadTopLeft.flags)},set_rotateFrame:function(e){return 32==(32&this.quadTopLeft.flags)!=e&&this._set_rotateFrame(e),e},_set_rotateFrame:function(e){null!=this.quadTop&&((n=this.quadTop).flags=e?32|n.flags:-33&n.flags,(n=this.quadRight).flags=e?32|n.flags:-33&n.flags,(n=this.quadBottom).flags=e?32|n.flags:-33&n.flags,(n=this.quadLeft).flags=e?32|n.flags:-33&n.flags),null!=this.quadCenter&&((n=this.quadCenter).flags=e?32|n.flags:-33&n.flags);var n=this.quadTopRight;n.flags=e?32|n.flags:-33&n.flags,(n=this.quadBottomRight).flags=e?32|n.flags:-33&n.flags,(n=this.quadBottomLeft).flags=e?32|n.flags:-33&n.flags,(n=this.quadTopLeft).flags=e?32|n.flags:-33&n.flags,this.contentDirty=!0,he.app.visualsContentDirty=!0},tile:null,set_tile:function(e){return this.tile!=e&&(this.tile=e,this._set_tile(e)),e},_set_tile:function(e){var n=null;null!=e&&(n=e.texture),this.quadTopLeft._texture!=n&&this._set_texture(n),null!=e?(32==(32&this.quadTopLeft.flags)!=e.rotateFrame&&this._set_rotateFrame(e.rotateFrame),n=e.frameHeight,this.set_width(e.frameWidth),this.set_height(n)):32==(32&this.quadTopLeft.flags)!=0&&this._set_rotateFrame(!1),this.contentDirty=!0,he.app.visualsContentDirty=!0},set_width:function(e){return this._width!=e&&(q.prototype.set_width.call(this,e),this.contentDirty=!0,he.app.visualsContentDirty=!0),e},set_height:function(e){return this._height!=e&&(q.prototype.set_height.call(this,e),this.contentDirty=!0,he.app.visualsContentDirty=!0),e},get_color:function(){return this.quadTopLeft.color},set_color:function(e){return this.quadTopLeft.color!=e&&this._set_color(e),e},_set_color:function(e){var n;return null!=this.quadTop&&(this.quadTop.color=e,this.quadRight.color=e,this.quadBottom.color=e,this.quadLeft.color=e),null!=this.quadCenter&&(this.quadCenter.color=e),null!=this.repeatTop&&((n=this.repeatTop).quads[0].color!=e&&n._set_color(e),(n=this.repeatRight).quads[0].color!=e&&n._set_color(e),(n=this.repeatBottom).quads[0].color!=e&&n._set_color(e),(n=this.repeatLeft).quads[0].color!=e)&&n._set_color(e),null!=this.repeatCenter&&(n=this.repeatCenter).quads[0].color!=e&&n._set_color(e),this.quadTopRight.color=e,this.quadBottomRight.color=e,this.quadBottomLeft.color=e,this.quadTopLeft.color=e},set_shader:function(e){return this.shader!=e&&(this.shader=e,this._set_shader(e)),e},_set_shader:function(e){return null!=this.quadTop&&(this.quadTop.set_shader(e),this.quadRight.set_shader(e),this.quadBottom.set_shader(e),this.quadLeft.set_shader(e)),null!=this.quadCenter&&this.quadCenter.set_shader(e),null!=this.repeatTop&&(this.repeatTop.set_shader(e),this.repeatRight.set_shader(e),this.repeatBottom.set_shader(e),this.repeatLeft.set_shader(e)),null!=this.repeatCenter&&this.repeatCenter.set_shader(e),this.quadTopRight.set_shader(e),this.quadBottomRight.set_shader(e),this.quadBottomLeft.set_shader(e),this.quadTopLeft.set_shader(e),e},quadTop:null,quadRight:null,quadBottom:null,quadLeft:null,quadCenter:null,repeatTop:null,repeatRight:null,repeatBottom:null,repeatLeft:null,repeatCenter:null,quadTopRight:null,quadBottomRight:null,quadBottomLeft:null,quadTopLeft:null,createCornerQuads:function(){this.quadTopRight=new r;var e=this.quadTopRight;if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(var n=0,t=e.children.length;n<t;){var i=n++;if((h=e.children[i]).visibilityDirty=!0,null!=h.children)for(var l=0,s=h.children.length;l<s;){var a=l++;h.children[a].set_visibilityDirty(!0)}}this.add(this.quadTopRight),this.quadBottomRight=new r;e=this.quadBottomRight;if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(n=0,t=e.children.length;n<t;){i=n++;if((h=e.children[i]).visibilityDirty=!0,null!=h.children)for(l=0,s=h.children.length;l<s;){a=l++;h.children[a].set_visibilityDirty(!0)}}this.add(this.quadBottomRight),this.quadBottomLeft=new r;e=this.quadBottomLeft;if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(n=0,t=e.children.length;n<t;){i=n++;if((h=e.children[i]).visibilityDirty=!0,null!=h.children)for(l=0,s=h.children.length;l<s;){a=l++;h.children[a].set_visibilityDirty(!0)}}this.add(this.quadBottomLeft),this.quadTopLeft=new r;e=this.quadTopLeft;if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(n=0,t=e.children.length;n<t;){var h,i=n++;if((h=e.children[i]).visibilityDirty=!0,null!=h.children)for(l=0,s=h.children.length;l<s;){a=l++;h.children[a].set_visibilityDirty(!0)}}this.add(this.quadTopLeft)},createCenterQuad:function(){if(null==this.quadCenter){this.quadCenter=new r;var e=this.quadCenter,n=this.quadTopLeft._texture,e=(e._texture!=n&&e._set_texture(n),this.quadCenter),n=32==(32&this.quadTopLeft.flags),e=(e.flags=n?32|e.flags:-33&e.flags,this.quadCenter.color=this.quadTopLeft.color,this.quadCenter.set_shader(this.shader),this.quadCenter);if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(var t=0,i=e.children.length;t<i;){var l=t++,s=e.children[l];if(s.visibilityDirty=!0,null!=s.children)for(var a=0,h=s.children.length;a<h;){var u=a++;s.children[u].set_visibilityDirty(!0)}}this.add(this.quadCenter)}},destroyCenterQuad:function(){null!=this.quadCenter&&(this.quadCenter.destroy(),this.quadCenter=null)},createEdgeQuads:function(){if(null==this.quadTop){this.quadTop=new r;var e=this.quadTop,n=this.quadTopLeft._texture,e=(e._texture!=n&&e._set_texture(n),this.quadTop),t=32==(32&this.quadTopLeft.flags),e=(e.flags=t?32|e.flags:-33&e.flags,this.quadTop.color=this.quadTopLeft.color,this.quadTop.set_shader(this.shader),this.quadTop);if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(var i=0,l=e.children.length;i<l;){var s=i++;if((c=e.children[s]).visibilityDirty=!0,null!=c.children)for(var a=0,h=c.children.length;a<h;){var u=a++;c.children[u].set_visibilityDirty(!0)}}this.add(this.quadTop)}if(null==this.quadRight){this.quadRight=new r;e=this.quadRight,n=this.quadTopLeft._texture,e=(e._texture!=n&&e._set_texture(n),this.quadRight),t=32==(32&this.quadTopLeft.flags),e=(e.flags=t?32|e.flags:-33&e.flags,this.quadRight.color=this.quadTopLeft.color,this.quadRight.set_shader(this.shader),this.quadRight);if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(i=0,l=e.children.length;i<l;){s=i++;if((c=e.children[s]).visibilityDirty=!0,null!=c.children)for(a=0,h=c.children.length;a<h;){u=a++;c.children[u].set_visibilityDirty(!0)}}this.add(this.quadRight)}if(null==this.quadBottom){this.quadBottom=new r;e=this.quadBottom,n=this.quadTopLeft._texture,e=(e._texture!=n&&e._set_texture(n),this.quadBottom),t=32==(32&this.quadTopLeft.flags),e=(e.flags=t?32|e.flags:-33&e.flags,this.quadBottom.color=this.quadTopLeft.color,this.quadBottom.set_shader(this.shader),this.quadBottom);if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(i=0,l=e.children.length;i<l;){s=i++;if((c=e.children[s]).visibilityDirty=!0,null!=c.children)for(a=0,h=c.children.length;a<h;){u=a++;c.children[u].set_visibilityDirty(!0)}}this.add(this.quadBottom)}if(null==this.quadLeft){this.quadLeft=new r;e=this.quadLeft,n=this.quadTopLeft._texture,e=(e._texture!=n&&e._set_texture(n),this.quadLeft),t=32==(32&this.quadTopLeft.flags),e=(e.flags=t?32|e.flags:-33&e.flags,this.quadLeft.color=this.quadTopLeft.color,this.quadLeft.set_shader(this.shader),this.quadLeft);if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(i=0,l=e.children.length;i<l;){var c,s=i++;if((c=e.children[s]).visibilityDirty=!0,null!=c.children)for(a=0,h=c.children.length;a<h;){u=a++;c.children[u].set_visibilityDirty(!0)}}this.add(this.quadLeft)}},destroyEdgeQuads:function(){null!=this.quadTop&&(this.quadTop.destroy(),this.quadTop=null),null!=this.quadRight&&(this.quadRight.destroy(),this.quadRight=null),null!=this.quadBottom&&(this.quadBottom.destroy(),this.quadBottom=null),null!=this.quadLeft&&(this.quadLeft.destroy(),this.quadLeft=null)},createCenterRepeat:function(e){if(null==this.repeatCenter){this.repeatCenter=new Bt;var n=this.repeatCenter;if(1!=n.inheritAlpha&&(n.inheritAlpha=!0,n.visibilityDirty=!0,null!=n.children))for(var t=0,i=n.children.length;t<i;){var l=t++,s=n.children[l];if(s.visibilityDirty=!0,null!=s.children)for(var r=0,a=s.children.length;r<a;){var h=r++;s.children[h].set_visibilityDirty(!0)}}e=3==e;this.repeatCenter._mirror(e,e),this.add(this.repeatCenter)}},destroyCenterRepeat:function(){null!=this.repeatCenter&&(this.repeatCenter.destroy(),this.repeatCenter=null)},createEdgeRepeats:function(e){if(null==this.repeatTop){this.repeatTop=new Bt;var n=this.repeatTop;if(1!=n.inheritAlpha&&(n.inheritAlpha=!0,n.visibilityDirty=!0,null!=n.children))for(var t=0,i=n.children.length;t<i;){var l=t++;if((u=n.children[l]).visibilityDirty=!0,null!=u.children)for(var s=0,r=u.children.length;s<r;){var a=s++;u.children[a].set_visibilityDirty(!0)}}var h=3==e;this.repeatTop._mirror(h,h),this.add(this.repeatTop)}if(null==this.repeatRight){this.repeatRight=new Bt;n=this.repeatRight;if(1!=n.inheritAlpha&&(n.inheritAlpha=!0,n.visibilityDirty=!0,null!=n.children))for(t=0,i=n.children.length;t<i;){l=t++;if((u=n.children[l]).visibilityDirty=!0,null!=u.children)for(s=0,r=u.children.length;s<r;){a=s++;u.children[a].set_visibilityDirty(!0)}}h=3==e;this.repeatRight._mirror(h,h),this.add(this.repeatRight)}if(null==this.repeatBottom){this.repeatBottom=new Bt;n=this.repeatBottom;if(1!=n.inheritAlpha&&(n.inheritAlpha=!0,n.visibilityDirty=!0,null!=n.children))for(t=0,i=n.children.length;t<i;){l=t++;if((u=n.children[l]).visibilityDirty=!0,null!=u.children)for(s=0,r=u.children.length;s<r;){a=s++;u.children[a].set_visibilityDirty(!0)}}h=3==e;this.repeatBottom._mirror(h,h),this.add(this.repeatBottom)}if(null==this.repeatLeft){this.repeatLeft=new Bt;n=this.repeatLeft;if(1!=n.inheritAlpha&&(n.inheritAlpha=!0,n.visibilityDirty=!0,null!=n.children))for(t=0,i=n.children.length;t<i;){var u,l=t++;if((u=n.children[l]).visibilityDirty=!0,null!=u.children)for(s=0,r=u.children.length;s<r;){a=s++;u.children[a].set_visibilityDirty(!0)}}h=3==e;this.repeatLeft._mirror(h,h),this.add(this.repeatLeft)}},destroyEdgeRepeats:function(){null!=this.repeatTop&&(this.repeatTop.destroy(),this.repeatTop=null),null!=this.repeatRight&&(this.repeatRight.destroy(),this.repeatRight=null),null!=this.repeatBottom&&(this.repeatBottom.destroy(),this.repeatBottom=null),null!=this.repeatLeft&&(this.repeatLeft.destroy(),this.repeatLeft=null)},syncQuadsAndRepeats:function(){switch(this.edgeRendering){case 0:this.destroyEdgeQuads(),this.destroyEdgeRepeats();break;case 1:this.createEdgeQuads(),this.destroyEdgeRepeats();break;case 2:case 3:this.destroyEdgeQuads(),this.createEdgeRepeats(this.edgeRendering)}switch(this.innerRendering){case 0:this.destroyCenterQuad(),this.destroyCenterRepeat();break;case 1:this.createCenterQuad(),this.destroyCenterRepeat();break;case 2:case 3:this.destroyCenterQuad(),this.createCenterRepeat(this.edgeRendering)}},updateRepeatTile:function(e,n,t,i,l,s,r,a,h,u,c){var o,_=e.tile;return t&&(o=a,a=i+h-l,h=l+s-o+i-u),null==_?(_=new ai(n,a,h,u,c,t),e.tile!=_&&(e.tile=_,e._set_tile(_))):(l=!1,_.texture!=n&&(l=!0,_.texture=n),_.frameX!=a&&(l=!0,_.frameX=a),_.frameY!=h&&(l=!0,_.frameY=h),_.frameWidth!=u&&(l=!0,_.frameWidth=u),_.frameHeight!=c&&(l=!0,_.frameHeight=c),_.rotateFrame!=t&&(l=!0,_.rotateFrame=t),l&&(null!=e.tile&&(e.tile=null,e._set_tile(null)),e.tile!=_)&&(e.tile=_,e._set_tile(_))),_},computeContent:function(){this.renderingDirty&&this.syncQuadsAndRepeats();var e,n=this._width,t=this._height;if(n<this.sliceLeft+this.sliceRight||t<this.sliceTop+this.sliceBottom)null!=this.quadTop&&(this.quadTop.set_active(!1),this.quadRight.set_active(!1),this.quadBottom.set_active(!1),this.quadLeft.set_active(!1)),null!=this.quadCenter&&this.quadCenter.set_active(!1),null!=this.repeatTop&&(this.repeatTop.set_active(!1),this.repeatRight.set_active(!1),this.repeatBottom.set_active(!1),this.repeatLeft.set_active(!1)),null!=this.repeatCenter&&this.repeatCenter.set_active(!1),this.quadTopRight.set_active(!1),this.quadBottomRight.set_active(!1),this.quadBottomLeft.set_active(!1),this.quadTopLeft.set_active(!1);else{null!=this.quadTop&&(this.quadTop.set_active(!0),this.quadRight.set_active(!0),this.quadBottom.set_active(!0),this.quadLeft.set_active(!0)),null!=this.quadCenter&&this.quadCenter.set_active(!0),null!=this.repeatTop&&(this.repeatTop.set_active(!0),this.repeatRight.set_active(!0),this.repeatBottom.set_active(!0),this.repeatLeft.set_active(!0)),null!=this.repeatCenter&&this.repeatCenter.set_active(!0),this.quadTopRight.set_active(!0),this.quadBottomRight.set_active(!0),this.quadBottomLeft.set_active(!0),this.quadTopLeft.set_active(!0);{var i,l,s=this.sliceTop,r=this.sliceRight,a=this.sliceBottom,h=this.sliceLeft,u=this.quadTopLeft._texture,c=this.tile,o=32==(32&this.quadTopLeft.flags),_=0,d=0,b=0,g=0,O=(null!=c?(b=c.frameWidth,g=c.frameHeight,_=c.frameX,d=c.frameY):null!=u&&(b=u.width,g=u.height),null!=this.quadTop&&(i=b-h-r,(O=this.quadTop).frameX=_+h,O.frameY=d,O.frameWidth!=i&&-1!=(O.frameWidth=i)&&O.set_width(i),O.frameHeight!=s&&-1!=(O.frameHeight=s)&&O.set_height(s),l=g-s-a,(O=this.quadRight).frameX=_+b-r,O.frameY=d+s,O.frameWidth!=r&&-1!=(O.frameWidth=r)&&O.set_width(r),O.frameHeight!=l&&-1!=(O.frameHeight=l)&&O.set_height(l),i=b-h-r,(O=this.quadBottom).frameX=_+h,O.frameY=d+g-a,O.frameWidth!=i&&-1!=(O.frameWidth=i)&&O.set_width(i),O.frameHeight!=a&&-1!=(O.frameHeight=a)&&O.set_height(a),l=g-s-a,(O=this.quadLeft).frameX=_,O.frameY=d+s,O.frameWidth!=h&&-1!=(O.frameWidth=h)&&O.set_width(h),O.frameHeight!=l)&&-1!=(O.frameHeight=l)&&O.set_height(l),null!=this.quadCenter&&(i=b-h-r,l=g-s-a,(O=this.quadCenter).frameX=_+h,O.frameY=d+s,O.frameWidth!=i&&-1!=(O.frameWidth=i)&&O.set_width(i),O.frameHeight!=l)&&-1!=(O.frameHeight=l)&&O.set_height(l),null!=this.repeatTop&&(this.updateRepeatTile(this.repeatTop,u,o,_,d,b,g,_+h,d,b-h-r,s),this.updateRepeatTile(this.repeatRight,u,o,_,d,b,g,_+b-r,d+s,r,g-s-a),this.updateRepeatTile(this.repeatBottom,u,o,_,d,b,g,_+h,d+g-a,b-h-r,a),this.updateRepeatTile(this.repeatLeft,u,o,_,d,b,g,_,d+s,h,g-s-a)),null!=this.repeatCenter&&this.updateRepeatTile(this.repeatCenter,u,o,_,d,b,g,_+h,d+s,b-h-r,g-s-a),this.quadTopRight);O.frameX=_+b-r,O.frameY=d,O.frameWidth!=r&&-1!=(O.frameWidth=r)&&O.set_width(r),O.frameHeight!=s&&-1!=(O.frameHeight=s)&&O.set_height(s)}(O=this.quadBottomRight).frameX=_+b-r,O.frameY=d+g-a,O.frameWidth!=r&&-1!=(O.frameWidth=r)&&O.set_width(r),O.frameHeight!=a&&-1!=(O.frameHeight=a)&&O.set_height(a),(O=this.quadBottomLeft).frameX=_,O.frameY=d+g-a,O.frameWidth!=h&&-1!=(O.frameWidth=h)&&O.set_width(h),O.frameHeight!=a&&-1!=(O.frameHeight=a)&&O.set_height(a),(O=this.quadTopLeft).frameX=_,O.frameY=d,O.frameWidth!=h&&-1!=(O.frameWidth=h)&&O.set_width(h),O.frameHeight!=s&&-1!=(O.frameHeight=s)&&O.set_height(s),o&&(null!=(c=this.quadTop)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadTopRight)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadRight)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadBottomRight)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadBottom)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadBottomLeft)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadLeft)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadTopLeft)&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=(c=this.quadCenter))&&(e=c.frameX,c.frameX=_+c.frameY-d,c.frameY=d+b-e+_-c.frameWidth),null!=this.quadTop&&((O=this.quadTop).set_x(h),O.set_y(0),(O=this.quadTop).set_width(n-h-r),O.set_height(s),(O=this.quadRight).set_x(n-r),O.set_y(s),(O=this.quadRight).set_width(r),O.set_height(t-s-a),(O=this.quadBottom).set_x(h),O.set_y(t-a),(O=this.quadBottom).set_width(n-h-r),O.set_height(a),(O=this.quadLeft).set_x(0),O.set_y(s),(O=this.quadLeft).set_width(h),O.set_height(t-s-a)),null!=this.quadCenter&&((O=this.quadCenter).set_x(h),O.set_y(s),(O=this.quadCenter).set_width(n-h-r),O.set_height(t-s-a)),null!=this.repeatTop&&((O=this.repeatTop).set_x(h),O.set_y(0),(O=this.repeatTop).set_width(n-h-r),O.set_height(s),(O=this.repeatRight).set_x(n-r),O.set_y(s),(O=this.repeatRight).set_width(r),O.set_height(t-s-a),(O=this.repeatBottom).set_x(h),O.set_y(t-a),(O=this.repeatBottom).set_width(n-h-r),O.set_height(a),(O=this.repeatLeft).set_x(0),O.set_y(s),(O=this.repeatLeft).set_width(h),O.set_height(t-s-a)),null!=this.repeatCenter&&((O=this.repeatCenter).set_x(h),O.set_y(s),(O=this.repeatCenter).set_width(n-h-r),O.set_height(t-s-a)),(O=this.quadTopRight).set_x(n-r),O.set_y(0),(O=this.quadTopRight).set_width(r),O.set_height(s),(O=this.quadBottomRight).set_x(n-r),O.set_y(t-a),(O=this.quadBottomRight).set_width(r),O.set_height(a),(O=this.quadBottomLeft).set_x(0),O.set_y(t-a),(O=this.quadBottomLeft).set_width(h),O.set_height(a),(O=this.quadTopLeft).set_x(0),O.set_y(0),(O=this.quadTopLeft).set_width(h),O.set_height(s)}this.contentDirty=!1},__class__:Dt,__properties__:$extend(q.prototype.__properties__,{set_color:"set_color",get_color:"get_color",set_tile:"set_tile",set_rotateFrame:"set_rotateFrame",get_rotateFrame:"get_rotateFrame",set_texture:"set_texture",get_texture:"get_texture",set_edgeRendering:"set_edgeRendering",set_innerRendering:"set_innerRendering",set_sliceLeft:"set_sliceLeft",set_sliceBottom:"set_sliceBottom",set_sliceRight:"set_sliceRight",set_sliceTop:"set_sliceTop"})}),function(e){switch(e){case".":case"..":return this.dir=e,void(this.file="")}var n=e.lastIndexOf("/"),t=e.lastIndexOf("\\"),t=(n<t?(this.dir=h.substr(e,0,t),e=h.substr(e,t+1,null),this.backslash=!0):t<n?(this.dir=h.substr(e,0,n),e=h.substr(e,n+1,null)):this.dir=null,e.lastIndexOf("."));-1!=t?(this.ext=h.substr(e,t+1,null),this.file=h.substr(e,0,t)):(this.ext=null,this.file=e)}),St=((L["ceramic.Path"]=At).__name__="ceramic.Path",At.withoutExtension=function(e){e=new At(e);return e.ext=null,e.toString()},At.withoutDirectory=function(e){e=new At(e);return e.dir=null,e.toString()},At.directory=function(e){e=new At(e);return null==e.dir?"":e.dir},At.extension=function(e){e=new At(e);return null==e.ext?"":e.ext},At.withExtension=function(e,n){e=new At(e);return e.ext=n,e.toString()},At.join=function(e){for(var n=[],t=0,i=e;t<i.length;){var l=i[t];++t,null!=l&&""!=l&&n.push(l)}if(0==(e=n).length)return"";for(var s=e[0],n=1,t=e.length;n<t;){var r=n++,s=At.addTrailingSlash(s);s+=e[r]}return At.normalize(s)},At.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var n=[],t=0,i=e.split("/");t<i.length;){var l=i[t];++t,".."==l&&0<n.length&&".."!=n[n.length-1]?n.pop():"."!=l&&n.push(l)}for(var s,r=n.join("/");-1!=(s=r.indexOf("//"));)r=r.substring(0,s)+r.substring(s+1);for(var a="",h=!1,u=!1,t=0,i=r.length;t<i;){var c=t++,o=r.charCodeAt(c);switch(o){case 47:h?(h=!1,u&&(a+="/",u=!1),a+=String.fromCodePoint(o)):u=!0;break;case 58:a+=":",h=!0;break;default:h=!1,u&&(a+="/",u=!1),a+=String.fromCodePoint(o)}}return a},At.addTrailingSlash=function(e){var n,t;return 0==e.length?"/":(n=e.lastIndexOf("/"))<(t=e.lastIndexOf("\\"))?t!=e.length-1?e+"\\":e:n!=e.length-1?e+"/":e},At.removeTrailingSlashes=function(e){e:for(;;){var n=h.cca(e,e.length-1);if(null==n)break;switch(n){case 47:case 92:e=h.substr(e,0,-1);break;default:break e}}return e},At.isAbsolute=function(e){return!!B.startsWith(e,"/")||":"==e.charAt(1)||!!B.startsWith(e,"\\\\")},At.prototype={dir:null,file:null,ext:null,backslash:null,toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:At},function(n){this.id=n;var e=he.app.backend.io.readString("persistent_"+n);if(null!=e)try{var t=new El(e);this.internalData=t.unserialize()}catch(e){Al.lastError=e,he.app.logger.warning("Failed to read persistent data with id "+n,{fileName:"../../../../ceramic/runtime/src/ceramic/PersistentData.hx",lineNumber:22,className:"ceramic.PersistentData",methodName:"new"})}null==this.internalData&&(this.internalData={})}),Et=((L["ceramic.PersistentData"]=St).__name__="ceramic.PersistentData",St.prototype={internalData:null,id:null,get:function(e){return this.internalData[e]},set:function(e,n){this.internalData[e]=n},remove:function(e){N.deleteField(this.internalData,e)},clear:function(){for(var e=0,n=N.fields(this.internalData);e<n.length;){var t=n[e];++e,N.deleteField(this.internalData,t)}},exists:function(e){return Object.prototype.hasOwnProperty.call(this.internalData,e)},keys:function(){return N.fields(this.internalData)},save:function(){var e=new Sl,e=(e.serialize(this.internalData),e.toString());he.app.backend.io.saveString("persistent_"+this.id,e)},__class__:St},function(){this.glowThresholdMax=.85,this.glowThresholdMin=.6,this.glowStrength=0,this.verticalMaskIntensity=0,this.verticalMaskOffset=0,this.verticalMaskCount=0,this.scanlineShape=1,this.scanlineIntensity=.25,this.scanlineOffset=0,this.scanlineCount=0,this.gridAlpha=0,this.gridColor=0,this.gridThickness=0,this.chromaticAberration=0,this.sharpness=8,Un.call(this),this.set_density(1),this.set_shader(he.app.assets.shader("shader:pixelArt").clone());he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("sharpness",this.sharpness),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("chromaticAberration",.01*this.chromaticAberration),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("gridThickness",0),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("gridAlpha",1),he.app.backend.shaders,this.shader.backendItem.uniforms.setVector3("gridColor",0,0,0),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineCount",this.scanlineCount),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineIntensity",1-this.scanlineIntensity),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineOffset",this.scanlineOffset),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineShape",this.scanlineShape),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("verticalMaskCount",this.verticalMaskCount),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("verticalMaskIntensity",1-this.verticalMaskIntensity),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("verticalMaskOffset",this.verticalMaskOffset),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("glowStrength",this.glowStrength),he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("glowThresholdMin",this.glowThresholdMin),he.app.backend.shaders;this.shader.backendItem.uniforms.setFloat("glowThresholdMax",this.glowThresholdMax),this.onResize(this,$bind(this,this.handleResize))}),Mt=((L["ceramic.PixelArt"]=Et).__name__="ceramic.PixelArt",Et.__super__=Un,Et.prototype=$extend(Un.prototype,{sharpness:null,set_sharpness:function(e){return this.sharpness!=e&&(this.sharpness=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("sharpness",e)),e},chromaticAberration:null,set_chromaticAberration:function(e){return this.chromaticAberration!=e&&(this.chromaticAberration=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("chromaticAberration",.01*e)),e},gridThickness:null,set_gridThickness:function(e){return this.gridThickness!=e&&(this.gridThickness=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("gridThickness",e)),e},gridColor:null,set_gridColor:function(e){return this.gridColor!=e&&(this.gridColor=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setVector3("gridColor",(e>>16&255)/255,(e>>8&255)/255,(255&e)/255)),e},gridAlpha:null,set_gridAlpha:function(e){return this.gridAlpha!=e&&(this.gridAlpha=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("gridAlpha",e)),e},scanlineCount:null,set_scanlineCount:function(e){return this.scanlineCount!=e&&(this.scanlineCount=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineCount",e)),e},scanlineOffset:null,set_scanlineOffset:function(e){return this.scanlineOffset!=e&&(this.scanlineOffset=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineOffset",e)),e},scanlineIntensity:null,set_scanlineIntensity:function(e){return this.scanlineIntensity!=e&&(this.scanlineIntensity=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineIntensity",1-e)),e},scanlineShape:null,set_scanlineShape:function(e){return this.scanlineShape!=e&&(this.scanlineShape=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("scanlineShape",e)),e},verticalMaskCount:null,set_verticalMaskCount:function(e){return this.verticalMaskCount!=e&&(this.verticalMaskCount=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("verticalMaskCount",e)),e},verticalMaskOffset:null,set_verticalMaskOffset:function(e){return this.verticalMaskOffset!=e&&(this.verticalMaskOffset=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("verticalMaskOffset",e)),e},verticalMaskIntensity:null,set_verticalMaskIntensity:function(e){return this.verticalMaskIntensity!=e&&(this.verticalMaskIntensity=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("verticalMaskIntensity",1-e)),e},glowStrength:null,set_glowStrength:function(e){return this.glowStrength!=e&&(this.glowStrength=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("glowStrength",e)),e},glowThresholdMin:null,set_glowThresholdMin:function(e){return this.glowThresholdMin!=e&&(this.glowThresholdMin=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("glowThresholdMin",e)),e},glowThresholdMax:null,set_glowThresholdMax:function(e){return this.glowThresholdMax!=e&&(this.glowThresholdMax=e,he.app.backend.shaders,this.shader.backendItem.uniforms.setFloat("glowThresholdMax",e)),e},set_density:function(e){return this.density!=e&&(Un.prototype.set_density.call(this,e),this.updateResolution()),e},handleResize:function(e,n){this.updateResolution()},updateResolution:function(){var e,n,t;0<this.get_width()&&0<this.get_height()&&null!=this.shader&&(e=this.shader,n=this.get_width()*this.density,t=this.get_height()*this.density,he.app.backend.shaders,e.backendItem.uniforms.setVector2("resolution",n,t))},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.shader&&(this.shader.destroy(),this.set_shader(null)),this._lifecycleState=-1,Un.prototype.destroy.call(this))},__class__:Et,__properties__:$extend(Un.prototype.__properties__,{set_glowThresholdMax:"set_glowThresholdMax",set_glowThresholdMin:"set_glowThresholdMin",set_glowStrength:"set_glowStrength",set_verticalMaskIntensity:"set_verticalMaskIntensity",set_verticalMaskOffset:"set_verticalMaskOffset",set_verticalMaskCount:"set_verticalMaskCount",set_scanlineShape:"set_scanlineShape",set_scanlineIntensity:"set_scanlineIntensity",set_scanlineOffset:"set_scanlineOffset",set_scanlineCount:"set_scanlineCount",set_gridAlpha:"set_gridAlpha",set_gridColor:"set_gridColor",set_gridThickness:"set_gridThickness",set_chromaticAberration:"set_chromaticAberration",set_sharpness:"set_sharpness"})}),function(){}),kt=((L["ceramic.Pixels"]=Mt).__name__="ceramic.Pixels",Mt.copy=function(e,n,t,i,l,s,r,a,h,u,c,o,_,d){null==d&&(d=!0),null==_&&(_=!0),null==o&&(o=!0),null==c&&(c=!0);for(var b=l+r,g=s+a,O=l,f=s,p=h,m=u;f<g;){for(var w=f*n,v=m*i;O<b;){var y=4*(w+O),C=4*(v+p);c&&(t[C]=e[y]),++y,++C,o&&(t[C]=e[y]),++y,++C,_&&(t[C]=e[y]),++y,++C,d&&(t[C]=e[y]),++O,++p}++f,++m,O=l,p=h}},Mt.create=function(e,n,t){for(var i=new Uint8Array(e*n*4),l=0,s=e*n;l<s;){var r=4*l++;i[r]=t>>16&255,i[++r]=t>>8&255,i[++r]=255&t,i[++r]=t>>24&255}return i},Mt.fromBytes=function(e){return new Uint8Array(e.b.bufferValue)},Mt.get=function(e,n,t,i){var i=4*(i*n+t),n=e[i],t=e[1+i],l=e[2+i],s=0,e=e[3+i],i=(0|(((s&65535|(255<n?255:n<0?0:n)<<16)&16711935|(255<t?255:t<0?0:t)<<8)&16776960|(255<l?255:l<0?0:l)))-16777216;return i&16777215|(255<(e=null==e?255:e)?255:e<0?0:e)<<24},Mt.set=function(e,n,t,i,l){i=4*(i*n+t);e[i]=l>>16&255,e[1+i]=l>>8&255,e[2+i]=255&l,e[3+i]=l>>24&255},Mt.setRectangle=function(e,n,t,i,l,s,r){for(var a=0,h=l;a<h;)for(var u=a++,c=0,o=s;c<o;){var _=4*((i+c++)*n+(t+u));e[_]=r>>16&255,e[1+_]=r>>8&255,e[2+_]=255&r,e[3+_]=r>>24&255}},Mt._pixelsToPng=function(e,n,t,i,l){he.app.backend.textures.pixelsToPng(e,n,t,i,l)},Mt.rgbaPixelsToRgbPixels=function(e,n,t,i){for(var l=e*n*3,s=(null==i?i=new Uint8Array(l):i.length!=l&&(he.app.logger.warning("Not reusing outPixels because its length ("+i.length+") does not match the required one: "+l+". Creating a new buffer.",{fileName:"../../../../ceramic/runtime/src/ceramic/Pixels.hx",lineNumber:240,className:"ceramic.Pixels",methodName:"rgbaPixelsToRgbPixels"}),i=new Uint8Array(l)),0),r=e*n;s<r;){var a=s++,h=3*a,a=4*a;i[h]=t[a],++a,i[++h]=t[a],++a,i[++h]=t[a]}return i},Mt.rgbPixelsToRgbaPixels=function(e,n,t,i,l){null==t&&(t=255);for(var s=e*n*4,r=(null==l?l=new Uint8Array(s):l.length!=s&&(he.app.logger.warning("Not reusing outPixels because its length ("+l.length+") does not match the required one: "+s+". Creating a new buffer.",{fileName:"../../../../ceramic/runtime/src/ceramic/Pixels.hx",lineNumber:275,className:"ceramic.Pixels",methodName:"rgbPixelsToRgbaPixels"}),l=new Uint8Array(s)),0),a=e*n;r<a;){var h=r++,u=3*h,h=4*h;l[h]=i[u],++u,l[++h]=i[u],++u,l[++h]=i[u],l[++h]=t}return l},Mt.mixPixelsBuffers=function(e,n,t){null==n&&(n=1);for(var i=e.length,l=e[0].length,s=(null==t&&(t=new Uint8Array(l)),0),r=[],a=1,h=0,u=Math.ceil(.5*i);h<u;)s+=r[h]=a,a*=n,++h;for(h=i-1,a=1;u<=h;)s+=r[h]=a,a*=n,--h;for(var c=0,o=l;c<o;){for(var h=c++,_=0,d=0,b=i;d<b;){var g=d++;_+=e[g][h]*r[g]}t[h]=Math.round(_/s)}return t},Mt.flipY=function(e,n){for(var t=e.length/(4*n)|0,i=0,l=.5*t|0;i<l;)for(var s=i++,r=0,a=n;r<a;){var h,u=r++,c=e[h=4*(s*n+u)],o=e[1+h],_=e[2+h],d=e[3+h];e[h]=e[u=4*((t-1-s)*n+u)],e[1+h]=e[1+u],e[2+h]=e[2+u],e[3+h]=e[3+u],e[u]=c,e[1+u]=o,e[2+u]=_,e[3+u]=d}},Mt.flipX=function(e,n){for(var t=.5*n|0,i=0,l=e.length/(4*n)|0;i<l;)for(var s=i++,r=0,a=t;r<a;){var h,u=r++,c=e[h=4*(s*n+u)],o=e[1+h],_=e[2+h],d=e[3+h];e[h]=e[u=4*(s*n+n-1-u)],e[1+h]=e[1+u],e[2+h]=e[2+u],e[3+h]=e[3+u],e[u]=c,e[1+u]=o,e[2+u]=_,e[3+u]=d}},function(){}),It=((L["ceramic.Platform"]=kt).__name__="ceramic.Platform",kt.postAppInit=function(){},kt.readStringFromAsset=function(e){return null},kt.readBytesFromAsset=function(e){return null},kt.getAssetsPath=function(){return null},kt.getRtti=function(e){return cs.getRtti(e)},kt.nodeRequire=function(e){return null},kt.quit=function(){C.app.shutdown()},kt.runCeramic=function(e,n){var t=kt.getEnv("CERAMIC_CLI");null==t&&(t=kt.isWindows()?"ceramic.exe":"ceramic"),he.app.logger.debug("ceramic "+e.join(" "),{fileName:"../../../../ceramic/runtime/src/ceramic/Platform.hx",lineNumber:329,className:"ceramic.Platform",methodName:"runCeramic"}),kt.exec(t,e,n)},kt.getEnv=function(e){return null},kt.isWindows=function(){return!1},kt.exec=function(e,n,t){kt.exec__execDidLogError||(kt.exec__execDidLogError=!0,he.app.logger.error("exec() is not supported on this platform!",{fileName:"../../../../ceramic/runtime/src/ceramic/Platform.hx",lineNumber:455,className:"ceramic.Platform",methodName:"exec"})),t(-1,null,null)},function(){}),Rt=((L["ceramic.PremultiplyAlpha"]=It).__name__="ceramic.PremultiplyAlpha",It.premultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],l=e[t+1],s=e[t+2],r=e[t+3]/255;e[t]=i*r|0,e[t+1]=l*r|0,e[t+2]=s*r|0,t+=4}},It.reversePremultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],l=e[t+1],s=e[t+2],r=e[t+3]/255;0<r&&(e[t]=i/r|0,e[t+1]=l/r|0,e[t+2]=s/r|0),t+=4}},function(e,n){null==n&&(n=-1),this.asset=null,this.wrapT=0,this.wrapS=0,this.filter=ui.LINEAR,this.asRenderTexture=null,this.isRenderTexture=!1,this.index=Rt._nextIndex++,l.call(this),-1==n&&(n=he.app.screen.get_texturesDensity()),this.backendItem=e,this.set_density(n)}),Ft=((L["ceramic.Texture"]=Rt).__name__="ceramic.Texture",Rt.fromPixels=function(e,n,t,i){null==i&&(i=1);e=he.app.backend.textures.createTexture(Math.round(e*i),Math.round(n*i),t);return new Rt(e,i)},Rt.fromBytes=function(e,n,t,i){null==n&&(n=1),he.app.backend.textures.loadFromBytes(e,Ei.imageTypeFromBytes(e),t,function(e){i(new Rt(e,n))})},Rt.__super__=l,Rt.prototype=$extend(l.prototype,{index:null,isRenderTexture:null,asRenderTexture:null,get_textureId:function(){return this.backendItem.textureId},get_nativeWidth:function(){return this.backendItem.width},get_nativeHeight:function(){return this.backendItem.height},get_nativeWidthActual:function(){return this.backendItem.widthActual},get_nativeHeightActual:function(){return this.backendItem.heightActual},width:null,height:null,density:null,set_density:function(e){return this.density!=e&&(this.density=e,this.width=this.backendItem.width/e,this.height=this.backendItem.height/e),e},filter:null,set_filter:function(e){if(this.filter!=e){this.filter=e;he.app.backend.textures;var n=this.backendItem;switch(e._hx_index){case 0:n.set_filterMin(9729),n.set_filterMag(9729);break;case 1:n.set_filterMin(9728),n.set_filterMag(9728)}}return e},wrapS:null,set_wrapS:function(e){if(this.wrapS!=e){this.wrapS=e;he.app.backend.textures;var n=this.backendItem;switch(e){case 0:n.set_wrapS(33071);break;case 1:n.set_wrapS(10497);break;case 2:n.set_wrapS(33648)}}return e},wrapT:null,set_wrapT:function(e){if(this.wrapT!=e){this.wrapT=e;he.app.backend.textures;var n=this.backendItem;switch(e){case 0:n.set_wrapT(33071);break;case 1:n.set_wrapT(10497);break;case 2:n.set_wrapT(33648)}}return e},setWrap:function(e,n){this.set_wrapS(e),null!=n&&this.set_wrapT(n)},backendItem:null,asset:null,destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),he.app.backend.textures.destroyTexture(this.backendItem),this.backendItem=null)},fetchPixels:function(e){return he.app.backend.textures.fetchTexturePixels(this.backendItem,e)},submitPixels:function(e){he.app.backend.textures.submitTexturePixels(this.backendItem,e)},_toPng:function(e,n,t){he.app.backend.textures.textureToPng(this.backendItem,n=null==n?!0:n,e,t)},toString:function(){var e;return null!=this.id?(e=this.id,"Texture("+(e=B.startsWith(e,"texture:")?h.substr(e,8,null):e)+" "+this.width+" "+this.height+" "+this.density+" #"+this.index+")"):"Texture("+this.width+" "+this.height+" "+this.density+" #"+this.index+")"},__class__:Rt,__properties__:$extend(l.prototype.__properties__,{set_wrapT:"set_wrapT",set_wrapS:"set_wrapS",set_filter:"set_filter",set_density:"set_density",get_nativeHeightActual:"get_nativeHeightActual",get_nativeWidthActual:"get_nativeWidthActual",get_nativeHeight:"get_nativeHeight",get_nativeWidth:"get_nativeWidth",get_textureId:"get_textureId"})}),function(e,n,t,i,l,s){null==s&&(s=0),null==l&&(l=!0),null==i&&(i=!0),null==t&&(t=-1),this._initialClearQuad=null,this._renderedOnce=!1,this._usedInRendering=!1,this.incomingEdges=0,this.priority=0,this.dependingTextures=null,this.antialiasing=0,this.stencil=!0,this.depth=!0,this.renderDirty=!1,this.clearOnRender=!0,this.autoRender=!0,-1==t&&(t=he.app.screen.get_texturesDensity()),this.depth=i,this.stencil=l,this.antialiasing=s;var a=he.app.backend.textures,e=Math.round(e*t),n=Math.round(n*t),h="render:"+a.nextRenderIndex++,u=C.app.runtime.webglVersion,c=new Yi,e=(c.id=h,c.width=e,c.height=n,c.depth=i,c.stencil=l,c.antialiasing=2<=u?s:0,c.init(),a.loadedTexturesRetainCount.h[h]=1,c);Rt.call(this,e,t),this.isRenderTexture=!0,this.asRenderTexture=this,he.app.renderTextures.push(this),this._initialClearQuad=new r,(a=this._initialClearQuad).set_x(0),a.set_y(0),(a=this._initialClearQuad).set_width(0),a.set_height(0),(a=this._initialClearQuad).flags&=-17,this._initialClearQuad.set_renderTarget(this),this.renderDirty=!0}),Pt=((L["ceramic.RenderTexture"]=Ft).__name__="ceramic.RenderTexture",Ft.__super__=Rt,Ft.prototype=$extend(Rt.prototype,{autoRender:null,clearOnRender:null,renderDirty:null,depth:null,stencil:null,antialiasing:null,dependingTextures:null,priority:null,incomingEdges:null,_usedInRendering:null,_renderedOnce:null,set__renderedOnce:function(e){return(this._renderedOnce=e)&&null!=this._initialClearQuad&&(this._initialClearQuad.destroy(),this._initialClearQuad=null),e},_initialClearQuad:null,destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,Rt.prototype.destroy.call(this),null!=this._initialClearQuad&&(this._initialClearQuad.destroy(),this._initialClearQuad=null),h.remove(he.app.renderTextures,this))},stamp:function(e,n){this._stamp(e,n)},_stamp:function(n,t){var i=this,l=n.parent,s=n.renderTarget,r=n.visible;null!=l&&l.remove(n),n.set_renderTarget(this),n.set_visible(!0),he.app.oncePreUpdate(this,function(e){i.renderDirty=!0,he.app.onceFinishDraw(i,function(){n.set_visible(r),n.set_renderTarget(s),null!=l&&(l.add(n),l=null),s=n=null,t(),t=null})})},clear:function(e,n,t,i,l,s,a){var h;null==s&&(s=-1),null==l&&(l=-1),null==i&&(i=-1),null==t&&(t=-1),null==n&&(n=0),null==e&&(e=16777215),null==Ft._clearQuad&&(Ft._clearQuad=new r,Ft._clearQuad.set_active(!1),Ft._clearQuad.set_blending(4),(h=Ft._clearQuad).set_anchorX(0),h.set_anchorY(0)),Ft._clearQuad.color=e,Ft._clearQuad.set_alpha(n),Ft._clearQuad.set_depth(-1),-1!=t&&-1!=i&&-1!=l&&-1!=s?((h=Ft._clearQuad).set_width(l),h.set_height(s),(h=Ft._clearQuad).set_x(t),h.set_y(i)):(h=Ft._clearQuad,e=this.height,h.set_width(this.width),h.set_height(e),(h=Ft._clearQuad).set_x(0),h.set_y(0)),this.stamp(Ft._clearQuad,a)},dependsOnTexture:function(e){return null!=this.dependingTextures&&0<(null!=(e=this.dependingTextures.intMap.h[0|e.index])?e:0)},dependsOnTextureCount:function(e){return null!=this.dependingTextures&&null!=(e=this.dependingTextures.intMap.h[0|e.index])?e:0},incrementDependingTextureCount:function(e){null==this.dependingTextures&&(this.dependingTextures=new rn);var n=this.dependingTextures.intMap.h[0|e.index];this.dependingTextures.set(e.index,(null!=n?n:0)+1)},resetDependingTextureCounts:function(){null!=this.dependingTextures&&this.dependingTextures.clear()},toString:function(){var e;return null!=this.id?(e=this.id,"RenderTexture("+(e=B.startsWith(e,"texture:")?h.substr(e,8,null):e)+" "+this.width+" "+this.height+" "+this.density+" #"+this.index+"/"+this.priority+")"):"RenderTexture("+this.width+" "+this.height+" "+this.density+" #"+this.index+"/"+this.priority+")"},__class__:Ft,__properties__:$extend(Rt.prototype.__properties__,{set__renderedOnce:"set__renderedOnce"})}),function(){this.usedRenderTarget=null,this.activeShaderCanBatchMultipleTextures=!1,this.maxUsableTexturesInBatch=-1,this.usedTextures=0,this.usedTextureIndexes=[],this.z=0,this.stateDirty=!0,this.mesh=null,this.quad=null,this.defaultWhiteTexture=null,this.defaultTexturedShader=null,this.texHeightActual=0,this.texWidthActual=0,this.texHeight=0,this.texWidth=0,this.activeTextureSlot=0,this.lastClipIsRegular=!1,this.lastClip=null,this.lastComputedBlending=1,this.lastRenderTarget=null,this.lastShader=null,this.lastTextureId=null,this.lastTexture=null,this.stencilClip=!1,this.customFloatAttributesSize=0,this.activeShader=null,this.drawCalls=0,l.call(this)}),Bt=((L["ceramic.Renderer"]=Pt).__name__="ceramic.Renderer",Pt.__super__=l,Pt.prototype=$extend(l.prototype,{drawCalls:null,activeShader:null,customFloatAttributesSize:null,stencilClip:null,lastTexture:null,lastTextureId:null,lastShader:null,lastRenderTarget:null,lastComputedBlending:null,lastClip:null,lastClipIsRegular:null,activeTextureSlot:null,backendTextures:null,backendShaders:null,texWidth:null,texHeight:null,texWidthActual:null,texHeightActual:null,defaultTexturedShader:null,defaultWhiteTexture:null,quad:null,mesh:null,stateDirty:null,z:null,usedTextureIndexes:null,usedTextures:null,maxUsableTexturesInBatch:null,activeShaderCanBatchMultipleTextures:null,usedRenderTarget:null,render:function(e,n){var t=he.app.backend.draw;for(this.backendTextures=he.app.backend.textures,this.backendShaders=he.app.backend.shaders,this.defaultTexturedShader=he.app.defaultTexturedShader.backendItem,this.defaultWhiteTexture=he.app.defaultWhiteTexture,this.maxUsableTexturesInBatch=0|Math.min(this.backendTextures.maxTexturesByBatch(),this.backendShaders.maxIfStatementsByFragmentShader());this.usedTextureIndexes.length<this.maxUsableTexturesInBatch;)this.usedTextureIndexes.push(0);this.usedRenderTarget=null,this.drawCalls=0,K._activeTextureSlot=0,K._buffersIndex=-1,t.prepareNextBuffers(),this.quad=null,this.mesh=null,this.lastTexture=null,this.lastTextureId=null,this.lastShader=null,this.lastRenderTarget=null,this.lastComputedBlending=1,this.lastClip=null,this.usedTextures=0,this.texWidth=0,this.texHeight=0,this.texWidthActual=0,this.texHeightActual=0,this.stencilClip=!1,this.z=0,this.stateDirty=!0;he.app.defaultTexturedShader.backendItem;for(var i=he.app.renderTextures,l=0,s=i.length;l<s;)(o=i[l++])._usedInRendering=!1,o.autoRender&&(o.renderDirty=!0);if(Y.gl.enableVertexAttribArray(0),Y.gl.enableVertexAttribArray(1),Y.gl.enableVertexAttribArray(2),this.usedTextures=this.maxUsableTexturesInBatch,this.unbindUsedTextures(t),(K._activeTextureSlot=0)!=T._activeTextureSlot){for(T._activeTextureSlot=0;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984)}this.activeTextureSlot=0,t.setRenderTarget(null,!0);var r=he.app.settings.get_background();if(Y.gl.clearColor((r>>16&255)/255,(r>>8&255)/255,(255&r)/255,1),0<C.app.config.render.depth?(Y.gl.clear(16640),Y.gl.clearDepth(1)):Y.gl.clear(16384),null!=K._currentRenderTarget&&(K._didUpdateCurrentRenderTarget=!0),Y.gl.enable(3042),this.activeShader=null,this.lastShader=null,this.useShader(t,null),Y.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,Y.gl.stencilFunc(519,1,255),Y.gl.stencilMask(255),Y.gl.colorMask(!0,!0,!0,!0),Y.gl.disable(2960),null!=n){for(l=0,s=n.length;l<s;){var a,h=n[l++],u=h.asQuad,c=h.asMesh;h.computedVisible&&(null==h.computedRenderTarget||h.computedRenderTarget.renderDirty)&&((a=h.computedClip)!=this.lastClip&&(this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0,null!=this.lastClip&&(this.lastClipIsRegular?Y.gl.disable(3089):(this.lastRenderTarget=this.lastClip.computedRenderTarget,this.useRenderTarget(t,this.lastRenderTarget),Y.gl.stencilFunc(519,1,255),Y.gl.stencilMask(255),Y.gl.colorMask(!0,!0,!0,!0),Y.gl.disable(2960))),this.lastClip=a,null!=this.lastClip)&&(this.lastRenderTarget=this.lastClip.computedRenderTarget,this.useRenderTarget(t,this.lastRenderTarget),null!=this.lastClip.asQuad&&this.lastClip.asQuad.isRegular()?(this.lastClipIsRegular=!0,this.scissorWithQuad(t,this.lastClip.asQuad)):(this.lastClipIsRegular=!1,K._drawingInStencilBuffer=!0,Y.gl.stencilMask(255),Y.gl.clearStencil(255),Y.gl.clear(1024),Y.gl.enable(2960),Y.gl.stencilOp(7680,7680,7681),Y.gl.stencilFunc(519,1,255),Y.gl.stencilMask(255),Y.gl.colorMask(!1,!1,!1,!1),null!=this.lastClip.asQuad?(u=this.lastClip.asQuad,this.stencilClip=!0,this.drawQuad(t,u),this.stencilClip=!1,u=h.asQuad):null!=this.lastClip.asMesh&&(c=this.lastClip.asMesh,this.stencilClip=!0,this.drawMesh(t,c),this.stencilClip=!1,c=h.asMesh),this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0,K._drawingInStencilBuffer=!1,Y.gl.stencilFunc(514,1,255),Y.gl.stencilMask(0),Y.gl.colorMask(!0,!0,!0,!0),Y.gl.enable(2960))),null!=u&&16!=(16&u.flags)?this.drawQuad(t,u):null!=c&&this.drawMesh(t,c))}this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0}for(var o,l=0,s=(i=he.app.renderTextures).length;l<s;)(o=i[l++]).renderDirty=!1;if((K._activeTextureSlot=0)!=T._activeTextureSlot){for(T._activeTextureSlot=0;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984)}this.activeTextureSlot=0,t.setRenderTarget(null,!0),Y.gl.enable(3042),this.activeShader=null,this.lastShader=null,this.useShader(t,null),this.lastClipIsRegular&&Y.gl.disable(3089),Y.gl.blendFuncSeparate(1,771,1,771)},drawQuad:function(e,n){var t,i,l,s,r=this,a=(this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),Y.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(h=null,this.stateDirty||(a=this.computeQuadBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||a!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n._texture!=this.lastTexture&&(null!=n._texture&&null!=this.lastTexture?n._texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n._texture)?h=n._texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n._texture)?h=null!=n._texture?n._texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(r.flush(e),r.unbindUsedTextures(e),r.lastTexture=n._texture,r.useFirstTextureInBatch(e,r.lastTexture),n.computedRenderTarget!=r.lastRenderTarget&&(r.lastRenderTarget=n.computedRenderTarget,r.useRenderTarget(e,r.lastRenderTarget),null!=r.lastClip)&&r.lastClipIsRegular&&r.scissorWithQuad(e,r.lastClip.asQuad),r.lastShader=n.shader,r.useShader(e,null!=r.lastShader?r.lastShader.backendItem:null),r.lastComputedBlending=r.computeQuadBlending(n),r.useBlending(e,r.lastComputedBlending),r.stateDirty=!1):null!=h&&this.useTextureInSameBatch(e,h)),(K._numPos+4>K._maxVerts||16384<K._numIndices+6)&&(r.flush(e),r.unbindUsedTextures(e),r.lastTexture=n._texture,r.useFirstTextureInBatch(e,r.lastTexture),n.computedRenderTarget!=r.lastRenderTarget&&(r.lastRenderTarget=n.computedRenderTarget,r.useRenderTarget(e,r.lastRenderTarget),null!=r.lastClip)&&r.lastClipIsRegular&&r.scissorWithQuad(e,r.lastClip.asQuad),r.lastShader=n.shader,r.useShader(e,null!=r.lastShader?r.lastShader.backendItem:null),r.lastComputedBlending=r.computeQuadBlending(n),r.useBlending(e,r.lastComputedBlending),r.stateDirty=!1),n.get_width()),h=n.get_height(),e=n.matA,u=n.matB,c=n.matC,o=n.matD,_=n.matTX,d=n.matTY,b=this.z,g=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1;if(0==this.customFloatAttributesSize)-1!=g?(O=K._numPos,p=d+u*a+o*h,K._posList[K._posIndex]=f=_+e*a+c*h,K._posList[K._posIndex+1]=p,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4,K._numPos++,K._posList[K._posIndex]=_+c*h,K._posList[K._posIndex+1]=d+o*h,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4,K._numPos++,K._posList[K._posIndex]=_,K._posList[K._posIndex+1]=d,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4,K._numPos++,K._posList[K._posIndex]=_+e*a,K._posList[K._posIndex+1]=d+u*a,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4):(O=K._numPos,p=d+u*a+o*h,K._posList[K._posIndex]=f=_+e*a+c*h,K._posList[K._posIndex+1]=p,K._posList[K._posIndex+2]=b,K._posIndex+=3,K._numPos++,K._posList[K._posIndex]=_+c*h,K._posList[K._posIndex+1]=d+o*h,K._posList[K._posIndex+2]=b,K._posIndex+=3,K._numPos++,K._posList[K._posIndex]=_,K._posList[K._posIndex+1]=d,K._posList[K._posIndex+2]=b,K._posIndex+=3,K._numPos++,K._posList[K._posIndex]=_+e*a,K._posList[K._posIndex+1]=d+u*a,K._posList[K._posIndex+2]=b,K._posIndex+=3),K._numPos++;else{if(-1!=g){for(var O=K._numPos,f=_+e*a+c*h,p=d+u*a+o*h,m=(K._posList[K._posIndex]=f,K._posList[K._posIndex+1]=p,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4,K._numPos++,0),w=r.customFloatAttributesSize;m<w;){var v=m++;K._posList[K._posIndex+v]=0}K._posIndex+=K._floatAttributesSize,K._posList[K._posIndex]=_+c*h,K._posList[K._posIndex+1]=d+o*h,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4,K._numPos++;for(m=0,w=r.customFloatAttributesSize;m<w;){v=m++;K._posList[K._posIndex+v]=0}K._posIndex+=K._floatAttributesSize,K._posList[K._posIndex]=_,K._posList[K._posIndex+1]=d,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4,K._numPos++;for(m=0,w=r.customFloatAttributesSize;m<w;){v=m++;K._posList[K._posIndex+v]=0}K._posIndex+=K._floatAttributesSize,K._posList[K._posIndex]=_+e*a,K._posList[K._posIndex+1]=d+u*a,K._posList[K._posIndex+2]=b,K._posList[K._posIndex+3]=g,K._posIndex+=4}else{for(O=K._numPos,f=_+e*a+c*h,p=d+u*a+o*h,m=(K._posList[K._posIndex]=f,K._posList[K._posIndex+1]=p,K._posList[K._posIndex+2]=b,K._posIndex+=3,K._numPos++,0),w=r.customFloatAttributesSize;m<w;){v=m++;K._posList[K._posIndex+v]=0}K._posIndex+=K._floatAttributesSize,K._posList[K._posIndex]=_+c*h,K._posList[K._posIndex+1]=d+o*h,K._posList[K._posIndex+2]=b,K._posIndex+=3,K._numPos++;for(m=0,w=r.customFloatAttributesSize;m<w;){v=m++;K._posList[K._posIndex+v]=0}K._posIndex+=K._floatAttributesSize,K._posList[K._posIndex]=_,K._posList[K._posIndex+1]=d,K._posList[K._posIndex+2]=b,K._posIndex+=3,K._numPos++;for(m=0,w=r.customFloatAttributesSize;m<w;){v=m++;K._posList[K._posIndex+v]=0}K._posIndex+=K._floatAttributesSize,K._posList[K._posIndex]=_+e*a,K._posList[K._posIndex+1]=d+u*a,K._posList[K._posIndex+2]=b,K._posIndex+=3}K._numPos++;for(m=0,w=r.customFloatAttributesSize;m<w;){v=m++;K._posList[K._posIndex+v]=0}K._posIndex+=K._floatAttributesSize}K._indiceList[K._numIndices]=O,K._numIndices++,K._indiceList[K._numIndices]=O+1,K._numIndices++,K._indiceList[K._numIndices]=O+2,K._numIndices++,K._indiceList[K._numIndices]=O,K._numIndices++,K._indiceList[K._numIndices]=O+2,K._numIndices++,K._indiceList[K._numIndices]=O+3,K._numIndices++,this.stencilClip?(t=s=1,l=i=0):(l=3==this.lastComputedBlending?(s=n.computedAlpha,t=(n.color>>16&255)/255,i=(n.color>>8&255)/255,(255&n.color)/255):(s=n.computedAlpha,t=(n.color>>16&255)/255*s,i=(n.color>>8&255)/255*s,(255&n.color)/255*s),2==n.blending&&2!=this.lastComputedBlending&&(s=0));for(var y=0;y<4;)K._colorList[K._colorIndex]=t,K._colorList[K._colorIndex+1]=i,K._colorList[K._colorIndex+2]=l,K._colorList[K._colorIndex+3]=s,K._colorIndex+=4,K._numColors++,++y;g=0,f=0,p=0,c=0;null!=n._texture?(o=this.texWidthActual,h=this.texHeightActual,_=n._texture.density,g=n.frameX*_/o,f=n.frameY*_/h,32==(32&n.flags)?(p=n.frameHeight*_/o,c=n.frameWidth*_/h,K._uvList[K._uvIndex]=g+p,K._uvList[K._uvIndex+1]=f,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=g+p,K._uvList[K._uvIndex+1]=f+c,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=g,K._uvList[K._uvIndex+1]=f+c,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=g):(p=n.frameWidth*_/o,c=n.frameHeight*_/h,K._uvList[K._uvIndex]=g+p,K._uvList[K._uvIndex+1]=f+c,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=g,K._uvList[K._uvIndex+1]=f+c,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=g,K._uvList[K._uvIndex+1]=f,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=g+p),K._uvList[K._uvIndex+1]=f):(K._uvList[K._uvIndex]=0,K._uvList[K._uvIndex+1]=0,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=0,K._uvList[K._uvIndex+1]=0,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=0,K._uvList[K._uvIndex+1]=0,K._uvIndex+=2,K._numUVs++,K._uvList[K._uvIndex]=0,K._uvList[K._uvIndex+1]=0),K._uvIndex+=2,K._numUVs++,this.z=b+.001},drawMesh:function(e,n){var t,i,l=this,s=(this.stencilClip?(this.unbindUsedTextures(e),this.useFirstTextureInBatch(e,null),Y.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=n.computedRenderTarget,this.useRenderTarget(e,this.lastRenderTarget),this.lastShader=null,this.useShader(e,null),this.stateDirty=!1):(t=null,this.stateDirty||(i=this.computeMeshBlending(n),this.stateDirty=!this.isSameShader(n.shader,this.lastShader)||i!=this.lastComputedBlending||n.computedRenderTarget!=this.lastRenderTarget,this.stateDirty)||n.texture!=this.lastTexture&&(null!=n.texture&&null!=this.lastTexture?n.texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(e,n.texture)?t=n.texture:this.stateDirty=!0):this.canUseTextureInSameBatch(e,n.texture)?t=null!=n.texture?n.texture:this.defaultWhiteTexture:this.stateDirty=!0),this.stateDirty?(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1):null!=t&&this.useTextureInSameBatch(e,t)),n.matA),r=n.matB,a=n.matC,h=n.matD,u=n.matTX,c=n.matTY,o=this.z,_=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,d=n.colors,b=n.floatColors,g=this.stencilClip||0==n.colorMapping,O=!this.stencilClip&&1==n.colorMapping,f=n.uvs,p=n.vertices,m=n.indices,w=m.length,v=this.customFloatAttributesSize,y=n.customFloatAttributesSize,C=0,U=null!=n.texture&&n.texture.isRenderTexture,x=w,P=((K._numPos+w>K._maxVerts||16384<K._numIndices+w)&&(l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,_=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,w>K._maxVerts-K._numPos||w>16384-K._numIndices)&&(x=3*((x=0|Math.min(K._maxVerts-K._numPos,16384-K._numIndices))/3|0)),n.texture),B=0,L=0;for(null!=P&&(B=this.texWidth/this.texWidthActual,L=this.texHeight/this.texHeightActual);;){for(var T,D=0,A=0,S=0,E=0,M=(g&&(l.stencilClip?(A=D=1,E=S=0):(E=null!=b?(D=n.computedAlpha*b[3],A=b[0],S=b[1],b[2]):3==l.lastComputedBlending?(T=d[0],D=n.computedAlpha*((T>>24&255)/255),A=(T>>16&255)/255,S=(T>>8&255)/255,(255&T)/255):(A=((T=d[0])>>16&255)/255*(D=n.computedAlpha*((T>>24&255)/255)),S=(T>>8&255)/255*D,(255&T)/255*D),2==n.blending&&2!=l.lastComputedBlending&&(D=0))),C),N=K._numPos;M<x;){var k=m[M],W=2*k,I=k*(2+y),R=p[I++],F=p[I++];if(K._indiceList[K._numIndices]=N,K._numIndices++,++N,-1!=_?(K._posList[K._posIndex]=u+s*R+a*F,K._posList[K._posIndex+1]=c+r*R+h*F,K._posList[K._posIndex+2]=o,K._posList[K._posIndex+3]=_,K._posIndex+=4):(K._posList[K._posIndex]=u+s*R+a*F,K._posList[K._posIndex+1]=c+r*R+h*F,K._posList[K._posIndex+2]=o,K._posIndex+=3),K._numPos++,g||(E=null!=b?(R=4*(O?M:k),U||3==l.lastComputedBlending?(D=n.computedAlpha*b[3+R],A=b[R],S=b[1+R],b[2+R]):(D=n.computedAlpha*b[3+R],A=b[R]*D,S=b[1+R]*D,b[2+R]*D)):(F=O?d[M]:d[k],U||3==l.lastComputedBlending?(D=n.computedAlpha*((F>>24&255)/255),A=(F>>16&255)/255,S=(F>>8&255)/255,(255&F)/255):(A=(F>>16&255)/255*(D=n.computedAlpha*((F>>24&255)/255)),S=(F>>8&255)/255*D,(255&F)/255*D)),2==n.blending&&2!=l.lastComputedBlending&&(D=0)),K._colorList[K._colorIndex]=A,K._colorList[K._colorIndex+1]=S,K._colorList[K._colorIndex+2]=E,K._colorList[K._colorIndex+3]=D,K._colorIndex+=4,K._numColors++,null!=P?(R=f[W]*B,k=f[1+W]*L,K._uvList[K._uvIndex]=R,K._uvList[K._uvIndex+1]=k):(K._uvList[K._uvIndex]=0,K._uvList[K._uvIndex+1]=0),K._uvIndex+=2,K._numUVs++,0!=v){for(var G=0,H=v;G<H;){var z=G++;K._posList[K._posIndex+z]=z<y?p[I++]:0}K._posIndex+=K._floatAttributesSize}++M}if(x==w)break;l.flush(e),l.unbindUsedTextures(e),l.lastTexture=n.texture,l.useFirstTextureInBatch(e,l.lastTexture),n.computedRenderTarget!=l.lastRenderTarget&&(l.lastRenderTarget=n.computedRenderTarget,l.useRenderTarget(e,l.lastRenderTarget),null!=l.lastClip)&&l.lastClipIsRegular&&l.scissorWithQuad(e,l.lastClip.asQuad),l.lastShader=n.shader,l.useShader(e,null!=l.lastShader?l.lastShader.backendItem:null),l.lastComputedBlending=l.computeMeshBlending(n),l.useBlending(e,l.lastComputedBlending),l.stateDirty=!1,_=l.activeShaderCanBatchMultipleTextures?l.activeTextureSlot:-1,w<(x=3*((x=(C=x)+(0|Math.min(K._maxVerts-K._numPos,16384-K._numIndices)))/3|0))&&(x=w)}this.z=o+.001},flush:function(e){if(K._numPos<=0)return!1;var n=K._batchMultiTexture,t=new Float32Array(K._posList.buffer,0,4*K._posIndex/4|0),i=new Float32Array(K._uvList.buffer,0,4*K._uvIndex/4|0),l=new Float32Array(K._colorList.buffer,0,4*K._colorIndex/4|0),s=new Uint16Array(K._indiceList.buffer,0,2*K._numIndices/2|0),r=Y.gl.createBuffer(),a=Y.gl.createBuffer(),h=Y.gl.createBuffer(),u=Y.gl.createBuffer(),c=(Y.gl.enableVertexAttribArray(0),Y.gl.enableVertexAttribArray(1),Y.gl.enableVertexAttribArray(2),Y.gl.bindBuffer(34962,r),Y.gl.vertexAttribPointer(0,3,5126,!1,4*K._posSize,0),Y.gl.bufferData(34962,t,35040),Y.gl.bindBuffer(34962,h),Y.gl.vertexAttribPointer(1,2,5126,!1,0,0),Y.gl.bufferData(34962,i,35040),Y.gl.bindBuffer(34962,a),Y.gl.vertexAttribPointer(2,4,5126,!1,0,0),Y.gl.bufferData(34962,l,35040),3),o=3,i=0;if(n&&(f=Y.gl.createBuffer(),K._customGLBuffers[i++]=f,Y.gl.enableVertexAttribArray(o),Y.gl.bindBuffer(34962,f),Y.gl.vertexAttribPointer(o,1,5126,!1,4*K._posSize,4*c),Y.gl.bufferData(34962,t,35040),++o,++c),null!=K._activeShader&&null!=K._activeShader.customAttributes)for(var _=K._activeShader.customAttributes,d=i,l=d+_.length,b=(i+=_.length,d),g=l;b<g;){var O=_[(p=b++)-d],f=Y.gl.createBuffer();K._customGLBuffers[p]=f,Y.gl.enableVertexAttribArray(o),Y.gl.bindBuffer(34962,f),Y.gl.vertexAttribPointer(o,O.size,5126,!1,4*K._posSize,4*c),Y.gl.bufferData(34962,t,35040),++o,c+=O.size}if(Y.gl.bindBuffer(34963,u),Y.gl.bufferData(34963,s,35040),Y.gl.drawElements(K._primitiveType,K._numIndices,5123,0),Y.gl.deleteBuffer(r),Y.gl.deleteBuffer(a),Y.gl.deleteBuffer(h),0<i)for(o=3,b=0,g=i;b<g;){var p=b++,f=K._customGLBuffers[p];Y.gl.deleteBuffer(f),Y.gl.disableVertexAttribArray(o),++o}return Y.gl.bindBuffer(34963,null),Y.gl.deleteBuffer(u),null!=K._currentRenderTarget&&(K._didUpdateCurrentRenderTarget=!0),t=null,K._numIndices=0,K._numPos=0,K._numUVs=0,K._numColors=0,K._posIndex=0,K._uvIndex=0,K._colorIndex=0,e.prepareNextBuffers(),this.drawCalls++,!0},computeQuadBlending:function(e){var n=e.blending;return n=0!=n&&2!=n?n:null!=e.computedRenderTarget?5:1},computeMeshBlending:function(e){var n=e.blending;return n=0!=n&&2!=n?n:null!=e.computedRenderTarget?5:1},isSameShader:function(e,n){return(null!=e?e.backendItem:this.defaultTexturedShader)==(null!=n?n.backendItem:this.defaultTexturedShader)},useShader:function(e,n){null==n&&(n=this.defaultTexturedShader),this.activeShader=n,(K._activeShader=n).uniforms.setMatrix4("projectionMatrix",K._projectionMatrix),n.uniforms.setMatrix4("modelViewMatrix",K._modelViewMatrix);var t=he.app.backend.shaders,i=0,l=K._activeShader.customAttributes;if(null!=l)for(var s=0,r=l.length;s<r;)i+=l[s++].size;K._floatAttributesSize=i,K._batchMultiTexture=t.canBatchWithMultipleTextures(K._activeShader),K._vertexSize=3+K._floatAttributesSize+(K._batchMultiTexture?1:0),K._posSize=K._vertexSize,K._vertexSize<4&&(K._vertexSize=4),K._maxVerts=0|Math.floor(65536/K._vertexSize),n.activate(),0==K._numPos&&(K._numIndices=0,K._numPos=0,K._numUVs=0,K._numColors=0,K._posIndex=0,K._uvIndex=0,K._colorIndex=0),this.activeShaderCanBatchMultipleTextures=this.backendShaders.canBatchWithMultipleTextures(n);this.backendShaders;i=0;if(null!=(l=n.customAttributes))for(s=0,r=l.length;s<r;)i+=l[s++].size;this.customFloatAttributesSize=i},useBlending:function(e,n){switch(n){case 0:throw Q.thrown("Cannot apply AUTO blending. Needs to be computed to an actual blending function.");case 1:Y.gl.blendFuncSeparate(1,771,1,771);break;case 2:Y.gl.blendFuncSeparate(1,1,1,1);break;case 3:Y.gl.blendFuncSeparate(770,771,1,771);break;case 4:Y.gl.blendFuncSeparate(1,770,1,770);break;case 5:Y.gl.blendFuncSeparate(1,771,773,1);break;case 6:Y.gl.blendFuncSeparate(770,771,773,1)}},scissorWithQuad:function(e,n){e.enableScissor(n.matTX,n.matTY,n.matA*n.get_width(),n.matD*n.get_height())},isNotRenderedRenderTexture:function(e){e=e.asRenderTexture;return!(null==e||e._renderedOnce||!e.renderDirty||e._usedInRendering)},useRenderTarget:function(e,n){null!=(this.usedRenderTarget=n)?(n._usedInRendering=!0,n.set__renderedOnce(!0),e.setRenderTarget(n)):e.setRenderTarget(null)},useFirstTextureInBatch:function(e,n){null==n&&(n=this.defaultWhiteTexture),this.usedTextures=1;var t=n.backendItem.index;if(this.usedTextureIndexes[0]=t,(K._activeTextureSlot=0)!=T._activeTextureSlot){for(T._activeTextureSlot=0;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984)}this.activeTextureSlot=0,this.useTexture(e,n,!1)},useTexture:function(e,n,t){var i;null!=n?(this.lastTexture=n,this.lastTextureId=n.backendItem.textureId,this.texWidth=n.backendItem.width,this.texHeight=n.backendItem.height,this.texWidthActual=n.backendItem.widthActual,this.texHeightActual=n.backendItem.heightActual,t||(i=n.backendItem.textureId,T._boundTexture2D[T._activeTextureSlot]!=i&&(T._boundTexture2D[T._activeTextureSlot]=i,Y.gl.bindTexture(3553,i)))):(this.lastTexture=null,this.lastTextureId=null,i=he.app.defaultWhiteTexture.backendItem.textureId,T._boundTexture2D[T._activeTextureSlot]!=i&&(T._boundTexture2D[T._activeTextureSlot]=i,Y.gl.bindTexture(3553,i)))},canUseTextureInSameBatch:function(e,n){var t=!1;if(null==n&&(n=this.defaultWhiteTexture),0<this.usedTextures)if(this.activeShaderCanBatchMultipleTextures){for(var i=n.backendItem.index,l=0,s=this.usedTextures;l<s;){var r=l++;if(i==this.usedTextureIndexes[r]){t=!0;break}}!t&&this.usedTextures<this.maxUsableTexturesInBatch&&(t=!0)}else this.lastTexture==n&&(t=!0);return t},useTextureInSameBatch:function(e,n){var t=!1;if(null==n&&(n=this.defaultWhiteTexture),this.activeShaderCanBatchMultipleTextures){for(var i=n.backendItem.index,l=0,s=this.usedTextures;l<s;){var r=l++;if(i==this.usedTextureIndexes[r]){if(K._activeTextureSlot=r,T._activeTextureSlot!=r){for(T._activeTextureSlot=r;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984+r)}this.activeTextureSlot=r,this.useTexture(e,n,!0),t=!0;break}}if(!t&&this.usedTextures<this.maxUsableTexturesInBatch){r=this.usedTextures++;if(this.usedTextureIndexes[r]=i,K._activeTextureSlot=r,T._activeTextureSlot!=r){for(T._activeTextureSlot=r;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984+r)}this.activeTextureSlot=r,this.useTexture(e,n,!1)}}},unbindUsedTextures:function(e){for(;0<this.usedTextures;){this.usedTextures--;var n=this.usedTextures;if(K._activeTextureSlot=n,T._activeTextureSlot!=n){for(T._activeTextureSlot=n;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984+n)}n=he.app.defaultWhiteTexture.backendItem.textureId;T._boundTexture2D[T._activeTextureSlot]!=n&&(T._boundTexture2D[T._activeTextureSlot]=n,Y.gl.bindTexture(3553,n))}if((K._activeTextureSlot=0)!=T._activeTextureSlot){for(T._activeTextureSlot=0;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984)}this.activeTextureSlot=0,this.useTexture(e,null,!1)},__class__:Pt}),function(){this.tile=null,this.mirrorY=!1,this.mirrorX=!1,this.repeatY=!0,this.repeatX=!0,this.spacingY=0,this.spacingX=0,this.quads=[],q.call(this),this.quads.push(Bt._getQuad()),this.add(this.quads[0]);var e=this.quads[0];if(1!=e.inheritAlpha&&(e.inheritAlpha=!0,e.visibilityDirty=!0,null!=e.children))for(var n=0,t=e.children.length;n<t;){var i=n++,l=e.children[i];if(l.visibilityDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_visibilityDirty(!0)}}}),Lt=((L["ceramic.Repeat"]=Bt).__name__="ceramic.Repeat",Bt._getQuad=function(){var e,n=null;return null==(n=null!=Bt._pool?0<(e=Bt._pool).availableItems.length?e.availableItems.pop():null:n)?n=new r:n.set_active(!0),n},Bt.__super__=q,Bt.prototype=$extend(q.prototype,{_recycleQuad:function(e){null!=e.parent&&e.parent.remove(e),e.set_active(!1),null==Bt._pool&&(Bt._pool=new o),Bt._pool.recycle(e)},quads:null,spacingX:null,set_spacingX:function(e){return this.spacingX!=e&&(this.spacingX=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},spacingY:null,set_spacingY:function(e){return this.spacingY!=e&&(this.spacingY=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},_spacing:function(e,n){this.set_spacingX(e),this.set_spacingY(n)},repeatX:null,set_repeatX:function(e){return this.repeatX!=e&&(this.repeatX=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},repeatY:null,set_repeatY:function(e){return this.repeatY!=e&&(this.repeatY=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},_repeat:function(e,n){this.set_repeatX(e),this.set_repeatY(n)},mirrorX:null,set_mirrorX:function(e){return this.mirrorX!=e&&(this.mirrorX=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},mirrorY:null,set_mirrorY:function(e){return this.mirrorY!=e&&(this.mirrorY=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},_mirror:function(e,n){this.mirrorX!=e&&(this.mirrorX=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),this.mirrorY!=n&&(this.mirrorY=n,this.contentDirty=!0,he.app.visualsContentDirty=!0)},get_texture:function(){return this.quads[0]._texture},set_texture:function(e){return this.quads[0]._texture!=e&&this._set_texture(e),e},_set_texture:function(e){for(var n=0,t=this.quads.length;n<t;){var i=n++,i=this.quads[i];i._texture!=e&&i._set_texture(e)}this.contentDirty=!0,he.app.visualsContentDirty=!0},get_rotateFrame:function(){return 32==(32&this.quads[0].flags)},set_rotateFrame:function(e){return 32==(32&this.quads[0].flags)!=e&&this._set_rotateFrame(e),e},_set_rotateFrame:function(e){for(var n=0,t=this.quads.length;n<t;){var i=n++,i=this.quads[i];i.flags=e?32|i.flags:-33&i.flags}this.contentDirty=!0,he.app.visualsContentDirty=!0},tile:null,set_tile:function(e){return this.tile!=e&&(this.tile=e,this._set_tile(e)),e},_set_tile:function(e){var n=null;null!=e&&(n=e.texture),this.quads[0]._texture!=n&&this._set_texture(n),null!=e?(32==(32&this.quads[0].flags)!=e.rotateFrame&&this._set_rotateFrame(e.rotateFrame),n=e.frameHeight,this.set_width(e.frameWidth),this.set_height(n)):32==(32&this.quads[0].flags)!=0&&this._set_rotateFrame(!1),this.contentDirty=!0,he.app.visualsContentDirty=!0},set_width:function(e){return this._width!=e&&(q.prototype.set_width.call(this,e),this.contentDirty=!0,he.app.visualsContentDirty=!0),e},set_height:function(e){return this._height!=e&&(q.prototype.set_height.call(this,e),this.contentDirty=!0,he.app.visualsContentDirty=!0),e},get_color:function(){return this.quads[0].color},set_color:function(e){return this.quads[0].color!=e&&this._set_color(e),e},_set_color:function(e){for(var n=0,t=this.quads.length;n<t;){var i=n++;this.quads[i].color=e}return e},set_shader:function(e){return this.shader!=e&&(this.shader=e,this._set_shader(e)),e},_set_shader:function(e){for(var n=0,t=this.quads.length;n<t;){var i=n++;this.quads[i].set_shader(e)}return e},computeContent:function(){var e=this._width,n=this._height,t=this.quads[0]._texture,i=this.shader,l=this.quads[0].color,s=this.tile,r=32==(32&this.quads[0].flags),a=0,h=0,u=0,c=0,o=(null!=s?(u=s.frameWidth,c=s.frameHeight,a=s.frameX,h=s.frameY):null!=t&&(u=t.width,c=t.height),0);if(e<=0||n<=0)this.quads[0].set_active(!1);else for(var _=this.repeatX?u:e,d=this.repeatY?c:n,b=0,g=0,O=0,f=0;g<n;){for(b=O=0;b<e;){var p=o<this.quads.length?this.quads[o]:null;if(null==p){if(1!=(p=Bt._getQuad()).inheritAlpha&&(p.inheritAlpha=!0,p.visibilityDirty=!0,null!=p.children))for(var m=0,w=p.children.length;m<w;){var v=m++,y=p.children[v];if(y.visibilityDirty=!0,null!=y.children)for(var C=0,U=y.children.length;C<U;){var x=C++;y.children[x].set_visibilityDirty(!0)}}this.quads.push(p),this.add(p)}++o;var T=Math.min(_,e-b),D=Math.min(d,n-g),A=this.mirrorX&&O%2==1,S=this.mirrorY&&f%2==1,E=A?a+u-T:a,M=S?h+c-D:h,k=Math.min(u,T),I=Math.min(c,D);p._texture!=t&&p._set_texture(t),p.color=l,p.set_shader(i),p.frameX=E,p.frameY=M,p.frameWidth!=k&&-1!=(p.frameWidth=k)&&p.set_width(k),p.frameHeight!=I&&-1!=(p.frameHeight=I)&&p.set_height(I),r&&(E=p.frameX,p.frameX=a+p.frameY-h,p.frameY=h+u-E+a-p.frameWidth),p.set_x(b),p.set_y(g),p.set_width(T),p.set_height(D),p.set_anchorX(A?1:0),p.set_anchorY(S?1:0),p.set_scaleX(A?-1:1),p.set_scaleY(S?-1:1),b+=_+this.spacingX,++O}g+=d+this.spacingY,++f}for(0==o&&(o=1);this.quads.length>o;)this._recycleQuad(this.quads.pop());this.contentDirty=!1},__class__:Bt,__properties__:$extend(q.prototype.__properties__,{set_color:"set_color",get_color:"get_color",set_tile:"set_tile",set_rotateFrame:"set_rotateFrame",get_rotateFrame:"get_rotateFrame",set_texture:"set_texture",get_texture:"get_texture",set_mirrorY:"set_mirrorY",set_mirrorX:"set_mirrorX",set_repeatY:"set_repeatY",set_repeatX:"set_repeatX",set_spacingY:"set_spacingY",set_spacingX:"set_spacingX"})}),function(e){this._poolIndex=-1,this.set_length(e)}),Nt=((L["ceramic.ReusableArray"]=Lt).__name__="ceramic.ReusableArray",Lt.prototype={_poolIndex:null,vector:null,length:null,set_length:function(e){if(null==this.vector)return this.vector=new Array(e),this.length=e;if(e!=this.length){if(e>this.vector.length){for(var n=new Array(e),t=0,i=this.length;t<i;)n[l=t++]=this.vector[l],this.vector[l]=null;this.vector=n;for(t=this.length,i=e;t<i;){var l=t++;this.vector[l]=null}}else for(t=e,i=this.length;t<i;){l=t++;this.vector[l]=null}this.length=e}return e},get:function(e){return this.vector[e]},set:function(e,n){this.vector[e]=n},__class__:Lt,__properties__:{set_length:"set_length"}},function(){}),Wt=((L["ceramic.Runner"]=Nt).__name__="ceramic.Runner",Nt.currentIsMainThread=function(){return!0},Nt.init=function(){},Nt.tick=function(){},Nt.isEmulatingBackgroundWithMain=function(){return!0},Nt.runInMain=function(e){he.app._onceImmediate(e)},Nt.runInBackground=function(e){he.app._onceImmediate(e)},function(e,n){this.path=null,this.cachedLists=null,this.cachedNames=new z,this.assetDirsByBaseName=null,this.assetsByBaseName=null,this.allAssetDirs=null,this.allAssets=null,this.pendingTransformedDirCallbacks=null,this.didQueryTransformedDir=0,this.transformedDir=null,this.allAssets=e,this.path=n,this.initData()}),c=((L["ceramic.RuntimeAssets"]=Wt).__name__="ceramic.RuntimeAssets",Wt.fromPath=function(e){return null},Wt.toAssetConstName=function(e){for(var n="",t=e.length,i=0,l=!1;i<t;){var s,r=e.charAt(i),l="/"==r?(n+="__",!1):"."!=r&&Wt.isAsciiChar(r)?(s=r.toUpperCase(),r=r==s,l&&r&&(n+="_",l=!1),n+=null==s?"null":""+s,!r):(n+="_",!1);++i}var a=n;return a=B.endsWith(a,"_")?h.substr(a,0,a.length-1):a},Wt.isAsciiChar=function(e){e=h.cca(e,0);return 48<=e&&e<=57||65<=e&&e<=90||97<=e&&e<=122},Wt.prototype={transformedDir:null,didQueryTransformedDir:null,pendingTransformedDirCallbacks:null,requestTransformedDir:function(r){var a=this;2==this.didQueryTransformedDir?he.app._onceImmediate(function(){r(a.transformedDir)}):1==this.didQueryTransformedDir?(null==this.pendingTransformedDirCallbacks&&(this.pendingTransformedDirCallbacks=[]),this.pendingTransformedDirCallbacks.push(r)):(this.didQueryTransformedDir=1,kt.runCeramic(["tmp","dir"],function(e,n,t){if(0==e?0<(n=B.trim(n)).length&&Cn.exists(n)&&(a.transformedDir=n):he.app.logger.error("Failed to resolve tmp dir: "+e+" / "+t,{fileName:"../../../../ceramic/runtime/src/ceramic/RuntimeAssets.hx",lineNumber:41,className:"ceramic.RuntimeAssets",methodName:"requestTransformedDir"}),a.didQueryTransformedDir=2,r(a.transformedDir),null!=a.pendingTransformedDirCallbacks)for(var i=a.pendingTransformedDirCallbacks,l=(a.pendingTransformedDirCallbacks=null,0);l<i.length;){var s=i[l];++l,s(a.transformedDir)}}))},allAssets:null,allAssetDirs:null,assetsByBaseName:null,assetDirsByBaseName:null,cachedNames:null,cachedLists:null,path:null,reset:function(e,n){this.allAssets=e,this.path=n,this.allAssetDirs=null,this.assetsByBaseName=null,this.assetDirsByBaseName=null,this.cachedNames=new z,this.cachedLists=null,this.initData()},getNames:function(e,n,t){null==t&&(t=!1);var i=e+"|"+(null!=n?n.join(","):"")+(t?"|1":"|0"),l=this.cachedNames.h[i];if(null!=l)return l;var s=[];switch(null==n&&(n=[]),e){case"atlas":o=["atlas"];break;case"database":o=["csv"];break;case"font":o=["fnt","ttf","otf"];break;case"fragments":o=["fragments"];break;case"image":o=["png","jpg","jpeg"].concat(["ase","aseprite"]);break;case"shader":o=["frag","vert"];break;case"sound":he.app.backend.info;null!=We._soundExtensions||(We._soundExtensions=[],r=new Audio,a=null!=ie.navigator?ie.navigator.userAgent:"",c=We.RE_OPERA.match(a)&&parseInt(We.RE_OPERA.matched(0).split("/")[1],10)<33,u=-1!=a.indexOf("Safari")&&-1==a.indexOf("Chrome"),a=We.RE_SAFARI_VERSION.match(a),u&&a&&parseInt(We.RE_SAFARI_VERSION.matched(1),10),null!=(u=r.canPlayType('audio/ogg; codecs="vorbis"'))&&"no"!=u&&""!=u&&We._soundExtensions.push("ogg"),a=r.canPlayType("audio/mpeg;"),u=r.canPlayType("audio/mp3;"),!c&&(null!=a&&"no"!=a&&""!=a||null!=u&&"no"!=u&&""!=u)&&We._soundExtensions.push("mp3"),c=r.canPlayType("audio/x-flac;"),a=r.canPlayType("audio/flac;"),(null!=c&&"no"!=c&&""!=c||null!=a&&"no"!=a&&""!=a)&&We._soundExtensions.push("flac"),u=r.canPlayType('audio/wav; codecs="1"'),c=r.canPlayType("audio/wav;"),(null!=u&&"no"!=u&&""!=u||null!=c&&"no"!=c&&""!=c)&&We._soundExtensions.push("wav"));var r,a,u,c,o=[].concat(We._soundExtensions);break;case"text":o=["txt","json","fnt","atlas"];break;default:o=[]}if(0!=(n=n.concat(o)).length){for(var _=Object.create(null),d=t?this.allAssetDirs:this.allAssets,b=0;b<n.length;)for(var g=n[b],O=(++b,0);O<d.length;){var f,p=d[O],m=(++O,p.toLowerCase()),w=m.lastIndexOf("."),v=null;-1!=w&&(m=h.substr(m,w+1,null))==g&&(-1==(f=h.substr(p,0,w).lastIndexOf("@"))&&(f=w),p=h.substr(p,0,Math.min(f,w)),null==(v=Wt.toAssetConstName(p))||Object.prototype.hasOwnProperty.call(_,v)||null==m||(_[v]=p))}for(var y=t?this.assetDirsByBaseName:this.assetsByBaseName,C=Object.keys(_),U=C.length,x=0;x<U;){_[v=C[x++]];for(var T=[],D=y.h[_[v]],b=0;b<D.length;)for(var A=D[b],O=(++b,0);O<n.length;){g=n[O];if(++O,B.endsWith(A,"."+g)){T.push(A);break}}var S={name:_[v],constName:v,paths:T};s.push(S)}this.cachedNames.h[i]=s}return s},getLists:function(){if(null!=this.cachedLists)return this.cachedLists;for(var e={all:[],allDirs:[],allByName:new z,allDirsByName:new z},n=0,t=this.allAssets;n<t.length;){var i=t[n];++n,e.all.push(i)}for(n=0,t=this.allAssetDirs;n<t.length;){i=t[n];++n,e.allDirs.push(i)}for(var l=this.assetsByBaseName.h,s=Object.keys(l),r=s.length,a=0;a<r;){var h=s[a++],u=[].concat(this.assetsByBaseName.h[h]);e.allByName.h[h]=u}l=this.assetDirsByBaseName.h;for(r=(s=Object.keys(l)).length,a=0;a<r;){h=s[a++],u=[].concat(this.assetDirsByBaseName.h[h]);e.allDirsByName.h[h]=u}return this.cachedLists=e},getEncodableLists:function(){for(var e=this.getLists(),n={},t=e.allByName.h,i=Object.keys(t),l=i.length,s=0;s<l;)n[r=i[s++]]=e.allByName.h[r];for(var r,a={},l=(t=e.allDirsByName.h,(i=Object.keys(t)).length),s=0;s<l;)a[r=i[s++]]=e.allDirsByName.h[r];return{all:e.all,allDirs:e.allDirs,allByName:n,allDirsByName:a}},initData:function(){for(var e=Object.create(null),n=0,t=this.allAssets;n<t.length;){var i=t[n];++n,e[i]=!0}for(var l=Object.create(null),n=(this.allAssetDirs=[],0),t=this.allAssets;n<t.length;){var i=t[n],s=(++n,i.lastIndexOf("/"));if(-1!=s)for(var r=h.substr(i,0,s);!Object.prototype.hasOwnProperty.call(l,r)&&(this.allAssetDirs.push(r),l[r]=!0,-1!=(s=r.lastIndexOf("/")));)r=h.substr(r,0,s)}if(null==this.assetsByBaseName){this.assetsByBaseName=new z;for(n=0,t=this.allAssets;n<t.length;){var a=t[n],u=(++n,a.lastIndexOf(".")),c=(-1==(o=h.substr(a,0,u).lastIndexOf("@"))&&(o=u),h.substr(a,0,Math.min(o,u)));Object.prototype.hasOwnProperty.call(this.assetsByBaseName.h,c)||(this.assetsByBaseName.h[c]=[]),this.assetsByBaseName.h[c].push(a)}}if(null==this.assetDirsByBaseName){this.assetDirsByBaseName=new z;for(n=0,t=this.allAssetDirs;n<t.length;){var o,a=t[n],u=(++n,a.lastIndexOf(".")),c=(-1==(o=h.substr(a,0,u).lastIndexOf("@"))&&(o=u),h.substr(a,0,Math.min(o,u)));Object.prototype.hasOwnProperty.call(this.assetDirsByBaseName.h,c)||(this.assetDirsByBaseName.h[c]=[]),this.assetDirsByBaseName.h[c].push(a)}}},__class__:Wt},{}),Gt=(c.$name=function(e){var n=null;return null!=(n=0<=e&&e<c.scanCodeNames.length?c.scanCodeNames[e]:n)?n:""},c.toString=function(e){return"ScanCode("+e+" "+c.$name(e)+")"},{}),Ht=(Gt.toString=function(e){switch(e){case 0:return"NONE";case 1:return"PRELOAD";case 2:return"LOAD";case 3:return"CREATE";case 4:return"FADE_IN";case 5:return"READY";case 6:return"FADE_OUT";case 7:return"DISABLED";default:return"_"}},(L["ceramic.System"]=L1).__name__="ceramic.System",L1.__super__=l,L1.prototype=$extend(l.prototype,{__cbOnBeginEarlyUpdate:null,__cbOnceBeginEarlyUpdate:null,__cbOnOwnerUnbindBeginEarlyUpdate:null,__cbOnceOwnerUnbindBeginEarlyUpdate:null,emitBeginEarlyUpdate:function(e){var n=0;if(null!=this.__cbOnBeginEarlyUpdate&&(n+=this.__cbOnBeginEarlyUpdate.length),null!=this.__cbOnceBeginEarlyUpdate&&(n+=this.__cbOnceBeginEarlyUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnBeginEarlyUpdate)for(var s=0,r=this.__cbOnBeginEarlyUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnBeginEarlyUpdate[a],++l):--n}if(null!=this.__cbOnceBeginEarlyUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceBeginEarlyUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceBeginEarlyUpdate[a],this.__cbOnceBeginEarlyUpdate[a]=null,c=this.__cbOnceOwnerUnbindBeginEarlyUpdate[a],(this.__cbOnceOwnerUnbindBeginEarlyUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindBeginEarlyUpdate[a]),u.push(this.__cbOnceBeginEarlyUpdate[a]))}this.__cbOnceOwnerUnbindBeginEarlyUpdate=h,this.__cbOnceBeginEarlyUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onBeginEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginEarlyUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginEarlyUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBeginEarlyUpdate&&(this.__cbOnOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnOwnerUnbindBeginEarlyUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBeginEarlyUpdate&&(this.__cbOnOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnOwnerUnbindBeginEarlyUpdate.push(null);null==this.__cbOnBeginEarlyUpdate&&(this.__cbOnBeginEarlyUpdate=[]),this.__cbOnBeginEarlyUpdate.push(t)},onceBeginEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginEarlyUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginEarlyUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBeginEarlyUpdate&&(this.__cbOnceOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnceOwnerUnbindBeginEarlyUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBeginEarlyUpdate&&(this.__cbOnceOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnceOwnerUnbindBeginEarlyUpdate.push(null);null==this.__cbOnceBeginEarlyUpdate&&(this.__cbOnceBeginEarlyUpdate=[]),this.__cbOnceBeginEarlyUpdate.push(t)},offBeginEarlyUpdate:function(e){if(null!=e){var n;null!=this.__cbOnBeginEarlyUpdate&&-1!=(n=this.__cbOnBeginEarlyUpdate.indexOf(e))&&(this.__cbOnBeginEarlyUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBeginEarlyUpdate[n])&&s(),this.__cbOnOwnerUnbindBeginEarlyUpdate.splice(n,1)),null!=this.__cbOnceBeginEarlyUpdate&&-1!=(n=this.__cbOnceBeginEarlyUpdate.indexOf(e))&&(this.__cbOnceBeginEarlyUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBeginEarlyUpdate[n])&&s(),this.__cbOnceOwnerUnbindBeginEarlyUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEarlyUpdate){for(var t=0,i=this.__cbOnOwnerUnbindBeginEarlyUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBeginEarlyUpdate[l])&&s()}this.__cbOnOwnerUnbindBeginEarlyUpdate=null}if(null!=this.__cbOnceOwnerUnbindBeginEarlyUpdate){for(t=0,i=this.__cbOnceOwnerUnbindBeginEarlyUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBeginEarlyUpdate[l])&&s()}this.__cbOnceOwnerUnbindBeginEarlyUpdate=null}this.__cbOnBeginEarlyUpdate=null,this.__cbOnceBeginEarlyUpdate=null}},listensBeginEarlyUpdate:function(){return null!=this.__cbOnBeginEarlyUpdate&&0<this.__cbOnBeginEarlyUpdate.length||null!=this.__cbOnceBeginEarlyUpdate&&0<this.__cbOnceBeginEarlyUpdate.length},__cbOnEndEarlyUpdate:null,__cbOnceEndEarlyUpdate:null,__cbOnOwnerUnbindEndEarlyUpdate:null,__cbOnceOwnerUnbindEndEarlyUpdate:null,emitEndEarlyUpdate:function(e){var n=0;if(null!=this.__cbOnEndEarlyUpdate&&(n+=this.__cbOnEndEarlyUpdate.length),null!=this.__cbOnceEndEarlyUpdate&&(n+=this.__cbOnceEndEarlyUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnEndEarlyUpdate)for(var s=0,r=this.__cbOnEndEarlyUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnEndEarlyUpdate[a],++l):--n}if(null!=this.__cbOnceEndEarlyUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceEndEarlyUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceEndEarlyUpdate[a],this.__cbOnceEndEarlyUpdate[a]=null,c=this.__cbOnceOwnerUnbindEndEarlyUpdate[a],(this.__cbOnceOwnerUnbindEndEarlyUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindEndEarlyUpdate[a]),u.push(this.__cbOnceEndEarlyUpdate[a]))}this.__cbOnceOwnerUnbindEndEarlyUpdate=h,this.__cbOnceEndEarlyUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onEndEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event endEarlyUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offEndEarlyUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindEndEarlyUpdate&&(this.__cbOnOwnerUnbindEndEarlyUpdate=[]),this.__cbOnOwnerUnbindEndEarlyUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindEndEarlyUpdate&&(this.__cbOnOwnerUnbindEndEarlyUpdate=[]),this.__cbOnOwnerUnbindEndEarlyUpdate.push(null);null==this.__cbOnEndEarlyUpdate&&(this.__cbOnEndEarlyUpdate=[]),this.__cbOnEndEarlyUpdate.push(t)},onceEndEarlyUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event endEarlyUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offEndEarlyUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindEndEarlyUpdate&&(this.__cbOnceOwnerUnbindEndEarlyUpdate=[]),this.__cbOnceOwnerUnbindEndEarlyUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindEndEarlyUpdate&&(this.__cbOnceOwnerUnbindEndEarlyUpdate=[]),this.__cbOnceOwnerUnbindEndEarlyUpdate.push(null);null==this.__cbOnceEndEarlyUpdate&&(this.__cbOnceEndEarlyUpdate=[]),this.__cbOnceEndEarlyUpdate.push(t)},offEndEarlyUpdate:function(e){if(null!=e){var n;null!=this.__cbOnEndEarlyUpdate&&-1!=(n=this.__cbOnEndEarlyUpdate.indexOf(e))&&(this.__cbOnEndEarlyUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindEndEarlyUpdate[n])&&s(),this.__cbOnOwnerUnbindEndEarlyUpdate.splice(n,1)),null!=this.__cbOnceEndEarlyUpdate&&-1!=(n=this.__cbOnceEndEarlyUpdate.indexOf(e))&&(this.__cbOnceEndEarlyUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindEndEarlyUpdate[n])&&s(),this.__cbOnceOwnerUnbindEndEarlyUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEndEarlyUpdate){for(var t=0,i=this.__cbOnOwnerUnbindEndEarlyUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindEndEarlyUpdate[l])&&s()}this.__cbOnOwnerUnbindEndEarlyUpdate=null}if(null!=this.__cbOnceOwnerUnbindEndEarlyUpdate){for(t=0,i=this.__cbOnceOwnerUnbindEndEarlyUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindEndEarlyUpdate[l])&&s()}this.__cbOnceOwnerUnbindEndEarlyUpdate=null}this.__cbOnEndEarlyUpdate=null,this.__cbOnceEndEarlyUpdate=null}},listensEndEarlyUpdate:function(){return null!=this.__cbOnEndEarlyUpdate&&0<this.__cbOnEndEarlyUpdate.length||null!=this.__cbOnceEndEarlyUpdate&&0<this.__cbOnceEndEarlyUpdate.length},__cbOnBeginLateUpdate:null,__cbOnceBeginLateUpdate:null,__cbOnOwnerUnbindBeginLateUpdate:null,__cbOnceOwnerUnbindBeginLateUpdate:null,emitBeginLateUpdate:function(e){var n=0;if(null!=this.__cbOnBeginLateUpdate&&(n+=this.__cbOnBeginLateUpdate.length),null!=this.__cbOnceBeginLateUpdate&&(n+=this.__cbOnceBeginLateUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnBeginLateUpdate)for(var s=0,r=this.__cbOnBeginLateUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnBeginLateUpdate[a],++l):--n}if(null!=this.__cbOnceBeginLateUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceBeginLateUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceBeginLateUpdate[a],this.__cbOnceBeginLateUpdate[a]=null,c=this.__cbOnceOwnerUnbindBeginLateUpdate[a],(this.__cbOnceOwnerUnbindBeginLateUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindBeginLateUpdate[a]),u.push(this.__cbOnceBeginLateUpdate[a]))}this.__cbOnceOwnerUnbindBeginLateUpdate=h,this.__cbOnceBeginLateUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onBeginLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginLateUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginLateUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBeginLateUpdate&&(this.__cbOnOwnerUnbindBeginLateUpdate=[]),this.__cbOnOwnerUnbindBeginLateUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBeginLateUpdate&&(this.__cbOnOwnerUnbindBeginLateUpdate=[]),this.__cbOnOwnerUnbindBeginLateUpdate.push(null);null==this.__cbOnBeginLateUpdate&&(this.__cbOnBeginLateUpdate=[]),this.__cbOnBeginLateUpdate.push(t)},onceBeginLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event beginLateUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offBeginLateUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBeginLateUpdate&&(this.__cbOnceOwnerUnbindBeginLateUpdate=[]),this.__cbOnceOwnerUnbindBeginLateUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBeginLateUpdate&&(this.__cbOnceOwnerUnbindBeginLateUpdate=[]),this.__cbOnceOwnerUnbindBeginLateUpdate.push(null);null==this.__cbOnceBeginLateUpdate&&(this.__cbOnceBeginLateUpdate=[]),this.__cbOnceBeginLateUpdate.push(t)},offBeginLateUpdate:function(e){if(null!=e){var n;null!=this.__cbOnBeginLateUpdate&&-1!=(n=this.__cbOnBeginLateUpdate.indexOf(e))&&(this.__cbOnBeginLateUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBeginLateUpdate[n])&&s(),this.__cbOnOwnerUnbindBeginLateUpdate.splice(n,1)),null!=this.__cbOnceBeginLateUpdate&&-1!=(n=this.__cbOnceBeginLateUpdate.indexOf(e))&&(this.__cbOnceBeginLateUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBeginLateUpdate[n])&&s(),this.__cbOnceOwnerUnbindBeginLateUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBeginLateUpdate){for(var t=0,i=this.__cbOnOwnerUnbindBeginLateUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBeginLateUpdate[l])&&s()}this.__cbOnOwnerUnbindBeginLateUpdate=null}if(null!=this.__cbOnceOwnerUnbindBeginLateUpdate){for(t=0,i=this.__cbOnceOwnerUnbindBeginLateUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBeginLateUpdate[l])&&s()}this.__cbOnceOwnerUnbindBeginLateUpdate=null}this.__cbOnBeginLateUpdate=null,this.__cbOnceBeginLateUpdate=null}},listensBeginLateUpdate:function(){return null!=this.__cbOnBeginLateUpdate&&0<this.__cbOnBeginLateUpdate.length||null!=this.__cbOnceBeginLateUpdate&&0<this.__cbOnceBeginLateUpdate.length},__cbOnEndLateUpdate:null,__cbOnceEndLateUpdate:null,__cbOnOwnerUnbindEndLateUpdate:null,__cbOnceOwnerUnbindEndLateUpdate:null,emitEndLateUpdate:function(e){var n=0;if(null!=this.__cbOnEndLateUpdate&&(n+=this.__cbOnEndLateUpdate.length),null!=this.__cbOnceEndLateUpdate&&(n+=this.__cbOnceEndLateUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnEndLateUpdate)for(var s=0,r=this.__cbOnEndLateUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnEndLateUpdate[a],++l):--n}if(null!=this.__cbOnceEndLateUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceEndLateUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceEndLateUpdate[a],this.__cbOnceEndLateUpdate[a]=null,c=this.__cbOnceOwnerUnbindEndLateUpdate[a],(this.__cbOnceOwnerUnbindEndLateUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindEndLateUpdate[a]),u.push(this.__cbOnceEndLateUpdate[a]))}this.__cbOnceOwnerUnbindEndLateUpdate=h,this.__cbOnceEndLateUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onEndLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event endLateUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offEndLateUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindEndLateUpdate&&(this.__cbOnOwnerUnbindEndLateUpdate=[]),this.__cbOnOwnerUnbindEndLateUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindEndLateUpdate&&(this.__cbOnOwnerUnbindEndLateUpdate=[]),this.__cbOnOwnerUnbindEndLateUpdate.push(null);null==this.__cbOnEndLateUpdate&&(this.__cbOnEndLateUpdate=[]),this.__cbOnEndLateUpdate.push(t)},onceEndLateUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event endLateUpdate because owner is destroyed!");var l=function(e){null!=t&&(i.offEndLateUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindEndLateUpdate&&(this.__cbOnceOwnerUnbindEndLateUpdate=[]),this.__cbOnceOwnerUnbindEndLateUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindEndLateUpdate&&(this.__cbOnceOwnerUnbindEndLateUpdate=[]),this.__cbOnceOwnerUnbindEndLateUpdate.push(null);null==this.__cbOnceEndLateUpdate&&(this.__cbOnceEndLateUpdate=[]),this.__cbOnceEndLateUpdate.push(t)},offEndLateUpdate:function(e){if(null!=e){var n;null!=this.__cbOnEndLateUpdate&&-1!=(n=this.__cbOnEndLateUpdate.indexOf(e))&&(this.__cbOnEndLateUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindEndLateUpdate[n])&&s(),this.__cbOnOwnerUnbindEndLateUpdate.splice(n,1)),null!=this.__cbOnceEndLateUpdate&&-1!=(n=this.__cbOnceEndLateUpdate.indexOf(e))&&(this.__cbOnceEndLateUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindEndLateUpdate[n])&&s(),this.__cbOnceOwnerUnbindEndLateUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEndLateUpdate){for(var t=0,i=this.__cbOnOwnerUnbindEndLateUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindEndLateUpdate[l])&&s()}this.__cbOnOwnerUnbindEndLateUpdate=null}if(null!=this.__cbOnceOwnerUnbindEndLateUpdate){for(t=0,i=this.__cbOnceOwnerUnbindEndLateUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindEndLateUpdate[l])&&s()}this.__cbOnceOwnerUnbindEndLateUpdate=null}this.__cbOnEndLateUpdate=null,this.__cbOnceEndLateUpdate=null}},listensEndLateUpdate:function(){return null!=this.__cbOnEndLateUpdate&&0<this.__cbOnEndLateUpdate.length||null!=this.__cbOnceEndLateUpdate&&0<this.__cbOnceEndLateUpdate.length},name:null,autoUpdate:null,earlyUpdateOrder:null,set_earlyUpdateOrder:function(e){return this.earlyUpdateOrder!=e&&(this.earlyUpdateOrder=e,he.app.systems.earlyUpdateOrderDirty=!0),e},lateUpdateOrder:null,set_lateUpdateOrder:function(e){return this.lateUpdateOrder!=e&&(this.lateUpdateOrder=e,he.app.systems.lateUpdateOrderDirty=!0),e},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),he.app.systems.removeSystem(this))},earlyUpdate:function(e){},lateUpdate:function(e){},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offBeginEarlyUpdate(),this.offEndEarlyUpdate(),this.offBeginLateUpdate(),this.offEndLateUpdate()},__class__:L1,__properties__:$extend(l.prototype.__properties__,{set_lateUpdateOrder:"set_lateUpdateOrder",set_earlyUpdateOrder:"set_earlyUpdateOrder"})}),function(){this.rootScenes=new z,this.filter=null,this.autoScaleFilter=!0,this.autoDestroyFilter=!0,this.main=null,this.fadeOutWhenNextMainCanFadeIn=!0,this.bindMainToScreenSize=!0,this.keepAssetsForNextMain=!1,this._updatingScenes=[],this.all=[],L1.call(this),this.set_lateUpdateOrder(5e3)}),zt=((L["ceramic.SceneSystem"]=Ht).__name__="ceramic.SceneSystem",Ht.__properties__={set_shared:"set_shared",get_shared:"get_shared"},Ht.get_shared=function(){return Ht.lazyShared&&(Ht.lazyShared=!1,Ht.shared=new Ht),Ht.shared},Ht.set_shared=function(e){return Ht.shared=e},Ht.__super__=L1,Ht.prototype=$extend(L1.prototype,{all:null,_updatingScenes:null,keepAssetsForNextMain:null,bindMainToScreenSize:null,fadeOutWhenNextMainCanFadeIn:null,main:null,autoDestroyFilter:null,autoScaleFilter:null,filter:null,set_filter:function(e){if(this.filter!=e){var n=this.filter;if(null!=n){for(var t=o=this.rootScenes.h,i=(_=Object.keys(o)).length,l=0;l<i;)(d=t[_[l++]]).parent==n.content&&(n.content.remove(d),d.set_scaleX(1),d.set_scaleY(1));if(null!=n.content.children){for(var s=null,r=0,a=n.content.children.length;r<a;){var h=r++,u=n.content.children[h];u instanceof v&&(c=u).isRootScene&&(s=null==s?[]:s).push(c)}if(null!=s)for(r=0,a=s.length;r<a;){var c=s[h=r++];n.content.remove(c),c.set_active(!1)}}this.autoDestroyFilter?n.destroy():(n.set_scaleX(1),n.set_scaleY(1))}if(null!=(this.filter=e)){this.autoScaleFilter&&this.scaleFilter();for(var o,_,d,t=o=this.rootScenes.h,i=(_=Object.keys(o)).length,l=0;l<i;)(d=t[_[l++]]).parent!=e.content&&e.content.add(d)}}return e},scaleFilter:function(){var e=this.filter,n=he.app.screen.width/this.filter.get_width(),t=he.app.screen.height/this.filter.get_height(),e=(e.set_scaleX(n),e.set_scaleY(t),this.filter.content),n=this.filter.get_width()/he.app.screen.width,t=this.filter.get_height()/he.app.screen.height;e.set_scaleX(n),e.set_scaleY(t)},rootScenes:null,set_main:function(e){return this.main!=e&&(this.main=e,this.set("main",e,this.bindMainToScreenSize,this.keepAssetsForNextMain)),e},set:function(h,u,e,n){null==n&&(n=!1),null==e&&(e=!0);var c=this,t=this.rootScenes.h[h],i=null;if(null!=u&&u.isRootScene)for(var l=this.rootScenes.h,s=l,r=Object.keys(l),a=r.length,o=0;o<a;){var _=r[o++];if(s[_]==u){i=_;break}}if(null!=i){if(i==h)return;var d=this.rootScenes;Object.prototype.hasOwnProperty.call(d.h,i)&&delete d.h[i]}if(u!=t)if(null==u){d=this.rootScenes;if(Object.prototype.hasOwnProperty.call(d.h,h)&&delete d.h[h],"main"==h&&this.set_main(null),0<=t._lifecycleState)switch(t.get_status()){case 0:case 1:case 2:case 3:case 4:t.scheduleOnceReady(t,$bind(t,t.destroy));break;case 5:t.fadeOut($bind(t,t.destroy));break;case 6:case 7:t.destroy()}}else{if(u._lifecycleState<0)throw Q.thrown("Cannot assign a destroyed scene as root scene!");l=null;if(null==i?(u.isRootScene=!0,this.rootScenes.h[h]=u,"main"==h&&this.set_main(u),u.onDestroy(this,function(e){var n=null;if(null!=u&&u.isRootScene)for(var t=c.rootScenes.h,i=t,l=Object.keys(t),s=l.length,r=0;r<s;){var a=l[r++];if(i[a]==e){n=a;break}}null!=n&&(t=c.rootScenes,Object.prototype.hasOwnProperty.call(t.h,h)&&delete t.h[h],"main"==n)&&c.main==e&&c.set_main(null)}),u.onReplace(this,function(e){var n=null;if(null!=u&&u.isRootScene)for(var t=c.rootScenes.h,i=t,l=Object.keys(t),s=l.length,r=0;r<s;){var a=l[r++];if(i[a]==u){n=a;break}}null!=n&&c.set(n,e)})):("main"==i&&this.set_main(null),this.rootScenes.h[h]=u,"main"==h&&this.set_main(u)),null!=t){n&&(l=t._assets);var b=function(){n&&(t._assets=null),t.destroy(),t=null};if(this.fadeOutWhenNextMainCanFadeIn){var g=null;switch(u.get_status()){case 0:case 1:case 2:case 3:g=function(e,n){switch(e){case 0:case 1:case 2:case 3:break;case 4:case 5:case 6:case 7:switch(u.offStatusChange(g),t.get_status()){case 5:t.fadeOut(b);break;case 0:case 1:case 2:case 3:case 4:case 6:case 7:b()}}},u.onStatusChange(t,g);break;case 4:case 5:case 6:case 7:switch(t.get_status()){case 5:t.fadeOut(b);break;case 0:case 1:case 2:case 3:case 4:case 6:case 7:b()}}}else switch(t.get_status()){case 5:t.fadeOut(b);break;case 0:case 1:case 2:case 3:case 4:case 6:case 7:b()}}null==i&&(u._assets=l,e&&u.bindToScreenSize(),null!=this.filter&&this.filter.content.add(u),u._boot())}},get:function(e){return this.rootScenes.h[e]},setCurrentScene:function(e,n){this.keepAssetsForNextMain=n=null==n?!1:n,this.set_main(e)},lateUpdate:function(e){for(var n=this.all.length,t=0,i=n;t<i;){var l=t++;this._updatingScenes[l]=this.all[l]}for(t=0,i=n;t<i;){var l=t++,s=this._updatingScenes[l];if((1!=(1&s.flags)||s.autoUpdateWhenInactive)&&(!(s._lifecycleState<0)&&(0==s.get_status()&&null!=s.parent&&s._boot(),!s.paused)&&s.autoUpdate))switch(s.get_status()){case 4:case 5:case 6:s.update(e)}}for(t=0,i=n;t<i;){l=t++;this._updatingScenes[l]=null}this.autoScaleFilter&&null!=this.filter&&this.scaleFilter()},__class__:Ht,__properties__:$extend(L1.prototype.__properties__,{set_filter:"set_filter",set_main:"set_main"})}),function(){this.hitVisuals=[],this.matchedOverListeners=new Hl,this.matchedDownListeners=new Hl,this.visualsListenPointerOver=!1,this.maxTouchIndex=-1,this.prevMouseY=0,this.prevMouseX=0,this.prevTouchPositions=new Bn(16,.5,!1),this.pressedTouches=new rn(16,.5,!1),this.pressedMouseButtons=new rn(16,.5,!1),this._numPointerDown=0,this.resizing=!1,this.reverseMatrix=new n,this.matrix=new n,this.unobservedTexturesDensity=1,this.texturesDensityAutoruns=null,this.unobservedFocusedVisual=null,this.focusedVisualAutoruns=null,this.touches=new Kn(8,.5,!1),this.mouseWheelDeltaY=0,this.mouseWheelDeltaX=0,this.mouseDeltaY=0,this.mouseDeltaX=0,this.mouseY=0,this.mouseX=0,this.pointerDeltaY=0,this.pointerDeltaX=0,this.pointerY=0,this.pointerX=0,this.offsetY=0,this.offsetX=0,this.actualHeight=0,this.actualWidth=0,this.height=0,this.width=0,this.density=1,this.observedDirty=!1,l.call(this)}),Kt=((L["ceramic.Screen"]=zt).__name__="ceramic.Screen",zt.__interfaces__=[u],zt.__super__=l,zt.prototype=$extend(l.prototype,{__cbOnObservedDirty:null,__cbOnceObservedDirty:null,__cbOnOwnerUnbindObservedDirty:null,__cbOnceOwnerUnbindObservedDirty:null,emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnObservedDirty)for(var r=0,a=this.__cbOnObservedDirty.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnObservedDirty[h],++s):--t}if(null!=this.__cbOnceObservedDirty){for(var u=null,c=null,r=0,a=this.__cbOnceObservedDirty.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,o=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindObservedDirty[h]),c.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=u,this.__cbOnceObservedDirty=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindObservedDirty[n])&&s(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindObservedDirty[n])&&s(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindObservedDirty[l])&&s()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindObservedDirty[l])&&s()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},observedDirty:null,density:null,width:null,height:null,actualWidth:null,actualHeight:null,offsetX:null,offsetY:null,nativeWidth:null,get_nativeWidth:function(){return C.app.screenWidth},nativeHeight:null,get_nativeHeight:function(){return C.app.screenHeight},nativeDensity:null,get_nativeDensity:function(){return C.app.screenDensity},pointerX:null,pointerY:null,pointerDeltaX:null,pointerDeltaY:null,mouseX:null,mouseY:null,mouseDeltaX:null,mouseDeltaY:null,mouseWheelDeltaX:null,mouseWheelDeltaY:null,touches:null,focusedVisualAutoruns:null,get_focusedVisual:function(){var e,n,t=this.unobservedFocusedVisual;return null!=M.current&&(e=M.current,null!=(n=this.focusedVisualAutoruns)||(n=M.getAutorunArray(),null!=(this.focusedVisualAutoruns=n)))&&e.bindToAutorunArray(n),t},set_focusedVisual:function(e){var n=this.unobservedFocusedVisual;return this.set_unobservedFocusedVisual(e),n!=e&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFocusedVisualChange(e,n),null!=(n=this.focusedVisualAutoruns))&&(this.focusedVisualAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateFocusedVisual:function(){var e=this.unobservedFocusedVisual,e=(this.emitFocusedVisualChange(e,e),this.focusedVisualAutoruns);null!=e&&(this.focusedVisualAutoruns=null,M.invalidateAutorunArray(e))},unobservedFocusedVisual:null,__cbOnFocusedVisualChange:null,__cbOnceFocusedVisualChange:null,__cbOnOwnerUnbindFocusedVisualChange:null,__cbOnceOwnerUnbindFocusedVisualChange:null,emitFocusedVisualChange:function(e,n){var t=0;if(null!=this.__cbOnFocusedVisualChange&&(t+=this.__cbOnFocusedVisualChange.length),null!=this.__cbOnceFocusedVisualChange&&(t+=this.__cbOnceFocusedVisualChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnFocusedVisualChange)for(var r=0,a=this.__cbOnFocusedVisualChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnFocusedVisualChange[h],++s):--t}if(null!=this.__cbOnceFocusedVisualChange){for(var u=null,c=null,r=0,a=this.__cbOnceFocusedVisualChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceFocusedVisualChange[h],this.__cbOnceFocusedVisualChange[h]=null,o=this.__cbOnceOwnerUnbindFocusedVisualChange[h],(this.__cbOnceOwnerUnbindFocusedVisualChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindFocusedVisualChange[h]),c.push(this.__cbOnceFocusedVisualChange[h]))}this.__cbOnceOwnerUnbindFocusedVisualChange=u,this.__cbOnceFocusedVisualChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onFocusedVisualChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event focusedVisualChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFocusedVisualChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFocusedVisualChange&&(this.__cbOnOwnerUnbindFocusedVisualChange=[]),this.__cbOnOwnerUnbindFocusedVisualChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFocusedVisualChange&&(this.__cbOnOwnerUnbindFocusedVisualChange=[]),this.__cbOnOwnerUnbindFocusedVisualChange.push(null);null==this.__cbOnFocusedVisualChange&&(this.__cbOnFocusedVisualChange=[]),this.__cbOnFocusedVisualChange.push(t)},onceFocusedVisualChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event focusedVisualChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFocusedVisualChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFocusedVisualChange&&(this.__cbOnceOwnerUnbindFocusedVisualChange=[]),this.__cbOnceOwnerUnbindFocusedVisualChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFocusedVisualChange&&(this.__cbOnceOwnerUnbindFocusedVisualChange=[]),this.__cbOnceOwnerUnbindFocusedVisualChange.push(null);null==this.__cbOnceFocusedVisualChange&&(this.__cbOnceFocusedVisualChange=[]),this.__cbOnceFocusedVisualChange.push(t)},offFocusedVisualChange:function(e){if(null!=e){var n;null!=this.__cbOnFocusedVisualChange&&-1!=(n=this.__cbOnFocusedVisualChange.indexOf(e))&&(this.__cbOnFocusedVisualChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFocusedVisualChange[n])&&s(),this.__cbOnOwnerUnbindFocusedVisualChange.splice(n,1)),null!=this.__cbOnceFocusedVisualChange&&-1!=(n=this.__cbOnceFocusedVisualChange.indexOf(e))&&(this.__cbOnceFocusedVisualChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFocusedVisualChange[n])&&s(),this.__cbOnceOwnerUnbindFocusedVisualChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFocusedVisualChange){for(var t=0,i=this.__cbOnOwnerUnbindFocusedVisualChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFocusedVisualChange[l])&&s()}this.__cbOnOwnerUnbindFocusedVisualChange=null}if(null!=this.__cbOnceOwnerUnbindFocusedVisualChange){for(t=0,i=this.__cbOnceOwnerUnbindFocusedVisualChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFocusedVisualChange[l])&&s()}this.__cbOnceOwnerUnbindFocusedVisualChange=null}this.__cbOnFocusedVisualChange=null,this.__cbOnceFocusedVisualChange=null}},listensFocusedVisualChange:function(){return null!=this.__cbOnFocusedVisualChange&&0<this.__cbOnFocusedVisualChange.length||null!=this.__cbOnceFocusedVisualChange&&0<this.__cbOnceFocusedVisualChange.length},set_unobservedFocusedVisual:function(e){var n;return this.unobservedFocusedVisual!=e&&(n=this.unobservedFocusedVisual,this.unobservedFocusedVisual=e,null!=n&&(this.emitBlur(n),n.emitBlur()),null!=e)&&(this.emitFocus(e),e.emitFocus()),e},texturesDensityAutoruns:null,get_texturesDensity:function(){var e,n,t=this.unobservedTexturesDensity;return null!=M.current&&(e=M.current,null!=(n=this.texturesDensityAutoruns)||(n=M.getAutorunArray(),null!=(this.texturesDensityAutoruns=n)))&&e.bindToAutorunArray(n),t},set_texturesDensity:function(e){var n=this.unobservedTexturesDensity;return n!=(this.unobservedTexturesDensity=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTexturesDensityChange(e,n),null!=(n=this.texturesDensityAutoruns))&&(this.texturesDensityAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTexturesDensity:function(){var e=this.unobservedTexturesDensity,e=(this.emitTexturesDensityChange(e,e),this.texturesDensityAutoruns);null!=e&&(this.texturesDensityAutoruns=null,M.invalidateAutorunArray(e))},unobservedTexturesDensity:null,__cbOnTexturesDensityChange:null,__cbOnceTexturesDensityChange:null,__cbOnOwnerUnbindTexturesDensityChange:null,__cbOnceOwnerUnbindTexturesDensityChange:null,emitTexturesDensityChange:function(e,n){var t=0;if(null!=this.__cbOnTexturesDensityChange&&(t+=this.__cbOnTexturesDensityChange.length),null!=this.__cbOnceTexturesDensityChange&&(t+=this.__cbOnceTexturesDensityChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTexturesDensityChange)for(var r=0,a=this.__cbOnTexturesDensityChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTexturesDensityChange[h],++s):--t}if(null!=this.__cbOnceTexturesDensityChange){for(var u=null,c=null,r=0,a=this.__cbOnceTexturesDensityChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTexturesDensityChange[h],this.__cbOnceTexturesDensityChange[h]=null,o=this.__cbOnceOwnerUnbindTexturesDensityChange[h],(this.__cbOnceOwnerUnbindTexturesDensityChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTexturesDensityChange[h]),c.push(this.__cbOnceTexturesDensityChange[h]))}this.__cbOnceOwnerUnbindTexturesDensityChange=u,this.__cbOnceTexturesDensityChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTexturesDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event texturesDensityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTexturesDensityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTexturesDensityChange&&(this.__cbOnOwnerUnbindTexturesDensityChange=[]),this.__cbOnOwnerUnbindTexturesDensityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTexturesDensityChange&&(this.__cbOnOwnerUnbindTexturesDensityChange=[]),this.__cbOnOwnerUnbindTexturesDensityChange.push(null);null==this.__cbOnTexturesDensityChange&&(this.__cbOnTexturesDensityChange=[]),this.__cbOnTexturesDensityChange.push(t)},onceTexturesDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event texturesDensityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTexturesDensityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTexturesDensityChange&&(this.__cbOnceOwnerUnbindTexturesDensityChange=[]),this.__cbOnceOwnerUnbindTexturesDensityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTexturesDensityChange&&(this.__cbOnceOwnerUnbindTexturesDensityChange=[]),this.__cbOnceOwnerUnbindTexturesDensityChange.push(null);null==this.__cbOnceTexturesDensityChange&&(this.__cbOnceTexturesDensityChange=[]),this.__cbOnceTexturesDensityChange.push(t)},offTexturesDensityChange:function(e){if(null!=e){var n;null!=this.__cbOnTexturesDensityChange&&-1!=(n=this.__cbOnTexturesDensityChange.indexOf(e))&&(this.__cbOnTexturesDensityChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTexturesDensityChange[n])&&s(),this.__cbOnOwnerUnbindTexturesDensityChange.splice(n,1)),null!=this.__cbOnceTexturesDensityChange&&-1!=(n=this.__cbOnceTexturesDensityChange.indexOf(e))&&(this.__cbOnceTexturesDensityChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTexturesDensityChange[n])&&s(),this.__cbOnceOwnerUnbindTexturesDensityChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTexturesDensityChange){for(var t=0,i=this.__cbOnOwnerUnbindTexturesDensityChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTexturesDensityChange[l])&&s()}this.__cbOnOwnerUnbindTexturesDensityChange=null}if(null!=this.__cbOnceOwnerUnbindTexturesDensityChange){for(t=0,i=this.__cbOnceOwnerUnbindTexturesDensityChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTexturesDensityChange[l])&&s()}this.__cbOnceOwnerUnbindTexturesDensityChange=null}this.__cbOnTexturesDensityChange=null,this.__cbOnceTexturesDensityChange=null}},listensTexturesDensityChange:function(){return null!=this.__cbOnTexturesDensityChange&&0<this.__cbOnTexturesDensityChange.length||null!=this.__cbOnceTexturesDensityChange&&0<this.__cbOnceTexturesDensityChange.length},matrix:null,reverseMatrix:null,resizing:null,isPointerDown:null,_numPointerDown:null,get_isPointerDown:function(){return 0<this._numPointerDown},pressedMouseButtons:null,pressedTouches:null,prevTouchPositions:null,prevMouseX:null,prevMouseY:null,maxTouchIndex:null,visualsListenPointerOver:null,__cbOnResize:null,__cbOnceResize:null,__cbOnOwnerUnbindResize:null,__cbOnceOwnerUnbindResize:null,emitResize:function(){var e=0;if(null!=this.__cbOnResize&&(e+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(e+=this.__cbOnceResize.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnResize)for(var l=0,s=this.__cbOnResize.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnResize[r],++i):--e}if(null!=this.__cbOnceResize){for(var a=null,h=null,l=0,s=this.__cbOnceResize.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceResize[r],this.__cbOnceResize[r]=null,u=this.__cbOnceOwnerUnbindResize[r],(this.__cbOnceOwnerUnbindResize[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindResize[r]),h.push(this.__cbOnceResize[r]))}this.__cbOnceOwnerUnbindResize=a,this.__cbOnceResize=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event resize because owner is destroyed!");var l=function(e){null!=t&&(i.offResize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(t)},onceResize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event resize because owner is destroyed!");var l=function(e){null!=t&&(i.offResize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(t)},offResize:function(e){if(null!=e){var n;null!=this.__cbOnResize&&-1!=(n=this.__cbOnResize.indexOf(e))&&(this.__cbOnResize.splice(n,1),null!=(s=this.__cbOnOwnerUnbindResize[n])&&s(),this.__cbOnOwnerUnbindResize.splice(n,1)),null!=this.__cbOnceResize&&-1!=(n=this.__cbOnceResize.indexOf(e))&&(this.__cbOnceResize.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindResize[n])&&s(),this.__cbOnceOwnerUnbindResize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindResize[l])&&s()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindResize[l])&&s()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&0<this.__cbOnResize.length||null!=this.__cbOnceResize&&0<this.__cbOnceResize.length},__cbOnMouseDown:null,__cbOnceMouseDown:null,__cbOnOwnerUnbindMouseDown:null,__cbOnceOwnerUnbindMouseDown:null,emitMouseDown:function(e,n,t){this.willEmitMouseDown(e,n,t);var i=0;if(null!=this.__cbOnMouseDown&&(i+=this.__cbOnMouseDown.length),null!=this.__cbOnceMouseDown&&(i+=this.__cbOnceMouseDown.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnMouseDown)for(var a=0,h=this.__cbOnMouseDown.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnMouseDown[u],++r):--i}if(null!=this.__cbOnceMouseDown){for(var c=null,o=null,a=0,h=this.__cbOnceMouseDown.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceMouseDown[u],this.__cbOnceMouseDown[u]=null,_=this.__cbOnceOwnerUnbindMouseDown[u],(this.__cbOnceOwnerUnbindMouseDown[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseDown[u]),o.push(this.__cbOnceMouseDown[u]))}this.__cbOnceOwnerUnbindMouseDown=c,this.__cbOnceMouseDown=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s),s=null}l=this.matchFirstDownListener(n,t,-1,e);null!=l&&(l._numPointerDown++,1!=l._numPointerDown&&!l.multiTouch||(he.app.screen.set_focusedVisual(l),l.emitPointerDown(new Ai(-1,e,n,t,!0)))),this.matchedDownListeners.h[1e4+e]=l},onMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseDown because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(null);null==this.__cbOnMouseDown&&(this.__cbOnMouseDown=[]),this.__cbOnMouseDown.push(t)},onceMouseDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseDown because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(null);null==this.__cbOnceMouseDown&&(this.__cbOnceMouseDown=[]),this.__cbOnceMouseDown.push(t)},offMouseDown:function(e){if(null!=e){var n;null!=this.__cbOnMouseDown&&-1!=(n=this.__cbOnMouseDown.indexOf(e))&&(this.__cbOnMouseDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseDown[n])&&s(),this.__cbOnOwnerUnbindMouseDown.splice(n,1)),null!=this.__cbOnceMouseDown&&-1!=(n=this.__cbOnceMouseDown.indexOf(e))&&(this.__cbOnceMouseDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseDown[n])&&s(),this.__cbOnceOwnerUnbindMouseDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseDown){for(var t=0,i=this.__cbOnOwnerUnbindMouseDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseDown[l])&&s()}this.__cbOnOwnerUnbindMouseDown=null}if(null!=this.__cbOnceOwnerUnbindMouseDown){for(t=0,i=this.__cbOnceOwnerUnbindMouseDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseDown[l])&&s()}this.__cbOnceOwnerUnbindMouseDown=null}this.__cbOnMouseDown=null,this.__cbOnceMouseDown=null}},listensMouseDown:function(){return null!=this.__cbOnMouseDown&&0<this.__cbOnMouseDown.length||null!=this.__cbOnceMouseDown&&0<this.__cbOnceMouseDown.length},__cbOnMouseUp:null,__cbOnceMouseUp:null,__cbOnOwnerUnbindMouseUp:null,__cbOnceOwnerUnbindMouseUp:null,emitMouseUp:function(e,n,t){this.willEmitMouseUp(e,n,t);var i=0;if(null!=this.__cbOnMouseUp&&(i+=this.__cbOnMouseUp.length),null!=this.__cbOnceMouseUp&&(i+=this.__cbOnceMouseUp.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnMouseUp)for(var a=0,h=this.__cbOnMouseUp.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnMouseUp[u],++r):--i}if(null!=this.__cbOnceMouseUp){for(var c=null,o=null,a=0,h=this.__cbOnceMouseUp.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceMouseUp[u],this.__cbOnceMouseUp[u]=null,_=this.__cbOnceOwnerUnbindMouseUp[u],(this.__cbOnceOwnerUnbindMouseUp[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindMouseUp[u]),o.push(this.__cbOnceMouseUp[u]))}this.__cbOnceOwnerUnbindMouseUp=c,this.__cbOnceMouseUp=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s),s=null}var l=1e4+e,d=this.matchedDownListeners.h[l];null!=d&&0<=d._lifecycleState&&0<d._numPointerDown&&(d._numPointerDown--,0!=d._numPointerDown&&!d.multiTouch||d.emitPointerUp(new Ai(-1,e,n,t,d._hits(n,t,!1)))),this.matchedDownListeners.remove(l)},onMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseUp because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(null);null==this.__cbOnMouseUp&&(this.__cbOnMouseUp=[]),this.__cbOnMouseUp.push(t)},onceMouseUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseUp because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(null);null==this.__cbOnceMouseUp&&(this.__cbOnceMouseUp=[]),this.__cbOnceMouseUp.push(t)},offMouseUp:function(e){if(null!=e){var n;null!=this.__cbOnMouseUp&&-1!=(n=this.__cbOnMouseUp.indexOf(e))&&(this.__cbOnMouseUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseUp[n])&&s(),this.__cbOnOwnerUnbindMouseUp.splice(n,1)),null!=this.__cbOnceMouseUp&&-1!=(n=this.__cbOnceMouseUp.indexOf(e))&&(this.__cbOnceMouseUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseUp[n])&&s(),this.__cbOnceOwnerUnbindMouseUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseUp){for(var t=0,i=this.__cbOnOwnerUnbindMouseUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseUp[l])&&s()}this.__cbOnOwnerUnbindMouseUp=null}if(null!=this.__cbOnceOwnerUnbindMouseUp){for(t=0,i=this.__cbOnceOwnerUnbindMouseUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseUp[l])&&s()}this.__cbOnceOwnerUnbindMouseUp=null}this.__cbOnMouseUp=null,this.__cbOnceMouseUp=null}},listensMouseUp:function(){return null!=this.__cbOnMouseUp&&0<this.__cbOnMouseUp.length||null!=this.__cbOnceMouseUp&&0<this.__cbOnceMouseUp.length},__cbOnMouseWheel:null,__cbOnceMouseWheel:null,__cbOnOwnerUnbindMouseWheel:null,__cbOnceOwnerUnbindMouseWheel:null,emitMouseWheel:function(e,n){this.willEmitMouseWheel(e,n);var t=0;if(null!=this.__cbOnMouseWheel&&(t+=this.__cbOnMouseWheel.length),null!=this.__cbOnceMouseWheel&&(t+=this.__cbOnceMouseWheel.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMouseWheel)for(var r=0,a=this.__cbOnMouseWheel.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMouseWheel[h],++s):--t}if(null!=this.__cbOnceMouseWheel){for(var u=null,c=null,r=0,a=this.__cbOnceMouseWheel.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMouseWheel[h],this.__cbOnceMouseWheel[h]=null,o=this.__cbOnceOwnerUnbindMouseWheel[h],(this.__cbOnceOwnerUnbindMouseWheel[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMouseWheel[h]),c.push(this.__cbOnceMouseWheel[h]))}this.__cbOnceOwnerUnbindMouseWheel=u,this.__cbOnceMouseWheel=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseWheel because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseWheel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(null);null==this.__cbOnMouseWheel&&(this.__cbOnMouseWheel=[]),this.__cbOnMouseWheel.push(t)},onceMouseWheel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseWheel because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseWheel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(null);null==this.__cbOnceMouseWheel&&(this.__cbOnceMouseWheel=[]),this.__cbOnceMouseWheel.push(t)},offMouseWheel:function(e){if(null!=e){var n;null!=this.__cbOnMouseWheel&&-1!=(n=this.__cbOnMouseWheel.indexOf(e))&&(this.__cbOnMouseWheel.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseWheel[n])&&s(),this.__cbOnOwnerUnbindMouseWheel.splice(n,1)),null!=this.__cbOnceMouseWheel&&-1!=(n=this.__cbOnceMouseWheel.indexOf(e))&&(this.__cbOnceMouseWheel.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseWheel[n])&&s(),this.__cbOnceOwnerUnbindMouseWheel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseWheel){for(var t=0,i=this.__cbOnOwnerUnbindMouseWheel.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseWheel[l])&&s()}this.__cbOnOwnerUnbindMouseWheel=null}if(null!=this.__cbOnceOwnerUnbindMouseWheel){for(t=0,i=this.__cbOnceOwnerUnbindMouseWheel.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseWheel[l])&&s()}this.__cbOnceOwnerUnbindMouseWheel=null}this.__cbOnMouseWheel=null,this.__cbOnceMouseWheel=null}},listensMouseWheel:function(){return null!=this.__cbOnMouseWheel&&0<this.__cbOnMouseWheel.length||null!=this.__cbOnceMouseWheel&&0<this.__cbOnceMouseWheel.length},__cbOnMouseMove:null,__cbOnceMouseMove:null,__cbOnOwnerUnbindMouseMove:null,__cbOnceOwnerUnbindMouseMove:null,emitMouseMove:function(e,n){this.willEmitMouseMove(e,n);var t=0;if(null!=this.__cbOnMouseMove&&(t+=this.__cbOnMouseMove.length),null!=this.__cbOnceMouseMove&&(t+=this.__cbOnceMouseMove.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMouseMove)for(var r=0,a=this.__cbOnMouseMove.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMouseMove[h],++s):--t}if(null!=this.__cbOnceMouseMove){for(var u=null,c=null,r=0,a=this.__cbOnceMouseMove.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMouseMove[h],this.__cbOnceMouseMove[h]=null,o=this.__cbOnceOwnerUnbindMouseMove[h],(this.__cbOnceOwnerUnbindMouseMove[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMouseMove[h]),c.push(this.__cbOnceMouseMove[h]))}this.__cbOnceOwnerUnbindMouseMove=u,this.__cbOnceMouseMove=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseMove because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(null);null==this.__cbOnMouseMove&&(this.__cbOnMouseMove=[]),this.__cbOnMouseMove.push(t)},onceMouseMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event mouseMove because owner is destroyed!");var l=function(e){null!=t&&(i.offMouseMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(null);null==this.__cbOnceMouseMove&&(this.__cbOnceMouseMove=[]),this.__cbOnceMouseMove.push(t)},offMouseMove:function(e){if(null!=e){var n;null!=this.__cbOnMouseMove&&-1!=(n=this.__cbOnMouseMove.indexOf(e))&&(this.__cbOnMouseMove.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMouseMove[n])&&s(),this.__cbOnOwnerUnbindMouseMove.splice(n,1)),null!=this.__cbOnceMouseMove&&-1!=(n=this.__cbOnceMouseMove.indexOf(e))&&(this.__cbOnceMouseMove.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMouseMove[n])&&s(),this.__cbOnceOwnerUnbindMouseMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMouseMove){for(var t=0,i=this.__cbOnOwnerUnbindMouseMove.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMouseMove[l])&&s()}this.__cbOnOwnerUnbindMouseMove=null}if(null!=this.__cbOnceOwnerUnbindMouseMove){for(t=0,i=this.__cbOnceOwnerUnbindMouseMove.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMouseMove[l])&&s()}this.__cbOnceOwnerUnbindMouseMove=null}this.__cbOnMouseMove=null,this.__cbOnceMouseMove=null}},listensMouseMove:function(){return null!=this.__cbOnMouseMove&&0<this.__cbOnMouseMove.length||null!=this.__cbOnceMouseMove&&0<this.__cbOnceMouseMove.length},__cbOnTouchDown:null,__cbOnceTouchDown:null,__cbOnOwnerUnbindTouchDown:null,__cbOnceOwnerUnbindTouchDown:null,emitTouchDown:function(e,n,t){this.willEmitTouchDown(e,n,t);var i=0;if(null!=this.__cbOnTouchDown&&(i+=this.__cbOnTouchDown.length),null!=this.__cbOnceTouchDown&&(i+=this.__cbOnceTouchDown.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnTouchDown)for(var a=0,h=this.__cbOnTouchDown.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnTouchDown[u],++r):--i}if(null!=this.__cbOnceTouchDown){for(var c=null,o=null,a=0,h=this.__cbOnceTouchDown.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceTouchDown[u],this.__cbOnceTouchDown[u]=null,_=this.__cbOnceOwnerUnbindTouchDown[u],(this.__cbOnceOwnerUnbindTouchDown[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTouchDown[u]),o.push(this.__cbOnceTouchDown[u]))}this.__cbOnceOwnerUnbindTouchDown=c,this.__cbOnceTouchDown=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s),s=null}l=this.matchFirstDownListener(n,t,e,-1);null!=l&&(l._numPointerDown++,1!=l._numPointerDown&&!l.multiTouch||(he.app.screen.set_focusedVisual(l),l.emitPointerDown(new Ai(e,-1,n,t,!0)))),this.matchedDownListeners.h[2e4+e]=l},onTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchDown because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(null);null==this.__cbOnTouchDown&&(this.__cbOnTouchDown=[]),this.__cbOnTouchDown.push(t)},onceTouchDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchDown because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(null);null==this.__cbOnceTouchDown&&(this.__cbOnceTouchDown=[]),this.__cbOnceTouchDown.push(t)},offTouchDown:function(e){if(null!=e){var n;null!=this.__cbOnTouchDown&&-1!=(n=this.__cbOnTouchDown.indexOf(e))&&(this.__cbOnTouchDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTouchDown[n])&&s(),this.__cbOnOwnerUnbindTouchDown.splice(n,1)),null!=this.__cbOnceTouchDown&&-1!=(n=this.__cbOnceTouchDown.indexOf(e))&&(this.__cbOnceTouchDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTouchDown[n])&&s(),this.__cbOnceOwnerUnbindTouchDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchDown){for(var t=0,i=this.__cbOnOwnerUnbindTouchDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTouchDown[l])&&s()}this.__cbOnOwnerUnbindTouchDown=null}if(null!=this.__cbOnceOwnerUnbindTouchDown){for(t=0,i=this.__cbOnceOwnerUnbindTouchDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTouchDown[l])&&s()}this.__cbOnceOwnerUnbindTouchDown=null}this.__cbOnTouchDown=null,this.__cbOnceTouchDown=null}},listensTouchDown:function(){return null!=this.__cbOnTouchDown&&0<this.__cbOnTouchDown.length||null!=this.__cbOnceTouchDown&&0<this.__cbOnceTouchDown.length},__cbOnTouchUp:null,__cbOnceTouchUp:null,__cbOnOwnerUnbindTouchUp:null,__cbOnceOwnerUnbindTouchUp:null,emitTouchUp:function(e,n,t){this.willEmitTouchUp(e,n,t);var i=0;if(null!=this.__cbOnTouchUp&&(i+=this.__cbOnTouchUp.length),null!=this.__cbOnceTouchUp&&(i+=this.__cbOnceTouchUp.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnTouchUp)for(var a=0,h=this.__cbOnTouchUp.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnTouchUp[u],++r):--i}if(null!=this.__cbOnceTouchUp){for(var c=null,o=null,a=0,h=this.__cbOnceTouchUp.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceTouchUp[u],this.__cbOnceTouchUp[u]=null,_=this.__cbOnceOwnerUnbindTouchUp[u],(this.__cbOnceOwnerUnbindTouchUp[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTouchUp[u]),o.push(this.__cbOnceTouchUp[u]))}this.__cbOnceOwnerUnbindTouchUp=c,this.__cbOnceTouchUp=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s),s=null}var l=2e4+e,d=this.matchedDownListeners.h[l];null!=d&&0<=d._lifecycleState&&0<d._numPointerDown&&(d._numPointerDown--,0!=d._numPointerDown&&!d.multiTouch||d.emitPointerUp(new Ai(e,-1,n,t,d._hits(n,t,!1)))),this.matchedDownListeners.remove(l)},onTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchUp because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(null);null==this.__cbOnTouchUp&&(this.__cbOnTouchUp=[]),this.__cbOnTouchUp.push(t)},onceTouchUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchUp because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(null);null==this.__cbOnceTouchUp&&(this.__cbOnceTouchUp=[]),this.__cbOnceTouchUp.push(t)},offTouchUp:function(e){if(null!=e){var n;null!=this.__cbOnTouchUp&&-1!=(n=this.__cbOnTouchUp.indexOf(e))&&(this.__cbOnTouchUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTouchUp[n])&&s(),this.__cbOnOwnerUnbindTouchUp.splice(n,1)),null!=this.__cbOnceTouchUp&&-1!=(n=this.__cbOnceTouchUp.indexOf(e))&&(this.__cbOnceTouchUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTouchUp[n])&&s(),this.__cbOnceOwnerUnbindTouchUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchUp){for(var t=0,i=this.__cbOnOwnerUnbindTouchUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTouchUp[l])&&s()}this.__cbOnOwnerUnbindTouchUp=null}if(null!=this.__cbOnceOwnerUnbindTouchUp){for(t=0,i=this.__cbOnceOwnerUnbindTouchUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTouchUp[l])&&s()}this.__cbOnceOwnerUnbindTouchUp=null}this.__cbOnTouchUp=null,this.__cbOnceTouchUp=null}},listensTouchUp:function(){return null!=this.__cbOnTouchUp&&0<this.__cbOnTouchUp.length||null!=this.__cbOnceTouchUp&&0<this.__cbOnceTouchUp.length},__cbOnTouchMove:null,__cbOnceTouchMove:null,__cbOnOwnerUnbindTouchMove:null,__cbOnceOwnerUnbindTouchMove:null,emitTouchMove:function(e,n,t){this.willEmitTouchMove(e,n,t);var i=0;if(null!=this.__cbOnTouchMove&&(i+=this.__cbOnTouchMove.length),null!=this.__cbOnceTouchMove&&(i+=this.__cbOnceTouchMove.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnTouchMove)for(var a=0,h=this.__cbOnTouchMove.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnTouchMove[u],++r):--i}if(null!=this.__cbOnceTouchMove){for(var c=null,o=null,a=0,h=this.__cbOnceTouchMove.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceTouchMove[u],this.__cbOnceTouchMove[u]=null,_=this.__cbOnceOwnerUnbindTouchMove[u],(this.__cbOnceOwnerUnbindTouchMove[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindTouchMove[u]),o.push(this.__cbOnceTouchMove[u]))}this.__cbOnceOwnerUnbindTouchMove=c,this.__cbOnceTouchMove=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchMove because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(null);null==this.__cbOnTouchMove&&(this.__cbOnTouchMove=[]),this.__cbOnTouchMove.push(t)},onceTouchMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event touchMove because owner is destroyed!");var l=function(e){null!=t&&(i.offTouchMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(null);null==this.__cbOnceTouchMove&&(this.__cbOnceTouchMove=[]),this.__cbOnceTouchMove.push(t)},offTouchMove:function(e){if(null!=e){var n;null!=this.__cbOnTouchMove&&-1!=(n=this.__cbOnTouchMove.indexOf(e))&&(this.__cbOnTouchMove.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTouchMove[n])&&s(),this.__cbOnOwnerUnbindTouchMove.splice(n,1)),null!=this.__cbOnceTouchMove&&-1!=(n=this.__cbOnceTouchMove.indexOf(e))&&(this.__cbOnceTouchMove.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTouchMove[n])&&s(),this.__cbOnceOwnerUnbindTouchMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTouchMove){for(var t=0,i=this.__cbOnOwnerUnbindTouchMove.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTouchMove[l])&&s()}this.__cbOnOwnerUnbindTouchMove=null}if(null!=this.__cbOnceOwnerUnbindTouchMove){for(t=0,i=this.__cbOnceOwnerUnbindTouchMove.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTouchMove[l])&&s()}this.__cbOnceOwnerUnbindTouchMove=null}this.__cbOnTouchMove=null,this.__cbOnceTouchMove=null}},listensTouchMove:function(){return null!=this.__cbOnTouchMove&&0<this.__cbOnTouchMove.length||null!=this.__cbOnceTouchMove&&0<this.__cbOnceTouchMove.length},__cbOnPointerDown:null,__cbOncePointerDown:null,__cbOnOwnerUnbindPointerDown:null,__cbOnceOwnerUnbindPointerDown:null,emitPointerDown:function(e){var n=0;if(null!=this.__cbOnPointerDown&&(n+=this.__cbOnPointerDown.length),null!=this.__cbOncePointerDown&&(n+=this.__cbOncePointerDown.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPointerDown)for(var s=0,r=this.__cbOnPointerDown.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPointerDown[a],++l):--n}if(null!=this.__cbOncePointerDown){for(var h=null,u=null,s=0,r=this.__cbOncePointerDown.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePointerDown[a],this.__cbOncePointerDown[a]=null,c=this.__cbOnceOwnerUnbindPointerDown[a],(this.__cbOnceOwnerUnbindPointerDown[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPointerDown[a]),u.push(this.__cbOncePointerDown[a]))}this.__cbOnceOwnerUnbindPointerDown=h,this.__cbOncePointerDown=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerDown because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(null);null==this.__cbOnPointerDown&&(this.__cbOnPointerDown=[]),this.__cbOnPointerDown.push(t)},oncePointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerDown because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(null);null==this.__cbOncePointerDown&&(this.__cbOncePointerDown=[]),this.__cbOncePointerDown.push(t)},offPointerDown:function(e){if(null!=e){var n;null!=this.__cbOnPointerDown&&-1!=(n=this.__cbOnPointerDown.indexOf(e))&&(this.__cbOnPointerDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPointerDown[n])&&s(),this.__cbOnOwnerUnbindPointerDown.splice(n,1)),null!=this.__cbOncePointerDown&&-1!=(n=this.__cbOncePointerDown.indexOf(e))&&(this.__cbOncePointerDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPointerDown[n])&&s(),this.__cbOnceOwnerUnbindPointerDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindPointerDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPointerDown[l])&&s()}this.__cbOnOwnerUnbindPointerDown=null}if(null!=this.__cbOnceOwnerUnbindPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindPointerDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPointerDown[l])&&s()}this.__cbOnceOwnerUnbindPointerDown=null}this.__cbOnPointerDown=null,this.__cbOncePointerDown=null}},listensPointerDown:function(){return null!=this.__cbOnPointerDown&&0<this.__cbOnPointerDown.length||null!=this.__cbOncePointerDown&&0<this.__cbOncePointerDown.length},__cbOnPointerUp:null,__cbOncePointerUp:null,__cbOnOwnerUnbindPointerUp:null,__cbOnceOwnerUnbindPointerUp:null,emitPointerUp:function(e){var n=0;if(null!=this.__cbOnPointerUp&&(n+=this.__cbOnPointerUp.length),null!=this.__cbOncePointerUp&&(n+=this.__cbOncePointerUp.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPointerUp)for(var s=0,r=this.__cbOnPointerUp.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPointerUp[a],++l):--n}if(null!=this.__cbOncePointerUp){for(var h=null,u=null,s=0,r=this.__cbOncePointerUp.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePointerUp[a],this.__cbOncePointerUp[a]=null,c=this.__cbOnceOwnerUnbindPointerUp[a],(this.__cbOnceOwnerUnbindPointerUp[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPointerUp[a]),u.push(this.__cbOncePointerUp[a]))}this.__cbOnceOwnerUnbindPointerUp=h,this.__cbOncePointerUp=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerUp because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(null);null==this.__cbOnPointerUp&&(this.__cbOnPointerUp=[]),this.__cbOnPointerUp.push(t)},oncePointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerUp because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(null);null==this.__cbOncePointerUp&&(this.__cbOncePointerUp=[]),this.__cbOncePointerUp.push(t)},offPointerUp:function(e){if(null!=e){var n;null!=this.__cbOnPointerUp&&-1!=(n=this.__cbOnPointerUp.indexOf(e))&&(this.__cbOnPointerUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPointerUp[n])&&s(),this.__cbOnOwnerUnbindPointerUp.splice(n,1)),null!=this.__cbOncePointerUp&&-1!=(n=this.__cbOncePointerUp.indexOf(e))&&(this.__cbOncePointerUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPointerUp[n])&&s(),this.__cbOnceOwnerUnbindPointerUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindPointerUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPointerUp[l])&&s()}this.__cbOnOwnerUnbindPointerUp=null}if(null!=this.__cbOnceOwnerUnbindPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindPointerUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPointerUp[l])&&s()}this.__cbOnceOwnerUnbindPointerUp=null}this.__cbOnPointerUp=null,this.__cbOncePointerUp=null}},listensPointerUp:function(){return null!=this.__cbOnPointerUp&&0<this.__cbOnPointerUp.length||null!=this.__cbOncePointerUp&&0<this.__cbOncePointerUp.length},__cbOnPointerMove:null,__cbOncePointerMove:null,__cbOnOwnerUnbindPointerMove:null,__cbOnceOwnerUnbindPointerMove:null,emitPointerMove:function(e){var n=0;if(null!=this.__cbOnPointerMove&&(n+=this.__cbOnPointerMove.length),null!=this.__cbOncePointerMove&&(n+=this.__cbOncePointerMove.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnPointerMove)for(var s=0,r=this.__cbOnPointerMove.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnPointerMove[a],++l):--n}if(null!=this.__cbOncePointerMove){for(var h=null,u=null,s=0,r=this.__cbOncePointerMove.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOncePointerMove[a],this.__cbOncePointerMove[a]=null,c=this.__cbOnceOwnerUnbindPointerMove[a],(this.__cbOnceOwnerUnbindPointerMove[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindPointerMove[a]),u.push(this.__cbOncePointerMove[a]))}this.__cbOnceOwnerUnbindPointerMove=h,this.__cbOncePointerMove=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onPointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerMove because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPointerMove&&(this.__cbOnOwnerUnbindPointerMove=[]),this.__cbOnOwnerUnbindPointerMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPointerMove&&(this.__cbOnOwnerUnbindPointerMove=[]),this.__cbOnOwnerUnbindPointerMove.push(null);null==this.__cbOnPointerMove&&(this.__cbOnPointerMove=[]),this.__cbOnPointerMove.push(t)},oncePointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event pointerMove because owner is destroyed!");var l=function(e){null!=t&&(i.offPointerMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPointerMove&&(this.__cbOnceOwnerUnbindPointerMove=[]),this.__cbOnceOwnerUnbindPointerMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPointerMove&&(this.__cbOnceOwnerUnbindPointerMove=[]),this.__cbOnceOwnerUnbindPointerMove.push(null);null==this.__cbOncePointerMove&&(this.__cbOncePointerMove=[]),this.__cbOncePointerMove.push(t)},offPointerMove:function(e){if(null!=e){var n;null!=this.__cbOnPointerMove&&-1!=(n=this.__cbOnPointerMove.indexOf(e))&&(this.__cbOnPointerMove.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPointerMove[n])&&s(),this.__cbOnOwnerUnbindPointerMove.splice(n,1)),null!=this.__cbOncePointerMove&&-1!=(n=this.__cbOncePointerMove.indexOf(e))&&(this.__cbOncePointerMove.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPointerMove[n])&&s(),this.__cbOnceOwnerUnbindPointerMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPointerMove){for(var t=0,i=this.__cbOnOwnerUnbindPointerMove.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPointerMove[l])&&s()}this.__cbOnOwnerUnbindPointerMove=null}if(null!=this.__cbOnceOwnerUnbindPointerMove){for(t=0,i=this.__cbOnceOwnerUnbindPointerMove.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPointerMove[l])&&s()}this.__cbOnceOwnerUnbindPointerMove=null}this.__cbOnPointerMove=null,this.__cbOncePointerMove=null}},listensPointerMove:function(){return null!=this.__cbOnPointerMove&&0<this.__cbOnPointerMove.length||null!=this.__cbOncePointerMove&&0<this.__cbOncePointerMove.length},__cbOnMultiTouchPointerDown:null,__cbOnceMultiTouchPointerDown:null,__cbOnOwnerUnbindMultiTouchPointerDown:null,__cbOnceOwnerUnbindMultiTouchPointerDown:null,emitMultiTouchPointerDown:function(e){var n=0;if(null!=this.__cbOnMultiTouchPointerDown&&(n+=this.__cbOnMultiTouchPointerDown.length),null!=this.__cbOnceMultiTouchPointerDown&&(n+=this.__cbOnceMultiTouchPointerDown.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnMultiTouchPointerDown)for(var s=0,r=this.__cbOnMultiTouchPointerDown.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnMultiTouchPointerDown[a],++l):--n}if(null!=this.__cbOnceMultiTouchPointerDown){for(var h=null,u=null,s=0,r=this.__cbOnceMultiTouchPointerDown.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceMultiTouchPointerDown[a],this.__cbOnceMultiTouchPointerDown[a]=null,c=this.__cbOnceOwnerUnbindMultiTouchPointerDown[a],(this.__cbOnceOwnerUnbindMultiTouchPointerDown[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindMultiTouchPointerDown[a]),u.push(this.__cbOnceMultiTouchPointerDown[a]))}this.__cbOnceOwnerUnbindMultiTouchPointerDown=h,this.__cbOnceMultiTouchPointerDown=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onMultiTouchPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event multiTouchPointerDown because owner is destroyed!");var l=function(e){null!=t&&(i.offMultiTouchPointerDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMultiTouchPointerDown&&(this.__cbOnOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnOwnerUnbindMultiTouchPointerDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMultiTouchPointerDown&&(this.__cbOnOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnOwnerUnbindMultiTouchPointerDown.push(null);null==this.__cbOnMultiTouchPointerDown&&(this.__cbOnMultiTouchPointerDown=[]),this.__cbOnMultiTouchPointerDown.push(t)},onceMultiTouchPointerDown:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event multiTouchPointerDown because owner is destroyed!");var l=function(e){null!=t&&(i.offMultiTouchPointerDown(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMultiTouchPointerDown&&(this.__cbOnceOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnceOwnerUnbindMultiTouchPointerDown.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMultiTouchPointerDown&&(this.__cbOnceOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnceOwnerUnbindMultiTouchPointerDown.push(null);null==this.__cbOnceMultiTouchPointerDown&&(this.__cbOnceMultiTouchPointerDown=[]),this.__cbOnceMultiTouchPointerDown.push(t)},offMultiTouchPointerDown:function(e){if(null!=e){var n;null!=this.__cbOnMultiTouchPointerDown&&-1!=(n=this.__cbOnMultiTouchPointerDown.indexOf(e))&&(this.__cbOnMultiTouchPointerDown.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMultiTouchPointerDown[n])&&s(),this.__cbOnOwnerUnbindMultiTouchPointerDown.splice(n,1)),null!=this.__cbOnceMultiTouchPointerDown&&-1!=(n=this.__cbOnceMultiTouchPointerDown.indexOf(e))&&(this.__cbOnceMultiTouchPointerDown.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMultiTouchPointerDown[n])&&s(),this.__cbOnceOwnerUnbindMultiTouchPointerDown.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerDown.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMultiTouchPointerDown[l])&&s()}this.__cbOnOwnerUnbindMultiTouchPointerDown=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerDown.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMultiTouchPointerDown[l])&&s()}this.__cbOnceOwnerUnbindMultiTouchPointerDown=null}this.__cbOnMultiTouchPointerDown=null,this.__cbOnceMultiTouchPointerDown=null}},listensMultiTouchPointerDown:function(){return null!=this.__cbOnMultiTouchPointerDown&&0<this.__cbOnMultiTouchPointerDown.length||null!=this.__cbOnceMultiTouchPointerDown&&0<this.__cbOnceMultiTouchPointerDown.length},__cbOnMultiTouchPointerUp:null,__cbOnceMultiTouchPointerUp:null,__cbOnOwnerUnbindMultiTouchPointerUp:null,__cbOnceOwnerUnbindMultiTouchPointerUp:null,emitMultiTouchPointerUp:function(e){var n=0;if(null!=this.__cbOnMultiTouchPointerUp&&(n+=this.__cbOnMultiTouchPointerUp.length),null!=this.__cbOnceMultiTouchPointerUp&&(n+=this.__cbOnceMultiTouchPointerUp.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnMultiTouchPointerUp)for(var s=0,r=this.__cbOnMultiTouchPointerUp.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnMultiTouchPointerUp[a],++l):--n}if(null!=this.__cbOnceMultiTouchPointerUp){for(var h=null,u=null,s=0,r=this.__cbOnceMultiTouchPointerUp.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceMultiTouchPointerUp[a],this.__cbOnceMultiTouchPointerUp[a]=null,c=this.__cbOnceOwnerUnbindMultiTouchPointerUp[a],(this.__cbOnceOwnerUnbindMultiTouchPointerUp[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindMultiTouchPointerUp[a]),u.push(this.__cbOnceMultiTouchPointerUp[a]))}this.__cbOnceOwnerUnbindMultiTouchPointerUp=h,this.__cbOnceMultiTouchPointerUp=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onMultiTouchPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event multiTouchPointerUp because owner is destroyed!");var l=function(e){null!=t&&(i.offMultiTouchPointerUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMultiTouchPointerUp&&(this.__cbOnOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnOwnerUnbindMultiTouchPointerUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMultiTouchPointerUp&&(this.__cbOnOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnOwnerUnbindMultiTouchPointerUp.push(null);null==this.__cbOnMultiTouchPointerUp&&(this.__cbOnMultiTouchPointerUp=[]),this.__cbOnMultiTouchPointerUp.push(t)},onceMultiTouchPointerUp:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event multiTouchPointerUp because owner is destroyed!");var l=function(e){null!=t&&(i.offMultiTouchPointerUp(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMultiTouchPointerUp&&(this.__cbOnceOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnceOwnerUnbindMultiTouchPointerUp.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMultiTouchPointerUp&&(this.__cbOnceOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnceOwnerUnbindMultiTouchPointerUp.push(null);null==this.__cbOnceMultiTouchPointerUp&&(this.__cbOnceMultiTouchPointerUp=[]),this.__cbOnceMultiTouchPointerUp.push(t)},offMultiTouchPointerUp:function(e){if(null!=e){var n;null!=this.__cbOnMultiTouchPointerUp&&-1!=(n=this.__cbOnMultiTouchPointerUp.indexOf(e))&&(this.__cbOnMultiTouchPointerUp.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMultiTouchPointerUp[n])&&s(),this.__cbOnOwnerUnbindMultiTouchPointerUp.splice(n,1)),null!=this.__cbOnceMultiTouchPointerUp&&-1!=(n=this.__cbOnceMultiTouchPointerUp.indexOf(e))&&(this.__cbOnceMultiTouchPointerUp.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMultiTouchPointerUp[n])&&s(),this.__cbOnceOwnerUnbindMultiTouchPointerUp.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerUp.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMultiTouchPointerUp[l])&&s()}this.__cbOnOwnerUnbindMultiTouchPointerUp=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerUp.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMultiTouchPointerUp[l])&&s()}this.__cbOnceOwnerUnbindMultiTouchPointerUp=null}this.__cbOnMultiTouchPointerUp=null,this.__cbOnceMultiTouchPointerUp=null}},listensMultiTouchPointerUp:function(){return null!=this.__cbOnMultiTouchPointerUp&&0<this.__cbOnMultiTouchPointerUp.length||null!=this.__cbOnceMultiTouchPointerUp&&0<this.__cbOnceMultiTouchPointerUp.length},__cbOnMultiTouchPointerMove:null,__cbOnceMultiTouchPointerMove:null,__cbOnOwnerUnbindMultiTouchPointerMove:null,__cbOnceOwnerUnbindMultiTouchPointerMove:null,emitMultiTouchPointerMove:function(e){var n=0;if(null!=this.__cbOnMultiTouchPointerMove&&(n+=this.__cbOnMultiTouchPointerMove.length),null!=this.__cbOnceMultiTouchPointerMove&&(n+=this.__cbOnceMultiTouchPointerMove.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnMultiTouchPointerMove)for(var s=0,r=this.__cbOnMultiTouchPointerMove.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnMultiTouchPointerMove[a],++l):--n}if(null!=this.__cbOnceMultiTouchPointerMove){for(var h=null,u=null,s=0,r=this.__cbOnceMultiTouchPointerMove.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceMultiTouchPointerMove[a],this.__cbOnceMultiTouchPointerMove[a]=null,c=this.__cbOnceOwnerUnbindMultiTouchPointerMove[a],(this.__cbOnceOwnerUnbindMultiTouchPointerMove[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindMultiTouchPointerMove[a]),u.push(this.__cbOnceMultiTouchPointerMove[a]))}this.__cbOnceOwnerUnbindMultiTouchPointerMove=h,this.__cbOnceMultiTouchPointerMove=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onMultiTouchPointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event multiTouchPointerMove because owner is destroyed!");var l=function(e){null!=t&&(i.offMultiTouchPointerMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMultiTouchPointerMove&&(this.__cbOnOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnOwnerUnbindMultiTouchPointerMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMultiTouchPointerMove&&(this.__cbOnOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnOwnerUnbindMultiTouchPointerMove.push(null);null==this.__cbOnMultiTouchPointerMove&&(this.__cbOnMultiTouchPointerMove=[]),this.__cbOnMultiTouchPointerMove.push(t)},onceMultiTouchPointerMove:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event multiTouchPointerMove because owner is destroyed!");var l=function(e){null!=t&&(i.offMultiTouchPointerMove(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMultiTouchPointerMove&&(this.__cbOnceOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnceOwnerUnbindMultiTouchPointerMove.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMultiTouchPointerMove&&(this.__cbOnceOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnceOwnerUnbindMultiTouchPointerMove.push(null);null==this.__cbOnceMultiTouchPointerMove&&(this.__cbOnceMultiTouchPointerMove=[]),this.__cbOnceMultiTouchPointerMove.push(t)},offMultiTouchPointerMove:function(e){if(null!=e){var n;null!=this.__cbOnMultiTouchPointerMove&&-1!=(n=this.__cbOnMultiTouchPointerMove.indexOf(e))&&(this.__cbOnMultiTouchPointerMove.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMultiTouchPointerMove[n])&&s(),this.__cbOnOwnerUnbindMultiTouchPointerMove.splice(n,1)),null!=this.__cbOnceMultiTouchPointerMove&&-1!=(n=this.__cbOnceMultiTouchPointerMove.indexOf(e))&&(this.__cbOnceMultiTouchPointerMove.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMultiTouchPointerMove[n])&&s(),this.__cbOnceOwnerUnbindMultiTouchPointerMove.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerMove){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerMove.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMultiTouchPointerMove[l])&&s()}this.__cbOnOwnerUnbindMultiTouchPointerMove=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerMove){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerMove.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMultiTouchPointerMove[l])&&s()}this.__cbOnceOwnerUnbindMultiTouchPointerMove=null}this.__cbOnMultiTouchPointerMove=null,this.__cbOnceMultiTouchPointerMove=null}},listensMultiTouchPointerMove:function(){return null!=this.__cbOnMultiTouchPointerMove&&0<this.__cbOnMultiTouchPointerMove.length||null!=this.__cbOnceMultiTouchPointerMove&&0<this.__cbOnceMultiTouchPointerMove.length},__cbOnFocus:null,__cbOnceFocus:null,__cbOnOwnerUnbindFocus:null,__cbOnceOwnerUnbindFocus:null,emitFocus:function(e){var n=0;if(null!=this.__cbOnFocus&&(n+=this.__cbOnFocus.length),null!=this.__cbOnceFocus&&(n+=this.__cbOnceFocus.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnFocus)for(var s=0,r=this.__cbOnFocus.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnFocus[a],++l):--n}if(null!=this.__cbOnceFocus){for(var h=null,u=null,s=0,r=this.__cbOnceFocus.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceFocus[a],this.__cbOnceFocus[a]=null,c=this.__cbOnceOwnerUnbindFocus[a],(this.__cbOnceOwnerUnbindFocus[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindFocus[a]),u.push(this.__cbOnceFocus[a]))}this.__cbOnceOwnerUnbindFocus=h,this.__cbOnceFocus=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event focus because owner is destroyed!");var l=function(e){null!=t&&(i.offFocus(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(null);null==this.__cbOnFocus&&(this.__cbOnFocus=[]),this.__cbOnFocus.push(t)},onceFocus:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event focus because owner is destroyed!");var l=function(e){null!=t&&(i.offFocus(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(null);null==this.__cbOnceFocus&&(this.__cbOnceFocus=[]),this.__cbOnceFocus.push(t)},offFocus:function(e){if(null!=e){var n;null!=this.__cbOnFocus&&-1!=(n=this.__cbOnFocus.indexOf(e))&&(this.__cbOnFocus.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFocus[n])&&s(),this.__cbOnOwnerUnbindFocus.splice(n,1)),null!=this.__cbOnceFocus&&-1!=(n=this.__cbOnceFocus.indexOf(e))&&(this.__cbOnceFocus.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFocus[n])&&s(),this.__cbOnceOwnerUnbindFocus.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFocus){for(var t=0,i=this.__cbOnOwnerUnbindFocus.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFocus[l])&&s()}this.__cbOnOwnerUnbindFocus=null}if(null!=this.__cbOnceOwnerUnbindFocus){for(t=0,i=this.__cbOnceOwnerUnbindFocus.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFocus[l])&&s()}this.__cbOnceOwnerUnbindFocus=null}this.__cbOnFocus=null,this.__cbOnceFocus=null}},listensFocus:function(){return null!=this.__cbOnFocus&&0<this.__cbOnFocus.length||null!=this.__cbOnceFocus&&0<this.__cbOnceFocus.length},__cbOnBlur:null,__cbOnceBlur:null,__cbOnOwnerUnbindBlur:null,__cbOnceOwnerUnbindBlur:null,emitBlur:function(e){var n=0;if(null!=this.__cbOnBlur&&(n+=this.__cbOnBlur.length),null!=this.__cbOnceBlur&&(n+=this.__cbOnceBlur.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnBlur)for(var s=0,r=this.__cbOnBlur.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnBlur[a],++l):--n}if(null!=this.__cbOnceBlur){for(var h=null,u=null,s=0,r=this.__cbOnceBlur.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceBlur[a],this.__cbOnceBlur[a]=null,c=this.__cbOnceOwnerUnbindBlur[a],(this.__cbOnceOwnerUnbindBlur[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindBlur[a]),u.push(this.__cbOnceBlur[a]))}this.__cbOnceOwnerUnbindBlur=h,this.__cbOnceBlur=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event blur because owner is destroyed!");var l=function(e){null!=t&&(i.offBlur(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(null);null==this.__cbOnBlur&&(this.__cbOnBlur=[]),this.__cbOnBlur.push(t)},onceBlur:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event blur because owner is destroyed!");var l=function(e){null!=t&&(i.offBlur(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(null);null==this.__cbOnceBlur&&(this.__cbOnceBlur=[]),this.__cbOnceBlur.push(t)},offBlur:function(e){if(null!=e){var n;null!=this.__cbOnBlur&&-1!=(n=this.__cbOnBlur.indexOf(e))&&(this.__cbOnBlur.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBlur[n])&&s(),this.__cbOnOwnerUnbindBlur.splice(n,1)),null!=this.__cbOnceBlur&&-1!=(n=this.__cbOnceBlur.indexOf(e))&&(this.__cbOnceBlur.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBlur[n])&&s(),this.__cbOnceOwnerUnbindBlur.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBlur){for(var t=0,i=this.__cbOnOwnerUnbindBlur.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBlur[l])&&s()}this.__cbOnOwnerUnbindBlur=null}if(null!=this.__cbOnceOwnerUnbindBlur){for(t=0,i=this.__cbOnceOwnerUnbindBlur.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBlur[l])&&s()}this.__cbOnceOwnerUnbindBlur=null}this.__cbOnBlur=null,this.__cbOnceBlur=null}},listensBlur:function(){return null!=this.__cbOnBlur&&0<this.__cbOnBlur.length||null!=this.__cbOnceBlur&&0<this.__cbOnceBlur.length},backendReady:function(){var O=this;he.app.backend.screen.onResize(this,$bind(this,this.resize)),this.resize(),he.app.settings.onBackgroundChange(this,function(e,n){he.app.backend.screen.setBackground(e)}),he.app.settings.onTitleChange(this,function(e,n){he.app.backend.screen.setWindowTitle(e)}),he.app.settings.onFullscreenChange(this,function(e,n){he.app.backend.screen.setWindowFullscreen(e)}),he.app.settings.onScalingChange(this,function(e,n){O.resize()}),he.app.settings.onTargetWidthChange(this,function(e,n){O.resize()}),he.app.settings.onTargetHeightChange(this,function(e,n){O.resize()}),he.app.settings.onTargetDensityChange(this,function(e,n){O.updateTexturesDensity()}),this.matrix.onChange(this,function(){(e=O.reverseMatrix).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0;var e=O.reverseMatrix,n=O.matrix,t=e.a*n.a+e.b*n.c,i=(e.b=e.a*n.b+e.b*n.d,e.a=t,e.c*n.a+e.d*n.c),i=(e.d=e.c*n.b+e.d*n.d,e.c=i,e.tx*n.a+e.ty*n.c+n.tx);e.ty=e.tx*n.b+e.ty*n.d+n.ty,e.tx=i,e.changedDirty=!0;n=(e=O.reverseMatrix).a*e.d-e.b*e.c;0==n?(e.a=e.b=e.c=e.d=0,e.tx=-e.tx,e.ty=-e.ty):(t=e.d*(n=1/n),e.d=e.a*n,e.a=t,e.b*=-n,e.c*=-n,i=-e.a*e.tx-e.c*e.ty,e.ty=-e.b*e.tx-e.d*e.ty,e.tx=i),e.changedDirty=!0,O.reverseMatrix.emitChange()}),he.app.backend.screen.onMouseDown(this,function(d,b,g){he.app.beginUpdateCallbacks.push(function(){he.app.flushImmediate();for(var e=b*C.app.screenDensity,n=g*C.app.screenDensity,t=O.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=O.reverseMatrix).b+n*t.d+t.ty,n=new Ai(-1,d,i,e,0<=i&&i<=O.width&&0<=e&&e<=O.height),t=(-1!=n.buttonId&&(O.mouseX=n.x,O.mouseY=n.y),-1!=n.touchIndex&&(null==(o=O.touches.get(n.touchIndex))?(o=new Di(n.touchIndex,n.x,n.y,0,0),O.touches.set(n.touchIndex,o)):(o.x=n.x,o.y=n.y)),O.pointerX),l=O.pointerY,s=0,r=0,a=0,h=O.touches,u=0,c=h.values.length;;){for(;u<c&&null==h.values[u];)++u;if(!(u<c))break;var o,_=u++;++s,r+=(o=h.values[_]).x,a+=o.y}0<s?(O.pointerX=r/s,O.pointerY=a/s):(O.pointerX=O.mouseX,O.pointerY=O.mouseY),O.pointerDeltaX+=O.pointerX-t,O.pointerDeltaY+=O.pointerY-l,O.emitMouseDown(d,i,e),O._numPointerDown++,O.emitMultiTouchPointerDown(n),1==O._numPointerDown&&O.emitPointerDown(n)})}),he.app.backend.screen.onMouseUp(this,function(d,b,g){he.app.beginUpdateCallbacks.push(function(){he.app.flushImmediate();for(var e=b*C.app.screenDensity,n=g*C.app.screenDensity,t=O.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=O.reverseMatrix).b+n*t.d+t.ty,n=new Ai(-1,d,i,e,0<=i&&i<=O.width&&0<=e&&e<=O.height),t=(-1!=n.buttonId&&(O.mouseX=n.x,O.mouseY=n.y),-1!=n.touchIndex&&(null==(o=O.touches.get(n.touchIndex))?(o=new Di(n.touchIndex,n.x,n.y,0,0),O.touches.set(n.touchIndex,o)):(o.x=n.x,o.y=n.y)),O.pointerX),l=O.pointerY,s=0,r=0,a=0,h=O.touches,u=0,c=h.values.length;;){for(;u<c&&null==h.values[u];)++u;if(!(u<c))break;var o,_=u++;++s,r+=(o=h.values[_]).x,a+=o.y}0<s?(O.pointerX=r/s,O.pointerY=a/s):(O.pointerX=O.mouseX,O.pointerY=O.mouseY),O.pointerDeltaX+=O.pointerX-t,O.pointerDeltaY+=O.pointerY-l,-1!=n.touchIndex&&O.touches.set(n.touchIndex,null),O.emitMouseUp(d,i,e),O._numPointerDown--,O.emitMultiTouchPointerUp(n),0==O._numPointerDown&&O.emitPointerUp(n)})}),he.app.backend.screen.onMouseMove(this,function(d,b){he.app.beginUpdateCallbacks.push(function(){he.app.flushImmediate();for(var e=d*C.app.screenDensity,n=b*C.app.screenDensity,t=O.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=O.reverseMatrix).b+n*t.d+t.ty,n=new Ai(-1,-1,i,e,0<=i&&i<=O.width&&0<=e&&e<=O.height),t=(O.mouseX=n.x,O.mouseY=n.y,-1!=n.touchIndex&&(null==(o=O.touches.get(n.touchIndex))?(o=new Di(n.touchIndex,n.x,n.y,0,0),O.touches.set(n.touchIndex,o)):(o.x=n.x,o.y=n.y)),O.pointerX),l=O.pointerY,s=0,r=0,a=0,h=O.touches,u=0,c=h.values.length;;){for(;u<c&&null==h.values[u];)++u;if(!(u<c))break;var o,_=u++;++s,r+=(o=h.values[_]).x,a+=o.y}0<s?(O.pointerX=r/s,O.pointerY=a/s):(O.pointerX=O.mouseX,O.pointerY=O.mouseY),O.pointerDeltaX+=O.pointerX-t,O.pointerDeltaY+=O.pointerY-l,O.emitMouseMove(i,e),O.emitMultiTouchPointerMove(n),O.emitPointerMove(n)})}),he.app.backend.screen.onMouseWheel(this,function(e,n){he.app.beginUpdateCallbacks.push(function(){O.emitMouseWheel(e,n)})}),he.app.backend.screen.onTouchDown(this,function(d,b,g){he.app.beginUpdateCallbacks.push(function(){he.app.flushImmediate();for(var e=b*C.app.screenDensity,n=g*C.app.screenDensity,t=O.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=O.reverseMatrix).b+n*t.d+t.ty,n=new Ai(d,-1,i,e,0<=i&&i<=O.width&&0<=e&&e<=O.height),t=(-1!=n.buttonId&&(O.mouseX=n.x,O.mouseY=n.y),-1!=n.touchIndex&&(null==(o=O.touches.get(n.touchIndex))?(o=new Di(n.touchIndex,n.x,n.y,0,0),O.touches.set(n.touchIndex,o)):(o.x=n.x,o.y=n.y)),O.pointerX),l=O.pointerY,s=0,r=0,a=0,h=O.touches,u=0,c=h.values.length;;){for(;u<c&&null==h.values[u];)++u;if(!(u<c))break;var o,_=u++;++s,r+=(o=h.values[_]).x,a+=o.y}0<s?(O.pointerX=r/s,O.pointerY=a/s):(O.pointerX=O.mouseX,O.pointerY=O.mouseY),O.pointerDeltaX+=O.pointerX-t,O.pointerDeltaY+=O.pointerY-l,O.emitTouchDown(d,i,e),O._numPointerDown++,O.emitMultiTouchPointerDown(n),1==O._numPointerDown&&O.emitPointerDown(n)})}),he.app.backend.screen.onTouchUp(this,function(d,b,g){he.app.beginUpdateCallbacks.push(function(){he.app.flushImmediate();for(var e=b*C.app.screenDensity,n=g*C.app.screenDensity,t=O.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=O.reverseMatrix).b+n*t.d+t.ty,n=new Ai(d,-1,i,e,0<=i&&i<=O.width&&0<=e&&e<=O.height),t=(-1!=n.buttonId&&(O.mouseX=n.x,O.mouseY=n.y),-1!=n.touchIndex&&(null==(o=O.touches.get(n.touchIndex))?(o=new Di(n.touchIndex,n.x,n.y,0,0),O.touches.set(n.touchIndex,o)):(o.x=n.x,o.y=n.y)),O.pointerX),l=O.pointerY,s=0,r=0,a=0,h=O.touches,u=0,c=h.values.length;;){for(;u<c&&null==h.values[u];)++u;if(!(u<c))break;var o,_=u++;++s,r+=(o=h.values[_]).x,a+=o.y}0<s?(O.pointerX=r/s,O.pointerY=a/s):(O.pointerX=O.mouseX,O.pointerY=O.mouseY),O.pointerDeltaX+=O.pointerX-t,O.pointerDeltaY+=O.pointerY-l,-1!=n.touchIndex&&O.touches.set(n.touchIndex,null),O.emitTouchUp(d,i,e),O._numPointerDown--,O.emitMultiTouchPointerUp(n),0==O._numPointerDown&&O.emitPointerUp(n)})}),he.app.backend.screen.onTouchMove(this,function(d,b,g){he.app.beginUpdateCallbacks.push(function(){he.app.flushImmediate();for(var e=b*C.app.screenDensity,n=g*C.app.screenDensity,t=O.reverseMatrix,i=e*t.a+n*t.c+t.tx,e=e*(t=O.reverseMatrix).b+n*t.d+t.ty,n=new Ai(d,-1,i,e,0<=i&&i<=O.width&&0<=e&&e<=O.height),t=(-1!=n.touchIndex&&(null==(o=O.touches.get(n.touchIndex))?(o=new Di(n.touchIndex,n.x,n.y,0,0),O.touches.set(n.touchIndex,o)):(o.x=n.x,o.y=n.y)),O.pointerX),l=O.pointerY,s=0,r=0,a=0,h=O.touches,u=0,c=h.values.length;;){for(;u<c&&null==h.values[u];)++u;if(!(u<c))break;var o,_=u++;++s,r+=(o=h.values[_]).x,a+=o.y}0<s?(O.pointerX=r/s,O.pointerY=a/s):(O.pointerX=O.mouseX,O.pointerY=O.mouseY),O.pointerDeltaX+=O.pointerX-t,O.pointerDeltaY+=O.pointerY-l,O.emitTouchMove(d,i,e),O.emitMultiTouchPointerMove(n),0<O._numPointerDown&&O.emitPointerMove(n)})})},updatePointerOverState:function(e){for(var n=this.mouseX,t=this.mouseY,i=1e4,l=this.matchedOverListeners.h[i],s=((h=this.matchFirstOverListener(n,t))!=l&&(null!=h?this.matchedOverListeners.h[i]=h:this.matchedOverListeners.remove(i)),null!=l&&l!=h&&0<=l._lifecycleState&&0<l._numPointerOver&&(l._numPointerOver--,0!=l._numPointerOver&&!l.multiTouch||l.emitPointerOut(new Ai(-1,-1,n,t,!1))),null!=h&&l!=h&&(h._numPointerOver++,1!=h._numPointerOver&&!h.multiTouch||h.emitPointerOver(new Ai(-1,-1,n,t,!0))),this.touches),r=0,a=s.values.length;;){for(;r<a&&null==s.values[r];)++r;if(!(r<a))break;var h,u=r++,u=s.values[u],n=u.x,t=u.y,i=2e4+u.index,l=this.matchedOverListeners.h[i];(h=this.matchFirstOverListener(n,t))!=l&&(null!=h?this.matchedOverListeners.h[i]=h:this.matchedOverListeners.remove(i)),null!=l&&l!=h&&0<=l._lifecycleState&&0<l._numPointerOver&&(l._numPointerOver--,0!=l._numPointerOver&&!l.multiTouch||l.emitPointerOut(new Ai(-1,-1,n,t,!1))),null!=h&&l!=h&&(h._numPointerOver++,1!=h._numPointerOver&&!h.multiTouch||h.emitPointerOver(new Ai(-1,-1,n,t,!0)))}},resize:function(){var e,n,t;this.resizing||(this.resizing=!0,this.updateScaling(),e=he.app.settings.get_scaling(),n=he.app.settings.get_targetWidth(),t=he.app.settings.get_targetHeight(),this.emitResize(),e==he.app.settings.get_scaling()&&n==he.app.settings.get_targetWidth()&&t==he.app.settings.get_targetHeight()||this.updateScaling(),this.updateTransform(),this.updateTexturesDensity(),this.resizing=!1)},updateTexturesDensity:function(){var e;0<he.app.settings.get_targetDensity()?this.set_texturesDensity(he.app.settings.get_targetDensity()):(e=(e=this.density)<1?1:Math.round(e),this.set_texturesDensity(e))},updateScaling:function(){var e,n=0<he.app.settings.get_targetWidth()?he.app.settings.get_targetWidth():C.app.screenWidth,t=0<he.app.settings.get_targetHeight()?he.app.settings.get_targetHeight():C.app.screenHeight;switch(he.app.settings.get_scaling()._hx_index){case 0:e=Math.max(n/(C.app.screenWidth*C.app.screenDensity),t/(C.app.screenHeight*C.app.screenDensity));break;case 1:e=Math.min(n/(C.app.screenWidth*C.app.screenDensity),t/(C.app.screenHeight*C.app.screenDensity));break;case 2:n=C.app.screenWidth,t=C.app.screenHeight,e=Math.max(n/(C.app.screenWidth*C.app.screenDensity),t/(C.app.screenHeight*C.app.screenDensity));break;case 3:var i=C.app.screenHeight/C.app.screenWidth,l=t/n;l<i?t=n*i:i<l&&(n=t/i),n=Math.ceil(n),t=Math.ceil(t),e=Math.max(n/(C.app.screenWidth*C.app.screenDensity),t/(C.app.screenHeight*C.app.screenDensity))}switch(this.actualWidth=Math.ceil(C.app.screenWidth*C.app.screenDensity*e),this.actualHeight=Math.ceil(C.app.screenHeight*C.app.screenDensity*e),this.density=1/e,he.app.settings.get_scaling()._hx_index){case 0:case 1:this.offsetX=.5*(this.actualWidth-n),this.offsetY=.5*(this.actualHeight-t);break;case 2:case 3:this.offsetX=0,this.offsetY=0}this.width=n,this.height=t},updateTransform:function(){var e=0<he.app.settings.get_targetWidth()?he.app.settings.get_targetWidth()*this.density:C.app.screenWidth*C.app.screenDensity,n=0<he.app.settings.get_targetHeight()?he.app.settings.get_targetHeight()*this.density:C.app.screenHeight*C.app.screenDensity;switch(he.app.settings.get_scaling()._hx_index){case 2:e=C.app.screenWidth*C.app.screenDensity,n=C.app.screenHeight*C.app.screenDensity;break;case 3:var t=C.app.screenHeight/C.app.screenWidth,i=n/e;i<t?n=e*t:t<i&&(e=n/t)}(l=this.matrix).a=1,l.b=0,l.c=0,l.d=1,l.tx=0,l.ty=0,l.changedDirty=!0;var l=this.matrix,s=this.density,r=this.density,s=(l.a*=s,l.b*=r,l.c*=s,l.d*=r,l.tx*=s,l.ty*=r,l.changedDirty=!0,.5*(C.app.screenWidth*C.app.screenDensity-e)),r=.5*(C.app.screenHeight*C.app.screenDensity-n);(l=this.matrix).tx+=s,l.ty+=r,l.changedDirty=!0},matchFirstDownListener:function(e,n,t,i){null==i&&(i=-1),null==t&&(t=-1),he.app.computeHierarchy();for(var l=0;l<2;)for(var s=l++,r=(zt.matchedHitVisual=null,0==s),a=he.app.visuals,h=a.length-1;0<=h;){var u=a[h];if(0<=u._lifecycleState&&u.computedTouchable){var c=null!=u.__cbOnPointerDown&&0<u.__cbOnPointerDown.length||null!=u.__cbOncePointerDown&&0<u.__cbOncePointerDown.length,o=!1,_=!1;if(c&&(o=u._hits(e,n,!1))&&(_=u.interceptPointerDown(u,e,n,t,i)),o&&!_||r&&this.isHitVisual(u)&&u._hits(e,n,!1)){var d=!1;if(c)for(var b=u.parent;null!=b&&!(d=b.interceptPointerDown(u,e,n,t,i));)b=b.parent;if(!d){if(c||!r||!this.isHitVisual(u))return zt.matchedHitVisual=null,u;zt.matchedHitVisual=u}}}--h}return zt.matchedHitVisual=null},matchFirstOverListener:function(e,n){if(this.visualsListenPointerOver){he.app.computeHierarchy();for(var t=0;t<2;)for(var i=t++,l=(zt.matchedHitVisual=null,0==i),s=he.app.visuals,r=s.length-1;0<=r;){var a=s[r];if(0<=a._lifecycleState&&a.computedTouchable){var h=null!=a.__cbOnPointerOver&&0<a.__cbOnPointerOver.length||null!=a.__cbOncePointerOver&&0<a.__cbOncePointerOver.length,u=!1,c=!1;if(h&&(u=a._hits(e,n,!1))&&(c=a.interceptPointerOver(a,e,n)),u&&!c||l&&this.isHitVisual(a)&&a._hits(e,n,!1)){var o=!1;if(h)for(var _=a.parent;null!=_&&!(o=_.interceptPointerOver(a,e,n));)_=_.parent;if(!o){if(h||!l||!this.isHitVisual(a))return zt.matchedHitVisual=null,a;zt.matchedHitVisual=a}}}--r}zt.matchedHitVisual=null}return null},prepareMultiTouchPointerDown:function(e){-1!=e.buttonId&&(this.mouseX=e.x,this.mouseY=e.y),-1!=e.touchIndex&&(null==(h=this.touches.get(e.touchIndex))?(h=new Di(e.touchIndex,e.x,e.y,0,0),this.touches.set(e.touchIndex,h)):(h.x=e.x,h.y=e.y));for(var e=this.pointerX,n=this.pointerY,t=0,i=0,l=0,s=this.touches,r=0,a=s.values.length;;){for(;r<a&&null==s.values[r];)++r;if(!(r<a))break;var h,u=r++;++t,i+=(h=s.values[u]).x,l+=h.y}0<t?(this.pointerX=i/t,this.pointerY=l/t):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-e,this.pointerDeltaY+=this.pointerY-n},prepareMultiTouchPointerUp:function(e){-1!=e.buttonId&&(this.mouseX=e.x,this.mouseY=e.y),-1!=e.touchIndex&&(null==(u=this.touches.get(e.touchIndex))?(u=new Di(e.touchIndex,e.x,e.y,0,0),this.touches.set(e.touchIndex,u)):(u.x=e.x,u.y=e.y));for(var n=this.pointerX,t=this.pointerY,i=0,l=0,s=0,r=this.touches,a=0,h=r.values.length;;){for(;a<h&&null==r.values[a];)++a;if(!(a<h))break;var u,c=a++;++i,l+=(u=r.values[c]).x,s+=u.y}0<i?(this.pointerX=l/i,this.pointerY=s/i):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-n,this.pointerDeltaY+=this.pointerY-t,-1!=e.touchIndex&&this.touches.set(e.touchIndex,null)},prepareMultiTouchPointerMove:function(e,n){n&&(this.mouseX=e.x,this.mouseY=e.y),-1!=e.touchIndex&&(null==(h=this.touches.get(e.touchIndex))?(h=new Di(e.touchIndex,e.x,e.y,0,0),this.touches.set(e.touchIndex,h)):(h.x=e.x,h.y=e.y));for(var n=this.pointerX,e=this.pointerY,t=0,i=0,l=0,s=this.touches,r=0,a=s.values.length;;){for(;r<a&&null==s.values[r];)++r;if(!(r<a))break;var h,u=r++;++t,i+=(h=s.values[u]).x,l+=h.y}0<t?(this.pointerX=i/t,this.pointerY=l/t):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-n,this.pointerDeltaY+=this.pointerY-e},updatePointer:function(){for(var e=this.pointerX,n=this.pointerY,t=0,i=0,l=0,s=this.touches,r=0,a=s.values.length;;){for(;r<a&&null==s.values[r];)++r;if(!(r<a))break;var h=r++,h=s.values[h];++t,i+=h.x,l+=h.y}0<t?(this.pointerX=i/t,this.pointerY=l/t):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-e,this.pointerDeltaY+=this.pointerY-n},matchedDownListeners:null,matchedOverListeners:null,didEmitMouseDown:function(e,n,t){var i=this.matchFirstDownListener(n,t,-1,e);null!=i&&(i._numPointerDown++,1!=i._numPointerDown&&!i.multiTouch||(he.app.screen.set_focusedVisual(i),i.emitPointerDown(new Ai(-1,e,n,t,!0)))),this.matchedDownListeners.h[1e4+e]=i},didEmitMouseUp:function(e,n,t){var i=1e4+e,l=this.matchedDownListeners.h[i];null!=l&&0<=l._lifecycleState&&0<l._numPointerDown&&(l._numPointerDown--,0!=l._numPointerDown&&!l.multiTouch||l.emitPointerUp(new Ai(-1,e,n,t,l._hits(n,t,!1)))),this.matchedDownListeners.remove(i)},updateMouseOver:function(e,n){var t=this.matchedOverListeners.h[1e4],i=this.matchFirstOverListener(e,n);i!=t&&(null!=i?this.matchedOverListeners.h[1e4]=i:this.matchedOverListeners.remove(1e4)),null!=t&&t!=i&&0<=t._lifecycleState&&0<t._numPointerOver&&(t._numPointerOver--,0!=t._numPointerOver&&!t.multiTouch||t.emitPointerOut(new Ai(-1,-1,e,n,!1))),null!=i&&t!=i&&(i._numPointerOver++,1!=i._numPointerOver&&!i.multiTouch||i.emitPointerOver(new Ai(-1,-1,e,n,!0)))},didEmitTouchDown:function(e,n,t){var i=this.matchFirstDownListener(n,t,e,-1);null!=i&&(i._numPointerDown++,1!=i._numPointerDown&&!i.multiTouch||(he.app.screen.set_focusedVisual(i),i.emitPointerDown(new Ai(e,-1,n,t,!0)))),this.matchedDownListeners.h[2e4+e]=i},didEmitTouchUp:function(e,n,t){var i=2e4+e,l=this.matchedDownListeners.h[i];null!=l&&0<=l._lifecycleState&&0<l._numPointerDown&&(l._numPointerDown--,0!=l._numPointerDown&&!l.multiTouch||l.emitPointerUp(new Ai(e,-1,n,t,l._hits(n,t,!1)))),this.matchedDownListeners.remove(i)},updateTouchOver:function(e,n,t){var e=2e4+e,i=this.matchedOverListeners.h[e],l=this.matchFirstOverListener(n,t);l!=i&&(null!=l?this.matchedOverListeners.h[e]=l:this.matchedOverListeners.remove(e)),null!=i&&i!=l&&0<=i._lifecycleState&&0<i._numPointerOver&&(i._numPointerOver--,0!=i._numPointerOver&&!i.multiTouch||i.emitPointerOut(new Ai(-1,-1,n,t,!1))),null!=l&&i!=l&&(l._numPointerOver++,1!=l._numPointerOver&&!l.multiTouch||l.emitPointerOver(new Ai(-1,-1,n,t,!0)))},hitVisuals:null,addHitVisual:function(e){var n=8==(8&e.flags);this.hitVisuals.push(e),n||(e.flags|=8)},removeHitVisual:function(e){var n=this.hitVisuals.indexOf(e);-1==n?he.app.logger.warning("Hit visual not removed from hitVisuals because it was not added at the first place",{fileName:"../../../../ceramic/runtime/src/ceramic/Screen.hx",lineNumber:1200,className:"ceramic.Screen",methodName:"removeHitVisual"}):(this.hitVisuals.splice(n,1),-1==this.hitVisuals.indexOf(e)&&(e.flags&=-9))},isHitVisual:function(e){return 8==(8&e.flags)},resetDeltas:function(){this.pointerDeltaX=0,this.pointerDeltaY=0,this.mouseDeltaX=0,this.mouseDeltaY=0,this.mouseWheelDeltaX=0;for(var e=this.mouseWheelDeltaY=0;e<=this.maxTouchIndex;){var n=this.touches.get(e);null!=n&&(n.deltaX=0,n.deltaY=0),++e}},willEmitMouseMove:function(e,n){this.mouseDeltaX+=e-this.prevMouseX,this.mouseDeltaY+=n-this.prevMouseY,this.prevMouseX=e,this.prevMouseY=n},willEmitMouseDown:function(n,e,t){var i=this,e=(this.prevMouseX=e,this.prevMouseY=t,this.pressedMouseButtons.intMap.h[0|n]),t=null!=e?e:0;this.pressedMouseButtons.set(n,(t=-1==t?0:t)+1),0==t&&he.app.beginUpdateCallbacks.push(function(){var e=i.pressedMouseButtons.intMap.h[0|n];1==(null!=e?e:0)&&i.pressedMouseButtons.set(n,2)})},willEmitMouseUp:function(n,e,t){var i=this;this.pressedMouseButtons.set(n,-1),he.app.beginUpdateCallbacks.push(function(){var e=i.pressedMouseButtons.intMap.h[0|n];-1==(null!=e?e:0)&&i.pressedMouseButtons.set(n,0)})},willEmitMouseWheel:function(e,n){this.mouseWheelDeltaX+=e,this.mouseWheelDeltaY+=n},mouseAllowed:function(e){return!0},_mousePressed:function(e){e=this.pressedMouseButtons.intMap.h[0|e];return 0<(null!=e?e:0)},_mouseJustPressed:function(e){e=this.pressedMouseButtons.intMap.h[0|e];return 1==(null!=e?e:0)},_mouseJustReleased:function(e){e=this.pressedMouseButtons.intMap.h[0|e];return-1==(null!=e?e:0)},willEmitTouchMove:function(e,n,t){e>this.maxTouchIndex&&(this.maxTouchIndex=e);var i=2*e,l=this.prevTouchPositions.intMap.h[0|i],s=null!=l?l:0,i=null!=(l=this.prevTouchPositions.intMap.h[0|1+i])?l:0,l=this.touches.get(e);null!=l&&(l.deltaX+=n-s,l.deltaY+=t-i)},willEmitTouchDown:function(n,e,t){var i=this,l=2*n,s=1+l,l=(this.prevTouchPositions.set(l,e),this.prevTouchPositions.set(s,t),this.pressedTouches.intMap.h[0|n]),e=null!=l?l:0;this.pressedTouches.set(n,(e=-1==e?0:e)+1),0==e&&he.app.beginUpdateCallbacks.push(function(){var e=i.pressedTouches.intMap.h[0|n];1==(null!=e?e:0)&&i.pressedTouches.set(n,2)})},willEmitTouchUp:function(n,e,t){var i=this,l=this.pressedTouches.intMap.h[0|n];1==(null!=l?l:0)?this.pressedTouches.set(n,-2):this.pressedTouches.set(n,-1),he.app.beginUpdateCallbacks.push(function(){var e=i.pressedTouches.intMap.h[0|n],e=null!=e?e:0;-1!=e&&-2!=e||i.pressedTouches.set(n,0)})},_touchPressed:function(e){e=this.pressedTouches.intMap.h[0|e];return 0<(null!=e?e:0)},_touchJustPressed:function(e){e=this.pressedTouches.intMap.h[0|e],e=null!=e?e:0;return 1==e||-2==e},_touchJustReleased:function(e){e=this.pressedTouches.intMap.h[0|e],e=null!=e?e:0;return-1==e||-2==e},touchDeltaX:function(e){e=this.touches.get(e);return null!=e?e.deltaX:0},touchDeltaY:function(e){e=this.touches.get(e);return null!=e?e.deltaY:0},toTexture:function(n){he.app.backend.screen.screenshotToTexture(function(e){null!=e?(e=new Rt(e,C.app.screenDensity),n(e)):n(null)})},toPixels:function(e){he.app.backend.screen.screenshotToPixels(e)},_toPng:function(e,n){he.app.onceFinishDraw(this,function(){he.app.backend.screen.screenshotToPng(e,n)})},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offFocusedVisualChange(),this.offTexturesDensityChange(),this.offResize(),this.offMouseDown(),this.offMouseUp(),this.offMouseWheel(),this.offMouseMove(),this.offTouchDown(),this.offTouchUp(),this.offTouchMove(),this.offPointerDown(),this.offPointerUp(),this.offPointerMove(),this.offMultiTouchPointerDown(),this.offMultiTouchPointerUp(),this.offMultiTouchPointerMove(),this.offFocus(),this.offBlur()},__class__:zt,__properties__:$extend(l.prototype.__properties__,{get_isPointerDown:"get_isPointerDown",set_texturesDensity:"set_texturesDensity",get_texturesDensity:"get_texturesDensity",set_unobservedFocusedVisual:"set_unobservedFocusedVisual",set_focusedVisual:"set_focusedVisual",get_focusedVisual:"get_focusedVisual",get_nativeDensity:"get_nativeDensity",get_nativeHeight:"get_nativeHeight",get_nativeWidth:"get_nativeWidth"})}),I["ceramic.ScreenScaling"]={__ename__:"ceramic.ScreenScaling",__constructs__:null,FIT:{_hx_name:"FIT",_hx_index:0,__enum__:"ceramic.ScreenScaling",toString:d},FILL:{_hx_name:"FILL",_hx_index:1,__enum__:"ceramic.ScreenScaling",toString:d},RESIZE:{_hx_name:"RESIZE",_hx_index:2,__enum__:"ceramic.ScreenScaling",toString:d},FIT_RESIZE:{_hx_name:"FIT_RESIZE",_hx_index:3,__enum__:"ceramic.ScreenScaling",toString:d}}),Xt=(Kt.__constructs__=[Kt.FIT,Kt.FILL,Kt.RESIZE,Kt.FIT_RESIZE],function(){this.defaultShader="shader:textured",this.defaultFont="font:RobotoMedium",this.backend={},this.assetsPath="assets",this.resizable=!1,this.antialiasing=0,this.appInfo=null,this.collections=null,this.orientation=0,this.unobservedPreventDefaultTouches=!1,this.preventDefaultTouchesAutoruns=null,this.unobservedPreventDefaultMouseWheel=!1,this.preventDefaultMouseWheelAutoruns=null,this.unobservedOverrideDelta=-1,this.overrideDeltaAutoruns=null,this.unobservedMaxDelta=.1,this.maxDeltaAutoruns=null,this.unobservedTargetFps=-1,this.targetFpsAutoruns=null,this.unobservedFullscreen=!1,this.fullscreenAutoruns=null,this.unobservedTitle="App",this.titleAutoruns=null,this.unobservedScaling=Kt.FIT,this.scalingAutoruns=null,this.unobservedBackground=0,this.backgroundAutoruns=null,this.unobservedTargetDensity=0,this.targetDensityAutoruns=null,this.unobservedWindowHeight=0,this.windowHeightAutoruns=null,this.unobservedWindowWidth=0,this.windowWidthAutoruns=null,this.unobservedTargetHeight=0,this.targetHeightAutoruns=null,this.unobservedTargetWidth=0,this.targetWidthAutoruns=null,this.observedDirty=!1}),Yt=((L["ceramic.Settings"]=Xt).__name__="ceramic.Settings",Xt.__interfaces__=[u],Xt.prototype={__cbOnObservedDirty:null,__cbOnceObservedDirty:null,__cbOnOwnerUnbindObservedDirty:null,__cbOnceOwnerUnbindObservedDirty:null,emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnObservedDirty)for(var r=0,a=this.__cbOnObservedDirty.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnObservedDirty[h],++s):--t}if(null!=this.__cbOnceObservedDirty){for(var u=null,c=null,r=0,a=this.__cbOnceObservedDirty.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,o=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindObservedDirty[h]),c.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=u,this.__cbOnceObservedDirty=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindObservedDirty[n])&&s(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindObservedDirty[n])&&s(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindObservedDirty[l])&&s()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindObservedDirty[l])&&s()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},observedDirty:null,targetWidthAutoruns:null,get_targetWidth:function(){var e,n,t=this.unobservedTargetWidth;return null!=M.current&&(e=M.current,null!=(n=this.targetWidthAutoruns)||(n=M.getAutorunArray(),null!=(this.targetWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetWidth:function(e){var n=this.unobservedTargetWidth;return n!=(this.unobservedTargetWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetWidthChange(e,n),null!=(n=this.targetWidthAutoruns))&&(this.targetWidthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTargetWidth:function(){var e=this.unobservedTargetWidth,e=(this.emitTargetWidthChange(e,e),this.targetWidthAutoruns);null!=e&&(this.targetWidthAutoruns=null,M.invalidateAutorunArray(e))},unobservedTargetWidth:null,__cbOnTargetWidthChange:null,__cbOnceTargetWidthChange:null,__cbOnOwnerUnbindTargetWidthChange:null,__cbOnceOwnerUnbindTargetWidthChange:null,emitTargetWidthChange:function(e,n){var t=0;if(null!=this.__cbOnTargetWidthChange&&(t+=this.__cbOnTargetWidthChange.length),null!=this.__cbOnceTargetWidthChange&&(t+=this.__cbOnceTargetWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTargetWidthChange)for(var r=0,a=this.__cbOnTargetWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTargetWidthChange[h],++s):--t}if(null!=this.__cbOnceTargetWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceTargetWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTargetWidthChange[h],this.__cbOnceTargetWidthChange[h]=null,o=this.__cbOnceOwnerUnbindTargetWidthChange[h],(this.__cbOnceOwnerUnbindTargetWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTargetWidthChange[h]),c.push(this.__cbOnceTargetWidthChange[h]))}this.__cbOnceOwnerUnbindTargetWidthChange=u,this.__cbOnceTargetWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTargetWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTargetWidthChange&&(this.__cbOnOwnerUnbindTargetWidthChange=[]),this.__cbOnOwnerUnbindTargetWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTargetWidthChange&&(this.__cbOnOwnerUnbindTargetWidthChange=[]),this.__cbOnOwnerUnbindTargetWidthChange.push(null);null==this.__cbOnTargetWidthChange&&(this.__cbOnTargetWidthChange=[]),this.__cbOnTargetWidthChange.push(t)},onceTargetWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTargetWidthChange&&(this.__cbOnceOwnerUnbindTargetWidthChange=[]),this.__cbOnceOwnerUnbindTargetWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTargetWidthChange&&(this.__cbOnceOwnerUnbindTargetWidthChange=[]),this.__cbOnceOwnerUnbindTargetWidthChange.push(null);null==this.__cbOnceTargetWidthChange&&(this.__cbOnceTargetWidthChange=[]),this.__cbOnceTargetWidthChange.push(t)},offTargetWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetWidthChange&&-1!=(n=this.__cbOnTargetWidthChange.indexOf(e))&&(this.__cbOnTargetWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTargetWidthChange[n])&&s(),this.__cbOnOwnerUnbindTargetWidthChange.splice(n,1)),null!=this.__cbOnceTargetWidthChange&&-1!=(n=this.__cbOnceTargetWidthChange.indexOf(e))&&(this.__cbOnceTargetWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTargetWidthChange[n])&&s(),this.__cbOnceOwnerUnbindTargetWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTargetWidthChange[l])&&s()}this.__cbOnOwnerUnbindTargetWidthChange=null}if(null!=this.__cbOnceOwnerUnbindTargetWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTargetWidthChange[l])&&s()}this.__cbOnceOwnerUnbindTargetWidthChange=null}this.__cbOnTargetWidthChange=null,this.__cbOnceTargetWidthChange=null}},listensTargetWidthChange:function(){return null!=this.__cbOnTargetWidthChange&&0<this.__cbOnTargetWidthChange.length||null!=this.__cbOnceTargetWidthChange&&0<this.__cbOnceTargetWidthChange.length},targetHeightAutoruns:null,get_targetHeight:function(){var e,n,t=this.unobservedTargetHeight;return null!=M.current&&(e=M.current,null!=(n=this.targetHeightAutoruns)||(n=M.getAutorunArray(),null!=(this.targetHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetHeight:function(e){var n=this.unobservedTargetHeight;return n!=(this.unobservedTargetHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetHeightChange(e,n),null!=(n=this.targetHeightAutoruns))&&(this.targetHeightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTargetHeight:function(){var e=this.unobservedTargetHeight,e=(this.emitTargetHeightChange(e,e),this.targetHeightAutoruns);null!=e&&(this.targetHeightAutoruns=null,M.invalidateAutorunArray(e))},unobservedTargetHeight:null,__cbOnTargetHeightChange:null,__cbOnceTargetHeightChange:null,__cbOnOwnerUnbindTargetHeightChange:null,__cbOnceOwnerUnbindTargetHeightChange:null,emitTargetHeightChange:function(e,n){var t=0;if(null!=this.__cbOnTargetHeightChange&&(t+=this.__cbOnTargetHeightChange.length),null!=this.__cbOnceTargetHeightChange&&(t+=this.__cbOnceTargetHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTargetHeightChange)for(var r=0,a=this.__cbOnTargetHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTargetHeightChange[h],++s):--t}if(null!=this.__cbOnceTargetHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceTargetHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTargetHeightChange[h],this.__cbOnceTargetHeightChange[h]=null,o=this.__cbOnceOwnerUnbindTargetHeightChange[h],(this.__cbOnceOwnerUnbindTargetHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTargetHeightChange[h]),c.push(this.__cbOnceTargetHeightChange[h]))}this.__cbOnceOwnerUnbindTargetHeightChange=u,this.__cbOnceTargetHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTargetHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTargetHeightChange&&(this.__cbOnOwnerUnbindTargetHeightChange=[]),this.__cbOnOwnerUnbindTargetHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTargetHeightChange&&(this.__cbOnOwnerUnbindTargetHeightChange=[]),this.__cbOnOwnerUnbindTargetHeightChange.push(null);null==this.__cbOnTargetHeightChange&&(this.__cbOnTargetHeightChange=[]),this.__cbOnTargetHeightChange.push(t)},onceTargetHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTargetHeightChange&&(this.__cbOnceOwnerUnbindTargetHeightChange=[]),this.__cbOnceOwnerUnbindTargetHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTargetHeightChange&&(this.__cbOnceOwnerUnbindTargetHeightChange=[]),this.__cbOnceOwnerUnbindTargetHeightChange.push(null);null==this.__cbOnceTargetHeightChange&&(this.__cbOnceTargetHeightChange=[]),this.__cbOnceTargetHeightChange.push(t)},offTargetHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetHeightChange&&-1!=(n=this.__cbOnTargetHeightChange.indexOf(e))&&(this.__cbOnTargetHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTargetHeightChange[n])&&s(),this.__cbOnOwnerUnbindTargetHeightChange.splice(n,1)),null!=this.__cbOnceTargetHeightChange&&-1!=(n=this.__cbOnceTargetHeightChange.indexOf(e))&&(this.__cbOnceTargetHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTargetHeightChange[n])&&s(),this.__cbOnceOwnerUnbindTargetHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTargetHeightChange[l])&&s()}this.__cbOnOwnerUnbindTargetHeightChange=null}if(null!=this.__cbOnceOwnerUnbindTargetHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTargetHeightChange[l])&&s()}this.__cbOnceOwnerUnbindTargetHeightChange=null}this.__cbOnTargetHeightChange=null,this.__cbOnceTargetHeightChange=null}},listensTargetHeightChange:function(){return null!=this.__cbOnTargetHeightChange&&0<this.__cbOnTargetHeightChange.length||null!=this.__cbOnceTargetHeightChange&&0<this.__cbOnceTargetHeightChange.length},targetSize:function(e,n){this.set_targetWidth(e),this.set_targetHeight(n)},windowWidthAutoruns:null,get_windowWidth:function(){var e,n,t=this.unobservedWindowWidth;return null!=M.current&&(e=M.current,null!=(n=this.windowWidthAutoruns)||(n=M.getAutorunArray(),null!=(this.windowWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_windowWidth:function(e){var n=this.unobservedWindowWidth;return n!=(this.unobservedWindowWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWindowWidthChange(e,n),null!=(n=this.windowWidthAutoruns))&&(this.windowWidthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateWindowWidth:function(){var e=this.unobservedWindowWidth,e=(this.emitWindowWidthChange(e,e),this.windowWidthAutoruns);null!=e&&(this.windowWidthAutoruns=null,M.invalidateAutorunArray(e))},unobservedWindowWidth:null,__cbOnWindowWidthChange:null,__cbOnceWindowWidthChange:null,__cbOnOwnerUnbindWindowWidthChange:null,__cbOnceOwnerUnbindWindowWidthChange:null,emitWindowWidthChange:function(e,n){var t=0;if(null!=this.__cbOnWindowWidthChange&&(t+=this.__cbOnWindowWidthChange.length),null!=this.__cbOnceWindowWidthChange&&(t+=this.__cbOnceWindowWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnWindowWidthChange)for(var r=0,a=this.__cbOnWindowWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnWindowWidthChange[h],++s):--t}if(null!=this.__cbOnceWindowWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceWindowWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceWindowWidthChange[h],this.__cbOnceWindowWidthChange[h]=null,o=this.__cbOnceOwnerUnbindWindowWidthChange[h],(this.__cbOnceOwnerUnbindWindowWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindWindowWidthChange[h]),c.push(this.__cbOnceWindowWidthChange[h]))}this.__cbOnceOwnerUnbindWindowWidthChange=u,this.__cbOnceWindowWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onWindowWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event windowWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWindowWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindWindowWidthChange&&(this.__cbOnOwnerUnbindWindowWidthChange=[]),this.__cbOnOwnerUnbindWindowWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindWindowWidthChange&&(this.__cbOnOwnerUnbindWindowWidthChange=[]),this.__cbOnOwnerUnbindWindowWidthChange.push(null);null==this.__cbOnWindowWidthChange&&(this.__cbOnWindowWidthChange=[]),this.__cbOnWindowWidthChange.push(t)},onceWindowWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event windowWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWindowWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindWindowWidthChange&&(this.__cbOnceOwnerUnbindWindowWidthChange=[]),this.__cbOnceOwnerUnbindWindowWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindWindowWidthChange&&(this.__cbOnceOwnerUnbindWindowWidthChange=[]),this.__cbOnceOwnerUnbindWindowWidthChange.push(null);null==this.__cbOnceWindowWidthChange&&(this.__cbOnceWindowWidthChange=[]),this.__cbOnceWindowWidthChange.push(t)},offWindowWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnWindowWidthChange&&-1!=(n=this.__cbOnWindowWidthChange.indexOf(e))&&(this.__cbOnWindowWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindWindowWidthChange[n])&&s(),this.__cbOnOwnerUnbindWindowWidthChange.splice(n,1)),null!=this.__cbOnceWindowWidthChange&&-1!=(n=this.__cbOnceWindowWidthChange.indexOf(e))&&(this.__cbOnceWindowWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindWindowWidthChange[n])&&s(),this.__cbOnceOwnerUnbindWindowWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWindowWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindWindowWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindWindowWidthChange[l])&&s()}this.__cbOnOwnerUnbindWindowWidthChange=null}if(null!=this.__cbOnceOwnerUnbindWindowWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindWindowWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindWindowWidthChange[l])&&s()}this.__cbOnceOwnerUnbindWindowWidthChange=null}this.__cbOnWindowWidthChange=null,this.__cbOnceWindowWidthChange=null}},listensWindowWidthChange:function(){return null!=this.__cbOnWindowWidthChange&&0<this.__cbOnWindowWidthChange.length||null!=this.__cbOnceWindowWidthChange&&0<this.__cbOnceWindowWidthChange.length},windowHeightAutoruns:null,get_windowHeight:function(){var e,n,t=this.unobservedWindowHeight;return null!=M.current&&(e=M.current,null!=(n=this.windowHeightAutoruns)||(n=M.getAutorunArray(),null!=(this.windowHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_windowHeight:function(e){var n=this.unobservedWindowHeight;return n!=(this.unobservedWindowHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWindowHeightChange(e,n),null!=(n=this.windowHeightAutoruns))&&(this.windowHeightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateWindowHeight:function(){var e=this.unobservedWindowHeight,e=(this.emitWindowHeightChange(e,e),this.windowHeightAutoruns);null!=e&&(this.windowHeightAutoruns=null,M.invalidateAutorunArray(e))},unobservedWindowHeight:null,__cbOnWindowHeightChange:null,__cbOnceWindowHeightChange:null,__cbOnOwnerUnbindWindowHeightChange:null,__cbOnceOwnerUnbindWindowHeightChange:null,emitWindowHeightChange:function(e,n){var t=0;if(null!=this.__cbOnWindowHeightChange&&(t+=this.__cbOnWindowHeightChange.length),null!=this.__cbOnceWindowHeightChange&&(t+=this.__cbOnceWindowHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnWindowHeightChange)for(var r=0,a=this.__cbOnWindowHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnWindowHeightChange[h],++s):--t}if(null!=this.__cbOnceWindowHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceWindowHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceWindowHeightChange[h],this.__cbOnceWindowHeightChange[h]=null,o=this.__cbOnceOwnerUnbindWindowHeightChange[h],(this.__cbOnceOwnerUnbindWindowHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindWindowHeightChange[h]),c.push(this.__cbOnceWindowHeightChange[h]))}this.__cbOnceOwnerUnbindWindowHeightChange=u,this.__cbOnceWindowHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onWindowHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event windowHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWindowHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindWindowHeightChange&&(this.__cbOnOwnerUnbindWindowHeightChange=[]),this.__cbOnOwnerUnbindWindowHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindWindowHeightChange&&(this.__cbOnOwnerUnbindWindowHeightChange=[]),this.__cbOnOwnerUnbindWindowHeightChange.push(null);null==this.__cbOnWindowHeightChange&&(this.__cbOnWindowHeightChange=[]),this.__cbOnWindowHeightChange.push(t)},onceWindowHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event windowHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWindowHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindWindowHeightChange&&(this.__cbOnceOwnerUnbindWindowHeightChange=[]),this.__cbOnceOwnerUnbindWindowHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindWindowHeightChange&&(this.__cbOnceOwnerUnbindWindowHeightChange=[]),this.__cbOnceOwnerUnbindWindowHeightChange.push(null);null==this.__cbOnceWindowHeightChange&&(this.__cbOnceWindowHeightChange=[]),this.__cbOnceWindowHeightChange.push(t)},offWindowHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnWindowHeightChange&&-1!=(n=this.__cbOnWindowHeightChange.indexOf(e))&&(this.__cbOnWindowHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindWindowHeightChange[n])&&s(),this.__cbOnOwnerUnbindWindowHeightChange.splice(n,1)),null!=this.__cbOnceWindowHeightChange&&-1!=(n=this.__cbOnceWindowHeightChange.indexOf(e))&&(this.__cbOnceWindowHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindWindowHeightChange[n])&&s(),this.__cbOnceOwnerUnbindWindowHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWindowHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindWindowHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindWindowHeightChange[l])&&s()}this.__cbOnOwnerUnbindWindowHeightChange=null}if(null!=this.__cbOnceOwnerUnbindWindowHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindWindowHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindWindowHeightChange[l])&&s()}this.__cbOnceOwnerUnbindWindowHeightChange=null}this.__cbOnWindowHeightChange=null,this.__cbOnceWindowHeightChange=null}},listensWindowHeightChange:function(){return null!=this.__cbOnWindowHeightChange&&0<this.__cbOnWindowHeightChange.length||null!=this.__cbOnceWindowHeightChange&&0<this.__cbOnceWindowHeightChange.length},targetDensityAutoruns:null,get_targetDensity:function(){var e,n,t=this.unobservedTargetDensity;return null!=M.current&&(e=M.current,null!=(n=this.targetDensityAutoruns)||(n=M.getAutorunArray(),null!=(this.targetDensityAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetDensity:function(e){var n=this.unobservedTargetDensity;return n!=(this.unobservedTargetDensity=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetDensityChange(e,n),null!=(n=this.targetDensityAutoruns))&&(this.targetDensityAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTargetDensity:function(){var e=this.unobservedTargetDensity,e=(this.emitTargetDensityChange(e,e),this.targetDensityAutoruns);null!=e&&(this.targetDensityAutoruns=null,M.invalidateAutorunArray(e))},unobservedTargetDensity:null,__cbOnTargetDensityChange:null,__cbOnceTargetDensityChange:null,__cbOnOwnerUnbindTargetDensityChange:null,__cbOnceOwnerUnbindTargetDensityChange:null,emitTargetDensityChange:function(e,n){var t=0;if(null!=this.__cbOnTargetDensityChange&&(t+=this.__cbOnTargetDensityChange.length),null!=this.__cbOnceTargetDensityChange&&(t+=this.__cbOnceTargetDensityChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTargetDensityChange)for(var r=0,a=this.__cbOnTargetDensityChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTargetDensityChange[h],++s):--t}if(null!=this.__cbOnceTargetDensityChange){for(var u=null,c=null,r=0,a=this.__cbOnceTargetDensityChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTargetDensityChange[h],this.__cbOnceTargetDensityChange[h]=null,o=this.__cbOnceOwnerUnbindTargetDensityChange[h],(this.__cbOnceOwnerUnbindTargetDensityChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTargetDensityChange[h]),c.push(this.__cbOnceTargetDensityChange[h]))}this.__cbOnceOwnerUnbindTargetDensityChange=u,this.__cbOnceTargetDensityChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTargetDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetDensityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetDensityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTargetDensityChange&&(this.__cbOnOwnerUnbindTargetDensityChange=[]),this.__cbOnOwnerUnbindTargetDensityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTargetDensityChange&&(this.__cbOnOwnerUnbindTargetDensityChange=[]),this.__cbOnOwnerUnbindTargetDensityChange.push(null);null==this.__cbOnTargetDensityChange&&(this.__cbOnTargetDensityChange=[]),this.__cbOnTargetDensityChange.push(t)},onceTargetDensityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetDensityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetDensityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTargetDensityChange&&(this.__cbOnceOwnerUnbindTargetDensityChange=[]),this.__cbOnceOwnerUnbindTargetDensityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTargetDensityChange&&(this.__cbOnceOwnerUnbindTargetDensityChange=[]),this.__cbOnceOwnerUnbindTargetDensityChange.push(null);null==this.__cbOnceTargetDensityChange&&(this.__cbOnceTargetDensityChange=[]),this.__cbOnceTargetDensityChange.push(t)},offTargetDensityChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetDensityChange&&-1!=(n=this.__cbOnTargetDensityChange.indexOf(e))&&(this.__cbOnTargetDensityChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTargetDensityChange[n])&&s(),this.__cbOnOwnerUnbindTargetDensityChange.splice(n,1)),null!=this.__cbOnceTargetDensityChange&&-1!=(n=this.__cbOnceTargetDensityChange.indexOf(e))&&(this.__cbOnceTargetDensityChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTargetDensityChange[n])&&s(),this.__cbOnceOwnerUnbindTargetDensityChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetDensityChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetDensityChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTargetDensityChange[l])&&s()}this.__cbOnOwnerUnbindTargetDensityChange=null}if(null!=this.__cbOnceOwnerUnbindTargetDensityChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetDensityChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTargetDensityChange[l])&&s()}this.__cbOnceOwnerUnbindTargetDensityChange=null}this.__cbOnTargetDensityChange=null,this.__cbOnceTargetDensityChange=null}},listensTargetDensityChange:function(){return null!=this.__cbOnTargetDensityChange&&0<this.__cbOnTargetDensityChange.length||null!=this.__cbOnceTargetDensityChange&&0<this.__cbOnceTargetDensityChange.length},backgroundAutoruns:null,get_background:function(){var e,n,t=this.unobservedBackground;return null!=M.current&&(e=M.current,null!=(n=this.backgroundAutoruns)||(n=M.getAutorunArray(),null!=(this.backgroundAutoruns=n)))&&e.bindToAutorunArray(n),t},set_background:function(e){var n=this.unobservedBackground;return n!=(this.unobservedBackground=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitBackgroundChange(e,n),null!=(n=this.backgroundAutoruns))&&(this.backgroundAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateBackground:function(){var e=this.unobservedBackground,e=(this.emitBackgroundChange(e,e),this.backgroundAutoruns);null!=e&&(this.backgroundAutoruns=null,M.invalidateAutorunArray(e))},unobservedBackground:null,__cbOnBackgroundChange:null,__cbOnceBackgroundChange:null,__cbOnOwnerUnbindBackgroundChange:null,__cbOnceOwnerUnbindBackgroundChange:null,emitBackgroundChange:function(e,n){var t=0;if(null!=this.__cbOnBackgroundChange&&(t+=this.__cbOnBackgroundChange.length),null!=this.__cbOnceBackgroundChange&&(t+=this.__cbOnceBackgroundChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnBackgroundChange)for(var r=0,a=this.__cbOnBackgroundChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnBackgroundChange[h],++s):--t}if(null!=this.__cbOnceBackgroundChange){for(var u=null,c=null,r=0,a=this.__cbOnceBackgroundChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceBackgroundChange[h],this.__cbOnceBackgroundChange[h]=null,o=this.__cbOnceOwnerUnbindBackgroundChange[h],(this.__cbOnceOwnerUnbindBackgroundChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindBackgroundChange[h]),c.push(this.__cbOnceBackgroundChange[h]))}this.__cbOnceOwnerUnbindBackgroundChange=u,this.__cbOnceBackgroundChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onBackgroundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event backgroundChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBackgroundChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBackgroundChange&&(this.__cbOnOwnerUnbindBackgroundChange=[]),this.__cbOnOwnerUnbindBackgroundChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBackgroundChange&&(this.__cbOnOwnerUnbindBackgroundChange=[]),this.__cbOnOwnerUnbindBackgroundChange.push(null);null==this.__cbOnBackgroundChange&&(this.__cbOnBackgroundChange=[]),this.__cbOnBackgroundChange.push(t)},onceBackgroundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event backgroundChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBackgroundChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBackgroundChange&&(this.__cbOnceOwnerUnbindBackgroundChange=[]),this.__cbOnceOwnerUnbindBackgroundChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBackgroundChange&&(this.__cbOnceOwnerUnbindBackgroundChange=[]),this.__cbOnceOwnerUnbindBackgroundChange.push(null);null==this.__cbOnceBackgroundChange&&(this.__cbOnceBackgroundChange=[]),this.__cbOnceBackgroundChange.push(t)},offBackgroundChange:function(e){if(null!=e){var n;null!=this.__cbOnBackgroundChange&&-1!=(n=this.__cbOnBackgroundChange.indexOf(e))&&(this.__cbOnBackgroundChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBackgroundChange[n])&&s(),this.__cbOnOwnerUnbindBackgroundChange.splice(n,1)),null!=this.__cbOnceBackgroundChange&&-1!=(n=this.__cbOnceBackgroundChange.indexOf(e))&&(this.__cbOnceBackgroundChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBackgroundChange[n])&&s(),this.__cbOnceOwnerUnbindBackgroundChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBackgroundChange){for(var t=0,i=this.__cbOnOwnerUnbindBackgroundChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBackgroundChange[l])&&s()}this.__cbOnOwnerUnbindBackgroundChange=null}if(null!=this.__cbOnceOwnerUnbindBackgroundChange){for(t=0,i=this.__cbOnceOwnerUnbindBackgroundChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBackgroundChange[l])&&s()}this.__cbOnceOwnerUnbindBackgroundChange=null}this.__cbOnBackgroundChange=null,this.__cbOnceBackgroundChange=null}},listensBackgroundChange:function(){return null!=this.__cbOnBackgroundChange&&0<this.__cbOnBackgroundChange.length||null!=this.__cbOnceBackgroundChange&&0<this.__cbOnceBackgroundChange.length},scalingAutoruns:null,get_scaling:function(){var e,n,t=this.unobservedScaling;return null!=M.current&&(e=M.current,null!=(n=this.scalingAutoruns)||(n=M.getAutorunArray(),null!=(this.scalingAutoruns=n)))&&e.bindToAutorunArray(n),t},set_scaling:function(e){var n=this.unobservedScaling;return n!=(this.unobservedScaling=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitScalingChange(e,n),null!=(n=this.scalingAutoruns))&&(this.scalingAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateScaling:function(){var e=this.unobservedScaling,e=(this.emitScalingChange(e,e),this.scalingAutoruns);null!=e&&(this.scalingAutoruns=null,M.invalidateAutorunArray(e))},unobservedScaling:null,__cbOnScalingChange:null,__cbOnceScalingChange:null,__cbOnOwnerUnbindScalingChange:null,__cbOnceOwnerUnbindScalingChange:null,emitScalingChange:function(e,n){var t=0;if(null!=this.__cbOnScalingChange&&(t+=this.__cbOnScalingChange.length),null!=this.__cbOnceScalingChange&&(t+=this.__cbOnceScalingChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnScalingChange)for(var r=0,a=this.__cbOnScalingChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnScalingChange[h],++s):--t}if(null!=this.__cbOnceScalingChange){for(var u=null,c=null,r=0,a=this.__cbOnceScalingChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceScalingChange[h],this.__cbOnceScalingChange[h]=null,o=this.__cbOnceOwnerUnbindScalingChange[h],(this.__cbOnceOwnerUnbindScalingChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindScalingChange[h]),c.push(this.__cbOnceScalingChange[h]))}this.__cbOnceOwnerUnbindScalingChange=u,this.__cbOnceScalingChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onScalingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event scalingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offScalingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindScalingChange&&(this.__cbOnOwnerUnbindScalingChange=[]),this.__cbOnOwnerUnbindScalingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindScalingChange&&(this.__cbOnOwnerUnbindScalingChange=[]),this.__cbOnOwnerUnbindScalingChange.push(null);null==this.__cbOnScalingChange&&(this.__cbOnScalingChange=[]),this.__cbOnScalingChange.push(t)},onceScalingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event scalingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offScalingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindScalingChange&&(this.__cbOnceOwnerUnbindScalingChange=[]),this.__cbOnceOwnerUnbindScalingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindScalingChange&&(this.__cbOnceOwnerUnbindScalingChange=[]),this.__cbOnceOwnerUnbindScalingChange.push(null);null==this.__cbOnceScalingChange&&(this.__cbOnceScalingChange=[]),this.__cbOnceScalingChange.push(t)},offScalingChange:function(e){if(null!=e){var n;null!=this.__cbOnScalingChange&&-1!=(n=this.__cbOnScalingChange.indexOf(e))&&(this.__cbOnScalingChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindScalingChange[n])&&s(),this.__cbOnOwnerUnbindScalingChange.splice(n,1)),null!=this.__cbOnceScalingChange&&-1!=(n=this.__cbOnceScalingChange.indexOf(e))&&(this.__cbOnceScalingChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindScalingChange[n])&&s(),this.__cbOnceOwnerUnbindScalingChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindScalingChange){for(var t=0,i=this.__cbOnOwnerUnbindScalingChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindScalingChange[l])&&s()}this.__cbOnOwnerUnbindScalingChange=null}if(null!=this.__cbOnceOwnerUnbindScalingChange){for(t=0,i=this.__cbOnceOwnerUnbindScalingChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindScalingChange[l])&&s()}this.__cbOnceOwnerUnbindScalingChange=null}this.__cbOnScalingChange=null,this.__cbOnceScalingChange=null}},listensScalingChange:function(){return null!=this.__cbOnScalingChange&&0<this.__cbOnScalingChange.length||null!=this.__cbOnceScalingChange&&0<this.__cbOnceScalingChange.length},titleAutoruns:null,get_title:function(){var e,n,t=this.unobservedTitle;return null!=M.current&&(e=M.current,null!=(n=this.titleAutoruns)||(n=M.getAutorunArray(),null!=(this.titleAutoruns=n)))&&e.bindToAutorunArray(n),t},set_title:function(e){var n=this.unobservedTitle;return n!=(this.unobservedTitle=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTitleChange(e,n),null!=(n=this.titleAutoruns))&&(this.titleAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTitle:function(){var e=this.unobservedTitle,e=(this.emitTitleChange(e,e),this.titleAutoruns);null!=e&&(this.titleAutoruns=null,M.invalidateAutorunArray(e))},unobservedTitle:null,__cbOnTitleChange:null,__cbOnceTitleChange:null,__cbOnOwnerUnbindTitleChange:null,__cbOnceOwnerUnbindTitleChange:null,emitTitleChange:function(e,n){var t=0;if(null!=this.__cbOnTitleChange&&(t+=this.__cbOnTitleChange.length),null!=this.__cbOnceTitleChange&&(t+=this.__cbOnceTitleChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTitleChange)for(var r=0,a=this.__cbOnTitleChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTitleChange[h],++s):--t}if(null!=this.__cbOnceTitleChange){for(var u=null,c=null,r=0,a=this.__cbOnceTitleChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTitleChange[h],this.__cbOnceTitleChange[h]=null,o=this.__cbOnceOwnerUnbindTitleChange[h],(this.__cbOnceOwnerUnbindTitleChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTitleChange[h]),c.push(this.__cbOnceTitleChange[h]))}this.__cbOnceOwnerUnbindTitleChange=u,this.__cbOnceTitleChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTitleChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event titleChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTitleChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTitleChange&&(this.__cbOnOwnerUnbindTitleChange=[]),this.__cbOnOwnerUnbindTitleChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTitleChange&&(this.__cbOnOwnerUnbindTitleChange=[]),this.__cbOnOwnerUnbindTitleChange.push(null);null==this.__cbOnTitleChange&&(this.__cbOnTitleChange=[]),this.__cbOnTitleChange.push(t)},onceTitleChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event titleChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTitleChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTitleChange&&(this.__cbOnceOwnerUnbindTitleChange=[]),this.__cbOnceOwnerUnbindTitleChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTitleChange&&(this.__cbOnceOwnerUnbindTitleChange=[]),this.__cbOnceOwnerUnbindTitleChange.push(null);null==this.__cbOnceTitleChange&&(this.__cbOnceTitleChange=[]),this.__cbOnceTitleChange.push(t)},offTitleChange:function(e){if(null!=e){var n;null!=this.__cbOnTitleChange&&-1!=(n=this.__cbOnTitleChange.indexOf(e))&&(this.__cbOnTitleChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTitleChange[n])&&s(),this.__cbOnOwnerUnbindTitleChange.splice(n,1)),null!=this.__cbOnceTitleChange&&-1!=(n=this.__cbOnceTitleChange.indexOf(e))&&(this.__cbOnceTitleChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTitleChange[n])&&s(),this.__cbOnceOwnerUnbindTitleChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTitleChange){for(var t=0,i=this.__cbOnOwnerUnbindTitleChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTitleChange[l])&&s()}this.__cbOnOwnerUnbindTitleChange=null}if(null!=this.__cbOnceOwnerUnbindTitleChange){for(t=0,i=this.__cbOnceOwnerUnbindTitleChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTitleChange[l])&&s()}this.__cbOnceOwnerUnbindTitleChange=null}this.__cbOnTitleChange=null,this.__cbOnceTitleChange=null}},listensTitleChange:function(){return null!=this.__cbOnTitleChange&&0<this.__cbOnTitleChange.length||null!=this.__cbOnceTitleChange&&0<this.__cbOnceTitleChange.length},fullscreenAutoruns:null,get_fullscreen:function(){var e,n,t=this.unobservedFullscreen;return null!=M.current&&(e=M.current,null!=(n=this.fullscreenAutoruns)||(n=M.getAutorunArray(),null!=(this.fullscreenAutoruns=n)))&&e.bindToAutorunArray(n),t},set_fullscreen:function(e){var n=this.unobservedFullscreen;return n!=(this.unobservedFullscreen=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFullscreenChange(e,n),null!=(n=this.fullscreenAutoruns))&&(this.fullscreenAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateFullscreen:function(){var e=this.unobservedFullscreen,e=(this.emitFullscreenChange(e,e),this.fullscreenAutoruns);null!=e&&(this.fullscreenAutoruns=null,M.invalidateAutorunArray(e))},unobservedFullscreen:null,__cbOnFullscreenChange:null,__cbOnceFullscreenChange:null,__cbOnOwnerUnbindFullscreenChange:null,__cbOnceOwnerUnbindFullscreenChange:null,emitFullscreenChange:function(e,n){var t=0;if(null!=this.__cbOnFullscreenChange&&(t+=this.__cbOnFullscreenChange.length),null!=this.__cbOnceFullscreenChange&&(t+=this.__cbOnceFullscreenChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnFullscreenChange)for(var r=0,a=this.__cbOnFullscreenChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnFullscreenChange[h],++s):--t}if(null!=this.__cbOnceFullscreenChange){for(var u=null,c=null,r=0,a=this.__cbOnceFullscreenChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceFullscreenChange[h],this.__cbOnceFullscreenChange[h]=null,o=this.__cbOnceOwnerUnbindFullscreenChange[h],(this.__cbOnceOwnerUnbindFullscreenChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindFullscreenChange[h]),c.push(this.__cbOnceFullscreenChange[h]))}this.__cbOnceOwnerUnbindFullscreenChange=u,this.__cbOnceFullscreenChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onFullscreenChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event fullscreenChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFullscreenChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFullscreenChange&&(this.__cbOnOwnerUnbindFullscreenChange=[]),this.__cbOnOwnerUnbindFullscreenChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFullscreenChange&&(this.__cbOnOwnerUnbindFullscreenChange=[]),this.__cbOnOwnerUnbindFullscreenChange.push(null);null==this.__cbOnFullscreenChange&&(this.__cbOnFullscreenChange=[]),this.__cbOnFullscreenChange.push(t)},onceFullscreenChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event fullscreenChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFullscreenChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFullscreenChange&&(this.__cbOnceOwnerUnbindFullscreenChange=[]),this.__cbOnceOwnerUnbindFullscreenChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFullscreenChange&&(this.__cbOnceOwnerUnbindFullscreenChange=[]),this.__cbOnceOwnerUnbindFullscreenChange.push(null);null==this.__cbOnceFullscreenChange&&(this.__cbOnceFullscreenChange=[]),this.__cbOnceFullscreenChange.push(t)},offFullscreenChange:function(e){if(null!=e){var n;null!=this.__cbOnFullscreenChange&&-1!=(n=this.__cbOnFullscreenChange.indexOf(e))&&(this.__cbOnFullscreenChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFullscreenChange[n])&&s(),this.__cbOnOwnerUnbindFullscreenChange.splice(n,1)),null!=this.__cbOnceFullscreenChange&&-1!=(n=this.__cbOnceFullscreenChange.indexOf(e))&&(this.__cbOnceFullscreenChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFullscreenChange[n])&&s(),this.__cbOnceOwnerUnbindFullscreenChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFullscreenChange){for(var t=0,i=this.__cbOnOwnerUnbindFullscreenChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFullscreenChange[l])&&s()}this.__cbOnOwnerUnbindFullscreenChange=null}if(null!=this.__cbOnceOwnerUnbindFullscreenChange){for(t=0,i=this.__cbOnceOwnerUnbindFullscreenChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFullscreenChange[l])&&s()}this.__cbOnceOwnerUnbindFullscreenChange=null}this.__cbOnFullscreenChange=null,this.__cbOnceFullscreenChange=null}},listensFullscreenChange:function(){return null!=this.__cbOnFullscreenChange&&0<this.__cbOnFullscreenChange.length||null!=this.__cbOnceFullscreenChange&&0<this.__cbOnceFullscreenChange.length},targetFpsAutoruns:null,get_targetFps:function(){var e,n,t=this.unobservedTargetFps;return null!=M.current&&(e=M.current,null!=(n=this.targetFpsAutoruns)||(n=M.getAutorunArray(),null!=(this.targetFpsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_targetFps:function(e){var n=this.unobservedTargetFps;return n!=(this.unobservedTargetFps=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetFpsChange(e,n),null!=(n=this.targetFpsAutoruns))&&(this.targetFpsAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTargetFps:function(){var e=this.unobservedTargetFps,e=(this.emitTargetFpsChange(e,e),this.targetFpsAutoruns);null!=e&&(this.targetFpsAutoruns=null,M.invalidateAutorunArray(e))},unobservedTargetFps:null,__cbOnTargetFpsChange:null,__cbOnceTargetFpsChange:null,__cbOnOwnerUnbindTargetFpsChange:null,__cbOnceOwnerUnbindTargetFpsChange:null,emitTargetFpsChange:function(e,n){var t=0;if(null!=this.__cbOnTargetFpsChange&&(t+=this.__cbOnTargetFpsChange.length),null!=this.__cbOnceTargetFpsChange&&(t+=this.__cbOnceTargetFpsChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTargetFpsChange)for(var r=0,a=this.__cbOnTargetFpsChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTargetFpsChange[h],++s):--t}if(null!=this.__cbOnceTargetFpsChange){for(var u=null,c=null,r=0,a=this.__cbOnceTargetFpsChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTargetFpsChange[h],this.__cbOnceTargetFpsChange[h]=null,o=this.__cbOnceOwnerUnbindTargetFpsChange[h],(this.__cbOnceOwnerUnbindTargetFpsChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTargetFpsChange[h]),c.push(this.__cbOnceTargetFpsChange[h]))}this.__cbOnceOwnerUnbindTargetFpsChange=u,this.__cbOnceTargetFpsChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTargetFpsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetFpsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetFpsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTargetFpsChange&&(this.__cbOnOwnerUnbindTargetFpsChange=[]),this.__cbOnOwnerUnbindTargetFpsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTargetFpsChange&&(this.__cbOnOwnerUnbindTargetFpsChange=[]),this.__cbOnOwnerUnbindTargetFpsChange.push(null);null==this.__cbOnTargetFpsChange&&(this.__cbOnTargetFpsChange=[]),this.__cbOnTargetFpsChange.push(t)},onceTargetFpsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event targetFpsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTargetFpsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTargetFpsChange&&(this.__cbOnceOwnerUnbindTargetFpsChange=[]),this.__cbOnceOwnerUnbindTargetFpsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTargetFpsChange&&(this.__cbOnceOwnerUnbindTargetFpsChange=[]),this.__cbOnceOwnerUnbindTargetFpsChange.push(null);null==this.__cbOnceTargetFpsChange&&(this.__cbOnceTargetFpsChange=[]),this.__cbOnceTargetFpsChange.push(t)},offTargetFpsChange:function(e){if(null!=e){var n;null!=this.__cbOnTargetFpsChange&&-1!=(n=this.__cbOnTargetFpsChange.indexOf(e))&&(this.__cbOnTargetFpsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTargetFpsChange[n])&&s(),this.__cbOnOwnerUnbindTargetFpsChange.splice(n,1)),null!=this.__cbOnceTargetFpsChange&&-1!=(n=this.__cbOnceTargetFpsChange.indexOf(e))&&(this.__cbOnceTargetFpsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTargetFpsChange[n])&&s(),this.__cbOnceOwnerUnbindTargetFpsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTargetFpsChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetFpsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTargetFpsChange[l])&&s()}this.__cbOnOwnerUnbindTargetFpsChange=null}if(null!=this.__cbOnceOwnerUnbindTargetFpsChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetFpsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTargetFpsChange[l])&&s()}this.__cbOnceOwnerUnbindTargetFpsChange=null}this.__cbOnTargetFpsChange=null,this.__cbOnceTargetFpsChange=null}},listensTargetFpsChange:function(){return null!=this.__cbOnTargetFpsChange&&0<this.__cbOnTargetFpsChange.length||null!=this.__cbOnceTargetFpsChange&&0<this.__cbOnceTargetFpsChange.length},maxDeltaAutoruns:null,get_maxDelta:function(){var e,n,t=this.unobservedMaxDelta;return null!=M.current&&(e=M.current,null!=(n=this.maxDeltaAutoruns)||(n=M.getAutorunArray(),null!=(this.maxDeltaAutoruns=n)))&&e.bindToAutorunArray(n),t},set_maxDelta:function(e){var n=this.unobservedMaxDelta;return n!=(this.unobservedMaxDelta=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitMaxDeltaChange(e,n),null!=(n=this.maxDeltaAutoruns))&&(this.maxDeltaAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateMaxDelta:function(){var e=this.unobservedMaxDelta,e=(this.emitMaxDeltaChange(e,e),this.maxDeltaAutoruns);null!=e&&(this.maxDeltaAutoruns=null,M.invalidateAutorunArray(e))},unobservedMaxDelta:null,__cbOnMaxDeltaChange:null,__cbOnceMaxDeltaChange:null,__cbOnOwnerUnbindMaxDeltaChange:null,__cbOnceOwnerUnbindMaxDeltaChange:null,emitMaxDeltaChange:function(e,n){var t=0;if(null!=this.__cbOnMaxDeltaChange&&(t+=this.__cbOnMaxDeltaChange.length),null!=this.__cbOnceMaxDeltaChange&&(t+=this.__cbOnceMaxDeltaChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMaxDeltaChange)for(var r=0,a=this.__cbOnMaxDeltaChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMaxDeltaChange[h],++s):--t}if(null!=this.__cbOnceMaxDeltaChange){for(var u=null,c=null,r=0,a=this.__cbOnceMaxDeltaChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMaxDeltaChange[h],this.__cbOnceMaxDeltaChange[h]=null,o=this.__cbOnceOwnerUnbindMaxDeltaChange[h],(this.__cbOnceOwnerUnbindMaxDeltaChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMaxDeltaChange[h]),c.push(this.__cbOnceMaxDeltaChange[h]))}this.__cbOnceOwnerUnbindMaxDeltaChange=u,this.__cbOnceMaxDeltaChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMaxDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event maxDeltaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMaxDeltaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMaxDeltaChange&&(this.__cbOnOwnerUnbindMaxDeltaChange=[]),this.__cbOnOwnerUnbindMaxDeltaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMaxDeltaChange&&(this.__cbOnOwnerUnbindMaxDeltaChange=[]),this.__cbOnOwnerUnbindMaxDeltaChange.push(null);null==this.__cbOnMaxDeltaChange&&(this.__cbOnMaxDeltaChange=[]),this.__cbOnMaxDeltaChange.push(t)},onceMaxDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event maxDeltaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMaxDeltaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMaxDeltaChange&&(this.__cbOnceOwnerUnbindMaxDeltaChange=[]),this.__cbOnceOwnerUnbindMaxDeltaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMaxDeltaChange&&(this.__cbOnceOwnerUnbindMaxDeltaChange=[]),this.__cbOnceOwnerUnbindMaxDeltaChange.push(null);null==this.__cbOnceMaxDeltaChange&&(this.__cbOnceMaxDeltaChange=[]),this.__cbOnceMaxDeltaChange.push(t)},offMaxDeltaChange:function(e){if(null!=e){var n;null!=this.__cbOnMaxDeltaChange&&-1!=(n=this.__cbOnMaxDeltaChange.indexOf(e))&&(this.__cbOnMaxDeltaChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMaxDeltaChange[n])&&s(),this.__cbOnOwnerUnbindMaxDeltaChange.splice(n,1)),null!=this.__cbOnceMaxDeltaChange&&-1!=(n=this.__cbOnceMaxDeltaChange.indexOf(e))&&(this.__cbOnceMaxDeltaChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMaxDeltaChange[n])&&s(),this.__cbOnceOwnerUnbindMaxDeltaChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMaxDeltaChange){for(var t=0,i=this.__cbOnOwnerUnbindMaxDeltaChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMaxDeltaChange[l])&&s()}this.__cbOnOwnerUnbindMaxDeltaChange=null}if(null!=this.__cbOnceOwnerUnbindMaxDeltaChange){for(t=0,i=this.__cbOnceOwnerUnbindMaxDeltaChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMaxDeltaChange[l])&&s()}this.__cbOnceOwnerUnbindMaxDeltaChange=null}this.__cbOnMaxDeltaChange=null,this.__cbOnceMaxDeltaChange=null}},listensMaxDeltaChange:function(){return null!=this.__cbOnMaxDeltaChange&&0<this.__cbOnMaxDeltaChange.length||null!=this.__cbOnceMaxDeltaChange&&0<this.__cbOnceMaxDeltaChange.length},overrideDeltaAutoruns:null,get_overrideDelta:function(){var e,n,t=this.unobservedOverrideDelta;return null!=M.current&&(e=M.current,null!=(n=this.overrideDeltaAutoruns)||(n=M.getAutorunArray(),null!=(this.overrideDeltaAutoruns=n)))&&e.bindToAutorunArray(n),t},set_overrideDelta:function(e){var n=this.unobservedOverrideDelta;return n!=(this.unobservedOverrideDelta=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitOverrideDeltaChange(e,n),null!=(n=this.overrideDeltaAutoruns))&&(this.overrideDeltaAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateOverrideDelta:function(){var e=this.unobservedOverrideDelta,e=(this.emitOverrideDeltaChange(e,e),this.overrideDeltaAutoruns);null!=e&&(this.overrideDeltaAutoruns=null,M.invalidateAutorunArray(e))},unobservedOverrideDelta:null,__cbOnOverrideDeltaChange:null,__cbOnceOverrideDeltaChange:null,__cbOnOwnerUnbindOverrideDeltaChange:null,__cbOnceOwnerUnbindOverrideDeltaChange:null,emitOverrideDeltaChange:function(e,n){var t=0;if(null!=this.__cbOnOverrideDeltaChange&&(t+=this.__cbOnOverrideDeltaChange.length),null!=this.__cbOnceOverrideDeltaChange&&(t+=this.__cbOnceOverrideDeltaChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnOverrideDeltaChange)for(var r=0,a=this.__cbOnOverrideDeltaChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnOverrideDeltaChange[h],++s):--t}if(null!=this.__cbOnceOverrideDeltaChange){for(var u=null,c=null,r=0,a=this.__cbOnceOverrideDeltaChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceOverrideDeltaChange[h],this.__cbOnceOverrideDeltaChange[h]=null,o=this.__cbOnceOwnerUnbindOverrideDeltaChange[h],(this.__cbOnceOwnerUnbindOverrideDeltaChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindOverrideDeltaChange[h]),c.push(this.__cbOnceOverrideDeltaChange[h]))}this.__cbOnceOwnerUnbindOverrideDeltaChange=u,this.__cbOnceOverrideDeltaChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onOverrideDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event overrideDeltaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOverrideDeltaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindOverrideDeltaChange&&(this.__cbOnOwnerUnbindOverrideDeltaChange=[]),this.__cbOnOwnerUnbindOverrideDeltaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindOverrideDeltaChange&&(this.__cbOnOwnerUnbindOverrideDeltaChange=[]),this.__cbOnOwnerUnbindOverrideDeltaChange.push(null);null==this.__cbOnOverrideDeltaChange&&(this.__cbOnOverrideDeltaChange=[]),this.__cbOnOverrideDeltaChange.push(t)},onceOverrideDeltaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event overrideDeltaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOverrideDeltaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindOverrideDeltaChange&&(this.__cbOnceOwnerUnbindOverrideDeltaChange=[]),this.__cbOnceOwnerUnbindOverrideDeltaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindOverrideDeltaChange&&(this.__cbOnceOwnerUnbindOverrideDeltaChange=[]),this.__cbOnceOwnerUnbindOverrideDeltaChange.push(null);null==this.__cbOnceOverrideDeltaChange&&(this.__cbOnceOverrideDeltaChange=[]),this.__cbOnceOverrideDeltaChange.push(t)},offOverrideDeltaChange:function(e){if(null!=e){var n;null!=this.__cbOnOverrideDeltaChange&&-1!=(n=this.__cbOnOverrideDeltaChange.indexOf(e))&&(this.__cbOnOverrideDeltaChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindOverrideDeltaChange[n])&&s(),this.__cbOnOwnerUnbindOverrideDeltaChange.splice(n,1)),null!=this.__cbOnceOverrideDeltaChange&&-1!=(n=this.__cbOnceOverrideDeltaChange.indexOf(e))&&(this.__cbOnceOverrideDeltaChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindOverrideDeltaChange[n])&&s(),this.__cbOnceOwnerUnbindOverrideDeltaChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindOverrideDeltaChange){for(var t=0,i=this.__cbOnOwnerUnbindOverrideDeltaChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindOverrideDeltaChange[l])&&s()}this.__cbOnOwnerUnbindOverrideDeltaChange=null}if(null!=this.__cbOnceOwnerUnbindOverrideDeltaChange){for(t=0,i=this.__cbOnceOwnerUnbindOverrideDeltaChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindOverrideDeltaChange[l])&&s()}this.__cbOnceOwnerUnbindOverrideDeltaChange=null}this.__cbOnOverrideDeltaChange=null,this.__cbOnceOverrideDeltaChange=null}},listensOverrideDeltaChange:function(){return null!=this.__cbOnOverrideDeltaChange&&0<this.__cbOnOverrideDeltaChange.length||null!=this.__cbOnceOverrideDeltaChange&&0<this.__cbOnceOverrideDeltaChange.length},preventDefaultMouseWheelAutoruns:null,get_preventDefaultMouseWheel:function(){var e,n,t=this.unobservedPreventDefaultMouseWheel;return null!=M.current&&(e=M.current,null!=(n=this.preventDefaultMouseWheelAutoruns)||(n=M.getAutorunArray(),null!=(this.preventDefaultMouseWheelAutoruns=n)))&&e.bindToAutorunArray(n),t},set_preventDefaultMouseWheel:function(e){var n=this.unobservedPreventDefaultMouseWheel;return n!=(this.unobservedPreventDefaultMouseWheel=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitPreventDefaultMouseWheelChange(e,n),null!=(n=this.preventDefaultMouseWheelAutoruns))&&(this.preventDefaultMouseWheelAutoruns=null,M.invalidateAutorunArray(n)),e},invalidatePreventDefaultMouseWheel:function(){var e=this.unobservedPreventDefaultMouseWheel,e=(this.emitPreventDefaultMouseWheelChange(e,e),this.preventDefaultMouseWheelAutoruns);null!=e&&(this.preventDefaultMouseWheelAutoruns=null,M.invalidateAutorunArray(e))},unobservedPreventDefaultMouseWheel:null,__cbOnPreventDefaultMouseWheelChange:null,__cbOncePreventDefaultMouseWheelChange:null,__cbOnOwnerUnbindPreventDefaultMouseWheelChange:null,__cbOnceOwnerUnbindPreventDefaultMouseWheelChange:null,emitPreventDefaultMouseWheelChange:function(e,n){var t=0;if(null!=this.__cbOnPreventDefaultMouseWheelChange&&(t+=this.__cbOnPreventDefaultMouseWheelChange.length),null!=this.__cbOncePreventDefaultMouseWheelChange&&(t+=this.__cbOncePreventDefaultMouseWheelChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnPreventDefaultMouseWheelChange)for(var r=0,a=this.__cbOnPreventDefaultMouseWheelChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnPreventDefaultMouseWheelChange[h],++s):--t}if(null!=this.__cbOncePreventDefaultMouseWheelChange){for(var u=null,c=null,r=0,a=this.__cbOncePreventDefaultMouseWheelChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOncePreventDefaultMouseWheelChange[h],this.__cbOncePreventDefaultMouseWheelChange[h]=null,o=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[h],(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[h]),c.push(this.__cbOncePreventDefaultMouseWheelChange[h]))}this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=u,this.__cbOncePreventDefaultMouseWheelChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onPreventDefaultMouseWheelChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event preventDefaultMouseWheelChange because owner is destroyed!");var l=function(e){null!=t&&(i.offPreventDefaultMouseWheelChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.push(null);null==this.__cbOnPreventDefaultMouseWheelChange&&(this.__cbOnPreventDefaultMouseWheelChange=[]),this.__cbOnPreventDefaultMouseWheelChange.push(t)},oncePreventDefaultMouseWheelChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event preventDefaultMouseWheelChange because owner is destroyed!");var l=function(e){null!=t&&(i.offPreventDefaultMouseWheelChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange&&(this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=[]),this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.push(null);null==this.__cbOncePreventDefaultMouseWheelChange&&(this.__cbOncePreventDefaultMouseWheelChange=[]),this.__cbOncePreventDefaultMouseWheelChange.push(t)},offPreventDefaultMouseWheelChange:function(e){if(null!=e){var n;null!=this.__cbOnPreventDefaultMouseWheelChange&&-1!=(n=this.__cbOnPreventDefaultMouseWheelChange.indexOf(e))&&(this.__cbOnPreventDefaultMouseWheelChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange[n])&&s(),this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.splice(n,1)),null!=this.__cbOncePreventDefaultMouseWheelChange&&-1!=(n=this.__cbOncePreventDefaultMouseWheelChange.indexOf(e))&&(this.__cbOncePreventDefaultMouseWheelChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[n])&&s(),this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange){for(var t=0,i=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange[l])&&s()}this.__cbOnOwnerUnbindPreventDefaultMouseWheelChange=null}if(null!=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange){for(t=0,i=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange[l])&&s()}this.__cbOnceOwnerUnbindPreventDefaultMouseWheelChange=null}this.__cbOnPreventDefaultMouseWheelChange=null,this.__cbOncePreventDefaultMouseWheelChange=null}},listensPreventDefaultMouseWheelChange:function(){return null!=this.__cbOnPreventDefaultMouseWheelChange&&0<this.__cbOnPreventDefaultMouseWheelChange.length||null!=this.__cbOncePreventDefaultMouseWheelChange&&0<this.__cbOncePreventDefaultMouseWheelChange.length},preventDefaultTouchesAutoruns:null,get_preventDefaultTouches:function(){var e,n,t=this.unobservedPreventDefaultTouches;return null!=M.current&&(e=M.current,null!=(n=this.preventDefaultTouchesAutoruns)||(n=M.getAutorunArray(),null!=(this.preventDefaultTouchesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_preventDefaultTouches:function(e){var n=this.unobservedPreventDefaultTouches;return n!=(this.unobservedPreventDefaultTouches=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitPreventDefaultTouchesChange(e,n),null!=(n=this.preventDefaultTouchesAutoruns))&&(this.preventDefaultTouchesAutoruns=null,M.invalidateAutorunArray(n)),e},invalidatePreventDefaultTouches:function(){var e=this.unobservedPreventDefaultTouches,e=(this.emitPreventDefaultTouchesChange(e,e),this.preventDefaultTouchesAutoruns);null!=e&&(this.preventDefaultTouchesAutoruns=null,M.invalidateAutorunArray(e))},unobservedPreventDefaultTouches:null,__cbOnPreventDefaultTouchesChange:null,__cbOncePreventDefaultTouchesChange:null,__cbOnOwnerUnbindPreventDefaultTouchesChange:null,__cbOnceOwnerUnbindPreventDefaultTouchesChange:null,emitPreventDefaultTouchesChange:function(e,n){var t=0;if(null!=this.__cbOnPreventDefaultTouchesChange&&(t+=this.__cbOnPreventDefaultTouchesChange.length),null!=this.__cbOncePreventDefaultTouchesChange&&(t+=this.__cbOncePreventDefaultTouchesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnPreventDefaultTouchesChange)for(var r=0,a=this.__cbOnPreventDefaultTouchesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnPreventDefaultTouchesChange[h],++s):--t}if(null!=this.__cbOncePreventDefaultTouchesChange){for(var u=null,c=null,r=0,a=this.__cbOncePreventDefaultTouchesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOncePreventDefaultTouchesChange[h],this.__cbOncePreventDefaultTouchesChange[h]=null,o=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[h],(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[h]),c.push(this.__cbOncePreventDefaultTouchesChange[h]))}this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=u,this.__cbOncePreventDefaultTouchesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onPreventDefaultTouchesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event preventDefaultTouchesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offPreventDefaultTouchesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnOwnerUnbindPreventDefaultTouchesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnOwnerUnbindPreventDefaultTouchesChange.push(null);null==this.__cbOnPreventDefaultTouchesChange&&(this.__cbOnPreventDefaultTouchesChange=[]),this.__cbOnPreventDefaultTouchesChange.push(t)},oncePreventDefaultTouchesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event preventDefaultTouchesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offPreventDefaultTouchesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindPreventDefaultTouchesChange&&(this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=[]),this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.push(null);null==this.__cbOncePreventDefaultTouchesChange&&(this.__cbOncePreventDefaultTouchesChange=[]),this.__cbOncePreventDefaultTouchesChange.push(t)},offPreventDefaultTouchesChange:function(e){if(null!=e){var n;null!=this.__cbOnPreventDefaultTouchesChange&&-1!=(n=this.__cbOnPreventDefaultTouchesChange.indexOf(e))&&(this.__cbOnPreventDefaultTouchesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindPreventDefaultTouchesChange[n])&&s(),this.__cbOnOwnerUnbindPreventDefaultTouchesChange.splice(n,1)),null!=this.__cbOncePreventDefaultTouchesChange&&-1!=(n=this.__cbOncePreventDefaultTouchesChange.indexOf(e))&&(this.__cbOncePreventDefaultTouchesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[n])&&s(),this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindPreventDefaultTouchesChange){for(var t=0,i=this.__cbOnOwnerUnbindPreventDefaultTouchesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindPreventDefaultTouchesChange[l])&&s()}this.__cbOnOwnerUnbindPreventDefaultTouchesChange=null}if(null!=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange){for(t=0,i=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindPreventDefaultTouchesChange[l])&&s()}this.__cbOnceOwnerUnbindPreventDefaultTouchesChange=null}this.__cbOnPreventDefaultTouchesChange=null,this.__cbOncePreventDefaultTouchesChange=null}},listensPreventDefaultTouchesChange:function(){return null!=this.__cbOnPreventDefaultTouchesChange&&0<this.__cbOnPreventDefaultTouchesChange.length||null!=this.__cbOncePreventDefaultTouchesChange&&0<this.__cbOncePreventDefaultTouchesChange.length},orientation:null,collections:null,appInfo:null,antialiasing:null,resizable:null,assetsPath:null,backend:null,defaultFont:null,defaultShader:null,unbindEvents:function(){this.offObservedDirty(),this.offTargetWidthChange(),this.offTargetHeightChange(),this.offWindowWidthChange(),this.offWindowHeightChange(),this.offTargetDensityChange(),this.offBackgroundChange(),this.offScalingChange(),this.offTitleChange(),this.offFullscreenChange(),this.offTargetFpsChange(),this.offMaxDeltaChange(),this.offOverrideDeltaChange(),this.offPreventDefaultMouseWheelChange(),this.offPreventDefaultTouchesChange()},__class__:Xt,__properties__:{set_preventDefaultTouches:"set_preventDefaultTouches",get_preventDefaultTouches:"get_preventDefaultTouches",set_preventDefaultMouseWheel:"set_preventDefaultMouseWheel",get_preventDefaultMouseWheel:"get_preventDefaultMouseWheel",set_overrideDelta:"set_overrideDelta",get_overrideDelta:"get_overrideDelta",set_maxDelta:"set_maxDelta",get_maxDelta:"get_maxDelta",set_targetFps:"set_targetFps",get_targetFps:"get_targetFps",set_fullscreen:"set_fullscreen",get_fullscreen:"get_fullscreen",set_title:"set_title",get_title:"get_title",set_scaling:"set_scaling",get_scaling:"get_scaling",set_background:"set_background",get_background:"get_background",set_targetDensity:"set_targetDensity",get_targetDensity:"get_targetDensity",set_windowHeight:"set_windowHeight",get_windowHeight:"get_windowHeight",set_windowWidth:"set_windowWidth",get_windowWidth:"get_windowWidth",set_targetHeight:"set_targetHeight",get_targetHeight:"get_targetHeight",set_targetWidth:"set_targetWidth",get_targetWidth:"get_targetWidth"}},(L["ceramic.Shader"]=Q1).__name__="ceramic.Shader",Q1.fromSource=function(e,n){for(var t=he.app.backend.shaders,i=!1,l=0,s=n.split("\n");l<s.length;){var r=s[l];if(++l,"//ceramic:multitexture"==B.replace(B.trim(r)," ","").toLowerCase()){i=!0;break}}var a=["tex0"];if(i){var h=he.app.backend.textures.maxTexturesByBatch(),t=t.maxIfStatementsByFragmentShader(),u=0|Math.min(h,t);if(1<u)for(var c=1;c<=u;)a.push("tex"+c),++c;n=ze.processMultiTextureFragTemplate(n,h,t),e=ze.processMultiTextureVertTemplate(e,h,t)}h=!1,t=!1,2<=C.app.runtime.webglVersion&&(t=h=!0),h&&(n=ze.removeExtensions(n),e=ze.removeExtensions(e)),t&&(n=ze.convertToGLES3(n,!0),e=ze.convertToGLES3(e,!1)),h=new Ga;return h.attributes=i?ze.SHADER_ATTRIBUTES_MULTITEXTURE:ze.SHADER_ATTRIBUTES,h.textures=a,h.vertSource=e,h.fragSource=n,h.isBatchingMultiTexture=i,h.customAttributes=null,h.init(),null==h?null:new Q1(h)},Q1.__super__=l,Q1.prototype=$extend(l.prototype,{backendItem:null,asset:null,attributes:null,customAttributes:null,customFloatAttributesSize:null,textureSlots:null,usedTextures:null,destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),he.app.backend.shaders,this.backendItem.destroy(),this.backendItem=null,this.attributes=null)},clone:function(){he.app.backend.shaders;var e=this.backendItem.clone();return new Q1(e,this.customAttributes)},setInt:function(e,n){he.app.backend.shaders;this.backendItem.uniforms.setInt(e,n)},setFloat:function(e,n){he.app.backend.shaders;this.backendItem.uniforms.setFloat(e,n)},setColor:function(e,n){he.app.backend.shaders;this.backendItem.uniforms.setColor(e,(n>>16&255)/255,(n>>8&255)/255,(255&n)/255,1)},setAlphaColor:function(e,n){he.app.backend.shaders;this.backendItem.uniforms.setColor(e,(n>>16&255)/255,(n>>8&255)/255,(255&n)/255,(n>>24&255)/255)},setVec2:function(e,n,t){he.app.backend.shaders;this.backendItem.uniforms.setVector2(e,n,t)},setVec3:function(e,n,t,i){he.app.backend.shaders;this.backendItem.uniforms.setVector3(e,n,t,i)},setVec4:function(e,n,t,i,l){he.app.backend.shaders;this.backendItem.uniforms.setVector4(e,n,t,i,l)},setFloatArray:function(e,n){he.app.backend.shaders;this.backendItem.uniforms.setFloatArray(e,new Float32Array(n))},setTexture:function(e,n,t){null==this.textureSlots&&(this.textureSlots=new Kn,this.usedTextures=[]);var i=this.textureSlots.get(n);null!=i&&this.usedTextures.splice(this.usedTextures.indexOf(i),1),this.textureSlots.set(n,t),null!=t&&this.usedTextures.push(t),he.app.backend.shaders;this.backendItem.uniforms.setTexture(e,n,null!=t?t.backendItem:null)},setMat4FromTransform:function(e,n){he.app.backend.shaders;this.backendItem.uniforms.setMatrix4(e,new Float32Array([n.a,n.b,0,0,n.c,n.d,0,0,0,0,1,0,n.tx,n.ty,0,1]))},toString:function(){var e;return null!=this.id?(e=this.id,B.startsWith(e,"shader:")&&(e=h.substr(e,7,null)),null!=this.asset&&null!=this.asset.options.vertId||null!=this.asset.options.fragId?"Shader("+e+" "+(null!=this.asset.options.vertId?this.asset.options.vertId:"default")+" "+(null!=this.asset.options.fragId?this.asset.options.fragId:"default")+")":"Shader("+e+")"):"Shader()"},__class__:Q1}),function(e,n,t){this.unobservedShader=null,this.shaderAutoruns=null,i0.call(this,"shader",e,n,t)}),Vt=((L["ceramic.ShaderAsset"]=Yt).__name__="ceramic.ShaderAsset",Yt.__super__=i0,Yt.prototype=$extend(i0.prototype,{shaderAutoruns:null,get_shader:function(){var e,n,t=this.unobservedShader;return null!=M.current&&(e=M.current,null!=(n=this.shaderAutoruns)||(n=M.getAutorunArray(),null!=(this.shaderAutoruns=n)))&&e.bindToAutorunArray(n),t},set_shader:function(e){var n=this.unobservedShader;return n!=(this.unobservedShader=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitShaderChange(e,n),null!=(n=this.shaderAutoruns))&&(this.shaderAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateShader:function(){var e=this.unobservedShader,e=(this.emitShaderChange(e,e),this.shaderAutoruns);null!=e&&(this.shaderAutoruns=null,M.invalidateAutorunArray(e))},unobservedShader:null,__cbOnShaderChange:null,__cbOnceShaderChange:null,__cbOnOwnerUnbindShaderChange:null,__cbOnceOwnerUnbindShaderChange:null,emitShaderChange:function(e,n){var t=0;if(null!=this.__cbOnShaderChange&&(t+=this.__cbOnShaderChange.length),null!=this.__cbOnceShaderChange&&(t+=this.__cbOnceShaderChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnShaderChange)for(var r=0,a=this.__cbOnShaderChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnShaderChange[h],++s):--t}if(null!=this.__cbOnceShaderChange){for(var u=null,c=null,r=0,a=this.__cbOnceShaderChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceShaderChange[h],this.__cbOnceShaderChange[h]=null,o=this.__cbOnceOwnerUnbindShaderChange[h],(this.__cbOnceOwnerUnbindShaderChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindShaderChange[h]),c.push(this.__cbOnceShaderChange[h]))}this.__cbOnceOwnerUnbindShaderChange=u,this.__cbOnceShaderChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onShaderChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event shaderChange because owner is destroyed!");var l=function(e){null!=t&&(i.offShaderChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindShaderChange&&(this.__cbOnOwnerUnbindShaderChange=[]),this.__cbOnOwnerUnbindShaderChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindShaderChange&&(this.__cbOnOwnerUnbindShaderChange=[]),this.__cbOnOwnerUnbindShaderChange.push(null);null==this.__cbOnShaderChange&&(this.__cbOnShaderChange=[]),this.__cbOnShaderChange.push(t)},onceShaderChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event shaderChange because owner is destroyed!");var l=function(e){null!=t&&(i.offShaderChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindShaderChange&&(this.__cbOnceOwnerUnbindShaderChange=[]),this.__cbOnceOwnerUnbindShaderChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindShaderChange&&(this.__cbOnceOwnerUnbindShaderChange=[]),this.__cbOnceOwnerUnbindShaderChange.push(null);null==this.__cbOnceShaderChange&&(this.__cbOnceShaderChange=[]),this.__cbOnceShaderChange.push(t)},offShaderChange:function(e){if(null!=e){var n;null!=this.__cbOnShaderChange&&-1!=(n=this.__cbOnShaderChange.indexOf(e))&&(this.__cbOnShaderChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindShaderChange[n])&&s(),this.__cbOnOwnerUnbindShaderChange.splice(n,1)),null!=this.__cbOnceShaderChange&&-1!=(n=this.__cbOnceShaderChange.indexOf(e))&&(this.__cbOnceShaderChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindShaderChange[n])&&s(),this.__cbOnceOwnerUnbindShaderChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindShaderChange){for(var t=0,i=this.__cbOnOwnerUnbindShaderChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindShaderChange[l])&&s()}this.__cbOnOwnerUnbindShaderChange=null}if(null!=this.__cbOnceOwnerUnbindShaderChange){for(t=0,i=this.__cbOnceOwnerUnbindShaderChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindShaderChange[l])&&s()}this.__cbOnceOwnerUnbindShaderChange=null}this.__cbOnShaderChange=null,this.__cbOnceShaderChange=null}},listensShaderChange:function(){return null!=this.__cbOnShaderChange&&0<this.__cbOnShaderChange.length||null!=this.__cbOnceShaderChange&&0<this.__cbOnceShaderChange.length},load:function(){var p=this;if(this.set_status(Je.LOADING),null==this.path)he.app.logger.warning("Cannot load shader asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:24,className:"ceramic.ShaderAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1);else{var m=null;if(null!=this.options.customAttributes)for(var m=[],e=this.options.customAttributes,n=0,t=e.length;n<t;){var i=e[n++];m.push(new Vt(i.size,i.name))}var l,s,r,a={};if(null!=this.owner&&(a.immediate=this.owner.immediate,a.loadMethod=this.owner.loadMethod),null!=this.path&&(B.endsWith(this.path.toLowerCase(),".frag")||B.endsWith(this.path.toLowerCase(),".vert"))){var h=Re.allByName.h[this.name];if(null==this.options.fragId)for(n=0,t=h.length;n<t;){var u=h[n++];if(B.endsWith(u.toLowerCase(),".frag")){this.options.fragId=u;break}}if(null==this.options.vertId)for(n=0,t=h.length;n<t;){u=h[n++];if(B.endsWith(u.toLowerCase(),".vert")){this.options.vertId=u;break}}he.app.logger.info("Load shader"+(null!=this.options.vertId?" "+V.string(this.options.vertId):"")+(null!=this.options.fragId?" "+V.string(this.options.fragId):""),{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:72,className:"ceramic.ShaderAsset",methodName:"load"})}else he.app.logger.info("Load shader "+this.path,{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:75,className:"ceramic.ShaderAsset",methodName:"load"});null==this.options.vertId&&(this.options.vertId="textured.vert"),null==this.options.fragId?(this.set_status(Je.BROKEN),he.app.logger.error("Missing fragId option to load shader at path: "+this.path,{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:84,className:"ceramic.ShaderAsset",methodName:"load"}),this.emitComplete(!1)):(l=this.options.vertId,"textured.vert"!=this.options.vertId?(l=Re.realAssetPath(this.options.vertId,this.runtimeAssets),0<(r=Re.getReloadCount(l))&&(l+="?hot="+r)):l=Re.realAssetPath(this.options.vertId,null),s=Re.realAssetPath(this.options.fragId,this.runtimeAssets),0<(r=Re.getReloadCount(s))&&(s+="?hot="+r),he.app.backend.texts.load(l,a,function(f){he.app.backend.texts.load(s,a,function(e){if(null==f)p.set_status(Je.BROKEN),he.app.logger.error("Failed to load "+V.string(p.options.vertId)+" for shader at path: "+p.path,{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:112,className:"ceramic.ShaderAsset",methodName:"load"}),p.emitComplete(!1);else if(null==e)p.set_status(Je.BROKEN),he.app.logger.error("Failed to load "+V.string(p.options.fragId)+" for shader at path: "+p.path,{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:119,className:"ceramic.ShaderAsset",methodName:"load"}),p.emitComplete(!1);else{var n=null;try{for(var t=he.app.backend.shaders,i=f,l=e,s=!1,r=0,a=l.split("\n");r<a.length;){var h=a[r];if(++r,"//ceramic:multitexture"==B.replace(B.trim(h)," ","").toLowerCase()){s=!0;break}}var u=["tex0"];if(s){var c=he.app.backend.textures.maxTexturesByBatch(),o=t.maxIfStatementsByFragmentShader(),_=0|Math.min(c,o);if(1<_)for(var d=1;d<=_;)u.push("tex"+d),++d;l=ze.processMultiTextureFragTemplate(l,c,o),i=ze.processMultiTextureVertTemplate(i,c,o)}var b,g=!1,O=!1;2<=C.app.runtime.webglVersion&&(O=g=!0),g&&(l=ze.removeExtensions(l),i=ze.removeExtensions(i)),O&&(l=ze.convertToGLES3(l,!0),i=ze.convertToGLES3(i,!1)),(b=new Ga).attributes=s?ze.SHADER_ATTRIBUTES_MULTITEXTURE:ze.SHADER_ATTRIBUTES,b.textures=u,b.vertSource=i,b.fragSource=l,b.isBatchingMultiTexture=s,b.customAttributes=m,b.init(),n=b}catch(r){Al.lastError=r;e=Q.caught(r).unwrap();he.app.logger.error("Error when creating shader from source: "+V.string(e),{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:129,className:"ceramic.ShaderAsset",methodName:"load"})}null==n?(p.set_status(Je.BROKEN),he.app.logger.error("Failed to create shader from data at path: "+p.path,{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:134,className:"ceramic.ShaderAsset",methodName:"load"}),p.emitComplete(!1)):((b=new Q1(n,m)).asset=p,b.id="shader:"+p.path,t=p.get_shader(),p.set_shader(b),p.set_status(Je.READY),p.emitComplete(!0),null!=t&&(t.asset=null,t.destroy()))}})}))}},assetFilesDidChange:function(e,n){var t,i,l;null!=this.options&&(null!=this.options.fragId?(t=this.options.fragId,i=-1,Object.prototype.hasOwnProperty.call(n.h,t)&&(i=n.h[t]),l=-1,(l=Object.prototype.hasOwnProperty.call(e.h,t)?e.h[t]:l)!=i&&(he.app.logger.info("Reload shader (fragment shader has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:196,className:"ceramic.ShaderAsset",methodName:"assetFilesDidChange"}),this.load())):null!=this.options.vertId&&(t=this.options.vertId,i=-1,Object.prototype.hasOwnProperty.call(n.h,t)&&(i=n.h[t]),l=-1,(l=Object.prototype.hasOwnProperty.call(e.h,t)?e.h[t]:l)!=i)&&(he.app.logger.info("Reload shader (vertex shader has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:212,className:"ceramic.ShaderAsset",methodName:"assetFilesDidChange"}),this.load()))},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),null!=this.get_shader()&&(this.get_shader().destroy(),this.set_shader(null)))},toString:function(){var e,n,t="ShaderAsset";return null!=this.options.vertId||null!=this.options.fragId?(e=null!=this.options.vertId?this.options.vertId:"default",n=null!=this.options.fragId?this.options.fragId:"default",t+"("+this.name+" "+e+" "+n+")"):null!=this.path&&""!=B.trim(this.path)?t+"("+this.name+" "+this.path+")":t+"("+this.name+")"},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offShaderChange()},__class__:Yt,__properties__:$extend(i0.prototype.__properties__,{set_shader:"set_shader",get_shader:"get_shader"})}),function(e,n){this.size=e,this.name=n}),qt=((L["ceramic.ShaderAttribute"]=Vt).__name__="ceramic.ShaderAttribute",Vt.prototype={size:null,name:null,toString:function(){return""+V.string({size:this.size,name:this.name})},__class__:Vt},(L["ceramic.Shortcuts"]=T1).__name__="ceramic.Shortcuts",T1.__properties__={get_systems:"get_systems",get_log:"get_log",get_settings:"get_settings",get_input:"get_input",get_audio:"get_audio",get_screen:"get_screen",get_app:"get_app"},T1.get_app=function(){return he.app},T1.get_screen=function(){return he.app.screen},T1.get_audio=function(){return he.app.audio},T1.get_input=function(){return he.app.input},T1.get_settings=function(){return he.app.settings},T1.get_log=function(){return he.app.logger},T1.get_systems=function(){return he.app.systems},T1.unobserve=function(){M.unobserve()},T1.reobserve=function(){M.reobserve()},T1.cease=function(){M.cease()},function(){}),jt=((L["ceramic.SortVisuals"]=qt).__name__="ceramic.SortVisuals",qt.cmp=function(e,n){var t,i,l,s,r=0;return e.computedVisible||e.computedTouchable?n.computedVisible||n.computedTouchable?e.computedRenderTarget!=n.computedRenderTarget?r=null!=e.computedRenderTarget&&(null==n.computedRenderTarget||e.computedRenderTarget.priority>n.computedRenderTarget.priority||!(e.computedRenderTarget.priority<n.computedRenderTarget.priority)&&e.computedRenderTarget.index<n.computedRenderTarget.index)?-1:1:e.computedDepth>n.computedDepth?r=1:e.computedDepth<n.computedDepth?r=-1:(s=e.asQuad,t=n.asQuad,l=e.asMesh,i=n.asMesh,null==s&&null==l||null==t&&null==i||(l=null!=l?l.texture:s._texture,s=null!=i?i.texture:t._texture,null!=l&&null==s?r=1:null==l&&null!=s?r=-1:null!=l&&null!=s?l.index<s.index?r=1:l.index>s.index?r=-1:e.blending>n.blending?r=1:e.blending<n.blending&&(r=-1):e.blending>n.blending?r=1:e.blending<n.blending&&(r=-1))):r=1:r=-1,r},qt.sort=function(e){qt.rec(e,0,e.length)},qt.rec=function(e,n,t){var i=n+t>>1;if(t-n<12){if(!(t<=n))for(var l=n+1,s=t;l<s;)for(var r=l++;n<r;){var a,h,u=e[r],c=e[r-1],o=0;if(u.computedVisible||u.computedTouchable?c.computedVisible||c.computedTouchable?u.computedRenderTarget!=c.computedRenderTarget?o=null!=u.computedRenderTarget&&(null==c.computedRenderTarget||u.computedRenderTarget.priority>c.computedRenderTarget.priority||!(u.computedRenderTarget.priority<c.computedRenderTarget.priority)&&u.computedRenderTarget.index<c.computedRenderTarget.index)?-1:1:u.computedDepth>c.computedDepth?o=1:u.computedDepth<c.computedDepth?o=-1:(h=u.asQuad,d=c.asQuad,a=u.asMesh,_=c.asMesh,null==h&&null==a||null==d&&null==_||(a=null!=a?a.texture:h._texture,h=null!=_?_.texture:d._texture,null!=a&&null==h?o=1:null==a&&null!=h?o=-1:null!=a&&null!=h?a.index<h.index?o=1:a.index>h.index?o=-1:u.blending>c.blending?o=1:u.blending<c.blending&&(o=-1):u.blending>c.blending?o=1:u.blending<c.blending&&(o=-1))):o=1:o=-1,!(o<0))break;var _=r-1,d=e[_];e[_]=e[r],e[r]=d,--r}}else qt.rec(e,n,i),qt.rec(e,i,t),qt.doMerge(e,n,i,t,i-n,t-i)},qt.doMerge=function(e,n,t,i,l,s){var r;if(0!=l&&0!=s)if(l+s==2)c=e[t],o=e[n],_=0,c.computedVisible||c.computedTouchable?o.computedVisible||o.computedTouchable?c.computedRenderTarget!=o.computedRenderTarget?_=null!=c.computedRenderTarget&&(null==o.computedRenderTarget||c.computedRenderTarget.priority>o.computedRenderTarget.priority||!(c.computedRenderTarget.priority<o.computedRenderTarget.priority)&&c.computedRenderTarget.index<o.computedRenderTarget.index)?-1:1:c.computedDepth>o.computedDepth?_=1:c.computedDepth<o.computedDepth?_=-1:(p=c.asQuad,m=o.asQuad,w=c.asMesh,v=o.asMesh,y=null!=m||null!=v,(null!=p||null!=w)&&y&&(C=null!=w?w.texture:p._texture,U=null!=v?v.texture:m._texture,null!=C&&null==U?_=1:null==C&&null!=U?_=-1:null!=C&&null!=U?C.index<U.index?_=1:C.index>U.index?_=-1:c.blending>o.blending?_=1:c.blending<o.blending&&(_=-1):c.blending>o.blending?_=1:c.blending<o.blending&&(_=-1))):_=1:_=-1,_<0&&(k=e[t],e[t]=e[n],e[n]=k);else{if(s<l){for(var a,h=n+(a=l>>1),u=i-(b=t);0<u;){var c=e[O=b+(g=u>>1)],o=e[h],_=0;c.computedVisible||c.computedTouchable?o.computedVisible||o.computedTouchable?c.computedRenderTarget!=o.computedRenderTarget?_=null!=c.computedRenderTarget&&(null==o.computedRenderTarget||c.computedRenderTarget.priority>o.computedRenderTarget.priority||!(c.computedRenderTarget.priority<o.computedRenderTarget.priority)&&c.computedRenderTarget.index<o.computedRenderTarget.index)?-1:1:c.computedDepth>o.computedDepth?_=1:c.computedDepth<o.computedDepth?_=-1:(p=c.asQuad,m=o.asQuad,w=c.asMesh,v=o.asMesh,y=null!=m||null!=v,(null!=p||null!=w)&&y&&(C=null!=w?w.texture:p._texture,U=null!=v?v.texture:m._texture,null!=C&&null==U?_=1:null==C&&null!=U?_=-1:null!=C&&null!=U?C.index<U.index?_=1:C.index>U.index?_=-1:c.blending>o.blending?_=1:c.blending<o.blending&&(_=-1):c.blending>o.blending?_=1:c.blending<o.blending&&(_=-1))):_=1:_=-1,u=_<0?(b=O+1,u-g-1):g}d=(f=b)-t}else{for(var d,b,g,O,f=t+(d=s>>1),u=t-(b=n);0<u;){var p,m,w,v,y,C,U,c=e[f],o=e[O=b+(g=u>>1)],_=0;c.computedVisible||c.computedTouchable?o.computedVisible||o.computedTouchable?c.computedRenderTarget!=o.computedRenderTarget?_=null!=c.computedRenderTarget&&(null==o.computedRenderTarget||c.computedRenderTarget.priority>o.computedRenderTarget.priority||!(c.computedRenderTarget.priority<o.computedRenderTarget.priority)&&c.computedRenderTarget.index<o.computedRenderTarget.index)?-1:1:c.computedDepth>o.computedDepth?_=1:c.computedDepth<o.computedDepth?_=-1:(p=c.asQuad,m=o.asQuad,w=c.asMesh,v=o.asMesh,y=null!=m||null!=v,(null!=p||null!=w)&&y&&(C=null!=w?w.texture:p._texture,U=null!=v?v.texture:m._texture,null!=C&&null==U?_=1:null==C&&null!=U?_=-1:null!=C&&null!=U?C.index<U.index?_=1:C.index>U.index?_=-1:c.blending>o.blending?_=1:c.blending<o.blending&&(_=-1):c.blending>o.blending?_=1:c.blending<o.blending&&(_=-1))):_=1:_=-1,u=_<0?g:(b=O+1,u-g-1)}a=(h=b)-n}if(h!=t&&t!=f){for(var x=f-h,T=t-h;0!=T;)var D=x%T,x=T,T=D;for(r=x;0!=r--;){for(var A=e[h+r],S=t-h,E=h+r,M=h+r+S;M!=h+r;)e[E]=e[M],S<f-(E=M)?M+=S:M=h+(S-(f-M));e[E]=A}}var k=h+d;qt.doMerge(e,n,h,k,a,d),qt.doMerge(e,k,f,i,l-a,s-d)}},qt.rotate=function(e,n,t,i){if(n!=t&&t!=i){for(var l=i-n,s=t-n;0!=s;){var r=l%s,l=s;s=r}for(s=l;0!=s--;){for(var a=e[n+s],h=t-n,u=n+s,c=n+s+h;c!=n+s;)e[u]=e[c],h<i-(u=c)?c+=h:c=n+(h-(i-c));e[u]=a}}},qt.gcd=function(e,n){for(;0!=n;){var t=e%n;e=n,n=t}return e},qt.upper=function(e,n,t,i){for(var l=t-n;0<l;){var s,r,a,h,u,c,o=e[i],_=e[r=n+(s=l>>1)],d=0;o.computedVisible||o.computedTouchable?_.computedVisible||_.computedTouchable?o.computedRenderTarget!=_.computedRenderTarget?d=null!=o.computedRenderTarget&&(null==_.computedRenderTarget||o.computedRenderTarget.priority>_.computedRenderTarget.priority||!(o.computedRenderTarget.priority<_.computedRenderTarget.priority)&&o.computedRenderTarget.index<_.computedRenderTarget.index)?-1:1:o.computedDepth>_.computedDepth?d=1:o.computedDepth<_.computedDepth?d=-1:(c=o.asQuad,a=_.asQuad,u=o.asMesh,h=_.asMesh,null==c&&null==u||null==a&&null==h||(u=null!=u?u.texture:c._texture,c=null!=h?h.texture:a._texture,null!=u&&null==c?d=1:null==u&&null!=c?d=-1:null!=u&&null!=c?u.index<c.index?d=1:u.index>c.index?d=-1:o.blending>_.blending?d=1:o.blending<_.blending&&(d=-1):o.blending>_.blending?d=1:o.blending<_.blending&&(d=-1))):d=1:d=-1,l=d<0?s:(n=r+1,l-s-1)}return n},qt.lower=function(e,n,t,i){for(var l=t-n;0<l;){var s,r,a,h,u,c,o=e[r=n+(s=l>>1)],_=e[i],d=0;o.computedVisible||o.computedTouchable?_.computedVisible||_.computedTouchable?o.computedRenderTarget!=_.computedRenderTarget?d=null!=o.computedRenderTarget&&(null==_.computedRenderTarget||o.computedRenderTarget.priority>_.computedRenderTarget.priority||!(o.computedRenderTarget.priority<_.computedRenderTarget.priority)&&o.computedRenderTarget.index<_.computedRenderTarget.index)?-1:1:o.computedDepth>_.computedDepth?d=1:o.computedDepth<_.computedDepth?d=-1:(c=o.asQuad,a=_.asQuad,u=o.asMesh,h=_.asMesh,null==c&&null==u||null==a&&null==h||(u=null!=u?u.texture:c._texture,c=null!=h?h.texture:a._texture,null!=u&&null==c?d=1:null==u&&null!=c?d=-1:null!=u&&null!=c?u.index<c.index?d=1:u.index>c.index?d=-1:o.blending>_.blending?d=1:o.blending<_.blending&&(d=-1):o.blending>_.blending?d=1:o.blending<_.blending&&(d=-1))):d=1:d=-1,l=d<0?(n=r+1,l-s-1):s}return n},qt.swap=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},qt.compare=function(e,n,t){var i,l,s,r,n=e[n],e=e[t],t=0;return n.computedVisible||n.computedTouchable?e.computedVisible||e.computedTouchable?n.computedRenderTarget!=e.computedRenderTarget?t=null!=n.computedRenderTarget&&(null==e.computedRenderTarget||n.computedRenderTarget.priority>e.computedRenderTarget.priority||!(n.computedRenderTarget.priority<e.computedRenderTarget.priority)&&n.computedRenderTarget.index<e.computedRenderTarget.index)?-1:1:n.computedDepth>e.computedDepth?t=1:n.computedDepth<e.computedDepth?t=-1:(r=n.asQuad,i=e.asQuad,s=n.asMesh,l=e.asMesh,null==r&&null==s||null==i&&null==l||(s=null!=s?s.texture:r._texture,r=null!=l?l.texture:i._texture,null!=s&&null==r?t=1:null==s&&null!=r?t=-1:null!=s&&null!=r?s.index<r.index?t=1:s.index>r.index?t=-1:n.blending>e.blending?t=1:n.blending<e.blending&&(t=-1):n.blending>e.blending?t=1:n.blending<e.blending&&(t=-1))):t=1:t=-1,t},function(){}),Qt=((L["ceramic.SortVisualsByDepth"]=jt).__name__="ceramic.SortVisualsByDepth",jt.cmp=function(e,n){var t=0;return e.depth>n.depth?t=1:e.depth<n.depth&&(t=-1),t},jt.sort=function(e){jt.rec(e,0,e.length)},jt.rec=function(e,n,t){var i=n+t>>1;if(t-n<12){if(!(t<=n))for(var l=n+1,s=t;l<s;)for(var r=l++;n<r;){var a=e[r],h=e[r-1],u=0;if(a.depth>h.depth?u=1:a.depth<h.depth&&(u=-1),!(u<0))break;a=r-1,h=e[a];e[a]=e[r],e[r]=h,--r}}else jt.rec(e,n,i),jt.rec(e,i,t),jt.doMerge(e,n,i,t,i-n,t-i)},jt.doMerge=function(e,n,t,i,l,s){var r;if(0!=l&&0!=s)if(l+s==2)c=e[t],o=e[n],_=0,c.depth>o.depth?_=1:c.depth<o.depth&&(_=-1),_<0&&(x=e[t],e[t]=e[n],e[n]=x);else{if(s<l){for(var a,h=n+(a=l>>1),u=i-(b=t);0<u;){var c=e[O=b+(g=u>>1)],o=e[h],_=0;c.depth>o.depth?_=1:c.depth<o.depth&&(_=-1),u=_<0?(b=O+1,u-g-1):g}d=(f=b)-t}else{for(var d,b,g,O,f=t+(d=s>>1),u=t-(b=n);0<u;){c=e[f],o=e[O=b+(g=u>>1)],_=0;c.depth>o.depth?_=1:c.depth<o.depth&&(_=-1),u=_<0?g:(b=O+1,u-g-1)}a=(h=b)-n}if(h!=t&&t!=f){for(var p=f-h,m=t-h;0!=m;)var w=p%m,p=m,m=w;for(r=p;0!=r--;){for(var v=e[h+r],y=t-h,C=h+r,U=h+r+y;U!=h+r;)e[C]=e[U],y<f-(C=U)?U+=y:U=h+(y-(f-U));e[C]=v}}var x=h+d;jt.doMerge(e,n,h,x,a,d),jt.doMerge(e,x,f,i,l-a,s-d)}},jt.rotate=function(e,n,t,i){if(n!=t&&t!=i){for(var l=i-n,s=t-n;0!=s;){var r=l%s,l=s;s=r}for(s=l;0!=s--;){for(var a=e[n+s],h=t-n,u=n+s,c=n+s+h;c!=n+s;)e[u]=e[c],h<i-(u=c)?c+=h:c=n+(h-(i-c));e[u]=a}}},jt.gcd=function(e,n){for(;0!=n;){var t=e%n;e=n,n=t}return e},jt.upper=function(e,n,t,i){for(var l=t-n;0<l;){var s,r,a=e[i],h=e[r=n+(s=l>>1)],u=0;a.depth>h.depth?u=1:a.depth<h.depth&&(u=-1),l=u<0?s:(n=r+1,l-s-1)}return n},jt.lower=function(e,n,t,i){for(var l=t-n;0<l;){var s,r,a=e[r=n+(s=l>>1)],h=e[i],u=0;a.depth>h.depth?u=1:a.depth<h.depth&&(u=-1),l=u<0?(n=r+1,l-s-1):s}return n},jt.swap=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},jt.compare=function(e,n,t){n=e[n],e=e[t],t=0;return n.depth>e.depth?t=1:n.depth<e.depth&&(t=-1),t},(L["ceramic.Sound"]=W1).__name__="ceramic.Sound",W1.fromSamplesBuffer=function(e,n,t,i,l){e=he.app.backend.audio.createFromSamplesBuffer(e,n,t,i,l);return new W1(e)},W1.__super__=l,W1.prototype=$extend(l.prototype,{backendItem:null,asset:null,bus:null,group:null,set_group:function(e){var n;return this.group==e||(this.group=e,(n=he.app.audio).mixers.exists(e))||n.mixers.set(e,new tn(e)),e},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy();for(var e=he.app.backend.audio,n=this.backendItem,t=null,i=e.loadedAudioResources.h,s=i,r=Object.keys(i),a=r.length,h=0;h<a;){var u=r[h++];s[u]==n&&(t=u)}null==t?he.app.logger.error("Failed to destroy audio resource: "+V.string(n)+" because id could not be resolved",{fileName:"../../../../ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:198,className:"backend.Audio",methodName:"destroy"}):1<e.loadedAudioRetainCount.h[t]?--e.loadedAudioRetainCount.h[t]:(i=e.loadedAudioResources,Object.prototype.hasOwnProperty.call(i.h,t)&&delete i.h[t],i=e.loadedAudioRetainCount,Object.prototype.hasOwnProperty.call(i.h,t)&&delete i.h[t],n.destroy()),this.backendItem=null}},volume:null,pan:null,pitch:null,get_duration:function(){he.app.backend.audio;return this.backendItem.getDuration()},play:function(e,n,t,i,l,s){null==n&&(n=!1);var r=he.app.audio.mixers,a=r._keys.intMap.h[0|this.group],a=null!=a?a:0,r=2<=a?r.values[a-2]:Kn.RET_NULL;return r.mute?-1:(null==t&&(t=this.volume),null==i&&(i=this.pan),null==l&&(l=this.pitch),null==s&&(s=this.bus),t*=2*r.volume,i+=r.pan,l+=r.pitch-1,he.app.backend.audio.play(this.backendItem,t,i,l,e=null==e?0:e,n,s))},__class__:W1,__properties__:$extend(l.prototype.__properties__,{get_duration:"get_duration",set_group:"set_group"})}),function(e,n,t){this.unobservedSound=null,this.soundAutoruns=null,this.stream=!1,i0.call(this,"sound",e,n,t)}),$t=((L["ceramic.SoundAsset"]=Qt).__name__="ceramic.SoundAsset",Qt.__super__=i0,Qt.prototype=$extend(i0.prototype,{__cbOnReplaceSound:null,__cbOnceReplaceSound:null,__cbOnOwnerUnbindReplaceSound:null,__cbOnceOwnerUnbindReplaceSound:null,emitReplaceSound:function(e,n){var t=0;if(null!=this.__cbOnReplaceSound&&(t+=this.__cbOnReplaceSound.length),null!=this.__cbOnceReplaceSound&&(t+=this.__cbOnceReplaceSound.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnReplaceSound)for(var r=0,a=this.__cbOnReplaceSound.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnReplaceSound[h],++s):--t}if(null!=this.__cbOnceReplaceSound){for(var u=null,c=null,r=0,a=this.__cbOnceReplaceSound.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceReplaceSound[h],this.__cbOnceReplaceSound[h]=null,o=this.__cbOnceOwnerUnbindReplaceSound[h],(this.__cbOnceOwnerUnbindReplaceSound[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindReplaceSound[h]),c.push(this.__cbOnceReplaceSound[h]))}this.__cbOnceOwnerUnbindReplaceSound=u,this.__cbOnceReplaceSound=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onReplaceSound:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceSound because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceSound(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReplaceSound&&(this.__cbOnOwnerUnbindReplaceSound=[]),this.__cbOnOwnerUnbindReplaceSound.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReplaceSound&&(this.__cbOnOwnerUnbindReplaceSound=[]),this.__cbOnOwnerUnbindReplaceSound.push(null);null==this.__cbOnReplaceSound&&(this.__cbOnReplaceSound=[]),this.__cbOnReplaceSound.push(t)},onceReplaceSound:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event replaceSound because owner is destroyed!");var l=function(e){null!=t&&(i.offReplaceSound(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReplaceSound&&(this.__cbOnceOwnerUnbindReplaceSound=[]),this.__cbOnceOwnerUnbindReplaceSound.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReplaceSound&&(this.__cbOnceOwnerUnbindReplaceSound=[]),this.__cbOnceOwnerUnbindReplaceSound.push(null);null==this.__cbOnceReplaceSound&&(this.__cbOnceReplaceSound=[]),this.__cbOnceReplaceSound.push(t)},offReplaceSound:function(e){if(null!=e){var n;null!=this.__cbOnReplaceSound&&-1!=(n=this.__cbOnReplaceSound.indexOf(e))&&(this.__cbOnReplaceSound.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReplaceSound[n])&&s(),this.__cbOnOwnerUnbindReplaceSound.splice(n,1)),null!=this.__cbOnceReplaceSound&&-1!=(n=this.__cbOnceReplaceSound.indexOf(e))&&(this.__cbOnceReplaceSound.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReplaceSound[n])&&s(),this.__cbOnceOwnerUnbindReplaceSound.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceSound){for(var t=0,i=this.__cbOnOwnerUnbindReplaceSound.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReplaceSound[l])&&s()}this.__cbOnOwnerUnbindReplaceSound=null}if(null!=this.__cbOnceOwnerUnbindReplaceSound){for(t=0,i=this.__cbOnceOwnerUnbindReplaceSound.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReplaceSound[l])&&s()}this.__cbOnceOwnerUnbindReplaceSound=null}this.__cbOnReplaceSound=null,this.__cbOnceReplaceSound=null}},listensReplaceSound:function(){return null!=this.__cbOnReplaceSound&&0<this.__cbOnReplaceSound.length||null!=this.__cbOnceReplaceSound&&0<this.__cbOnceReplaceSound.length},stream:null,soundAutoruns:null,get_sound:function(){var e,n,t=this.unobservedSound;return null!=M.current&&(e=M.current,null!=(n=this.soundAutoruns)||(n=M.getAutorunArray(),null!=(this.soundAutoruns=n)))&&e.bindToAutorunArray(n),t},set_sound:function(e){var n=this.unobservedSound;return n!=(this.unobservedSound=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitSoundChange(e,n),null!=(n=this.soundAutoruns))&&(this.soundAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateSound:function(){var e=this.unobservedSound,e=(this.emitSoundChange(e,e),this.soundAutoruns);null!=e&&(this.soundAutoruns=null,M.invalidateAutorunArray(e))},unobservedSound:null,__cbOnSoundChange:null,__cbOnceSoundChange:null,__cbOnOwnerUnbindSoundChange:null,__cbOnceOwnerUnbindSoundChange:null,emitSoundChange:function(e,n){var t=0;if(null!=this.__cbOnSoundChange&&(t+=this.__cbOnSoundChange.length),null!=this.__cbOnceSoundChange&&(t+=this.__cbOnceSoundChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnSoundChange)for(var r=0,a=this.__cbOnSoundChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnSoundChange[h],++s):--t}if(null!=this.__cbOnceSoundChange){for(var u=null,c=null,r=0,a=this.__cbOnceSoundChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceSoundChange[h],this.__cbOnceSoundChange[h]=null,o=this.__cbOnceOwnerUnbindSoundChange[h],(this.__cbOnceOwnerUnbindSoundChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindSoundChange[h]),c.push(this.__cbOnceSoundChange[h]))}this.__cbOnceOwnerUnbindSoundChange=u,this.__cbOnceSoundChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onSoundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event soundChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSoundChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindSoundChange&&(this.__cbOnOwnerUnbindSoundChange=[]),this.__cbOnOwnerUnbindSoundChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindSoundChange&&(this.__cbOnOwnerUnbindSoundChange=[]),this.__cbOnOwnerUnbindSoundChange.push(null);null==this.__cbOnSoundChange&&(this.__cbOnSoundChange=[]),this.__cbOnSoundChange.push(t)},onceSoundChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event soundChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSoundChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindSoundChange&&(this.__cbOnceOwnerUnbindSoundChange=[]),this.__cbOnceOwnerUnbindSoundChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindSoundChange&&(this.__cbOnceOwnerUnbindSoundChange=[]),this.__cbOnceOwnerUnbindSoundChange.push(null);null==this.__cbOnceSoundChange&&(this.__cbOnceSoundChange=[]),this.__cbOnceSoundChange.push(t)},offSoundChange:function(e){if(null!=e){var n;null!=this.__cbOnSoundChange&&-1!=(n=this.__cbOnSoundChange.indexOf(e))&&(this.__cbOnSoundChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindSoundChange[n])&&s(),this.__cbOnOwnerUnbindSoundChange.splice(n,1)),null!=this.__cbOnceSoundChange&&-1!=(n=this.__cbOnceSoundChange.indexOf(e))&&(this.__cbOnceSoundChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindSoundChange[n])&&s(),this.__cbOnceOwnerUnbindSoundChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSoundChange){for(var t=0,i=this.__cbOnOwnerUnbindSoundChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindSoundChange[l])&&s()}this.__cbOnOwnerUnbindSoundChange=null}if(null!=this.__cbOnceOwnerUnbindSoundChange){for(t=0,i=this.__cbOnceOwnerUnbindSoundChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindSoundChange[l])&&s()}this.__cbOnceOwnerUnbindSoundChange=null}this.__cbOnSoundChange=null,this.__cbOnceSoundChange=null}},listensSoundChange:function(){return null!=this.__cbOnSoundChange&&0<this.__cbOnSoundChange.length||null!=this.__cbOnceSoundChange&&0<this.__cbOnceSoundChange.length},load:function(){var l=this;if(this.set_status(Je.LOADING),null==this.path)he.app.logger.warning("Cannot load sound asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:27,className:"ceramic.SoundAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1);else{var s={};if(null!=this.owner&&(s.immediate=this.owner.immediate,s.loadMethod=this.owner.loadMethod),null!=this.options)for(var e=0,n=N.fields(this.options);e<n.length;){var t=n[e];++e,s[t]=N.field(this.options,t)}var r=[].concat(this.allPaths),a=function(e){var n;null!=e?(n=l.get_sound(),((e=new W1(e)).asset=l).set_sound(e),null!=n&&(l.emitReplaceSound(l.get_sound(),n),n.asset=null,n.destroy()),l.set_status(Je.READY),l.emitComplete(!0)):(l.set_status(Je.BROKEN),he.app.logger.error("Failed to load audio at path: "+l.path,{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:71,className:"ceramic.SoundAsset",methodName:"load"}),l.emitComplete(!1))},h=null,h=function(n){var e=n,t=Re.realAssetPath(e,l.runtimeAssets),i=Re.getReloadCount(t),i=(0<i&&(t+="?hot="+i,e+="?hot="+i),he.app.logger.info("Load sound "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:87,className:"ceramic.SoundAsset",methodName:"load"}),At.extension(t));null!=i&&(i=i.toLowerCase()),he.app.backend.audio.load(t,s,function(e){null!=e||0==r.length?a(e):(e=r.shift(),he.app.logger.warning("Failed to load "+n+". Try "+e+"...",{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:100,className:"ceramic.SoundAsset",methodName:"load"}),h(e))})};0<r.length?h(r.shift()):(this.set_status(Je.BROKEN),he.app.logger.error("Failed to load audio at path: "+this.path,{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:112,className:"ceramic.SoundAsset",methodName:"load"}),this.emitComplete(!1))}},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload sound (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:133,className:"ceramic.SoundAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),null!=this.get_sound()&&(this.get_sound().destroy(),this.set_sound(null)))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offReplaceSound(),this.offSoundChange()},__class__:Qt,__properties__:$extend(i0.prototype.__properties__,{set_sound:"set_sound",get_sound:"get_sound"})}),function(){this._udpatingSystems=[],this.lateUpdateOrdered=[],this.earlyUpdateOrdered=[],this.lateUpdateOrderDirty=!1,this.earlyUpdateOrderDirty=!1,l.call(this)}),Zt=((L["ceramic.Systems"]=$t).__name__="ceramic.Systems",$t.sortSystemsByEarlyUpdateOrder=function(e,n){return e.earlyUpdateOrder>n.earlyUpdateOrder?1:e.earlyUpdateOrder<n.earlyUpdateOrder?-1:0},$t.sortSystemsByLateUpdateOrder=function(e,n){return e.lateUpdateOrder>n.lateUpdateOrder?1:e.lateUpdateOrder<n.lateUpdateOrder?-1:0},$t.__super__=l,$t.prototype=$extend(l.prototype,{earlyUpdateOrderDirty:null,lateUpdateOrderDirty:null,earlyUpdateOrdered:null,lateUpdateOrdered:null,_udpatingSystems:null,addSystem:function(e){this.earlyUpdateOrdered.push(e),this.earlyUpdateOrderDirty=!0,this.lateUpdateOrdered.push(e),this.lateUpdateOrderDirty=!0},removeSystem:function(e){h.remove(this.earlyUpdateOrdered,e),this.earlyUpdateOrderDirty=!0,h.remove(this.lateUpdateOrdered,e),this.lateUpdateOrderDirty=!0},earlyUpdate:function(e){this.earlyUpdateOrderDirty&&(Gl.sort(this.earlyUpdateOrdered,$t.sortSystemsByEarlyUpdateOrder),this.earlyUpdateOrderDirty=!1);for(var n=this.earlyUpdateOrdered.length,t=0,i=n;t<i;){var l=t++;this._udpatingSystems[l]=this.earlyUpdateOrdered[l]}for(t=0,i=n;t<i;){var l=t++,s=this._udpatingSystems[l];s.emitBeginEarlyUpdate(e),s.earlyUpdate(e),s.emitEndEarlyUpdate(e),he.app.flushImmediate()}for(t=0,i=n;t<i;){l=t++;this._udpatingSystems[l]=null}},lateUpdate:function(e){this.lateUpdateOrderDirty&&(Gl.sort(this.lateUpdateOrdered,$t.sortSystemsByLateUpdateOrder),this.lateUpdateOrderDirty=!1);for(var n=this.lateUpdateOrdered.length,t=0,i=n;t<i;){var l=t++;this._udpatingSystems[l]=this.lateUpdateOrdered[l]}for(t=0,i=n;t<i;){var l=t++,s=this._udpatingSystems[l];s.emitBeginLateUpdate(e),s.lateUpdate(e),s.emitEndLateUpdate(e),he.app.flushImmediate()}for(t=0,i=n;t<i;){l=t++;this._udpatingSystems[l]=null}},get:function(e){for(var n=0,t=this.earlyUpdateOrdered.length;n<t;){var i=n++,i=this.earlyUpdateOrdered[i];if(i.name==e)return i}return null},__class__:$t}),function(){this.glyphCode=null,this.maxLineDiff=-1,this.fitWidth=-1,this.align=Jt.LEFT,this.preRenderedSize=-1,this.clipTextHeight=-1,this.clipTextWidth=-1,this.clipTextY=-1,this.clipTextX=-1,this.letterSpacing=0,this.lineHeight=1,this.pointSize=20,this.content="",this.color=16777215,this.numLines=1,this.glyphQuads=[],q.call(this),this.set_font(he.app.defaultFont)}),Jt=((L["ceramic.Text"]=Zt).__name__="ceramic.Text",Zt.__super__=q,Zt.prototype=$extend(q.prototype,{__cbOnGlyphQuadsChange:null,__cbOnceGlyphQuadsChange:null,__cbOnOwnerUnbindGlyphQuadsChange:null,__cbOnceOwnerUnbindGlyphQuadsChange:null,emitGlyphQuadsChange:function(){var e=0;if(null!=this.__cbOnGlyphQuadsChange&&(e+=this.__cbOnGlyphQuadsChange.length),null!=this.__cbOnceGlyphQuadsChange&&(e+=this.__cbOnceGlyphQuadsChange.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnGlyphQuadsChange)for(var l=0,s=this.__cbOnGlyphQuadsChange.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnGlyphQuadsChange[r],++i):--e}if(null!=this.__cbOnceGlyphQuadsChange){for(var a=null,h=null,l=0,s=this.__cbOnceGlyphQuadsChange.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceGlyphQuadsChange[r],this.__cbOnceGlyphQuadsChange[r]=null,u=this.__cbOnceOwnerUnbindGlyphQuadsChange[r],(this.__cbOnceOwnerUnbindGlyphQuadsChange[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindGlyphQuadsChange[r]),h.push(this.__cbOnceGlyphQuadsChange[r]))}this.__cbOnceOwnerUnbindGlyphQuadsChange=a,this.__cbOnceGlyphQuadsChange=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onGlyphQuadsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event glyphQuadsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGlyphQuadsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGlyphQuadsChange&&(this.__cbOnOwnerUnbindGlyphQuadsChange=[]),this.__cbOnOwnerUnbindGlyphQuadsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGlyphQuadsChange&&(this.__cbOnOwnerUnbindGlyphQuadsChange=[]),this.__cbOnOwnerUnbindGlyphQuadsChange.push(null);null==this.__cbOnGlyphQuadsChange&&(this.__cbOnGlyphQuadsChange=[]),this.__cbOnGlyphQuadsChange.push(t)},onceGlyphQuadsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event glyphQuadsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGlyphQuadsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGlyphQuadsChange&&(this.__cbOnceOwnerUnbindGlyphQuadsChange=[]),this.__cbOnceOwnerUnbindGlyphQuadsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGlyphQuadsChange&&(this.__cbOnceOwnerUnbindGlyphQuadsChange=[]),this.__cbOnceOwnerUnbindGlyphQuadsChange.push(null);null==this.__cbOnceGlyphQuadsChange&&(this.__cbOnceGlyphQuadsChange=[]),this.__cbOnceGlyphQuadsChange.push(t)},offGlyphQuadsChange:function(e){if(null!=e){var n;null!=this.__cbOnGlyphQuadsChange&&-1!=(n=this.__cbOnGlyphQuadsChange.indexOf(e))&&(this.__cbOnGlyphQuadsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGlyphQuadsChange[n])&&s(),this.__cbOnOwnerUnbindGlyphQuadsChange.splice(n,1)),null!=this.__cbOnceGlyphQuadsChange&&-1!=(n=this.__cbOnceGlyphQuadsChange.indexOf(e))&&(this.__cbOnceGlyphQuadsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGlyphQuadsChange[n])&&s(),this.__cbOnceOwnerUnbindGlyphQuadsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGlyphQuadsChange){for(var t=0,i=this.__cbOnOwnerUnbindGlyphQuadsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGlyphQuadsChange[l])&&s()}this.__cbOnOwnerUnbindGlyphQuadsChange=null}if(null!=this.__cbOnceOwnerUnbindGlyphQuadsChange){for(t=0,i=this.__cbOnceOwnerUnbindGlyphQuadsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGlyphQuadsChange[l])&&s()}this.__cbOnceOwnerUnbindGlyphQuadsChange=null}this.__cbOnGlyphQuadsChange=null,this.__cbOnceGlyphQuadsChange=null}},listensGlyphQuadsChange:function(){return null!=this.__cbOnGlyphQuadsChange&&0<this.__cbOnGlyphQuadsChange.length||null!=this.__cbOnceGlyphQuadsChange&&0<this.__cbOnceGlyphQuadsChange.length},glyphQuads:null,numLines:null,get_numLines:function(){return this.contentDirty&&this.computeContent(),this.numLines},color:null,set_color:function(e){if(this.color!=e&&(this.color=e,null!=this.glyphQuads))for(var n=0,t=this.glyphQuads.length;n<t;){var i=n++;this.glyphQuads[i].color=e}return e},content:null,set_content:function(e){return this.content!=e&&(this.contentDirty=!0,he.app.visualsContentDirty=!0,this.content=e),e},pointSize:null,set_pointSize:function(e){return this.pointSize!=e&&(this.contentDirty=!0,he.app.visualsContentDirty=!0,this.pointSize=e),e},lineHeight:null,set_lineHeight:function(e){return this.lineHeight!=e&&(this.contentDirty=!0,he.app.visualsContentDirty=!0,this.lineHeight=e),e},letterSpacing:null,set_letterSpacing:function(e){return this.letterSpacing!=e&&(this.contentDirty=!0,he.app.visualsContentDirty=!0,this.letterSpacing=e),e},font:null,set_font:function(e){return null==e&&(e=he.app.defaultFont),this.font!=e&&(null!=this.font&&(this.font.offDestroy($bind(this,this.fontDestroyed)),null!=this.font.asset)&&this.font.asset.release(),this.contentDirty=!0,he.app.visualsContentDirty=!0,this.font=e,null!=this.font&&(this.font.onDestroy(this,$bind(this,this.fontDestroyed)),null!=this.font.asset))&&this.font.asset.retain(),e},clipTextX:null,set_clipTextX:function(e){return this.clipTextX!=e&&(this.clipTextX=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},clipTextY:null,set_clipTextY:function(e){return this.clipTextY!=e&&(this.clipTextY=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},clipTextWidth:null,set_clipTextWidth:function(e){return this.clipTextWidth!=e&&(this.clipTextWidth=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},clipTextHeight:null,set_clipTextHeight:function(e){return this.clipTextHeight!=e&&(this.clipTextHeight=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},clipText:function(e,n,t,i){this.set_clipTextX(e),this.set_clipTextY(n),this.set_clipTextWidth(t),this.set_clipTextHeight(i)},preRenderedSize:null,set_preRenderedSize:function(e){return this.preRenderedSize!=e&&(this.contentDirty=!0,he.app.visualsContentDirty=!0,this.preRenderedSize<=0&&0<e&&he.app.screen.onTexturesDensityChange(this,$bind(this,this.handleTexturesDensityChange)),0<this.preRenderedSize&&e<=0&&he.app.screen.offTexturesDensityChange($bind(this,this.handleTexturesDensityChange)),this.preRenderedSize=e),e},handleTexturesDensityChange:function(e,n){this.contentDirty=!0,he.app.visualsContentDirty=!0},align:null,set_align:function(e){return this.align!=e&&(this.contentDirty=!0,he.app.visualsContentDirty=!0,this.align=e),e},fitWidth:null,set_fitWidth:function(e){return this.fitWidth!=e&&(this.fitWidth=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},maxLineDiff:null,set_maxLineDiff:function(e){return this.maxLineDiff!=e&&(this.maxLineDiff=e,-1!=this.fitWidth)&&(this.contentDirty=!0,he.app.visualsContentDirty=!0),e},glyphCode:null,set_depth:function(e){if(this.depth==e)return e;if(null!=this.glyphQuads)for(var n=0,t=this.glyphQuads.length;n<t;){var i=n++;this.glyphQuads[i].set_depth(e)}return q.prototype.set_depth.call(this,e)},get_width:function(){return this.contentDirty&&this.computeContent(),q.prototype.get_width.call(this)},scaleWidth:function(e){if(this._width!=e&&(this.set_scaleX(e/this._width),this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}},get_height:function(){return this.contentDirty&&this.computeContent(),q.prototype.get_height.call(this)},scaleHeight:function(e){if(this._height!=e&&(this.set_scaleY(e/this._height),this.matrixDirty=!0,null!=this.children))for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}},set_blending:function(e){if(this.blending!=e&&(this.blending=e,null!=this.glyphQuads))for(var n=0,t=this.glyphQuads.length;n<t;){var i=n++;this.glyphQuads[i].set_blending(e)}return e},destroy:function(){if(!(this._lifecycleState<=-2)&&(this._lifecycleState=-2,this._lifecycleState=-1,q.prototype.destroy.call(this),null!=this.glyphQuads)){for(var e=0,n=this.glyphQuads.length;e<n;){var t=e++;this.glyphQuads[t].destroy()}this.glyphQuads=null}},computeContent:function(){var e=this;if(null==this.font)this.set_width(0),this.set_height(0),this.contentDirty=!1;else{if(this.numLines=this.computeGlyphQuads(this.fitWidth,this.maxLineDiff),this.contentDirty=!1,this.matrixDirty=!0,null!=this.children)for(var n=0,t=this.children.length;n<t;){var i=n++,l=this.children[i];if(l.matrixDirty=!0,null!=l.children)for(var s=0,r=l.children.length;s<r;){var a=s++;l.children[a].set_matrixDirty(!0)}}var h,u=this.preRenderedSize*he.app.screen.get_texturesDensity()|0;0<u&&null!=(h=this.font).fontData.distanceField&&"msdf"==h.fontData.distanceField.fieldType&&this.font.needsToPreRenderAtSize(u)&&this.font.preRenderAtSize(u,function(){e.contentDirty=!0,he.app.visualsContentDirty=!0}),this.emitGlyphQuadsChange()}},computeGlyphQuads:function(e,B,L){null==L&&(L=-1);var n,t,i,l=0,N=0,W=0,s=this.pointSize/this.font.fontData.pointSize,r=null,a=-1,u=null,c=-1,o=0,_=null,d=[],b=[[]],g=0,G=!1,H=!1,z=!1,O=0,K=0,f=!1,p=0,X=!1,Y=(-1!=this.clipTextX&&-1!=this.clipTextY&&-1!=this.clipTextWidth&&-1!=this.clipTextHeight&&(X=!0),this.preRenderedSize*he.app.screen.get_texturesDensity()|0),V=0<Y&&null!=(U=this.font).fontData.distanceField&&"msdf"==U.fontData.distanceField.fieldType&&!this.font.needsToPreRenderAtSize(Y),m=this.content;if((""==m||0<m.length&&"\n"==m.charAt(m.length-1))&&(f=!0,m+=" "),null!=this.glyphCode){for(var q="",w=0,v=m.length;w<v;){var j=w++,Q=h.cca(m,j),Q=this.glyphCode(Q,j);q+=String.fromCodePoint(Q)}m=q}for(var y,C,U,$=m.length;o<$&&g<2*$;){if(u=r,c=a,r=m.charAt(o),a=h.cca(r,0),(H=" "==r)&&++O,(G="\n"==r)||H||o==$-1)if(!z&&0<=e&&1<W&&e-1<W&&0<O)for(z=!0,--O;0<o;){if(--o,r=m.charAt(o),a=h.cca(r,0),c=0<o?(u=m.charAt(o-1),h.cca(u,0)):(u=null,-1),_=this.font.fontData.chars.get(a),null!=u&&(l-=(null!=(y=this.font.fontData.kernings.get(c))&&y.intMap.h.hasOwnProperty(0|a)&&null!=(y=y.intMap.h[0|a])?y:0)*s),null!=_&&(l-=_.xAdvance*s+this.letterSpacing),!(0<b[b.length-1].length))break;if(--g,b[b.length-1].pop()," "==r){r="\n",_=this.font.fontData.chars.get(10),a=h.cca(r,0),--O,H=!(G=!0);break}}else z=!1;if(G)O=0,c=-1,K=++o,N+=this.lineHeight*this.font.fontData.lineHeight*s,d.push(l+((u=null)!=_?(_.xOffset+_.width-_.xAdvance)*s-this.letterSpacing:0)),b.push([]),W=l=0;else{if(null!=(_=this.font.fontData.chars.get(a))){if(null!=u&&(l+=(null!=(C=this.font.fontData.kernings.get(c))&&C.intMap.h.hasOwnProperty(0|a)&&null!=(C=C.intMap.h[0|a])?C:0)*s),C=l+_.xOffset*s,n=N+_.yOffset*s,t=_.width*s,i=_.height*s,p=0,X&&(C>=this.clipTextX+this.clipTextWidth||C+t<this.clipTextX||n>=this.clipTextY+this.clipTextHeight||n+i<this.clipTextY?p=2:(this.clipTextX>C&&this.clipTextX<=C+t||this.clipTextY>n&&this.clipTextY<=n+i||this.clipTextX+this.clipTextWidth>C&&this.clipTextX+this.clipTextWidth<=C+t||this.clipTextY+this.clipTextHeight>n&&this.clipTextY+this.clipTextHeight<=n+i)&&(p=1)),null==(F=g<this.glyphQuads.length?this.glyphQuads[g]:null)){if(1!=(F=new mb).inheritAlpha&&(F.inheritAlpha=!0,F.visibilityDirty=!0,null!=F.children))for(w=0,v=F.children.length;w<v;){var j=w++,Z=F.children[j];if(Z.visibilityDirty=!0,null!=Z.children)for(var x=0,T=Z.children.length;x<T;){var J=x++;Z.children[J].set_visibilityDirty(!0)}}this.glyphQuads.push(F),this.add(F)}++g,F.char=r,F.code=a,F.index=o,F.set_visible(2!=p),F.flags&=-17,F.posInLine=o-K,F.line=b.length-1;var ee,ne,D,A,S,E,M,k,I=V?this.font.preRenderedPages.h[Y].h[_.page]:this.font.pages.get(_.page);F._texture!=I&&F._set_texture(I),F.set_roundTranslation(null!=F._texture&&F._texture.filter==ui.NEAREST?1:0),F.set_shader(V||null==this.font.pageShaders?null:this.font.pageShaders.h[_.page]),F.color=this.color,F.set_depth(this.depth),F.set_blending(this.blending),F.glyphX=l,F.glyphY=N,F.glyphAdvance=_.xAdvance*s+this.letterSpacing,F.glyph=_,1==p?(I=Math.max(this.clipTextX,C),E=Math.max(this.clipTextY,n),M=Math.min(this.clipTextX+this.clipTextWidth,C+t)-I,k=Math.min(this.clipTextY+this.clipTextHeight,n+i)-E,A=V?(A=this.font.pages.get(_.page),ee=_.x*F._texture.width/A.width,ne=_.y*F._texture.height/A.height,D=_.width*F._texture.width/A.width,_.height*F._texture.height/A.height):(ee=_.x/F._texture.density,ne=_.y/F._texture.density,D=_.width/F._texture.density,_.height/F._texture.density),ee+=S=(I-C)*D/t,D-=S+(C+t-I-M)*D/t,ne+=S=(E-n)*A/i,A-=S+(n+i-E-k)*A/i,F.frameX=ee,F.frameY=ne,F.frameWidth!=D&&-1!=(F.frameWidth=D)&&F.set_width(D),F.frameHeight!=A&&-1!=(F.frameHeight=A)&&F.set_height(A),F.set_x(I),F.set_y(E),F.set_width(M),F.set_height(k)):(V?(S=this.font.pages.get(_.page),I=_.width*F._texture.width/S.width,E=_.height*F._texture.height/S.height,F.frameX=_.x*F._texture.width/S.width,F.frameY=_.y*F._texture.height/S.height,F.frameWidth!=I&&-1!=(F.frameWidth=I)&&F.set_width(I),F.frameHeight!=E&&-1!=(F.frameHeight=E)&&F.set_height(E)):(M=_.width/F._texture.density,k=_.height/F._texture.density,F.frameX=_.x/F._texture.density,F.frameY=_.y/F._texture.density,F.frameWidth!=M&&-1!=(F.frameWidth=M)&&F.set_width(M),F.frameHeight!=k&&-1!=(F.frameHeight=k)&&F.set_height(k)),F.set_x(C),F.set_y(n),F.set_width(t),F.set_height(i)),F.set_anchorX(0),F.set_anchorY(0),b[b.length-1].push(F),W=l+Math.max((_.xOffset+_.width)*s,_.xAdvance*s),l+=_.xAdvance*s+this.letterSpacing}++o}}for(0<l&&d.push(l),f&&0<g&&(U=this.glyphQuads[g-1],f=d[d.length-1],f-=U.glyphAdvance,d[d.length-1]=f,U.glyphAdvance=0,U.set_visible(!1));g<this.glyphQuads.length;)(F=this.glyphQuads.pop()).destroy();for(var R=0,w=0,v=d.length;w<v;)o=w++,R=Math.max(d[o],R);switch(this.set_width(Math.round(1e3*R)/1e3),this.set_height(Math.round(1e3*((d.length-1)*this.lineHeight*this.font.fontData.lineHeight*s+this.font.fontData.lineHeight*s))/1e3),this.align._hx_index){case 1:for(w=0,v=d.length;w<v;)for(var te=R-d[o=w++],x=0,T=(ie=b[o]).length;x<T;)(F=ie[re=x++]).set_x(F.x+te);break;case 2:for(w=0,v=d.length;w<v;)for(var ie,F,te=.5*(R-d[o=w++]),x=0,T=(ie=b[o]).length;x<T;)(F=ie[re=x++]).set_x(F.x+te)}if((-1==L||L==d.length)&&0<e&&-1!=B&&e>this.pointSize){for(var le=0,se=this.fitWidth*B,w=0,v=d.length;w<v;)for(o=w++,x=0,T=d.length;x<T;){var re=x++,P=d[o]-d[re];if(se<(le=le<(P=P<0?-P:P)?P:le))break}se<le&&(f=this.computeGlyphQuads(e-this.pointSize,B,d.length),d.length<f)&&this.computeGlyphQuads(e,-1,d.length)}return d.length},lineForYPosition:function(e){this.contentDirty&&this.computeContent();var n,t=this.lineHeight*this.font.fontData.lineHeight*this.pointSize/this.font.fontData.pointSize,i=0;return t<=0?0:(i=0<(n=this.glyphQuads).length?n[n.length-1].line:i)<(n=(n=Math.floor(e/t))<0?0:n)?i:n},posInLineForX:function(e,n){this.contentDirty&&this.computeContent();var t=this.glyphQuads,i=0;if(0!=t.length&&0!=n)for(var l=0,s=t.length;l<s;){var r=t[l++];if(r.line==e){if(r.glyphX>=n)return i;if(r.glyphX+r.glyphAdvance>=n){var a=r.glyphX+r.glyphAdvance-n;if(n-r.glyphX<=a)return i}++i}else if(r.line>e)break}return i},indexForPosInLine:function(e,n){this.contentDirty&&this.computeContent();var t=this.glyphQuads;if(0==t.length)return 0;for(var i=0,l=t.length;i<l;){var s=t[i++];if(s.line==e&&s.posInLine>=n)return s.index+n-s.posInLine;if(s.line>e)return s.index-s.posInLine-(s.line-e)}return this.content.length},xPositionAtIndex:function(e){this.contentDirty&&this.computeContent();var n=this.glyphQuads;if(0==n.length)return 0;for(var t=0,i=n.length;t<i;){var l=t++,s=n[l];if(s.index>=e)return 0==s.glyphX&&s.index>e?1<=l?(l=n[l-1]).glyphX+l.glyphAdvance:0:s.glyphX}var r=n[n.length-1];return r.glyphX+r.glyphAdvance},lineForIndex:function(e){this.contentDirty&&this.computeContent();var n=this.glyphQuads;if(0==n.length)return 0;for(var t=0,i=n.length;t<i;){var l=n[t++];if(l.index>=e){if(l.posInLine>e-l.index){for(var s=l.index-l.posInLine,r=l.line;e<s;)--s,--r;return r}return l.line}}return n[n.length-1].line},posInLineForIndex:function(e){this.contentDirty&&this.computeContent();var n=this.glyphQuads;if(0!=n.length)for(var t=!1,i=-1,l=0,s=n.length;l<s;){var r=l++,a=n[r];if(a.index>=e){var h=a.posInLine+e-a.index;if(h<0)for(var u=r-1;0<=u;){var c=n[u];if(t||(t=!0,i=this.lineForIndex(e)),c.line==i)return h=c.posInLine+e-c.index;if(c.line<i)return 0;--u}return 0<=h?h:0}}return 0},fontDestroyed:function(e){this.set_font(he.app.defaultFont)},toString:function(){return null!=this.id?"Text("+this.id+" "+this.content+")":"Text("+this.content+")"},unbindEvents:function(){q.prototype.unbindEvents.call(this),this.offGlyphQuadsChange()},__class__:Zt,__properties__:$extend(q.prototype.__properties__,{set_maxLineDiff:"set_maxLineDiff",set_fitWidth:"set_fitWidth",set_align:"set_align",set_preRenderedSize:"set_preRenderedSize",set_clipTextHeight:"set_clipTextHeight",set_clipTextWidth:"set_clipTextWidth",set_clipTextY:"set_clipTextY",set_clipTextX:"set_clipTextX",set_font:"set_font",set_letterSpacing:"set_letterSpacing",set_lineHeight:"set_lineHeight",set_pointSize:"set_pointSize",set_content:"set_content",set_color:"set_color",get_numLines:"get_numLines"})}),I["ceramic.TextAlign"]={__ename__:"ceramic.TextAlign",__constructs__:null,LEFT:{_hx_name:"LEFT",_hx_index:0,__enum__:"ceramic.TextAlign",toString:d},RIGHT:{_hx_name:"RIGHT",_hx_index:1,__enum__:"ceramic.TextAlign",toString:d},CENTER:{_hx_name:"CENTER",_hx_index:2,__enum__:"ceramic.TextAlign",toString:d}}),ei=(Jt.__constructs__=[Jt.LEFT,Jt.RIGHT,Jt.CENTER],function(e,n,t){this.unobservedText=null,this.textAutoruns=null,i0.call(this,"text",e,n,t)}),ni=((L["ceramic.TextAsset"]=ei).__name__="ceramic.TextAsset",ei.__super__=i0,ei.prototype=$extend(i0.prototype,{textAutoruns:null,get_text:function(){var e,n,t=this.unobservedText;return null!=M.current&&(e=M.current,null!=(n=this.textAutoruns)||(n=M.getAutorunArray(),null!=(this.textAutoruns=n)))&&e.bindToAutorunArray(n),t},set_text:function(e){var n=this.unobservedText;return n!=(this.unobservedText=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextChange(e,n),null!=(n=this.textAutoruns))&&(this.textAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateText:function(){var e=this.unobservedText,e=(this.emitTextChange(e,e),this.textAutoruns);null!=e&&(this.textAutoruns=null,M.invalidateAutorunArray(e))},unobservedText:null,__cbOnTextChange:null,__cbOnceTextChange:null,__cbOnOwnerUnbindTextChange:null,__cbOnceOwnerUnbindTextChange:null,emitTextChange:function(e,n){var t=0;if(null!=this.__cbOnTextChange&&(t+=this.__cbOnTextChange.length),null!=this.__cbOnceTextChange&&(t+=this.__cbOnceTextChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTextChange)for(var r=0,a=this.__cbOnTextChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTextChange[h],++s):--t}if(null!=this.__cbOnceTextChange){for(var u=null,c=null,r=0,a=this.__cbOnceTextChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTextChange[h],this.__cbOnceTextChange[h]=null,o=this.__cbOnceOwnerUnbindTextChange[h],(this.__cbOnceOwnerUnbindTextChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTextChange[h]),c.push(this.__cbOnceTextChange[h]))}this.__cbOnceOwnerUnbindTextChange=u,this.__cbOnceTextChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(null);null==this.__cbOnTextChange&&(this.__cbOnTextChange=[]),this.__cbOnTextChange.push(t)},onceTextChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(null);null==this.__cbOnceTextChange&&(this.__cbOnceTextChange=[]),this.__cbOnceTextChange.push(t)},offTextChange:function(e){if(null!=e){var n;null!=this.__cbOnTextChange&&-1!=(n=this.__cbOnTextChange.indexOf(e))&&(this.__cbOnTextChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTextChange[n])&&s(),this.__cbOnOwnerUnbindTextChange.splice(n,1)),null!=this.__cbOnceTextChange&&-1!=(n=this.__cbOnceTextChange.indexOf(e))&&(this.__cbOnceTextChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTextChange[n])&&s(),this.__cbOnceOwnerUnbindTextChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextChange){for(var t=0,i=this.__cbOnOwnerUnbindTextChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTextChange[l])&&s()}this.__cbOnOwnerUnbindTextChange=null}if(null!=this.__cbOnceOwnerUnbindTextChange){for(t=0,i=this.__cbOnceOwnerUnbindTextChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTextChange[l])&&s()}this.__cbOnceOwnerUnbindTextChange=null}this.__cbOnTextChange=null,this.__cbOnceTextChange=null}},listensTextChange:function(){return null!=this.__cbOnTextChange&&0<this.__cbOnTextChange.length||null!=this.__cbOnceTextChange&&0<this.__cbOnceTextChange.length},load:function(){var n=this;if(this.set_status(Je.LOADING),null==this.path)he.app.logger.warning("Cannot load text asset if path is undefined.",{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:20,className:"ceramic.TextAsset",methodName:"load"}),this.set_status(Je.BROKEN),this.emitComplete(!1);else{var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.options)for(var t=0,i=N.fields(this.options);t<i.length;){var l=i[t];++t,e[l]=N.field(this.options,l)}var s=this.path,r=Re.realAssetPath(s,this.runtimeAssets),a=Re.getReloadCount(r);0<a&&(r+="?hot="+a,s+="?hot="+a),he.app.logger.info("Load text "+s,{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:46,className:"ceramic.TextAsset",methodName:"load"}),he.app.backend.texts.load(r,e,function(e){null!=e?(n.set_text(e),n.set_status(Je.READY),n.emitComplete(!0)):(n.set_status(Je.BROKEN),he.app.logger.error("Failed to load text at path: "+n.path,{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:56,className:"ceramic.TextAsset",methodName:"load"}),n.emitComplete(!1))})}},assetFilesDidChange:function(e,n){var t=-1,n=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);(n=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:n)!=t&&(he.app.logger.info("Reload text (file has changed)",{fileName:"../../../../ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:79,className:"ceramic.TextAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),this.set_text(null))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offTextChange()},__class__:ei,__properties__:$extend(i0.prototype.__properties__,{set_text:"set_text",get_text:"get_text"})}),function(){this.delegate=null,this.selectionEnd=-1,this.selectionStart=-1,this.text="",this.multiline=!1,this.allowMovingCursor=!1,this.invertedSelection=!1,this.rmetaPressed=!1,this.lmetaPressed=!1,this.rctrlPressed=!1,this.lctrlPressed=!1,this.rshiftPressed=!1,this.lshiftPressed=!1,this.explicitPosLine=0,this.explicitPosInLine=0,this.inputActive=!1}),ti=((L["ceramic.TextInput"]=ni).__name__="ceramic.TextInput",ni.__interfaces__=[k],ni.prototype={__cbOnUpdate:null,__cbOnceUpdate:null,__cbOnOwnerUnbindUpdate:null,__cbOnceOwnerUnbindUpdate:null,emitUpdate:function(e){var n=0;if(null!=this.__cbOnUpdate&&(n+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(n+=this.__cbOnceUpdate.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnUpdate)for(var s=0,r=this.__cbOnUpdate.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnUpdate[a],++l):--n}if(null!=this.__cbOnceUpdate){for(var h=null,u=null,s=0,r=this.__cbOnceUpdate.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null,c=this.__cbOnceOwnerUnbindUpdate[a],(this.__cbOnceOwnerUnbindUpdate[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindUpdate[a]),u.push(this.__cbOnceUpdate[a]))}this.__cbOnceOwnerUnbindUpdate=h,this.__cbOnceUpdate=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindUpdate[n])&&s(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindUpdate[n])&&s(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindUpdate[l])&&s()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindUpdate[l])&&s()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},__cbOnEnter:null,__cbOnceEnter:null,__cbOnOwnerUnbindEnter:null,__cbOnceOwnerUnbindEnter:null,emitEnter:function(){var e=0;if(null!=this.__cbOnEnter&&(e+=this.__cbOnEnter.length),null!=this.__cbOnceEnter&&(e+=this.__cbOnceEnter.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnEnter)for(var l=0,s=this.__cbOnEnter.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnEnter[r],++i):--e}if(null!=this.__cbOnceEnter){for(var a=null,h=null,l=0,s=this.__cbOnceEnter.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceEnter[r],this.__cbOnceEnter[r]=null,u=this.__cbOnceOwnerUnbindEnter[r],(this.__cbOnceOwnerUnbindEnter[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindEnter[r]),h.push(this.__cbOnceEnter[r]))}this.__cbOnceOwnerUnbindEnter=a,this.__cbOnceEnter=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onEnter:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event enter because owner is destroyed!");var l=function(e){null!=t&&(i.offEnter(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindEnter&&(this.__cbOnOwnerUnbindEnter=[]),this.__cbOnOwnerUnbindEnter.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindEnter&&(this.__cbOnOwnerUnbindEnter=[]),this.__cbOnOwnerUnbindEnter.push(null);null==this.__cbOnEnter&&(this.__cbOnEnter=[]),this.__cbOnEnter.push(t)},onceEnter:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event enter because owner is destroyed!");var l=function(e){null!=t&&(i.offEnter(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindEnter&&(this.__cbOnceOwnerUnbindEnter=[]),this.__cbOnceOwnerUnbindEnter.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindEnter&&(this.__cbOnceOwnerUnbindEnter=[]),this.__cbOnceOwnerUnbindEnter.push(null);null==this.__cbOnceEnter&&(this.__cbOnceEnter=[]),this.__cbOnceEnter.push(t)},offEnter:function(e){if(null!=e){var n;null!=this.__cbOnEnter&&-1!=(n=this.__cbOnEnter.indexOf(e))&&(this.__cbOnEnter.splice(n,1),null!=(s=this.__cbOnOwnerUnbindEnter[n])&&s(),this.__cbOnOwnerUnbindEnter.splice(n,1)),null!=this.__cbOnceEnter&&-1!=(n=this.__cbOnceEnter.indexOf(e))&&(this.__cbOnceEnter.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindEnter[n])&&s(),this.__cbOnceOwnerUnbindEnter.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEnter){for(var t=0,i=this.__cbOnOwnerUnbindEnter.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindEnter[l])&&s()}this.__cbOnOwnerUnbindEnter=null}if(null!=this.__cbOnceOwnerUnbindEnter){for(t=0,i=this.__cbOnceOwnerUnbindEnter.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindEnter[l])&&s()}this.__cbOnceOwnerUnbindEnter=null}this.__cbOnEnter=null,this.__cbOnceEnter=null}},listensEnter:function(){return null!=this.__cbOnEnter&&0<this.__cbOnEnter.length||null!=this.__cbOnceEnter&&0<this.__cbOnceEnter.length},__cbOnEscape:null,__cbOnceEscape:null,__cbOnOwnerUnbindEscape:null,__cbOnceOwnerUnbindEscape:null,emitEscape:function(){var e=0;if(null!=this.__cbOnEscape&&(e+=this.__cbOnEscape.length),null!=this.__cbOnceEscape&&(e+=this.__cbOnceEscape.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnEscape)for(var l=0,s=this.__cbOnEscape.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnEscape[r],++i):--e}if(null!=this.__cbOnceEscape){for(var a=null,h=null,l=0,s=this.__cbOnceEscape.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceEscape[r],this.__cbOnceEscape[r]=null,u=this.__cbOnceOwnerUnbindEscape[r],(this.__cbOnceOwnerUnbindEscape[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindEscape[r]),h.push(this.__cbOnceEscape[r]))}this.__cbOnceOwnerUnbindEscape=a,this.__cbOnceEscape=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onEscape:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event escape because owner is destroyed!");var l=function(e){null!=t&&(i.offEscape(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindEscape&&(this.__cbOnOwnerUnbindEscape=[]),this.__cbOnOwnerUnbindEscape.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindEscape&&(this.__cbOnOwnerUnbindEscape=[]),this.__cbOnOwnerUnbindEscape.push(null);null==this.__cbOnEscape&&(this.__cbOnEscape=[]),this.__cbOnEscape.push(t)},onceEscape:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event escape because owner is destroyed!");var l=function(e){null!=t&&(i.offEscape(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindEscape&&(this.__cbOnceOwnerUnbindEscape=[]),this.__cbOnceOwnerUnbindEscape.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindEscape&&(this.__cbOnceOwnerUnbindEscape=[]),this.__cbOnceOwnerUnbindEscape.push(null);null==this.__cbOnceEscape&&(this.__cbOnceEscape=[]),this.__cbOnceEscape.push(t)},offEscape:function(e){if(null!=e){var n;null!=this.__cbOnEscape&&-1!=(n=this.__cbOnEscape.indexOf(e))&&(this.__cbOnEscape.splice(n,1),null!=(s=this.__cbOnOwnerUnbindEscape[n])&&s(),this.__cbOnOwnerUnbindEscape.splice(n,1)),null!=this.__cbOnceEscape&&-1!=(n=this.__cbOnceEscape.indexOf(e))&&(this.__cbOnceEscape.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindEscape[n])&&s(),this.__cbOnceOwnerUnbindEscape.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEscape){for(var t=0,i=this.__cbOnOwnerUnbindEscape.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindEscape[l])&&s()}this.__cbOnOwnerUnbindEscape=null}if(null!=this.__cbOnceOwnerUnbindEscape){for(t=0,i=this.__cbOnceOwnerUnbindEscape.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindEscape[l])&&s()}this.__cbOnceOwnerUnbindEscape=null}this.__cbOnEscape=null,this.__cbOnceEscape=null}},listensEscape:function(){return null!=this.__cbOnEscape&&0<this.__cbOnEscape.length||null!=this.__cbOnceEscape&&0<this.__cbOnceEscape.length},__cbOnSelection:null,__cbOnceSelection:null,__cbOnOwnerUnbindSelection:null,__cbOnceOwnerUnbindSelection:null,emitSelection:function(e,n){var t=0;if(null!=this.__cbOnSelection&&(t+=this.__cbOnSelection.length),null!=this.__cbOnceSelection&&(t+=this.__cbOnceSelection.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnSelection)for(var r=0,a=this.__cbOnSelection.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnSelection[h],++s):--t}if(null!=this.__cbOnceSelection){for(var u=null,c=null,r=0,a=this.__cbOnceSelection.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceSelection[h],this.__cbOnceSelection[h]=null,o=this.__cbOnceOwnerUnbindSelection[h],(this.__cbOnceOwnerUnbindSelection[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindSelection[h]),c.push(this.__cbOnceSelection[h]))}this.__cbOnceOwnerUnbindSelection=u,this.__cbOnceSelection=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onSelection:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event selection because owner is destroyed!");var l=function(e){null!=t&&(i.offSelection(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindSelection&&(this.__cbOnOwnerUnbindSelection=[]),this.__cbOnOwnerUnbindSelection.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindSelection&&(this.__cbOnOwnerUnbindSelection=[]),this.__cbOnOwnerUnbindSelection.push(null);null==this.__cbOnSelection&&(this.__cbOnSelection=[]),this.__cbOnSelection.push(t)},onceSelection:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event selection because owner is destroyed!");var l=function(e){null!=t&&(i.offSelection(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindSelection&&(this.__cbOnceOwnerUnbindSelection=[]),this.__cbOnceOwnerUnbindSelection.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindSelection&&(this.__cbOnceOwnerUnbindSelection=[]),this.__cbOnceOwnerUnbindSelection.push(null);null==this.__cbOnceSelection&&(this.__cbOnceSelection=[]),this.__cbOnceSelection.push(t)},offSelection:function(e){if(null!=e){var n;null!=this.__cbOnSelection&&-1!=(n=this.__cbOnSelection.indexOf(e))&&(this.__cbOnSelection.splice(n,1),null!=(s=this.__cbOnOwnerUnbindSelection[n])&&s(),this.__cbOnOwnerUnbindSelection.splice(n,1)),null!=this.__cbOnceSelection&&-1!=(n=this.__cbOnceSelection.indexOf(e))&&(this.__cbOnceSelection.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindSelection[n])&&s(),this.__cbOnceOwnerUnbindSelection.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSelection){for(var t=0,i=this.__cbOnOwnerUnbindSelection.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindSelection[l])&&s()}this.__cbOnOwnerUnbindSelection=null}if(null!=this.__cbOnceOwnerUnbindSelection){for(t=0,i=this.__cbOnceOwnerUnbindSelection.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindSelection[l])&&s()}this.__cbOnceOwnerUnbindSelection=null}this.__cbOnSelection=null,this.__cbOnceSelection=null}},listensSelection:function(){return null!=this.__cbOnSelection&&0<this.__cbOnSelection.length||null!=this.__cbOnceSelection&&0<this.__cbOnceSelection.length},__cbOnStop:null,__cbOnceStop:null,__cbOnOwnerUnbindStop:null,__cbOnceOwnerUnbindStop:null,emitStop:function(){var e=0;if(null!=this.__cbOnStop&&(e+=this.__cbOnStop.length),null!=this.__cbOnceStop&&(e+=this.__cbOnceStop.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnStop)for(var l=0,s=this.__cbOnStop.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnStop[r],++i):--e}if(null!=this.__cbOnceStop){for(var a=null,h=null,l=0,s=this.__cbOnceStop.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceStop[r],this.__cbOnceStop[r]=null,u=this.__cbOnceOwnerUnbindStop[r],(this.__cbOnceOwnerUnbindStop[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindStop[r]),h.push(this.__cbOnceStop[r]))}this.__cbOnceOwnerUnbindStop=a,this.__cbOnceStop=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onStop:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event stop because owner is destroyed!");var l=function(e){null!=t&&(i.offStop(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindStop&&(this.__cbOnOwnerUnbindStop=[]),this.__cbOnOwnerUnbindStop.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindStop&&(this.__cbOnOwnerUnbindStop=[]),this.__cbOnOwnerUnbindStop.push(null);null==this.__cbOnStop&&(this.__cbOnStop=[]),this.__cbOnStop.push(t)},onceStop:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event stop because owner is destroyed!");var l=function(e){null!=t&&(i.offStop(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindStop&&(this.__cbOnceOwnerUnbindStop=[]),this.__cbOnceOwnerUnbindStop.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindStop&&(this.__cbOnceOwnerUnbindStop=[]),this.__cbOnceOwnerUnbindStop.push(null);null==this.__cbOnceStop&&(this.__cbOnceStop=[]),this.__cbOnceStop.push(t)},offStop:function(e){if(null!=e){var n;null!=this.__cbOnStop&&-1!=(n=this.__cbOnStop.indexOf(e))&&(this.__cbOnStop.splice(n,1),null!=(s=this.__cbOnOwnerUnbindStop[n])&&s(),this.__cbOnOwnerUnbindStop.splice(n,1)),null!=this.__cbOnceStop&&-1!=(n=this.__cbOnceStop.indexOf(e))&&(this.__cbOnceStop.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindStop[n])&&s(),this.__cbOnceOwnerUnbindStop.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStop){for(var t=0,i=this.__cbOnOwnerUnbindStop.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindStop[l])&&s()}this.__cbOnOwnerUnbindStop=null}if(null!=this.__cbOnceOwnerUnbindStop){for(t=0,i=this.__cbOnceOwnerUnbindStop.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindStop[l])&&s()}this.__cbOnceOwnerUnbindStop=null}this.__cbOnStop=null,this.__cbOnceStop=null}},listensStop:function(){return null!=this.__cbOnStop&&0<this.__cbOnStop.length||null!=this.__cbOnceStop&&0<this.__cbOnceStop.length},inputActive:null,explicitPosInLine:null,explicitPosLine:null,lshiftPressed:null,rshiftPressed:null,lctrlPressed:null,rctrlPressed:null,lmetaPressed:null,rmetaPressed:null,invertedSelection:null,allowMovingCursor:null,multiline:null,text:null,selectionStart:null,selectionEnd:null,delegate:null,start:function(e,n,t,i,l,s,r,a,h,u){null==h&&(h=!1),null==a&&(a=-1),null==r&&(r=-1),null==s&&(s=!1),this.inputActive&&this.stop(),this.inputActive=!0,this.set_text(e),this.multiline=s,this.allowMovingCursor=h,this.delegate=u,this.explicitPosInLine=0,this.explicitPosLine=0,this.invertedSelection=!1,a<(r=r<0?e.length:r)&&(a=r),this.selectionStart=r,this.selectionEnd=a;var s=he.app.screen.matrix,h=(n*s.a+t*s.c+s.tx)/C.app.screenDensity,u=(n*s.b+t*s.d+s.ty)/C.app.screenDensity,c=((n+i)*s.a+(t+l)*s.c+s.tx)/C.app.screenDensity-h,n=((n+i)*s.b+(t+l)*s.d+s.ty)/C.app.screenDensity-u;he.app.backend.textInput.start(e,h,u,c,n),this.emitUpdate(e),this.emitSelection(r,a)},stop:function(){this.inputActive&&(this.inputActive=!1,this.selectionStart=-1,this.selectionEnd=-1,this.invertedSelection=!1,this.delegate=null,he.app.backend.textInput.stop(),this.emitStop())},updateSelection:function(e,n,t){this.selectionStart==e&&this.selectionEnd==n||(this.selectionStart=e,this.selectionEnd=n,null!=t&&(this.invertedSelection=t),this.emitSelection(e,n))},appendText:function(e){var n;this.lctrlPressed||this.rctrlPressed||(n="",0<this.selectionStart&&(n+=this.text.substring(0,this.selectionStart)),n=(n+=e)+this.text.substring(this.selectionEnd),this.selectionStart+=e.length,this.selectionEnd=this.selectionStart,this.invertedSelection=!1,this.set_text(n),this.emitUpdate(this.text),this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart))},space:function(){this.appendText(" ")},backspace:function(){var e=this.selectionEnd>this.selectionStart,n="";1<this.selectionStart&&(n+=this.text.substring(0,e?this.selectionStart:this.selectionStart-1)),n+=this.text.substring(this.selectionEnd),0<this.selectionStart&&!e&&this.selectionStart--,this.selectionEnd=this.selectionStart,this.set_text(n),this.emitUpdate(this.text),this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)},moveLeft:function(){this.allowMovingCursor&&(this.lshiftPressed||this.rshiftPressed?this.invertedSelection?(0<this.selectionStart&&(this.selectionStart--,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):this.selectionEnd>this.selectionStart?(this.selectionEnd--,this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd)):(0<this.selectionStart&&(this.invertedSelection=!0,this.selectionStart--,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):(this.invertedSelection=!1,this.selectionEnd>this.selectionStart?(this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)):0<this.selectionStart&&(this.selectionStart--,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)))},moveRight:function(){var e;this.allowMovingCursor&&(this.lshiftPressed||this.rshiftPressed?(e=this.text.length,this.selectionStart==this.selectionEnd?(this.invertedSelection=!1,this.selectionEnd<e&&(this.selectionEnd++,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd)):this.invertedSelection?(this.selectionStart++,this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):(this.selectionEnd<e&&(this.selectionEnd++,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd))):(this.invertedSelection=!1,this.selectionEnd>this.selectionStart?(this.selectionStart=this.selectionEnd,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionStart<this.text.length&&(this.selectionStart++,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)))},moveUp:function(){var e,n,t,i;this.allowMovingCursor&&(this.lshiftPressed||this.rshiftPressed?(e=this.lineForPos(this.selectionStart),n=this.lineForPos(this.selectionEnd),!this.invertedSelection&&e<n?(i=this.explicitPosInLine,t=n,null!=this.delegate&&(i=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,t-1)),n=this.globalPosForLine(t-1,i),this.selectionEnd=0|Math.max(this.selectionStart,n),this.emitSelection(this.selectionStart,this.selectionEnd)):0<this.selectionStart&&(this.invertedSelection=!0,0<e?(i=this.explicitPosInLine,t=e,null!=this.delegate&&(i=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,t-1)),this.selectionStart=this.globalPosForLine(t-1,i)):this.selectionStart=0,this.emitSelection(this.selectionStart,this.selectionEnd))):(this.invertedSelection=!1,0<this.selectionStart&&0<(t=this.lineForPos(this.selectionStart))?(i=this.explicitPosInLine,null!=this.delegate&&(i=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,t-1)),this.selectionStart=this.globalPosForLine(t-1,i),this.selectionEnd=this.selectionStart):(this.selectionStart=0,this.selectionEnd=0),this.emitSelection(this.selectionStart,this.selectionEnd)))},moveDown:function(){var e,n,t,i,l,s,r;this.allowMovingCursor&&(e=this.text.length,this.lshiftPressed||this.rshiftPressed?(n=this.lineForPos(this.selectionStart),t=this.lineForPos(this.selectionEnd),this.invertedSelection?this.invertedSelection&&(n<t?(r=this.explicitPosInLine,l=n,null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1)),i=this.globalPosForLine(l+1,r),this.selectionStart=0|Math.min(this.selectionEnd,i),this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionEnd<e-1?(this.invertedSelection=!1,l=n,s=this.numLines(),r=this.explicitPosInLine,l<s-1?(null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1)),this.selectionEnd=this.globalPosForLine(l+1,r)):this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionEnd<e&&(this.invertedSelection=!1,this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd))):this.selectionEnd<e-1?(r=this.explicitPosInLine,(l=t)<(s=this.numLines())-1?(null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1)),this.selectionEnd=this.globalPosForLine(l+1,r)):this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionEnd<e&&(this.selectionEnd=e,this.emitSelection(this.selectionStart,this.selectionEnd))):(this.invertedSelection=!1,this.selectionEnd<e-1&&(l=this.lineForPos(this.selectionEnd))<(s=this.numLines())-1?(r=this.explicitPosInLine,null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1)),this.selectionStart=this.globalPosForLine(l+1,r)):this.selectionStart=e,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)))},enter:function(){this.emitEnter(),this.inputActive&&this.multiline&&this.appendText("\n")},kpEnter:function(){this.enter()},escape:function(){this.emitEscape(),this.stop()},lshiftDown:function(){this.lshiftPressed=!0},lshiftUp:function(){this.lshiftPressed=!1},rshiftDown:function(){this.rshiftPressed=!0},rshiftUp:function(){this.rshiftPressed=!1},lctrlDown:function(){this.lctrlPressed=!0},lctrlUp:function(){this.lctrlPressed=!1},rctrlDown:function(){this.rctrlPressed=!0},rctrlUp:function(){this.rctrlPressed=!1},lmetaDown:function(){this.lmetaPressed=!0},lmetaUp:function(){this.lmetaPressed=!1},rmetaDown:function(){this.rmetaPressed=!0},rmetaUp:function(){this.rmetaPressed=!1},posInCurrentLine:function(e){if(null!=this.delegate)return this.delegate.textInputPosInLineForIndex(e);for(var n=this.text,t=0;0<e;){if("\n"==n.charAt(e)&&0<t){--t;break}--e,++t}return t},lineForPos:function(e){if(null!=this.delegate)return this.delegate.textInputLineForIndex(e);for(var n=this.text,t=0,i=0;i<e;)"\n"==n.charAt(i)&&++t,++i;return t},numLines:function(){return null!=this.delegate?this.delegate.textInputNumberOfLines():this.text.split("\n").length},globalPosForLine:function(e,n){if(null!=this.delegate)return this.delegate.textInputIndexForPosInLine(e,n);for(var t=this.text,i=0,l=t.length,s=0;i<l;){var r=t.charAt(i);if(s==e){if(!(0<n))break;if("\n"==r)break;--n}else"\n"==r&&++s;++i}return i},set_text:function(e){var n,t,i;return this.text!=e&&(n=(this.text=e).length,t=this.selectionStart,(i=n<(i=this.selectionEnd)?n:i)<t&&(t=i),this.updateSelection(t,i)),e},unbindEvents:function(){this.offUpdate(),this.offEnter(),this.offEscape(),this.offSelection(),this.offStop()},__class__:ni,__properties__:{set_text:"set_text"}},(L["ceramic.TextInputDelegate"]=cc).__name__="ceramic.TextInputDelegate",cc.__isInterface__=!0,cc.prototype={textInputClosestPositionInLine:null,textInputNumberOfLines:null,textInputIndexForPosInLine:null,textInputLineForIndex:null,textInputPosInLineForIndex:null,__class__:cc},(L["ceramic.TextureAtlas"]=dc).__name__="ceramic.TextureAtlas",dc.__super__=l,dc.prototype=$extend(l.prototype,{pages:null,regions:null,asset:null,region:function(e){for(var n=0,t=this.regions.length;n<t;){var i=n++,i=this.regions[i];if(i.name==e)return i}return null},computeFrames:function(){for(var e=0,n=this.regions.length;e<n;){var t=e++;this.regions[t].computeFrame()}},destroy:function(){if(!(this._lifecycleState<=-2)){for(this._lifecycleState=-2;0<this.pages.length;){var e=this.pages.pop().get_texture();null!=e&&e.destroy()}null!=this.asset&&this.asset.destroy(),this._lifecycleState=-1,l.prototype.destroy.call(this)}},__class__:dc}),(L["ceramic.TextureAtlasPacker"]=ec).__name__="ceramic.TextureAtlasPacker",ec.__super__=l,ec.prototype=$extend(l.prototype,{__cbOnFinishPack:null,__cbOnceFinishPack:null,__cbOnOwnerUnbindFinishPack:null,__cbOnceOwnerUnbindFinishPack:null,emitFinishPack:function(){var e=0;if(null!=this.__cbOnFinishPack&&(e+=this.__cbOnFinishPack.length),null!=this.__cbOnceFinishPack&&(e+=this.__cbOnceFinishPack.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnFinishPack)for(var l=0,s=this.__cbOnFinishPack.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnFinishPack[r],++i):--e}if(null!=this.__cbOnceFinishPack){for(var a=null,h=null,l=0,s=this.__cbOnceFinishPack.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceFinishPack[r],this.__cbOnceFinishPack[r]=null,u=this.__cbOnceOwnerUnbindFinishPack[r],(this.__cbOnceOwnerUnbindFinishPack[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindFinishPack[r]),h.push(this.__cbOnceFinishPack[r]))}this.__cbOnceOwnerUnbindFinishPack=a,this.__cbOnceFinishPack=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onFinishPack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishPack because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishPack(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFinishPack&&(this.__cbOnOwnerUnbindFinishPack=[]),this.__cbOnOwnerUnbindFinishPack.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFinishPack&&(this.__cbOnOwnerUnbindFinishPack=[]),this.__cbOnOwnerUnbindFinishPack.push(null);null==this.__cbOnFinishPack&&(this.__cbOnFinishPack=[]),this.__cbOnFinishPack.push(t)},onceFinishPack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event finishPack because owner is destroyed!");var l=function(e){null!=t&&(i.offFinishPack(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFinishPack&&(this.__cbOnceOwnerUnbindFinishPack=[]),this.__cbOnceOwnerUnbindFinishPack.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFinishPack&&(this.__cbOnceOwnerUnbindFinishPack=[]),this.__cbOnceOwnerUnbindFinishPack.push(null);null==this.__cbOnceFinishPack&&(this.__cbOnceFinishPack=[]),this.__cbOnceFinishPack.push(t)},offFinishPack:function(e){if(null!=e){var n;null!=this.__cbOnFinishPack&&-1!=(n=this.__cbOnFinishPack.indexOf(e))&&(this.__cbOnFinishPack.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFinishPack[n])&&s(),this.__cbOnOwnerUnbindFinishPack.splice(n,1)),null!=this.__cbOnceFinishPack&&-1!=(n=this.__cbOnceFinishPack.indexOf(e))&&(this.__cbOnceFinishPack.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFinishPack[n])&&s(),this.__cbOnceOwnerUnbindFinishPack.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFinishPack){for(var t=0,i=this.__cbOnOwnerUnbindFinishPack.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFinishPack[l])&&s()}this.__cbOnOwnerUnbindFinishPack=null}if(null!=this.__cbOnceOwnerUnbindFinishPack){for(t=0,i=this.__cbOnceOwnerUnbindFinishPack.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFinishPack[l])&&s()}this.__cbOnceOwnerUnbindFinishPack=null}this.__cbOnFinishPack=null,this.__cbOnceFinishPack=null}},listensFinishPack:function(){return null!=this.__cbOnFinishPack&&0<this.__cbOnFinishPack.length||null!=this.__cbOnceFinishPack&&0<this.__cbOnceFinishPack.length},atlas:null,spacing:null,filter:null,pendingRegions:null,pages:null,hasPendingRegions:function(){return null!=this.pendingRegions&&0<this.pendingRegions.length},region:function(e){if(null!=this.pendingRegions)for(var n=0,t=this.pendingRegions.length;n<t;){var i=n++;if((h=this.pendingRegions[i]).name==e)return h}if(null!=this.pages)for(n=0,t=this.pages.length;n<t;)for(var l=n++,s=this.pages[l],r=0,a=s.regions.length;r<a;){var h,i=r++;if((h=s.regions[i]).name==e)return h}return null},removeRegionsWithMatcher:function(e,n){if(null==e&&(e=!0),null!=this.pendingRegions){for(var t=null,i=0,l=this.pendingRegions.length;i<l;){var s=i++;n((r=this.pendingRegions[s]).name)&&(t=null==t?[]:t).push(r)}if(null!=t)for(i=0,l=t.length;i<l;){var r=t[s=i++];h.remove(this.pendingRegions,r)}}if(null!=this.pages){for(var a=null,i=0,l=this.pages.length;i<l;){for(var u=i++,t=null,c=this.pages[u],o=0,_=c.regions.length;o<_;){s=o++;n((r=c.regions[s]).name)&&(t=null==t?[]:t).push(r)}if(null!=t){(a=null==a?[]:a).push(c);for(var d=0,b=t.length;d<b;){var g=t[d++];h.remove(c.regions,g),c.shouldResetTexture=!0}null!=this.pendingRegions&&(this.pendingRegions=[]);for(var O=0,f=c.regions.length;O<f;){var p=O++,p=c.regions[p];p.rect=null,p.rendered=!1,this.pendingRegions.unshift(p)}}}if(null!=a)for(i=0,l=a.length;i<l;){u=i++;h.remove(this.pages,a[u])}}if(e&&null!=this.atlas){for(var m=null,i=0,l=this.atlas.regions.length;i<l;){var s=i++,w=this.atlas.regions[s];n(w.name)&&(m=null==m?[]:m).push(w)}if(null!=m)for(i=0,l=m.length;i<l;){s=i++;h.remove(this.atlas.regions,m[s])}}},removeRegionsWithPrefix:function(e,n){this.removeRegionsWithMatcher(e=null==e?!0:e,function(e){return B.startsWith(e,n)})},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-2,null!=this.atlas){if(null!=this.atlas.pages)for(var e=0,n=this.atlas.pages.length;e<n;){var t=e++,t=this.atlas.pages[t],i=t.get_texture();null!=i&&(t.set_texture(null),i.destroy())}this.atlas.destroy(),this.atlas=null}this.pendingRegions=null,this.pages=null,this._lifecycleState=-1,l.prototype.destroy.call(this)}},_addRegionFromPixels:function(e,n,t,i,l,s,r,a){-1==s&&(s=Math.round(n.length/l)),this.pendingRegions.push(new ti(e,t,i,l,s,r,a,n,null,null,null))},_addVariantRegion:function(e,n,t,i,l,s){var r=this.region(n);if(null==r)throw Q.thrown('Cannot add variant region: source region "'+n+'" not found!');this.pendingRegions.push(new ti(e,t,i,r.packedWidth,r.packedHeight,l,s,null,r,null,null))},pack:function(e){var n=this,t=ec.MIN_TEXTURE_SIZE;0==this.pages.length&&this.pages.push(new ii(this.spacing,"page"+this.pages.length,t,t,[],new Ua(t+this.spacing,t+this.spacing,!1),!0));for(var t=(O=this.pages[this.pages.length-1]).width,i=[];0<this.pendingRegions.length;)if(null==(v=this.pendingRegions.shift()).pixels)i.push(v);else{if(v.packedWidth>ec.MAX_TEXTURE_SIZE||v.packedHeight>ec.MAX_TEXTURE_SIZE)throw Q.thrown("Cannot insert region "+v.name+" with used size: "+v.packedWidth+" x "+v.packedHeight);var l;if(null==(l=O.binPacker.insert(v.packedWidth+O.spacing,v.packedHeight+O.spacing,3)))if(t<ec.MAX_TEXTURE_SIZE){t*=2,O.width=t,O.height=t,O.binPacker=new Ua(t+O.spacing,t+O.spacing,!1);for(var s=0,r=O.regions.length;s<r;){var a=s++;O.regions[a].rect=null,O.regions[a].rendered=!1}this.pendingRegions=[v].concat(O.regions.concat(this.pendingRegions)),O.regions=[],O.shouldResetTexture=!0}else this.pages.push(new ii(this.spacing,"page"+this.pages.length,t=ec.MIN_TEXTURE_SIZE,t,[],new Ua(t+this.spacing,t+this.spacing,!1),!0)),this.pendingRegions.unshift(v);else v.rect=l,O.regions.push(v)}for(s=0,r=i.length;s<r;){for(var h=(v=i[y=s++]).sourceRegion;null!=h&&null!=h.sourceRegion;)h=h.sourceRegion;if(null==h)throw Q.thrown("Invalid variant region: "+v.name+" (source region not found).");for(var u=null,c=0,o=this.pages.length;c<o;){for(var _=c++,d=0,b=(O=this.pages[_]).regions.length;d<b;){var g=d++;if(O.regions[g].name==h.name){u=O;break}}if(null!=u)break}if(null==u)throw Q.thrown("Invalid variant region: "+v.name+" (source region not found in any page).");u.regions.push(v)}null==this.atlas&&(this.atlas=new dc,this.atlas.onDestroy(this,function(e){n.destroy()}));for(s=0,r=this.pages.length;s<r;){var O,_=s++;if(0<(O=this.pages[_]).regions.length){for(var f=null,p=(null==(f=this.atlas.pages.length>_?this.atlas.pages[_]:f)&&(f=new li(O.name,O.width,O.height,this.filter),this.atlas.pages.push(f)),null),m=(O.shouldResetTexture||null==f.get_texture()?(p=Mt.create(O.width,O.height,0),f.set_width(O.width),f.set_height(O.height)):p=f.get_texture().fetchPixels(),[]),w=[],c=0,o=O.regions.length;c<o;){var v,y=c++;if(!(v=O.regions[y]).rendered)if(null!=v.pixels)Mt.copy(v.pixels,v.packedWidth,p,O.width,0,0,v.packedWidth,v.packedHeight,0|v.rect.x,0|v.rect.y),v.rendered=!0,m.push(v);else{if(null==v.sourceRegion)throw Q.thrown("Cannot render region "+v.name+" because it doesn't have pixels");v.rendered=!0,w.push(v)}}if(0<m.length){null!=f.get_texture()?f.get_texture().backendItem.width==O.width&&f.get_texture().backendItem.height==O.height?f.get_texture().submitPixels(p):(f.get_texture().destroy(),f.set_texture(Rt.fromPixels(O.width,O.height,p,1))):f.set_texture(Rt.fromPixels(O.width,O.height,p,1)),f.get_texture().set_filter(this.filter);for(d=0,b=m.length;d<b;){var C=m[d++],U=this.atlas.region(C.name);(U=null==U?new hi(C.name,this.atlas,_):U).texture=f.get_texture(),U.originalWidth=C.originalWidth,U.originalHeight=C.originalHeight,U.packedWidth=C.packedWidth,U.packedHeight=C.packedHeight,U.offsetX=C.offsetX,U.offsetY=C.offsetY,U.x=Math.round(C.rect.x+O.spacing),U.y=Math.round(C.rect.y+O.spacing),U.width=C.packedWidth,U.height=C.packedHeight,U.computeFrame()}}if(0<w.length)for(var x=0,T=w.length;x<T;){for(var D=w[x++],h=D.sourceRegion;null!=h&&null!=h.sourceRegion;)h=h.sourceRegion;var A=this.atlas.region(h.name);if(null==A)throw Q.thrown("Invalid variant region: "+D.name+" (source atlas region not found).");var S=this.atlas.region(D.name);(S=null==S?new hi(D.name,this.atlas,_):S).texture=A.texture,S.originalWidth=D.originalWidth,S.originalHeight=D.originalHeight,S.packedWidth=h.packedWidth,S.packedHeight=h.packedHeight,S.offsetX=D.offsetX,S.offsetY=D.offsetY,S.x=Math.round(h.rect.x+O.spacing),S.y=Math.round(h.rect.y+O.spacing),S.width=D.packedWidth,S.height=D.packedHeight,S.computeFrame()}}}this.emitFinishPack(),e(this.atlas)},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offFinishPack()},__class__:ec}),function(e,n,t,i,l,s,r,a,h,u,c){this.rendered=!1,this.rect=null,this.sourceRegion=null,this.pixels=null,this.offsetY=0,this.offsetX=0,this.originalHeight=0,this.originalWidth=0,this.name=e,null!=n&&(this.originalWidth=n),null!=t&&(this.originalHeight=t),this.packedWidth=i,this.packedHeight=l,null!=s&&(this.offsetX=s),null!=r&&(this.offsetY=r),null!=a&&(this.pixels=a),null!=h&&(this.sourceRegion=h),null!=u&&(this.rect=u),null!=c&&(this.rendered=c)}),ii=((L["ceramic._TextureAtlasPacker.TextureAtlasPackerRegion"]=ti).__name__="ceramic._TextureAtlasPacker.TextureAtlasPackerRegion",ti.prototype={name:null,originalWidth:null,originalHeight:null,packedWidth:null,packedHeight:null,offsetX:null,offsetY:null,pixels:null,sourceRegion:null,rect:null,rendered:null,__class__:ti},function(e,n,t,i,l,s,r){this.spacing=e,this.name=n,this.width=t,this.height=i,this.regions=l,this.binPacker=s,this.shouldResetTexture=r}),li=((L["ceramic._TextureAtlasPacker.TextureAtlasPackerPage"]=ii).__name__="ceramic._TextureAtlasPacker.TextureAtlasPackerPage",ii.prototype={spacing:null,name:null,width:null,height:null,regions:null,binPacker:null,shouldResetTexture:null,__class__:ii},function(e,n,t,i,l){null==i&&(i=ui.LINEAR),null==t&&(t=0),null==n&&(n=0),this.unobservedTexture=null,this.textureAutoruns=null,this.unobservedFilter=ui.LINEAR,this.filterAutoruns=null,this.unobservedHeight=0,this.heightAutoruns=null,this.unobservedWidth=0,this.widthAutoruns=null,this.nameAutoruns=null,this.observedDirty=!1,this.set_name(e),this.set_width(n),this.set_height(t),this.set_filter(i),this.set_texture(l)}),si=((L["ceramic.TextureAtlasPage"]=li).__name__="ceramic.TextureAtlasPage",li.__interfaces__=[u],li.prototype={__cbOnObservedDirty:null,__cbOnceObservedDirty:null,__cbOnOwnerUnbindObservedDirty:null,__cbOnceOwnerUnbindObservedDirty:null,emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnObservedDirty)for(var r=0,a=this.__cbOnObservedDirty.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnObservedDirty[h],++s):--t}if(null!=this.__cbOnceObservedDirty){for(var u=null,c=null,r=0,a=this.__cbOnceObservedDirty.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,o=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindObservedDirty[h]),c.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=u,this.__cbOnceObservedDirty=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindObservedDirty[n])&&s(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindObservedDirty[n])&&s(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindObservedDirty[l])&&s()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindObservedDirty[l])&&s()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},observedDirty:null,nameAutoruns:null,get_name:function(){var e,n,t=this.unobservedName;return null!=M.current&&(e=M.current,null!=(n=this.nameAutoruns)||(n=M.getAutorunArray(),null!=(this.nameAutoruns=n)))&&e.bindToAutorunArray(n),t},set_name:function(e){var n=this.unobservedName;return n!=(this.unobservedName=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitNameChange(e,n),null!=(n=this.nameAutoruns))&&(this.nameAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateName:function(){var e=this.unobservedName,e=(this.emitNameChange(e,e),this.nameAutoruns);null!=e&&(this.nameAutoruns=null,M.invalidateAutorunArray(e))},unobservedName:null,__cbOnNameChange:null,__cbOnceNameChange:null,__cbOnOwnerUnbindNameChange:null,__cbOnceOwnerUnbindNameChange:null,emitNameChange:function(e,n){var t=0;if(null!=this.__cbOnNameChange&&(t+=this.__cbOnNameChange.length),null!=this.__cbOnceNameChange&&(t+=this.__cbOnceNameChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnNameChange)for(var r=0,a=this.__cbOnNameChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnNameChange[h],++s):--t}if(null!=this.__cbOnceNameChange){for(var u=null,c=null,r=0,a=this.__cbOnceNameChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceNameChange[h],this.__cbOnceNameChange[h]=null,o=this.__cbOnceOwnerUnbindNameChange[h],(this.__cbOnceOwnerUnbindNameChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindNameChange[h]),c.push(this.__cbOnceNameChange[h]))}this.__cbOnceOwnerUnbindNameChange=u,this.__cbOnceNameChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(null);null==this.__cbOnNameChange&&(this.__cbOnNameChange=[]),this.__cbOnNameChange.push(t)},onceNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(null);null==this.__cbOnceNameChange&&(this.__cbOnceNameChange=[]),this.__cbOnceNameChange.push(t)},offNameChange:function(e){if(null!=e){var n;null!=this.__cbOnNameChange&&-1!=(n=this.__cbOnNameChange.indexOf(e))&&(this.__cbOnNameChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindNameChange[n])&&s(),this.__cbOnOwnerUnbindNameChange.splice(n,1)),null!=this.__cbOnceNameChange&&-1!=(n=this.__cbOnceNameChange.indexOf(e))&&(this.__cbOnceNameChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindNameChange[n])&&s(),this.__cbOnceOwnerUnbindNameChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindNameChange){for(var t=0,i=this.__cbOnOwnerUnbindNameChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindNameChange[l])&&s()}this.__cbOnOwnerUnbindNameChange=null}if(null!=this.__cbOnceOwnerUnbindNameChange){for(t=0,i=this.__cbOnceOwnerUnbindNameChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindNameChange[l])&&s()}this.__cbOnceOwnerUnbindNameChange=null}this.__cbOnNameChange=null,this.__cbOnceNameChange=null}},listensNameChange:function(){return null!=this.__cbOnNameChange&&0<this.__cbOnNameChange.length||null!=this.__cbOnceNameChange&&0<this.__cbOnceNameChange.length},widthAutoruns:null,get_width:function(){var e,n,t=this.unobservedWidth;return null!=M.current&&(e=M.current,null!=(n=this.widthAutoruns)||(n=M.getAutorunArray(),null!=(this.widthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_width:function(e){var n=this.unobservedWidth;return n!=(this.unobservedWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWidthChange(e,n),null!=(n=this.widthAutoruns))&&(this.widthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateWidth:function(){var e=this.unobservedWidth,e=(this.emitWidthChange(e,e),this.widthAutoruns);null!=e&&(this.widthAutoruns=null,M.invalidateAutorunArray(e))},unobservedWidth:null,__cbOnWidthChange:null,__cbOnceWidthChange:null,__cbOnOwnerUnbindWidthChange:null,__cbOnceOwnerUnbindWidthChange:null,emitWidthChange:function(e,n){var t=0;if(null!=this.__cbOnWidthChange&&(t+=this.__cbOnWidthChange.length),null!=this.__cbOnceWidthChange&&(t+=this.__cbOnceWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnWidthChange)for(var r=0,a=this.__cbOnWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnWidthChange[h],++s):--t}if(null!=this.__cbOnceWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceWidthChange[h],this.__cbOnceWidthChange[h]=null,o=this.__cbOnceOwnerUnbindWidthChange[h],(this.__cbOnceOwnerUnbindWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindWidthChange[h]),c.push(this.__cbOnceWidthChange[h]))}this.__cbOnceOwnerUnbindWidthChange=u,this.__cbOnceWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event widthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(null);null==this.__cbOnWidthChange&&(this.__cbOnWidthChange=[]),this.__cbOnWidthChange.push(t)},onceWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event widthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(null);null==this.__cbOnceWidthChange&&(this.__cbOnceWidthChange=[]),this.__cbOnceWidthChange.push(t)},offWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnWidthChange&&-1!=(n=this.__cbOnWidthChange.indexOf(e))&&(this.__cbOnWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindWidthChange[n])&&s(),this.__cbOnOwnerUnbindWidthChange.splice(n,1)),null!=this.__cbOnceWidthChange&&-1!=(n=this.__cbOnceWidthChange.indexOf(e))&&(this.__cbOnceWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindWidthChange[n])&&s(),this.__cbOnceOwnerUnbindWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindWidthChange[l])&&s()}this.__cbOnOwnerUnbindWidthChange=null}if(null!=this.__cbOnceOwnerUnbindWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindWidthChange[l])&&s()}this.__cbOnceOwnerUnbindWidthChange=null}this.__cbOnWidthChange=null,this.__cbOnceWidthChange=null}},listensWidthChange:function(){return null!=this.__cbOnWidthChange&&0<this.__cbOnWidthChange.length||null!=this.__cbOnceWidthChange&&0<this.__cbOnceWidthChange.length},heightAutoruns:null,get_height:function(){var e,n,t=this.unobservedHeight;return null!=M.current&&(e=M.current,null!=(n=this.heightAutoruns)||(n=M.getAutorunArray(),null!=(this.heightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_height:function(e){var n=this.unobservedHeight;return n!=(this.unobservedHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitHeightChange(e,n),null!=(n=this.heightAutoruns))&&(this.heightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateHeight:function(){var e=this.unobservedHeight,e=(this.emitHeightChange(e,e),this.heightAutoruns);null!=e&&(this.heightAutoruns=null,M.invalidateAutorunArray(e))},unobservedHeight:null,__cbOnHeightChange:null,__cbOnceHeightChange:null,__cbOnOwnerUnbindHeightChange:null,__cbOnceOwnerUnbindHeightChange:null,emitHeightChange:function(e,n){var t=0;if(null!=this.__cbOnHeightChange&&(t+=this.__cbOnHeightChange.length),null!=this.__cbOnceHeightChange&&(t+=this.__cbOnceHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnHeightChange)for(var r=0,a=this.__cbOnHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnHeightChange[h],++s):--t}if(null!=this.__cbOnceHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceHeightChange[h],this.__cbOnceHeightChange[h]=null,o=this.__cbOnceOwnerUnbindHeightChange[h],(this.__cbOnceOwnerUnbindHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindHeightChange[h]),c.push(this.__cbOnceHeightChange[h]))}this.__cbOnceOwnerUnbindHeightChange=u,this.__cbOnceHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event heightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(null);null==this.__cbOnHeightChange&&(this.__cbOnHeightChange=[]),this.__cbOnHeightChange.push(t)},onceHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event heightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(null);null==this.__cbOnceHeightChange&&(this.__cbOnceHeightChange=[]),this.__cbOnceHeightChange.push(t)},offHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnHeightChange&&-1!=(n=this.__cbOnHeightChange.indexOf(e))&&(this.__cbOnHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindHeightChange[n])&&s(),this.__cbOnOwnerUnbindHeightChange.splice(n,1)),null!=this.__cbOnceHeightChange&&-1!=(n=this.__cbOnceHeightChange.indexOf(e))&&(this.__cbOnceHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindHeightChange[n])&&s(),this.__cbOnceOwnerUnbindHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindHeightChange[l])&&s()}this.__cbOnOwnerUnbindHeightChange=null}if(null!=this.__cbOnceOwnerUnbindHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindHeightChange[l])&&s()}this.__cbOnceOwnerUnbindHeightChange=null}this.__cbOnHeightChange=null,this.__cbOnceHeightChange=null}},listensHeightChange:function(){return null!=this.__cbOnHeightChange&&0<this.__cbOnHeightChange.length||null!=this.__cbOnceHeightChange&&0<this.__cbOnceHeightChange.length},filterAutoruns:null,get_filter:function(){var e,n,t=this.unobservedFilter;return null!=M.current&&(e=M.current,null!=(n=this.filterAutoruns)||(n=M.getAutorunArray(),null!=(this.filterAutoruns=n)))&&e.bindToAutorunArray(n),t},set_filter:function(e){var n=this.unobservedFilter;return this.set_unobservedFilter(e),n!=e&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFilterChange(e,n),null!=(n=this.filterAutoruns))&&(this.filterAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateFilter:function(){var e=this.unobservedFilter,e=(this.emitFilterChange(e,e),this.filterAutoruns);null!=e&&(this.filterAutoruns=null,M.invalidateAutorunArray(e))},unobservedFilter:null,__cbOnFilterChange:null,__cbOnceFilterChange:null,__cbOnOwnerUnbindFilterChange:null,__cbOnceOwnerUnbindFilterChange:null,emitFilterChange:function(e,n){var t=0;if(null!=this.__cbOnFilterChange&&(t+=this.__cbOnFilterChange.length),null!=this.__cbOnceFilterChange&&(t+=this.__cbOnceFilterChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnFilterChange)for(var r=0,a=this.__cbOnFilterChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnFilterChange[h],++s):--t}if(null!=this.__cbOnceFilterChange){for(var u=null,c=null,r=0,a=this.__cbOnceFilterChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceFilterChange[h],this.__cbOnceFilterChange[h]=null,o=this.__cbOnceOwnerUnbindFilterChange[h],(this.__cbOnceOwnerUnbindFilterChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindFilterChange[h]),c.push(this.__cbOnceFilterChange[h]))}this.__cbOnceOwnerUnbindFilterChange=u,this.__cbOnceFilterChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onFilterChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event filterChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFilterChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFilterChange&&(this.__cbOnOwnerUnbindFilterChange=[]),this.__cbOnOwnerUnbindFilterChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFilterChange&&(this.__cbOnOwnerUnbindFilterChange=[]),this.__cbOnOwnerUnbindFilterChange.push(null);null==this.__cbOnFilterChange&&(this.__cbOnFilterChange=[]),this.__cbOnFilterChange.push(t)},onceFilterChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event filterChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFilterChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFilterChange&&(this.__cbOnceOwnerUnbindFilterChange=[]),this.__cbOnceOwnerUnbindFilterChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFilterChange&&(this.__cbOnceOwnerUnbindFilterChange=[]),this.__cbOnceOwnerUnbindFilterChange.push(null);null==this.__cbOnceFilterChange&&(this.__cbOnceFilterChange=[]),this.__cbOnceFilterChange.push(t)},offFilterChange:function(e){if(null!=e){var n;null!=this.__cbOnFilterChange&&-1!=(n=this.__cbOnFilterChange.indexOf(e))&&(this.__cbOnFilterChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFilterChange[n])&&s(),this.__cbOnOwnerUnbindFilterChange.splice(n,1)),null!=this.__cbOnceFilterChange&&-1!=(n=this.__cbOnceFilterChange.indexOf(e))&&(this.__cbOnceFilterChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFilterChange[n])&&s(),this.__cbOnceOwnerUnbindFilterChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFilterChange){for(var t=0,i=this.__cbOnOwnerUnbindFilterChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFilterChange[l])&&s()}this.__cbOnOwnerUnbindFilterChange=null}if(null!=this.__cbOnceOwnerUnbindFilterChange){for(t=0,i=this.__cbOnceOwnerUnbindFilterChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFilterChange[l])&&s()}this.__cbOnceOwnerUnbindFilterChange=null}this.__cbOnFilterChange=null,this.__cbOnceFilterChange=null}},listensFilterChange:function(){return null!=this.__cbOnFilterChange&&0<this.__cbOnFilterChange.length||null!=this.__cbOnceFilterChange&&0<this.__cbOnceFilterChange.length},set_unobservedFilter:function(e){return this.unobservedFilter!=e&&(this.unobservedFilter=e,null!=this.get_texture())&&this.get_texture().set_filter(e),e},textureAutoruns:null,get_texture:function(){var e,n,t=this.unobservedTexture;return null!=M.current&&(e=M.current,null!=(n=this.textureAutoruns)||(n=M.getAutorunArray(),null!=(this.textureAutoruns=n)))&&e.bindToAutorunArray(n),t},set_texture:function(e){var n=this.unobservedTexture;return this.set_unobservedTexture(e),n!=e&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextureChange(e,n),null!=(n=this.textureAutoruns))&&(this.textureAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTexture:function(){var e=this.unobservedTexture,e=(this.emitTextureChange(e,e),this.textureAutoruns);null!=e&&(this.textureAutoruns=null,M.invalidateAutorunArray(e))},unobservedTexture:null,__cbOnTextureChange:null,__cbOnceTextureChange:null,__cbOnOwnerUnbindTextureChange:null,__cbOnceOwnerUnbindTextureChange:null,emitTextureChange:function(e,n){var t=0;if(null!=this.__cbOnTextureChange&&(t+=this.__cbOnTextureChange.length),null!=this.__cbOnceTextureChange&&(t+=this.__cbOnceTextureChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTextureChange)for(var r=0,a=this.__cbOnTextureChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTextureChange[h],++s):--t}if(null!=this.__cbOnceTextureChange){for(var u=null,c=null,r=0,a=this.__cbOnceTextureChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTextureChange[h],this.__cbOnceTextureChange[h]=null,o=this.__cbOnceOwnerUnbindTextureChange[h],(this.__cbOnceOwnerUnbindTextureChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTextureChange[h]),c.push(this.__cbOnceTextureChange[h]))}this.__cbOnceOwnerUnbindTextureChange=u,this.__cbOnceTextureChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textureChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextureChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(null);null==this.__cbOnTextureChange&&(this.__cbOnTextureChange=[]),this.__cbOnTextureChange.push(t)},onceTextureChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event textureChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTextureChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(null);null==this.__cbOnceTextureChange&&(this.__cbOnceTextureChange=[]),this.__cbOnceTextureChange.push(t)},offTextureChange:function(e){if(null!=e){var n;null!=this.__cbOnTextureChange&&-1!=(n=this.__cbOnTextureChange.indexOf(e))&&(this.__cbOnTextureChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTextureChange[n])&&s(),this.__cbOnOwnerUnbindTextureChange.splice(n,1)),null!=this.__cbOnceTextureChange&&-1!=(n=this.__cbOnceTextureChange.indexOf(e))&&(this.__cbOnceTextureChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTextureChange[n])&&s(),this.__cbOnceOwnerUnbindTextureChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindTextureChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTextureChange[l])&&s()}this.__cbOnOwnerUnbindTextureChange=null}if(null!=this.__cbOnceOwnerUnbindTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindTextureChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTextureChange[l])&&s()}this.__cbOnceOwnerUnbindTextureChange=null}this.__cbOnTextureChange=null,this.__cbOnceTextureChange=null}},listensTextureChange:function(){return null!=this.__cbOnTextureChange&&0<this.__cbOnTextureChange.length||null!=this.__cbOnceTextureChange&&0<this.__cbOnceTextureChange.length},set_unobservedTexture:function(e){return this.unobservedTexture!=e&&null!=(this.unobservedTexture=e)&&(this.get_width()<=0&&this.set_width(e.backendItem.width),this.get_height()<=0)&&this.set_height(e.backendItem.height),e},unbindEvents:function(){this.offObservedDirty(),this.offNameChange(),this.offWidthChange(),this.offHeightChange(),this.offFilterChange(),this.offTextureChange()},__class__:li,__properties__:{set_unobservedTexture:"set_unobservedTexture",set_texture:"set_texture",get_texture:"get_texture",set_unobservedFilter:"set_unobservedFilter",set_filter:"set_filter",get_filter:"get_filter",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_name:"set_name",get_name:"get_name"}},function(){}),ri=((L["ceramic.TextureAtlasParser"]=si).__name__="ceramic.TextureAtlasParser",si.parse=function(e){if(B.startsWith(B.trim(e),"<"))try{e=si.convertXmlTextureAtlas(e)}catch(e){Al.lastError=e;var n=Q.caught(e).unwrap();throw Q.thrown("TextureAtlas: invalid xml atlas data specified for parser: "+V.string(n))}for(var t=new ri(e),i=[null,null,null,null],l=null,s=new dc;;){var r=t.readLine();if(null==r)break;if(0==(r=t.trim(r)).length)l=null;else if(null==l){for(var l=new li(r),a=t.nextLineKey();null!=a;){switch(a){case"filter":t.readTuple(i),l.set_filter(null!=i[0]&&"nearest"==i[0].toLowerCase()?ui.NEAREST:ui.LINEAR);break;case"size":t.readTuple(i),l.set_width(V.parseInt(i[0])),l.set_height(V.parseInt(i[1]));break;default:t.readLine()}a=t.nextLineKey()}s.pages.push(l)}else{for(var u=r.toLowerCase(),c=(B.endsWith(u,".png")||B.endsWith(u,".gif")||B.endsWith(u,".jpg")?r=h.substr(r,0,r.length-4):B.endsWith(u,".jpeg")&&(r=h.substr(r,0,r.length-5)),new hi(r,s,s.pages.length-1)),o=0,_=0,d=0,b=0,g=0,O=0,f=t.nextLineKey();null!=f;){switch(f){case"bounds":t.readTuple(i),o=V.parseInt(i[0]),_=V.parseInt(i[1]),d=V.parseInt(i[2]),b=V.parseInt(i[3]);break;case"offset":t.readTuple(i),c.offsetX=V.parseInt(i[0]),c.offsetY=V.parseInt(i[1]);break;case"offsets":t.readTuple(i),c.offsetX=V.parseInt(i[0]),c.offsetY=V.parseInt(i[1]),g=V.parseInt(i[2]),O=V.parseInt(i[3]);break;case"orig":t.readTuple(i),g=V.parseInt(i[0]),O=V.parseInt(i[1]);break;case"rotate":var p=t.readValue();c.rotateFrame="true"==p||"90"==p;break;case"size":t.readTuple(i),d=V.parseInt(i[0]),b=V.parseInt(i[1]);break;case"xy":t.readTuple(i),o=V.parseInt(i[0]),_=V.parseInt(i[1]);break;default:t.readLine()}f=t.nextLineKey()}c.x=o,c.y=_,c.width=0|Math.abs(d),c.height=0|Math.abs(b),c.originalWidth=0!=g?g:c.width,c.originalHeight=0!=O?O:c.height,c.rotateFrame?(c.packedWidth=c.height,c.packedHeight=c.width):(c.packedWidth=c.width,c.packedHeight=c.height)}}return s},si.convertXmlTextureAtlas=function(e){for(var n="",e=F.parse(e).firstElement(),t=(n=n+V.string(e.get("imagePath"))+"\n",e.elements());t.hasNext();){var i=t.next();if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));"SubTexture"==i.nodeName&&(n=n+V.string(i.get("name"))+"\n",i.exists("frameX")&&i.exists("frameY")&&i.exists("frameWidth")&&i.exists("frameHeight")&&(n=(n=(n=(n=(n+="offsets:")+V.string(-parseFloat(i.get("frameX")))+",")+V.string(-parseFloat(i.get("frameY")))+",")+V.string(parseFloat(i.get("frameWidth")))+",")+V.string(parseFloat(i.get("frameHeight")))+"\n"),n=(n=(n=(n=(n+="bounds:")+V.string(parseFloat(i.get("x")))+",")+V.string(parseFloat(i.get("y")))+",")+V.string(parseFloat(i.get("width")))+",")+V.string(parseFloat(i.get("height")))+"\n",i.exists("rotate"))&&(n=(n+="rotate:")+V.string(i.get("rotate"))+"\n")}return n},function(e){this.lines=B.replace(B.replace(B.trim(e),"\r\n","\n"),"\r","\n").split("\n"),this.index=0}),ai=((L["ceramic._TextureAtlasParser.TextureAtlasReader"]=ri).__name__="ceramic._TextureAtlasParser.TextureAtlasReader",ri.prototype={lines:null,index:null,trim:function(e){return B.trim(e)},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},nextLineKey:function(){var e,n;return!(this.index>=this.lines.length)&&-1!=(n=(e=this.lines[this.index]).indexOf(":"))?B.trim(e.substring(0,n)):null},readValue:function(){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw Q.thrown("Invalid line: "+e);return this.trim(e.substring(n+1))},readTuple:function(e){var n=this.readLine(),t=n.indexOf(":");if(-1==t)throw Q.thrown("Invalid line: "+n);for(var i=0,l=t+1;i<3;){var s=n.indexOf(",",l);if(-1==s)break;e[i]=this.trim(h.substr(n,l,s-l)),l=s+1,++i}return e[i]=this.trim(n.substring(l)),i+1},__class__:ri},function(e,n,t,i,l,s,r){null==r&&(r=0),null==s&&(s=!1),this.texture=e,this.frameX=n,this.frameY=t,this.frameWidth=i,this.frameHeight=l,this.rotateFrame=s,this.edgeInset=r}),hi=((L["ceramic.TextureTile"]=ai).__name__="ceramic.TextureTile",ai.prototype={texture:null,frameX:null,frameY:null,frameWidth:null,frameHeight:null,rotateFrame:null,edgeInset:null,frame:function(e,n,t,i){this.frameX=e,this.frameY=n,this.frameWidth=t,this.frameHeight=i},toString:function(){return""+V.string({texture:this.texture,frameX:this.frameX,frameY:this.frameY,frameWidth:this.frameWidth,frameHeight:this.frameHeight})},__class__:ai},function(e,n,t){this.originalHeight=0,this.originalWidth=0,this.offsetY=0,this.offsetX=0,this.height=0,this.width=0,this.y=0,this.x=0,this.packedHeight=0,this.packedWidth=0,this.page=0,this.atlas=null,this.name=null,this.name=e,this.atlas=n,this.page=t;e=n.pages[t];ai.call(this,null!=e?e.get_texture():null,0,0,0,0,!1,0),n.regions.push(this)}),ui=((L["ceramic.TextureAtlasRegion"]=hi).__name__="ceramic.TextureAtlasRegion",hi.__super__=ai,hi.prototype=$extend(ai.prototype,{name:null,atlas:null,page:null,packedWidth:null,packedHeight:null,x:null,y:null,width:null,height:null,offsetX:null,offsetY:null,originalWidth:null,originalHeight:null,computeFrame:function(){var e,n=this.atlas.pages[this.page];null!=n?(this.texture=n.get_texture(),null!=this.texture?(e=n.get_width(),n=n.get_height(),e=this.texture.width/e,n=this.texture.height/n,this.frameX=this.x*e,this.frameY=this.y*n,this.frameWidth=this.width*e,this.frameHeight=this.height*n):he.app.logger.warning("Failed to compute region frame because there is no texture at page "+this.page,{fileName:"../../../../ceramic/runtime/src/ceramic/TextureAtlasRegion.hx",lineNumber:85,className:"ceramic.TextureAtlasRegion",methodName:"computeFrame"})):he.app.logger.warning("Failed to compute region frame because there is no page "+this.page,{fileName:"../../../../ceramic/runtime/src/ceramic/TextureAtlasRegion.hx",lineNumber:89,className:"ceramic.TextureAtlasRegion",methodName:"computeFrame"})},toString:function(){return""+V.string({name:this.name,page:this.page,texture:this.texture,packedWidth:this.packedWidth,packedHeight:this.packedHeight,originalWidth:this.originalWidth,originalHeight:this.originalHeight,width:this.width,height:this.height,offsetX:this.offsetX,offsetY:this.offsetY,frameX:this.frameX,frameY:this.frameY,frameWidth:this.frameWidth,frameHeight:this.frameHeight})},__class__:hi}),I["ceramic.TextureFilter"]={__ename__:"ceramic.TextureFilter",__constructs__:null,LINEAR:{_hx_name:"LINEAR",_hx_index:0,__enum__:"ceramic.TextureFilter",toString:d},NEAREST:{_hx_name:"NEAREST",_hx_index:1,__enum__:"ceramic.TextureFilter",toString:d}}),ci=(ui.__constructs__=[ui.LINEAR,ui.NEAREST],(L["ceramic.TextureTilePacker"]=nc).__name__="ceramic.TextureTilePacker",nc.__super__=l,nc.prototype=$extend(l.prototype,{texture:null,padWidth:null,padHeight:null,margin:null,nextPacker:null,areas:null,numCols:null,numRows:null,maxPixelTextureWidth:null,maxPixelTextureHeight:null,destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,l.prototype.destroy.call(this),null!=this.nextPacker&&(this.nextPacker.destroy(),this.nextPacker=null),this.texture.destroy(),this.texture=null,this.areas=null)},getTileAtPosition:function(e,n){return this.areas[n*this.numCols+e]},setTileAtPosition:function(e,n,t){this.areas[n*this.numCols+e]=t},allocTile:function(e,n){this.texture.width,this.texture.height;var t=this.padWidth+2*this.margin,i=this.padHeight+2*this.margin,l=t*this.numCols-2*this.margin,s=i*this.numRows-2*this.margin;if(l<e||s<n)return he.app.logger.warning("Cannot alloc tile of "+e+" x "+n+" because this is bigger than "+l+" x "+s,{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:123,className:"ceramic.TextureTilePacker",methodName:"allocTile"}),null;for(var r=this.padWidth,a=1;r<e;)++a,r+=this.padWidth+2*this.margin;for(var h=this.padHeight,u=1;h<n;)++u,h+=this.padHeight+2*this.margin;for(var c=0,o=this.numRows-u+1;c<o;)for(var _=c++,d=0,b=this.numCols-a+1;d<b;){for(var g=d++,O=!0,f=_,p=_+u;f<p;){for(var m=f++,w=g,v=g+a;w<v;){var y=w++;if(null!=this.areas[m*this.numCols+y]){O=!1;break}}if(!O)break}if(O){for(var C=new ci(this.texture,g*t,_*i,e,n),U=(C.col=g,C.row=_,C.usedCols=a,_),x=_+(C.usedRows=u);U<x;)for(var T=U++,D=g,A=g+a;D<A;){var S=D++;this.areas[T*this.numCols+S]=C}return C}}return null==this.nextPacker&&(this.nextPacker=new nc(this.texture.autoRender,this.maxPixelTextureWidth,this.maxPixelTextureHeight,this.padWidth,this.padHeight,this.margin)),this.nextPacker.allocTile(e,n)},releaseTile:function(e){var n=this;if(he.app.logger.info("release tile "+V.string(e),{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:198,className:"ceramic.TextureTilePacker",methodName:"releaseTile"}),!(e instanceof ci))throw Q.thrown("Cannot release tile: "+V.string(e)+".");for(var h=e,u=this;null!=u&&u.texture!=h.texture;)u=u.nextPacker;null==u?he.app.logger.warning("Failed to release tile: "+V.string(h)+" (it doesn't belong to this packer)",{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:213,className:"ceramic.TextureTilePacker",methodName:"releaseTile"}):he.app.onceUpdate(this,function(e){he.app.onceUpdate(n,function(e){for(var n=!1,t=h.row,i=h.row+h.usedRows;t<i;)for(var l=t++,s=h.col,r=h.col+h.usedCols;s<r;){var a=s++;u.areas[l*u.numCols+a]==h&&(n=!0,u.areas[l*u.numCols+a]=null)}h.texture=null,n||he.app.logger.warning("Failed to release tile: "+V.string(h)+" (did not find it)",{fileName:"../../../../ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:234,className:"ceramic.TextureTilePacker",methodName:"releaseTile"})})})},stamp:function(e,t,i){var l=new r,s=(l.set_anchorX(0),l.set_anchorY(0),e.frameHeight+2*this.margin),s=(l.set_width(e.frameWidth+2*this.margin),l.set_height(s),e.frameY-this.margin);if(l.set_x(e.frameX-this.margin),l.set_y(s),l.set_blending(4),0!=l.inheritAlpha&&(l.inheritAlpha=!1,l.visibilityDirty=!0,null!=l.children))for(var a=0,h=l.children.length;a<h;){var u=a++,c=l.children[u];if(c.visibilityDirty=!0,null!=c.children)for(var o=0,_=c.children.length;o<_;){var d=o++;c.children[d].set_visibilityDirty(!0)}}l.set_alpha(0),l.color=16777215;var b=t.transform,g=t.parent,s=(null!=g&&g.remove(t),l.add(t),t.set_transform(new n),t.transform);s.tx+=this.margin,s.ty+=this.margin,s.changedDirty=!0,e.texture.stamp(l,function(){l.remove(t),null!=g&&g.add(t),l.destroy(),l=null,t.set_transform(b),t=null,i(),i=null})},managesTexture:function(e){return this.texture==e||null!=this.nextPacker&&this.nextPacker.managesTexture(e)},__class__:nc}),function(e,n,t,i,l){this.usedRows=1,this.usedCols=1,this.row=-1,this.col=-1,ai.call(this,e,n,t,i,l)}),oi=((L["ceramic._TextureTilePacker.PackedTextureTile"]=ci).__name__="ceramic._TextureTilePacker.PackedTextureTile",ci.__super__=ai,ci.prototype=$extend(ai.prototype,{col:null,row:null,usedCols:null,usedRows:null,__class__:ci}),(L["ceramic.TileSlope"]=pc).__name__="ceramic.TileSlope",pc.prototype={index:null,rotation:null,y0:null,y1:null,__class__:pc},function(){this.layers=[],this.clipTilesHeight=-1,this.clipTilesWidth=-1,this.clipTilesY=-1,this.clipTilesX=-1,this.tileScale=1,this.tilemapData=null,this.roundTilesTranslation=1,r.call(this),this.flags|=16}),_i=((L["ceramic.Tilemap"]=oi).__name__="ceramic.Tilemap",oi.__super__=r,oi.prototype=$extend(r.prototype,{__cbOnCreateLayer:null,__cbOnceCreateLayer:null,__cbOnOwnerUnbindCreateLayer:null,__cbOnceOwnerUnbindCreateLayer:null,emitCreateLayer:function(e,n){var t=0;if(null!=this.__cbOnCreateLayer&&(t+=this.__cbOnCreateLayer.length),null!=this.__cbOnceCreateLayer&&(t+=this.__cbOnceCreateLayer.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnCreateLayer)for(var r=0,a=this.__cbOnCreateLayer.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnCreateLayer[h],++s):--t}if(null!=this.__cbOnceCreateLayer){for(var u=null,c=null,r=0,a=this.__cbOnceCreateLayer.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceCreateLayer[h],this.__cbOnceCreateLayer[h]=null,o=this.__cbOnceOwnerUnbindCreateLayer[h],(this.__cbOnceOwnerUnbindCreateLayer[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindCreateLayer[h]),c.push(this.__cbOnceCreateLayer[h]))}this.__cbOnceOwnerUnbindCreateLayer=u,this.__cbOnceCreateLayer=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onCreateLayer:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event createLayer because owner is destroyed!");var l=function(e){null!=t&&(i.offCreateLayer(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindCreateLayer&&(this.__cbOnOwnerUnbindCreateLayer=[]),this.__cbOnOwnerUnbindCreateLayer.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindCreateLayer&&(this.__cbOnOwnerUnbindCreateLayer=[]),this.__cbOnOwnerUnbindCreateLayer.push(null);null==this.__cbOnCreateLayer&&(this.__cbOnCreateLayer=[]),this.__cbOnCreateLayer.push(t)},onceCreateLayer:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event createLayer because owner is destroyed!");var l=function(e){null!=t&&(i.offCreateLayer(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindCreateLayer&&(this.__cbOnceOwnerUnbindCreateLayer=[]),this.__cbOnceOwnerUnbindCreateLayer.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindCreateLayer&&(this.__cbOnceOwnerUnbindCreateLayer=[]),this.__cbOnceOwnerUnbindCreateLayer.push(null);null==this.__cbOnceCreateLayer&&(this.__cbOnceCreateLayer=[]),this.__cbOnceCreateLayer.push(t)},offCreateLayer:function(e){if(null!=e){var n;null!=this.__cbOnCreateLayer&&-1!=(n=this.__cbOnCreateLayer.indexOf(e))&&(this.__cbOnCreateLayer.splice(n,1),null!=(s=this.__cbOnOwnerUnbindCreateLayer[n])&&s(),this.__cbOnOwnerUnbindCreateLayer.splice(n,1)),null!=this.__cbOnceCreateLayer&&-1!=(n=this.__cbOnceCreateLayer.indexOf(e))&&(this.__cbOnceCreateLayer.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindCreateLayer[n])&&s(),this.__cbOnceOwnerUnbindCreateLayer.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindCreateLayer){for(var t=0,i=this.__cbOnOwnerUnbindCreateLayer.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindCreateLayer[l])&&s()}this.__cbOnOwnerUnbindCreateLayer=null}if(null!=this.__cbOnceOwnerUnbindCreateLayer){for(t=0,i=this.__cbOnceOwnerUnbindCreateLayer.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindCreateLayer[l])&&s()}this.__cbOnceOwnerUnbindCreateLayer=null}this.__cbOnCreateLayer=null,this.__cbOnceCreateLayer=null}},listensCreateLayer:function(){return null!=this.__cbOnCreateLayer&&0<this.__cbOnCreateLayer.length||null!=this.__cbOnceCreateLayer&&0<this.__cbOnceCreateLayer.length},roundTilesTranslation:null,set_roundTilesTranslation:function(e){if(this.roundTilesTranslation!=e){this.roundTilesTranslation=e,this.contentDirty=!0,he.app.visualsContentDirty=!0;for(var n=0,t=this.layers.length;n<t;){var i=n++;this.layers[i].contentDirty=!0,he.app.visualsContentDirty=!0}}return e},tilemapData:null,set_tilemapData:function(e){if(this.tilemapData!=e){this.tilemapData=e,this.contentDirty=!0,he.app.visualsContentDirty=!0;for(var n=0,t=this.layers.length;n<t;){var i=n++;this.layers[i].contentDirty=!0,he.app.visualsContentDirty=!0}}return e},tileScale:null,set_tileScale:function(e){if(this.tileScale!=e&&-1!=(this.tileScale=e))for(var n=0,t=this.layers.length;n<t;){var i=n++;this.layers[i].set_tileScale(e)}return e},clipTilesX:null,set_clipTilesX:function(e){if(this.clipTilesX!=e){this.clipTilesX=e,this.contentDirty=!0,he.app.visualsContentDirty=!0;for(var n=0,t=this.layers.length;n<t;){var i=n++;this.layers[i].contentDirty=!0,he.app.visualsContentDirty=!0}}return e},clipTilesY:null,set_clipTilesY:function(e){if(this.clipTilesY!=e){this.clipTilesY=e,this.contentDirty=!0,he.app.visualsContentDirty=!0;for(var n=0,t=this.layers.length;n<t;){var i=n++;this.layers[i].contentDirty=!0,he.app.visualsContentDirty=!0}}return e},clipTilesWidth:null,set_clipTilesWidth:function(e){if(this.clipTilesWidth!=e){this.clipTilesWidth=e,this.contentDirty=!0,he.app.visualsContentDirty=!0;for(var n=0,t=this.layers.length;n<t;){var i=n++;this.layers[i].contentDirty=!0,he.app.visualsContentDirty=!0}}return e},clipTilesHeight:null,set_clipTilesHeight:function(e){if(this.clipTilesHeight!=e){this.clipTilesHeight=e,this.contentDirty=!0,he.app.visualsContentDirty=!0;for(var n=0,t=this.layers.length;n<t;){var i=n++;this.layers[i].contentDirty=!0,he.app.visualsContentDirty=!0}}return e},layers:null,get_width:function(){return this.contentDirty&&this.computeContent(),r.prototype.get_width.call(this)},get_height:function(){return this.contentDirty&&this.computeContent(),r.prototype.get_height.call(this)},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2;var e=this.layers;if(null!=e)for(var n=0,t=(e=[].concat(e)).length;n<t;)e[n++].destroy();this._lifecycleState=-1,r.prototype.destroy.call(this)}},computeContent:function(){var e,n;null==this.tilemapData?(this.set_width(0),this.set_height(0),this.flags|=16,this.color=16777215):(e=this.tilemapData.get_width(),n=this.tilemapData.get_height(),this.set_width(e),this.set_height(n),-1!=this.tilemapData.get_backgroundColor()&&0<(this.tilemapData.get_backgroundColor()>>24&255)?(this.flags&=-17,this.set_alpha((this.tilemapData.get_backgroundColor()>>24&255)/255),e=this.tilemapData.get_backgroundColor(),this.color=((0&65535|(255<(n=e>>16&255)?255:n<0?0:n)<<16)&16711935|(255<(n=e>>8&255)?255:n<0?0:n)<<8)&16776960|(255<(n=255&e)?255:n<0?0:n)):(this.flags|=16,this.color=16777215),this.computeLayers()),this.contentDirty=!1},computeLayers:function(){for(var e=0,n=this.tileScale,t=0,i=this.tilemapData.get_layers().length;t<i;){var l,s=t++,r=this.tilemapData.get_layers()[s],a=!1;null==(l=e<this.layers.length?this.layers[e]:null)&&(a=!0,(l=new _i).tilemap=this,-1!=n&&l.set_tileScale(n),l.set_depthRange(1),this.layers.push(l),this.add(l)),++e,null!=r.get_explicitDepth()?l.set_depth(r.get_explicitDepth()):l.set_depth(1+s),l.set_layerData(r),a&&this.emitCreateLayer(this,l)}for(;e<this.layers.length;)(l=this.layers.pop()).destroy()},clipTiles:function(e,n,t,i){this.set_clipTilesX(e),this.set_clipTilesY(n),this.set_clipTilesWidth(t),this.set_clipTilesHeight(i)},layer:function(e){this.contentDirty&&this.computeContent();for(var n=0,t=this.layers.length;n<t;){var i=n++,i=this.layers[i],l=i.layerData;if(null!=l&&l.get_name()==e)return i}return null},unbindEvents:function(){r.prototype.unbindEvents.call(this),this.offCreateLayer()},__class__:oi,__properties__:$extend(r.prototype.__properties__,{set_clipTilesHeight:"set_clipTilesHeight",set_clipTilesWidth:"set_clipTilesWidth",set_clipTilesY:"set_clipTilesY",set_clipTilesX:"set_clipTilesX",set_tileScale:"set_tileScale",set_tilemapData:"set_tilemapData",set_roundTilesTranslation:"set_roundTilesTranslation"})}),(L["ceramic.TilemapAsset"]=rc).__name__="ceramic.TilemapAsset",rc.__super__=i0,rc.prototype=$extend(i0.prototype,{tmxMapAutoruns:null,get_tmxMap:function(){var e,n,t=this.unobservedTmxMap;return null!=M.current&&(e=M.current,null!=(n=this.tmxMapAutoruns)||(n=M.getAutorunArray(),null!=(this.tmxMapAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tmxMap:function(e){var n=this.unobservedTmxMap;return n!=(this.unobservedTmxMap=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTmxMapChange(e,n),null!=(n=this.tmxMapAutoruns))&&(this.tmxMapAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTmxMap:function(){var e=this.unobservedTmxMap,e=(this.emitTmxMapChange(e,e),this.tmxMapAutoruns);null!=e&&(this.tmxMapAutoruns=null,M.invalidateAutorunArray(e))},unobservedTmxMap:null,__cbOnTmxMapChange:null,__cbOnceTmxMapChange:null,__cbOnOwnerUnbindTmxMapChange:null,__cbOnceOwnerUnbindTmxMapChange:null,emitTmxMapChange:function(e,n){var t=0;if(null!=this.__cbOnTmxMapChange&&(t+=this.__cbOnTmxMapChange.length),null!=this.__cbOnceTmxMapChange&&(t+=this.__cbOnceTmxMapChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTmxMapChange)for(var r=0,a=this.__cbOnTmxMapChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTmxMapChange[h],++s):--t}if(null!=this.__cbOnceTmxMapChange){for(var u=null,c=null,r=0,a=this.__cbOnceTmxMapChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTmxMapChange[h],this.__cbOnceTmxMapChange[h]=null,o=this.__cbOnceOwnerUnbindTmxMapChange[h],(this.__cbOnceOwnerUnbindTmxMapChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTmxMapChange[h]),c.push(this.__cbOnceTmxMapChange[h]))}this.__cbOnceOwnerUnbindTmxMapChange=u,this.__cbOnceTmxMapChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTmxMapChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tmxMapChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTmxMapChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTmxMapChange&&(this.__cbOnOwnerUnbindTmxMapChange=[]),this.__cbOnOwnerUnbindTmxMapChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTmxMapChange&&(this.__cbOnOwnerUnbindTmxMapChange=[]),this.__cbOnOwnerUnbindTmxMapChange.push(null);null==this.__cbOnTmxMapChange&&(this.__cbOnTmxMapChange=[]),this.__cbOnTmxMapChange.push(t)},onceTmxMapChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tmxMapChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTmxMapChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTmxMapChange&&(this.__cbOnceOwnerUnbindTmxMapChange=[]),this.__cbOnceOwnerUnbindTmxMapChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTmxMapChange&&(this.__cbOnceOwnerUnbindTmxMapChange=[]),this.__cbOnceOwnerUnbindTmxMapChange.push(null);null==this.__cbOnceTmxMapChange&&(this.__cbOnceTmxMapChange=[]),this.__cbOnceTmxMapChange.push(t)},offTmxMapChange:function(e){if(null!=e){var n;null!=this.__cbOnTmxMapChange&&-1!=(n=this.__cbOnTmxMapChange.indexOf(e))&&(this.__cbOnTmxMapChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTmxMapChange[n])&&s(),this.__cbOnOwnerUnbindTmxMapChange.splice(n,1)),null!=this.__cbOnceTmxMapChange&&-1!=(n=this.__cbOnceTmxMapChange.indexOf(e))&&(this.__cbOnceTmxMapChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTmxMapChange[n])&&s(),this.__cbOnceOwnerUnbindTmxMapChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTmxMapChange){for(var t=0,i=this.__cbOnOwnerUnbindTmxMapChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTmxMapChange[l])&&s()}this.__cbOnOwnerUnbindTmxMapChange=null}if(null!=this.__cbOnceOwnerUnbindTmxMapChange){for(t=0,i=this.__cbOnceOwnerUnbindTmxMapChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTmxMapChange[l])&&s()}this.__cbOnceOwnerUnbindTmxMapChange=null}this.__cbOnTmxMapChange=null,this.__cbOnceTmxMapChange=null}},listensTmxMapChange:function(){return null!=this.__cbOnTmxMapChange&&0<this.__cbOnTmxMapChange.length||null!=this.__cbOnceTmxMapChange&&0<this.__cbOnceTmxMapChange.length},ldtkDataAutoruns:null,get_ldtkData:function(){var e,n,t=this.unobservedLdtkData;return null!=M.current&&(e=M.current,null!=(n=this.ldtkDataAutoruns)||(n=M.getAutorunArray(),null!=(this.ldtkDataAutoruns=n)))&&e.bindToAutorunArray(n),t},set_ldtkData:function(e){var n=this.unobservedLdtkData;return n!=(this.unobservedLdtkData=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitLdtkDataChange(e,n),null!=(n=this.ldtkDataAutoruns))&&(this.ldtkDataAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateLdtkData:function(){var e=this.unobservedLdtkData,e=(this.emitLdtkDataChange(e,e),this.ldtkDataAutoruns);null!=e&&(this.ldtkDataAutoruns=null,M.invalidateAutorunArray(e))},unobservedLdtkData:null,__cbOnLdtkDataChange:null,__cbOnceLdtkDataChange:null,__cbOnOwnerUnbindLdtkDataChange:null,__cbOnceOwnerUnbindLdtkDataChange:null,emitLdtkDataChange:function(e,n){var t=0;if(null!=this.__cbOnLdtkDataChange&&(t+=this.__cbOnLdtkDataChange.length),null!=this.__cbOnceLdtkDataChange&&(t+=this.__cbOnceLdtkDataChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnLdtkDataChange)for(var r=0,a=this.__cbOnLdtkDataChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnLdtkDataChange[h],++s):--t}if(null!=this.__cbOnceLdtkDataChange){for(var u=null,c=null,r=0,a=this.__cbOnceLdtkDataChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceLdtkDataChange[h],this.__cbOnceLdtkDataChange[h]=null,o=this.__cbOnceOwnerUnbindLdtkDataChange[h],(this.__cbOnceOwnerUnbindLdtkDataChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindLdtkDataChange[h]),c.push(this.__cbOnceLdtkDataChange[h]))}this.__cbOnceOwnerUnbindLdtkDataChange=u,this.__cbOnceLdtkDataChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onLdtkDataChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkDataChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkDataChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindLdtkDataChange&&(this.__cbOnOwnerUnbindLdtkDataChange=[]),this.__cbOnOwnerUnbindLdtkDataChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindLdtkDataChange&&(this.__cbOnOwnerUnbindLdtkDataChange=[]),this.__cbOnOwnerUnbindLdtkDataChange.push(null);null==this.__cbOnLdtkDataChange&&(this.__cbOnLdtkDataChange=[]),this.__cbOnLdtkDataChange.push(t)},onceLdtkDataChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkDataChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkDataChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindLdtkDataChange&&(this.__cbOnceOwnerUnbindLdtkDataChange=[]),this.__cbOnceOwnerUnbindLdtkDataChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindLdtkDataChange&&(this.__cbOnceOwnerUnbindLdtkDataChange=[]),this.__cbOnceOwnerUnbindLdtkDataChange.push(null);null==this.__cbOnceLdtkDataChange&&(this.__cbOnceLdtkDataChange=[]),this.__cbOnceLdtkDataChange.push(t)},offLdtkDataChange:function(e){if(null!=e){var n;null!=this.__cbOnLdtkDataChange&&-1!=(n=this.__cbOnLdtkDataChange.indexOf(e))&&(this.__cbOnLdtkDataChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindLdtkDataChange[n])&&s(),this.__cbOnOwnerUnbindLdtkDataChange.splice(n,1)),null!=this.__cbOnceLdtkDataChange&&-1!=(n=this.__cbOnceLdtkDataChange.indexOf(e))&&(this.__cbOnceLdtkDataChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindLdtkDataChange[n])&&s(),this.__cbOnceOwnerUnbindLdtkDataChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindLdtkDataChange){for(var t=0,i=this.__cbOnOwnerUnbindLdtkDataChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindLdtkDataChange[l])&&s()}this.__cbOnOwnerUnbindLdtkDataChange=null}if(null!=this.__cbOnceOwnerUnbindLdtkDataChange){for(t=0,i=this.__cbOnceOwnerUnbindLdtkDataChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindLdtkDataChange[l])&&s()}this.__cbOnceOwnerUnbindLdtkDataChange=null}this.__cbOnLdtkDataChange=null,this.__cbOnceLdtkDataChange=null}},listensLdtkDataChange:function(){return null!=this.__cbOnLdtkDataChange&&0<this.__cbOnLdtkDataChange.length||null!=this.__cbOnceLdtkDataChange&&0<this.__cbOnceLdtkDataChange.length},tilemapDataAutoruns:null,get_tilemapData:function(){var e,n,t=this.unobservedTilemapData;return null!=M.current&&(e=M.current,null!=(n=this.tilemapDataAutoruns)||(n=M.getAutorunArray(),null!=(this.tilemapDataAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tilemapData:function(e){var n=this.unobservedTilemapData;return n!=(this.unobservedTilemapData=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTilemapDataChange(e,n),null!=(n=this.tilemapDataAutoruns))&&(this.tilemapDataAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTilemapData:function(){var e=this.unobservedTilemapData,e=(this.emitTilemapDataChange(e,e),this.tilemapDataAutoruns);null!=e&&(this.tilemapDataAutoruns=null,M.invalidateAutorunArray(e))},unobservedTilemapData:null,__cbOnTilemapDataChange:null,__cbOnceTilemapDataChange:null,__cbOnOwnerUnbindTilemapDataChange:null,__cbOnceOwnerUnbindTilemapDataChange:null,emitTilemapDataChange:function(e,n){var t=0;if(null!=this.__cbOnTilemapDataChange&&(t+=this.__cbOnTilemapDataChange.length),null!=this.__cbOnceTilemapDataChange&&(t+=this.__cbOnceTilemapDataChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTilemapDataChange)for(var r=0,a=this.__cbOnTilemapDataChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTilemapDataChange[h],++s):--t}if(null!=this.__cbOnceTilemapDataChange){for(var u=null,c=null,r=0,a=this.__cbOnceTilemapDataChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTilemapDataChange[h],this.__cbOnceTilemapDataChange[h]=null,o=this.__cbOnceOwnerUnbindTilemapDataChange[h],(this.__cbOnceOwnerUnbindTilemapDataChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTilemapDataChange[h]),c.push(this.__cbOnceTilemapDataChange[h]))}this.__cbOnceOwnerUnbindTilemapDataChange=u,this.__cbOnceTilemapDataChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTilemapDataChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilemapDataChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilemapDataChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTilemapDataChange&&(this.__cbOnOwnerUnbindTilemapDataChange=[]),this.__cbOnOwnerUnbindTilemapDataChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTilemapDataChange&&(this.__cbOnOwnerUnbindTilemapDataChange=[]),this.__cbOnOwnerUnbindTilemapDataChange.push(null);null==this.__cbOnTilemapDataChange&&(this.__cbOnTilemapDataChange=[]),this.__cbOnTilemapDataChange.push(t)},onceTilemapDataChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilemapDataChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilemapDataChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTilemapDataChange&&(this.__cbOnceOwnerUnbindTilemapDataChange=[]),this.__cbOnceOwnerUnbindTilemapDataChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTilemapDataChange&&(this.__cbOnceOwnerUnbindTilemapDataChange=[]),this.__cbOnceOwnerUnbindTilemapDataChange.push(null);null==this.__cbOnceTilemapDataChange&&(this.__cbOnceTilemapDataChange=[]),this.__cbOnceTilemapDataChange.push(t)},offTilemapDataChange:function(e){if(null!=e){var n;null!=this.__cbOnTilemapDataChange&&-1!=(n=this.__cbOnTilemapDataChange.indexOf(e))&&(this.__cbOnTilemapDataChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTilemapDataChange[n])&&s(),this.__cbOnOwnerUnbindTilemapDataChange.splice(n,1)),null!=this.__cbOnceTilemapDataChange&&-1!=(n=this.__cbOnceTilemapDataChange.indexOf(e))&&(this.__cbOnceTilemapDataChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTilemapDataChange[n])&&s(),this.__cbOnceOwnerUnbindTilemapDataChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTilemapDataChange){for(var t=0,i=this.__cbOnOwnerUnbindTilemapDataChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTilemapDataChange[l])&&s()}this.__cbOnOwnerUnbindTilemapDataChange=null}if(null!=this.__cbOnceOwnerUnbindTilemapDataChange){for(t=0,i=this.__cbOnceOwnerUnbindTilemapDataChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTilemapDataChange[l])&&s()}this.__cbOnceOwnerUnbindTilemapDataChange=null}this.__cbOnTilemapDataChange=null,this.__cbOnceTilemapDataChange=null}},listensTilemapDataChange:function(){return null!=this.__cbOnTilemapDataChange&&0<this.__cbOnTilemapDataChange.length||null!=this.__cbOnceTilemapDataChange&&0<this.__cbOnceTilemapDataChange.length},tsxRawData:null,ldtkExternalSources:null,load:function(){null!=this.owner&&(this.assets.inheritRuntimeAssetsFromAssets(this.owner),this.assets.loadMethod=this.owner.loadMethod,this.assets.scheduleMethod=this.owner.scheduleMethod,this.assets.delayBetweenXAssets=this.owner.delayBetweenXAssets),this.set_status(Je.LOADING),he.app.logger.info("Load tilemap "+this.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:76,className:"ceramic.TilemapAsset",methodName:"load"}),this.assets.runtimeAssets=this.runtimeAssets;var e=B.endsWith(this.path.toLowerCase(),".tmx"),n=B.endsWith(this.path.toLowerCase(),".ldtk");e?this.loadTmxTiledMap():n?this.loadLdtk():(this.set_status(Je.BROKEN),he.app.logger.error("Unknown format for tilemap data at path: "+this.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:97,className:"ceramic.TilemapAsset",methodName:"load"}),this.emitComplete(!1))},loadTmxTiledMap:function(){var t=this,i=new ei(this.path),e=this.assets.addAsset(i);i.computePath(["tmx"],!1,this.runtimeAssets),null!=e&&e.destroy(),this.assets.onceComplete(this,function(e){var n=i.get_text();i.destroy(),null!=n&&0<n.length?t.loadExternalTsxTilesetData(n,function(e){e?(e=bi.getTilemapParser(t.owner),t.set_tmxMap(e.parseTmx(n,At.directory(t.path),$bind(t,t.resolveTsxRawData))),t.set_tilemapData(e.tmxMapToTilemapData(t.get_tmxMap(),$bind(t,t.loadTextureFromSource))),null!=t.get_tilemapData()?((t.get_tilemapData().asset=t).assets.onceComplete(t,function(e){e?(t.set_status(Je.READY),t.emitComplete(!0),t.handleTexturesDensityChange&&t.checkTexturesDensity()):(t.set_status(Je.BROKEN),he.app.logger.error("Failed to load tilemap textures at path: "+t.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:152,className:"ceramic.TilemapAsset",methodName:"loadTmxTiledMap"}),t.emitComplete(!1))}),t.assets.load(!1,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:158,className:"ceramic.TilemapAsset",methodName:"loadTmxTiledMap"})):(t.set_status(Je.BROKEN),he.app.logger.error("Failed to load tilemap data at path: "+t.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:163,className:"ceramic.TilemapAsset",methodName:"loadTmxTiledMap"}),t.emitComplete(!1))):(t.set_status(Je.BROKEN),he.app.logger.error("Failed to load external tilesets of map: "+t.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:170,className:"ceramic.TilemapAsset",methodName:"loadTmxTiledMap"}),t.emitComplete(!1))}):(t.set_status(Je.BROKEN),he.app.logger.error("Failed to load raw tilemap data at path: "+t.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:179,className:"ceramic.TilemapAsset",methodName:"loadTmxTiledMap"}),t.emitComplete(!1))}),this.assets.load(null,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:185,className:"ceramic.TilemapAsset",methodName:"loadTmxTiledMap"})},loadExternalTsxTilesetData:function(e,s){var r=this,n=bi.getTilemapParser(this.owner),a=bi.getRawTsxCache(this.owner),h=n.parseExternalTilesetNames(e);if(null==h||0==h.length)s(!0);else{for(var u=null,t=(null==this.tsxRawData&&(this.tsxRawData=new z),0);t<h.length;){var i=h[t],l=(++t,At.join([At.directory(r.path),i]));null!=(l=a.h[l])?this.tsxRawData.h[i]=l:(null==u&&(u=new Re),this.addTilesetTextAsset(u,i))}null!=u?(u.onceComplete(this,function(e){if(e){for(var n=0;n<h.length;){var t=h[n],i=(++n,Re.decodePath(At.join([At.directory(r.path),t]))),i=u.text(i.name),l=At.join([At.directory(r.path),t]);r.tsxRawData.h[t]=i,a.h[l]=i}u.destroy(),s(!0)}else u.destroy(),s(!1)}),u.load(null,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:245,className:"ceramic.TilemapAsset",methodName:"loadExternalTsxTilesetData"})):s(!0)}},addTilesetTextAsset:function(e,n){var n=At.join([At.directory(this.path),n]),n=Re.decodePath(n),t=new ei(n.name);t.set_path(n.path),e.addAsset(t)},resolveTsxRawData:function(e,n){return null!=this.tsxRawData?this.tsxRawData.h[e]:null},loadTextureFromSource:function(e,n,t){var i=this;if(null!=e){var l=Re.decodePath(At.join([At.directory(this.path),e])),s=this.owner.texture(l.name);if(null==s){var r=this.owner.imageAsset(l.name);if(null!=r)switch(r.get_status()._hx_index){case 0:case 1:r.onceComplete(this,function(e){e?(e=i.owner.texture(r.name),t(e)):t(null)});break;case 2:case 3:t(null)}else{var a=new Sn(l.name);null!=n&&n(a),a.set_handleTexturesDensityChange(!0),a.onDestroy(this,function(e){}),this.assets.addAsset(a),this.assets.onceComplete(this,function(e){e&&((e=i.assets.texture(a.name)).set_filter(ui.NEAREST),i.owner.addAsset(a),t(e))})}}else t(s)}else he.app.logger.warning("Cannot load texture for source: "+e,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:342,className:"ceramic.TilemapAsset",methodName:"loadTextureFromSource"})},loadLdtk:function(){var l=this,s=new ei(this.path),e=this.assets.addAsset(s);s.computePath(["ldtk"],!1,this.runtimeAssets),null!=e&&e.destroy(),this.assets.onceComplete(this,function(e){var n=s.get_text();if(s.destroy(),null!=n&&0<n.length){var t=bi.getTilemapParser(l.owner);if(l.set_ldtkData(t.parseLdtk(n,$bind(l,l.loadExternalLdtkLevelData))),null==l.get_ldtkData())l.set_status(Je.BROKEN),he.app.logger.error("Failed to load because of invalid LDtk data",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:374,className:"ceramic.TilemapAsset",methodName:"loadLdtk"}),l.emitComplete(!1);else try{var i=null;null!=l.options&&null!=l.options.skip&&l.options.skip instanceof Array&&(i=l.options.skip),t.loadLdtkTilemaps(l.get_ldtkData(),$bind(l,l.loadTextureFromSource),i),(l.get_ldtkData().asset=l).assets.onceComplete(l,function(e){e?(l.set_status(Je.READY),l.emitComplete(!0),l.handleTexturesDensityChange&&l.checkTexturesDensity()):(l.set_status(Je.BROKEN),he.app.logger.error("Failed to load tilemap textures at path: "+l.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:406,className:"ceramic.TilemapAsset",methodName:"loadLdtk"}),l.emitComplete(!1))}),l.assets.load(!1,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:412,className:"ceramic.TilemapAsset",methodName:"loadLdtk"})}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();l.set_status(Je.BROKEN),he.app.logger.error("Error when loading LDtk tilemaps: "+V.string(n),{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:417,className:"ceramic.TilemapAsset",methodName:"loadLdtk"}),he.app.logger.error("Failed to load tilemap data at path: "+l.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:418,className:"ceramic.TilemapAsset",methodName:"loadLdtk"}),l.emitComplete(!1)}}else l.set_status(Je.BROKEN),he.app.logger.error("Failed to load raw tilemap data at path: "+l.path,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:425,className:"ceramic.TilemapAsset",methodName:"loadLdtk"}),l.emitComplete(!1)}),this.assets.load(null,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:431,className:"ceramic.TilemapAsset",methodName:"loadLdtk"})},loadExternalLdtkLevelData:function(t,i){he.app.logger.info("Load external LDtk level "+t,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:437,className:"ceramic.TilemapAsset",methodName:"loadExternalLdtkLevelData"});var l=new ei(t),e=this.assets.addAsset(l);l.computePath(["ldtkl"],!1,this.runtimeAssets),null==this.ldtkExternalSources&&(this.ldtkExternalSources=[]),-1==this.ldtkExternalSources.indexOf(l.path)&&this.ldtkExternalSources.push(l.path),null!=e&&e.destroy(),this.assets.onceComplete(this,function(e){var n=l.get_text();if(l.destroy(),null!=n&&0<n.length)try{i(n)}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();he.app.logger.error("Error when loading external LDtk level: "+V.string(n),{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:464,className:"ceramic.TilemapAsset",methodName:"loadExternalLdtkLevelData"}),i(null)}else he.app.logger.error("Failed to load raw external LDtk level at path: "+t,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:469,className:"ceramic.TilemapAsset",methodName:"loadExternalLdtkLevelData"}),i(null)}),this.assets.load(null,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:475,className:"ceramic.TilemapAsset",methodName:"loadExternalLdtkLevelData"})},texturesDensityDidChange:function(e,n){this.get_status()==Je.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){},assetFilesDidChange:function(e,n){var t=-1,i=(Object.prototype.hasOwnProperty.call(n.h,this.path)&&(t=n.h[this.path]),-1);if((i=Object.prototype.hasOwnProperty.call(e.h,this.path)?e.h[this.path]:i)!=t)he.app.logger.info("Reload tilemap (file has changed)",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:514,className:"ceramic.TilemapAsset",methodName:"assetFilesDidChange"}),this.ldtkExternalSources=null,this.load();else if(null!=this.ldtkExternalSources)for(var l=0,s=this.ldtkExternalSources.length;l<s;){var r=l++,r=this.ldtkExternalSources[r],t=-1,i=(Object.prototype.hasOwnProperty.call(n.h,r)&&(t=n.h[r]),-1);if((i=Object.prototype.hasOwnProperty.call(e.h,r)?e.h[r]:i)!=t)return he.app.logger.info("Reload tilemap (external file has changed)",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapAsset.hx",lineNumber:537,className:"ceramic.TilemapAsset",methodName:"assetFilesDidChange"}),this.ldtkExternalSources=null,void this.load()}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,i0.prototype.destroy.call(this),null!=this.get_tilemapData()&&(this.get_tilemapData().destroy(),this.set_tilemapData(null)),null!=this.get_ldtkData()&&(this.get_ldtkData().destroy(),this.set_ldtkData(null)),null!=this.get_tmxMap()&&this.set_tmxMap(null))},unbindEvents:function(){i0.prototype.unbindEvents.call(this),this.offTmxMapChange(),this.offLdtkDataChange(),this.offTilemapDataChange()},__class__:rc,__properties__:$extend(i0.prototype.__properties__,{set_tilemapData:"set_tilemapData",get_tilemapData:"get_tilemapData",set_ldtkData:"set_ldtkData",get_ldtkData:"get_ldtkData",set_tmxMap:"set_tmxMap",get_tmxMap:"get_tmxMap"})}),(L["tracker.Serializable"]=sc).__name__="tracker.Serializable",sc.__isInterface__=!0,sc.prototype={_serializeId:null,willSerialize:null,didDeserialize:null,__class__:sc},(L["tracker.Model"]=tc).__name__="tracker.Model",tc.__interfaces__=[sc,u],tc.__super__=l,tc.prototype=$extend(l.prototype,{__cbOnObservedDirty:null,__cbOnceObservedDirty:null,__cbOnOwnerUnbindObservedDirty:null,__cbOnceOwnerUnbindObservedDirty:null,emitObservedDirty:function(e,n){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnObservedDirty)for(var r=0,a=this.__cbOnObservedDirty.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnObservedDirty[h],++s):--t}if(null!=this.__cbOnceObservedDirty){for(var u=null,c=null,r=0,a=this.__cbOnceObservedDirty.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceObservedDirty[h],this.__cbOnceObservedDirty[h]=null,o=this.__cbOnceOwnerUnbindObservedDirty[h],(this.__cbOnceOwnerUnbindObservedDirty[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindObservedDirty[h]),c.push(this.__cbOnceObservedDirty[h]))}this.__cbOnceOwnerUnbindObservedDirty=u,this.__cbOnceObservedDirty=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(t)},onceObservedDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event observedDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offObservedDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(t)},offObservedDirty:function(e){if(null!=e){var n;null!=this.__cbOnObservedDirty&&-1!=(n=this.__cbOnObservedDirty.indexOf(e))&&(this.__cbOnObservedDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindObservedDirty[n])&&s(),this.__cbOnOwnerUnbindObservedDirty.splice(n,1)),null!=this.__cbOnceObservedDirty&&-1!=(n=this.__cbOnceObservedDirty.indexOf(e))&&(this.__cbOnceObservedDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindObservedDirty[n])&&s(),this.__cbOnceOwnerUnbindObservedDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindObservedDirty[l])&&s()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindObservedDirty[l])&&s()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&0<this.__cbOnObservedDirty.length||null!=this.__cbOnceObservedDirty&&0<this.__cbOnceObservedDirty.length},observedDirty:null,__cbOnModelDirty:null,__cbOnceModelDirty:null,__cbOnOwnerUnbindModelDirty:null,__cbOnceOwnerUnbindModelDirty:null,emitModelDirty:function(e){var n=0;if(null!=this.__cbOnModelDirty&&(n+=this.__cbOnModelDirty.length),null!=this.__cbOnceModelDirty&&(n+=this.__cbOnceModelDirty.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnModelDirty)for(var s=0,r=this.__cbOnModelDirty.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnModelDirty[a],++l):--n}if(null!=this.__cbOnceModelDirty){for(var h=null,u=null,s=0,r=this.__cbOnceModelDirty.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceModelDirty[a],this.__cbOnceModelDirty[a]=null,c=this.__cbOnceOwnerUnbindModelDirty[a],(this.__cbOnceOwnerUnbindModelDirty[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindModelDirty[a]),u.push(this.__cbOnceModelDirty[a]))}this.__cbOnceOwnerUnbindModelDirty=h,this.__cbOnceModelDirty=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onModelDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event modelDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offModelDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindModelDirty&&(this.__cbOnOwnerUnbindModelDirty=[]),this.__cbOnOwnerUnbindModelDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindModelDirty&&(this.__cbOnOwnerUnbindModelDirty=[]),this.__cbOnOwnerUnbindModelDirty.push(null);null==this.__cbOnModelDirty&&(this.__cbOnModelDirty=[]),this.__cbOnModelDirty.push(t)},onceModelDirty:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event modelDirty because owner is destroyed!");var l=function(e){null!=t&&(i.offModelDirty(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindModelDirty&&(this.__cbOnceOwnerUnbindModelDirty=[]),this.__cbOnceOwnerUnbindModelDirty.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindModelDirty&&(this.__cbOnceOwnerUnbindModelDirty=[]),this.__cbOnceOwnerUnbindModelDirty.push(null);null==this.__cbOnceModelDirty&&(this.__cbOnceModelDirty=[]),this.__cbOnceModelDirty.push(t)},offModelDirty:function(e){if(null!=e){var n;null!=this.__cbOnModelDirty&&-1!=(n=this.__cbOnModelDirty.indexOf(e))&&(this.__cbOnModelDirty.splice(n,1),null!=(s=this.__cbOnOwnerUnbindModelDirty[n])&&s(),this.__cbOnOwnerUnbindModelDirty.splice(n,1)),null!=this.__cbOnceModelDirty&&-1!=(n=this.__cbOnceModelDirty.indexOf(e))&&(this.__cbOnceModelDirty.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindModelDirty[n])&&s(),this.__cbOnceOwnerUnbindModelDirty.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindModelDirty){for(var t=0,i=this.__cbOnOwnerUnbindModelDirty.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindModelDirty[l])&&s()}this.__cbOnOwnerUnbindModelDirty=null}if(null!=this.__cbOnceOwnerUnbindModelDirty){for(t=0,i=this.__cbOnceOwnerUnbindModelDirty.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindModelDirty[l])&&s()}this.__cbOnceOwnerUnbindModelDirty=null}this.__cbOnModelDirty=null,this.__cbOnceModelDirty=null}},listensModelDirty:function(){return null!=this.__cbOnModelDirty&&0<this.__cbOnModelDirty.length||null!=this.__cbOnceModelDirty&&0<this.__cbOnceModelDirty.length},serializer:null,set_serializer:function(e){return this.serializer==e?this.serializer:(null!=this.serializer&&this.serializer.destroy(),this.serializer=e,null!=this.serializer?(this.component("serializer",this.serializer,!0),this.serializer):(this.removeComponent("serializer"),null))},sharer:null,set_sharer:function(e){return this.sharer==e?this.sharer:(null!=this.sharer&&this.sharer.destroy(),this.sharer=e,null!=this.sharer?(this.component("sharer",this.sharer,!0),this.sharer):(this.removeComponent("sharer"),null))},dirty:null,set_dirty:function(e){return e!=this.dirty&&(this.dirty=e)&&this.emitModelDirty(this),e},willSerialize:function(){},didDeserialize:function(){},serializeShouldDestroy:function(){return!0},hxSerialize:function(e){e.serialize(W.serializeValue(this))},hxUnserialize:function(e){W.deserializeValue(e.unserialize(),this)},_default_dirty:function(){return!1},_serializeId:null,__cbOnSerialize:null,__cbOnceSerialize:null,__cbOnOwnerUnbindSerialize:null,__cbOnceOwnerUnbindSerialize:null,emitSerialize:function(){var e=0;if(null!=this.__cbOnSerialize&&(e+=this.__cbOnSerialize.length),null!=this.__cbOnceSerialize&&(e+=this.__cbOnceSerialize.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnSerialize)for(var l=0,s=this.__cbOnSerialize.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnSerialize[r],++i):--e}if(null!=this.__cbOnceSerialize){for(var a=null,h=null,l=0,s=this.__cbOnceSerialize.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceSerialize[r],this.__cbOnceSerialize[r]=null,u=this.__cbOnceOwnerUnbindSerialize[r],(this.__cbOnceOwnerUnbindSerialize[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindSerialize[r]),h.push(this.__cbOnceSerialize[r]))}this.__cbOnceOwnerUnbindSerialize=a,this.__cbOnceSerialize=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onSerialize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event serialize because owner is destroyed!");var l=function(e){null!=t&&(i.offSerialize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindSerialize&&(this.__cbOnOwnerUnbindSerialize=[]),this.__cbOnOwnerUnbindSerialize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindSerialize&&(this.__cbOnOwnerUnbindSerialize=[]),this.__cbOnOwnerUnbindSerialize.push(null);null==this.__cbOnSerialize&&(this.__cbOnSerialize=[]),this.__cbOnSerialize.push(t)},onceSerialize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event serialize because owner is destroyed!");var l=function(e){null!=t&&(i.offSerialize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindSerialize&&(this.__cbOnceOwnerUnbindSerialize=[]),this.__cbOnceOwnerUnbindSerialize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindSerialize&&(this.__cbOnceOwnerUnbindSerialize=[]),this.__cbOnceOwnerUnbindSerialize.push(null);null==this.__cbOnceSerialize&&(this.__cbOnceSerialize=[]),this.__cbOnceSerialize.push(t)},offSerialize:function(e){if(null!=e){var n;null!=this.__cbOnSerialize&&-1!=(n=this.__cbOnSerialize.indexOf(e))&&(this.__cbOnSerialize.splice(n,1),null!=(s=this.__cbOnOwnerUnbindSerialize[n])&&s(),this.__cbOnOwnerUnbindSerialize.splice(n,1)),null!=this.__cbOnceSerialize&&-1!=(n=this.__cbOnceSerialize.indexOf(e))&&(this.__cbOnceSerialize.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindSerialize[n])&&s(),this.__cbOnceOwnerUnbindSerialize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSerialize){for(var t=0,i=this.__cbOnOwnerUnbindSerialize.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindSerialize[l])&&s()}this.__cbOnOwnerUnbindSerialize=null}if(null!=this.__cbOnceOwnerUnbindSerialize){for(t=0,i=this.__cbOnceOwnerUnbindSerialize.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindSerialize[l])&&s()}this.__cbOnceOwnerUnbindSerialize=null}this.__cbOnSerialize=null,this.__cbOnceSerialize=null}},listensSerialize:function(){return null!=this.__cbOnSerialize&&0<this.__cbOnSerialize.length||null!=this.__cbOnceSerialize&&0<this.__cbOnceSerialize.length},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offSerialize(),this.offDeserialize(),this.offObservedDirty(),this.offModelDirty()},__cbOnDeserialize:null,__cbOnceDeserialize:null,__cbOnOwnerUnbindDeserialize:null,__cbOnceOwnerUnbindDeserialize:null,emitDeserialize:function(){var e=0;if(null!=this.__cbOnDeserialize&&(e+=this.__cbOnDeserialize.length),null!=this.__cbOnceDeserialize&&(e+=this.__cbOnceDeserialize.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnDeserialize)for(var l=0,s=this.__cbOnDeserialize.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnDeserialize[r],++i):--e}if(null!=this.__cbOnceDeserialize){for(var a=null,h=null,l=0,s=this.__cbOnceDeserialize.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceDeserialize[r],this.__cbOnceDeserialize[r]=null,u=this.__cbOnceOwnerUnbindDeserialize[r],(this.__cbOnceOwnerUnbindDeserialize[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindDeserialize[r]),h.push(this.__cbOnceDeserialize[r]))}this.__cbOnceOwnerUnbindDeserialize=a,this.__cbOnceDeserialize=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onDeserialize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event deserialize because owner is destroyed!");var l=function(e){null!=t&&(i.offDeserialize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindDeserialize&&(this.__cbOnOwnerUnbindDeserialize=[]),this.__cbOnOwnerUnbindDeserialize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindDeserialize&&(this.__cbOnOwnerUnbindDeserialize=[]),this.__cbOnOwnerUnbindDeserialize.push(null);null==this.__cbOnDeserialize&&(this.__cbOnDeserialize=[]),this.__cbOnDeserialize.push(t)},onceDeserialize:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event deserialize because owner is destroyed!");var l=function(e){null!=t&&(i.offDeserialize(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindDeserialize&&(this.__cbOnceOwnerUnbindDeserialize=[]),this.__cbOnceOwnerUnbindDeserialize.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindDeserialize&&(this.__cbOnceOwnerUnbindDeserialize=[]),this.__cbOnceOwnerUnbindDeserialize.push(null);null==this.__cbOnceDeserialize&&(this.__cbOnceDeserialize=[]),this.__cbOnceDeserialize.push(t)},offDeserialize:function(e){if(null!=e){var n;null!=this.__cbOnDeserialize&&-1!=(n=this.__cbOnDeserialize.indexOf(e))&&(this.__cbOnDeserialize.splice(n,1),null!=(s=this.__cbOnOwnerUnbindDeserialize[n])&&s(),this.__cbOnOwnerUnbindDeserialize.splice(n,1)),null!=this.__cbOnceDeserialize&&-1!=(n=this.__cbOnceDeserialize.indexOf(e))&&(this.__cbOnceDeserialize.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindDeserialize[n])&&s(),this.__cbOnceOwnerUnbindDeserialize.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDeserialize){for(var t=0,i=this.__cbOnOwnerUnbindDeserialize.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindDeserialize[l])&&s()}this.__cbOnOwnerUnbindDeserialize=null}if(null!=this.__cbOnceOwnerUnbindDeserialize){for(t=0,i=this.__cbOnceOwnerUnbindDeserialize.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindDeserialize[l])&&s()}this.__cbOnceOwnerUnbindDeserialize=null}this.__cbOnDeserialize=null,this.__cbOnceDeserialize=null}},listensDeserialize:function(){return null!=this.__cbOnDeserialize&&0<this.__cbOnDeserialize.length||null!=this.__cbOnceDeserialize&&0<this.__cbOnceDeserialize.length},__class__:tc,__properties__:$extend(l.prototype.__properties__,{set_dirty:"set_dirty",set_sharer:"set_sharer",set_serializer:"set_serializer"})}),(L["ceramic.TilemapData"]=uc).__name__="ceramic.TilemapData",uc.__super__=tc,uc.prototype=$extend(tc.prototype,{ldtkLevelAutoruns:null,get_ldtkLevel:function(){var e,n,t=this.unobservedLdtkLevel;return null!=M.current&&(e=M.current,null!=(n=this.ldtkLevelAutoruns)||(n=M.getAutorunArray(),null!=(this.ldtkLevelAutoruns=n)))&&e.bindToAutorunArray(n),t},set_ldtkLevel:function(e){var n=this.unobservedLdtkLevel;return n!=(this.unobservedLdtkLevel=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitLdtkLevelChange(e,n),null!=(n=this.ldtkLevelAutoruns))&&(this.ldtkLevelAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateLdtkLevel:function(){var e=this.unobservedLdtkLevel,e=(this.emitLdtkLevelChange(e,e),this.ldtkLevelAutoruns);null!=e&&(this.ldtkLevelAutoruns=null,M.invalidateAutorunArray(e))},unobservedLdtkLevel:null,__cbOnLdtkLevelChange:null,__cbOnceLdtkLevelChange:null,__cbOnOwnerUnbindLdtkLevelChange:null,__cbOnceOwnerUnbindLdtkLevelChange:null,emitLdtkLevelChange:function(e,n){var t=0;if(null!=this.__cbOnLdtkLevelChange&&(t+=this.__cbOnLdtkLevelChange.length),null!=this.__cbOnceLdtkLevelChange&&(t+=this.__cbOnceLdtkLevelChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnLdtkLevelChange)for(var r=0,a=this.__cbOnLdtkLevelChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnLdtkLevelChange[h],++s):--t}if(null!=this.__cbOnceLdtkLevelChange){for(var u=null,c=null,r=0,a=this.__cbOnceLdtkLevelChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceLdtkLevelChange[h],this.__cbOnceLdtkLevelChange[h]=null,o=this.__cbOnceOwnerUnbindLdtkLevelChange[h],(this.__cbOnceOwnerUnbindLdtkLevelChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindLdtkLevelChange[h]),c.push(this.__cbOnceLdtkLevelChange[h]))}this.__cbOnceOwnerUnbindLdtkLevelChange=u,this.__cbOnceLdtkLevelChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onLdtkLevelChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkLevelChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkLevelChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindLdtkLevelChange&&(this.__cbOnOwnerUnbindLdtkLevelChange=[]),this.__cbOnOwnerUnbindLdtkLevelChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindLdtkLevelChange&&(this.__cbOnOwnerUnbindLdtkLevelChange=[]),this.__cbOnOwnerUnbindLdtkLevelChange.push(null);null==this.__cbOnLdtkLevelChange&&(this.__cbOnLdtkLevelChange=[]),this.__cbOnLdtkLevelChange.push(t)},onceLdtkLevelChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkLevelChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkLevelChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindLdtkLevelChange&&(this.__cbOnceOwnerUnbindLdtkLevelChange=[]),this.__cbOnceOwnerUnbindLdtkLevelChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindLdtkLevelChange&&(this.__cbOnceOwnerUnbindLdtkLevelChange=[]),this.__cbOnceOwnerUnbindLdtkLevelChange.push(null);null==this.__cbOnceLdtkLevelChange&&(this.__cbOnceLdtkLevelChange=[]),this.__cbOnceLdtkLevelChange.push(t)},offLdtkLevelChange:function(e){if(null!=e){var n;null!=this.__cbOnLdtkLevelChange&&-1!=(n=this.__cbOnLdtkLevelChange.indexOf(e))&&(this.__cbOnLdtkLevelChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindLdtkLevelChange[n])&&s(),this.__cbOnOwnerUnbindLdtkLevelChange.splice(n,1)),null!=this.__cbOnceLdtkLevelChange&&-1!=(n=this.__cbOnceLdtkLevelChange.indexOf(e))&&(this.__cbOnceLdtkLevelChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindLdtkLevelChange[n])&&s(),this.__cbOnceOwnerUnbindLdtkLevelChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindLdtkLevelChange){for(var t=0,i=this.__cbOnOwnerUnbindLdtkLevelChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindLdtkLevelChange[l])&&s()}this.__cbOnOwnerUnbindLdtkLevelChange=null}if(null!=this.__cbOnceOwnerUnbindLdtkLevelChange){for(t=0,i=this.__cbOnceOwnerUnbindLdtkLevelChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindLdtkLevelChange[l])&&s()}this.__cbOnceOwnerUnbindLdtkLevelChange=null}this.__cbOnLdtkLevelChange=null,this.__cbOnceLdtkLevelChange=null}},listensLdtkLevelChange:function(){return null!=this.__cbOnLdtkLevelChange&&0<this.__cbOnLdtkLevelChange.length||null!=this.__cbOnceLdtkLevelChange&&0<this.__cbOnceLdtkLevelChange.length},nameAutoruns:null,get_name:function(){var e,n,t=this.unobservedName;return null!=M.current&&(e=M.current,null!=(n=this.nameAutoruns)||(n=M.getAutorunArray(),null!=(this.nameAutoruns=n)))&&e.bindToAutorunArray(n),t},set_name:function(e){var n=this.unobservedName;return n!=(this.unobservedName=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitNameChange(e,n),null!=(n=this.nameAutoruns))&&(this.nameAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateName:function(){var e=this.unobservedName,e=(this.emitNameChange(e,e),this.nameAutoruns);null!=e&&(this.nameAutoruns=null,M.invalidateAutorunArray(e))},unobservedName:null,__cbOnNameChange:null,__cbOnceNameChange:null,__cbOnOwnerUnbindNameChange:null,__cbOnceOwnerUnbindNameChange:null,emitNameChange:function(e,n){var t=0;if(null!=this.__cbOnNameChange&&(t+=this.__cbOnNameChange.length),null!=this.__cbOnceNameChange&&(t+=this.__cbOnceNameChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnNameChange)for(var r=0,a=this.__cbOnNameChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnNameChange[h],++s):--t}if(null!=this.__cbOnceNameChange){for(var u=null,c=null,r=0,a=this.__cbOnceNameChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceNameChange[h],this.__cbOnceNameChange[h]=null,o=this.__cbOnceOwnerUnbindNameChange[h],(this.__cbOnceOwnerUnbindNameChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindNameChange[h]),c.push(this.__cbOnceNameChange[h]))}this.__cbOnceOwnerUnbindNameChange=u,this.__cbOnceNameChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(null);null==this.__cbOnNameChange&&(this.__cbOnNameChange=[]),this.__cbOnNameChange.push(t)},onceNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(null);null==this.__cbOnceNameChange&&(this.__cbOnceNameChange=[]),this.__cbOnceNameChange.push(t)},offNameChange:function(e){if(null!=e){var n;null!=this.__cbOnNameChange&&-1!=(n=this.__cbOnNameChange.indexOf(e))&&(this.__cbOnNameChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindNameChange[n])&&s(),this.__cbOnOwnerUnbindNameChange.splice(n,1)),null!=this.__cbOnceNameChange&&-1!=(n=this.__cbOnceNameChange.indexOf(e))&&(this.__cbOnceNameChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindNameChange[n])&&s(),this.__cbOnceOwnerUnbindNameChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindNameChange){for(var t=0,i=this.__cbOnOwnerUnbindNameChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindNameChange[l])&&s()}this.__cbOnOwnerUnbindNameChange=null}if(null!=this.__cbOnceOwnerUnbindNameChange){for(t=0,i=this.__cbOnceOwnerUnbindNameChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindNameChange[l])&&s()}this.__cbOnceOwnerUnbindNameChange=null}this.__cbOnNameChange=null,this.__cbOnceNameChange=null}},listensNameChange:function(){return null!=this.__cbOnNameChange&&0<this.__cbOnNameChange.length||null!=this.__cbOnceNameChange&&0<this.__cbOnceNameChange.length},orientationAutoruns:null,get_orientation:function(){var e,n,t=this.unobservedOrientation;return null!=M.current&&(e=M.current,null!=(n=this.orientationAutoruns)||(n=M.getAutorunArray(),null!=(this.orientationAutoruns=n)))&&e.bindToAutorunArray(n),t},set_orientation:function(e){var n=this.unobservedOrientation;return n!=(this.unobservedOrientation=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitOrientationChange(e,n),null!=(n=this.orientationAutoruns))&&(this.orientationAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateOrientation:function(){var e=this.unobservedOrientation,e=(this.emitOrientationChange(e,e),this.orientationAutoruns);null!=e&&(this.orientationAutoruns=null,M.invalidateAutorunArray(e))},unobservedOrientation:null,__cbOnOrientationChange:null,__cbOnceOrientationChange:null,__cbOnOwnerUnbindOrientationChange:null,__cbOnceOwnerUnbindOrientationChange:null,emitOrientationChange:function(e,n){var t=0;if(null!=this.__cbOnOrientationChange&&(t+=this.__cbOnOrientationChange.length),null!=this.__cbOnceOrientationChange&&(t+=this.__cbOnceOrientationChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnOrientationChange)for(var r=0,a=this.__cbOnOrientationChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnOrientationChange[h],++s):--t}if(null!=this.__cbOnceOrientationChange){for(var u=null,c=null,r=0,a=this.__cbOnceOrientationChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceOrientationChange[h],this.__cbOnceOrientationChange[h]=null,o=this.__cbOnceOwnerUnbindOrientationChange[h],(this.__cbOnceOwnerUnbindOrientationChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindOrientationChange[h]),c.push(this.__cbOnceOrientationChange[h]))}this.__cbOnceOwnerUnbindOrientationChange=u,this.__cbOnceOrientationChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onOrientationChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event orientationChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOrientationChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindOrientationChange&&(this.__cbOnOwnerUnbindOrientationChange=[]),this.__cbOnOwnerUnbindOrientationChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindOrientationChange&&(this.__cbOnOwnerUnbindOrientationChange=[]),this.__cbOnOwnerUnbindOrientationChange.push(null);null==this.__cbOnOrientationChange&&(this.__cbOnOrientationChange=[]),this.__cbOnOrientationChange.push(t)},onceOrientationChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event orientationChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOrientationChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindOrientationChange&&(this.__cbOnceOwnerUnbindOrientationChange=[]),this.__cbOnceOwnerUnbindOrientationChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindOrientationChange&&(this.__cbOnceOwnerUnbindOrientationChange=[]),this.__cbOnceOwnerUnbindOrientationChange.push(null);null==this.__cbOnceOrientationChange&&(this.__cbOnceOrientationChange=[]),this.__cbOnceOrientationChange.push(t)},offOrientationChange:function(e){if(null!=e){var n;null!=this.__cbOnOrientationChange&&-1!=(n=this.__cbOnOrientationChange.indexOf(e))&&(this.__cbOnOrientationChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindOrientationChange[n])&&s(),this.__cbOnOwnerUnbindOrientationChange.splice(n,1)),null!=this.__cbOnceOrientationChange&&-1!=(n=this.__cbOnceOrientationChange.indexOf(e))&&(this.__cbOnceOrientationChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindOrientationChange[n])&&s(),this.__cbOnceOwnerUnbindOrientationChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindOrientationChange){for(var t=0,i=this.__cbOnOwnerUnbindOrientationChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindOrientationChange[l])&&s()}this.__cbOnOwnerUnbindOrientationChange=null}if(null!=this.__cbOnceOwnerUnbindOrientationChange){for(t=0,i=this.__cbOnceOwnerUnbindOrientationChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindOrientationChange[l])&&s()}this.__cbOnceOwnerUnbindOrientationChange=null}this.__cbOnOrientationChange=null,this.__cbOnceOrientationChange=null}},listensOrientationChange:function(){return null!=this.__cbOnOrientationChange&&0<this.__cbOnOrientationChange.length||null!=this.__cbOnceOrientationChange&&0<this.__cbOnceOrientationChange.length},widthAutoruns:null,get_width:function(){var e,n,t=this.unobservedWidth;return null!=M.current&&(e=M.current,null!=(n=this.widthAutoruns)||(n=M.getAutorunArray(),null!=(this.widthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_width:function(e){var n=this.unobservedWidth;return n!=(this.unobservedWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitWidthChange(e,n),null!=(n=this.widthAutoruns))&&(this.widthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateWidth:function(){var e=this.unobservedWidth,e=(this.emitWidthChange(e,e),this.widthAutoruns);null!=e&&(this.widthAutoruns=null,M.invalidateAutorunArray(e))},unobservedWidth:null,__cbOnWidthChange:null,__cbOnceWidthChange:null,__cbOnOwnerUnbindWidthChange:null,__cbOnceOwnerUnbindWidthChange:null,emitWidthChange:function(e,n){var t=0;if(null!=this.__cbOnWidthChange&&(t+=this.__cbOnWidthChange.length),null!=this.__cbOnceWidthChange&&(t+=this.__cbOnceWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnWidthChange)for(var r=0,a=this.__cbOnWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnWidthChange[h],++s):--t}if(null!=this.__cbOnceWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceWidthChange[h],this.__cbOnceWidthChange[h]=null,o=this.__cbOnceOwnerUnbindWidthChange[h],(this.__cbOnceOwnerUnbindWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindWidthChange[h]),c.push(this.__cbOnceWidthChange[h]))}this.__cbOnceOwnerUnbindWidthChange=u,this.__cbOnceWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event widthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(null);null==this.__cbOnWidthChange&&(this.__cbOnWidthChange=[]),this.__cbOnWidthChange.push(t)},onceWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event widthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(null);null==this.__cbOnceWidthChange&&(this.__cbOnceWidthChange=[]),this.__cbOnceWidthChange.push(t)},offWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnWidthChange&&-1!=(n=this.__cbOnWidthChange.indexOf(e))&&(this.__cbOnWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindWidthChange[n])&&s(),this.__cbOnOwnerUnbindWidthChange.splice(n,1)),null!=this.__cbOnceWidthChange&&-1!=(n=this.__cbOnceWidthChange.indexOf(e))&&(this.__cbOnceWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindWidthChange[n])&&s(),this.__cbOnceOwnerUnbindWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindWidthChange[l])&&s()}this.__cbOnOwnerUnbindWidthChange=null}if(null!=this.__cbOnceOwnerUnbindWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindWidthChange[l])&&s()}this.__cbOnceOwnerUnbindWidthChange=null}this.__cbOnWidthChange=null,this.__cbOnceWidthChange=null}},listensWidthChange:function(){return null!=this.__cbOnWidthChange&&0<this.__cbOnWidthChange.length||null!=this.__cbOnceWidthChange&&0<this.__cbOnceWidthChange.length},heightAutoruns:null,get_height:function(){var e,n,t=this.unobservedHeight;return null!=M.current&&(e=M.current,null!=(n=this.heightAutoruns)||(n=M.getAutorunArray(),null!=(this.heightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_height:function(e){var n=this.unobservedHeight;return n!=(this.unobservedHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitHeightChange(e,n),null!=(n=this.heightAutoruns))&&(this.heightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateHeight:function(){var e=this.unobservedHeight,e=(this.emitHeightChange(e,e),this.heightAutoruns);null!=e&&(this.heightAutoruns=null,M.invalidateAutorunArray(e))},unobservedHeight:null,__cbOnHeightChange:null,__cbOnceHeightChange:null,__cbOnOwnerUnbindHeightChange:null,__cbOnceOwnerUnbindHeightChange:null,emitHeightChange:function(e,n){var t=0;if(null!=this.__cbOnHeightChange&&(t+=this.__cbOnHeightChange.length),null!=this.__cbOnceHeightChange&&(t+=this.__cbOnceHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnHeightChange)for(var r=0,a=this.__cbOnHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnHeightChange[h],++s):--t}if(null!=this.__cbOnceHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceHeightChange[h],this.__cbOnceHeightChange[h]=null,o=this.__cbOnceOwnerUnbindHeightChange[h],(this.__cbOnceOwnerUnbindHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindHeightChange[h]),c.push(this.__cbOnceHeightChange[h]))}this.__cbOnceOwnerUnbindHeightChange=u,this.__cbOnceHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event heightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(null);null==this.__cbOnHeightChange&&(this.__cbOnHeightChange=[]),this.__cbOnHeightChange.push(t)},onceHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event heightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(null);null==this.__cbOnceHeightChange&&(this.__cbOnceHeightChange=[]),this.__cbOnceHeightChange.push(t)},offHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnHeightChange&&-1!=(n=this.__cbOnHeightChange.indexOf(e))&&(this.__cbOnHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindHeightChange[n])&&s(),this.__cbOnOwnerUnbindHeightChange.splice(n,1)),null!=this.__cbOnceHeightChange&&-1!=(n=this.__cbOnceHeightChange.indexOf(e))&&(this.__cbOnceHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindHeightChange[n])&&s(),this.__cbOnceOwnerUnbindHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindHeightChange[l])&&s()}this.__cbOnOwnerUnbindHeightChange=null}if(null!=this.__cbOnceOwnerUnbindHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindHeightChange[l])&&s()}this.__cbOnceOwnerUnbindHeightChange=null}this.__cbOnHeightChange=null,this.__cbOnceHeightChange=null}},listensHeightChange:function(){return null!=this.__cbOnHeightChange&&0<this.__cbOnHeightChange.length||null!=this.__cbOnceHeightChange&&0<this.__cbOnceHeightChange.length},renderOrderAutoruns:null,get_renderOrder:function(){var e,n,t=this.unobservedRenderOrder;return null!=M.current&&(e=M.current,null!=(n=this.renderOrderAutoruns)||(n=M.getAutorunArray(),null!=(this.renderOrderAutoruns=n)))&&e.bindToAutorunArray(n),t},set_renderOrder:function(e){var n=this.unobservedRenderOrder;return n!=(this.unobservedRenderOrder=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitRenderOrderChange(e,n),null!=(n=this.renderOrderAutoruns))&&(this.renderOrderAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateRenderOrder:function(){var e=this.unobservedRenderOrder,e=(this.emitRenderOrderChange(e,e),this.renderOrderAutoruns);null!=e&&(this.renderOrderAutoruns=null,M.invalidateAutorunArray(e))},unobservedRenderOrder:null,__cbOnRenderOrderChange:null,__cbOnceRenderOrderChange:null,__cbOnOwnerUnbindRenderOrderChange:null,__cbOnceOwnerUnbindRenderOrderChange:null,emitRenderOrderChange:function(e,n){var t=0;if(null!=this.__cbOnRenderOrderChange&&(t+=this.__cbOnRenderOrderChange.length),null!=this.__cbOnceRenderOrderChange&&(t+=this.__cbOnceRenderOrderChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnRenderOrderChange)for(var r=0,a=this.__cbOnRenderOrderChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnRenderOrderChange[h],++s):--t}if(null!=this.__cbOnceRenderOrderChange){for(var u=null,c=null,r=0,a=this.__cbOnceRenderOrderChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceRenderOrderChange[h],this.__cbOnceRenderOrderChange[h]=null,o=this.__cbOnceOwnerUnbindRenderOrderChange[h],(this.__cbOnceOwnerUnbindRenderOrderChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindRenderOrderChange[h]),c.push(this.__cbOnceRenderOrderChange[h]))}this.__cbOnceOwnerUnbindRenderOrderChange=u,this.__cbOnceRenderOrderChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onRenderOrderChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event renderOrderChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRenderOrderChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindRenderOrderChange&&(this.__cbOnOwnerUnbindRenderOrderChange=[]),this.__cbOnOwnerUnbindRenderOrderChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindRenderOrderChange&&(this.__cbOnOwnerUnbindRenderOrderChange=[]),this.__cbOnOwnerUnbindRenderOrderChange.push(null);null==this.__cbOnRenderOrderChange&&(this.__cbOnRenderOrderChange=[]),this.__cbOnRenderOrderChange.push(t)},onceRenderOrderChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event renderOrderChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRenderOrderChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindRenderOrderChange&&(this.__cbOnceOwnerUnbindRenderOrderChange=[]),this.__cbOnceOwnerUnbindRenderOrderChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindRenderOrderChange&&(this.__cbOnceOwnerUnbindRenderOrderChange=[]),this.__cbOnceOwnerUnbindRenderOrderChange.push(null);null==this.__cbOnceRenderOrderChange&&(this.__cbOnceRenderOrderChange=[]),this.__cbOnceRenderOrderChange.push(t)},offRenderOrderChange:function(e){if(null!=e){var n;null!=this.__cbOnRenderOrderChange&&-1!=(n=this.__cbOnRenderOrderChange.indexOf(e))&&(this.__cbOnRenderOrderChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindRenderOrderChange[n])&&s(),this.__cbOnOwnerUnbindRenderOrderChange.splice(n,1)),null!=this.__cbOnceRenderOrderChange&&-1!=(n=this.__cbOnceRenderOrderChange.indexOf(e))&&(this.__cbOnceRenderOrderChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindRenderOrderChange[n])&&s(),this.__cbOnceOwnerUnbindRenderOrderChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindRenderOrderChange){for(var t=0,i=this.__cbOnOwnerUnbindRenderOrderChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindRenderOrderChange[l])&&s()}this.__cbOnOwnerUnbindRenderOrderChange=null}if(null!=this.__cbOnceOwnerUnbindRenderOrderChange){for(t=0,i=this.__cbOnceOwnerUnbindRenderOrderChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindRenderOrderChange[l])&&s()}this.__cbOnceOwnerUnbindRenderOrderChange=null}this.__cbOnRenderOrderChange=null,this.__cbOnceRenderOrderChange=null}},listensRenderOrderChange:function(){return null!=this.__cbOnRenderOrderChange&&0<this.__cbOnRenderOrderChange.length||null!=this.__cbOnceRenderOrderChange&&0<this.__cbOnceRenderOrderChange.length},hexSideLengthAutoruns:null,get_hexSideLength:function(){var e,n,t=this.unobservedHexSideLength;return null!=M.current&&(e=M.current,null!=(n=this.hexSideLengthAutoruns)||(n=M.getAutorunArray(),null!=(this.hexSideLengthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_hexSideLength:function(e){var n=this.unobservedHexSideLength;return n!=(this.unobservedHexSideLength=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitHexSideLengthChange(e,n),null!=(n=this.hexSideLengthAutoruns))&&(this.hexSideLengthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateHexSideLength:function(){var e=this.unobservedHexSideLength,e=(this.emitHexSideLengthChange(e,e),this.hexSideLengthAutoruns);null!=e&&(this.hexSideLengthAutoruns=null,M.invalidateAutorunArray(e))},unobservedHexSideLength:null,__cbOnHexSideLengthChange:null,__cbOnceHexSideLengthChange:null,__cbOnOwnerUnbindHexSideLengthChange:null,__cbOnceOwnerUnbindHexSideLengthChange:null,emitHexSideLengthChange:function(e,n){var t=0;if(null!=this.__cbOnHexSideLengthChange&&(t+=this.__cbOnHexSideLengthChange.length),null!=this.__cbOnceHexSideLengthChange&&(t+=this.__cbOnceHexSideLengthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnHexSideLengthChange)for(var r=0,a=this.__cbOnHexSideLengthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnHexSideLengthChange[h],++s):--t}if(null!=this.__cbOnceHexSideLengthChange){for(var u=null,c=null,r=0,a=this.__cbOnceHexSideLengthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceHexSideLengthChange[h],this.__cbOnceHexSideLengthChange[h]=null,o=this.__cbOnceOwnerUnbindHexSideLengthChange[h],(this.__cbOnceOwnerUnbindHexSideLengthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindHexSideLengthChange[h]),c.push(this.__cbOnceHexSideLengthChange[h]))}this.__cbOnceOwnerUnbindHexSideLengthChange=u,this.__cbOnceHexSideLengthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onHexSideLengthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event hexSideLengthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHexSideLengthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindHexSideLengthChange&&(this.__cbOnOwnerUnbindHexSideLengthChange=[]),this.__cbOnOwnerUnbindHexSideLengthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindHexSideLengthChange&&(this.__cbOnOwnerUnbindHexSideLengthChange=[]),this.__cbOnOwnerUnbindHexSideLengthChange.push(null);null==this.__cbOnHexSideLengthChange&&(this.__cbOnHexSideLengthChange=[]),this.__cbOnHexSideLengthChange.push(t)},onceHexSideLengthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event hexSideLengthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHexSideLengthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindHexSideLengthChange&&(this.__cbOnceOwnerUnbindHexSideLengthChange=[]),this.__cbOnceOwnerUnbindHexSideLengthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindHexSideLengthChange&&(this.__cbOnceOwnerUnbindHexSideLengthChange=[]),this.__cbOnceOwnerUnbindHexSideLengthChange.push(null);null==this.__cbOnceHexSideLengthChange&&(this.__cbOnceHexSideLengthChange=[]),this.__cbOnceHexSideLengthChange.push(t)},offHexSideLengthChange:function(e){if(null!=e){var n;null!=this.__cbOnHexSideLengthChange&&-1!=(n=this.__cbOnHexSideLengthChange.indexOf(e))&&(this.__cbOnHexSideLengthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindHexSideLengthChange[n])&&s(),this.__cbOnOwnerUnbindHexSideLengthChange.splice(n,1)),null!=this.__cbOnceHexSideLengthChange&&-1!=(n=this.__cbOnceHexSideLengthChange.indexOf(e))&&(this.__cbOnceHexSideLengthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindHexSideLengthChange[n])&&s(),this.__cbOnceOwnerUnbindHexSideLengthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindHexSideLengthChange){for(var t=0,i=this.__cbOnOwnerUnbindHexSideLengthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindHexSideLengthChange[l])&&s()}this.__cbOnOwnerUnbindHexSideLengthChange=null}if(null!=this.__cbOnceOwnerUnbindHexSideLengthChange){for(t=0,i=this.__cbOnceOwnerUnbindHexSideLengthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindHexSideLengthChange[l])&&s()}this.__cbOnceOwnerUnbindHexSideLengthChange=null}this.__cbOnHexSideLengthChange=null,this.__cbOnceHexSideLengthChange=null}},listensHexSideLengthChange:function(){return null!=this.__cbOnHexSideLengthChange&&0<this.__cbOnHexSideLengthChange.length||null!=this.__cbOnceHexSideLengthChange&&0<this.__cbOnceHexSideLengthChange.length},staggerAxisAutoruns:null,get_staggerAxis:function(){var e,n,t=this.unobservedStaggerAxis;return null!=M.current&&(e=M.current,null!=(n=this.staggerAxisAutoruns)||(n=M.getAutorunArray(),null!=(this.staggerAxisAutoruns=n)))&&e.bindToAutorunArray(n),t},set_staggerAxis:function(e){var n=this.unobservedStaggerAxis;return n!=(this.unobservedStaggerAxis=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitStaggerAxisChange(e,n),null!=(n=this.staggerAxisAutoruns))&&(this.staggerAxisAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateStaggerAxis:function(){var e=this.unobservedStaggerAxis,e=(this.emitStaggerAxisChange(e,e),this.staggerAxisAutoruns);null!=e&&(this.staggerAxisAutoruns=null,M.invalidateAutorunArray(e))},unobservedStaggerAxis:null,__cbOnStaggerAxisChange:null,__cbOnceStaggerAxisChange:null,__cbOnOwnerUnbindStaggerAxisChange:null,__cbOnceOwnerUnbindStaggerAxisChange:null,emitStaggerAxisChange:function(e,n){var t=0;if(null!=this.__cbOnStaggerAxisChange&&(t+=this.__cbOnStaggerAxisChange.length),null!=this.__cbOnceStaggerAxisChange&&(t+=this.__cbOnceStaggerAxisChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnStaggerAxisChange)for(var r=0,a=this.__cbOnStaggerAxisChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnStaggerAxisChange[h],++s):--t}if(null!=this.__cbOnceStaggerAxisChange){for(var u=null,c=null,r=0,a=this.__cbOnceStaggerAxisChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceStaggerAxisChange[h],this.__cbOnceStaggerAxisChange[h]=null,o=this.__cbOnceOwnerUnbindStaggerAxisChange[h],(this.__cbOnceOwnerUnbindStaggerAxisChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindStaggerAxisChange[h]),c.push(this.__cbOnceStaggerAxisChange[h]))}this.__cbOnceOwnerUnbindStaggerAxisChange=u,this.__cbOnceStaggerAxisChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onStaggerAxisChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event staggerAxisChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStaggerAxisChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindStaggerAxisChange&&(this.__cbOnOwnerUnbindStaggerAxisChange=[]),this.__cbOnOwnerUnbindStaggerAxisChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindStaggerAxisChange&&(this.__cbOnOwnerUnbindStaggerAxisChange=[]),this.__cbOnOwnerUnbindStaggerAxisChange.push(null);null==this.__cbOnStaggerAxisChange&&(this.__cbOnStaggerAxisChange=[]),this.__cbOnStaggerAxisChange.push(t)},onceStaggerAxisChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event staggerAxisChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStaggerAxisChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindStaggerAxisChange&&(this.__cbOnceOwnerUnbindStaggerAxisChange=[]),this.__cbOnceOwnerUnbindStaggerAxisChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindStaggerAxisChange&&(this.__cbOnceOwnerUnbindStaggerAxisChange=[]),this.__cbOnceOwnerUnbindStaggerAxisChange.push(null);null==this.__cbOnceStaggerAxisChange&&(this.__cbOnceStaggerAxisChange=[]),this.__cbOnceStaggerAxisChange.push(t)},offStaggerAxisChange:function(e){if(null!=e){var n;null!=this.__cbOnStaggerAxisChange&&-1!=(n=this.__cbOnStaggerAxisChange.indexOf(e))&&(this.__cbOnStaggerAxisChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindStaggerAxisChange[n])&&s(),this.__cbOnOwnerUnbindStaggerAxisChange.splice(n,1)),null!=this.__cbOnceStaggerAxisChange&&-1!=(n=this.__cbOnceStaggerAxisChange.indexOf(e))&&(this.__cbOnceStaggerAxisChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindStaggerAxisChange[n])&&s(),this.__cbOnceOwnerUnbindStaggerAxisChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStaggerAxisChange){for(var t=0,i=this.__cbOnOwnerUnbindStaggerAxisChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindStaggerAxisChange[l])&&s()}this.__cbOnOwnerUnbindStaggerAxisChange=null}if(null!=this.__cbOnceOwnerUnbindStaggerAxisChange){for(t=0,i=this.__cbOnceOwnerUnbindStaggerAxisChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindStaggerAxisChange[l])&&s()}this.__cbOnceOwnerUnbindStaggerAxisChange=null}this.__cbOnStaggerAxisChange=null,this.__cbOnceStaggerAxisChange=null}},listensStaggerAxisChange:function(){return null!=this.__cbOnStaggerAxisChange&&0<this.__cbOnStaggerAxisChange.length||null!=this.__cbOnceStaggerAxisChange&&0<this.__cbOnceStaggerAxisChange.length},staggerIndexAutoruns:null,get_staggerIndex:function(){var e,n,t=this.unobservedStaggerIndex;return null!=M.current&&(e=M.current,null!=(n=this.staggerIndexAutoruns)||(n=M.getAutorunArray(),null!=(this.staggerIndexAutoruns=n)))&&e.bindToAutorunArray(n),t},set_staggerIndex:function(e){var n=this.unobservedStaggerIndex;return n!=(this.unobservedStaggerIndex=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitStaggerIndexChange(e,n),null!=(n=this.staggerIndexAutoruns))&&(this.staggerIndexAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateStaggerIndex:function(){var e=this.unobservedStaggerIndex,e=(this.emitStaggerIndexChange(e,e),this.staggerIndexAutoruns);null!=e&&(this.staggerIndexAutoruns=null,M.invalidateAutorunArray(e))},unobservedStaggerIndex:null,__cbOnStaggerIndexChange:null,__cbOnceStaggerIndexChange:null,__cbOnOwnerUnbindStaggerIndexChange:null,__cbOnceOwnerUnbindStaggerIndexChange:null,emitStaggerIndexChange:function(e,n){var t=0;if(null!=this.__cbOnStaggerIndexChange&&(t+=this.__cbOnStaggerIndexChange.length),null!=this.__cbOnceStaggerIndexChange&&(t+=this.__cbOnceStaggerIndexChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnStaggerIndexChange)for(var r=0,a=this.__cbOnStaggerIndexChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnStaggerIndexChange[h],++s):--t}if(null!=this.__cbOnceStaggerIndexChange){for(var u=null,c=null,r=0,a=this.__cbOnceStaggerIndexChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceStaggerIndexChange[h],this.__cbOnceStaggerIndexChange[h]=null,o=this.__cbOnceOwnerUnbindStaggerIndexChange[h],(this.__cbOnceOwnerUnbindStaggerIndexChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindStaggerIndexChange[h]),c.push(this.__cbOnceStaggerIndexChange[h]))}this.__cbOnceOwnerUnbindStaggerIndexChange=u,this.__cbOnceStaggerIndexChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onStaggerIndexChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event staggerIndexChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStaggerIndexChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindStaggerIndexChange&&(this.__cbOnOwnerUnbindStaggerIndexChange=[]),this.__cbOnOwnerUnbindStaggerIndexChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindStaggerIndexChange&&(this.__cbOnOwnerUnbindStaggerIndexChange=[]),this.__cbOnOwnerUnbindStaggerIndexChange.push(null);null==this.__cbOnStaggerIndexChange&&(this.__cbOnStaggerIndexChange=[]),this.__cbOnStaggerIndexChange.push(t)},onceStaggerIndexChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event staggerIndexChange because owner is destroyed!");var l=function(e){null!=t&&(i.offStaggerIndexChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindStaggerIndexChange&&(this.__cbOnceOwnerUnbindStaggerIndexChange=[]),this.__cbOnceOwnerUnbindStaggerIndexChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindStaggerIndexChange&&(this.__cbOnceOwnerUnbindStaggerIndexChange=[]),this.__cbOnceOwnerUnbindStaggerIndexChange.push(null);null==this.__cbOnceStaggerIndexChange&&(this.__cbOnceStaggerIndexChange=[]),this.__cbOnceStaggerIndexChange.push(t)},offStaggerIndexChange:function(e){if(null!=e){var n;null!=this.__cbOnStaggerIndexChange&&-1!=(n=this.__cbOnStaggerIndexChange.indexOf(e))&&(this.__cbOnStaggerIndexChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindStaggerIndexChange[n])&&s(),this.__cbOnOwnerUnbindStaggerIndexChange.splice(n,1)),null!=this.__cbOnceStaggerIndexChange&&-1!=(n=this.__cbOnceStaggerIndexChange.indexOf(e))&&(this.__cbOnceStaggerIndexChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindStaggerIndexChange[n])&&s(),this.__cbOnceOwnerUnbindStaggerIndexChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStaggerIndexChange){for(var t=0,i=this.__cbOnOwnerUnbindStaggerIndexChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindStaggerIndexChange[l])&&s()}this.__cbOnOwnerUnbindStaggerIndexChange=null}if(null!=this.__cbOnceOwnerUnbindStaggerIndexChange){for(t=0,i=this.__cbOnceOwnerUnbindStaggerIndexChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindStaggerIndexChange[l])&&s()}this.__cbOnceOwnerUnbindStaggerIndexChange=null}this.__cbOnStaggerIndexChange=null,this.__cbOnceStaggerIndexChange=null}},listensStaggerIndexChange:function(){return null!=this.__cbOnStaggerIndexChange&&0<this.__cbOnStaggerIndexChange.length||null!=this.__cbOnceStaggerIndexChange&&0<this.__cbOnceStaggerIndexChange.length},backgroundColorAutoruns:null,get_backgroundColor:function(){var e,n,t=this.unobservedBackgroundColor;return null!=M.current&&(e=M.current,null!=(n=this.backgroundColorAutoruns)||(n=M.getAutorunArray(),null!=(this.backgroundColorAutoruns=n)))&&e.bindToAutorunArray(n),t},set_backgroundColor:function(e){var n=this.unobservedBackgroundColor;return n!=(this.unobservedBackgroundColor=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitBackgroundColorChange(e,n),null!=(n=this.backgroundColorAutoruns))&&(this.backgroundColorAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateBackgroundColor:function(){var e=this.unobservedBackgroundColor,e=(this.emitBackgroundColorChange(e,e),this.backgroundColorAutoruns);null!=e&&(this.backgroundColorAutoruns=null,M.invalidateAutorunArray(e))},unobservedBackgroundColor:null,__cbOnBackgroundColorChange:null,__cbOnceBackgroundColorChange:null,__cbOnOwnerUnbindBackgroundColorChange:null,__cbOnceOwnerUnbindBackgroundColorChange:null,emitBackgroundColorChange:function(e,n){var t=0;if(null!=this.__cbOnBackgroundColorChange&&(t+=this.__cbOnBackgroundColorChange.length),null!=this.__cbOnceBackgroundColorChange&&(t+=this.__cbOnceBackgroundColorChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnBackgroundColorChange)for(var r=0,a=this.__cbOnBackgroundColorChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnBackgroundColorChange[h],++s):--t}if(null!=this.__cbOnceBackgroundColorChange){for(var u=null,c=null,r=0,a=this.__cbOnceBackgroundColorChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceBackgroundColorChange[h],this.__cbOnceBackgroundColorChange[h]=null,o=this.__cbOnceOwnerUnbindBackgroundColorChange[h],(this.__cbOnceOwnerUnbindBackgroundColorChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindBackgroundColorChange[h]),c.push(this.__cbOnceBackgroundColorChange[h]))}this.__cbOnceOwnerUnbindBackgroundColorChange=u,this.__cbOnceBackgroundColorChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onBackgroundColorChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event backgroundColorChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBackgroundColorChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBackgroundColorChange&&(this.__cbOnOwnerUnbindBackgroundColorChange=[]),this.__cbOnOwnerUnbindBackgroundColorChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBackgroundColorChange&&(this.__cbOnOwnerUnbindBackgroundColorChange=[]),this.__cbOnOwnerUnbindBackgroundColorChange.push(null);null==this.__cbOnBackgroundColorChange&&(this.__cbOnBackgroundColorChange=[]),this.__cbOnBackgroundColorChange.push(t)},onceBackgroundColorChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event backgroundColorChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBackgroundColorChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBackgroundColorChange&&(this.__cbOnceOwnerUnbindBackgroundColorChange=[]),this.__cbOnceOwnerUnbindBackgroundColorChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBackgroundColorChange&&(this.__cbOnceOwnerUnbindBackgroundColorChange=[]),this.__cbOnceOwnerUnbindBackgroundColorChange.push(null);null==this.__cbOnceBackgroundColorChange&&(this.__cbOnceBackgroundColorChange=[]),this.__cbOnceBackgroundColorChange.push(t)},offBackgroundColorChange:function(e){if(null!=e){var n;null!=this.__cbOnBackgroundColorChange&&-1!=(n=this.__cbOnBackgroundColorChange.indexOf(e))&&(this.__cbOnBackgroundColorChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBackgroundColorChange[n])&&s(),this.__cbOnOwnerUnbindBackgroundColorChange.splice(n,1)),null!=this.__cbOnceBackgroundColorChange&&-1!=(n=this.__cbOnceBackgroundColorChange.indexOf(e))&&(this.__cbOnceBackgroundColorChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBackgroundColorChange[n])&&s(),this.__cbOnceOwnerUnbindBackgroundColorChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBackgroundColorChange){for(var t=0,i=this.__cbOnOwnerUnbindBackgroundColorChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBackgroundColorChange[l])&&s()}this.__cbOnOwnerUnbindBackgroundColorChange=null}if(null!=this.__cbOnceOwnerUnbindBackgroundColorChange){for(t=0,i=this.__cbOnceOwnerUnbindBackgroundColorChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBackgroundColorChange[l])&&s()}this.__cbOnceOwnerUnbindBackgroundColorChange=null}this.__cbOnBackgroundColorChange=null,this.__cbOnceBackgroundColorChange=null}},listensBackgroundColorChange:function(){return null!=this.__cbOnBackgroundColorChange&&0<this.__cbOnBackgroundColorChange.length||null!=this.__cbOnceBackgroundColorChange&&0<this.__cbOnceBackgroundColorChange.length},willListenMaxTileWidthChange:function(){this.get_unobservedMaxTileWidth()},get_unobservedMaxTileWidth:function(){var n,t;return 0<=this._lifecycleState?null==this.computeAutorunMaxTileWidth?(n=this,t=new M(null),this.computedOnceMaxTileWidth=!0,(this.computeAutorunMaxTileWidth=t).onRun=function(){var e=n.computeMaxTileWidth();M.unobserve(),n.set_maxTileWidth(e),M.reobserve()},t.onDestroy(this,function(e){n.computeAutorunMaxTileWidth==t&&(n.computeAutorunMaxTileWidth=null),n=t=null}),this.onDestroy(t,function(e){null!=t&&(t.destroy(),t=null),n=null}),t.run()):this.computeAutorunMaxTileWidth.invalidated&&this.computeAutorunMaxTileWidth.run():this.computedOnceMaxTileWidth||(M.unobserve(),this.computedOnceMaxTileWidth=!0,this.unobservedMaxTileWidth=this.computeMaxTileWidth(),M.reobserve()),this.unobservedMaxTileWidth},maxTileWidthAutoruns:null,get_maxTileWidth:function(){var e,n,t=this.get_unobservedMaxTileWidth();return null!=M.current&&(e=M.current,null!=(n=this.maxTileWidthAutoruns)||(n=M.getAutorunArray(),null!=(this.maxTileWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_maxTileWidth:function(e){var n=this.get_unobservedMaxTileWidth();return n!=(this.unobservedMaxTileWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitMaxTileWidthChange(e,n),null!=(n=this.maxTileWidthAutoruns))&&(this.maxTileWidthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateMaxTileWidth:function(){var e=this.get_unobservedMaxTileWidth(),e=(this.emitMaxTileWidthChange(e,e),this.maxTileWidthAutoruns);null!=e&&(this.maxTileWidthAutoruns=null,M.invalidateAutorunArray(e))},unobservedMaxTileWidth:null,__cbOnMaxTileWidthChange:null,__cbOnceMaxTileWidthChange:null,__cbOnOwnerUnbindMaxTileWidthChange:null,__cbOnceOwnerUnbindMaxTileWidthChange:null,emitMaxTileWidthChange:function(e,n){var t=0;if(null!=this.__cbOnMaxTileWidthChange&&(t+=this.__cbOnMaxTileWidthChange.length),null!=this.__cbOnceMaxTileWidthChange&&(t+=this.__cbOnceMaxTileWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMaxTileWidthChange)for(var r=0,a=this.__cbOnMaxTileWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMaxTileWidthChange[h],++s):--t}if(null!=this.__cbOnceMaxTileWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceMaxTileWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMaxTileWidthChange[h],this.__cbOnceMaxTileWidthChange[h]=null,o=this.__cbOnceOwnerUnbindMaxTileWidthChange[h],(this.__cbOnceOwnerUnbindMaxTileWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMaxTileWidthChange[h]),c.push(this.__cbOnceMaxTileWidthChange[h]))}this.__cbOnceOwnerUnbindMaxTileWidthChange=u,this.__cbOnceMaxTileWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMaxTileWidthChange:function(n,t){var i=this;if(null==this.__cbOnMaxTileWidthChange&&null==this.__cbOnceMaxTileWidthChange&&this.willListenMaxTileWidthChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event maxTileWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMaxTileWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMaxTileWidthChange&&(this.__cbOnOwnerUnbindMaxTileWidthChange=[]),this.__cbOnOwnerUnbindMaxTileWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMaxTileWidthChange&&(this.__cbOnOwnerUnbindMaxTileWidthChange=[]),this.__cbOnOwnerUnbindMaxTileWidthChange.push(null);null==this.__cbOnMaxTileWidthChange&&(this.__cbOnMaxTileWidthChange=[]),this.__cbOnMaxTileWidthChange.push(t)},onceMaxTileWidthChange:function(n,t){var i=this;if(null==this.__cbOnMaxTileWidthChange&&null==this.__cbOnceMaxTileWidthChange&&this.willListenMaxTileWidthChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event maxTileWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMaxTileWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMaxTileWidthChange&&(this.__cbOnceOwnerUnbindMaxTileWidthChange=[]),this.__cbOnceOwnerUnbindMaxTileWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMaxTileWidthChange&&(this.__cbOnceOwnerUnbindMaxTileWidthChange=[]),this.__cbOnceOwnerUnbindMaxTileWidthChange.push(null);null==this.__cbOnceMaxTileWidthChange&&(this.__cbOnceMaxTileWidthChange=[]),this.__cbOnceMaxTileWidthChange.push(t)},offMaxTileWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnMaxTileWidthChange&&-1!=(n=this.__cbOnMaxTileWidthChange.indexOf(e))&&(this.__cbOnMaxTileWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMaxTileWidthChange[n])&&s(),this.__cbOnOwnerUnbindMaxTileWidthChange.splice(n,1)),null!=this.__cbOnceMaxTileWidthChange&&-1!=(n=this.__cbOnceMaxTileWidthChange.indexOf(e))&&(this.__cbOnceMaxTileWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMaxTileWidthChange[n])&&s(),this.__cbOnceOwnerUnbindMaxTileWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMaxTileWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindMaxTileWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMaxTileWidthChange[l])&&s()}this.__cbOnOwnerUnbindMaxTileWidthChange=null}if(null!=this.__cbOnceOwnerUnbindMaxTileWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindMaxTileWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMaxTileWidthChange[l])&&s()}this.__cbOnceOwnerUnbindMaxTileWidthChange=null}this.__cbOnMaxTileWidthChange=null,this.__cbOnceMaxTileWidthChange=null}},listensMaxTileWidthChange:function(){return null!=this.__cbOnMaxTileWidthChange&&0<this.__cbOnMaxTileWidthChange.length||null!=this.__cbOnceMaxTileWidthChange&&0<this.__cbOnceMaxTileWidthChange.length},computeMaxTileWidth:function(){var e=-1,n=this.get_layers();if(null!=n)for(var t=0,i=n.length;t<i;){var l=n[t++].get_tileWidth();e<l&&(e=l)}return e},computeAutorunMaxTileWidth:null,computedOnceMaxTileWidth:null,willListenMaxTileHeightChange:function(){this.get_unobservedMaxTileHeight()},get_unobservedMaxTileHeight:function(){var n,t;return 0<=this._lifecycleState?null==this.computeAutorunMaxTileHeight?(n=this,t=new M(null),this.computedOnceMaxTileHeight=!0,(this.computeAutorunMaxTileHeight=t).onRun=function(){var e=n.computeMaxTileHeight();M.unobserve(),n.set_maxTileHeight(e),M.reobserve()},t.onDestroy(this,function(e){n.computeAutorunMaxTileHeight==t&&(n.computeAutorunMaxTileHeight=null),n=t=null}),this.onDestroy(t,function(e){null!=t&&(t.destroy(),t=null),n=null}),t.run()):this.computeAutorunMaxTileHeight.invalidated&&this.computeAutorunMaxTileHeight.run():this.computedOnceMaxTileHeight||(M.unobserve(),this.computedOnceMaxTileHeight=!0,this.unobservedMaxTileHeight=this.computeMaxTileHeight(),M.reobserve()),this.unobservedMaxTileHeight},maxTileHeightAutoruns:null,get_maxTileHeight:function(){var e,n,t=this.get_unobservedMaxTileHeight();return null!=M.current&&(e=M.current,null!=(n=this.maxTileHeightAutoruns)||(n=M.getAutorunArray(),null!=(this.maxTileHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_maxTileHeight:function(e){var n=this.get_unobservedMaxTileHeight();return n!=(this.unobservedMaxTileHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitMaxTileHeightChange(e,n),null!=(n=this.maxTileHeightAutoruns))&&(this.maxTileHeightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateMaxTileHeight:function(){var e=this.get_unobservedMaxTileHeight(),e=(this.emitMaxTileHeightChange(e,e),this.maxTileHeightAutoruns);null!=e&&(this.maxTileHeightAutoruns=null,M.invalidateAutorunArray(e))},unobservedMaxTileHeight:null,__cbOnMaxTileHeightChange:null,__cbOnceMaxTileHeightChange:null,__cbOnOwnerUnbindMaxTileHeightChange:null,__cbOnceOwnerUnbindMaxTileHeightChange:null,emitMaxTileHeightChange:function(e,n){var t=0;if(null!=this.__cbOnMaxTileHeightChange&&(t+=this.__cbOnMaxTileHeightChange.length),null!=this.__cbOnceMaxTileHeightChange&&(t+=this.__cbOnceMaxTileHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMaxTileHeightChange)for(var r=0,a=this.__cbOnMaxTileHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMaxTileHeightChange[h],++s):--t}if(null!=this.__cbOnceMaxTileHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceMaxTileHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMaxTileHeightChange[h],this.__cbOnceMaxTileHeightChange[h]=null,o=this.__cbOnceOwnerUnbindMaxTileHeightChange[h],(this.__cbOnceOwnerUnbindMaxTileHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMaxTileHeightChange[h]),c.push(this.__cbOnceMaxTileHeightChange[h]))}this.__cbOnceOwnerUnbindMaxTileHeightChange=u,this.__cbOnceMaxTileHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMaxTileHeightChange:function(n,t){var i=this;if(null==this.__cbOnMaxTileHeightChange&&null==this.__cbOnceMaxTileHeightChange&&this.willListenMaxTileHeightChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event maxTileHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMaxTileHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMaxTileHeightChange&&(this.__cbOnOwnerUnbindMaxTileHeightChange=[]),this.__cbOnOwnerUnbindMaxTileHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMaxTileHeightChange&&(this.__cbOnOwnerUnbindMaxTileHeightChange=[]),this.__cbOnOwnerUnbindMaxTileHeightChange.push(null);null==this.__cbOnMaxTileHeightChange&&(this.__cbOnMaxTileHeightChange=[]),this.__cbOnMaxTileHeightChange.push(t)},onceMaxTileHeightChange:function(n,t){var i=this;if(null==this.__cbOnMaxTileHeightChange&&null==this.__cbOnceMaxTileHeightChange&&this.willListenMaxTileHeightChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event maxTileHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMaxTileHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMaxTileHeightChange&&(this.__cbOnceOwnerUnbindMaxTileHeightChange=[]),this.__cbOnceOwnerUnbindMaxTileHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMaxTileHeightChange&&(this.__cbOnceOwnerUnbindMaxTileHeightChange=[]),this.__cbOnceOwnerUnbindMaxTileHeightChange.push(null);null==this.__cbOnceMaxTileHeightChange&&(this.__cbOnceMaxTileHeightChange=[]),this.__cbOnceMaxTileHeightChange.push(t)},offMaxTileHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnMaxTileHeightChange&&-1!=(n=this.__cbOnMaxTileHeightChange.indexOf(e))&&(this.__cbOnMaxTileHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMaxTileHeightChange[n])&&s(),this.__cbOnOwnerUnbindMaxTileHeightChange.splice(n,1)),null!=this.__cbOnceMaxTileHeightChange&&-1!=(n=this.__cbOnceMaxTileHeightChange.indexOf(e))&&(this.__cbOnceMaxTileHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMaxTileHeightChange[n])&&s(),this.__cbOnceOwnerUnbindMaxTileHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMaxTileHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindMaxTileHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMaxTileHeightChange[l])&&s()}this.__cbOnOwnerUnbindMaxTileHeightChange=null}if(null!=this.__cbOnceOwnerUnbindMaxTileHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindMaxTileHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMaxTileHeightChange[l])&&s()}this.__cbOnceOwnerUnbindMaxTileHeightChange=null}this.__cbOnMaxTileHeightChange=null,this.__cbOnceMaxTileHeightChange=null}},listensMaxTileHeightChange:function(){return null!=this.__cbOnMaxTileHeightChange&&0<this.__cbOnMaxTileHeightChange.length||null!=this.__cbOnceMaxTileHeightChange&&0<this.__cbOnceMaxTileHeightChange.length},computeMaxTileHeight:function(){var e=-1,n=this.get_layers();if(null!=n)for(var t=0,i=n.length;t<i;){var l=n[t++].get_tileHeight();e<l&&(e=l)}return e},computeAutorunMaxTileHeight:null,computedOnceMaxTileHeight:null,tilesetsAutoruns:null,get_tilesets:function(){var e,n,t=this.unobservedTilesets;return null!=M.current&&(e=M.current,null!=(n=this.tilesetsAutoruns)||(n=M.getAutorunArray(),null!=(this.tilesetsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tilesets:function(e){var n=this.unobservedTilesets;return this.unobservedTilesets=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTilesetsChange(e,n),null!=(n=this.tilesetsAutoruns)&&(this.tilesetsAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateTilesets:function(){var e=this.unobservedTilesets,e=(this.emitTilesetsChange(e,e),this.tilesetsAutoruns);null!=e&&(this.tilesetsAutoruns=null,M.invalidateAutorunArray(e))},unobservedTilesets:null,__cbOnTilesetsChange:null,__cbOnceTilesetsChange:null,__cbOnOwnerUnbindTilesetsChange:null,__cbOnceOwnerUnbindTilesetsChange:null,emitTilesetsChange:function(e,n){var t=0;if(null!=this.__cbOnTilesetsChange&&(t+=this.__cbOnTilesetsChange.length),null!=this.__cbOnceTilesetsChange&&(t+=this.__cbOnceTilesetsChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTilesetsChange)for(var r=0,a=this.__cbOnTilesetsChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTilesetsChange[h],++s):--t}if(null!=this.__cbOnceTilesetsChange){for(var u=null,c=null,r=0,a=this.__cbOnceTilesetsChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTilesetsChange[h],this.__cbOnceTilesetsChange[h]=null,o=this.__cbOnceOwnerUnbindTilesetsChange[h],(this.__cbOnceOwnerUnbindTilesetsChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTilesetsChange[h]),c.push(this.__cbOnceTilesetsChange[h]))}this.__cbOnceOwnerUnbindTilesetsChange=u,this.__cbOnceTilesetsChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTilesetsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesetsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesetsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTilesetsChange&&(this.__cbOnOwnerUnbindTilesetsChange=[]),this.__cbOnOwnerUnbindTilesetsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTilesetsChange&&(this.__cbOnOwnerUnbindTilesetsChange=[]),this.__cbOnOwnerUnbindTilesetsChange.push(null);null==this.__cbOnTilesetsChange&&(this.__cbOnTilesetsChange=[]),this.__cbOnTilesetsChange.push(t)},onceTilesetsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesetsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesetsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTilesetsChange&&(this.__cbOnceOwnerUnbindTilesetsChange=[]),this.__cbOnceOwnerUnbindTilesetsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTilesetsChange&&(this.__cbOnceOwnerUnbindTilesetsChange=[]),this.__cbOnceOwnerUnbindTilesetsChange.push(null);null==this.__cbOnceTilesetsChange&&(this.__cbOnceTilesetsChange=[]),this.__cbOnceTilesetsChange.push(t)},offTilesetsChange:function(e){if(null!=e){var n;null!=this.__cbOnTilesetsChange&&-1!=(n=this.__cbOnTilesetsChange.indexOf(e))&&(this.__cbOnTilesetsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTilesetsChange[n])&&s(),this.__cbOnOwnerUnbindTilesetsChange.splice(n,1)),null!=this.__cbOnceTilesetsChange&&-1!=(n=this.__cbOnceTilesetsChange.indexOf(e))&&(this.__cbOnceTilesetsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTilesetsChange[n])&&s(),this.__cbOnceOwnerUnbindTilesetsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTilesetsChange){for(var t=0,i=this.__cbOnOwnerUnbindTilesetsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTilesetsChange[l])&&s()}this.__cbOnOwnerUnbindTilesetsChange=null}if(null!=this.__cbOnceOwnerUnbindTilesetsChange){for(t=0,i=this.__cbOnceOwnerUnbindTilesetsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTilesetsChange[l])&&s()}this.__cbOnceOwnerUnbindTilesetsChange=null}this.__cbOnTilesetsChange=null,this.__cbOnceTilesetsChange=null}},listensTilesetsChange:function(){return null!=this.__cbOnTilesetsChange&&0<this.__cbOnTilesetsChange.length||null!=this.__cbOnceTilesetsChange&&0<this.__cbOnceTilesetsChange.length},layersAutoruns:null,get_layers:function(){var e,n,t=this.unobservedLayers;return null!=M.current&&(e=M.current,null!=(n=this.layersAutoruns)||(n=M.getAutorunArray(),null!=(this.layersAutoruns=n)))&&e.bindToAutorunArray(n),t},set_layers:function(e){var n=this.unobservedLayers;return this.unobservedLayers=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitLayersChange(e,n),null!=(n=this.layersAutoruns)&&(this.layersAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateLayers:function(){var e=this.unobservedLayers,e=(this.emitLayersChange(e,e),this.layersAutoruns);null!=e&&(this.layersAutoruns=null,M.invalidateAutorunArray(e))},unobservedLayers:null,__cbOnLayersChange:null,__cbOnceLayersChange:null,__cbOnOwnerUnbindLayersChange:null,__cbOnceOwnerUnbindLayersChange:null,emitLayersChange:function(e,n){var t=0;if(null!=this.__cbOnLayersChange&&(t+=this.__cbOnLayersChange.length),null!=this.__cbOnceLayersChange&&(t+=this.__cbOnceLayersChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnLayersChange)for(var r=0,a=this.__cbOnLayersChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnLayersChange[h],++s):--t}if(null!=this.__cbOnceLayersChange){for(var u=null,c=null,r=0,a=this.__cbOnceLayersChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceLayersChange[h],this.__cbOnceLayersChange[h]=null,o=this.__cbOnceOwnerUnbindLayersChange[h],(this.__cbOnceOwnerUnbindLayersChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindLayersChange[h]),c.push(this.__cbOnceLayersChange[h]))}this.__cbOnceOwnerUnbindLayersChange=u,this.__cbOnceLayersChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onLayersChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event layersChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLayersChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindLayersChange&&(this.__cbOnOwnerUnbindLayersChange=[]),this.__cbOnOwnerUnbindLayersChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindLayersChange&&(this.__cbOnOwnerUnbindLayersChange=[]),this.__cbOnOwnerUnbindLayersChange.push(null);null==this.__cbOnLayersChange&&(this.__cbOnLayersChange=[]),this.__cbOnLayersChange.push(t)},onceLayersChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event layersChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLayersChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindLayersChange&&(this.__cbOnceOwnerUnbindLayersChange=[]),this.__cbOnceOwnerUnbindLayersChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindLayersChange&&(this.__cbOnceOwnerUnbindLayersChange=[]),this.__cbOnceOwnerUnbindLayersChange.push(null);null==this.__cbOnceLayersChange&&(this.__cbOnceLayersChange=[]),this.__cbOnceLayersChange.push(t)},offLayersChange:function(e){if(null!=e){var n;null!=this.__cbOnLayersChange&&-1!=(n=this.__cbOnLayersChange.indexOf(e))&&(this.__cbOnLayersChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindLayersChange[n])&&s(),this.__cbOnOwnerUnbindLayersChange.splice(n,1)),null!=this.__cbOnceLayersChange&&-1!=(n=this.__cbOnceLayersChange.indexOf(e))&&(this.__cbOnceLayersChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindLayersChange[n])&&s(),this.__cbOnceOwnerUnbindLayersChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindLayersChange){for(var t=0,i=this.__cbOnOwnerUnbindLayersChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindLayersChange[l])&&s()}this.__cbOnOwnerUnbindLayersChange=null}if(null!=this.__cbOnceOwnerUnbindLayersChange){for(t=0,i=this.__cbOnceOwnerUnbindLayersChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindLayersChange[l])&&s()}this.__cbOnceOwnerUnbindLayersChange=null}this.__cbOnLayersChange=null,this.__cbOnceLayersChange=null}},listensLayersChange:function(){return null!=this.__cbOnLayersChange&&0<this.__cbOnLayersChange.length||null!=this.__cbOnceLayersChange&&0<this.__cbOnceLayersChange.length},asset:null,destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,tc.prototype.destroy.call(this),null!=this.asset&&(this.asset.destroy(),this.asset=null);for(var e=0,n=this.get_layers().length;e<n;){var t=e++;this.get_layers()[t].destroy()}this.set_layers(null)}},tilesetForGid:function(e){for(var n=this.get_tilesets().length-1,t=null;0<=n;){var i=this.get_tilesets()[n];if(e>=i.get_firstGid()){t=i;break}--n}return t},layer:function(e){for(var n=this.get_layers(),t=0,i=n.length;t<i;){var l=n[t++];if(l.get_name()==e)return l}return null},setTexturesFilter:function(e){for(var n=0,t=this.get_tilesets().length;n<t;){var i=n++,i=this.get_tilesets()[i];null!=i.get_image()&&null!=i.get_image().texture&&i.get_image().texture.set_filter(e)}},size:function(e,n){this.set_width(e),this.set_height(n)},tileset:function(e){for(var n=0,t=this.get_tilesets().length;n<t;){var i=n++,i=this.get_tilesets()[i];if(i.get_name()==e)return i}return null},toString:function(){var e=this.get_orientation(),n=this.get_width(),t=this.get_height(),i=this.get_renderOrder(),l=this.get_hexSideLength(),s=this.get_staggerAxis(),r=this.get_staggerIndex(),a=this.get_backgroundColor();return""+V.string({orientation:e,width:n,height:t,renderOrder:i,hexSideLength:l,staggerAxis:s,staggerIndex:r,backgroundColor:-1==a?"NONE":"0x"+B.hex(a>>24&255,2)+B.hex(a>>16&255,2)+B.hex(a>>8&255,2)+B.hex(255&a,2),tilesets:this.get_tilesets(),layers:this.get_layers()})},unbindEvents:function(){tc.prototype.unbindEvents.call(this),this.offLdtkLevelChange(),this.offNameChange(),this.offOrientationChange(),this.offWidthChange(),this.offHeightChange(),this.offRenderOrderChange(),this.offHexSideLengthChange(),this.offStaggerAxisChange(),this.offStaggerIndexChange(),this.offBackgroundColorChange(),this.offMaxTileWidthChange(),this.offMaxTileHeightChange(),this.offTilesetsChange(),this.offLayersChange()},_default_ldtkLevelAutoruns:function(){return null},_default_ldtkLevel:function(){return null},_default_nameAutoruns:function(){return null},_default_name:function(){return null},_default_orientationAutoruns:function(){return null},_default_orientation:function(){return di.ORTHOGONAL},_default_widthAutoruns:function(){return null},_default_width:function(){return-1},_default_heightAutoruns:function(){return null},_default_height:function(){return-1},_default_renderOrderAutoruns:function(){return null},_default_renderOrder:function(){return Oi.RIGHT_DOWN},_default_hexSideLengthAutoruns:function(){return null},_default_hexSideLength:function(){return-1},_default_staggerAxisAutoruns:function(){return null},_default_staggerAxis:function(){return fi.AXIS_X},_default_staggerIndexAutoruns:function(){return null},_default_staggerIndex:function(){return pi.ODD},_default_backgroundColorAutoruns:function(){return null},_default_backgroundColor:function(){var e=0,n=-1;return n&16777215|(255<(e=null==e?255:e)?255:e<0?0:e)<<24},_default_maxTileWidthAutoruns:function(){return null},_default_computedOnceMaxTileWidth:function(){return!1},_default_maxTileHeightAutoruns:function(){return null},_default_computedOnceMaxTileHeight:function(){return!1},_default_tilesetsAutoruns:function(){return null},_default_tilesets:function(){return[]},_default_layersAutoruns:function(){return null},_default_layers:function(){return[]},__class__:uc,__properties__:$extend(tc.prototype.__properties__,{set_layers:"set_layers",get_layers:"get_layers",set_tilesets:"set_tilesets",get_tilesets:"get_tilesets",get_unobservedMaxTileHeight:"get_unobservedMaxTileHeight",set_maxTileHeight:"set_maxTileHeight",get_maxTileHeight:"get_maxTileHeight",get_unobservedMaxTileWidth:"get_unobservedMaxTileWidth",set_maxTileWidth:"set_maxTileWidth",get_maxTileWidth:"get_maxTileWidth",set_backgroundColor:"set_backgroundColor",get_backgroundColor:"get_backgroundColor",set_staggerIndex:"set_staggerIndex",get_staggerIndex:"get_staggerIndex",set_staggerAxis:"set_staggerAxis",get_staggerAxis:"get_staggerAxis",set_hexSideLength:"set_hexSideLength",get_hexSideLength:"get_hexSideLength",set_renderOrder:"set_renderOrder",get_renderOrder:"get_renderOrder",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_orientation:"set_orientation",get_orientation:"get_orientation",set_name:"set_name",get_name:"get_name",set_ldtkLevel:"set_ldtkLevel",get_ldtkLevel:"get_ldtkLevel"})}),function(){this.tileQuadMapping=new rn,this.tilesFilter=null,this.autoSizeTilesFilter=!0,this.destroyTilesFilterOnRemove=!0,this.tilesColor=16777215,this.tileQuads=[],this.tileScale=1,this.layerData=null,this.tilemap=null,q.call(this)});(L["ceramic.TilemapLayer"]=_i).__name__="ceramic.TilemapLayer",_i.__super__=q,_i.prototype=$extend(q.prototype,{__cbOnTileQuadsChange:null,__cbOnceTileQuadsChange:null,__cbOnOwnerUnbindTileQuadsChange:null,__cbOnceOwnerUnbindTileQuadsChange:null,emitTileQuadsChange:function(){var e=0;if(null!=this.__cbOnTileQuadsChange&&(e+=this.__cbOnTileQuadsChange.length),null!=this.__cbOnceTileQuadsChange&&(e+=this.__cbOnceTileQuadsChange.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnTileQuadsChange)for(var l=0,s=this.__cbOnTileQuadsChange.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnTileQuadsChange[r],++i):--e}if(null!=this.__cbOnceTileQuadsChange){for(var a=null,h=null,l=0,s=this.__cbOnceTileQuadsChange.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceTileQuadsChange[r],this.__cbOnceTileQuadsChange[r]=null,u=this.__cbOnceOwnerUnbindTileQuadsChange[r],(this.__cbOnceOwnerUnbindTileQuadsChange[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindTileQuadsChange[r]),h.push(this.__cbOnceTileQuadsChange[r]))}this.__cbOnceOwnerUnbindTileQuadsChange=a,this.__cbOnceTileQuadsChange=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onTileQuadsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileQuadsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileQuadsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTileQuadsChange&&(this.__cbOnOwnerUnbindTileQuadsChange=[]),this.__cbOnOwnerUnbindTileQuadsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTileQuadsChange&&(this.__cbOnOwnerUnbindTileQuadsChange=[]),this.__cbOnOwnerUnbindTileQuadsChange.push(null);null==this.__cbOnTileQuadsChange&&(this.__cbOnTileQuadsChange=[]),this.__cbOnTileQuadsChange.push(t)},onceTileQuadsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileQuadsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileQuadsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTileQuadsChange&&(this.__cbOnceOwnerUnbindTileQuadsChange=[]),this.__cbOnceOwnerUnbindTileQuadsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTileQuadsChange&&(this.__cbOnceOwnerUnbindTileQuadsChange=[]),this.__cbOnceOwnerUnbindTileQuadsChange.push(null);null==this.__cbOnceTileQuadsChange&&(this.__cbOnceTileQuadsChange=[]),this.__cbOnceTileQuadsChange.push(t)},offTileQuadsChange:function(e){if(null!=e){var n;null!=this.__cbOnTileQuadsChange&&-1!=(n=this.__cbOnTileQuadsChange.indexOf(e))&&(this.__cbOnTileQuadsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTileQuadsChange[n])&&s(),this.__cbOnOwnerUnbindTileQuadsChange.splice(n,1)),null!=this.__cbOnceTileQuadsChange&&-1!=(n=this.__cbOnceTileQuadsChange.indexOf(e))&&(this.__cbOnceTileQuadsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTileQuadsChange[n])&&s(),this.__cbOnceOwnerUnbindTileQuadsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTileQuadsChange){for(var t=0,i=this.__cbOnOwnerUnbindTileQuadsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTileQuadsChange[l])&&s()}this.__cbOnOwnerUnbindTileQuadsChange=null}if(null!=this.__cbOnceOwnerUnbindTileQuadsChange){for(t=0,i=this.__cbOnceOwnerUnbindTileQuadsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTileQuadsChange[l])&&s()}this.__cbOnceOwnerUnbindTileQuadsChange=null}this.__cbOnTileQuadsChange=null,this.__cbOnceTileQuadsChange=null}},listensTileQuadsChange:function(){return null!=this.__cbOnTileQuadsChange&&0<this.__cbOnTileQuadsChange.length||null!=this.__cbOnceTileQuadsChange&&0<this.__cbOnceTileQuadsChange.length},tilemap:null,layerData:null,set_layerData:function(e){return this.layerData!=e&&(this.layerData=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},tileScale:null,set_tileScale:function(e){return this.tileScale!=e&&(this.tileScale=e,this.contentDirty=!0,he.app.visualsContentDirty=!0),e},tileQuads:null,tilesColor:null,set_tilesColor:function(e){if(this.tilesColor!=e){this.tilesColor=e;for(var n=null!=this.layerData?this.layerData.get_color():16777215,t=(e>>8&255)/255*((n>>8&255)/255),i=(255&e)/255*((255&n)/255),l=0,n=(l=l&65535|(255<(n=Math.round(255*((e>>16&255)/255*((n>>16&255)/255))))?255:n<0?0:n)<<16,Math.round(255*t)),n=(l=l&16711935|(255<n?255:n<0?0:n)<<8,Math.round(255*i)),s=l=l&16776960|(255<n?255:n<0?0:n),r=0,a=this.tileQuads.length;r<a;){var h=r++;this.tileQuads[h].color=s}}return e},destroyTilesFilterOnRemove:null,autoSizeTilesFilter:null,tilesFilter:null,set_tilesFilter:function(e){if(this.tilesFilter!=e){if(null!=this.tilesFilter){for(var n=this.tilesFilter.content,t=0,i=this.tileQuads.length;t<i;){var l=t++;(s=this.tileQuads[l]).parent==n&&n.remove(s)}this.destroyTilesFilterOnRemove?this.tilesFilter.destroy():this.tilesFilter.parent==this&&this.remove(this.tilesFilter),this.tilesFilter=null}if(null!=(this.tilesFilter=e)){for(n=e.content,t=0,i=this.tileQuads.length;t<i;){var l=t++,s=this.tileQuads[l];n.add(s)}this.add(e)}else for(t=0,i=this.tileQuads.length;t<i;){l=t++,s=this.tileQuads[l];this.add(s)}this.contentDirty=!0,he.app.visualsContentDirty=!0}return e},tileQuadMapping:null,get_width:function(){return this.contentDirty&&this.computeContent(),q.prototype.get_width.call(this)},get_height:function(){return this.contentDirty&&this.computeContent(),q.prototype.get_height.call(this)},computeContent:function(){var e,n;null==this.layerData?(this.set_width(0),this.set_height(0)):(n=(e=this.tilemap).tilemapData,this.computePosAndSize(),this.computeTileQuads(e,n)),this.contentDirty=!1},computePosAndSize:function(){var e=this.layerData,n=e.get_x()*e.get_tileWidth()+e.get_offsetX(),t=e.get_y()*e.get_tileHeight()+e.get_offsetY(),n=(this.set_x(n),this.set_y(t),e.get_columns()*e.get_tileWidth()),t=e.get_rows()*e.get_tileHeight();this.set_width(n),this.set_height(t)},computeTileQuads:function(e,n){var t=0,P=e.roundTilesTranslation,i=this.layerData;if(i.get_shouldRenderTiles()&&i.get_hasTiles()){var l=this._width,s=this._height,r=i.get_columns(),a=i.get_rows(),h=!1,u=e.clipTilesX,c=e.clipTilesY,o=e.clipTilesWidth,e=e.clipTilesHeight,_=(-1==u&&-1==c&&-1==o&&-1==e||(h=!0),0),d=0,b=1,g=r;switch(n.get_renderOrder()._hx_index){case 0:break;case 1:d=r*(a-1),g=-r;break;case 2:_=r-1,b=-1;break;case 3:_=r-1,b=-1,d=r*(a-1),g=-r}var O,f=i.get_offsetX()+i.get_x()*i.get_tileWidth(),p=i.get_offsetY()+i.get_y()*i.get_tileHeight(),m=0,w=0;if(null!=this.tilesFilter&&(l=l,s=s,h?(m=Math.floor(u/i.get_tileWidth())*i.get_tileWidth()-f,w=Math.floor(c/i.get_tileHeight())*i.get_tileHeight()-p,(O=this.tilesFilter).set_x(m),O.set_y(w),l=Math.ceil(o/i.get_tileWidth())*i.get_tileWidth()+i.get_tileWidth(),s=Math.ceil(e/i.get_tileHeight())*i.get_tileHeight()+i.get_tileHeight()):((O=this.tilesFilter).set_x(0),O.set_y(0)),this.autoSizeTilesFilter)&&0<l&&0<s&&((O=this.tilesFilter).set_width(l),O.set_height(s)),i.get_visible()){var v=i.get_computedTiles(),y=i.get_computedTilesAlpha(),C=i.get_computedTilesOffsetX(),U=i.get_computedTilesOffsetY();if(null==v&&(v=i.get_tiles(),y=i.get_tilesAlpha(),C=i.get_tilesOffsetX(),U=i.get_tilesOffsetY()),null!=v)for(var l=0,B=r-1,L=0,N=a-1,W=r*a,G=(h&&(l=Math.floor((u-f)/i.get_tileWidth()),B=Math.ceil((u+o-f)/i.get_tileWidth()),L=Math.floor((c-p)/i.get_tileHeight()),N=Math.ceil((c+e-p)/i.get_tileHeight())),v.length),H=l;H<=B;){for(var z=L;z<=N;){var x=z*r+H;if(x<0||G<=x);else for(;x<G;){var T=v[x];if(0==T);else{for(var K=536870911&T,X=n.get_tilesets().length-1,Y=null;0<=X;){var V=n.get_tilesets()[X];if(K>=V.get_firstGid()){Y=V;break}--X}var D=Y;if(null!=D&&null!=D.get_image()&&0<D.get_columns()){var q=K-D.get_firstGid(),j=x%r,A=Math.floor(x/r),Q=0,S=i.get_color(),E=this.tilesColor,M=(S>>8&255)/255*((E>>8&255)/255),$=(255&S)/255*((255&E)/255),k=0,S=Math.round(255*((S>>16&255)/255*((E>>16&255)/255))),E=(k=k&65535|(255<S?255:S<0?0:S)<<16,Math.round(255*M)),S=(k=k&16711935|(255<E?255:E<0?0:E)<<8,Math.round(255*$)),M=k=k&16776960|(255<S?255:S<0?0:S),E=i.get_opacity(),$=i.get_blending();for(a<=A&&(A-=a,Q+=.1,$=i.get_extraBlending(),E=i.get_extraOpacity());a<=A;)A-=a,Q+=.1;null!=y&&(E*=y[x]);var I,S=j*D.get_tileWidth(),k=(null!=C&&(S+=C[x]),A*D.get_tileWidth()),Z=(null!=U&&(k+=U[x]),D.get_tileWidth()),J=D.get_tileHeight();if(null==(I=t<this.tileQuads.length?this.tileQuads[t]:null)){if((I=gi.get()).set_anchorX(.5),I.set_anchorY(.5),1!=I.inheritAlpha&&(I.inheritAlpha=!0,I.visibilityDirty=!0,null!=I.children))for(var ee=0,ne=I.children.length;ee<ne;){var te=ee++,R=I.children[te];if(R.visibilityDirty=!0,null!=R.children)for(var ie=0,le=R.children.length;ie<le;){var se=ie++;R.children[se].set_visibilityDirty(!0)}}this.tileQuads.push(I),(null!=this.tilesFilter?this.tilesFilter.content:this).add(I)}++t,-1!=I.index&&I.index!=x&&(null!=(F=this.tileQuadMapping.intMap.h[0|I.index])?F:0)==t&&this.tileQuadMapping.set(I.index,0),this.tileQuadMapping.set(x,t),I.tilemapTile=T,I.set_roundTranslation(P),I.color=M,I.index=x,I.column=j,I.row=A,I.set_alpha(E),I.set_blending($),I.set_visible(!0);var F=D.get_image().texture,M=(I._texture!=F&&I._set_texture(F),I.frameX=q%D.get_columns()*(D.get_tileWidth()+2*D.get_margin()+D.get_spacing())+D.get_margin(),I.frameY=Math.floor(q/D.get_columns())*(D.get_tileHeight()+2*D.get_margin()+D.get_spacing())+D.get_margin(),D.get_tileWidth()),E=(I.frameWidth!=M&&-1!=(I.frameWidth=M)&&I.set_width(M),D.get_tileHeight());I.frameHeight!=E&&-1!=(I.frameHeight=E)&&I.set_height(E),I.set_depth(_+j*b+d+A*g+Q),I.set_x(.5*Z+S-m),I.set_y(.5*J+k-w),0!=(536870912&T)?(0!=(1073741824&T)?I.set_scaleX(-1*this.tileScale):I.set_scaleX(this.tileScale),0!=(-2147483648&T)?I.set_scaleY(this.tileScale):I.set_scaleY(-1*this.tileScale),I.flags|=32):(0!=(-2147483648&T)?I.set_scaleX(-1*this.tileScale):I.set_scaleX(this.tileScale),0!=(1073741824&T)?I.set_scaleY(-1*this.tileScale):I.set_scaleY(this.tileScale),I.flags&=-33)}}x+=W}++z}++H}}}for(;t<this.tileQuads.length;)(I=this.tileQuads.pop()).recycle();this.emitTileQuadsChange()},tileQuadByColumnAndRow:function(e,n){n=n*this.layerData.get_columns()+e,e=this.tileQuadMapping.intMap.h[0|n],n=null!=e?e:0;return-1!=n?this.tileQuads[n-1]:null},tileQuadByIndex:function(e){e=this.tileQuadMapping.intMap.h[0|e],e=null!=e?e:0;return-1!=e?this.tileQuads[e-1]:null},surroundingTileQuads:function(e,n,t,i,l){if(null==l&&(l=[]),null!=this.parent)for(var s=this.layerData,r=s.get_tileWidth(),s=s.get_tileHeight(),e=Math.floor(e/r),a=Math.ceil(t/r),h=Math.floor(n/s),u=Math.ceil(i/s),c=e;c<=a;){for(var o=h;o<=u;){var _=o*this.layerData.get_columns()+c,_=this.tileQuadMapping.intMap.h[0|_],_=null!=_?_:0,_=-1!=_?this.tileQuads[_-1]:null;null!=_&&l.push(_),++o}++c}return l},unbindEvents:function(){q.prototype.unbindEvents.call(this),this.offTileQuadsChange()},__class__:_i,__properties__:$extend(q.prototype.__properties__,{set_tilesFilter:"set_tilesFilter",set_tilesColor:"set_tilesColor",set_tileScale:"set_tileScale",set_layerData:"set_layerData"})}),(L["ceramic.TilemapLayerData"]=wc).__name__="ceramic.TilemapLayerData",wc.__super__=tc,wc.prototype=$extend(tc.prototype,{ldtkLayerAutoruns:null,get_ldtkLayer:function(){var e,n,t=this.unobservedLdtkLayer;return null!=M.current&&(e=M.current,null!=(n=this.ldtkLayerAutoruns)||(n=M.getAutorunArray(),null!=(this.ldtkLayerAutoruns=n)))&&e.bindToAutorunArray(n),t},set_ldtkLayer:function(e){var n=this.unobservedLdtkLayer;return n!=(this.unobservedLdtkLayer=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitLdtkLayerChange(e,n),null!=(n=this.ldtkLayerAutoruns))&&(this.ldtkLayerAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateLdtkLayer:function(){var e=this.unobservedLdtkLayer,e=(this.emitLdtkLayerChange(e,e),this.ldtkLayerAutoruns);null!=e&&(this.ldtkLayerAutoruns=null,M.invalidateAutorunArray(e))},unobservedLdtkLayer:null,__cbOnLdtkLayerChange:null,__cbOnceLdtkLayerChange:null,__cbOnOwnerUnbindLdtkLayerChange:null,__cbOnceOwnerUnbindLdtkLayerChange:null,emitLdtkLayerChange:function(e,n){var t=0;if(null!=this.__cbOnLdtkLayerChange&&(t+=this.__cbOnLdtkLayerChange.length),null!=this.__cbOnceLdtkLayerChange&&(t+=this.__cbOnceLdtkLayerChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnLdtkLayerChange)for(var r=0,a=this.__cbOnLdtkLayerChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnLdtkLayerChange[h],++s):--t}if(null!=this.__cbOnceLdtkLayerChange){for(var u=null,c=null,r=0,a=this.__cbOnceLdtkLayerChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceLdtkLayerChange[h],this.__cbOnceLdtkLayerChange[h]=null,o=this.__cbOnceOwnerUnbindLdtkLayerChange[h],(this.__cbOnceOwnerUnbindLdtkLayerChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindLdtkLayerChange[h]),c.push(this.__cbOnceLdtkLayerChange[h]))}this.__cbOnceOwnerUnbindLdtkLayerChange=u,this.__cbOnceLdtkLayerChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onLdtkLayerChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkLayerChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkLayerChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindLdtkLayerChange&&(this.__cbOnOwnerUnbindLdtkLayerChange=[]),this.__cbOnOwnerUnbindLdtkLayerChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindLdtkLayerChange&&(this.__cbOnOwnerUnbindLdtkLayerChange=[]),this.__cbOnOwnerUnbindLdtkLayerChange.push(null);null==this.__cbOnLdtkLayerChange&&(this.__cbOnLdtkLayerChange=[]),this.__cbOnLdtkLayerChange.push(t)},onceLdtkLayerChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkLayerChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkLayerChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindLdtkLayerChange&&(this.__cbOnceOwnerUnbindLdtkLayerChange=[]),this.__cbOnceOwnerUnbindLdtkLayerChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindLdtkLayerChange&&(this.__cbOnceOwnerUnbindLdtkLayerChange=[]),this.__cbOnceOwnerUnbindLdtkLayerChange.push(null);null==this.__cbOnceLdtkLayerChange&&(this.__cbOnceLdtkLayerChange=[]),this.__cbOnceLdtkLayerChange.push(t)},offLdtkLayerChange:function(e){if(null!=e){var n;null!=this.__cbOnLdtkLayerChange&&-1!=(n=this.__cbOnLdtkLayerChange.indexOf(e))&&(this.__cbOnLdtkLayerChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindLdtkLayerChange[n])&&s(),this.__cbOnOwnerUnbindLdtkLayerChange.splice(n,1)),null!=this.__cbOnceLdtkLayerChange&&-1!=(n=this.__cbOnceLdtkLayerChange.indexOf(e))&&(this.__cbOnceLdtkLayerChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindLdtkLayerChange[n])&&s(),this.__cbOnceOwnerUnbindLdtkLayerChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindLdtkLayerChange){for(var t=0,i=this.__cbOnOwnerUnbindLdtkLayerChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindLdtkLayerChange[l])&&s()}this.__cbOnOwnerUnbindLdtkLayerChange=null}if(null!=this.__cbOnceOwnerUnbindLdtkLayerChange){for(t=0,i=this.__cbOnceOwnerUnbindLdtkLayerChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindLdtkLayerChange[l])&&s()}this.__cbOnceOwnerUnbindLdtkLayerChange=null}this.__cbOnLdtkLayerChange=null,this.__cbOnceLdtkLayerChange=null}},listensLdtkLayerChange:function(){return null!=this.__cbOnLdtkLayerChange&&0<this.__cbOnLdtkLayerChange.length||null!=this.__cbOnceLdtkLayerChange&&0<this.__cbOnceLdtkLayerChange.length},nameAutoruns:null,get_name:function(){var e,n,t=this.unobservedName;return null!=M.current&&(e=M.current,null!=(n=this.nameAutoruns)||(n=M.getAutorunArray(),null!=(this.nameAutoruns=n)))&&e.bindToAutorunArray(n),t},set_name:function(e){var n=this.unobservedName;return n!=(this.unobservedName=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitNameChange(e,n),null!=(n=this.nameAutoruns))&&(this.nameAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateName:function(){var e=this.unobservedName,e=(this.emitNameChange(e,e),this.nameAutoruns);null!=e&&(this.nameAutoruns=null,M.invalidateAutorunArray(e))},unobservedName:null,__cbOnNameChange:null,__cbOnceNameChange:null,__cbOnOwnerUnbindNameChange:null,__cbOnceOwnerUnbindNameChange:null,emitNameChange:function(e,n){var t=0;if(null!=this.__cbOnNameChange&&(t+=this.__cbOnNameChange.length),null!=this.__cbOnceNameChange&&(t+=this.__cbOnceNameChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnNameChange)for(var r=0,a=this.__cbOnNameChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnNameChange[h],++s):--t}if(null!=this.__cbOnceNameChange){for(var u=null,c=null,r=0,a=this.__cbOnceNameChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceNameChange[h],this.__cbOnceNameChange[h]=null,o=this.__cbOnceOwnerUnbindNameChange[h],(this.__cbOnceOwnerUnbindNameChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindNameChange[h]),c.push(this.__cbOnceNameChange[h]))}this.__cbOnceOwnerUnbindNameChange=u,this.__cbOnceNameChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(null);null==this.__cbOnNameChange&&(this.__cbOnNameChange=[]),this.__cbOnNameChange.push(t)},onceNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(null);null==this.__cbOnceNameChange&&(this.__cbOnceNameChange=[]),this.__cbOnceNameChange.push(t)},offNameChange:function(e){if(null!=e){var n;null!=this.__cbOnNameChange&&-1!=(n=this.__cbOnNameChange.indexOf(e))&&(this.__cbOnNameChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindNameChange[n])&&s(),this.__cbOnOwnerUnbindNameChange.splice(n,1)),null!=this.__cbOnceNameChange&&-1!=(n=this.__cbOnceNameChange.indexOf(e))&&(this.__cbOnceNameChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindNameChange[n])&&s(),this.__cbOnceOwnerUnbindNameChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindNameChange){for(var t=0,i=this.__cbOnOwnerUnbindNameChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindNameChange[l])&&s()}this.__cbOnOwnerUnbindNameChange=null}if(null!=this.__cbOnceOwnerUnbindNameChange){for(t=0,i=this.__cbOnceOwnerUnbindNameChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindNameChange[l])&&s()}this.__cbOnceOwnerUnbindNameChange=null}this.__cbOnNameChange=null,this.__cbOnceNameChange=null}},listensNameChange:function(){return null!=this.__cbOnNameChange&&0<this.__cbOnNameChange.length||null!=this.__cbOnceNameChange&&0<this.__cbOnceNameChange.length},xAutoruns:null,get_x:function(){var e,n,t=this.unobservedX;return null!=M.current&&(e=M.current,null!=(n=this.xAutoruns)||(n=M.getAutorunArray(),null!=(this.xAutoruns=n)))&&e.bindToAutorunArray(n),t},set_x:function(e){var n=this.unobservedX;return n!=(this.unobservedX=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitXChange(e,n),null!=(n=this.xAutoruns))&&(this.xAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateX:function(){var e=this.unobservedX,e=(this.emitXChange(e,e),this.xAutoruns);null!=e&&(this.xAutoruns=null,M.invalidateAutorunArray(e))},unobservedX:null,__cbOnXChange:null,__cbOnceXChange:null,__cbOnOwnerUnbindXChange:null,__cbOnceOwnerUnbindXChange:null,emitXChange:function(e,n){var t=0;if(null!=this.__cbOnXChange&&(t+=this.__cbOnXChange.length),null!=this.__cbOnceXChange&&(t+=this.__cbOnceXChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnXChange)for(var r=0,a=this.__cbOnXChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnXChange[h],++s):--t}if(null!=this.__cbOnceXChange){for(var u=null,c=null,r=0,a=this.__cbOnceXChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceXChange[h],this.__cbOnceXChange[h]=null,o=this.__cbOnceOwnerUnbindXChange[h],(this.__cbOnceOwnerUnbindXChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindXChange[h]),c.push(this.__cbOnceXChange[h]))}this.__cbOnceOwnerUnbindXChange=u,this.__cbOnceXChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event xChange because owner is destroyed!");var l=function(e){null!=t&&(i.offXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindXChange&&(this.__cbOnOwnerUnbindXChange=[]),this.__cbOnOwnerUnbindXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindXChange&&(this.__cbOnOwnerUnbindXChange=[]),this.__cbOnOwnerUnbindXChange.push(null);null==this.__cbOnXChange&&(this.__cbOnXChange=[]),this.__cbOnXChange.push(t)},onceXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event xChange because owner is destroyed!");var l=function(e){null!=t&&(i.offXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindXChange&&(this.__cbOnceOwnerUnbindXChange=[]),this.__cbOnceOwnerUnbindXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindXChange&&(this.__cbOnceOwnerUnbindXChange=[]),this.__cbOnceOwnerUnbindXChange.push(null);null==this.__cbOnceXChange&&(this.__cbOnceXChange=[]),this.__cbOnceXChange.push(t)},offXChange:function(e){if(null!=e){var n;null!=this.__cbOnXChange&&-1!=(n=this.__cbOnXChange.indexOf(e))&&(this.__cbOnXChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindXChange[n])&&s(),this.__cbOnOwnerUnbindXChange.splice(n,1)),null!=this.__cbOnceXChange&&-1!=(n=this.__cbOnceXChange.indexOf(e))&&(this.__cbOnceXChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindXChange[n])&&s(),this.__cbOnceOwnerUnbindXChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindXChange){for(var t=0,i=this.__cbOnOwnerUnbindXChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindXChange[l])&&s()}this.__cbOnOwnerUnbindXChange=null}if(null!=this.__cbOnceOwnerUnbindXChange){for(t=0,i=this.__cbOnceOwnerUnbindXChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindXChange[l])&&s()}this.__cbOnceOwnerUnbindXChange=null}this.__cbOnXChange=null,this.__cbOnceXChange=null}},listensXChange:function(){return null!=this.__cbOnXChange&&0<this.__cbOnXChange.length||null!=this.__cbOnceXChange&&0<this.__cbOnceXChange.length},yAutoruns:null,get_y:function(){var e,n,t=this.unobservedY;return null!=M.current&&(e=M.current,null!=(n=this.yAutoruns)||(n=M.getAutorunArray(),null!=(this.yAutoruns=n)))&&e.bindToAutorunArray(n),t},set_y:function(e){var n=this.unobservedY;return n!=(this.unobservedY=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitYChange(e,n),null!=(n=this.yAutoruns))&&(this.yAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateY:function(){var e=this.unobservedY,e=(this.emitYChange(e,e),this.yAutoruns);null!=e&&(this.yAutoruns=null,M.invalidateAutorunArray(e))},unobservedY:null,__cbOnYChange:null,__cbOnceYChange:null,__cbOnOwnerUnbindYChange:null,__cbOnceOwnerUnbindYChange:null,emitYChange:function(e,n){var t=0;if(null!=this.__cbOnYChange&&(t+=this.__cbOnYChange.length),null!=this.__cbOnceYChange&&(t+=this.__cbOnceYChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnYChange)for(var r=0,a=this.__cbOnYChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnYChange[h],++s):--t}if(null!=this.__cbOnceYChange){for(var u=null,c=null,r=0,a=this.__cbOnceYChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceYChange[h],this.__cbOnceYChange[h]=null,o=this.__cbOnceOwnerUnbindYChange[h],(this.__cbOnceOwnerUnbindYChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindYChange[h]),c.push(this.__cbOnceYChange[h]))}this.__cbOnceOwnerUnbindYChange=u,this.__cbOnceYChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event yChange because owner is destroyed!");var l=function(e){null!=t&&(i.offYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindYChange&&(this.__cbOnOwnerUnbindYChange=[]),this.__cbOnOwnerUnbindYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindYChange&&(this.__cbOnOwnerUnbindYChange=[]),this.__cbOnOwnerUnbindYChange.push(null);null==this.__cbOnYChange&&(this.__cbOnYChange=[]),this.__cbOnYChange.push(t)},onceYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event yChange because owner is destroyed!");var l=function(e){null!=t&&(i.offYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindYChange&&(this.__cbOnceOwnerUnbindYChange=[]),this.__cbOnceOwnerUnbindYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindYChange&&(this.__cbOnceOwnerUnbindYChange=[]),this.__cbOnceOwnerUnbindYChange.push(null);null==this.__cbOnceYChange&&(this.__cbOnceYChange=[]),this.__cbOnceYChange.push(t)},offYChange:function(e){if(null!=e){var n;null!=this.__cbOnYChange&&-1!=(n=this.__cbOnYChange.indexOf(e))&&(this.__cbOnYChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindYChange[n])&&s(),this.__cbOnOwnerUnbindYChange.splice(n,1)),null!=this.__cbOnceYChange&&-1!=(n=this.__cbOnceYChange.indexOf(e))&&(this.__cbOnceYChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindYChange[n])&&s(),this.__cbOnceOwnerUnbindYChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindYChange){for(var t=0,i=this.__cbOnOwnerUnbindYChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindYChange[l])&&s()}this.__cbOnOwnerUnbindYChange=null}if(null!=this.__cbOnceOwnerUnbindYChange){for(t=0,i=this.__cbOnceOwnerUnbindYChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindYChange[l])&&s()}this.__cbOnceOwnerUnbindYChange=null}this.__cbOnYChange=null,this.__cbOnceYChange=null}},listensYChange:function(){return null!=this.__cbOnYChange&&0<this.__cbOnYChange.length||null!=this.__cbOnceYChange&&0<this.__cbOnceYChange.length},columnsAutoruns:null,get_columns:function(){var e,n,t=this.unobservedColumns;return null!=M.current&&(e=M.current,null!=(n=this.columnsAutoruns)||(n=M.getAutorunArray(),null!=(this.columnsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_columns:function(e){var n=this.unobservedColumns;return n!=(this.unobservedColumns=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitColumnsChange(e,n),null!=(n=this.columnsAutoruns))&&(this.columnsAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateColumns:function(){var e=this.unobservedColumns,e=(this.emitColumnsChange(e,e),this.columnsAutoruns);null!=e&&(this.columnsAutoruns=null,M.invalidateAutorunArray(e))},unobservedColumns:null,__cbOnColumnsChange:null,__cbOnceColumnsChange:null,__cbOnOwnerUnbindColumnsChange:null,__cbOnceOwnerUnbindColumnsChange:null,emitColumnsChange:function(e,n){var t=0;if(null!=this.__cbOnColumnsChange&&(t+=this.__cbOnColumnsChange.length),null!=this.__cbOnceColumnsChange&&(t+=this.__cbOnceColumnsChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnColumnsChange)for(var r=0,a=this.__cbOnColumnsChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnColumnsChange[h],++s):--t}if(null!=this.__cbOnceColumnsChange){for(var u=null,c=null,r=0,a=this.__cbOnceColumnsChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceColumnsChange[h],this.__cbOnceColumnsChange[h]=null,o=this.__cbOnceOwnerUnbindColumnsChange[h],(this.__cbOnceOwnerUnbindColumnsChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindColumnsChange[h]),c.push(this.__cbOnceColumnsChange[h]))}this.__cbOnceOwnerUnbindColumnsChange=u,this.__cbOnceColumnsChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onColumnsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event columnsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offColumnsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindColumnsChange&&(this.__cbOnOwnerUnbindColumnsChange=[]),this.__cbOnOwnerUnbindColumnsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindColumnsChange&&(this.__cbOnOwnerUnbindColumnsChange=[]),this.__cbOnOwnerUnbindColumnsChange.push(null);null==this.__cbOnColumnsChange&&(this.__cbOnColumnsChange=[]),this.__cbOnColumnsChange.push(t)},onceColumnsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event columnsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offColumnsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindColumnsChange&&(this.__cbOnceOwnerUnbindColumnsChange=[]),this.__cbOnceOwnerUnbindColumnsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindColumnsChange&&(this.__cbOnceOwnerUnbindColumnsChange=[]),this.__cbOnceOwnerUnbindColumnsChange.push(null);null==this.__cbOnceColumnsChange&&(this.__cbOnceColumnsChange=[]),this.__cbOnceColumnsChange.push(t)},offColumnsChange:function(e){if(null!=e){var n;null!=this.__cbOnColumnsChange&&-1!=(n=this.__cbOnColumnsChange.indexOf(e))&&(this.__cbOnColumnsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindColumnsChange[n])&&s(),this.__cbOnOwnerUnbindColumnsChange.splice(n,1)),null!=this.__cbOnceColumnsChange&&-1!=(n=this.__cbOnceColumnsChange.indexOf(e))&&(this.__cbOnceColumnsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindColumnsChange[n])&&s(),this.__cbOnceOwnerUnbindColumnsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindColumnsChange){for(var t=0,i=this.__cbOnOwnerUnbindColumnsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindColumnsChange[l])&&s()}this.__cbOnOwnerUnbindColumnsChange=null}if(null!=this.__cbOnceOwnerUnbindColumnsChange){for(t=0,i=this.__cbOnceOwnerUnbindColumnsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindColumnsChange[l])&&s()}this.__cbOnceOwnerUnbindColumnsChange=null}this.__cbOnColumnsChange=null,this.__cbOnceColumnsChange=null}},listensColumnsChange:function(){return null!=this.__cbOnColumnsChange&&0<this.__cbOnColumnsChange.length||null!=this.__cbOnceColumnsChange&&0<this.__cbOnceColumnsChange.length},rowsAutoruns:null,get_rows:function(){var e,n,t=this.unobservedRows;return null!=M.current&&(e=M.current,null!=(n=this.rowsAutoruns)||(n=M.getAutorunArray(),null!=(this.rowsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_rows:function(e){var n=this.unobservedRows;return n!=(this.unobservedRows=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitRowsChange(e,n),null!=(n=this.rowsAutoruns))&&(this.rowsAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateRows:function(){var e=this.unobservedRows,e=(this.emitRowsChange(e,e),this.rowsAutoruns);null!=e&&(this.rowsAutoruns=null,M.invalidateAutorunArray(e))},unobservedRows:null,__cbOnRowsChange:null,__cbOnceRowsChange:null,__cbOnOwnerUnbindRowsChange:null,__cbOnceOwnerUnbindRowsChange:null,emitRowsChange:function(e,n){var t=0;if(null!=this.__cbOnRowsChange&&(t+=this.__cbOnRowsChange.length),null!=this.__cbOnceRowsChange&&(t+=this.__cbOnceRowsChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnRowsChange)for(var r=0,a=this.__cbOnRowsChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnRowsChange[h],++s):--t}if(null!=this.__cbOnceRowsChange){for(var u=null,c=null,r=0,a=this.__cbOnceRowsChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceRowsChange[h],this.__cbOnceRowsChange[h]=null,o=this.__cbOnceOwnerUnbindRowsChange[h],(this.__cbOnceOwnerUnbindRowsChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindRowsChange[h]),c.push(this.__cbOnceRowsChange[h]))}this.__cbOnceOwnerUnbindRowsChange=u,this.__cbOnceRowsChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onRowsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event rowsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRowsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindRowsChange&&(this.__cbOnOwnerUnbindRowsChange=[]),this.__cbOnOwnerUnbindRowsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindRowsChange&&(this.__cbOnOwnerUnbindRowsChange=[]),this.__cbOnOwnerUnbindRowsChange.push(null);null==this.__cbOnRowsChange&&(this.__cbOnRowsChange=[]),this.__cbOnRowsChange.push(t)},onceRowsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event rowsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRowsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindRowsChange&&(this.__cbOnceOwnerUnbindRowsChange=[]),this.__cbOnceOwnerUnbindRowsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindRowsChange&&(this.__cbOnceOwnerUnbindRowsChange=[]),this.__cbOnceOwnerUnbindRowsChange.push(null);null==this.__cbOnceRowsChange&&(this.__cbOnceRowsChange=[]),this.__cbOnceRowsChange.push(t)},offRowsChange:function(e){if(null!=e){var n;null!=this.__cbOnRowsChange&&-1!=(n=this.__cbOnRowsChange.indexOf(e))&&(this.__cbOnRowsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindRowsChange[n])&&s(),this.__cbOnOwnerUnbindRowsChange.splice(n,1)),null!=this.__cbOnceRowsChange&&-1!=(n=this.__cbOnceRowsChange.indexOf(e))&&(this.__cbOnceRowsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindRowsChange[n])&&s(),this.__cbOnceOwnerUnbindRowsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindRowsChange){for(var t=0,i=this.__cbOnOwnerUnbindRowsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindRowsChange[l])&&s()}this.__cbOnOwnerUnbindRowsChange=null}if(null!=this.__cbOnceOwnerUnbindRowsChange){for(t=0,i=this.__cbOnceOwnerUnbindRowsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindRowsChange[l])&&s()}this.__cbOnceOwnerUnbindRowsChange=null}this.__cbOnRowsChange=null,this.__cbOnceRowsChange=null}},listensRowsChange:function(){return null!=this.__cbOnRowsChange&&0<this.__cbOnRowsChange.length||null!=this.__cbOnceRowsChange&&0<this.__cbOnceRowsChange.length},opacityAutoruns:null,get_opacity:function(){var e,n,t=this.unobservedOpacity;return null!=M.current&&(e=M.current,null!=(n=this.opacityAutoruns)||(n=M.getAutorunArray(),null!=(this.opacityAutoruns=n)))&&e.bindToAutorunArray(n),t},set_opacity:function(e){var n=this.unobservedOpacity;return n!=(this.unobservedOpacity=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitOpacityChange(e,n),null!=(n=this.opacityAutoruns))&&(this.opacityAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateOpacity:function(){var e=this.unobservedOpacity,e=(this.emitOpacityChange(e,e),this.opacityAutoruns);null!=e&&(this.opacityAutoruns=null,M.invalidateAutorunArray(e))},unobservedOpacity:null,__cbOnOpacityChange:null,__cbOnceOpacityChange:null,__cbOnOwnerUnbindOpacityChange:null,__cbOnceOwnerUnbindOpacityChange:null,emitOpacityChange:function(e,n){var t=0;if(null!=this.__cbOnOpacityChange&&(t+=this.__cbOnOpacityChange.length),null!=this.__cbOnceOpacityChange&&(t+=this.__cbOnceOpacityChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnOpacityChange)for(var r=0,a=this.__cbOnOpacityChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnOpacityChange[h],++s):--t}if(null!=this.__cbOnceOpacityChange){for(var u=null,c=null,r=0,a=this.__cbOnceOpacityChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceOpacityChange[h],this.__cbOnceOpacityChange[h]=null,o=this.__cbOnceOwnerUnbindOpacityChange[h],(this.__cbOnceOwnerUnbindOpacityChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindOpacityChange[h]),c.push(this.__cbOnceOpacityChange[h]))}this.__cbOnceOwnerUnbindOpacityChange=u,this.__cbOnceOpacityChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onOpacityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event opacityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOpacityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindOpacityChange&&(this.__cbOnOwnerUnbindOpacityChange=[]),this.__cbOnOwnerUnbindOpacityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindOpacityChange&&(this.__cbOnOwnerUnbindOpacityChange=[]),this.__cbOnOwnerUnbindOpacityChange.push(null);null==this.__cbOnOpacityChange&&(this.__cbOnOpacityChange=[]),this.__cbOnOpacityChange.push(t)},onceOpacityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event opacityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOpacityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindOpacityChange&&(this.__cbOnceOwnerUnbindOpacityChange=[]),this.__cbOnceOwnerUnbindOpacityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindOpacityChange&&(this.__cbOnceOwnerUnbindOpacityChange=[]),this.__cbOnceOwnerUnbindOpacityChange.push(null);null==this.__cbOnceOpacityChange&&(this.__cbOnceOpacityChange=[]),this.__cbOnceOpacityChange.push(t)},offOpacityChange:function(e){if(null!=e){var n;null!=this.__cbOnOpacityChange&&-1!=(n=this.__cbOnOpacityChange.indexOf(e))&&(this.__cbOnOpacityChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindOpacityChange[n])&&s(),this.__cbOnOwnerUnbindOpacityChange.splice(n,1)),null!=this.__cbOnceOpacityChange&&-1!=(n=this.__cbOnceOpacityChange.indexOf(e))&&(this.__cbOnceOpacityChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindOpacityChange[n])&&s(),this.__cbOnceOwnerUnbindOpacityChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindOpacityChange){for(var t=0,i=this.__cbOnOwnerUnbindOpacityChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindOpacityChange[l])&&s()}this.__cbOnOwnerUnbindOpacityChange=null}if(null!=this.__cbOnceOwnerUnbindOpacityChange){for(t=0,i=this.__cbOnceOwnerUnbindOpacityChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindOpacityChange[l])&&s()}this.__cbOnceOwnerUnbindOpacityChange=null}this.__cbOnOpacityChange=null,this.__cbOnceOpacityChange=null}},listensOpacityChange:function(){return null!=this.__cbOnOpacityChange&&0<this.__cbOnOpacityChange.length||null!=this.__cbOnceOpacityChange&&0<this.__cbOnceOpacityChange.length},visibleAutoruns:null,get_visible:function(){var e,n,t=this.unobservedVisible;return null!=M.current&&(e=M.current,null!=(n=this.visibleAutoruns)||(n=M.getAutorunArray(),null!=(this.visibleAutoruns=n)))&&e.bindToAutorunArray(n),t},set_visible:function(e){var n=this.unobservedVisible;return n!=(this.unobservedVisible=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitVisibleChange(e,n),null!=(n=this.visibleAutoruns))&&(this.visibleAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateVisible:function(){var e=this.unobservedVisible,e=(this.emitVisibleChange(e,e),this.visibleAutoruns);null!=e&&(this.visibleAutoruns=null,M.invalidateAutorunArray(e))},unobservedVisible:null,__cbOnVisibleChange:null,__cbOnceVisibleChange:null,__cbOnOwnerUnbindVisibleChange:null,__cbOnceOwnerUnbindVisibleChange:null,emitVisibleChange:function(e,n){var t=0;if(null!=this.__cbOnVisibleChange&&(t+=this.__cbOnVisibleChange.length),null!=this.__cbOnceVisibleChange&&(t+=this.__cbOnceVisibleChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnVisibleChange)for(var r=0,a=this.__cbOnVisibleChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnVisibleChange[h],++s):--t}if(null!=this.__cbOnceVisibleChange){for(var u=null,c=null,r=0,a=this.__cbOnceVisibleChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceVisibleChange[h],this.__cbOnceVisibleChange[h]=null,o=this.__cbOnceOwnerUnbindVisibleChange[h],(this.__cbOnceOwnerUnbindVisibleChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindVisibleChange[h]),c.push(this.__cbOnceVisibleChange[h]))}this.__cbOnceOwnerUnbindVisibleChange=u,this.__cbOnceVisibleChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onVisibleChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event visibleChange because owner is destroyed!");var l=function(e){null!=t&&(i.offVisibleChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindVisibleChange&&(this.__cbOnOwnerUnbindVisibleChange=[]),this.__cbOnOwnerUnbindVisibleChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindVisibleChange&&(this.__cbOnOwnerUnbindVisibleChange=[]),this.__cbOnOwnerUnbindVisibleChange.push(null);null==this.__cbOnVisibleChange&&(this.__cbOnVisibleChange=[]),this.__cbOnVisibleChange.push(t)},onceVisibleChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event visibleChange because owner is destroyed!");var l=function(e){null!=t&&(i.offVisibleChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindVisibleChange&&(this.__cbOnceOwnerUnbindVisibleChange=[]),this.__cbOnceOwnerUnbindVisibleChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindVisibleChange&&(this.__cbOnceOwnerUnbindVisibleChange=[]),this.__cbOnceOwnerUnbindVisibleChange.push(null);null==this.__cbOnceVisibleChange&&(this.__cbOnceVisibleChange=[]),this.__cbOnceVisibleChange.push(t)},offVisibleChange:function(e){if(null!=e){var n;null!=this.__cbOnVisibleChange&&-1!=(n=this.__cbOnVisibleChange.indexOf(e))&&(this.__cbOnVisibleChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindVisibleChange[n])&&s(),this.__cbOnOwnerUnbindVisibleChange.splice(n,1)),null!=this.__cbOnceVisibleChange&&-1!=(n=this.__cbOnceVisibleChange.indexOf(e))&&(this.__cbOnceVisibleChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindVisibleChange[n])&&s(),this.__cbOnceOwnerUnbindVisibleChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindVisibleChange){for(var t=0,i=this.__cbOnOwnerUnbindVisibleChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindVisibleChange[l])&&s()}this.__cbOnOwnerUnbindVisibleChange=null}if(null!=this.__cbOnceOwnerUnbindVisibleChange){for(t=0,i=this.__cbOnceOwnerUnbindVisibleChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindVisibleChange[l])&&s()}this.__cbOnceOwnerUnbindVisibleChange=null}this.__cbOnVisibleChange=null,this.__cbOnceVisibleChange=null}},listensVisibleChange:function(){return null!=this.__cbOnVisibleChange&&0<this.__cbOnVisibleChange.length||null!=this.__cbOnceVisibleChange&&0<this.__cbOnceVisibleChange.length},offsetXAutoruns:null,get_offsetX:function(){var e,n,t=this.unobservedOffsetX;return null!=M.current&&(e=M.current,null!=(n=this.offsetXAutoruns)||(n=M.getAutorunArray(),null!=(this.offsetXAutoruns=n)))&&e.bindToAutorunArray(n),t},set_offsetX:function(e){var n=this.unobservedOffsetX;return n!=(this.unobservedOffsetX=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitOffsetXChange(e,n),null!=(n=this.offsetXAutoruns))&&(this.offsetXAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateOffsetX:function(){var e=this.unobservedOffsetX,e=(this.emitOffsetXChange(e,e),this.offsetXAutoruns);null!=e&&(this.offsetXAutoruns=null,M.invalidateAutorunArray(e))},unobservedOffsetX:null,__cbOnOffsetXChange:null,__cbOnceOffsetXChange:null,__cbOnOwnerUnbindOffsetXChange:null,__cbOnceOwnerUnbindOffsetXChange:null,emitOffsetXChange:function(e,n){var t=0;if(null!=this.__cbOnOffsetXChange&&(t+=this.__cbOnOffsetXChange.length),null!=this.__cbOnceOffsetXChange&&(t+=this.__cbOnceOffsetXChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnOffsetXChange)for(var r=0,a=this.__cbOnOffsetXChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnOffsetXChange[h],++s):--t}if(null!=this.__cbOnceOffsetXChange){for(var u=null,c=null,r=0,a=this.__cbOnceOffsetXChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceOffsetXChange[h],this.__cbOnceOffsetXChange[h]=null,o=this.__cbOnceOwnerUnbindOffsetXChange[h],(this.__cbOnceOwnerUnbindOffsetXChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindOffsetXChange[h]),c.push(this.__cbOnceOffsetXChange[h]))}this.__cbOnceOwnerUnbindOffsetXChange=u,this.__cbOnceOffsetXChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onOffsetXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event offsetXChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOffsetXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindOffsetXChange&&(this.__cbOnOwnerUnbindOffsetXChange=[]),this.__cbOnOwnerUnbindOffsetXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindOffsetXChange&&(this.__cbOnOwnerUnbindOffsetXChange=[]),this.__cbOnOwnerUnbindOffsetXChange.push(null);null==this.__cbOnOffsetXChange&&(this.__cbOnOffsetXChange=[]),this.__cbOnOffsetXChange.push(t)},onceOffsetXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event offsetXChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOffsetXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindOffsetXChange&&(this.__cbOnceOwnerUnbindOffsetXChange=[]),this.__cbOnceOwnerUnbindOffsetXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindOffsetXChange&&(this.__cbOnceOwnerUnbindOffsetXChange=[]),this.__cbOnceOwnerUnbindOffsetXChange.push(null);null==this.__cbOnceOffsetXChange&&(this.__cbOnceOffsetXChange=[]),this.__cbOnceOffsetXChange.push(t)},offOffsetXChange:function(e){if(null!=e){var n;null!=this.__cbOnOffsetXChange&&-1!=(n=this.__cbOnOffsetXChange.indexOf(e))&&(this.__cbOnOffsetXChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindOffsetXChange[n])&&s(),this.__cbOnOwnerUnbindOffsetXChange.splice(n,1)),null!=this.__cbOnceOffsetXChange&&-1!=(n=this.__cbOnceOffsetXChange.indexOf(e))&&(this.__cbOnceOffsetXChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindOffsetXChange[n])&&s(),this.__cbOnceOwnerUnbindOffsetXChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindOffsetXChange){for(var t=0,i=this.__cbOnOwnerUnbindOffsetXChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindOffsetXChange[l])&&s()}this.__cbOnOwnerUnbindOffsetXChange=null}if(null!=this.__cbOnceOwnerUnbindOffsetXChange){for(t=0,i=this.__cbOnceOwnerUnbindOffsetXChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindOffsetXChange[l])&&s()}this.__cbOnceOwnerUnbindOffsetXChange=null}this.__cbOnOffsetXChange=null,this.__cbOnceOffsetXChange=null}},listensOffsetXChange:function(){return null!=this.__cbOnOffsetXChange&&0<this.__cbOnOffsetXChange.length||null!=this.__cbOnceOffsetXChange&&0<this.__cbOnceOffsetXChange.length},offsetYAutoruns:null,get_offsetY:function(){var e,n,t=this.unobservedOffsetY;return null!=M.current&&(e=M.current,null!=(n=this.offsetYAutoruns)||(n=M.getAutorunArray(),null!=(this.offsetYAutoruns=n)))&&e.bindToAutorunArray(n),t},set_offsetY:function(e){var n=this.unobservedOffsetY;return n!=(this.unobservedOffsetY=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitOffsetYChange(e,n),null!=(n=this.offsetYAutoruns))&&(this.offsetYAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateOffsetY:function(){var e=this.unobservedOffsetY,e=(this.emitOffsetYChange(e,e),this.offsetYAutoruns);null!=e&&(this.offsetYAutoruns=null,M.invalidateAutorunArray(e))},unobservedOffsetY:null,__cbOnOffsetYChange:null,__cbOnceOffsetYChange:null,__cbOnOwnerUnbindOffsetYChange:null,__cbOnceOwnerUnbindOffsetYChange:null,emitOffsetYChange:function(e,n){var t=0;if(null!=this.__cbOnOffsetYChange&&(t+=this.__cbOnOffsetYChange.length),null!=this.__cbOnceOffsetYChange&&(t+=this.__cbOnceOffsetYChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnOffsetYChange)for(var r=0,a=this.__cbOnOffsetYChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnOffsetYChange[h],++s):--t}if(null!=this.__cbOnceOffsetYChange){for(var u=null,c=null,r=0,a=this.__cbOnceOffsetYChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceOffsetYChange[h],this.__cbOnceOffsetYChange[h]=null,o=this.__cbOnceOwnerUnbindOffsetYChange[h],(this.__cbOnceOwnerUnbindOffsetYChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindOffsetYChange[h]),c.push(this.__cbOnceOffsetYChange[h]))}this.__cbOnceOwnerUnbindOffsetYChange=u,this.__cbOnceOffsetYChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onOffsetYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event offsetYChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOffsetYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindOffsetYChange&&(this.__cbOnOwnerUnbindOffsetYChange=[]),this.__cbOnOwnerUnbindOffsetYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindOffsetYChange&&(this.__cbOnOwnerUnbindOffsetYChange=[]),this.__cbOnOwnerUnbindOffsetYChange.push(null);null==this.__cbOnOffsetYChange&&(this.__cbOnOffsetYChange=[]),this.__cbOnOffsetYChange.push(t)},onceOffsetYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event offsetYChange because owner is destroyed!");var l=function(e){null!=t&&(i.offOffsetYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindOffsetYChange&&(this.__cbOnceOwnerUnbindOffsetYChange=[]),this.__cbOnceOwnerUnbindOffsetYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindOffsetYChange&&(this.__cbOnceOwnerUnbindOffsetYChange=[]),this.__cbOnceOwnerUnbindOffsetYChange.push(null);null==this.__cbOnceOffsetYChange&&(this.__cbOnceOffsetYChange=[]),this.__cbOnceOffsetYChange.push(t)},offOffsetYChange:function(e){if(null!=e){var n;null!=this.__cbOnOffsetYChange&&-1!=(n=this.__cbOnOffsetYChange.indexOf(e))&&(this.__cbOnOffsetYChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindOffsetYChange[n])&&s(),this.__cbOnOwnerUnbindOffsetYChange.splice(n,1)),null!=this.__cbOnceOffsetYChange&&-1!=(n=this.__cbOnceOffsetYChange.indexOf(e))&&(this.__cbOnceOffsetYChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindOffsetYChange[n])&&s(),this.__cbOnceOwnerUnbindOffsetYChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindOffsetYChange){for(var t=0,i=this.__cbOnOwnerUnbindOffsetYChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindOffsetYChange[l])&&s()}this.__cbOnOwnerUnbindOffsetYChange=null}if(null!=this.__cbOnceOwnerUnbindOffsetYChange){for(t=0,i=this.__cbOnceOwnerUnbindOffsetYChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindOffsetYChange[l])&&s()}this.__cbOnceOwnerUnbindOffsetYChange=null}this.__cbOnOffsetYChange=null,this.__cbOnceOffsetYChange=null}},listensOffsetYChange:function(){return null!=this.__cbOnOffsetYChange&&0<this.__cbOnOffsetYChange.length||null!=this.__cbOnceOffsetYChange&&0<this.__cbOnceOffsetYChange.length},explicitDepthAutoruns:null,get_explicitDepth:function(){var e,n,t=this.unobservedExplicitDepth;return null!=M.current&&(e=M.current,null!=(n=this.explicitDepthAutoruns)||(n=M.getAutorunArray(),null!=(this.explicitDepthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_explicitDepth:function(e){var n=this.unobservedExplicitDepth;return n!=(this.unobservedExplicitDepth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitExplicitDepthChange(e,n),null!=(n=this.explicitDepthAutoruns))&&(this.explicitDepthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateExplicitDepth:function(){var e=this.unobservedExplicitDepth,e=(this.emitExplicitDepthChange(e,e),this.explicitDepthAutoruns);null!=e&&(this.explicitDepthAutoruns=null,M.invalidateAutorunArray(e))},unobservedExplicitDepth:null,__cbOnExplicitDepthChange:null,__cbOnceExplicitDepthChange:null,__cbOnOwnerUnbindExplicitDepthChange:null,__cbOnceOwnerUnbindExplicitDepthChange:null,emitExplicitDepthChange:function(e,n){var t=0;if(null!=this.__cbOnExplicitDepthChange&&(t+=this.__cbOnExplicitDepthChange.length),null!=this.__cbOnceExplicitDepthChange&&(t+=this.__cbOnceExplicitDepthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnExplicitDepthChange)for(var r=0,a=this.__cbOnExplicitDepthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnExplicitDepthChange[h],++s):--t}if(null!=this.__cbOnceExplicitDepthChange){for(var u=null,c=null,r=0,a=this.__cbOnceExplicitDepthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceExplicitDepthChange[h],this.__cbOnceExplicitDepthChange[h]=null,o=this.__cbOnceOwnerUnbindExplicitDepthChange[h],(this.__cbOnceOwnerUnbindExplicitDepthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindExplicitDepthChange[h]),c.push(this.__cbOnceExplicitDepthChange[h]))}this.__cbOnceOwnerUnbindExplicitDepthChange=u,this.__cbOnceExplicitDepthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onExplicitDepthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event explicitDepthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offExplicitDepthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindExplicitDepthChange&&(this.__cbOnOwnerUnbindExplicitDepthChange=[]),this.__cbOnOwnerUnbindExplicitDepthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindExplicitDepthChange&&(this.__cbOnOwnerUnbindExplicitDepthChange=[]),this.__cbOnOwnerUnbindExplicitDepthChange.push(null);null==this.__cbOnExplicitDepthChange&&(this.__cbOnExplicitDepthChange=[]),this.__cbOnExplicitDepthChange.push(t)},onceExplicitDepthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event explicitDepthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offExplicitDepthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindExplicitDepthChange&&(this.__cbOnceOwnerUnbindExplicitDepthChange=[]),this.__cbOnceOwnerUnbindExplicitDepthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindExplicitDepthChange&&(this.__cbOnceOwnerUnbindExplicitDepthChange=[]),this.__cbOnceOwnerUnbindExplicitDepthChange.push(null);null==this.__cbOnceExplicitDepthChange&&(this.__cbOnceExplicitDepthChange=[]),this.__cbOnceExplicitDepthChange.push(t)},offExplicitDepthChange:function(e){if(null!=e){var n;null!=this.__cbOnExplicitDepthChange&&-1!=(n=this.__cbOnExplicitDepthChange.indexOf(e))&&(this.__cbOnExplicitDepthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindExplicitDepthChange[n])&&s(),this.__cbOnOwnerUnbindExplicitDepthChange.splice(n,1)),null!=this.__cbOnceExplicitDepthChange&&-1!=(n=this.__cbOnceExplicitDepthChange.indexOf(e))&&(this.__cbOnceExplicitDepthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindExplicitDepthChange[n])&&s(),this.__cbOnceOwnerUnbindExplicitDepthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindExplicitDepthChange){for(var t=0,i=this.__cbOnOwnerUnbindExplicitDepthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindExplicitDepthChange[l])&&s()}this.__cbOnOwnerUnbindExplicitDepthChange=null}if(null!=this.__cbOnceOwnerUnbindExplicitDepthChange){for(t=0,i=this.__cbOnceOwnerUnbindExplicitDepthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindExplicitDepthChange[l])&&s()}this.__cbOnceOwnerUnbindExplicitDepthChange=null}this.__cbOnExplicitDepthChange=null,this.__cbOnceExplicitDepthChange=null}},listensExplicitDepthChange:function(){return null!=this.__cbOnExplicitDepthChange&&0<this.__cbOnExplicitDepthChange.length||null!=this.__cbOnceExplicitDepthChange&&0<this.__cbOnceExplicitDepthChange.length},blendingAutoruns:null,get_blending:function(){var e,n,t=this.unobservedBlending;return null!=M.current&&(e=M.current,null!=(n=this.blendingAutoruns)||(n=M.getAutorunArray(),null!=(this.blendingAutoruns=n)))&&e.bindToAutorunArray(n),t},set_blending:function(e){var n=this.unobservedBlending;return n!=(this.unobservedBlending=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitBlendingChange(e,n),null!=(n=this.blendingAutoruns))&&(this.blendingAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateBlending:function(){var e=this.unobservedBlending,e=(this.emitBlendingChange(e,e),this.blendingAutoruns);null!=e&&(this.blendingAutoruns=null,M.invalidateAutorunArray(e))},unobservedBlending:null,__cbOnBlendingChange:null,__cbOnceBlendingChange:null,__cbOnOwnerUnbindBlendingChange:null,__cbOnceOwnerUnbindBlendingChange:null,emitBlendingChange:function(e,n){var t=0;if(null!=this.__cbOnBlendingChange&&(t+=this.__cbOnBlendingChange.length),null!=this.__cbOnceBlendingChange&&(t+=this.__cbOnceBlendingChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnBlendingChange)for(var r=0,a=this.__cbOnBlendingChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnBlendingChange[h],++s):--t}if(null!=this.__cbOnceBlendingChange){for(var u=null,c=null,r=0,a=this.__cbOnceBlendingChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceBlendingChange[h],this.__cbOnceBlendingChange[h]=null,o=this.__cbOnceOwnerUnbindBlendingChange[h],(this.__cbOnceOwnerUnbindBlendingChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindBlendingChange[h]),c.push(this.__cbOnceBlendingChange[h]))}this.__cbOnceOwnerUnbindBlendingChange=u,this.__cbOnceBlendingChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onBlendingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event blendingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBlendingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBlendingChange&&(this.__cbOnOwnerUnbindBlendingChange=[]),this.__cbOnOwnerUnbindBlendingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBlendingChange&&(this.__cbOnOwnerUnbindBlendingChange=[]),this.__cbOnOwnerUnbindBlendingChange.push(null);null==this.__cbOnBlendingChange&&(this.__cbOnBlendingChange=[]),this.__cbOnBlendingChange.push(t)},onceBlendingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event blendingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offBlendingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBlendingChange&&(this.__cbOnceOwnerUnbindBlendingChange=[]),this.__cbOnceOwnerUnbindBlendingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBlendingChange&&(this.__cbOnceOwnerUnbindBlendingChange=[]),this.__cbOnceOwnerUnbindBlendingChange.push(null);null==this.__cbOnceBlendingChange&&(this.__cbOnceBlendingChange=[]),this.__cbOnceBlendingChange.push(t)},offBlendingChange:function(e){if(null!=e){var n;null!=this.__cbOnBlendingChange&&-1!=(n=this.__cbOnBlendingChange.indexOf(e))&&(this.__cbOnBlendingChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBlendingChange[n])&&s(),this.__cbOnOwnerUnbindBlendingChange.splice(n,1)),null!=this.__cbOnceBlendingChange&&-1!=(n=this.__cbOnceBlendingChange.indexOf(e))&&(this.__cbOnceBlendingChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBlendingChange[n])&&s(),this.__cbOnceOwnerUnbindBlendingChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBlendingChange){for(var t=0,i=this.__cbOnOwnerUnbindBlendingChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBlendingChange[l])&&s()}this.__cbOnOwnerUnbindBlendingChange=null}if(null!=this.__cbOnceOwnerUnbindBlendingChange){for(t=0,i=this.__cbOnceOwnerUnbindBlendingChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBlendingChange[l])&&s()}this.__cbOnceOwnerUnbindBlendingChange=null}this.__cbOnBlendingChange=null,this.__cbOnceBlendingChange=null}},listensBlendingChange:function(){return null!=this.__cbOnBlendingChange&&0<this.__cbOnBlendingChange.length||null!=this.__cbOnceBlendingChange&&0<this.__cbOnceBlendingChange.length},colorAutoruns:null,get_color:function(){var e,n,t=this.unobservedColor;return null!=M.current&&(e=M.current,null!=(n=this.colorAutoruns)||(n=M.getAutorunArray(),null!=(this.colorAutoruns=n)))&&e.bindToAutorunArray(n),t},set_color:function(e){var n=this.unobservedColor;return n!=(this.unobservedColor=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitColorChange(e,n),null!=(n=this.colorAutoruns))&&(this.colorAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateColor:function(){var e=this.unobservedColor,e=(this.emitColorChange(e,e),this.colorAutoruns);null!=e&&(this.colorAutoruns=null,M.invalidateAutorunArray(e))},unobservedColor:null,__cbOnColorChange:null,__cbOnceColorChange:null,__cbOnOwnerUnbindColorChange:null,__cbOnceOwnerUnbindColorChange:null,emitColorChange:function(e,n){var t=0;if(null!=this.__cbOnColorChange&&(t+=this.__cbOnColorChange.length),null!=this.__cbOnceColorChange&&(t+=this.__cbOnceColorChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnColorChange)for(var r=0,a=this.__cbOnColorChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnColorChange[h],++s):--t}if(null!=this.__cbOnceColorChange){for(var u=null,c=null,r=0,a=this.__cbOnceColorChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceColorChange[h],this.__cbOnceColorChange[h]=null,o=this.__cbOnceOwnerUnbindColorChange[h],(this.__cbOnceOwnerUnbindColorChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindColorChange[h]),c.push(this.__cbOnceColorChange[h]))}this.__cbOnceOwnerUnbindColorChange=u,this.__cbOnceColorChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onColorChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event colorChange because owner is destroyed!");var l=function(e){null!=t&&(i.offColorChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindColorChange&&(this.__cbOnOwnerUnbindColorChange=[]),this.__cbOnOwnerUnbindColorChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindColorChange&&(this.__cbOnOwnerUnbindColorChange=[]),this.__cbOnOwnerUnbindColorChange.push(null);null==this.__cbOnColorChange&&(this.__cbOnColorChange=[]),this.__cbOnColorChange.push(t)},onceColorChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event colorChange because owner is destroyed!");var l=function(e){null!=t&&(i.offColorChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindColorChange&&(this.__cbOnceOwnerUnbindColorChange=[]),this.__cbOnceOwnerUnbindColorChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindColorChange&&(this.__cbOnceOwnerUnbindColorChange=[]),this.__cbOnceOwnerUnbindColorChange.push(null);null==this.__cbOnceColorChange&&(this.__cbOnceColorChange=[]),this.__cbOnceColorChange.push(t)},offColorChange:function(e){if(null!=e){var n;null!=this.__cbOnColorChange&&-1!=(n=this.__cbOnColorChange.indexOf(e))&&(this.__cbOnColorChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindColorChange[n])&&s(),this.__cbOnOwnerUnbindColorChange.splice(n,1)),null!=this.__cbOnceColorChange&&-1!=(n=this.__cbOnceColorChange.indexOf(e))&&(this.__cbOnceColorChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindColorChange[n])&&s(),this.__cbOnceOwnerUnbindColorChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindColorChange){for(var t=0,i=this.__cbOnOwnerUnbindColorChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindColorChange[l])&&s()}this.__cbOnOwnerUnbindColorChange=null}if(null!=this.__cbOnceOwnerUnbindColorChange){for(t=0,i=this.__cbOnceOwnerUnbindColorChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindColorChange[l])&&s()}this.__cbOnceOwnerUnbindColorChange=null}this.__cbOnColorChange=null,this.__cbOnceColorChange=null}},listensColorChange:function(){return null!=this.__cbOnColorChange&&0<this.__cbOnColorChange.length||null!=this.__cbOnceColorChange&&0<this.__cbOnceColorChange.length},extraBlendingAutoruns:null,get_extraBlending:function(){var e,n,t=this.unobservedExtraBlending;return null!=M.current&&(e=M.current,null!=(n=this.extraBlendingAutoruns)||(n=M.getAutorunArray(),null!=(this.extraBlendingAutoruns=n)))&&e.bindToAutorunArray(n),t},set_extraBlending:function(e){var n=this.unobservedExtraBlending;return n!=(this.unobservedExtraBlending=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitExtraBlendingChange(e,n),null!=(n=this.extraBlendingAutoruns))&&(this.extraBlendingAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateExtraBlending:function(){var e=this.unobservedExtraBlending,e=(this.emitExtraBlendingChange(e,e),this.extraBlendingAutoruns);null!=e&&(this.extraBlendingAutoruns=null,M.invalidateAutorunArray(e))},unobservedExtraBlending:null,__cbOnExtraBlendingChange:null,__cbOnceExtraBlendingChange:null,__cbOnOwnerUnbindExtraBlendingChange:null,__cbOnceOwnerUnbindExtraBlendingChange:null,emitExtraBlendingChange:function(e,n){var t=0;if(null!=this.__cbOnExtraBlendingChange&&(t+=this.__cbOnExtraBlendingChange.length),null!=this.__cbOnceExtraBlendingChange&&(t+=this.__cbOnceExtraBlendingChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnExtraBlendingChange)for(var r=0,a=this.__cbOnExtraBlendingChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnExtraBlendingChange[h],++s):--t}if(null!=this.__cbOnceExtraBlendingChange){for(var u=null,c=null,r=0,a=this.__cbOnceExtraBlendingChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceExtraBlendingChange[h],this.__cbOnceExtraBlendingChange[h]=null,o=this.__cbOnceOwnerUnbindExtraBlendingChange[h],(this.__cbOnceOwnerUnbindExtraBlendingChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindExtraBlendingChange[h]),c.push(this.__cbOnceExtraBlendingChange[h]))}this.__cbOnceOwnerUnbindExtraBlendingChange=u,this.__cbOnceExtraBlendingChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onExtraBlendingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event extraBlendingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offExtraBlendingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindExtraBlendingChange&&(this.__cbOnOwnerUnbindExtraBlendingChange=[]),this.__cbOnOwnerUnbindExtraBlendingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindExtraBlendingChange&&(this.__cbOnOwnerUnbindExtraBlendingChange=[]),this.__cbOnOwnerUnbindExtraBlendingChange.push(null);null==this.__cbOnExtraBlendingChange&&(this.__cbOnExtraBlendingChange=[]),this.__cbOnExtraBlendingChange.push(t)},onceExtraBlendingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event extraBlendingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offExtraBlendingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindExtraBlendingChange&&(this.__cbOnceOwnerUnbindExtraBlendingChange=[]),this.__cbOnceOwnerUnbindExtraBlendingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindExtraBlendingChange&&(this.__cbOnceOwnerUnbindExtraBlendingChange=[]),this.__cbOnceOwnerUnbindExtraBlendingChange.push(null);null==this.__cbOnceExtraBlendingChange&&(this.__cbOnceExtraBlendingChange=[]),this.__cbOnceExtraBlendingChange.push(t)},offExtraBlendingChange:function(e){if(null!=e){var n;null!=this.__cbOnExtraBlendingChange&&-1!=(n=this.__cbOnExtraBlendingChange.indexOf(e))&&(this.__cbOnExtraBlendingChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindExtraBlendingChange[n])&&s(),this.__cbOnOwnerUnbindExtraBlendingChange.splice(n,1)),null!=this.__cbOnceExtraBlendingChange&&-1!=(n=this.__cbOnceExtraBlendingChange.indexOf(e))&&(this.__cbOnceExtraBlendingChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindExtraBlendingChange[n])&&s(),this.__cbOnceOwnerUnbindExtraBlendingChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindExtraBlendingChange){for(var t=0,i=this.__cbOnOwnerUnbindExtraBlendingChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindExtraBlendingChange[l])&&s()}this.__cbOnOwnerUnbindExtraBlendingChange=null}if(null!=this.__cbOnceOwnerUnbindExtraBlendingChange){for(t=0,i=this.__cbOnceOwnerUnbindExtraBlendingChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindExtraBlendingChange[l])&&s()}this.__cbOnceOwnerUnbindExtraBlendingChange=null}this.__cbOnExtraBlendingChange=null,this.__cbOnceExtraBlendingChange=null}},listensExtraBlendingChange:function(){return null!=this.__cbOnExtraBlendingChange&&0<this.__cbOnExtraBlendingChange.length||null!=this.__cbOnceExtraBlendingChange&&0<this.__cbOnceExtraBlendingChange.length},extraOpacityAutoruns:null,get_extraOpacity:function(){var e,n,t=this.unobservedExtraOpacity;return null!=M.current&&(e=M.current,null!=(n=this.extraOpacityAutoruns)||(n=M.getAutorunArray(),null!=(this.extraOpacityAutoruns=n)))&&e.bindToAutorunArray(n),t},set_extraOpacity:function(e){var n=this.unobservedExtraOpacity;return n!=(this.unobservedExtraOpacity=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitExtraOpacityChange(e,n),null!=(n=this.extraOpacityAutoruns))&&(this.extraOpacityAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateExtraOpacity:function(){var e=this.unobservedExtraOpacity,e=(this.emitExtraOpacityChange(e,e),this.extraOpacityAutoruns);null!=e&&(this.extraOpacityAutoruns=null,M.invalidateAutorunArray(e))},unobservedExtraOpacity:null,__cbOnExtraOpacityChange:null,__cbOnceExtraOpacityChange:null,__cbOnOwnerUnbindExtraOpacityChange:null,__cbOnceOwnerUnbindExtraOpacityChange:null,emitExtraOpacityChange:function(e,n){var t=0;if(null!=this.__cbOnExtraOpacityChange&&(t+=this.__cbOnExtraOpacityChange.length),null!=this.__cbOnceExtraOpacityChange&&(t+=this.__cbOnceExtraOpacityChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnExtraOpacityChange)for(var r=0,a=this.__cbOnExtraOpacityChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnExtraOpacityChange[h],++s):--t}if(null!=this.__cbOnceExtraOpacityChange){for(var u=null,c=null,r=0,a=this.__cbOnceExtraOpacityChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceExtraOpacityChange[h],this.__cbOnceExtraOpacityChange[h]=null,o=this.__cbOnceOwnerUnbindExtraOpacityChange[h],(this.__cbOnceOwnerUnbindExtraOpacityChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindExtraOpacityChange[h]),c.push(this.__cbOnceExtraOpacityChange[h]))}this.__cbOnceOwnerUnbindExtraOpacityChange=u,this.__cbOnceExtraOpacityChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onExtraOpacityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event extraOpacityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offExtraOpacityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindExtraOpacityChange&&(this.__cbOnOwnerUnbindExtraOpacityChange=[]),this.__cbOnOwnerUnbindExtraOpacityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindExtraOpacityChange&&(this.__cbOnOwnerUnbindExtraOpacityChange=[]),this.__cbOnOwnerUnbindExtraOpacityChange.push(null);null==this.__cbOnExtraOpacityChange&&(this.__cbOnExtraOpacityChange=[]),this.__cbOnExtraOpacityChange.push(t)},onceExtraOpacityChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event extraOpacityChange because owner is destroyed!");var l=function(e){null!=t&&(i.offExtraOpacityChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindExtraOpacityChange&&(this.__cbOnceOwnerUnbindExtraOpacityChange=[]),this.__cbOnceOwnerUnbindExtraOpacityChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindExtraOpacityChange&&(this.__cbOnceOwnerUnbindExtraOpacityChange=[]),this.__cbOnceOwnerUnbindExtraOpacityChange.push(null);null==this.__cbOnceExtraOpacityChange&&(this.__cbOnceExtraOpacityChange=[]),this.__cbOnceExtraOpacityChange.push(t)},offExtraOpacityChange:function(e){if(null!=e){var n;null!=this.__cbOnExtraOpacityChange&&-1!=(n=this.__cbOnExtraOpacityChange.indexOf(e))&&(this.__cbOnExtraOpacityChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindExtraOpacityChange[n])&&s(),this.__cbOnOwnerUnbindExtraOpacityChange.splice(n,1)),null!=this.__cbOnceExtraOpacityChange&&-1!=(n=this.__cbOnceExtraOpacityChange.indexOf(e))&&(this.__cbOnceExtraOpacityChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindExtraOpacityChange[n])&&s(),this.__cbOnceOwnerUnbindExtraOpacityChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindExtraOpacityChange){for(var t=0,i=this.__cbOnOwnerUnbindExtraOpacityChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindExtraOpacityChange[l])&&s()}this.__cbOnOwnerUnbindExtraOpacityChange=null}if(null!=this.__cbOnceOwnerUnbindExtraOpacityChange){for(t=0,i=this.__cbOnceOwnerUnbindExtraOpacityChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindExtraOpacityChange[l])&&s()}this.__cbOnceOwnerUnbindExtraOpacityChange=null}this.__cbOnExtraOpacityChange=null,this.__cbOnceExtraOpacityChange=null}},listensExtraOpacityChange:function(){return null!=this.__cbOnExtraOpacityChange&&0<this.__cbOnExtraOpacityChange.length||null!=this.__cbOnceExtraOpacityChange&&0<this.__cbOnceExtraOpacityChange.length},tilesAutoruns:null,get_tiles:function(){var e,n,t=this.unobservedTiles;return null!=M.current&&(e=M.current,null!=(n=this.tilesAutoruns)||(n=M.getAutorunArray(),null!=(this.tilesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tiles:function(e){var n=this.unobservedTiles;return this.unobservedTiles=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTilesChange(e,n),null!=(n=this.tilesAutoruns)&&(this.tilesAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateTiles:function(){var e=this.unobservedTiles,e=(this.emitTilesChange(e,e),this.tilesAutoruns);null!=e&&(this.tilesAutoruns=null,M.invalidateAutorunArray(e))},unobservedTiles:null,__cbOnTilesChange:null,__cbOnceTilesChange:null,__cbOnOwnerUnbindTilesChange:null,__cbOnceOwnerUnbindTilesChange:null,emitTilesChange:function(e,n){var t=0;if(null!=this.__cbOnTilesChange&&(t+=this.__cbOnTilesChange.length),null!=this.__cbOnceTilesChange&&(t+=this.__cbOnceTilesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTilesChange)for(var r=0,a=this.__cbOnTilesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTilesChange[h],++s):--t}if(null!=this.__cbOnceTilesChange){for(var u=null,c=null,r=0,a=this.__cbOnceTilesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTilesChange[h],this.__cbOnceTilesChange[h]=null,o=this.__cbOnceOwnerUnbindTilesChange[h],(this.__cbOnceOwnerUnbindTilesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTilesChange[h]),c.push(this.__cbOnceTilesChange[h]))}this.__cbOnceOwnerUnbindTilesChange=u,this.__cbOnceTilesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTilesChange&&(this.__cbOnOwnerUnbindTilesChange=[]),this.__cbOnOwnerUnbindTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTilesChange&&(this.__cbOnOwnerUnbindTilesChange=[]),this.__cbOnOwnerUnbindTilesChange.push(null);null==this.__cbOnTilesChange&&(this.__cbOnTilesChange=[]),this.__cbOnTilesChange.push(t)},onceTilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTilesChange&&(this.__cbOnceOwnerUnbindTilesChange=[]),this.__cbOnceOwnerUnbindTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTilesChange&&(this.__cbOnceOwnerUnbindTilesChange=[]),this.__cbOnceOwnerUnbindTilesChange.push(null);null==this.__cbOnceTilesChange&&(this.__cbOnceTilesChange=[]),this.__cbOnceTilesChange.push(t)},offTilesChange:function(e){if(null!=e){var n;null!=this.__cbOnTilesChange&&-1!=(n=this.__cbOnTilesChange.indexOf(e))&&(this.__cbOnTilesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTilesChange[n])&&s(),this.__cbOnOwnerUnbindTilesChange.splice(n,1)),null!=this.__cbOnceTilesChange&&-1!=(n=this.__cbOnceTilesChange.indexOf(e))&&(this.__cbOnceTilesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTilesChange[n])&&s(),this.__cbOnceOwnerUnbindTilesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTilesChange){for(var t=0,i=this.__cbOnOwnerUnbindTilesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTilesChange[l])&&s()}this.__cbOnOwnerUnbindTilesChange=null}if(null!=this.__cbOnceOwnerUnbindTilesChange){for(t=0,i=this.__cbOnceOwnerUnbindTilesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTilesChange[l])&&s()}this.__cbOnceOwnerUnbindTilesChange=null}this.__cbOnTilesChange=null,this.__cbOnceTilesChange=null}},listensTilesChange:function(){return null!=this.__cbOnTilesChange&&0<this.__cbOnTilesChange.length||null!=this.__cbOnceTilesChange&&0<this.__cbOnceTilesChange.length},tilesAlphaAutoruns:null,get_tilesAlpha:function(){var e,n,t=this.unobservedTilesAlpha;return null!=M.current&&(e=M.current,null!=(n=this.tilesAlphaAutoruns)||(n=M.getAutorunArray(),null!=(this.tilesAlphaAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tilesAlpha:function(e){var n=this.unobservedTilesAlpha;return this.unobservedTilesAlpha=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTilesAlphaChange(e,n),null!=(n=this.tilesAlphaAutoruns)&&(this.tilesAlphaAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateTilesAlpha:function(){var e=this.unobservedTilesAlpha,e=(this.emitTilesAlphaChange(e,e),this.tilesAlphaAutoruns);null!=e&&(this.tilesAlphaAutoruns=null,M.invalidateAutorunArray(e))},unobservedTilesAlpha:null,__cbOnTilesAlphaChange:null,__cbOnceTilesAlphaChange:null,__cbOnOwnerUnbindTilesAlphaChange:null,__cbOnceOwnerUnbindTilesAlphaChange:null,emitTilesAlphaChange:function(e,n){var t=0;if(null!=this.__cbOnTilesAlphaChange&&(t+=this.__cbOnTilesAlphaChange.length),null!=this.__cbOnceTilesAlphaChange&&(t+=this.__cbOnceTilesAlphaChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTilesAlphaChange)for(var r=0,a=this.__cbOnTilesAlphaChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTilesAlphaChange[h],++s):--t}if(null!=this.__cbOnceTilesAlphaChange){for(var u=null,c=null,r=0,a=this.__cbOnceTilesAlphaChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTilesAlphaChange[h],this.__cbOnceTilesAlphaChange[h]=null,o=this.__cbOnceOwnerUnbindTilesAlphaChange[h],(this.__cbOnceOwnerUnbindTilesAlphaChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTilesAlphaChange[h]),c.push(this.__cbOnceTilesAlphaChange[h]))}this.__cbOnceOwnerUnbindTilesAlphaChange=u,this.__cbOnceTilesAlphaChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTilesAlphaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesAlphaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesAlphaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTilesAlphaChange&&(this.__cbOnOwnerUnbindTilesAlphaChange=[]),this.__cbOnOwnerUnbindTilesAlphaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTilesAlphaChange&&(this.__cbOnOwnerUnbindTilesAlphaChange=[]),this.__cbOnOwnerUnbindTilesAlphaChange.push(null);null==this.__cbOnTilesAlphaChange&&(this.__cbOnTilesAlphaChange=[]),this.__cbOnTilesAlphaChange.push(t)},onceTilesAlphaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesAlphaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesAlphaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTilesAlphaChange&&(this.__cbOnceOwnerUnbindTilesAlphaChange=[]),this.__cbOnceOwnerUnbindTilesAlphaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTilesAlphaChange&&(this.__cbOnceOwnerUnbindTilesAlphaChange=[]),this.__cbOnceOwnerUnbindTilesAlphaChange.push(null);null==this.__cbOnceTilesAlphaChange&&(this.__cbOnceTilesAlphaChange=[]),this.__cbOnceTilesAlphaChange.push(t)},offTilesAlphaChange:function(e){if(null!=e){var n;null!=this.__cbOnTilesAlphaChange&&-1!=(n=this.__cbOnTilesAlphaChange.indexOf(e))&&(this.__cbOnTilesAlphaChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTilesAlphaChange[n])&&s(),this.__cbOnOwnerUnbindTilesAlphaChange.splice(n,1)),null!=this.__cbOnceTilesAlphaChange&&-1!=(n=this.__cbOnceTilesAlphaChange.indexOf(e))&&(this.__cbOnceTilesAlphaChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTilesAlphaChange[n])&&s(),this.__cbOnceOwnerUnbindTilesAlphaChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTilesAlphaChange){for(var t=0,i=this.__cbOnOwnerUnbindTilesAlphaChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTilesAlphaChange[l])&&s()}this.__cbOnOwnerUnbindTilesAlphaChange=null}if(null!=this.__cbOnceOwnerUnbindTilesAlphaChange){for(t=0,i=this.__cbOnceOwnerUnbindTilesAlphaChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTilesAlphaChange[l])&&s()}this.__cbOnceOwnerUnbindTilesAlphaChange=null}this.__cbOnTilesAlphaChange=null,this.__cbOnceTilesAlphaChange=null}},listensTilesAlphaChange:function(){return null!=this.__cbOnTilesAlphaChange&&0<this.__cbOnTilesAlphaChange.length||null!=this.__cbOnceTilesAlphaChange&&0<this.__cbOnceTilesAlphaChange.length},tilesOffsetXAutoruns:null,get_tilesOffsetX:function(){var e,n,t=this.unobservedTilesOffsetX;return null!=M.current&&(e=M.current,null!=(n=this.tilesOffsetXAutoruns)||(n=M.getAutorunArray(),null!=(this.tilesOffsetXAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tilesOffsetX:function(e){var n=this.unobservedTilesOffsetX;return this.unobservedTilesOffsetX=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTilesOffsetXChange(e,n),null!=(n=this.tilesOffsetXAutoruns)&&(this.tilesOffsetXAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateTilesOffsetX:function(){var e=this.unobservedTilesOffsetX,e=(this.emitTilesOffsetXChange(e,e),this.tilesOffsetXAutoruns);null!=e&&(this.tilesOffsetXAutoruns=null,M.invalidateAutorunArray(e))},unobservedTilesOffsetX:null,__cbOnTilesOffsetXChange:null,__cbOnceTilesOffsetXChange:null,__cbOnOwnerUnbindTilesOffsetXChange:null,__cbOnceOwnerUnbindTilesOffsetXChange:null,emitTilesOffsetXChange:function(e,n){var t=0;if(null!=this.__cbOnTilesOffsetXChange&&(t+=this.__cbOnTilesOffsetXChange.length),null!=this.__cbOnceTilesOffsetXChange&&(t+=this.__cbOnceTilesOffsetXChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTilesOffsetXChange)for(var r=0,a=this.__cbOnTilesOffsetXChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTilesOffsetXChange[h],++s):--t}if(null!=this.__cbOnceTilesOffsetXChange){for(var u=null,c=null,r=0,a=this.__cbOnceTilesOffsetXChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTilesOffsetXChange[h],this.__cbOnceTilesOffsetXChange[h]=null,o=this.__cbOnceOwnerUnbindTilesOffsetXChange[h],(this.__cbOnceOwnerUnbindTilesOffsetXChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTilesOffsetXChange[h]),c.push(this.__cbOnceTilesOffsetXChange[h]))}this.__cbOnceOwnerUnbindTilesOffsetXChange=u,this.__cbOnceTilesOffsetXChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTilesOffsetXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesOffsetXChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesOffsetXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTilesOffsetXChange&&(this.__cbOnOwnerUnbindTilesOffsetXChange=[]),this.__cbOnOwnerUnbindTilesOffsetXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTilesOffsetXChange&&(this.__cbOnOwnerUnbindTilesOffsetXChange=[]),this.__cbOnOwnerUnbindTilesOffsetXChange.push(null);null==this.__cbOnTilesOffsetXChange&&(this.__cbOnTilesOffsetXChange=[]),this.__cbOnTilesOffsetXChange.push(t)},onceTilesOffsetXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesOffsetXChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesOffsetXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTilesOffsetXChange&&(this.__cbOnceOwnerUnbindTilesOffsetXChange=[]),this.__cbOnceOwnerUnbindTilesOffsetXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTilesOffsetXChange&&(this.__cbOnceOwnerUnbindTilesOffsetXChange=[]),this.__cbOnceOwnerUnbindTilesOffsetXChange.push(null);null==this.__cbOnceTilesOffsetXChange&&(this.__cbOnceTilesOffsetXChange=[]),this.__cbOnceTilesOffsetXChange.push(t)},offTilesOffsetXChange:function(e){if(null!=e){var n;null!=this.__cbOnTilesOffsetXChange&&-1!=(n=this.__cbOnTilesOffsetXChange.indexOf(e))&&(this.__cbOnTilesOffsetXChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTilesOffsetXChange[n])&&s(),this.__cbOnOwnerUnbindTilesOffsetXChange.splice(n,1)),null!=this.__cbOnceTilesOffsetXChange&&-1!=(n=this.__cbOnceTilesOffsetXChange.indexOf(e))&&(this.__cbOnceTilesOffsetXChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTilesOffsetXChange[n])&&s(),this.__cbOnceOwnerUnbindTilesOffsetXChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTilesOffsetXChange){for(var t=0,i=this.__cbOnOwnerUnbindTilesOffsetXChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTilesOffsetXChange[l])&&s()}this.__cbOnOwnerUnbindTilesOffsetXChange=null}if(null!=this.__cbOnceOwnerUnbindTilesOffsetXChange){for(t=0,i=this.__cbOnceOwnerUnbindTilesOffsetXChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTilesOffsetXChange[l])&&s()}this.__cbOnceOwnerUnbindTilesOffsetXChange=null}this.__cbOnTilesOffsetXChange=null,this.__cbOnceTilesOffsetXChange=null}},listensTilesOffsetXChange:function(){return null!=this.__cbOnTilesOffsetXChange&&0<this.__cbOnTilesOffsetXChange.length||null!=this.__cbOnceTilesOffsetXChange&&0<this.__cbOnceTilesOffsetXChange.length},tilesOffsetYAutoruns:null,get_tilesOffsetY:function(){var e,n,t=this.unobservedTilesOffsetY;return null!=M.current&&(e=M.current,null!=(n=this.tilesOffsetYAutoruns)||(n=M.getAutorunArray(),null!=(this.tilesOffsetYAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tilesOffsetY:function(e){var n=this.unobservedTilesOffsetY;return this.unobservedTilesOffsetY=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTilesOffsetYChange(e,n),null!=(n=this.tilesOffsetYAutoruns)&&(this.tilesOffsetYAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateTilesOffsetY:function(){var e=this.unobservedTilesOffsetY,e=(this.emitTilesOffsetYChange(e,e),this.tilesOffsetYAutoruns);null!=e&&(this.tilesOffsetYAutoruns=null,M.invalidateAutorunArray(e))},unobservedTilesOffsetY:null,__cbOnTilesOffsetYChange:null,__cbOnceTilesOffsetYChange:null,__cbOnOwnerUnbindTilesOffsetYChange:null,__cbOnceOwnerUnbindTilesOffsetYChange:null,emitTilesOffsetYChange:function(e,n){var t=0;if(null!=this.__cbOnTilesOffsetYChange&&(t+=this.__cbOnTilesOffsetYChange.length),null!=this.__cbOnceTilesOffsetYChange&&(t+=this.__cbOnceTilesOffsetYChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTilesOffsetYChange)for(var r=0,a=this.__cbOnTilesOffsetYChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTilesOffsetYChange[h],++s):--t}if(null!=this.__cbOnceTilesOffsetYChange){for(var u=null,c=null,r=0,a=this.__cbOnceTilesOffsetYChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTilesOffsetYChange[h],this.__cbOnceTilesOffsetYChange[h]=null,o=this.__cbOnceOwnerUnbindTilesOffsetYChange[h],(this.__cbOnceOwnerUnbindTilesOffsetYChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTilesOffsetYChange[h]),c.push(this.__cbOnceTilesOffsetYChange[h]))}this.__cbOnceOwnerUnbindTilesOffsetYChange=u,this.__cbOnceTilesOffsetYChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTilesOffsetYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesOffsetYChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesOffsetYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTilesOffsetYChange&&(this.__cbOnOwnerUnbindTilesOffsetYChange=[]),this.__cbOnOwnerUnbindTilesOffsetYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTilesOffsetYChange&&(this.__cbOnOwnerUnbindTilesOffsetYChange=[]),this.__cbOnOwnerUnbindTilesOffsetYChange.push(null);null==this.__cbOnTilesOffsetYChange&&(this.__cbOnTilesOffsetYChange=[]),this.__cbOnTilesOffsetYChange.push(t)},onceTilesOffsetYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tilesOffsetYChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTilesOffsetYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTilesOffsetYChange&&(this.__cbOnceOwnerUnbindTilesOffsetYChange=[]),this.__cbOnceOwnerUnbindTilesOffsetYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTilesOffsetYChange&&(this.__cbOnceOwnerUnbindTilesOffsetYChange=[]),this.__cbOnceOwnerUnbindTilesOffsetYChange.push(null);null==this.__cbOnceTilesOffsetYChange&&(this.__cbOnceTilesOffsetYChange=[]),this.__cbOnceTilesOffsetYChange.push(t)},offTilesOffsetYChange:function(e){if(null!=e){var n;null!=this.__cbOnTilesOffsetYChange&&-1!=(n=this.__cbOnTilesOffsetYChange.indexOf(e))&&(this.__cbOnTilesOffsetYChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTilesOffsetYChange[n])&&s(),this.__cbOnOwnerUnbindTilesOffsetYChange.splice(n,1)),null!=this.__cbOnceTilesOffsetYChange&&-1!=(n=this.__cbOnceTilesOffsetYChange.indexOf(e))&&(this.__cbOnceTilesOffsetYChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTilesOffsetYChange[n])&&s(),this.__cbOnceOwnerUnbindTilesOffsetYChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTilesOffsetYChange){for(var t=0,i=this.__cbOnOwnerUnbindTilesOffsetYChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTilesOffsetYChange[l])&&s()}this.__cbOnOwnerUnbindTilesOffsetYChange=null}if(null!=this.__cbOnceOwnerUnbindTilesOffsetYChange){for(t=0,i=this.__cbOnceOwnerUnbindTilesOffsetYChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTilesOffsetYChange[l])&&s()}this.__cbOnceOwnerUnbindTilesOffsetYChange=null}this.__cbOnTilesOffsetYChange=null,this.__cbOnceTilesOffsetYChange=null}},listensTilesOffsetYChange:function(){return null!=this.__cbOnTilesOffsetYChange&&0<this.__cbOnTilesOffsetYChange.length||null!=this.__cbOnceTilesOffsetYChange&&0<this.__cbOnceTilesOffsetYChange.length},computedTilesAutoruns:null,get_computedTiles:function(){var e,n,t=this.unobservedComputedTiles;return null!=M.current&&(e=M.current,null!=(n=this.computedTilesAutoruns)||(n=M.getAutorunArray(),null!=(this.computedTilesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_computedTiles:function(e){var n=this.unobservedComputedTiles;return this.unobservedComputedTiles=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitComputedTilesChange(e,n),null!=(n=this.computedTilesAutoruns)&&(this.computedTilesAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateComputedTiles:function(){var e=this.unobservedComputedTiles,e=(this.emitComputedTilesChange(e,e),this.computedTilesAutoruns);null!=e&&(this.computedTilesAutoruns=null,M.invalidateAutorunArray(e))},unobservedComputedTiles:null,__cbOnComputedTilesChange:null,__cbOnceComputedTilesChange:null,__cbOnOwnerUnbindComputedTilesChange:null,__cbOnceOwnerUnbindComputedTilesChange:null,emitComputedTilesChange:function(e,n){var t=0;if(null!=this.__cbOnComputedTilesChange&&(t+=this.__cbOnComputedTilesChange.length),null!=this.__cbOnceComputedTilesChange&&(t+=this.__cbOnceComputedTilesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnComputedTilesChange)for(var r=0,a=this.__cbOnComputedTilesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnComputedTilesChange[h],++s):--t}if(null!=this.__cbOnceComputedTilesChange){for(var u=null,c=null,r=0,a=this.__cbOnceComputedTilesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceComputedTilesChange[h],this.__cbOnceComputedTilesChange[h]=null,o=this.__cbOnceOwnerUnbindComputedTilesChange[h],(this.__cbOnceOwnerUnbindComputedTilesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindComputedTilesChange[h]),c.push(this.__cbOnceComputedTilesChange[h]))}this.__cbOnceOwnerUnbindComputedTilesChange=u,this.__cbOnceComputedTilesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onComputedTilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindComputedTilesChange&&(this.__cbOnOwnerUnbindComputedTilesChange=[]),this.__cbOnOwnerUnbindComputedTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindComputedTilesChange&&(this.__cbOnOwnerUnbindComputedTilesChange=[]),this.__cbOnOwnerUnbindComputedTilesChange.push(null);null==this.__cbOnComputedTilesChange&&(this.__cbOnComputedTilesChange=[]),this.__cbOnComputedTilesChange.push(t)},onceComputedTilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindComputedTilesChange&&(this.__cbOnceOwnerUnbindComputedTilesChange=[]),this.__cbOnceOwnerUnbindComputedTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindComputedTilesChange&&(this.__cbOnceOwnerUnbindComputedTilesChange=[]),this.__cbOnceOwnerUnbindComputedTilesChange.push(null);null==this.__cbOnceComputedTilesChange&&(this.__cbOnceComputedTilesChange=[]),this.__cbOnceComputedTilesChange.push(t)},offComputedTilesChange:function(e){if(null!=e){var n;null!=this.__cbOnComputedTilesChange&&-1!=(n=this.__cbOnComputedTilesChange.indexOf(e))&&(this.__cbOnComputedTilesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindComputedTilesChange[n])&&s(),this.__cbOnOwnerUnbindComputedTilesChange.splice(n,1)),null!=this.__cbOnceComputedTilesChange&&-1!=(n=this.__cbOnceComputedTilesChange.indexOf(e))&&(this.__cbOnceComputedTilesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindComputedTilesChange[n])&&s(),this.__cbOnceOwnerUnbindComputedTilesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComputedTilesChange){for(var t=0,i=this.__cbOnOwnerUnbindComputedTilesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindComputedTilesChange[l])&&s()}this.__cbOnOwnerUnbindComputedTilesChange=null}if(null!=this.__cbOnceOwnerUnbindComputedTilesChange){for(t=0,i=this.__cbOnceOwnerUnbindComputedTilesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindComputedTilesChange[l])&&s()}this.__cbOnceOwnerUnbindComputedTilesChange=null}this.__cbOnComputedTilesChange=null,this.__cbOnceComputedTilesChange=null}},listensComputedTilesChange:function(){return null!=this.__cbOnComputedTilesChange&&0<this.__cbOnComputedTilesChange.length||null!=this.__cbOnceComputedTilesChange&&0<this.__cbOnceComputedTilesChange.length},computedTilesAlphaAutoruns:null,get_computedTilesAlpha:function(){var e,n,t=this.unobservedComputedTilesAlpha;return null!=M.current&&(e=M.current,null!=(n=this.computedTilesAlphaAutoruns)||(n=M.getAutorunArray(),null!=(this.computedTilesAlphaAutoruns=n)))&&e.bindToAutorunArray(n),t},set_computedTilesAlpha:function(e){var n=this.unobservedComputedTilesAlpha;return this.unobservedComputedTilesAlpha=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitComputedTilesAlphaChange(e,n),null!=(n=this.computedTilesAlphaAutoruns)&&(this.computedTilesAlphaAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateComputedTilesAlpha:function(){var e=this.unobservedComputedTilesAlpha,e=(this.emitComputedTilesAlphaChange(e,e),this.computedTilesAlphaAutoruns);null!=e&&(this.computedTilesAlphaAutoruns=null,M.invalidateAutorunArray(e))},unobservedComputedTilesAlpha:null,__cbOnComputedTilesAlphaChange:null,__cbOnceComputedTilesAlphaChange:null,__cbOnOwnerUnbindComputedTilesAlphaChange:null,__cbOnceOwnerUnbindComputedTilesAlphaChange:null,emitComputedTilesAlphaChange:function(e,n){var t=0;if(null!=this.__cbOnComputedTilesAlphaChange&&(t+=this.__cbOnComputedTilesAlphaChange.length),null!=this.__cbOnceComputedTilesAlphaChange&&(t+=this.__cbOnceComputedTilesAlphaChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnComputedTilesAlphaChange)for(var r=0,a=this.__cbOnComputedTilesAlphaChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnComputedTilesAlphaChange[h],++s):--t}if(null!=this.__cbOnceComputedTilesAlphaChange){for(var u=null,c=null,r=0,a=this.__cbOnceComputedTilesAlphaChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceComputedTilesAlphaChange[h],this.__cbOnceComputedTilesAlphaChange[h]=null,o=this.__cbOnceOwnerUnbindComputedTilesAlphaChange[h],(this.__cbOnceOwnerUnbindComputedTilesAlphaChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindComputedTilesAlphaChange[h]),c.push(this.__cbOnceComputedTilesAlphaChange[h]))}this.__cbOnceOwnerUnbindComputedTilesAlphaChange=u,this.__cbOnceComputedTilesAlphaChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onComputedTilesAlphaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesAlphaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesAlphaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindComputedTilesAlphaChange&&(this.__cbOnOwnerUnbindComputedTilesAlphaChange=[]),this.__cbOnOwnerUnbindComputedTilesAlphaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindComputedTilesAlphaChange&&(this.__cbOnOwnerUnbindComputedTilesAlphaChange=[]),this.__cbOnOwnerUnbindComputedTilesAlphaChange.push(null);null==this.__cbOnComputedTilesAlphaChange&&(this.__cbOnComputedTilesAlphaChange=[]),this.__cbOnComputedTilesAlphaChange.push(t)},onceComputedTilesAlphaChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesAlphaChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesAlphaChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindComputedTilesAlphaChange&&(this.__cbOnceOwnerUnbindComputedTilesAlphaChange=[]),this.__cbOnceOwnerUnbindComputedTilesAlphaChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindComputedTilesAlphaChange&&(this.__cbOnceOwnerUnbindComputedTilesAlphaChange=[]),this.__cbOnceOwnerUnbindComputedTilesAlphaChange.push(null);null==this.__cbOnceComputedTilesAlphaChange&&(this.__cbOnceComputedTilesAlphaChange=[]),this.__cbOnceComputedTilesAlphaChange.push(t)},offComputedTilesAlphaChange:function(e){if(null!=e){var n;null!=this.__cbOnComputedTilesAlphaChange&&-1!=(n=this.__cbOnComputedTilesAlphaChange.indexOf(e))&&(this.__cbOnComputedTilesAlphaChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindComputedTilesAlphaChange[n])&&s(),this.__cbOnOwnerUnbindComputedTilesAlphaChange.splice(n,1)),null!=this.__cbOnceComputedTilesAlphaChange&&-1!=(n=this.__cbOnceComputedTilesAlphaChange.indexOf(e))&&(this.__cbOnceComputedTilesAlphaChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindComputedTilesAlphaChange[n])&&s(),this.__cbOnceOwnerUnbindComputedTilesAlphaChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComputedTilesAlphaChange){for(var t=0,i=this.__cbOnOwnerUnbindComputedTilesAlphaChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindComputedTilesAlphaChange[l])&&s()}this.__cbOnOwnerUnbindComputedTilesAlphaChange=null}if(null!=this.__cbOnceOwnerUnbindComputedTilesAlphaChange){for(t=0,i=this.__cbOnceOwnerUnbindComputedTilesAlphaChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindComputedTilesAlphaChange[l])&&s()}this.__cbOnceOwnerUnbindComputedTilesAlphaChange=null}this.__cbOnComputedTilesAlphaChange=null,this.__cbOnceComputedTilesAlphaChange=null}},listensComputedTilesAlphaChange:function(){return null!=this.__cbOnComputedTilesAlphaChange&&0<this.__cbOnComputedTilesAlphaChange.length||null!=this.__cbOnceComputedTilesAlphaChange&&0<this.__cbOnceComputedTilesAlphaChange.length},computedTilesOffsetXAutoruns:null,get_computedTilesOffsetX:function(){var e,n,t=this.unobservedComputedTilesOffsetX;return null!=M.current&&(e=M.current,null!=(n=this.computedTilesOffsetXAutoruns)||(n=M.getAutorunArray(),null!=(this.computedTilesOffsetXAutoruns=n)))&&e.bindToAutorunArray(n),t},set_computedTilesOffsetX:function(e){var n=this.unobservedComputedTilesOffsetX;return this.unobservedComputedTilesOffsetX=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitComputedTilesOffsetXChange(e,n),null!=(n=this.computedTilesOffsetXAutoruns)&&(this.computedTilesOffsetXAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateComputedTilesOffsetX:function(){var e=this.unobservedComputedTilesOffsetX,e=(this.emitComputedTilesOffsetXChange(e,e),this.computedTilesOffsetXAutoruns);null!=e&&(this.computedTilesOffsetXAutoruns=null,M.invalidateAutorunArray(e))},unobservedComputedTilesOffsetX:null,__cbOnComputedTilesOffsetXChange:null,__cbOnceComputedTilesOffsetXChange:null,__cbOnOwnerUnbindComputedTilesOffsetXChange:null,__cbOnceOwnerUnbindComputedTilesOffsetXChange:null,emitComputedTilesOffsetXChange:function(e,n){var t=0;if(null!=this.__cbOnComputedTilesOffsetXChange&&(t+=this.__cbOnComputedTilesOffsetXChange.length),null!=this.__cbOnceComputedTilesOffsetXChange&&(t+=this.__cbOnceComputedTilesOffsetXChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnComputedTilesOffsetXChange)for(var r=0,a=this.__cbOnComputedTilesOffsetXChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnComputedTilesOffsetXChange[h],++s):--t}if(null!=this.__cbOnceComputedTilesOffsetXChange){for(var u=null,c=null,r=0,a=this.__cbOnceComputedTilesOffsetXChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceComputedTilesOffsetXChange[h],this.__cbOnceComputedTilesOffsetXChange[h]=null,o=this.__cbOnceOwnerUnbindComputedTilesOffsetXChange[h],(this.__cbOnceOwnerUnbindComputedTilesOffsetXChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindComputedTilesOffsetXChange[h]),c.push(this.__cbOnceComputedTilesOffsetXChange[h]))}this.__cbOnceOwnerUnbindComputedTilesOffsetXChange=u,this.__cbOnceComputedTilesOffsetXChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onComputedTilesOffsetXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesOffsetXChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesOffsetXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindComputedTilesOffsetXChange&&(this.__cbOnOwnerUnbindComputedTilesOffsetXChange=[]),this.__cbOnOwnerUnbindComputedTilesOffsetXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindComputedTilesOffsetXChange&&(this.__cbOnOwnerUnbindComputedTilesOffsetXChange=[]),this.__cbOnOwnerUnbindComputedTilesOffsetXChange.push(null);null==this.__cbOnComputedTilesOffsetXChange&&(this.__cbOnComputedTilesOffsetXChange=[]),this.__cbOnComputedTilesOffsetXChange.push(t)},onceComputedTilesOffsetXChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesOffsetXChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesOffsetXChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindComputedTilesOffsetXChange&&(this.__cbOnceOwnerUnbindComputedTilesOffsetXChange=[]),this.__cbOnceOwnerUnbindComputedTilesOffsetXChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindComputedTilesOffsetXChange&&(this.__cbOnceOwnerUnbindComputedTilesOffsetXChange=[]),this.__cbOnceOwnerUnbindComputedTilesOffsetXChange.push(null);null==this.__cbOnceComputedTilesOffsetXChange&&(this.__cbOnceComputedTilesOffsetXChange=[]),this.__cbOnceComputedTilesOffsetXChange.push(t)},offComputedTilesOffsetXChange:function(e){if(null!=e){var n;null!=this.__cbOnComputedTilesOffsetXChange&&-1!=(n=this.__cbOnComputedTilesOffsetXChange.indexOf(e))&&(this.__cbOnComputedTilesOffsetXChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindComputedTilesOffsetXChange[n])&&s(),this.__cbOnOwnerUnbindComputedTilesOffsetXChange.splice(n,1)),null!=this.__cbOnceComputedTilesOffsetXChange&&-1!=(n=this.__cbOnceComputedTilesOffsetXChange.indexOf(e))&&(this.__cbOnceComputedTilesOffsetXChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindComputedTilesOffsetXChange[n])&&s(),this.__cbOnceOwnerUnbindComputedTilesOffsetXChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComputedTilesOffsetXChange){for(var t=0,i=this.__cbOnOwnerUnbindComputedTilesOffsetXChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindComputedTilesOffsetXChange[l])&&s()}this.__cbOnOwnerUnbindComputedTilesOffsetXChange=null}if(null!=this.__cbOnceOwnerUnbindComputedTilesOffsetXChange){for(t=0,i=this.__cbOnceOwnerUnbindComputedTilesOffsetXChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindComputedTilesOffsetXChange[l])&&s()}this.__cbOnceOwnerUnbindComputedTilesOffsetXChange=null}this.__cbOnComputedTilesOffsetXChange=null,this.__cbOnceComputedTilesOffsetXChange=null}},listensComputedTilesOffsetXChange:function(){return null!=this.__cbOnComputedTilesOffsetXChange&&0<this.__cbOnComputedTilesOffsetXChange.length||null!=this.__cbOnceComputedTilesOffsetXChange&&0<this.__cbOnceComputedTilesOffsetXChange.length},computedTilesOffsetYAutoruns:null,get_computedTilesOffsetY:function(){var e,n,t=this.unobservedComputedTilesOffsetY;return null!=M.current&&(e=M.current,null!=(n=this.computedTilesOffsetYAutoruns)||(n=M.getAutorunArray(),null!=(this.computedTilesOffsetYAutoruns=n)))&&e.bindToAutorunArray(n),t},set_computedTilesOffsetY:function(e){var n=this.unobservedComputedTilesOffsetY;return this.unobservedComputedTilesOffsetY=e,xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitComputedTilesOffsetYChange(e,n),null!=(n=this.computedTilesOffsetYAutoruns)&&(this.computedTilesOffsetYAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateComputedTilesOffsetY:function(){var e=this.unobservedComputedTilesOffsetY,e=(this.emitComputedTilesOffsetYChange(e,e),this.computedTilesOffsetYAutoruns);null!=e&&(this.computedTilesOffsetYAutoruns=null,M.invalidateAutorunArray(e))},unobservedComputedTilesOffsetY:null,__cbOnComputedTilesOffsetYChange:null,__cbOnceComputedTilesOffsetYChange:null,__cbOnOwnerUnbindComputedTilesOffsetYChange:null,__cbOnceOwnerUnbindComputedTilesOffsetYChange:null,emitComputedTilesOffsetYChange:function(e,n){var t=0;if(null!=this.__cbOnComputedTilesOffsetYChange&&(t+=this.__cbOnComputedTilesOffsetYChange.length),null!=this.__cbOnceComputedTilesOffsetYChange&&(t+=this.__cbOnceComputedTilesOffsetYChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnComputedTilesOffsetYChange)for(var r=0,a=this.__cbOnComputedTilesOffsetYChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnComputedTilesOffsetYChange[h],++s):--t}if(null!=this.__cbOnceComputedTilesOffsetYChange){for(var u=null,c=null,r=0,a=this.__cbOnceComputedTilesOffsetYChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceComputedTilesOffsetYChange[h],this.__cbOnceComputedTilesOffsetYChange[h]=null,o=this.__cbOnceOwnerUnbindComputedTilesOffsetYChange[h],(this.__cbOnceOwnerUnbindComputedTilesOffsetYChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindComputedTilesOffsetYChange[h]),c.push(this.__cbOnceComputedTilesOffsetYChange[h]))}this.__cbOnceOwnerUnbindComputedTilesOffsetYChange=u,this.__cbOnceComputedTilesOffsetYChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onComputedTilesOffsetYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesOffsetYChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesOffsetYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindComputedTilesOffsetYChange&&(this.__cbOnOwnerUnbindComputedTilesOffsetYChange=[]),this.__cbOnOwnerUnbindComputedTilesOffsetYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindComputedTilesOffsetYChange&&(this.__cbOnOwnerUnbindComputedTilesOffsetYChange=[]),this.__cbOnOwnerUnbindComputedTilesOffsetYChange.push(null);null==this.__cbOnComputedTilesOffsetYChange&&(this.__cbOnComputedTilesOffsetYChange=[]),this.__cbOnComputedTilesOffsetYChange.push(t)},onceComputedTilesOffsetYChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event computedTilesOffsetYChange because owner is destroyed!");var l=function(e){null!=t&&(i.offComputedTilesOffsetYChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindComputedTilesOffsetYChange&&(this.__cbOnceOwnerUnbindComputedTilesOffsetYChange=[]),this.__cbOnceOwnerUnbindComputedTilesOffsetYChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindComputedTilesOffsetYChange&&(this.__cbOnceOwnerUnbindComputedTilesOffsetYChange=[]),this.__cbOnceOwnerUnbindComputedTilesOffsetYChange.push(null);null==this.__cbOnceComputedTilesOffsetYChange&&(this.__cbOnceComputedTilesOffsetYChange=[]),this.__cbOnceComputedTilesOffsetYChange.push(t)},offComputedTilesOffsetYChange:function(e){if(null!=e){var n;null!=this.__cbOnComputedTilesOffsetYChange&&-1!=(n=this.__cbOnComputedTilesOffsetYChange.indexOf(e))&&(this.__cbOnComputedTilesOffsetYChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindComputedTilesOffsetYChange[n])&&s(),this.__cbOnOwnerUnbindComputedTilesOffsetYChange.splice(n,1)),null!=this.__cbOnceComputedTilesOffsetYChange&&-1!=(n=this.__cbOnceComputedTilesOffsetYChange.indexOf(e))&&(this.__cbOnceComputedTilesOffsetYChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindComputedTilesOffsetYChange[n])&&s(),this.__cbOnceOwnerUnbindComputedTilesOffsetYChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComputedTilesOffsetYChange){for(var t=0,i=this.__cbOnOwnerUnbindComputedTilesOffsetYChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindComputedTilesOffsetYChange[l])&&s()}this.__cbOnOwnerUnbindComputedTilesOffsetYChange=null}if(null!=this.__cbOnceOwnerUnbindComputedTilesOffsetYChange){for(t=0,i=this.__cbOnceOwnerUnbindComputedTilesOffsetYChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindComputedTilesOffsetYChange[l])&&s()}this.__cbOnceOwnerUnbindComputedTilesOffsetYChange=null}this.__cbOnComputedTilesOffsetYChange=null,this.__cbOnceComputedTilesOffsetYChange=null}},listensComputedTilesOffsetYChange:function(){return null!=this.__cbOnComputedTilesOffsetYChange&&0<this.__cbOnComputedTilesOffsetYChange.length||null!=this.__cbOnceComputedTilesOffsetYChange&&0<this.__cbOnceComputedTilesOffsetYChange.length},willListenHasTilesChange:function(){this.get_unobservedHasTiles()},get_unobservedHasTiles:function(){var n,t;return 0<=this._lifecycleState?null==this.computeAutorunHasTiles?(n=this,t=new M(null),this.computedOnceHasTiles=!0,(this.computeAutorunHasTiles=t).onRun=function(){var e=n.computeHasTiles();M.unobserve(),n.set_hasTiles(e),M.reobserve()},t.onDestroy(this,function(e){n.computeAutorunHasTiles==t&&(n.computeAutorunHasTiles=null),n=t=null}),this.onDestroy(t,function(e){null!=t&&(t.destroy(),t=null),n=null}),t.run()):this.computeAutorunHasTiles.invalidated&&this.computeAutorunHasTiles.run():this.computedOnceHasTiles||(M.unobserve(),this.computedOnceHasTiles=!0,this.unobservedHasTiles=this.computeHasTiles(),M.reobserve()),this.unobservedHasTiles},hasTilesAutoruns:null,get_hasTiles:function(){var e,n,t=this.get_unobservedHasTiles();return null!=M.current&&(e=M.current,null!=(n=this.hasTilesAutoruns)||(n=M.getAutorunArray(),null!=(this.hasTilesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_hasTiles:function(e){var n=this.get_unobservedHasTiles();return n!=(this.unobservedHasTiles=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitHasTilesChange(e,n),null!=(n=this.hasTilesAutoruns))&&(this.hasTilesAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateHasTiles:function(){var e=this.get_unobservedHasTiles(),e=(this.emitHasTilesChange(e,e),this.hasTilesAutoruns);null!=e&&(this.hasTilesAutoruns=null,M.invalidateAutorunArray(e))},unobservedHasTiles:null,__cbOnHasTilesChange:null,__cbOnceHasTilesChange:null,__cbOnOwnerUnbindHasTilesChange:null,__cbOnceOwnerUnbindHasTilesChange:null,emitHasTilesChange:function(e,n){var t=0;if(null!=this.__cbOnHasTilesChange&&(t+=this.__cbOnHasTilesChange.length),null!=this.__cbOnceHasTilesChange&&(t+=this.__cbOnceHasTilesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnHasTilesChange)for(var r=0,a=this.__cbOnHasTilesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnHasTilesChange[h],++s):--t}if(null!=this.__cbOnceHasTilesChange){for(var u=null,c=null,r=0,a=this.__cbOnceHasTilesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceHasTilesChange[h],this.__cbOnceHasTilesChange[h]=null,o=this.__cbOnceOwnerUnbindHasTilesChange[h],(this.__cbOnceOwnerUnbindHasTilesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindHasTilesChange[h]),c.push(this.__cbOnceHasTilesChange[h]))}this.__cbOnceOwnerUnbindHasTilesChange=u,this.__cbOnceHasTilesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onHasTilesChange:function(n,t){var i=this;if(null==this.__cbOnHasTilesChange&&null==this.__cbOnceHasTilesChange&&this.willListenHasTilesChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event hasTilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHasTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindHasTilesChange&&(this.__cbOnOwnerUnbindHasTilesChange=[]),this.__cbOnOwnerUnbindHasTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindHasTilesChange&&(this.__cbOnOwnerUnbindHasTilesChange=[]),this.__cbOnOwnerUnbindHasTilesChange.push(null);null==this.__cbOnHasTilesChange&&(this.__cbOnHasTilesChange=[]),this.__cbOnHasTilesChange.push(t)},onceHasTilesChange:function(n,t){var i=this;if(null==this.__cbOnHasTilesChange&&null==this.__cbOnceHasTilesChange&&this.willListenHasTilesChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event hasTilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHasTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindHasTilesChange&&(this.__cbOnceOwnerUnbindHasTilesChange=[]),this.__cbOnceOwnerUnbindHasTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindHasTilesChange&&(this.__cbOnceOwnerUnbindHasTilesChange=[]),this.__cbOnceOwnerUnbindHasTilesChange.push(null);null==this.__cbOnceHasTilesChange&&(this.__cbOnceHasTilesChange=[]),this.__cbOnceHasTilesChange.push(t)},offHasTilesChange:function(e){if(null!=e){var n;null!=this.__cbOnHasTilesChange&&-1!=(n=this.__cbOnHasTilesChange.indexOf(e))&&(this.__cbOnHasTilesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindHasTilesChange[n])&&s(),this.__cbOnOwnerUnbindHasTilesChange.splice(n,1)),null!=this.__cbOnceHasTilesChange&&-1!=(n=this.__cbOnceHasTilesChange.indexOf(e))&&(this.__cbOnceHasTilesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindHasTilesChange[n])&&s(),this.__cbOnceOwnerUnbindHasTilesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindHasTilesChange){for(var t=0,i=this.__cbOnOwnerUnbindHasTilesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindHasTilesChange[l])&&s()}this.__cbOnOwnerUnbindHasTilesChange=null}if(null!=this.__cbOnceOwnerUnbindHasTilesChange){for(t=0,i=this.__cbOnceOwnerUnbindHasTilesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindHasTilesChange[l])&&s()}this.__cbOnceOwnerUnbindHasTilesChange=null}this.__cbOnHasTilesChange=null,this.__cbOnceHasTilesChange=null}},listensHasTilesChange:function(){return null!=this.__cbOnHasTilesChange&&0<this.__cbOnHasTilesChange.length||null!=this.__cbOnceHasTilesChange&&0<this.__cbOnceHasTilesChange.length},computeHasTiles:function(){return null!=this.get_tiles()&&0<this.get_tiles().length||null!=this.get_computedTiles()&&0<this.get_computedTiles().length},computeAutorunHasTiles:null,computedOnceHasTiles:null,shouldRenderTilesAutoruns:null,get_shouldRenderTiles:function(){var e,n,t=this.unobservedShouldRenderTiles;return null!=M.current&&(e=M.current,null!=(n=this.shouldRenderTilesAutoruns)||(n=M.getAutorunArray(),null!=(this.shouldRenderTilesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_shouldRenderTiles:function(e){var n=this.unobservedShouldRenderTiles;return n!=(this.unobservedShouldRenderTiles=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitShouldRenderTilesChange(e,n),null!=(n=this.shouldRenderTilesAutoruns))&&(this.shouldRenderTilesAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateShouldRenderTiles:function(){var e=this.unobservedShouldRenderTiles,e=(this.emitShouldRenderTilesChange(e,e),this.shouldRenderTilesAutoruns);null!=e&&(this.shouldRenderTilesAutoruns=null,M.invalidateAutorunArray(e))},unobservedShouldRenderTiles:null,__cbOnShouldRenderTilesChange:null,__cbOnceShouldRenderTilesChange:null,__cbOnOwnerUnbindShouldRenderTilesChange:null,__cbOnceOwnerUnbindShouldRenderTilesChange:null,emitShouldRenderTilesChange:function(e,n){var t=0;if(null!=this.__cbOnShouldRenderTilesChange&&(t+=this.__cbOnShouldRenderTilesChange.length),null!=this.__cbOnceShouldRenderTilesChange&&(t+=this.__cbOnceShouldRenderTilesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnShouldRenderTilesChange)for(var r=0,a=this.__cbOnShouldRenderTilesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnShouldRenderTilesChange[h],++s):--t}if(null!=this.__cbOnceShouldRenderTilesChange){for(var u=null,c=null,r=0,a=this.__cbOnceShouldRenderTilesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceShouldRenderTilesChange[h],this.__cbOnceShouldRenderTilesChange[h]=null,o=this.__cbOnceOwnerUnbindShouldRenderTilesChange[h],(this.__cbOnceOwnerUnbindShouldRenderTilesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindShouldRenderTilesChange[h]),c.push(this.__cbOnceShouldRenderTilesChange[h]))}this.__cbOnceOwnerUnbindShouldRenderTilesChange=u,this.__cbOnceShouldRenderTilesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onShouldRenderTilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event shouldRenderTilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offShouldRenderTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindShouldRenderTilesChange&&(this.__cbOnOwnerUnbindShouldRenderTilesChange=[]),this.__cbOnOwnerUnbindShouldRenderTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindShouldRenderTilesChange&&(this.__cbOnOwnerUnbindShouldRenderTilesChange=[]),this.__cbOnOwnerUnbindShouldRenderTilesChange.push(null);null==this.__cbOnShouldRenderTilesChange&&(this.__cbOnShouldRenderTilesChange=[]),this.__cbOnShouldRenderTilesChange.push(t)},onceShouldRenderTilesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event shouldRenderTilesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offShouldRenderTilesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindShouldRenderTilesChange&&(this.__cbOnceOwnerUnbindShouldRenderTilesChange=[]),this.__cbOnceOwnerUnbindShouldRenderTilesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindShouldRenderTilesChange&&(this.__cbOnceOwnerUnbindShouldRenderTilesChange=[]),this.__cbOnceOwnerUnbindShouldRenderTilesChange.push(null);null==this.__cbOnceShouldRenderTilesChange&&(this.__cbOnceShouldRenderTilesChange=[]),this.__cbOnceShouldRenderTilesChange.push(t)},offShouldRenderTilesChange:function(e){if(null!=e){var n;null!=this.__cbOnShouldRenderTilesChange&&-1!=(n=this.__cbOnShouldRenderTilesChange.indexOf(e))&&(this.__cbOnShouldRenderTilesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindShouldRenderTilesChange[n])&&s(),this.__cbOnOwnerUnbindShouldRenderTilesChange.splice(n,1)),null!=this.__cbOnceShouldRenderTilesChange&&-1!=(n=this.__cbOnceShouldRenderTilesChange.indexOf(e))&&(this.__cbOnceShouldRenderTilesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindShouldRenderTilesChange[n])&&s(),this.__cbOnceOwnerUnbindShouldRenderTilesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindShouldRenderTilesChange){for(var t=0,i=this.__cbOnOwnerUnbindShouldRenderTilesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindShouldRenderTilesChange[l])&&s()}this.__cbOnOwnerUnbindShouldRenderTilesChange=null}if(null!=this.__cbOnceOwnerUnbindShouldRenderTilesChange){for(t=0,i=this.__cbOnceOwnerUnbindShouldRenderTilesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindShouldRenderTilesChange[l])&&s()}this.__cbOnceOwnerUnbindShouldRenderTilesChange=null}this.__cbOnShouldRenderTilesChange=null,this.__cbOnceShouldRenderTilesChange=null}},listensShouldRenderTilesChange:function(){return null!=this.__cbOnShouldRenderTilesChange&&0<this.__cbOnShouldRenderTilesChange.length||null!=this.__cbOnceShouldRenderTilesChange&&0<this.__cbOnceShouldRenderTilesChange.length},tileWidthAutoruns:null,get_tileWidth:function(){var e,n,t=this.unobservedTileWidth;return null!=M.current&&(e=M.current,null!=(n=this.tileWidthAutoruns)||(n=M.getAutorunArray(),null!=(this.tileWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tileWidth:function(e){var n=this.unobservedTileWidth;return n!=(this.unobservedTileWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTileWidthChange(e,n),null!=(n=this.tileWidthAutoruns))&&(this.tileWidthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTileWidth:function(){var e=this.unobservedTileWidth,e=(this.emitTileWidthChange(e,e),this.tileWidthAutoruns);null!=e&&(this.tileWidthAutoruns=null,M.invalidateAutorunArray(e))},unobservedTileWidth:null,__cbOnTileWidthChange:null,__cbOnceTileWidthChange:null,__cbOnOwnerUnbindTileWidthChange:null,__cbOnceOwnerUnbindTileWidthChange:null,emitTileWidthChange:function(e,n){var t=0;if(null!=this.__cbOnTileWidthChange&&(t+=this.__cbOnTileWidthChange.length),null!=this.__cbOnceTileWidthChange&&(t+=this.__cbOnceTileWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTileWidthChange)for(var r=0,a=this.__cbOnTileWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTileWidthChange[h],++s):--t}if(null!=this.__cbOnceTileWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceTileWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTileWidthChange[h],this.__cbOnceTileWidthChange[h]=null,o=this.__cbOnceOwnerUnbindTileWidthChange[h],(this.__cbOnceOwnerUnbindTileWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTileWidthChange[h]),c.push(this.__cbOnceTileWidthChange[h]))}this.__cbOnceOwnerUnbindTileWidthChange=u,this.__cbOnceTileWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTileWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTileWidthChange&&(this.__cbOnOwnerUnbindTileWidthChange=[]),this.__cbOnOwnerUnbindTileWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTileWidthChange&&(this.__cbOnOwnerUnbindTileWidthChange=[]),this.__cbOnOwnerUnbindTileWidthChange.push(null);null==this.__cbOnTileWidthChange&&(this.__cbOnTileWidthChange=[]),this.__cbOnTileWidthChange.push(t)},onceTileWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTileWidthChange&&(this.__cbOnceOwnerUnbindTileWidthChange=[]),this.__cbOnceOwnerUnbindTileWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTileWidthChange&&(this.__cbOnceOwnerUnbindTileWidthChange=[]),this.__cbOnceOwnerUnbindTileWidthChange.push(null);null==this.__cbOnceTileWidthChange&&(this.__cbOnceTileWidthChange=[]),this.__cbOnceTileWidthChange.push(t)},offTileWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnTileWidthChange&&-1!=(n=this.__cbOnTileWidthChange.indexOf(e))&&(this.__cbOnTileWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTileWidthChange[n])&&s(),this.__cbOnOwnerUnbindTileWidthChange.splice(n,1)),null!=this.__cbOnceTileWidthChange&&-1!=(n=this.__cbOnceTileWidthChange.indexOf(e))&&(this.__cbOnceTileWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTileWidthChange[n])&&s(),this.__cbOnceOwnerUnbindTileWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTileWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindTileWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTileWidthChange[l])&&s()}this.__cbOnOwnerUnbindTileWidthChange=null}if(null!=this.__cbOnceOwnerUnbindTileWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindTileWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTileWidthChange[l])&&s()}this.__cbOnceOwnerUnbindTileWidthChange=null}this.__cbOnTileWidthChange=null,this.__cbOnceTileWidthChange=null}},listensTileWidthChange:function(){return null!=this.__cbOnTileWidthChange&&0<this.__cbOnTileWidthChange.length||null!=this.__cbOnceTileWidthChange&&0<this.__cbOnceTileWidthChange.length},tileHeightAutoruns:null,get_tileHeight:function(){var e,n,t=this.unobservedTileHeight;return null!=M.current&&(e=M.current,null!=(n=this.tileHeightAutoruns)||(n=M.getAutorunArray(),null!=(this.tileHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tileHeight:function(e){var n=this.unobservedTileHeight;return n!=(this.unobservedTileHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTileHeightChange(e,n),null!=(n=this.tileHeightAutoruns))&&(this.tileHeightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTileHeight:function(){var e=this.unobservedTileHeight,e=(this.emitTileHeightChange(e,e),this.tileHeightAutoruns);null!=e&&(this.tileHeightAutoruns=null,M.invalidateAutorunArray(e))},unobservedTileHeight:null,__cbOnTileHeightChange:null,__cbOnceTileHeightChange:null,__cbOnOwnerUnbindTileHeightChange:null,__cbOnceOwnerUnbindTileHeightChange:null,emitTileHeightChange:function(e,n){var t=0;if(null!=this.__cbOnTileHeightChange&&(t+=this.__cbOnTileHeightChange.length),null!=this.__cbOnceTileHeightChange&&(t+=this.__cbOnceTileHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTileHeightChange)for(var r=0,a=this.__cbOnTileHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTileHeightChange[h],++s):--t}if(null!=this.__cbOnceTileHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceTileHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTileHeightChange[h],this.__cbOnceTileHeightChange[h]=null,o=this.__cbOnceOwnerUnbindTileHeightChange[h],(this.__cbOnceOwnerUnbindTileHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTileHeightChange[h]),c.push(this.__cbOnceTileHeightChange[h]))}this.__cbOnceOwnerUnbindTileHeightChange=u,this.__cbOnceTileHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTileHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTileHeightChange&&(this.__cbOnOwnerUnbindTileHeightChange=[]),this.__cbOnOwnerUnbindTileHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTileHeightChange&&(this.__cbOnOwnerUnbindTileHeightChange=[]),this.__cbOnOwnerUnbindTileHeightChange.push(null);null==this.__cbOnTileHeightChange&&(this.__cbOnTileHeightChange=[]),this.__cbOnTileHeightChange.push(t)},onceTileHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTileHeightChange&&(this.__cbOnceOwnerUnbindTileHeightChange=[]),this.__cbOnceOwnerUnbindTileHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTileHeightChange&&(this.__cbOnceOwnerUnbindTileHeightChange=[]),this.__cbOnceOwnerUnbindTileHeightChange.push(null);null==this.__cbOnceTileHeightChange&&(this.__cbOnceTileHeightChange=[]),this.__cbOnceTileHeightChange.push(t)},offTileHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnTileHeightChange&&-1!=(n=this.__cbOnTileHeightChange.indexOf(e))&&(this.__cbOnTileHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTileHeightChange[n])&&s(),this.__cbOnOwnerUnbindTileHeightChange.splice(n,1)),null!=this.__cbOnceTileHeightChange&&-1!=(n=this.__cbOnceTileHeightChange.indexOf(e))&&(this.__cbOnceTileHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTileHeightChange[n])&&s(),this.__cbOnceOwnerUnbindTileHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTileHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindTileHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTileHeightChange[l])&&s()}this.__cbOnOwnerUnbindTileHeightChange=null}if(null!=this.__cbOnceOwnerUnbindTileHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindTileHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTileHeightChange[l])&&s()}this.__cbOnceOwnerUnbindTileHeightChange=null}this.__cbOnTileHeightChange=null,this.__cbOnceTileHeightChange=null}},listensTileHeightChange:function(){return null!=this.__cbOnTileHeightChange&&0<this.__cbOnTileHeightChange.length||null!=this.__cbOnceTileHeightChange&&0<this.__cbOnceTileHeightChange.length},grid:function(e,n){this.set_columns(e),this.set_rows(n)},pos:function(e,n){this.set_x(e),this.set_y(n)},offset:function(e,n){this.set_offsetX(e),this.set_offsetY(n)},tileSize:function(e,n){this.set_tileWidth(e),this.set_tileHeight(n)},indexFromColumnAndRow:function(e,n){return n*this.get_columns()+e},tileByColumnAndRow:function(e,n){n=n*this.get_columns()+e;return this.get_tiles()[n]},computedTileByColumnAndRow:function(e,n){n=n*this.get_columns()+e;return this.get_computedTiles()[n]},columnAtIndex:function(e){return e%this.get_columns()},rowAtIndex:function(e){return Math.floor(e/this.get_columns())},unbindEvents:function(){tc.prototype.unbindEvents.call(this),this.offLdtkLayerChange(),this.offNameChange(),this.offXChange(),this.offYChange(),this.offColumnsChange(),this.offRowsChange(),this.offOpacityChange(),this.offVisibleChange(),this.offOffsetXChange(),this.offOffsetYChange(),this.offExplicitDepthChange(),this.offBlendingChange(),this.offColorChange(),this.offExtraBlendingChange(),this.offExtraOpacityChange(),this.offTilesChange(),this.offTilesAlphaChange(),this.offTilesOffsetXChange(),this.offTilesOffsetYChange(),this.offComputedTilesChange(),this.offComputedTilesAlphaChange(),this.offComputedTilesOffsetXChange(),this.offComputedTilesOffsetYChange(),this.offHasTilesChange(),this.offShouldRenderTilesChange(),this.offTileWidthChange(),this.offTileHeightChange()},_default_ldtkLayerAutoruns:function(){return null},_default_ldtkLayer:function(){return null},_default_nameAutoruns:function(){return null},_default_name:function(){return null},_default_xAutoruns:function(){return null},_default_x:function(){return 0},_default_yAutoruns:function(){return null},_default_y:function(){return 0},_default_columnsAutoruns:function(){return null},_default_columns:function(){return 0},_default_rowsAutoruns:function(){return null},_default_rows:function(){return 0},_default_opacityAutoruns:function(){return null},_default_opacity:function(){return 1},_default_visibleAutoruns:function(){return null},_default_visible:function(){return!0},_default_offsetXAutoruns:function(){return null},_default_offsetX:function(){return 0},_default_offsetYAutoruns:function(){return null},_default_offsetY:function(){return 0},_default_explicitDepthAutoruns:function(){return null},_default_explicitDepth:function(){return null},_default_blendingAutoruns:function(){return null},_default_blending:function(){return 0},_default_colorAutoruns:function(){return null},_default_color:function(){return 16777215},_default_extraBlendingAutoruns:function(){return null},_default_extraBlending:function(){return 0},_default_extraOpacityAutoruns:function(){return null},_default_extraOpacity:function(){return 1},_default_tilesAutoruns:function(){return null},_default_tiles:function(){return null},_default_tilesAlphaAutoruns:function(){return null},_default_tilesAlpha:function(){return null},_default_tilesOffsetXAutoruns:function(){return null},_default_tilesOffsetX:function(){return null},_default_tilesOffsetYAutoruns:function(){return null},_default_tilesOffsetY:function(){return null},_default_computedTilesAutoruns:function(){return null},_default_computedTiles:function(){return null},_default_computedTilesAlphaAutoruns:function(){return null},_default_computedTilesAlpha:function(){return null},_default_computedTilesOffsetXAutoruns:function(){return null},_default_computedTilesOffsetX:function(){return null},_default_computedTilesOffsetYAutoruns:function(){return null},_default_computedTilesOffsetY:function(){return null},_default_hasTilesAutoruns:function(){return null},_default_computedOnceHasTiles:function(){return!1},_default_shouldRenderTilesAutoruns:function(){return null},_default_shouldRenderTiles:function(){return!0},_default_tileWidthAutoruns:function(){return null},_default_tileWidth:function(){return-1},_default_tileHeightAutoruns:function(){return null},_default_tileHeight:function(){return-1},__class__:wc,__properties__:$extend(tc.prototype.__properties__,{set_tileHeight:"set_tileHeight",get_tileHeight:"get_tileHeight",set_tileWidth:"set_tileWidth",get_tileWidth:"get_tileWidth",set_shouldRenderTiles:"set_shouldRenderTiles",get_shouldRenderTiles:"get_shouldRenderTiles",get_unobservedHasTiles:"get_unobservedHasTiles",set_hasTiles:"set_hasTiles",get_hasTiles:"get_hasTiles",set_computedTilesOffsetY:"set_computedTilesOffsetY",get_computedTilesOffsetY:"get_computedTilesOffsetY",set_computedTilesOffsetX:"set_computedTilesOffsetX",get_computedTilesOffsetX:"get_computedTilesOffsetX",set_computedTilesAlpha:"set_computedTilesAlpha",get_computedTilesAlpha:"get_computedTilesAlpha",set_computedTiles:"set_computedTiles",get_computedTiles:"get_computedTiles",set_tilesOffsetY:"set_tilesOffsetY",get_tilesOffsetY:"get_tilesOffsetY",set_tilesOffsetX:"set_tilesOffsetX",get_tilesOffsetX:"get_tilesOffsetX",set_tilesAlpha:"set_tilesAlpha",get_tilesAlpha:"get_tilesAlpha",set_tiles:"set_tiles",get_tiles:"get_tiles",set_extraOpacity:"set_extraOpacity",get_extraOpacity:"get_extraOpacity",set_extraBlending:"set_extraBlending",get_extraBlending:"get_extraBlending",set_color:"set_color",get_color:"get_color",set_blending:"set_blending",get_blending:"get_blending",set_explicitDepth:"set_explicitDepth",get_explicitDepth:"get_explicitDepth",set_offsetY:"set_offsetY",get_offsetY:"get_offsetY",set_offsetX:"set_offsetX",get_offsetX:"get_offsetX",set_visible:"set_visible",get_visible:"get_visible",set_opacity:"set_opacity",get_opacity:"get_opacity",set_rows:"set_rows",get_rows:"get_rows",set_columns:"set_columns",get_columns:"get_columns",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_name:"set_name",get_name:"get_name",set_ldtkLayer:"set_ldtkLayer",get_ldtkLayer:"get_ldtkLayer"})});function ceramic_TilemapLdtkParser_allEqual(e,n){for(var t=0,i=e.length;t<i;)if(e[t++]!=n)return;return 1}(L["ceramic.TilemapLdtkParser"]=xc).__name__="ceramic.TilemapLdtkParser",xc.prototype={parseLdtk:function(n,t){var i=null;try{return new Lb(JSON.parse(n),function(e,n){t(e,function(e){n(JSON.parse(e))})},$bind(this,this.loadLdtkLevelTilemap))}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();he.app.logger.error("Failed to parse raw LDtk data: "+V.string(n),{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/TilemapLdtkParser.hx",lineNumber:30,className:"ceramic.TilemapLdtkParser",methodName:"parseLdtk"}),i=null}return i},loadLdtkTilemaps:function(e,n,t){e.externalLevels&&he.app.logger.info("This LDtk project uses external levels",{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/TilemapLdtkParser.hx",lineNumber:41,className:"ceramic.TilemapLdtkParser",methodName:"loadLdtkTilemaps"});var i=1,l=[];if(null!=e.defs.tilesets&&0<e.defs.tilesets.length)for(var s=e.defs.tilesets,r=0,a=s.length;r<a;){var h,u,c,o=s[d=r++],_=new wi;_.set_firstGid(i),_.set_name(o.identifier),_.set_tileWidth(o.tileGridSize),_.set_tileHeight(o.tileGridSize),_.set_spacing(o.spacing),_.set_margin(o.padding),_.set_tileCount(o.cWid*o.cHei),_.set_columns(o.cWid),null!=o.relPath&&(h=[new yi],_.onDestroy(h[0],function(n){return function(e){n[0].destroy()}}(h)),h[0].set_width(o.pxWid),h[0].set_height(o.pxHei),h[0].set_source(o.relPath),null==n||null!=t&&-1!=t.indexOf(o.relPath)||(u=[h[0]],n((c=[o])[0].relPath,function(n){return function(e){e.aseTexWidth=n[0].pxWid,e.aseTexHeight=n[0].pxHei,e.asePadding=n[0].padding,e.aseSpacing=n[0].spacing}}(c),function(n){return function(e){n[0].set_texture(e)}}(u))),_.set_image(h[0])),(o.ceramicTileset=_).set_ldtkTileset(o),i+=_.get_tileCount(),l.push(_)}else he.app.logger.warning("LDtk data has no tileset",{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/TilemapLdtkParser.hx",lineNumber:104,className:"ceramic.TilemapLdtkParser",methodName:"loadLdtkTilemaps"});if(!e.externalLevels&&null!=e.worlds&&0<e.worlds.length)for(r=0,a=e.worlds.length;r<a;)for(var d=r++,b=e.worlds[d],g=0,O=b.levels.length;g<O;){var f=g++,f=b.levels[f];this.loadLdtkLevelTilemap(f)}else he.app.logger.warning("LDtk data has no world",{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/TilemapLdtkParser.hx",lineNumber:120,className:"ceramic.TilemapLdtkParser",methodName:"loadLdtkTilemaps"})},loadLdtkLevelTilemap:function(e){for(var n=new uc,t=[],i=(0|e.bgColor)-16777216,l=(n.set_backgroundColor(i&16777215|-16777216),n.set_renderOrder(Oi.RIGHT_DOWN),n.set_name(e.identifier),n.set_width(e.pxWid),n.set_height(e.pxHei),[]),s=e.layerInstances.length-1;0<=s;){var r=e.layerInstances[s],a=new wc;switch(a.set_name(r.def.identifier),a.set_tileWidth(r.def.gridSize),a.set_tileHeight(r.def.gridSize),a.set_opacity(r.opacity),a.set_extraOpacity(r.opacity),a.set_offsetX(r.pxTotalOffsetX),a.set_offsetY(r.pxTotalOffsetY),a.set_visible(r.visible),a.set_columns(r.cWid),a.set_rows(r.cHei),a.set_shouldRenderTiles(null!=r.tileset),null!=r.tileset&&null!=r.tileset.ceramicTileset&&-1==t.indexOf(r.tileset.ceramicTileset)&&t.push(r.tileset.ceramicTileset),r.def.type){case 2:break;case 3:var h=[],u=[],c=[];a.set_tiles(this.convertLdtkTiles(r.gridTiles,r.tileset,r.cWid,r.cHei,r.def.gridSize,h,u,c)),ceramic_TilemapLdtkParser_allEqual(h,1)||a.set_tilesAlpha(h),ceramic_TilemapLdtkParser_allEqual(u,0)||a.set_tilesOffsetX(u),ceramic_TilemapLdtkParser_allEqual(c,0)||a.set_tilesOffsetY(c);break;case 1:case 4:if(-1!=r.def.autoSourceLayerDefUid){for(var o=null,_=0,d=e.layerInstances.length;_<d;){var b=_++,b=e.layerInstances[b];if(b.def.uid==r.def.autoSourceLayerDefUid){o=b;break}}null==o&&he.app.logger.warning("Failed to resolve auto source layer for: "+r.def.identifier,{fileName:"../../../../ceramic/plugins/ldtk/runtime/src/ceramic/TilemapLdtkParser.hx",lineNumber:189,className:"ceramic.TilemapLdtkParser",methodName:"loadLdtkLevelTilemap"}),a.set_tiles([].concat(o.intGrid))}else a.set_tiles([].concat(r.intGrid));h=[],u=[],c=[];a.set_computedTiles(this.convertLdtkTiles(r.autoLayerTiles,r.tileset,r.cWid,r.cHei,r.def.gridSize,h,u,c)),ceramic_TilemapLdtkParser_allEqual(h,1)||a.set_computedTilesAlpha(h),ceramic_TilemapLdtkParser_allEqual(u,0)||a.set_computedTilesOffsetX(u),ceramic_TilemapLdtkParser_allEqual(c,0)||a.set_computedTilesOffsetY(c)}l.push(a),(r.ceramicLayer=a).set_ldtkLayer(r),--s}t.sort(function(e,n){return e.get_firstGid()-n.get_firstGid()}),n.set_tilesets(t),n.set_layers(l),(e.ceramicTilemap=n).set_ldtkLevel(e)},convertLdtkTiles:function(e,n,t,i,l,s,r,a){if(null==e||0==e.length)return null;for(var h=[],u=null!=n&&null!=n.ceramicTileset?n.ceramicTileset.get_firstGid():0,c=0,o=e.length-5,_=t*i,d=!1,b=0,g=_;b<g;)h[D=b++]=0,s[D]=1,r[D]=0,a[D]=0;for(;c<o;){var O=e[c],f=e[c+1],p=Math.round(+e[c+2]/l),m=Math.round(+e[c+3]/l),w=e[c+2]-p*l,v=e[c+3]-m*l,y=+e[c+6]/4096;if(0<=p&&p<t&&0<=m&&m<i){var C=0|u+O&536870911;C=0!=(1&f)?-2147483648|C:2147483647&C;C=0!=(2&f)?1073741824|C:-1073741825&C;var f=null!=n.averageColors&&n.averageColors.length>O?n.averageColors[O]:-1,U=m*t+p;if(1==y&&-1!=f&&255==(f>>24&255)&&0==w&&0==v){for(;0!=h[U];)if(0==r[U]&&0==a[U]){for(var d=!0,x=U,T=U+_;T<h.length;)h[x]=h[T],r[x]=r[T],a[x]=a[T],x=T,T+=_;r[x]=h[x]=0,a[x]=0}else if(h.length<=(U+=_))for(var D,A=h.length,b=A,g=A+_;b<g;)h[D=b++]=0}else for(;0!=h[U];)if(h.length<=(U+=_))for(var S=h.length,E=S,M=S+_;E<M;)h[E++]=0;h[U]=C,s[U]=y,r[U]=w,a[U]=v}c+=7}if(d)for(var c=h.length-1,k=0;_<=c&&0==h[c];){if(++k==_&&(k=0,h.length!=c))if(c<h.length)h.splice(c,h.length-c);else for(var I=h;I.length<c;)I.push(null);--c}return h},__class__:xc};function zc(){this.ldtkParser=null,this.tmxParser=null}function Lc(e,n){this.easing=pn.NONE,this.index=e,this.easing=n}function Mc(e,n,t){Lc.call(this,n,t),this.value=e}function Nc(){this.keyframeAfterIndex=-1,this.keyframeBeforeIndex=-1,this.after=null,this.before=null,this.keyframes=[],this.position=0,this.timeline=null,this.locked=!1,this.loop=!1,this.autoFitSize=!0,this.size=0,l.call(this)}function Oc(){this.value=!1,Nc.call(this)}function Pc(e,n,t){Lc.call(this,n,t),this.value=e}function Qc(){this.value=16777215,Nc.call(this)}function Rc(){this.value=0,Nc.call(this)}function Sc(e,n,t){Lc.call(this,n,t),this.value=e}function Tc(){this.value=[],Nc.call(this)}function Uc(e,n,t){Lc.call(this,n,t),this.value=e}function Vc(){this.value=0,Nc.call(this)}function h2(){}function i2(){}function j2(){}function k2(e){null==e&&(e=.05),this.pending=[],this.stop=!1,this.runsInBackground=!1,this.checkInterval=e}function q2(){}function r2(e,n,t,i,l,s,r){this.pixels=null,this.sourceBitsPerPixel=4,this.bitsPerPixel=4,this.heightActual=0,this.widthActual=0,this.height=0,this.width=0,null!=e&&(this.width=e),null!=n&&(this.height=n),null!=t&&(this.widthActual=t),null!=i&&(this.heightActual=i),null!=l&&(this.bitsPerPixel=l),null!=s&&(this.sourceBitsPerPixel=s),null!=r&&(this.pixels=r)}function w2(){}function F2(){}function G2(e,n,t,i,l,s,r,a){this.isStream=null,this.format=null,this.bitsPerSample=null,this.channels=null,this.duration=null,this.length=null,this.rate=null,(this.id=null)!=e&&(this.id=e),null!=n&&(this.rate=n),null!=t&&(this.length=t),null!=i&&(this.duration=i),null!=l&&(this.channels=l),null!=s&&(this.bitsPerSample=s),null!=r&&(this.format=r),null!=a&&(this.isStream=a)}function H2(e,n){this.destroyed=!1,this.isStream=!1,this.format=0,this.bitsPerSample=16,this.channels=1,this.duration=0,this.length=0,this.rate=44100,this.id="AudioData",this.app=e,null!=n.id&&(this.id=n.id),null!=n.rate&&(this.rate=n.rate),null!=n.length&&(this.length=n.length),null!=n.format&&(this.format=n.format),null!=n.channels&&(this.channels=n.channels),null!=n.bitsPerSample&&(this.bitsPerSample=n.bitsPerSample),null!=n.isStream&&(this.isStream=n.isStream),null!=n.duration&&(this.duration=n.duration)}function K2(e,n){this.destroyed=!1,this.source=e,this.handle=n}function N2(e){this.app=e}function O2(e){this.app=e}function P2(e){this.app=e}function Q2(e){this.name=null,this.app=e}function Y2(e,n){this.texture=e,this.slot=n}function md(e){this.i=e}function rd(e,n,t,i,l,s,r,a,h,u,c,o,_,d,b,g,O,f,p){this.version=e,this.tiledVersion=n,this.orientation=t,this.width=i,this.height=l,this.tileWidth=s,this.tileHeight=r,this.backgroundColor=a,this.renderOrder=h,this.staggerIndex=u,this.staggerAxis=c,this.hexSideLength=o,this.nextObjectId=_,this.nextLayerId=d,this.properties=b,this.tilesets=g,this.layers=O,this.infinite=f,this.localPath=p}function vd(e,n,t,i,l){this.name=e,this.tile=n,this.corners=t,this.edges=i,this.tiles=l}function wd(e,n,t,i){this.name=e,this.color=n,this.tile=t,this.probability=i}function xd(e,n){this.tileID=e,this.wangID=n}function yd(e,n,t,i,l,s,r){this.format=e,this.id=n,this.source=t,this.transparent=i,this.width=l,this.height=s,this.data=r}function Dd(e,n,t,i,l,s,r,a){this.id=e,this.name=n,this.offsetX=t,this.offsetY=i,this.opacity=l,this.visible=s,this.properties=r,this.layers=a}function Ed(e,n,t,i,l,s,r,a,h,u,c){this.id=e,this.name=n,this.x=t,this.y=i,this.offsetX=l,this.offsetY=s,this.width=r,this.height=a,this.opacity=h,this.visible=u,this.properties=c}function Fd(e,n,t,i,l,s,r,a,h,u,c,o){Ed.call(this,n,t,i,l,s,r,a,h,u,c,o),this.image=e}function Gd(e,n,t,i,l,s,r,a,h,u,c,o){Ed.call(this,n,t,i,l,s,r,a,h,u,c,o),this.data=e}function Jd(e,n,t,i,l){this.encoding=e,this.compression=n,this.tiles=t,this.chunks=i,this.data=l}function Kd(e,n,t,i,l){this.x=e,this.y=n,this.width=t,this.height=i,this.tiles=l}function Nd(e,n,t,i,l,s,r,a,h,u,c,o,_,d){Ed.call(this,i,l,s,r,a,h,u,c,o,_,d),this.color=t,this.drawOrder=e,this.objects=n}function Od(e,n){this.x=e,this.y=n}function Qd(e,n,t,i,l,s,r,a,h,u,c,o,_,d){this.id=e,this.name=n,this.type=t,this.x=i,this.y=l,this.width=s,this.height=r,this.rotation=a,this.visible=h,this.objectType=u,this.properties=c,this.flippedHorizontally=o,this.flippedVertically=_,this.template=d}function Rd(e,n,t,i,l,s,r,a,h,u,c,o){this.fontFamily=e,this.pixelSize=n,this.wrap=t,this.color=i,this.bold=l,this.italic=s,this.underline=r,this.strikeout=a,this.kerning=h,this.halign=u,this.valign=c,this.text=o}function Vd(e,n){this.tileset=e,this.object=n}function Wd(e,n,t){this.name=e,this.color=n,this.properties=t}function Xd(e,n,t){this.name=e,this.type=n,this.defaultValue=t}function a3(){}function f3(){}function i3(){this.a1=1,this.a2=0}function C3(e,n,t){Q.call(this,e,n),this.posInfos=null==t?{fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}:t,this.__skipStack++}function D3(e,n,t){C3.call(this,e=null==e?"Not implemented":e,n,t),this.__skipStack++}function F3(){}function H3(){}function ae(e,n,t){this.xml=n,this.message=e,this.position=t,this.lineNumber=1;for(var i=this.positionAtLine=0,l=t;i<l;){var s=i++,s=n.charCodeAt(s);10==s?(this.lineNumber++,this.positionAtLine=0):13!=s&&this.positionAtLine++}}function fe(){}function ge(e){this.buffer=new kl(new ArrayBuffer(65536)),this.pos=0,e&&(this.crc=new i3)}function je(){}function ne(){}function oe(){}function qe(){}function re(){}function te(e,n){null==n&&(n=!1),this.append=!1,this.data=e,this.append=n}function ue(){this.initializerName=null,this.dirty=!0,this.canCompact=!1,this.dirtyModels=new z,this.willCleanDestroyedTrackedModels=!1,this.trackedModels=new z,this.serializedMap=new z,this.destroyModelOnUntrack=!0,this.compactInterval=60,this.checkInterval=1,l.call(this)}function ve(e){this.items=e}function xe(e,n,t,i){this.props=null,this.type=null,this.id=e,this.action=n,null!=t&&(this.type=t),null!=i&&(this.props=i)}function ye(){this.initializerName=null,this.paused=0,this.dirty=!0,this.dirtyModels=new z,this.willCleanDestroyedTrackedModels=!1,this.trackedModels=new z,this.checkInterval=.1,this.destroyModelOnUntrack=!0,this.lastCheckedFrame=-1,this.destroysToDispatch=null,this.deserializedMap=new z,this.serializedMap=new z,l.call(this)}var di=I["ceramic.TilemapOrientation"]={__ename__:"ceramic.TilemapOrientation",__constructs__:null,ORTHOGONAL:{_hx_name:"ORTHOGONAL",_hx_index:0,__enum__:"ceramic.TilemapOrientation",toString:d},ISOMETRIC:{_hx_name:"ISOMETRIC",_hx_index:1,__enum__:"ceramic.TilemapOrientation",toString:d},STAGGERED:{_hx_name:"STAGGERED",_hx_index:2,__enum__:"ceramic.TilemapOrientation",toString:d},HEXAGONAL:{_hx_name:"HEXAGONAL",_hx_index:3,__enum__:"ceramic.TilemapOrientation",toString:d}},bi=(di.__constructs__=[di.ORTHOGONAL,di.ISOMETRIC,di.STAGGERED,di.HEXAGONAL],(L["ceramic.TilemapParser"]=zc).__name__="ceramic.TilemapParser",zc.prototype={tmxParser:null,ldtkParser:null,clearCache:function(){null!=this.tmxParser&&this.tmxParser.clearCache()},parseTmx:function(e,n,t){null==this.tmxParser&&(this.tmxParser=new mi);e=this.tmxParser.parseTmx(e,n=null==n?".":n,t);return null==e?(he.app.logger.warning("Failed to parse TMX data: result is null!",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:57,className:"ceramic.TilemapParser",methodName:"parseTmx"}),null):e},parseExternalTilesetNames:function(e){e=F.parse(e);if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==e.nodeType?"null":le.toString(e.nodeType)));for(var n=[],t=_s.resolve(e,"map").elements();t.hasNext();){var i,l=t.next();if(l.nodeType==F.Document)i="Document";else{if(l.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==l.nodeType?"null":le.toString(l.nodeType)));i=l.nodeName}"tileset"==i&&ee.resolve(l=l,"source")&&(l=$.resolve(l,"source"),-1==n.indexOf(l))&&n.push(l)}return n},tmxMapToTilemapData:function(e,n){var t=new uc;switch(t.set_width(e.width*e.tileWidth),t.set_height(e.height*e.tileHeight),(l=e.orientation)._hx_index){case 0:t.set_orientation(di.ORTHOGONAL);break;case 1:t.set_orientation(di.ISOMETRIC);break;case 2:t.set_orientation(di.STAGGERED);break;case 3:t.set_orientation(di.HEXAGONAL);break;case 4:var i=l.value;t.set_orientation(di.ORTHOGONAL),he.app.logger.warning("TMX map orientation is Unknown("+i+"), using ORTHOGONAL in TilemapData",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:110,className:"ceramic.TilemapParser",methodName:"tmxMapToTilemapData"})}if(t.set_backgroundColor(e.backgroundColor),null!=e.renderOrder)switch((l=e.renderOrder)._hx_index){case 0:t.set_renderOrder(Oi.RIGHT_DOWN);break;case 1:t.set_renderOrder(Oi.RIGHT_UP);break;case 2:t.set_renderOrder(Oi.LEFT_DOWN);break;case 3:t.set_renderOrder(Oi.LEFT_UP);break;case 4:i=l.value;t.set_renderOrder(Oi.RIGHT_DOWN),he.app.logger.warning("TMX map render order is Unknown("+i+"), using RIGHT_DOWN in TilemapData",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:127,className:"ceramic.TilemapParser",methodName:"tmxMapToTilemapData"})}if(null!=e.staggerAxis)switch((l=e.staggerAxis)._hx_index){case 0:t.set_staggerAxis(fi.AXIS_X);break;case 1:t.set_staggerAxis(fi.AXIS_Y);break;case 2:i=l.value;t.set_staggerAxis(fi.AXIS_X),he.app.logger.warning("TMX map stagger axis is Unknown("+i+"), using AXIS_X in TilemapData",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:139,className:"ceramic.TilemapParser",methodName:"tmxMapToTilemapData"})}if(t.set_hexSideLength(e.hexSideLength),null!=e.tilesets&&0<e.tilesets.length)for(var l=0,s=e.tilesets.length;l<s;){var r=l++,a=e.tilesets[r],h=[new wi];if(t.onDestroy(h[0],function(n){return function(e){n[0].destroy()}}(h)),null!=a.firstGID&&h[0].set_firstGid(a.firstGID),null!=a.name&&h[0].set_name(a.name),null!=a.tileWidth&&h[0].set_tileWidth(a.tileWidth),null!=a.tileHeight&&h[0].set_tileHeight(a.tileHeight),null!=a.spacing&&h[0].set_spacing(a.spacing),null!=a.margin&&h[0].set_margin(a.margin),h[0].set_tileCount(a.tileCount),h[0].set_columns(a.columns),null!=a.image){var a=a.image,u=[new yi];if(h[0].onDestroy(u[0],function(n){return function(e){n[0].destroy()}}(u)),null!=a.width&&u[0].set_width(a.width),null!=a.height&&u[0].set_height(a.height),null!=a.source?(u[0].set_source(a.source),null!=n&&n(a.source,null,function(n){return function(e){n[0].set_texture(e)}}([u[0]]))):null!=a.data&&he.app.logger.warning("Loading TMX embedded images is not supported.",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:210,className:"ceramic.TilemapParser",methodName:"tmxMapToTilemapData"}),h[0].set_image(u[0]),h[0].get_columns()<=0){var c=0,o=0,_=h[0].get_tileWidth()+2*h[0].get_margin();if(0<_)for(;o+_<=u[0].get_width();)++c,o+=_+h[0].get_spacing();h[0].set_columns(c)}}t.get_tilesets().push(h[0])}else he.app.logger.warning("TMX map has no tileset",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:234,className:"ceramic.TilemapParser",methodName:"tmxMapToTilemapData"});if(null!=e.layers&&0<e.layers.length)for(l=0,s=e.layers.length;l<s;){var r=l++,d=e.layers[r];switch(d._hx_index){case 0:var b=d.layer,g=new wc;g.set_tileWidth(e.tileWidth),g.set_tileHeight(e.tileHeight),g.set_name(b.name),null!=b.x&&g.set_x(0|b.x),null!=b.y&&g.set_y(0|b.y),null!=b.width&&g.set_columns(b.width),null!=b.height&&g.set_rows(b.height),null!=b.opacity&&g.set_opacity(b.opacity),null!=b.visible&&g.set_visible(b.visible),null!=b.offsetX&&g.set_offsetX(b.offsetX),null!=b.offsetY&&g.set_offsetY(b.offsetY),null!=b.data&&null!=b.data.tiles?g.set_tiles([].concat(b.data.tiles)):he.app.logger.warning("TMX tile layer "+b.name+" has no tile",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:270,className:"ceramic.TilemapParser",methodName:"tmxMapToTilemapData"}),t.get_layers().push(g);break;case 1:d.group;break;case 2:d.layer;break;case 3:d.group}}else he.app.logger.warning("TMX map has no layer",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:281,className:"ceramic.TilemapParser",methodName:"tmxMapToTilemapData"});return t},parseLdtk:function(e,n){null==this.ldtkParser&&(this.ldtkParser=new xc);e=this.ldtkParser.parseLdtk(e,n);return null==e?(he.app.logger.warning("Failed to parse LDtk data: result is null!",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapParser.hx",lineNumber:304,className:"ceramic.TilemapParser",methodName:"parseLdtk"}),null):e},loadLdtkTilemaps:function(e,n,t){null==this.ldtkParser&&(this.ldtkParser=new xc),this.ldtkParser.loadLdtkTilemaps(e,n,t)},__class__:zc},function(){}),gi=((L["ceramic.TilemapPlugin"]=bi).__name__="ceramic.TilemapPlugin",bi.pluginInit=function(){he.oncePreInit(function(){he.app.logger.info("Init tilemap plugin",{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapPlugin.hx",lineNumber:27,className:"ceramic.TilemapPlugin",methodName:"pluginInit"}),Re.addAssetKind("tilemap",bi._addTilemap,["tmx","ldtk"],!1,["ceramic.TilemapData"]);var e=new S0;he.app.converters.h["ceramic.TilemapData"]=e})},bi._addTilemap=function(e,n,t,i){bi.addTilemap(e,n,t,i)},bi.addTilemap=function(e,n,t,i){B.startsWith(n,"tilemap:")&&(n=h.substr(n,8,null)),e.addAsset(new rc(n,t,i))},bi.ensureTilemap=function(e,n,t,i,l){B.startsWith(n,"tilemap:")||(n="tilemap:"+n),e.ensure(n,t,i,function(e){l(e instanceof rc?e:null)})},bi.tilemap=function(e,n,t){e=bi.tilemapAsset(e,n,t);return null==e?null:e.get_tilemapData()},bi.tilemapAsset=function(e,n,t){var i=n;return B.startsWith(i,"tilemap:")&&(i=h.substr(i,8,null)),null!=t&&(i+=":"+t),!Object.prototype.hasOwnProperty.call(e.assetsByKindAndName.h,"tilemap")||null==(i=e.assetsByKindAndName.h.tilemap.h[i])?null!=e.parent?bi.tilemapAsset(e.parent,n,t):null:i},bi.ldtk=function(e,n){e=bi.tilemapAsset(e,n);return null==e?null:e.get_ldtkData()},bi.getTilemapParser=function(e){var e=Z0.data(e),n=e.tilemapParser;return null==n&&(n=new zc,e.tilemapParser=n),n},bi.getRawTsxCache=function(e){var e=Z0.data(e),n=e.rawTsxCache;return null==n&&(n=new z,e.rawTsxCache=n),n},function(){this.tilemapTile=0,this.row=-1,this.column=-1,this.index=-1,r.call(this)}),Oi=((L["ceramic.TilemapQuad"]=gi).__name__="ceramic.TilemapQuad",gi.get=function(){var e,n=null;return null==(n=null!=gi.pool?0<(e=gi.pool).availableItems.length?e.availableItems.pop():null:n)?n=new gi:n.set_active(!0),n},gi.__super__=r,gi.prototype=$extend(r.prototype,{index:null,column:null,row:null,tilemapTile:null,recycle:function(){null!=this.parent&&this.parent.remove(this),this.set_active(!1),this.index=-1,this.column=-1,this.row=-1,this.tilemapTile=0,null==gi.pool&&(gi.pool=new o),gi.pool.recycle(this)},__class__:gi}),I["ceramic.TilemapRenderOrder"]={__ename__:"ceramic.TilemapRenderOrder",__constructs__:null,RIGHT_DOWN:{_hx_name:"RIGHT_DOWN",_hx_index:0,__enum__:"ceramic.TilemapRenderOrder",toString:d},RIGHT_UP:{_hx_name:"RIGHT_UP",_hx_index:1,__enum__:"ceramic.TilemapRenderOrder",toString:d},LEFT_DOWN:{_hx_name:"LEFT_DOWN",_hx_index:2,__enum__:"ceramic.TilemapRenderOrder",toString:d},LEFT_UP:{_hx_name:"LEFT_UP",_hx_index:3,__enum__:"ceramic.TilemapRenderOrder",toString:d}}),fi=(Oi.__constructs__=[Oi.RIGHT_DOWN,Oi.RIGHT_UP,Oi.LEFT_DOWN,Oi.LEFT_UP],I["ceramic.TilemapStaggerAxis"]={__ename__:"ceramic.TilemapStaggerAxis",__constructs__:null,AXIS_X:{_hx_name:"AXIS_X",_hx_index:0,__enum__:"ceramic.TilemapStaggerAxis",toString:d},AXIS_Y:{_hx_name:"AXIS_Y",_hx_index:1,__enum__:"ceramic.TilemapStaggerAxis",toString:d}}),pi=(fi.__constructs__=[fi.AXIS_X,fi.AXIS_Y],I["ceramic.TilemapStaggerIndex"]={__ename__:"ceramic.TilemapStaggerIndex",__constructs__:null,ODD:{_hx_name:"ODD",_hx_index:0,__enum__:"ceramic.TilemapStaggerIndex",toString:d},EVEN:{_hx_name:"EVEN",_hx_index:1,__enum__:"ceramic.TilemapStaggerIndex",toString:d}}),mi=(pi.__constructs__=[pi.ODD,pi.EVEN],function(){this.resolveTsxRawData=null,this.r=null,this.tsxCache=null}),wi=((L["ceramic.TilemapTmxParser"]=mi).__name__="ceramic.TilemapTmxParser",mi.prototype={tsxCache:null,r:null,resolveTsxRawData:null,cwd:null,parseTmx:function(e,n,t){if(0==e.length)throw Q.thrown("Tilemap: rawTmxData is 0 length");this.resolveTsxRawData=null!=t?t:function(e,n){return null},null==this.tsxCache&&(this.tsxCache=new z);try{this.r=new Cl,this.r.resolveTSX=$bind(this,this.getTsx),this.cwd=n;var i=this.r.read(F.parse(e));return this.cwd=null,i}catch(e){Al.lastError=e;t=Q.caught(e).unwrap();he.app.logger.error(t,{fileName:"../../../../ceramic/plugins/tilemap/runtime/src/ceramic/TilemapTmxParser.hx",lineNumber:46,className:"ceramic.TilemapTmxParser",methodName:"parseTmx"})}return null},clearCache:function(){this.tsxCache=null},getTsx:function(e){var n=this.cwd+":"+e,t=this.tsxCache.h[n];if(null==t){var i=this.r,e=F.parse(this.resolveTsxRawData(e,this.cwd));if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==e.nodeType?"null":le.toString(e.nodeType)));var e=_s.resolve(e,"tileset"),l=i.resolveProperties(e),s=[],r=ds.resolve(e,"terraintypes"),a=[],h=ds.resolve(e,"tile"),u=null,c=ds.resolve(e,"tileoffset"),o=[],_=ds.resolve(e,"wangsets"),d=null,b=ds.resolve(e,"grid");if(c&&(f=_s.resolve(e,"tileoffset"),u=new _l(V.parseInt($.resolve(f,"x")),V.parseInt($.resolve(f,"y")))),r)for(var g=0,O=bs.resolve(_s.resolve(e,"terraintypes"),"terrain");g<O.length;){var f=O[g];++g,s.push(new dl($.resolve(f,"name"),V.parseInt($.resolve(f,"tile")),i.resolveProperties(f)))}if(_)for(g=0,O=bs.resolve(_s.resolve(e,"wangsets"),"wangset");g<O.length;){f=O[g];++g,o.push(i.resolveWangSet(f))}if(b){var p,c=_s.resolve(e,"grid"),g=V.parseInt($.resolve(c,"width")),O=V.parseInt($.resolve(c,"height")),m=$.resolve(c,"orientation");switch(m){case"hexagonal":p=rl.Hexagonal;break;case"isometric":p=rl.Isometric;break;case"orthogonal":p=rl.Orthogonal;break;case"staggered":p=rl.Staggered;break;default:p=rl.Unknown(m)}d=new ol(p,g,O)}if(h)for(g=0,O=bs.resolve(e,"tile");g<O.length;){var f=O[g],w=(++g,null);if(ds.resolve(f,"animation"))for(var w=[],v=0,y=bs.resolve(_s.resolve(f,"animation"),"frame");v<y.length;){var C=y[v];++v,w.push(new gl(V.parseInt($.resolve(C,"tileid")),V.parseInt($.resolve(C,"duration"))))}var U=V.parseInt($.resolve(f,"id")),x=ee.resolve(f,"terrain")?$.resolve(f,"terrain"):null,T=ee.resolve(f,"probability")?parseFloat($.resolve(f,"probability")):0,D=i.resolveProperties(f),A=ds.resolve(f,"image")?i.resolveImage(_s.resolve(f,"image")):null,S=ds.resolve(f,"objectgroup")?i.resolveObjectGroup(_s.resolve(f,"objectgroup")):null;a.push(new bl(U,ee.resolve(f,"type")?$.resolve(f,"type"):null,x,T,D,A,S,w))}g=ee.resolve(e,"firstgid")?V.parseInt($.resolve(e,"firstgid")):null,O=ee.resolve(e,"source")?$.resolve(e,"source"):null,v=ee.resolve(e,"name")?$.resolve(e,"name"):null,y=ee.resolve(e,"tilewidth")?V.parseInt($.resolve(e,"tilewidth")):0,U=ee.resolve(e,"tileheight")?V.parseInt($.resolve(e,"tileheight")):0,x=ee.resolve(e,"spacing")?V.parseInt($.resolve(e,"spacing")):0,T=ee.resolve(e,"margin")?V.parseInt($.resolve(e,"margin")):0,D=ds.resolve(e,"image")?i.resolveImage(_s.resolve(e,"image")):null,r=new cl(g,O,v,y,U,x,T,ee.resolve(e,"tilecount")?V.parseInt($.resolve(e,"tilecount")):0,ee.resolve(e,"columns")?V.parseInt($.resolve(e,"columns")):0,u,l,D,s,a,d,o);null!=r.source&&null!=i.resolveTSX&&(_=i.resolveTSX(r.source),Ul.applyTSX(_,r)),this.tsxCache.h[n]=t=r}return t},__class__:mi},function(){this.unobservedSlopes=null,this.slopesAutoruns=null,this.implicitImage=!1,this.slopesMapping=null,this.unobservedGridCellHeight=0,this.gridCellHeightAutoruns=null,this.unobservedGridCellWidth=0,this.gridCellWidthAutoruns=null,this.unobservedGridOrientation=vi.ORTHOGONAL,this.gridOrientationAutoruns=null,this.unobservedImage=null,this.imageAutoruns=null,this.computedOnceRows=!1,this.rowsAutoruns=null,this.unobservedColumns=0,this.columnsAutoruns=null,this.unobservedTileCount=0,this.tileCountAutoruns=null,this.unobservedMargin=0,this.marginAutoruns=null,this.unobservedSpacing=0,this.spacingAutoruns=null,this.unobservedTileHeight=-1,this.tileHeightAutoruns=null,this.unobservedTileWidth=-1,this.tileWidthAutoruns=null,this.unobservedName=null,this.nameAutoruns=null,this.unobservedFirstGid=0,this.firstGidAutoruns=null,this.unobservedLdtkTileset=null,this.ldtkTilesetAutoruns=null,tc.call(this)}),vi=((L["ceramic.Tileset"]=wi).__name__="ceramic.Tileset",wi.__super__=tc,wi.prototype=$extend(tc.prototype,{ldtkTilesetAutoruns:null,get_ldtkTileset:function(){var e,n,t=this.unobservedLdtkTileset;return null!=M.current&&(e=M.current,null!=(n=this.ldtkTilesetAutoruns)||(n=M.getAutorunArray(),null!=(this.ldtkTilesetAutoruns=n)))&&e.bindToAutorunArray(n),t},set_ldtkTileset:function(e){var n=this.unobservedLdtkTileset;return n!=(this.unobservedLdtkTileset=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitLdtkTilesetChange(e,n),null!=(n=this.ldtkTilesetAutoruns))&&(this.ldtkTilesetAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateLdtkTileset:function(){var e=this.unobservedLdtkTileset,e=(this.emitLdtkTilesetChange(e,e),this.ldtkTilesetAutoruns);null!=e&&(this.ldtkTilesetAutoruns=null,M.invalidateAutorunArray(e))},unobservedLdtkTileset:null,__cbOnLdtkTilesetChange:null,__cbOnceLdtkTilesetChange:null,__cbOnOwnerUnbindLdtkTilesetChange:null,__cbOnceOwnerUnbindLdtkTilesetChange:null,emitLdtkTilesetChange:function(e,n){var t=0;if(null!=this.__cbOnLdtkTilesetChange&&(t+=this.__cbOnLdtkTilesetChange.length),null!=this.__cbOnceLdtkTilesetChange&&(t+=this.__cbOnceLdtkTilesetChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnLdtkTilesetChange)for(var r=0,a=this.__cbOnLdtkTilesetChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnLdtkTilesetChange[h],++s):--t}if(null!=this.__cbOnceLdtkTilesetChange){for(var u=null,c=null,r=0,a=this.__cbOnceLdtkTilesetChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceLdtkTilesetChange[h],this.__cbOnceLdtkTilesetChange[h]=null,o=this.__cbOnceOwnerUnbindLdtkTilesetChange[h],(this.__cbOnceOwnerUnbindLdtkTilesetChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindLdtkTilesetChange[h]),c.push(this.__cbOnceLdtkTilesetChange[h]))}this.__cbOnceOwnerUnbindLdtkTilesetChange=u,this.__cbOnceLdtkTilesetChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onLdtkTilesetChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkTilesetChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkTilesetChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindLdtkTilesetChange&&(this.__cbOnOwnerUnbindLdtkTilesetChange=[]),this.__cbOnOwnerUnbindLdtkTilesetChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindLdtkTilesetChange&&(this.__cbOnOwnerUnbindLdtkTilesetChange=[]),this.__cbOnOwnerUnbindLdtkTilesetChange.push(null);null==this.__cbOnLdtkTilesetChange&&(this.__cbOnLdtkTilesetChange=[]),this.__cbOnLdtkTilesetChange.push(t)},onceLdtkTilesetChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event ldtkTilesetChange because owner is destroyed!");var l=function(e){null!=t&&(i.offLdtkTilesetChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindLdtkTilesetChange&&(this.__cbOnceOwnerUnbindLdtkTilesetChange=[]),this.__cbOnceOwnerUnbindLdtkTilesetChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindLdtkTilesetChange&&(this.__cbOnceOwnerUnbindLdtkTilesetChange=[]),this.__cbOnceOwnerUnbindLdtkTilesetChange.push(null);null==this.__cbOnceLdtkTilesetChange&&(this.__cbOnceLdtkTilesetChange=[]),this.__cbOnceLdtkTilesetChange.push(t)},offLdtkTilesetChange:function(e){if(null!=e){var n;null!=this.__cbOnLdtkTilesetChange&&-1!=(n=this.__cbOnLdtkTilesetChange.indexOf(e))&&(this.__cbOnLdtkTilesetChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindLdtkTilesetChange[n])&&s(),this.__cbOnOwnerUnbindLdtkTilesetChange.splice(n,1)),null!=this.__cbOnceLdtkTilesetChange&&-1!=(n=this.__cbOnceLdtkTilesetChange.indexOf(e))&&(this.__cbOnceLdtkTilesetChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindLdtkTilesetChange[n])&&s(),this.__cbOnceOwnerUnbindLdtkTilesetChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindLdtkTilesetChange){for(var t=0,i=this.__cbOnOwnerUnbindLdtkTilesetChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindLdtkTilesetChange[l])&&s()}this.__cbOnOwnerUnbindLdtkTilesetChange=null}if(null!=this.__cbOnceOwnerUnbindLdtkTilesetChange){for(t=0,i=this.__cbOnceOwnerUnbindLdtkTilesetChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindLdtkTilesetChange[l])&&s()}this.__cbOnceOwnerUnbindLdtkTilesetChange=null}this.__cbOnLdtkTilesetChange=null,this.__cbOnceLdtkTilesetChange=null}},listensLdtkTilesetChange:function(){return null!=this.__cbOnLdtkTilesetChange&&0<this.__cbOnLdtkTilesetChange.length||null!=this.__cbOnceLdtkTilesetChange&&0<this.__cbOnceLdtkTilesetChange.length},firstGidAutoruns:null,get_firstGid:function(){var e,n,t=this.unobservedFirstGid;return null!=M.current&&(e=M.current,null!=(n=this.firstGidAutoruns)||(n=M.getAutorunArray(),null!=(this.firstGidAutoruns=n)))&&e.bindToAutorunArray(n),t},set_firstGid:function(e){var n=this.unobservedFirstGid;return n!=(this.unobservedFirstGid=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitFirstGidChange(e,n),null!=(n=this.firstGidAutoruns))&&(this.firstGidAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateFirstGid:function(){var e=this.unobservedFirstGid,e=(this.emitFirstGidChange(e,e),this.firstGidAutoruns);null!=e&&(this.firstGidAutoruns=null,M.invalidateAutorunArray(e))},unobservedFirstGid:null,__cbOnFirstGidChange:null,__cbOnceFirstGidChange:null,__cbOnOwnerUnbindFirstGidChange:null,__cbOnceOwnerUnbindFirstGidChange:null,emitFirstGidChange:function(e,n){var t=0;if(null!=this.__cbOnFirstGidChange&&(t+=this.__cbOnFirstGidChange.length),null!=this.__cbOnceFirstGidChange&&(t+=this.__cbOnceFirstGidChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnFirstGidChange)for(var r=0,a=this.__cbOnFirstGidChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnFirstGidChange[h],++s):--t}if(null!=this.__cbOnceFirstGidChange){for(var u=null,c=null,r=0,a=this.__cbOnceFirstGidChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceFirstGidChange[h],this.__cbOnceFirstGidChange[h]=null,o=this.__cbOnceOwnerUnbindFirstGidChange[h],(this.__cbOnceOwnerUnbindFirstGidChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindFirstGidChange[h]),c.push(this.__cbOnceFirstGidChange[h]))}this.__cbOnceOwnerUnbindFirstGidChange=u,this.__cbOnceFirstGidChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onFirstGidChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event firstGidChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFirstGidChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindFirstGidChange&&(this.__cbOnOwnerUnbindFirstGidChange=[]),this.__cbOnOwnerUnbindFirstGidChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindFirstGidChange&&(this.__cbOnOwnerUnbindFirstGidChange=[]),this.__cbOnOwnerUnbindFirstGidChange.push(null);null==this.__cbOnFirstGidChange&&(this.__cbOnFirstGidChange=[]),this.__cbOnFirstGidChange.push(t)},onceFirstGidChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event firstGidChange because owner is destroyed!");var l=function(e){null!=t&&(i.offFirstGidChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindFirstGidChange&&(this.__cbOnceOwnerUnbindFirstGidChange=[]),this.__cbOnceOwnerUnbindFirstGidChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindFirstGidChange&&(this.__cbOnceOwnerUnbindFirstGidChange=[]),this.__cbOnceOwnerUnbindFirstGidChange.push(null);null==this.__cbOnceFirstGidChange&&(this.__cbOnceFirstGidChange=[]),this.__cbOnceFirstGidChange.push(t)},offFirstGidChange:function(e){if(null!=e){var n;null!=this.__cbOnFirstGidChange&&-1!=(n=this.__cbOnFirstGidChange.indexOf(e))&&(this.__cbOnFirstGidChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindFirstGidChange[n])&&s(),this.__cbOnOwnerUnbindFirstGidChange.splice(n,1)),null!=this.__cbOnceFirstGidChange&&-1!=(n=this.__cbOnceFirstGidChange.indexOf(e))&&(this.__cbOnceFirstGidChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindFirstGidChange[n])&&s(),this.__cbOnceOwnerUnbindFirstGidChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindFirstGidChange){for(var t=0,i=this.__cbOnOwnerUnbindFirstGidChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindFirstGidChange[l])&&s()}this.__cbOnOwnerUnbindFirstGidChange=null}if(null!=this.__cbOnceOwnerUnbindFirstGidChange){for(t=0,i=this.__cbOnceOwnerUnbindFirstGidChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindFirstGidChange[l])&&s()}this.__cbOnceOwnerUnbindFirstGidChange=null}this.__cbOnFirstGidChange=null,this.__cbOnceFirstGidChange=null}},listensFirstGidChange:function(){return null!=this.__cbOnFirstGidChange&&0<this.__cbOnFirstGidChange.length||null!=this.__cbOnceFirstGidChange&&0<this.__cbOnceFirstGidChange.length},nameAutoruns:null,get_name:function(){var e,n,t=this.unobservedName;return null!=M.current&&(e=M.current,null!=(n=this.nameAutoruns)||(n=M.getAutorunArray(),null!=(this.nameAutoruns=n)))&&e.bindToAutorunArray(n),t},set_name:function(e){var n=this.unobservedName;return n!=(this.unobservedName=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitNameChange(e,n),null!=(n=this.nameAutoruns))&&(this.nameAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateName:function(){var e=this.unobservedName,e=(this.emitNameChange(e,e),this.nameAutoruns);null!=e&&(this.nameAutoruns=null,M.invalidateAutorunArray(e))},unobservedName:null,__cbOnNameChange:null,__cbOnceNameChange:null,__cbOnOwnerUnbindNameChange:null,__cbOnceOwnerUnbindNameChange:null,emitNameChange:function(e,n){var t=0;if(null!=this.__cbOnNameChange&&(t+=this.__cbOnNameChange.length),null!=this.__cbOnceNameChange&&(t+=this.__cbOnceNameChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnNameChange)for(var r=0,a=this.__cbOnNameChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnNameChange[h],++s):--t}if(null!=this.__cbOnceNameChange){for(var u=null,c=null,r=0,a=this.__cbOnceNameChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceNameChange[h],this.__cbOnceNameChange[h]=null,o=this.__cbOnceOwnerUnbindNameChange[h],(this.__cbOnceOwnerUnbindNameChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindNameChange[h]),c.push(this.__cbOnceNameChange[h]))}this.__cbOnceOwnerUnbindNameChange=u,this.__cbOnceNameChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindNameChange&&(this.__cbOnOwnerUnbindNameChange=[]),this.__cbOnOwnerUnbindNameChange.push(null);null==this.__cbOnNameChange&&(this.__cbOnNameChange=[]),this.__cbOnNameChange.push(t)},onceNameChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event nameChange because owner is destroyed!");var l=function(e){null!=t&&(i.offNameChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindNameChange&&(this.__cbOnceOwnerUnbindNameChange=[]),this.__cbOnceOwnerUnbindNameChange.push(null);null==this.__cbOnceNameChange&&(this.__cbOnceNameChange=[]),this.__cbOnceNameChange.push(t)},offNameChange:function(e){if(null!=e){var n;null!=this.__cbOnNameChange&&-1!=(n=this.__cbOnNameChange.indexOf(e))&&(this.__cbOnNameChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindNameChange[n])&&s(),this.__cbOnOwnerUnbindNameChange.splice(n,1)),null!=this.__cbOnceNameChange&&-1!=(n=this.__cbOnceNameChange.indexOf(e))&&(this.__cbOnceNameChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindNameChange[n])&&s(),this.__cbOnceOwnerUnbindNameChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindNameChange){for(var t=0,i=this.__cbOnOwnerUnbindNameChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindNameChange[l])&&s()}this.__cbOnOwnerUnbindNameChange=null}if(null!=this.__cbOnceOwnerUnbindNameChange){for(t=0,i=this.__cbOnceOwnerUnbindNameChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindNameChange[l])&&s()}this.__cbOnceOwnerUnbindNameChange=null}this.__cbOnNameChange=null,this.__cbOnceNameChange=null}},listensNameChange:function(){return null!=this.__cbOnNameChange&&0<this.__cbOnNameChange.length||null!=this.__cbOnceNameChange&&0<this.__cbOnceNameChange.length},tileWidthAutoruns:null,get_tileWidth:function(){var e,n,t=this.unobservedTileWidth;return null!=M.current&&(e=M.current,null!=(n=this.tileWidthAutoruns)||(n=M.getAutorunArray(),null!=(this.tileWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tileWidth:function(e){var n=this.unobservedTileWidth;return n!=(this.unobservedTileWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTileWidthChange(e,n),null!=(n=this.tileWidthAutoruns))&&(this.tileWidthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTileWidth:function(){var e=this.unobservedTileWidth,e=(this.emitTileWidthChange(e,e),this.tileWidthAutoruns);null!=e&&(this.tileWidthAutoruns=null,M.invalidateAutorunArray(e))},unobservedTileWidth:null,__cbOnTileWidthChange:null,__cbOnceTileWidthChange:null,__cbOnOwnerUnbindTileWidthChange:null,__cbOnceOwnerUnbindTileWidthChange:null,emitTileWidthChange:function(e,n){var t=0;if(null!=this.__cbOnTileWidthChange&&(t+=this.__cbOnTileWidthChange.length),null!=this.__cbOnceTileWidthChange&&(t+=this.__cbOnceTileWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTileWidthChange)for(var r=0,a=this.__cbOnTileWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTileWidthChange[h],++s):--t}if(null!=this.__cbOnceTileWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceTileWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTileWidthChange[h],this.__cbOnceTileWidthChange[h]=null,o=this.__cbOnceOwnerUnbindTileWidthChange[h],(this.__cbOnceOwnerUnbindTileWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTileWidthChange[h]),c.push(this.__cbOnceTileWidthChange[h]))}this.__cbOnceOwnerUnbindTileWidthChange=u,this.__cbOnceTileWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTileWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTileWidthChange&&(this.__cbOnOwnerUnbindTileWidthChange=[]),this.__cbOnOwnerUnbindTileWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTileWidthChange&&(this.__cbOnOwnerUnbindTileWidthChange=[]),this.__cbOnOwnerUnbindTileWidthChange.push(null);null==this.__cbOnTileWidthChange&&(this.__cbOnTileWidthChange=[]),this.__cbOnTileWidthChange.push(t)},onceTileWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTileWidthChange&&(this.__cbOnceOwnerUnbindTileWidthChange=[]),this.__cbOnceOwnerUnbindTileWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTileWidthChange&&(this.__cbOnceOwnerUnbindTileWidthChange=[]),this.__cbOnceOwnerUnbindTileWidthChange.push(null);null==this.__cbOnceTileWidthChange&&(this.__cbOnceTileWidthChange=[]),this.__cbOnceTileWidthChange.push(t)},offTileWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnTileWidthChange&&-1!=(n=this.__cbOnTileWidthChange.indexOf(e))&&(this.__cbOnTileWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTileWidthChange[n])&&s(),this.__cbOnOwnerUnbindTileWidthChange.splice(n,1)),null!=this.__cbOnceTileWidthChange&&-1!=(n=this.__cbOnceTileWidthChange.indexOf(e))&&(this.__cbOnceTileWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTileWidthChange[n])&&s(),this.__cbOnceOwnerUnbindTileWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTileWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindTileWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTileWidthChange[l])&&s()}this.__cbOnOwnerUnbindTileWidthChange=null}if(null!=this.__cbOnceOwnerUnbindTileWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindTileWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTileWidthChange[l])&&s()}this.__cbOnceOwnerUnbindTileWidthChange=null}this.__cbOnTileWidthChange=null,this.__cbOnceTileWidthChange=null}},listensTileWidthChange:function(){return null!=this.__cbOnTileWidthChange&&0<this.__cbOnTileWidthChange.length||null!=this.__cbOnceTileWidthChange&&0<this.__cbOnceTileWidthChange.length},tileHeightAutoruns:null,get_tileHeight:function(){var e,n,t=this.unobservedTileHeight;return null!=M.current&&(e=M.current,null!=(n=this.tileHeightAutoruns)||(n=M.getAutorunArray(),null!=(this.tileHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tileHeight:function(e){var n=this.unobservedTileHeight;return n!=(this.unobservedTileHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTileHeightChange(e,n),null!=(n=this.tileHeightAutoruns))&&(this.tileHeightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTileHeight:function(){var e=this.unobservedTileHeight,e=(this.emitTileHeightChange(e,e),this.tileHeightAutoruns);null!=e&&(this.tileHeightAutoruns=null,M.invalidateAutorunArray(e))},unobservedTileHeight:null,__cbOnTileHeightChange:null,__cbOnceTileHeightChange:null,__cbOnOwnerUnbindTileHeightChange:null,__cbOnceOwnerUnbindTileHeightChange:null,emitTileHeightChange:function(e,n){var t=0;if(null!=this.__cbOnTileHeightChange&&(t+=this.__cbOnTileHeightChange.length),null!=this.__cbOnceTileHeightChange&&(t+=this.__cbOnceTileHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTileHeightChange)for(var r=0,a=this.__cbOnTileHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTileHeightChange[h],++s):--t}if(null!=this.__cbOnceTileHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceTileHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTileHeightChange[h],this.__cbOnceTileHeightChange[h]=null,o=this.__cbOnceOwnerUnbindTileHeightChange[h],(this.__cbOnceOwnerUnbindTileHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTileHeightChange[h]),c.push(this.__cbOnceTileHeightChange[h]))}this.__cbOnceOwnerUnbindTileHeightChange=u,this.__cbOnceTileHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTileHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTileHeightChange&&(this.__cbOnOwnerUnbindTileHeightChange=[]),this.__cbOnOwnerUnbindTileHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTileHeightChange&&(this.__cbOnOwnerUnbindTileHeightChange=[]),this.__cbOnOwnerUnbindTileHeightChange.push(null);null==this.__cbOnTileHeightChange&&(this.__cbOnTileHeightChange=[]),this.__cbOnTileHeightChange.push(t)},onceTileHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTileHeightChange&&(this.__cbOnceOwnerUnbindTileHeightChange=[]),this.__cbOnceOwnerUnbindTileHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTileHeightChange&&(this.__cbOnceOwnerUnbindTileHeightChange=[]),this.__cbOnceOwnerUnbindTileHeightChange.push(null);null==this.__cbOnceTileHeightChange&&(this.__cbOnceTileHeightChange=[]),this.__cbOnceTileHeightChange.push(t)},offTileHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnTileHeightChange&&-1!=(n=this.__cbOnTileHeightChange.indexOf(e))&&(this.__cbOnTileHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTileHeightChange[n])&&s(),this.__cbOnOwnerUnbindTileHeightChange.splice(n,1)),null!=this.__cbOnceTileHeightChange&&-1!=(n=this.__cbOnceTileHeightChange.indexOf(e))&&(this.__cbOnceTileHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTileHeightChange[n])&&s(),this.__cbOnceOwnerUnbindTileHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTileHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindTileHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTileHeightChange[l])&&s()}this.__cbOnOwnerUnbindTileHeightChange=null}if(null!=this.__cbOnceOwnerUnbindTileHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindTileHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTileHeightChange[l])&&s()}this.__cbOnceOwnerUnbindTileHeightChange=null}this.__cbOnTileHeightChange=null,this.__cbOnceTileHeightChange=null}},listensTileHeightChange:function(){return null!=this.__cbOnTileHeightChange&&0<this.__cbOnTileHeightChange.length||null!=this.__cbOnceTileHeightChange&&0<this.__cbOnceTileHeightChange.length},spacingAutoruns:null,get_spacing:function(){var e,n,t=this.unobservedSpacing;return null!=M.current&&(e=M.current,null!=(n=this.spacingAutoruns)||(n=M.getAutorunArray(),null!=(this.spacingAutoruns=n)))&&e.bindToAutorunArray(n),t},set_spacing:function(e){var n=this.unobservedSpacing;return n!=(this.unobservedSpacing=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitSpacingChange(e,n),null!=(n=this.spacingAutoruns))&&(this.spacingAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateSpacing:function(){var e=this.unobservedSpacing,e=(this.emitSpacingChange(e,e),this.spacingAutoruns);null!=e&&(this.spacingAutoruns=null,M.invalidateAutorunArray(e))},unobservedSpacing:null,__cbOnSpacingChange:null,__cbOnceSpacingChange:null,__cbOnOwnerUnbindSpacingChange:null,__cbOnceOwnerUnbindSpacingChange:null,emitSpacingChange:function(e,n){var t=0;if(null!=this.__cbOnSpacingChange&&(t+=this.__cbOnSpacingChange.length),null!=this.__cbOnceSpacingChange&&(t+=this.__cbOnceSpacingChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnSpacingChange)for(var r=0,a=this.__cbOnSpacingChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnSpacingChange[h],++s):--t}if(null!=this.__cbOnceSpacingChange){for(var u=null,c=null,r=0,a=this.__cbOnceSpacingChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceSpacingChange[h],this.__cbOnceSpacingChange[h]=null,o=this.__cbOnceOwnerUnbindSpacingChange[h],(this.__cbOnceOwnerUnbindSpacingChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindSpacingChange[h]),c.push(this.__cbOnceSpacingChange[h]))}this.__cbOnceOwnerUnbindSpacingChange=u,this.__cbOnceSpacingChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onSpacingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event spacingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSpacingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindSpacingChange&&(this.__cbOnOwnerUnbindSpacingChange=[]),this.__cbOnOwnerUnbindSpacingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindSpacingChange&&(this.__cbOnOwnerUnbindSpacingChange=[]),this.__cbOnOwnerUnbindSpacingChange.push(null);null==this.__cbOnSpacingChange&&(this.__cbOnSpacingChange=[]),this.__cbOnSpacingChange.push(t)},onceSpacingChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event spacingChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSpacingChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindSpacingChange&&(this.__cbOnceOwnerUnbindSpacingChange=[]),this.__cbOnceOwnerUnbindSpacingChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindSpacingChange&&(this.__cbOnceOwnerUnbindSpacingChange=[]),this.__cbOnceOwnerUnbindSpacingChange.push(null);null==this.__cbOnceSpacingChange&&(this.__cbOnceSpacingChange=[]),this.__cbOnceSpacingChange.push(t)},offSpacingChange:function(e){if(null!=e){var n;null!=this.__cbOnSpacingChange&&-1!=(n=this.__cbOnSpacingChange.indexOf(e))&&(this.__cbOnSpacingChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindSpacingChange[n])&&s(),this.__cbOnOwnerUnbindSpacingChange.splice(n,1)),null!=this.__cbOnceSpacingChange&&-1!=(n=this.__cbOnceSpacingChange.indexOf(e))&&(this.__cbOnceSpacingChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindSpacingChange[n])&&s(),this.__cbOnceOwnerUnbindSpacingChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSpacingChange){for(var t=0,i=this.__cbOnOwnerUnbindSpacingChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindSpacingChange[l])&&s()}this.__cbOnOwnerUnbindSpacingChange=null}if(null!=this.__cbOnceOwnerUnbindSpacingChange){for(t=0,i=this.__cbOnceOwnerUnbindSpacingChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindSpacingChange[l])&&s()}this.__cbOnceOwnerUnbindSpacingChange=null}this.__cbOnSpacingChange=null,this.__cbOnceSpacingChange=null}},listensSpacingChange:function(){return null!=this.__cbOnSpacingChange&&0<this.__cbOnSpacingChange.length||null!=this.__cbOnceSpacingChange&&0<this.__cbOnceSpacingChange.length},marginAutoruns:null,get_margin:function(){var e,n,t=this.unobservedMargin;return null!=M.current&&(e=M.current,null!=(n=this.marginAutoruns)||(n=M.getAutorunArray(),null!=(this.marginAutoruns=n)))&&e.bindToAutorunArray(n),t},set_margin:function(e){var n=this.unobservedMargin;return n!=(this.unobservedMargin=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitMarginChange(e,n),null!=(n=this.marginAutoruns))&&(this.marginAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateMargin:function(){var e=this.unobservedMargin,e=(this.emitMarginChange(e,e),this.marginAutoruns);null!=e&&(this.marginAutoruns=null,M.invalidateAutorunArray(e))},unobservedMargin:null,__cbOnMarginChange:null,__cbOnceMarginChange:null,__cbOnOwnerUnbindMarginChange:null,__cbOnceOwnerUnbindMarginChange:null,emitMarginChange:function(e,n){var t=0;if(null!=this.__cbOnMarginChange&&(t+=this.__cbOnMarginChange.length),null!=this.__cbOnceMarginChange&&(t+=this.__cbOnceMarginChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnMarginChange)for(var r=0,a=this.__cbOnMarginChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnMarginChange[h],++s):--t}if(null!=this.__cbOnceMarginChange){for(var u=null,c=null,r=0,a=this.__cbOnceMarginChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceMarginChange[h],this.__cbOnceMarginChange[h]=null,o=this.__cbOnceOwnerUnbindMarginChange[h],(this.__cbOnceOwnerUnbindMarginChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindMarginChange[h]),c.push(this.__cbOnceMarginChange[h]))}this.__cbOnceOwnerUnbindMarginChange=u,this.__cbOnceMarginChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onMarginChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event marginChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMarginChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindMarginChange&&(this.__cbOnOwnerUnbindMarginChange=[]),this.__cbOnOwnerUnbindMarginChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindMarginChange&&(this.__cbOnOwnerUnbindMarginChange=[]),this.__cbOnOwnerUnbindMarginChange.push(null);null==this.__cbOnMarginChange&&(this.__cbOnMarginChange=[]),this.__cbOnMarginChange.push(t)},onceMarginChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event marginChange because owner is destroyed!");var l=function(e){null!=t&&(i.offMarginChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindMarginChange&&(this.__cbOnceOwnerUnbindMarginChange=[]),this.__cbOnceOwnerUnbindMarginChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindMarginChange&&(this.__cbOnceOwnerUnbindMarginChange=[]),this.__cbOnceOwnerUnbindMarginChange.push(null);null==this.__cbOnceMarginChange&&(this.__cbOnceMarginChange=[]),this.__cbOnceMarginChange.push(t)},offMarginChange:function(e){if(null!=e){var n;null!=this.__cbOnMarginChange&&-1!=(n=this.__cbOnMarginChange.indexOf(e))&&(this.__cbOnMarginChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindMarginChange[n])&&s(),this.__cbOnOwnerUnbindMarginChange.splice(n,1)),null!=this.__cbOnceMarginChange&&-1!=(n=this.__cbOnceMarginChange.indexOf(e))&&(this.__cbOnceMarginChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindMarginChange[n])&&s(),this.__cbOnceOwnerUnbindMarginChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindMarginChange){for(var t=0,i=this.__cbOnOwnerUnbindMarginChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindMarginChange[l])&&s()}this.__cbOnOwnerUnbindMarginChange=null}if(null!=this.__cbOnceOwnerUnbindMarginChange){for(t=0,i=this.__cbOnceOwnerUnbindMarginChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindMarginChange[l])&&s()}this.__cbOnceOwnerUnbindMarginChange=null}this.__cbOnMarginChange=null,this.__cbOnceMarginChange=null}},listensMarginChange:function(){return null!=this.__cbOnMarginChange&&0<this.__cbOnMarginChange.length||null!=this.__cbOnceMarginChange&&0<this.__cbOnceMarginChange.length},tileCountAutoruns:null,get_tileCount:function(){var e,n,t=this.unobservedTileCount;return null!=M.current&&(e=M.current,null!=(n=this.tileCountAutoruns)||(n=M.getAutorunArray(),null!=(this.tileCountAutoruns=n)))&&e.bindToAutorunArray(n),t},set_tileCount:function(e){var n=this.unobservedTileCount;return n!=(this.unobservedTileCount=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitTileCountChange(e,n),null!=(n=this.tileCountAutoruns))&&(this.tileCountAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateTileCount:function(){var e=this.unobservedTileCount,e=(this.emitTileCountChange(e,e),this.tileCountAutoruns);null!=e&&(this.tileCountAutoruns=null,M.invalidateAutorunArray(e))},unobservedTileCount:null,__cbOnTileCountChange:null,__cbOnceTileCountChange:null,__cbOnOwnerUnbindTileCountChange:null,__cbOnceOwnerUnbindTileCountChange:null,emitTileCountChange:function(e,n){var t=0;if(null!=this.__cbOnTileCountChange&&(t+=this.__cbOnTileCountChange.length),null!=this.__cbOnceTileCountChange&&(t+=this.__cbOnceTileCountChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnTileCountChange)for(var r=0,a=this.__cbOnTileCountChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnTileCountChange[h],++s):--t}if(null!=this.__cbOnceTileCountChange){for(var u=null,c=null,r=0,a=this.__cbOnceTileCountChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceTileCountChange[h],this.__cbOnceTileCountChange[h]=null,o=this.__cbOnceOwnerUnbindTileCountChange[h],(this.__cbOnceOwnerUnbindTileCountChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindTileCountChange[h]),c.push(this.__cbOnceTileCountChange[h]))}this.__cbOnceOwnerUnbindTileCountChange=u,this.__cbOnceTileCountChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onTileCountChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileCountChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileCountChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindTileCountChange&&(this.__cbOnOwnerUnbindTileCountChange=[]),this.__cbOnOwnerUnbindTileCountChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindTileCountChange&&(this.__cbOnOwnerUnbindTileCountChange=[]),this.__cbOnOwnerUnbindTileCountChange.push(null);null==this.__cbOnTileCountChange&&(this.__cbOnTileCountChange=[]),this.__cbOnTileCountChange.push(t)},onceTileCountChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event tileCountChange because owner is destroyed!");var l=function(e){null!=t&&(i.offTileCountChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindTileCountChange&&(this.__cbOnceOwnerUnbindTileCountChange=[]),this.__cbOnceOwnerUnbindTileCountChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindTileCountChange&&(this.__cbOnceOwnerUnbindTileCountChange=[]),this.__cbOnceOwnerUnbindTileCountChange.push(null);null==this.__cbOnceTileCountChange&&(this.__cbOnceTileCountChange=[]),this.__cbOnceTileCountChange.push(t)},offTileCountChange:function(e){if(null!=e){var n;null!=this.__cbOnTileCountChange&&-1!=(n=this.__cbOnTileCountChange.indexOf(e))&&(this.__cbOnTileCountChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindTileCountChange[n])&&s(),this.__cbOnOwnerUnbindTileCountChange.splice(n,1)),null!=this.__cbOnceTileCountChange&&-1!=(n=this.__cbOnceTileCountChange.indexOf(e))&&(this.__cbOnceTileCountChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindTileCountChange[n])&&s(),this.__cbOnceOwnerUnbindTileCountChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindTileCountChange){for(var t=0,i=this.__cbOnOwnerUnbindTileCountChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindTileCountChange[l])&&s()}this.__cbOnOwnerUnbindTileCountChange=null}if(null!=this.__cbOnceOwnerUnbindTileCountChange){for(t=0,i=this.__cbOnceOwnerUnbindTileCountChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindTileCountChange[l])&&s()}this.__cbOnceOwnerUnbindTileCountChange=null}this.__cbOnTileCountChange=null,this.__cbOnceTileCountChange=null}},listensTileCountChange:function(){return null!=this.__cbOnTileCountChange&&0<this.__cbOnTileCountChange.length||null!=this.__cbOnceTileCountChange&&0<this.__cbOnceTileCountChange.length},columnsAutoruns:null,get_columns:function(){var e,n,t=this.unobservedColumns;return null!=M.current&&(e=M.current,null!=(n=this.columnsAutoruns)||(n=M.getAutorunArray(),null!=(this.columnsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_columns:function(e){var n=this.unobservedColumns;return n!=(this.unobservedColumns=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitColumnsChange(e,n),null!=(n=this.columnsAutoruns))&&(this.columnsAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateColumns:function(){var e=this.unobservedColumns,e=(this.emitColumnsChange(e,e),this.columnsAutoruns);null!=e&&(this.columnsAutoruns=null,M.invalidateAutorunArray(e))},unobservedColumns:null,__cbOnColumnsChange:null,__cbOnceColumnsChange:null,__cbOnOwnerUnbindColumnsChange:null,__cbOnceOwnerUnbindColumnsChange:null,emitColumnsChange:function(e,n){var t=0;if(null!=this.__cbOnColumnsChange&&(t+=this.__cbOnColumnsChange.length),null!=this.__cbOnceColumnsChange&&(t+=this.__cbOnceColumnsChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnColumnsChange)for(var r=0,a=this.__cbOnColumnsChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnColumnsChange[h],++s):--t}if(null!=this.__cbOnceColumnsChange){for(var u=null,c=null,r=0,a=this.__cbOnceColumnsChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceColumnsChange[h],this.__cbOnceColumnsChange[h]=null,o=this.__cbOnceOwnerUnbindColumnsChange[h],(this.__cbOnceOwnerUnbindColumnsChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindColumnsChange[h]),c.push(this.__cbOnceColumnsChange[h]))}this.__cbOnceOwnerUnbindColumnsChange=u,this.__cbOnceColumnsChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onColumnsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event columnsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offColumnsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindColumnsChange&&(this.__cbOnOwnerUnbindColumnsChange=[]),this.__cbOnOwnerUnbindColumnsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindColumnsChange&&(this.__cbOnOwnerUnbindColumnsChange=[]),this.__cbOnOwnerUnbindColumnsChange.push(null);null==this.__cbOnColumnsChange&&(this.__cbOnColumnsChange=[]),this.__cbOnColumnsChange.push(t)},onceColumnsChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event columnsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offColumnsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindColumnsChange&&(this.__cbOnceOwnerUnbindColumnsChange=[]),this.__cbOnceOwnerUnbindColumnsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindColumnsChange&&(this.__cbOnceOwnerUnbindColumnsChange=[]),this.__cbOnceOwnerUnbindColumnsChange.push(null);null==this.__cbOnceColumnsChange&&(this.__cbOnceColumnsChange=[]),this.__cbOnceColumnsChange.push(t)},offColumnsChange:function(e){if(null!=e){var n;null!=this.__cbOnColumnsChange&&-1!=(n=this.__cbOnColumnsChange.indexOf(e))&&(this.__cbOnColumnsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindColumnsChange[n])&&s(),this.__cbOnOwnerUnbindColumnsChange.splice(n,1)),null!=this.__cbOnceColumnsChange&&-1!=(n=this.__cbOnceColumnsChange.indexOf(e))&&(this.__cbOnceColumnsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindColumnsChange[n])&&s(),this.__cbOnceOwnerUnbindColumnsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindColumnsChange){for(var t=0,i=this.__cbOnOwnerUnbindColumnsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindColumnsChange[l])&&s()}this.__cbOnOwnerUnbindColumnsChange=null}if(null!=this.__cbOnceOwnerUnbindColumnsChange){for(t=0,i=this.__cbOnceOwnerUnbindColumnsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindColumnsChange[l])&&s()}this.__cbOnceOwnerUnbindColumnsChange=null}this.__cbOnColumnsChange=null,this.__cbOnceColumnsChange=null}},listensColumnsChange:function(){return null!=this.__cbOnColumnsChange&&0<this.__cbOnColumnsChange.length||null!=this.__cbOnceColumnsChange&&0<this.__cbOnceColumnsChange.length},willListenRowsChange:function(){this.get_unobservedRows()},get_unobservedRows:function(){var n,t;return 0<=this._lifecycleState?null==this.computeAutorunRows?(n=this,t=new M(null),this.computedOnceRows=!0,(this.computeAutorunRows=t).onRun=function(){var e=n.computeRows();M.unobserve(),n.set_rows(e),M.reobserve()},t.onDestroy(this,function(e){n.computeAutorunRows==t&&(n.computeAutorunRows=null),n=t=null}),this.onDestroy(t,function(e){null!=t&&(t.destroy(),t=null),n=null}),t.run()):this.computeAutorunRows.invalidated&&this.computeAutorunRows.run():this.computedOnceRows||(M.unobserve(),this.computedOnceRows=!0,this.unobservedRows=this.computeRows(),M.reobserve()),this.unobservedRows},rowsAutoruns:null,get_rows:function(){var e,n,t=this.get_unobservedRows();return null!=M.current&&(e=M.current,null!=(n=this.rowsAutoruns)||(n=M.getAutorunArray(),null!=(this.rowsAutoruns=n)))&&e.bindToAutorunArray(n),t},set_rows:function(e){var n=this.get_unobservedRows();return n!=(this.unobservedRows=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitRowsChange(e,n),null!=(n=this.rowsAutoruns))&&(this.rowsAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateRows:function(){var e=this.get_unobservedRows(),e=(this.emitRowsChange(e,e),this.rowsAutoruns);null!=e&&(this.rowsAutoruns=null,M.invalidateAutorunArray(e))},unobservedRows:null,__cbOnRowsChange:null,__cbOnceRowsChange:null,__cbOnOwnerUnbindRowsChange:null,__cbOnceOwnerUnbindRowsChange:null,emitRowsChange:function(e,n){var t=0;if(null!=this.__cbOnRowsChange&&(t+=this.__cbOnRowsChange.length),null!=this.__cbOnceRowsChange&&(t+=this.__cbOnceRowsChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnRowsChange)for(var r=0,a=this.__cbOnRowsChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnRowsChange[h],++s):--t}if(null!=this.__cbOnceRowsChange){for(var u=null,c=null,r=0,a=this.__cbOnceRowsChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceRowsChange[h],this.__cbOnceRowsChange[h]=null,o=this.__cbOnceOwnerUnbindRowsChange[h],(this.__cbOnceOwnerUnbindRowsChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindRowsChange[h]),c.push(this.__cbOnceRowsChange[h]))}this.__cbOnceOwnerUnbindRowsChange=u,this.__cbOnceRowsChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onRowsChange:function(n,t){var i=this;if(null==this.__cbOnRowsChange&&null==this.__cbOnceRowsChange&&this.willListenRowsChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event rowsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRowsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindRowsChange&&(this.__cbOnOwnerUnbindRowsChange=[]),this.__cbOnOwnerUnbindRowsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindRowsChange&&(this.__cbOnOwnerUnbindRowsChange=[]),this.__cbOnOwnerUnbindRowsChange.push(null);null==this.__cbOnRowsChange&&(this.__cbOnRowsChange=[]),this.__cbOnRowsChange.push(t)},onceRowsChange:function(n,t){var i=this;if(null==this.__cbOnRowsChange&&null==this.__cbOnceRowsChange&&this.willListenRowsChange(),null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event rowsChange because owner is destroyed!");var l=function(e){null!=t&&(i.offRowsChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindRowsChange&&(this.__cbOnceOwnerUnbindRowsChange=[]),this.__cbOnceOwnerUnbindRowsChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindRowsChange&&(this.__cbOnceOwnerUnbindRowsChange=[]),this.__cbOnceOwnerUnbindRowsChange.push(null);null==this.__cbOnceRowsChange&&(this.__cbOnceRowsChange=[]),this.__cbOnceRowsChange.push(t)},offRowsChange:function(e){if(null!=e){var n;null!=this.__cbOnRowsChange&&-1!=(n=this.__cbOnRowsChange.indexOf(e))&&(this.__cbOnRowsChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindRowsChange[n])&&s(),this.__cbOnOwnerUnbindRowsChange.splice(n,1)),null!=this.__cbOnceRowsChange&&-1!=(n=this.__cbOnceRowsChange.indexOf(e))&&(this.__cbOnceRowsChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindRowsChange[n])&&s(),this.__cbOnceOwnerUnbindRowsChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindRowsChange){for(var t=0,i=this.__cbOnOwnerUnbindRowsChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindRowsChange[l])&&s()}this.__cbOnOwnerUnbindRowsChange=null}if(null!=this.__cbOnceOwnerUnbindRowsChange){for(t=0,i=this.__cbOnceOwnerUnbindRowsChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindRowsChange[l])&&s()}this.__cbOnceOwnerUnbindRowsChange=null}this.__cbOnRowsChange=null,this.__cbOnceRowsChange=null}},listensRowsChange:function(){return null!=this.__cbOnRowsChange&&0<this.__cbOnRowsChange.length||null!=this.__cbOnceRowsChange&&0<this.__cbOnceRowsChange.length},computeRows:function(){var e=0,n=this.get_image();return null!=n&&(n=n.get_height(),e=Math.floor((n-2*this.get_margin()+this.get_spacing())/(this.get_tileHeight()+this.get_spacing()))),e},computeAutorunRows:null,computedOnceRows:null,imageAutoruns:null,get_image:function(){var e,n,t=this.unobservedImage;return null!=M.current&&(e=M.current,null!=(n=this.imageAutoruns)||(n=M.getAutorunArray(),null!=(this.imageAutoruns=n)))&&e.bindToAutorunArray(n),t},set_image:function(e){var n=this.unobservedImage;return this.set_unobservedImage(e),n!=e&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitImageChange(e,n),null!=(n=this.imageAutoruns))&&(this.imageAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateImage:function(){var e=this.unobservedImage,e=(this.emitImageChange(e,e),this.imageAutoruns);null!=e&&(this.imageAutoruns=null,M.invalidateAutorunArray(e))},unobservedImage:null,__cbOnImageChange:null,__cbOnceImageChange:null,__cbOnOwnerUnbindImageChange:null,__cbOnceOwnerUnbindImageChange:null,emitImageChange:function(e,n){var t=0;if(null!=this.__cbOnImageChange&&(t+=this.__cbOnImageChange.length),null!=this.__cbOnceImageChange&&(t+=this.__cbOnceImageChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnImageChange)for(var r=0,a=this.__cbOnImageChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnImageChange[h],++s):--t}if(null!=this.__cbOnceImageChange){for(var u=null,c=null,r=0,a=this.__cbOnceImageChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceImageChange[h],this.__cbOnceImageChange[h]=null,o=this.__cbOnceOwnerUnbindImageChange[h],(this.__cbOnceOwnerUnbindImageChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindImageChange[h]),c.push(this.__cbOnceImageChange[h]))}this.__cbOnceOwnerUnbindImageChange=u,this.__cbOnceImageChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onImageChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event imageChange because owner is destroyed!");var l=function(e){null!=t&&(i.offImageChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindImageChange&&(this.__cbOnOwnerUnbindImageChange=[]),this.__cbOnOwnerUnbindImageChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindImageChange&&(this.__cbOnOwnerUnbindImageChange=[]),this.__cbOnOwnerUnbindImageChange.push(null);null==this.__cbOnImageChange&&(this.__cbOnImageChange=[]),this.__cbOnImageChange.push(t)},onceImageChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event imageChange because owner is destroyed!");var l=function(e){null!=t&&(i.offImageChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindImageChange&&(this.__cbOnceOwnerUnbindImageChange=[]),this.__cbOnceOwnerUnbindImageChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindImageChange&&(this.__cbOnceOwnerUnbindImageChange=[]),this.__cbOnceOwnerUnbindImageChange.push(null);null==this.__cbOnceImageChange&&(this.__cbOnceImageChange=[]),this.__cbOnceImageChange.push(t)},offImageChange:function(e){if(null!=e){var n;null!=this.__cbOnImageChange&&-1!=(n=this.__cbOnImageChange.indexOf(e))&&(this.__cbOnImageChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindImageChange[n])&&s(),this.__cbOnOwnerUnbindImageChange.splice(n,1)),null!=this.__cbOnceImageChange&&-1!=(n=this.__cbOnceImageChange.indexOf(e))&&(this.__cbOnceImageChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindImageChange[n])&&s(),this.__cbOnceOwnerUnbindImageChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindImageChange){for(var t=0,i=this.__cbOnOwnerUnbindImageChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindImageChange[l])&&s()}this.__cbOnOwnerUnbindImageChange=null}if(null!=this.__cbOnceOwnerUnbindImageChange){for(t=0,i=this.__cbOnceOwnerUnbindImageChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindImageChange[l])&&s()}this.__cbOnceOwnerUnbindImageChange=null}this.__cbOnImageChange=null,this.__cbOnceImageChange=null}},listensImageChange:function(){return null!=this.__cbOnImageChange&&0<this.__cbOnImageChange.length||null!=this.__cbOnceImageChange&&0<this.__cbOnceImageChange.length},set_unobservedImage:function(e){var n;return e!=this.unobservedImage&&(n=this.unobservedImage,this.unobservedImage=e,this.implicitImage&&null!=n&&n.destroy(),this.implicitImage=!1),e},gridOrientationAutoruns:null,get_gridOrientation:function(){var e,n,t=this.unobservedGridOrientation;return null!=M.current&&(e=M.current,null!=(n=this.gridOrientationAutoruns)||(n=M.getAutorunArray(),null!=(this.gridOrientationAutoruns=n)))&&e.bindToAutorunArray(n),t},set_gridOrientation:function(e){var n=this.unobservedGridOrientation;return n!=(this.unobservedGridOrientation=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitGridOrientationChange(e,n),null!=(n=this.gridOrientationAutoruns))&&(this.gridOrientationAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateGridOrientation:function(){var e=this.unobservedGridOrientation,e=(this.emitGridOrientationChange(e,e),this.gridOrientationAutoruns);null!=e&&(this.gridOrientationAutoruns=null,M.invalidateAutorunArray(e))},unobservedGridOrientation:null,__cbOnGridOrientationChange:null,__cbOnceGridOrientationChange:null,__cbOnOwnerUnbindGridOrientationChange:null,__cbOnceOwnerUnbindGridOrientationChange:null,emitGridOrientationChange:function(e,n){var t=0;if(null!=this.__cbOnGridOrientationChange&&(t+=this.__cbOnGridOrientationChange.length),null!=this.__cbOnceGridOrientationChange&&(t+=this.__cbOnceGridOrientationChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGridOrientationChange)for(var r=0,a=this.__cbOnGridOrientationChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGridOrientationChange[h],++s):--t}if(null!=this.__cbOnceGridOrientationChange){for(var u=null,c=null,r=0,a=this.__cbOnceGridOrientationChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGridOrientationChange[h],this.__cbOnceGridOrientationChange[h]=null,o=this.__cbOnceOwnerUnbindGridOrientationChange[h],(this.__cbOnceOwnerUnbindGridOrientationChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGridOrientationChange[h]),c.push(this.__cbOnceGridOrientationChange[h]))}this.__cbOnceOwnerUnbindGridOrientationChange=u,this.__cbOnceGridOrientationChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGridOrientationChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gridOrientationChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGridOrientationChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGridOrientationChange&&(this.__cbOnOwnerUnbindGridOrientationChange=[]),this.__cbOnOwnerUnbindGridOrientationChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGridOrientationChange&&(this.__cbOnOwnerUnbindGridOrientationChange=[]),this.__cbOnOwnerUnbindGridOrientationChange.push(null);null==this.__cbOnGridOrientationChange&&(this.__cbOnGridOrientationChange=[]),this.__cbOnGridOrientationChange.push(t)},onceGridOrientationChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gridOrientationChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGridOrientationChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGridOrientationChange&&(this.__cbOnceOwnerUnbindGridOrientationChange=[]),this.__cbOnceOwnerUnbindGridOrientationChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGridOrientationChange&&(this.__cbOnceOwnerUnbindGridOrientationChange=[]),this.__cbOnceOwnerUnbindGridOrientationChange.push(null);null==this.__cbOnceGridOrientationChange&&(this.__cbOnceGridOrientationChange=[]),this.__cbOnceGridOrientationChange.push(t)},offGridOrientationChange:function(e){if(null!=e){var n;null!=this.__cbOnGridOrientationChange&&-1!=(n=this.__cbOnGridOrientationChange.indexOf(e))&&(this.__cbOnGridOrientationChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGridOrientationChange[n])&&s(),this.__cbOnOwnerUnbindGridOrientationChange.splice(n,1)),null!=this.__cbOnceGridOrientationChange&&-1!=(n=this.__cbOnceGridOrientationChange.indexOf(e))&&(this.__cbOnceGridOrientationChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGridOrientationChange[n])&&s(),this.__cbOnceOwnerUnbindGridOrientationChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGridOrientationChange){for(var t=0,i=this.__cbOnOwnerUnbindGridOrientationChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGridOrientationChange[l])&&s()}this.__cbOnOwnerUnbindGridOrientationChange=null}if(null!=this.__cbOnceOwnerUnbindGridOrientationChange){for(t=0,i=this.__cbOnceOwnerUnbindGridOrientationChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGridOrientationChange[l])&&s()}this.__cbOnceOwnerUnbindGridOrientationChange=null}this.__cbOnGridOrientationChange=null,this.__cbOnceGridOrientationChange=null}},listensGridOrientationChange:function(){return null!=this.__cbOnGridOrientationChange&&0<this.__cbOnGridOrientationChange.length||null!=this.__cbOnceGridOrientationChange&&0<this.__cbOnceGridOrientationChange.length},gridCellWidthAutoruns:null,get_gridCellWidth:function(){var e,n,t=this.unobservedGridCellWidth;return null!=M.current&&(e=M.current,null!=(n=this.gridCellWidthAutoruns)||(n=M.getAutorunArray(),null!=(this.gridCellWidthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_gridCellWidth:function(e){var n=this.unobservedGridCellWidth;return n!=(this.unobservedGridCellWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitGridCellWidthChange(e,n),null!=(n=this.gridCellWidthAutoruns))&&(this.gridCellWidthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateGridCellWidth:function(){var e=this.unobservedGridCellWidth,e=(this.emitGridCellWidthChange(e,e),this.gridCellWidthAutoruns);null!=e&&(this.gridCellWidthAutoruns=null,M.invalidateAutorunArray(e))},unobservedGridCellWidth:null,__cbOnGridCellWidthChange:null,__cbOnceGridCellWidthChange:null,__cbOnOwnerUnbindGridCellWidthChange:null,__cbOnceOwnerUnbindGridCellWidthChange:null,emitGridCellWidthChange:function(e,n){var t=0;if(null!=this.__cbOnGridCellWidthChange&&(t+=this.__cbOnGridCellWidthChange.length),null!=this.__cbOnceGridCellWidthChange&&(t+=this.__cbOnceGridCellWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGridCellWidthChange)for(var r=0,a=this.__cbOnGridCellWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGridCellWidthChange[h],++s):--t}if(null!=this.__cbOnceGridCellWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceGridCellWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGridCellWidthChange[h],this.__cbOnceGridCellWidthChange[h]=null,o=this.__cbOnceOwnerUnbindGridCellWidthChange[h],(this.__cbOnceOwnerUnbindGridCellWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGridCellWidthChange[h]),c.push(this.__cbOnceGridCellWidthChange[h]))}this.__cbOnceOwnerUnbindGridCellWidthChange=u,this.__cbOnceGridCellWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGridCellWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gridCellWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGridCellWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGridCellWidthChange&&(this.__cbOnOwnerUnbindGridCellWidthChange=[]),this.__cbOnOwnerUnbindGridCellWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGridCellWidthChange&&(this.__cbOnOwnerUnbindGridCellWidthChange=[]),this.__cbOnOwnerUnbindGridCellWidthChange.push(null);null==this.__cbOnGridCellWidthChange&&(this.__cbOnGridCellWidthChange=[]),this.__cbOnGridCellWidthChange.push(t)},onceGridCellWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gridCellWidthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGridCellWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGridCellWidthChange&&(this.__cbOnceOwnerUnbindGridCellWidthChange=[]),this.__cbOnceOwnerUnbindGridCellWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGridCellWidthChange&&(this.__cbOnceOwnerUnbindGridCellWidthChange=[]),this.__cbOnceOwnerUnbindGridCellWidthChange.push(null);null==this.__cbOnceGridCellWidthChange&&(this.__cbOnceGridCellWidthChange=[]),this.__cbOnceGridCellWidthChange.push(t)},offGridCellWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnGridCellWidthChange&&-1!=(n=this.__cbOnGridCellWidthChange.indexOf(e))&&(this.__cbOnGridCellWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGridCellWidthChange[n])&&s(),this.__cbOnOwnerUnbindGridCellWidthChange.splice(n,1)),null!=this.__cbOnceGridCellWidthChange&&-1!=(n=this.__cbOnceGridCellWidthChange.indexOf(e))&&(this.__cbOnceGridCellWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGridCellWidthChange[n])&&s(),this.__cbOnceOwnerUnbindGridCellWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGridCellWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindGridCellWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGridCellWidthChange[l])&&s()}this.__cbOnOwnerUnbindGridCellWidthChange=null}if(null!=this.__cbOnceOwnerUnbindGridCellWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindGridCellWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGridCellWidthChange[l])&&s()}this.__cbOnceOwnerUnbindGridCellWidthChange=null}this.__cbOnGridCellWidthChange=null,this.__cbOnceGridCellWidthChange=null}},listensGridCellWidthChange:function(){return null!=this.__cbOnGridCellWidthChange&&0<this.__cbOnGridCellWidthChange.length||null!=this.__cbOnceGridCellWidthChange&&0<this.__cbOnceGridCellWidthChange.length},gridCellHeightAutoruns:null,get_gridCellHeight:function(){var e,n,t=this.unobservedGridCellHeight;return null!=M.current&&(e=M.current,null!=(n=this.gridCellHeightAutoruns)||(n=M.getAutorunArray(),null!=(this.gridCellHeightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_gridCellHeight:function(e){var n=this.unobservedGridCellHeight;return n!=(this.unobservedGridCellHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitGridCellHeightChange(e,n),null!=(n=this.gridCellHeightAutoruns))&&(this.gridCellHeightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateGridCellHeight:function(){var e=this.unobservedGridCellHeight,e=(this.emitGridCellHeightChange(e,e),this.gridCellHeightAutoruns);null!=e&&(this.gridCellHeightAutoruns=null,M.invalidateAutorunArray(e))},unobservedGridCellHeight:null,__cbOnGridCellHeightChange:null,__cbOnceGridCellHeightChange:null,__cbOnOwnerUnbindGridCellHeightChange:null,__cbOnceOwnerUnbindGridCellHeightChange:null,emitGridCellHeightChange:function(e,n){var t=0;if(null!=this.__cbOnGridCellHeightChange&&(t+=this.__cbOnGridCellHeightChange.length),null!=this.__cbOnceGridCellHeightChange&&(t+=this.__cbOnceGridCellHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnGridCellHeightChange)for(var r=0,a=this.__cbOnGridCellHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnGridCellHeightChange[h],++s):--t}if(null!=this.__cbOnceGridCellHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceGridCellHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceGridCellHeightChange[h],this.__cbOnceGridCellHeightChange[h]=null,o=this.__cbOnceOwnerUnbindGridCellHeightChange[h],(this.__cbOnceOwnerUnbindGridCellHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindGridCellHeightChange[h]),c.push(this.__cbOnceGridCellHeightChange[h]))}this.__cbOnceOwnerUnbindGridCellHeightChange=u,this.__cbOnceGridCellHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onGridCellHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gridCellHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGridCellHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindGridCellHeightChange&&(this.__cbOnOwnerUnbindGridCellHeightChange=[]),this.__cbOnOwnerUnbindGridCellHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindGridCellHeightChange&&(this.__cbOnOwnerUnbindGridCellHeightChange=[]),this.__cbOnOwnerUnbindGridCellHeightChange.push(null);null==this.__cbOnGridCellHeightChange&&(this.__cbOnGridCellHeightChange=[]),this.__cbOnGridCellHeightChange.push(t)},onceGridCellHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event gridCellHeightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offGridCellHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindGridCellHeightChange&&(this.__cbOnceOwnerUnbindGridCellHeightChange=[]),this.__cbOnceOwnerUnbindGridCellHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindGridCellHeightChange&&(this.__cbOnceOwnerUnbindGridCellHeightChange=[]),this.__cbOnceOwnerUnbindGridCellHeightChange.push(null);null==this.__cbOnceGridCellHeightChange&&(this.__cbOnceGridCellHeightChange=[]),this.__cbOnceGridCellHeightChange.push(t)},offGridCellHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnGridCellHeightChange&&-1!=(n=this.__cbOnGridCellHeightChange.indexOf(e))&&(this.__cbOnGridCellHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindGridCellHeightChange[n])&&s(),this.__cbOnOwnerUnbindGridCellHeightChange.splice(n,1)),null!=this.__cbOnceGridCellHeightChange&&-1!=(n=this.__cbOnceGridCellHeightChange.indexOf(e))&&(this.__cbOnceGridCellHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindGridCellHeightChange[n])&&s(),this.__cbOnceOwnerUnbindGridCellHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindGridCellHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindGridCellHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindGridCellHeightChange[l])&&s()}this.__cbOnOwnerUnbindGridCellHeightChange=null}if(null!=this.__cbOnceOwnerUnbindGridCellHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindGridCellHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindGridCellHeightChange[l])&&s()}this.__cbOnceOwnerUnbindGridCellHeightChange=null}this.__cbOnGridCellHeightChange=null,this.__cbOnceGridCellHeightChange=null}},listensGridCellHeightChange:function(){return null!=this.__cbOnGridCellHeightChange&&0<this.__cbOnGridCellHeightChange.length||null!=this.__cbOnceGridCellHeightChange&&0<this.__cbOnceGridCellHeightChange.length},slopesMapping:null,implicitImage:null,get_texture:function(){return null!=this.get_image()?this.unobservedImage.texture:null},set_texture:function(e){return null!=e?null!=this.unobservedImage&&this.unobservedImage.texture==e||(this.set_unobservedImage(new yi),this.implicitImage=!0,this.unobservedImage.set_texture(e)):(this.set_unobservedImage(null),this.implicitImage=!1),e},tileSize:function(e,n){this.set_tileWidth(e),this.set_tileHeight(n)},gidAtPosition:function(e,n){return Math.floor(this.get_firstGid()+n*this.get_columns()+e)},columnForGid:function(e){return(e-this.get_firstGid())%this.get_columns()},rowForGid:function(e){return Math.floor((e-this.get_firstGid())/this.get_columns())},slopesAutoruns:null,get_slopes:function(){var e,n,t=this.unobservedSlopes;return null!=M.current&&(e=M.current,null!=(n=this.slopesAutoruns)||(n=M.getAutorunArray(),null!=(this.slopesAutoruns=n)))&&e.bindToAutorunArray(n),t},set_slopes:function(e){var n=this.unobservedSlopes;return this.set_unobservedSlopes(e),xs.equalAny(n,e)||(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitSlopesChange(e,n),null!=(n=this.slopesAutoruns)&&(this.slopesAutoruns=null,M.invalidateAutorunArray(n))),e},invalidateSlopes:function(){var e=this.unobservedSlopes,e=(this.emitSlopesChange(e,e),this.slopesAutoruns);null!=e&&(this.slopesAutoruns=null,M.invalidateAutorunArray(e))},unobservedSlopes:null,__cbOnSlopesChange:null,__cbOnceSlopesChange:null,__cbOnOwnerUnbindSlopesChange:null,__cbOnceOwnerUnbindSlopesChange:null,emitSlopesChange:function(e,n){var t=0;if(null!=this.__cbOnSlopesChange&&(t+=this.__cbOnSlopesChange.length),null!=this.__cbOnceSlopesChange&&(t+=this.__cbOnceSlopesChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnSlopesChange)for(var r=0,a=this.__cbOnSlopesChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnSlopesChange[h],++s):--t}if(null!=this.__cbOnceSlopesChange){for(var u=null,c=null,r=0,a=this.__cbOnceSlopesChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceSlopesChange[h],this.__cbOnceSlopesChange[h]=null,o=this.__cbOnceOwnerUnbindSlopesChange[h],(this.__cbOnceOwnerUnbindSlopesChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindSlopesChange[h]),c.push(this.__cbOnceSlopesChange[h]))}this.__cbOnceOwnerUnbindSlopesChange=u,this.__cbOnceSlopesChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onSlopesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event slopesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSlopesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindSlopesChange&&(this.__cbOnOwnerUnbindSlopesChange=[]),this.__cbOnOwnerUnbindSlopesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindSlopesChange&&(this.__cbOnOwnerUnbindSlopesChange=[]),this.__cbOnOwnerUnbindSlopesChange.push(null);null==this.__cbOnSlopesChange&&(this.__cbOnSlopesChange=[]),this.__cbOnSlopesChange.push(t)},onceSlopesChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event slopesChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSlopesChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindSlopesChange&&(this.__cbOnceOwnerUnbindSlopesChange=[]),this.__cbOnceOwnerUnbindSlopesChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindSlopesChange&&(this.__cbOnceOwnerUnbindSlopesChange=[]),this.__cbOnceOwnerUnbindSlopesChange.push(null);null==this.__cbOnceSlopesChange&&(this.__cbOnceSlopesChange=[]),this.__cbOnceSlopesChange.push(t)},offSlopesChange:function(e){if(null!=e){var n;null!=this.__cbOnSlopesChange&&-1!=(n=this.__cbOnSlopesChange.indexOf(e))&&(this.__cbOnSlopesChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindSlopesChange[n])&&s(),this.__cbOnOwnerUnbindSlopesChange.splice(n,1)),null!=this.__cbOnceSlopesChange&&-1!=(n=this.__cbOnceSlopesChange.indexOf(e))&&(this.__cbOnceSlopesChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindSlopesChange[n])&&s(),this.__cbOnceOwnerUnbindSlopesChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSlopesChange){for(var t=0,i=this.__cbOnOwnerUnbindSlopesChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindSlopesChange[l])&&s()}this.__cbOnOwnerUnbindSlopesChange=null}if(null!=this.__cbOnceOwnerUnbindSlopesChange){for(t=0,i=this.__cbOnceOwnerUnbindSlopesChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindSlopesChange[l])&&s()}this.__cbOnceOwnerUnbindSlopesChange=null}this.__cbOnSlopesChange=null,this.__cbOnceSlopesChange=null}},listensSlopesChange:function(){return null!=this.__cbOnSlopesChange&&0<this.__cbOnSlopesChange.length||null!=this.__cbOnceSlopesChange&&0<this.__cbOnceSlopesChange.length},set_unobservedSlopes:function(e){return this.unobservedSlopes!=e&&(this.unobservedSlopes=e,this.slopesMapping=null),e},_setSlope:function(e,n){n.index!=e&&(n=new pc(e,n.rotation,n.y0,n.y1));var t=-1,i=(null==this.slopesMapping&&this._buildSlopesMapping(),this.slopesMapping.intMap.h[0|e]);-1==(t=(null!=i?i:0)-1)&&(t=this.get_slopes().length,this.slopesMapping.set(e,t+1)),this.get_slopes()[t]=n,1!=this.dirty&&(this.dirty=!0,this.emitModelDirty(this))},_buildSlopesMapping:function(){var e=this.get_slopes();if(null!=e){this.slopesMapping=new rn;for(var n=0,t=e.length;n<t;){var i=n++,l=e[i];null!=l&&this.slopesMapping.set(l.index,1+i)}}else null!=this.slopesMapping&&(this.slopesMapping=null)},_removeSlope:function(e){var n;null!=this.slopesMapping&&-1!=(n=(null!=(n=this.slopesMapping.intMap.h[0|e])?n:0)-1)&&(this.slopesMapping.remove(e),this.get_slopes().splice(n,1),1!=this.dirty)&&(this.dirty=!0,this.emitModelDirty(this))},_getSlope:function(e){if(null==this.get_slopes())return null;null==this.slopesMapping&&this._buildSlopesMapping();e=this.slopesMapping.intMap.h[0|e],e=(null!=e?e:0)-1;return-1!=e?this.get_slopes()[e]:null},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this.set_image(null),this._lifecycleState=-1,tc.prototype.destroy.call(this))},toString:function(){return""+V.string({firstGid:this.get_firstGid(),name:this.get_name(),tileWidth:this.get_tileWidth(),tileHeight:this.get_tileHeight(),spacing:this.get_spacing(),margin:this.get_margin(),tileCount:this.get_tileCount(),columns:this.get_columns(),rows:this.get_rows(),image:this.get_image(),gridOrientation:this.get_gridOrientation(),gridCellWidth:this.get_gridCellWidth(),gridCellHeight:this.get_gridCellHeight(),slopesMapping:this.slopesMapping,implicitImage:this.implicitImage,texture:null!=this.get_image()?this.unobservedImage.texture:null,slopes:this.get_slopes(),ldtkTileset:this.get_ldtkTileset()})},unbindEvents:function(){tc.prototype.unbindEvents.call(this),this.offLdtkTilesetChange(),this.offFirstGidChange(),this.offNameChange(),this.offTileWidthChange(),this.offTileHeightChange(),this.offSpacingChange(),this.offMarginChange(),this.offTileCountChange(),this.offColumnsChange(),this.offRowsChange(),this.offImageChange(),this.offGridOrientationChange(),this.offGridCellWidthChange(),this.offGridCellHeightChange(),this.offSlopesChange()},_default_ldtkTilesetAutoruns:function(){return null},_default_ldtkTileset:function(){return null},_default_firstGidAutoruns:function(){return null},_default_firstGid:function(){return 0},_default_nameAutoruns:function(){return null},_default_name:function(){return null},_default_tileWidthAutoruns:function(){return null},_default_tileWidth:function(){return-1},_default_tileHeightAutoruns:function(){return null},_default_tileHeight:function(){return-1},_default_spacingAutoruns:function(){return null},_default_spacing:function(){return 0},_default_marginAutoruns:function(){return null},_default_margin:function(){return 0},_default_tileCountAutoruns:function(){return null},_default_tileCount:function(){return 0},_default_columnsAutoruns:function(){return null},_default_columns:function(){return 0},_default_rowsAutoruns:function(){return null},_default_computedOnceRows:function(){return!1},_default_imageAutoruns:function(){return null},_default_image:function(){return null},_default_gridOrientationAutoruns:function(){return null},_default_gridOrientation:function(){return vi.ORTHOGONAL},_default_gridCellWidthAutoruns:function(){return null},_default_gridCellWidth:function(){return 0},_default_gridCellHeightAutoruns:function(){return null},_default_gridCellHeight:function(){return 0},_default_slopesMapping:function(){return null},_default_implicitImage:function(){return!1},_default_slopesAutoruns:function(){return null},_default_slopes:function(){return null},__class__:wi,__properties__:$extend(tc.prototype.__properties__,{set_unobservedSlopes:"set_unobservedSlopes",set_slopes:"set_slopes",get_slopes:"get_slopes",set_texture:"set_texture",get_texture:"get_texture",set_gridCellHeight:"set_gridCellHeight",get_gridCellHeight:"get_gridCellHeight",set_gridCellWidth:"set_gridCellWidth",get_gridCellWidth:"get_gridCellWidth",set_gridOrientation:"set_gridOrientation",get_gridOrientation:"get_gridOrientation",set_unobservedImage:"set_unobservedImage",set_image:"set_image",get_image:"get_image",get_unobservedRows:"get_unobservedRows",set_rows:"set_rows",get_rows:"get_rows",set_columns:"set_columns",get_columns:"get_columns",set_tileCount:"set_tileCount",get_tileCount:"get_tileCount",set_margin:"set_margin",get_margin:"get_margin",set_spacing:"set_spacing",get_spacing:"get_spacing",set_tileHeight:"set_tileHeight",get_tileHeight:"get_tileHeight",set_tileWidth:"set_tileWidth",get_tileWidth:"get_tileWidth",set_name:"set_name",get_name:"get_name",set_firstGid:"set_firstGid",get_firstGid:"get_firstGid",set_ldtkTileset:"set_ldtkTileset",get_ldtkTileset:"get_ldtkTileset"})}),I["ceramic.TilesetGridOrientation"]={__ename__:"ceramic.TilesetGridOrientation",__constructs__:null,ORTHOGONAL:{_hx_name:"ORTHOGONAL",_hx_index:0,__enum__:"ceramic.TilesetGridOrientation",toString:d},ISOMETRIC:{_hx_name:"ISOMETRIC",_hx_index:1,__enum__:"ceramic.TilesetGridOrientation",toString:d}}),yi=(vi.__constructs__=[vi.ORTHOGONAL,vi.ISOMETRIC],function(){this.unobservedSource=null,this.sourceAutoruns=null,this.unobservedHeight=-1,this.heightAutoruns=null,this.unobservedWidth=-1,this.widthAutoruns=null,this.texture=null,tc.call(this)}),Ci=((L["ceramic.TilesetImage"]=yi).__name__="ceramic.TilesetImage",yi.__super__=tc,yi.prototype=$extend(tc.prototype,{texture:null,set_texture:function(e){var n;return this.texture!=e&&(null!=(n=this.texture)&&null!=n.asset&&(n.asset.offReplaceTexture($bind(this,this.replaceTexture)),n.asset.release()),this.texture=e,null!=this.texture&&(null!=this.texture.asset&&(this.texture.asset.onReplaceTexture(this,$bind(this,this.replaceTexture)),this.texture.asset.retain()),-1==this.get_width()&&this.set_width(0|this.texture.width),-1==this.get_height()))&&this.set_height(0|this.texture.height),e},widthAutoruns:null,get_width:function(){var e,n,t=this.unobservedWidth;return null!=M.current&&(e=M.current,null!=(n=this.widthAutoruns)||(n=M.getAutorunArray(),null!=(this.widthAutoruns=n)))&&e.bindToAutorunArray(n),t},set_width:function(e){var n=this.unobservedWidth;return n!=(this.unobservedWidth=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitWidthChange(e,n),null!=(n=this.widthAutoruns))&&(this.widthAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateWidth:function(){var e=this.unobservedWidth,e=(this.emitWidthChange(e,e),this.widthAutoruns);null!=e&&(this.widthAutoruns=null,M.invalidateAutorunArray(e))},unobservedWidth:null,__cbOnWidthChange:null,__cbOnceWidthChange:null,__cbOnOwnerUnbindWidthChange:null,__cbOnceOwnerUnbindWidthChange:null,emitWidthChange:function(e,n){var t=0;if(null!=this.__cbOnWidthChange&&(t+=this.__cbOnWidthChange.length),null!=this.__cbOnceWidthChange&&(t+=this.__cbOnceWidthChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnWidthChange)for(var r=0,a=this.__cbOnWidthChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnWidthChange[h],++s):--t}if(null!=this.__cbOnceWidthChange){for(var u=null,c=null,r=0,a=this.__cbOnceWidthChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceWidthChange[h],this.__cbOnceWidthChange[h]=null,o=this.__cbOnceOwnerUnbindWidthChange[h],(this.__cbOnceOwnerUnbindWidthChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindWidthChange[h]),c.push(this.__cbOnceWidthChange[h]))}this.__cbOnceOwnerUnbindWidthChange=u,this.__cbOnceWidthChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event widthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindWidthChange&&(this.__cbOnOwnerUnbindWidthChange=[]),this.__cbOnOwnerUnbindWidthChange.push(null);null==this.__cbOnWidthChange&&(this.__cbOnWidthChange=[]),this.__cbOnWidthChange.push(t)},onceWidthChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event widthChange because owner is destroyed!");var l=function(e){null!=t&&(i.offWidthChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindWidthChange&&(this.__cbOnceOwnerUnbindWidthChange=[]),this.__cbOnceOwnerUnbindWidthChange.push(null);null==this.__cbOnceWidthChange&&(this.__cbOnceWidthChange=[]),this.__cbOnceWidthChange.push(t)},offWidthChange:function(e){if(null!=e){var n;null!=this.__cbOnWidthChange&&-1!=(n=this.__cbOnWidthChange.indexOf(e))&&(this.__cbOnWidthChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindWidthChange[n])&&s(),this.__cbOnOwnerUnbindWidthChange.splice(n,1)),null!=this.__cbOnceWidthChange&&-1!=(n=this.__cbOnceWidthChange.indexOf(e))&&(this.__cbOnceWidthChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindWidthChange[n])&&s(),this.__cbOnceOwnerUnbindWidthChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindWidthChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindWidthChange[l])&&s()}this.__cbOnOwnerUnbindWidthChange=null}if(null!=this.__cbOnceOwnerUnbindWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindWidthChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindWidthChange[l])&&s()}this.__cbOnceOwnerUnbindWidthChange=null}this.__cbOnWidthChange=null,this.__cbOnceWidthChange=null}},listensWidthChange:function(){return null!=this.__cbOnWidthChange&&0<this.__cbOnWidthChange.length||null!=this.__cbOnceWidthChange&&0<this.__cbOnceWidthChange.length},heightAutoruns:null,get_height:function(){var e,n,t=this.unobservedHeight;return null!=M.current&&(e=M.current,null!=(n=this.heightAutoruns)||(n=M.getAutorunArray(),null!=(this.heightAutoruns=n)))&&e.bindToAutorunArray(n),t},set_height:function(e){var n=this.unobservedHeight;return n!=(this.unobservedHeight=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitHeightChange(e,n),null!=(n=this.heightAutoruns))&&(this.heightAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateHeight:function(){var e=this.unobservedHeight,e=(this.emitHeightChange(e,e),this.heightAutoruns);null!=e&&(this.heightAutoruns=null,M.invalidateAutorunArray(e))},unobservedHeight:null,__cbOnHeightChange:null,__cbOnceHeightChange:null,__cbOnOwnerUnbindHeightChange:null,__cbOnceOwnerUnbindHeightChange:null,emitHeightChange:function(e,n){var t=0;if(null!=this.__cbOnHeightChange&&(t+=this.__cbOnHeightChange.length),null!=this.__cbOnceHeightChange&&(t+=this.__cbOnceHeightChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnHeightChange)for(var r=0,a=this.__cbOnHeightChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnHeightChange[h],++s):--t}if(null!=this.__cbOnceHeightChange){for(var u=null,c=null,r=0,a=this.__cbOnceHeightChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceHeightChange[h],this.__cbOnceHeightChange[h]=null,o=this.__cbOnceOwnerUnbindHeightChange[h],(this.__cbOnceOwnerUnbindHeightChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindHeightChange[h]),c.push(this.__cbOnceHeightChange[h]))}this.__cbOnceOwnerUnbindHeightChange=u,this.__cbOnceHeightChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event heightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindHeightChange&&(this.__cbOnOwnerUnbindHeightChange=[]),this.__cbOnOwnerUnbindHeightChange.push(null);null==this.__cbOnHeightChange&&(this.__cbOnHeightChange=[]),this.__cbOnHeightChange.push(t)},onceHeightChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event heightChange because owner is destroyed!");var l=function(e){null!=t&&(i.offHeightChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindHeightChange&&(this.__cbOnceOwnerUnbindHeightChange=[]),this.__cbOnceOwnerUnbindHeightChange.push(null);null==this.__cbOnceHeightChange&&(this.__cbOnceHeightChange=[]),this.__cbOnceHeightChange.push(t)},offHeightChange:function(e){if(null!=e){var n;null!=this.__cbOnHeightChange&&-1!=(n=this.__cbOnHeightChange.indexOf(e))&&(this.__cbOnHeightChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindHeightChange[n])&&s(),this.__cbOnOwnerUnbindHeightChange.splice(n,1)),null!=this.__cbOnceHeightChange&&-1!=(n=this.__cbOnceHeightChange.indexOf(e))&&(this.__cbOnceHeightChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindHeightChange[n])&&s(),this.__cbOnceOwnerUnbindHeightChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindHeightChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindHeightChange[l])&&s()}this.__cbOnOwnerUnbindHeightChange=null}if(null!=this.__cbOnceOwnerUnbindHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindHeightChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindHeightChange[l])&&s()}this.__cbOnceOwnerUnbindHeightChange=null}this.__cbOnHeightChange=null,this.__cbOnceHeightChange=null}},listensHeightChange:function(){return null!=this.__cbOnHeightChange&&0<this.__cbOnHeightChange.length||null!=this.__cbOnceHeightChange&&0<this.__cbOnceHeightChange.length},sourceAutoruns:null,get_source:function(){var e,n,t=this.unobservedSource;return null!=M.current&&(e=M.current,null!=(n=this.sourceAutoruns)||(n=M.getAutorunArray(),null!=(this.sourceAutoruns=n)))&&e.bindToAutorunArray(n),t},set_source:function(e){var n=this.unobservedSource;return n!=(this.unobservedSource=e)&&(this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!0)),this.emitSourceChange(e,n),null!=(n=this.sourceAutoruns))&&(this.sourceAutoruns=null,M.invalidateAutorunArray(n)),e},invalidateSource:function(){var e=this.unobservedSource,e=(this.emitSourceChange(e,e),this.sourceAutoruns);null!=e&&(this.sourceAutoruns=null,M.invalidateAutorunArray(e))},unobservedSource:null,__cbOnSourceChange:null,__cbOnceSourceChange:null,__cbOnOwnerUnbindSourceChange:null,__cbOnceOwnerUnbindSourceChange:null,emitSourceChange:function(e,n){var t=0;if(null!=this.__cbOnSourceChange&&(t+=this.__cbOnSourceChange.length),null!=this.__cbOnceSourceChange&&(t+=this.__cbOnceSourceChange.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnSourceChange)for(var r=0,a=this.__cbOnSourceChange.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnSourceChange[h],++s):--t}if(null!=this.__cbOnceSourceChange){for(var u=null,c=null,r=0,a=this.__cbOnceSourceChange.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceSourceChange[h],this.__cbOnceSourceChange[h]=null,o=this.__cbOnceOwnerUnbindSourceChange[h],(this.__cbOnceOwnerUnbindSourceChange[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindSourceChange[h]),c.push(this.__cbOnceSourceChange[h]))}this.__cbOnceOwnerUnbindSourceChange=u,this.__cbOnceSourceChange=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onSourceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event sourceChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSourceChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindSourceChange&&(this.__cbOnOwnerUnbindSourceChange=[]),this.__cbOnOwnerUnbindSourceChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindSourceChange&&(this.__cbOnOwnerUnbindSourceChange=[]),this.__cbOnOwnerUnbindSourceChange.push(null);null==this.__cbOnSourceChange&&(this.__cbOnSourceChange=[]),this.__cbOnSourceChange.push(t)},onceSourceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event sourceChange because owner is destroyed!");var l=function(e){null!=t&&(i.offSourceChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindSourceChange&&(this.__cbOnceOwnerUnbindSourceChange=[]),this.__cbOnceOwnerUnbindSourceChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindSourceChange&&(this.__cbOnceOwnerUnbindSourceChange=[]),this.__cbOnceOwnerUnbindSourceChange.push(null);null==this.__cbOnceSourceChange&&(this.__cbOnceSourceChange=[]),this.__cbOnceSourceChange.push(t)},offSourceChange:function(e){if(null!=e){var n;null!=this.__cbOnSourceChange&&-1!=(n=this.__cbOnSourceChange.indexOf(e))&&(this.__cbOnSourceChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindSourceChange[n])&&s(),this.__cbOnOwnerUnbindSourceChange.splice(n,1)),null!=this.__cbOnceSourceChange&&-1!=(n=this.__cbOnceSourceChange.indexOf(e))&&(this.__cbOnceSourceChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindSourceChange[n])&&s(),this.__cbOnceOwnerUnbindSourceChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindSourceChange){for(var t=0,i=this.__cbOnOwnerUnbindSourceChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindSourceChange[l])&&s()}this.__cbOnOwnerUnbindSourceChange=null}if(null!=this.__cbOnceOwnerUnbindSourceChange){for(t=0,i=this.__cbOnceOwnerUnbindSourceChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindSourceChange[l])&&s()}this.__cbOnceOwnerUnbindSourceChange=null}this.__cbOnSourceChange=null,this.__cbOnceSourceChange=null}},listensSourceChange:function(){return null!=this.__cbOnSourceChange&&0<this.__cbOnSourceChange.length||null!=this.__cbOnceSourceChange&&0<this.__cbOnceSourceChange.length},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,tc.prototype.destroy.call(this),this.set_texture(null))},replaceTexture:function(e,n){this.set_texture(e)},unbindEvents:function(){tc.prototype.unbindEvents.call(this),this.offWidthChange(),this.offHeightChange(),this.offSourceChange()},_default_texture:function(){return null},_default_widthAutoruns:function(){return null},_default_width:function(){return-1},_default_heightAutoruns:function(){return null},_default_height:function(){return-1},_default_sourceAutoruns:function(){return null},_default_source:function(){return null},__class__:yi,__properties__:$extend(tc.prototype.__properties__,{set_source:"set_source",get_source:"get_source",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_texture:"set_texture"})}),function(){this.initializerName=null,this.completeHandlerIndexes=null,this.completeHandlers=null,this.endPosition=-1,this.startPosition=-1,this.labelIndexes=null,this.labels=null,this.paused=!1,this.tracks=[],this.position=0,this.fps=30,this.autoUpdate=!0,this.loop=!0,this.autoFitSize=!0,this.size=0,l.call(this),he.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&he.app.onPreUpdate(this,$bind(this,this.update))}),Ui=((L["ceramic.Timeline"]=Ci).__name__="ceramic.Timeline",Ci.__interfaces__=[H0],Ci.__super__=l,Ci.prototype=$extend(l.prototype,{__cbOnStartLabel:null,__cbOnceStartLabel:null,__cbOnOwnerUnbindStartLabel:null,__cbOnceOwnerUnbindStartLabel:null,emitStartLabel:function(e,n){var t=0;if(null!=this.__cbOnStartLabel&&(t+=this.__cbOnStartLabel.length),null!=this.__cbOnceStartLabel&&(t+=this.__cbOnceStartLabel.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnStartLabel)for(var r=0,a=this.__cbOnStartLabel.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnStartLabel[h],++s):--t}if(null!=this.__cbOnceStartLabel){for(var u=null,c=null,r=0,a=this.__cbOnceStartLabel.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceStartLabel[h],this.__cbOnceStartLabel[h]=null,o=this.__cbOnceOwnerUnbindStartLabel[h],(this.__cbOnceOwnerUnbindStartLabel[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindStartLabel[h]),c.push(this.__cbOnceStartLabel[h]))}this.__cbOnceOwnerUnbindStartLabel=u,this.__cbOnceStartLabel=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onStartLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event startLabel because owner is destroyed!");var l=function(e){null!=t&&(i.offStartLabel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindStartLabel&&(this.__cbOnOwnerUnbindStartLabel=[]),this.__cbOnOwnerUnbindStartLabel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindStartLabel&&(this.__cbOnOwnerUnbindStartLabel=[]),this.__cbOnOwnerUnbindStartLabel.push(null);null==this.__cbOnStartLabel&&(this.__cbOnStartLabel=[]),this.__cbOnStartLabel.push(t)},onceStartLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event startLabel because owner is destroyed!");var l=function(e){null!=t&&(i.offStartLabel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindStartLabel&&(this.__cbOnceOwnerUnbindStartLabel=[]),this.__cbOnceOwnerUnbindStartLabel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindStartLabel&&(this.__cbOnceOwnerUnbindStartLabel=[]),this.__cbOnceOwnerUnbindStartLabel.push(null);null==this.__cbOnceStartLabel&&(this.__cbOnceStartLabel=[]),this.__cbOnceStartLabel.push(t)},offStartLabel:function(e){if(null!=e){var n;null!=this.__cbOnStartLabel&&-1!=(n=this.__cbOnStartLabel.indexOf(e))&&(this.__cbOnStartLabel.splice(n,1),null!=(s=this.__cbOnOwnerUnbindStartLabel[n])&&s(),this.__cbOnOwnerUnbindStartLabel.splice(n,1)),null!=this.__cbOnceStartLabel&&-1!=(n=this.__cbOnceStartLabel.indexOf(e))&&(this.__cbOnceStartLabel.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindStartLabel[n])&&s(),this.__cbOnceOwnerUnbindStartLabel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindStartLabel){for(var t=0,i=this.__cbOnOwnerUnbindStartLabel.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindStartLabel[l])&&s()}this.__cbOnOwnerUnbindStartLabel=null}if(null!=this.__cbOnceOwnerUnbindStartLabel){for(t=0,i=this.__cbOnceOwnerUnbindStartLabel.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindStartLabel[l])&&s()}this.__cbOnceOwnerUnbindStartLabel=null}this.__cbOnStartLabel=null,this.__cbOnceStartLabel=null}},listensStartLabel:function(){return null!=this.__cbOnStartLabel&&0<this.__cbOnStartLabel.length||null!=this.__cbOnceStartLabel&&0<this.__cbOnceStartLabel.length},__cbOnEndLabel:null,__cbOnceEndLabel:null,__cbOnOwnerUnbindEndLabel:null,__cbOnceOwnerUnbindEndLabel:null,emitEndLabel:function(e,n){var t=0;if(null!=this.__cbOnEndLabel&&(t+=this.__cbOnEndLabel.length),null!=this.__cbOnceEndLabel&&(t+=this.__cbOnceEndLabel.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnEndLabel)for(var r=0,a=this.__cbOnEndLabel.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnEndLabel[h],++s):--t}if(null!=this.__cbOnceEndLabel){for(var u=null,c=null,r=0,a=this.__cbOnceEndLabel.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceEndLabel[h],this.__cbOnceEndLabel[h]=null,o=this.__cbOnceOwnerUnbindEndLabel[h],(this.__cbOnceOwnerUnbindEndLabel[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindEndLabel[h]),c.push(this.__cbOnceEndLabel[h]))}this.__cbOnceOwnerUnbindEndLabel=u,this.__cbOnceEndLabel=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l),l=null}this.didEmitEndLabel(e,n)},onEndLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event endLabel because owner is destroyed!");var l=function(e){null!=t&&(i.offEndLabel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindEndLabel&&(this.__cbOnOwnerUnbindEndLabel=[]),this.__cbOnOwnerUnbindEndLabel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindEndLabel&&(this.__cbOnOwnerUnbindEndLabel=[]),this.__cbOnOwnerUnbindEndLabel.push(null);null==this.__cbOnEndLabel&&(this.__cbOnEndLabel=[]),this.__cbOnEndLabel.push(t)},onceEndLabel:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event endLabel because owner is destroyed!");var l=function(e){null!=t&&(i.offEndLabel(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindEndLabel&&(this.__cbOnceOwnerUnbindEndLabel=[]),this.__cbOnceOwnerUnbindEndLabel.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindEndLabel&&(this.__cbOnceOwnerUnbindEndLabel=[]),this.__cbOnceOwnerUnbindEndLabel.push(null);null==this.__cbOnceEndLabel&&(this.__cbOnceEndLabel=[]),this.__cbOnceEndLabel.push(t)},offEndLabel:function(e){if(null!=e){var n;null!=this.__cbOnEndLabel&&-1!=(n=this.__cbOnEndLabel.indexOf(e))&&(this.__cbOnEndLabel.splice(n,1),null!=(s=this.__cbOnOwnerUnbindEndLabel[n])&&s(),this.__cbOnOwnerUnbindEndLabel.splice(n,1)),null!=this.__cbOnceEndLabel&&-1!=(n=this.__cbOnceEndLabel.indexOf(e))&&(this.__cbOnceEndLabel.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindEndLabel[n])&&s(),this.__cbOnceOwnerUnbindEndLabel.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindEndLabel){for(var t=0,i=this.__cbOnOwnerUnbindEndLabel.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindEndLabel[l])&&s()}this.__cbOnOwnerUnbindEndLabel=null}if(null!=this.__cbOnceOwnerUnbindEndLabel){for(t=0,i=this.__cbOnceOwnerUnbindEndLabel.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindEndLabel[l])&&s()}this.__cbOnceOwnerUnbindEndLabel=null}this.__cbOnEndLabel=null,this.__cbOnceEndLabel=null}},listensEndLabel:function(){return null!=this.__cbOnEndLabel&&0<this.__cbOnEndLabel.length||null!=this.__cbOnceEndLabel&&0<this.__cbOnceEndLabel.length},size:null,autoFitSize:null,loop:null,autoUpdate:null,set_autoUpdate:function(e){return this.autoUpdate!=e&&(this.autoUpdate=e,he.app.offPreUpdate($bind(this,this.update)),!this.paused)&&this.autoUpdate&&he.app.onPreUpdate(this,$bind(this,this.update)),e},fps:null,position:null,tracks:null,paused:null,set_paused:function(e){return this.paused!=e&&(this.paused=e,he.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate)&&he.app.onPreUpdate(this,$bind(this,this.update)),e},labels:null,labelIndexes:null,startPosition:null,set_startPosition:function(e){return this.startPosition!=e&&(this.startPosition=e,this.apply()),e},endPosition:null,set_endPosition:function(e){return this.endPosition!=e&&(this.endPosition=e,this.apply()),e},completeHandlers:null,completeHandlerIndexes:null,bindAsComponent:function(){},bindOrUnbindUpdateIfNeeded:function(){he.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&he.app.onPreUpdate(this,$bind(this,this.update))},update:function(e){var n,t,i=this.position+e*this.fps,e=this.position;if(i!=this.position&&(0<=this.startPosition&&i<this.startPosition&&(i=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&i>this.endPosition&&(i=this.loop?this.startPosition+(i-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?i>this.size&&(this.loop?i%=this.size:i=this.size):0==this.size&&(i=0),(i=i<0?0:i)!=this.position)){this.position=i;for(var l=0,s=this.tracks.length;l<s;){var r=l++,a=this.tracks[r];if(!a.locked){var i=this.position,r=!1,h=!1;if(null==h&&(h=!1),((r=null==r?!1:r)||i!=a.position)&&(0<a.size?i>a.size&&(a.loop?i%=a.size:i=a.size):0==a.size&&(i=0),(i=i<0?0:i)!=a.position)){a.position=i;var u=null;if(-1!=(o=a.keyframeBeforeIndex))if((u=a.keyframes[o]).index<=a.position)for(var c=a.keyframes[o+1];null!=c&&c.index<=a.position;)u=c,++o,c=a.keyframes[o+1];else u=null;if(null==u)for(var o=-1,_=a.keyframes.length;o+1<_;){var d=a.keyframes[o+1];if(d.index>a.position)break;u=d,++o}a.keyframeBeforeIndex=o,a.before=u;var b=null,g=a.keyframeAfterIndex;if(-1!=g&&null!=(b=a.keyframes[g]))if(b.index>a.position){if(0<g)for(var O=a.keyframes[g-1];null!=O&&O.index>a.position;)b=O,O=0<--g?a.keyframes[g-1]:null}else b=null;if(null==b){for(r=a.keyframes.length,g=r;0<=g-1;){var f=a.keyframes[g-1];if(f.index<=a.position)break;b=f,--g}r<=g&&(g=-1)}a.keyframeAfterIndex=g,a.after=b,a.apply(h)}}}}this.position!=e&&(n=Math.floor(this.position))!=Math.floor(e)&&null!=(e=this.labelAtIndex(n))&&(-1!=(t=this.indexOfLabelBeforeIndex(n))&&this.emitEndLabel(t,this.labelAtIndex(t)),this.emitStartLabel(n,e))},seek:function(e){var n,t=e,i=this.position;if(t!=this.position&&(0<=this.startPosition&&t<this.startPosition&&(t=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&t>this.endPosition&&(t=this.loop?this.startPosition+(t-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?t>this.size&&(this.loop?t%=this.size:t=this.size):0==this.size&&(t=0),(t=t<0?0:t)!=this.position)){this.position=t;for(var l=0,s=this.tracks.length;l<s;){var r=l++,a=this.tracks[r];if(!a.locked){var e=this.position,r=!1,h=!1;if(null==h&&(h=!1),((r=null==r?!1:r)||e!=a.position)&&(0<a.size?e>a.size&&(a.loop?e%=a.size:e=a.size):0==a.size&&(e=0),(e=e<0?0:e)!=a.position)){a.position=e;var u=null;if(-1!=(o=a.keyframeBeforeIndex))if((u=a.keyframes[o]).index<=a.position)for(var c=a.keyframes[o+1];null!=c&&c.index<=a.position;)u=c,++o,c=a.keyframes[o+1];else u=null;if(null==u)for(var o=-1,_=a.keyframes.length;o+1<_;){var d=a.keyframes[o+1];if(d.index>a.position)break;u=d,++o}a.keyframeBeforeIndex=o,a.before=u;var b=null,g=a.keyframeAfterIndex;if(-1!=g&&null!=(b=a.keyframes[g]))if(b.index>a.position){if(0<g)for(var O=a.keyframes[g-1];null!=O&&O.index>a.position;)b=O,O=0<--g?a.keyframes[g-1]:null}else b=null;if(null==b){for(r=a.keyframes.length,g=r;0<=g-1;){var f=a.keyframes[g-1];if(f.index<=a.position)break;b=f,--g}r<=g&&(g=-1)}a.keyframeAfterIndex=g,a.after=b,a.apply(h)}}}}this.position!=i&&(t=Math.floor(this.position))!=Math.floor(i)&&null!=(i=this.labelAtIndex(t))&&(-1!=(n=this.indexOfLabelBeforeIndex(t))&&this.emitEndLabel(n,this.labelAtIndex(n)),this.emitStartLabel(t,i))},animate:function(e,n){if(null!=this.completeHandlers&&0<this.completeHandlers.length){var t=this.completeHandlers;if(0!=t.length)if(0<t.length)t.splice(0,t.length);else for(var i=t;i.length<0;)i.push(null);if(0!=(t=this.completeHandlerIndexes).length)if(0<t.length)t.splice(0,t.length);else for(i=t;i.length<0;)i.push(null)}t=this.indexOfLabel(e);-1!=t?(this.seek(t),null==this.completeHandlers&&(this.completeHandlers=[],this.completeHandlerIndexes=[]),this.completeHandlers.push(n),this.completeHandlerIndexes.push(t)):he.app.logger.warning("Failed to animate whith label: "+e+" (not found)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:200,className:"ceramic.Timeline",methodName:"animate"})},seekLabel:function(e){var n=this.indexOfLabel(e);return-1!=n?this.seek(n):he.app.logger.warning("Failed to seek label: "+e+" (not found)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:218,className:"ceramic.Timeline",methodName:"seekLabel"}),n},resetStartAndEndPositions:function(){this.set_startPosition(-1),this.set_endPosition(-1)},loopLabel:function(e){var n;return null==this.labels?(he.app.logger.warning("Cannot loop label "+e+" (there is no label at all)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:245,className:"ceramic.Timeline",methodName:"loopLabel"}),-1):-1==(n=this.labels.indexOf(e))?(he.app.logger.warning("Cannot loop label "+e+" (no such label)",{fileName:"../../../../ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:251,className:"ceramic.Timeline",methodName:"loopLabel"}),-1):(e=this.labelIndexes[n],this.set_startPosition(e),this.set_endPosition(n<this.labelIndexes.length-1?this.labelIndexes[n+1]:this.size),this.seek(e),e)},apply:function(e){var n,t,i=this.position,l=!0,s=e=null==e?!1:e,r=(null==e&&(s=!1),null==l&&(l=!1),this.position);if((l||i!=this.position)&&(0<=this.startPosition&&i<this.startPosition&&(i=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&i>this.endPosition&&(i=this.loop?this.startPosition+(i-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?i>this.size&&(this.loop?i%=this.size:i=this.size):0==this.size&&(i=0),(i=i<0?0:i)!=this.position)){this.position=i;for(var a=0,h=this.tracks.length;a<h;){var u=a++,c=this.tracks[u];if(!c.locked){i=this.position,u=l,e=s;if(null==e&&(e=!1),((u=null==u?!1:u)||i!=c.position)&&(0<c.size?i>c.size&&(c.loop?i%=c.size:i=c.size):0==c.size&&(i=0),(i=i<0?0:i)!=c.position)){c.position=i;var o=null;if(-1!=(d=c.keyframeBeforeIndex))if((o=c.keyframes[d]).index<=c.position)for(var _=c.keyframes[d+1];null!=_&&_.index<=c.position;)o=_,++d,_=c.keyframes[d+1];else o=null;if(null==o)for(var d=-1,b=c.keyframes.length;d+1<b;){var g=c.keyframes[d+1];if(g.index>c.position)break;o=g,++d}c.keyframeBeforeIndex=d,c.before=o;var O=null,f=c.keyframeAfterIndex;if(-1!=f&&null!=(O=c.keyframes[f]))if(O.index>c.position){if(0<f)for(var p=c.keyframes[f-1];null!=p&&p.index>c.position;)O=p,p=0<--f?c.keyframes[f-1]:null}else O=null;if(null==O){for(u=c.keyframes.length,f=u;0<=f-1;){var m=c.keyframes[f-1];if(m.index<=c.position)break;O=m,--f}u<=f&&(f=-1)}c.keyframeAfterIndex=f,c.after=O,c.apply(e)}}}}this.position!=r&&(n=Math.floor(this.position))!=Math.floor(r)&&null!=(r=this.labelAtIndex(n))&&(-1!=(t=this.indexOfLabelBeforeIndex(n))&&this.emitEndLabel(t,this.labelAtIndex(t)),this.emitStartLabel(n,r))},inlineSeek:function(e,n,t){null==t&&(t=!1),null==n&&(n=!1);var i,l,s=this.position;if((n||e!=this.position)&&(0<=this.startPosition&&e<this.startPosition&&(e=this.startPosition),this.endPosition>=this.startPosition&&0<=this.startPosition&&e>this.endPosition&&(e=this.loop?this.startPosition+(e-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),0<this.size?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),(e=e<0?0:e)!=this.position)){this.position=e;for(var r=0,a=this.tracks.length;r<a;){var h=r++,u=this.tracks[h];if(!u.locked){var e=this.position,h=n,c=t;if(null==c&&(c=!1),((h=null==h?!1:h)||e!=u.position)&&(0<u.size?e>u.size&&(u.loop?e%=u.size:e=u.size):0==u.size&&(e=0),(e=e<0?0:e)!=u.position)){u.position=e;var o=null;if(-1!=(d=u.keyframeBeforeIndex))if((o=u.keyframes[d]).index<=u.position)for(var _=u.keyframes[d+1];null!=_&&_.index<=u.position;)o=_,++d,_=u.keyframes[d+1];else o=null;if(null==o)for(var d=-1,b=u.keyframes.length;d+1<b;){var g=u.keyframes[d+1];if(g.index>u.position)break;o=g,++d}u.keyframeBeforeIndex=d,u.before=o;var O=null,f=u.keyframeAfterIndex;if(-1!=f&&null!=(O=u.keyframes[f]))if(O.index>u.position){if(0<f)for(var p=u.keyframes[f-1];null!=p&&p.index>u.position;)O=p,p=0<--f?u.keyframes[f-1]:null}else O=null;if(null==O){for(h=u.keyframes.length,f=h;0<=f-1;){var m=u.keyframes[f-1];if(m.index<=u.position)break;O=m,--f}h<=f&&(f=-1)}u.keyframeAfterIndex=f,u.after=O,u.apply(c)}}}}this.position!=s&&(i=Math.floor(this.position))!=Math.floor(s)&&null!=(s=this.labelAtIndex(i))&&(-1!=(l=this.indexOfLabelBeforeIndex(i))&&this.emitEndLabel(l,this.labelAtIndex(l)),this.emitStartLabel(i,s))},clearCompleteHandlers:function(){if(null!=this.completeHandlers&&0<this.completeHandlers.length){var e=this.completeHandlers;if(0!=e.length)if(0<e.length)e.splice(0,e.length);else for(var n=e;n.length<0;)n.push(null);if(0!=(e=this.completeHandlerIndexes).length)if(0<e.length)e.splice(0,e.length);else for(n=e;n.length<0;)n.push(null)}},didEmitEndLabel:function(e,n){if(null!=this.completeHandlers&&0<this.completeHandlers.length){for(var t=null,i=null,l=0,s=0,r=this.completeHandlerIndexes.length;s<r;){var a=s++;this.completeHandlerIndexes[a]==e&&(null==i&&(i=(t=f.pool(this.completeHandlers.length)).get()),c=this.completeHandlers[a],i.vector[l]=c,this.completeHandlers[a]=null,++l)}if(null!=this.completeHandlers&&0<this.completeHandlers.length){var h=this.completeHandlers;if(0!=h.length)if(0<h.length)h.splice(0,h.length);else for(var u=h;u.length<0;)u.push(null);if(0!=(h=this.completeHandlerIndexes).length)if(0<h.length)h.splice(0,h.length);else for(u=h;u.length<0;)u.push(null)}for(s=0,r=l;s<r;){var c,a=s++;(c=i.vector[a])()}null!=i&&t.release(i)}},add:function(e){null!=e.timeline&&e.timeline.remove(e),e.timeline!=this&&(this.tracks.push(e),e.timeline=this),this.autoFitSize&&this.fitSize()},get:function(e){for(var n=0,t=this.tracks.length;n<t;){var i=n++,i=this.tracks[i];if(i.id==e)return i}return null},remove:function(e){e.timeline==this&&(h.remove(this.tracks,e),e.timeline=null),this.autoFitSize&&this.fitSize()},fitSize:function(){for(var e=0,n=0,t=this.tracks.length;n<t;){var i=n++,i=this.tracks[i];i.size>e&&(e=i.size)}this.size=e},indexOfLabelBeforeIndex:function(e){if(null==this.labelIndexes)return-1;for(var n=-1,t=0,i=this.labelIndexes.length;t<i;){var l=t++,l=this.labelIndexes[l];if(l==e)return n;if(e<l)break;n=l}return n},labelAtIndex:function(e){if(null!=this.labelIndexes)for(var n=0,t=this.labelIndexes.length;n<t;){var i=n++,l=this.labelIndexes[i];if(l==e)return this.labels[i];if(e<l)break}return null},indexOfLabel:function(e){if(null!=this.labelIndexes)for(var n=0,t=this.labels.length;n<t;){var i=n++;if(e==this.labels[i])return this.labelIndexes[i]}return-1},setLabel:function(e,n){this.removeLabel(n),null==this.labelIndexes&&(this.labelIndexes=[],this.labels=[]),this.labelIndexes.push(e),this.labels.push(n),this.sortLabels()},removeLabelAtIndex:function(e){var n=!1;return null!=this.labelIndexes&&-1!=(e=this.labelIndexes.indexOf(e))&&(this.labels.splice(e,1),this.labelIndexes.splice(e,1),n=!0),n},removeLabel:function(e){var n=!1;return null!=this.labels&&-1!=(e=this.labels.indexOf(e))&&(this.labels.splice(e,1),this.labelIndexes.splice(e,1),n=!0),n},sortLabels:function(){this.labelIndexes.sort($bind(this,this.compareLabelIndexes)),this.labels.sort($bind(this,this.compareLabelNames))},compareLabelIndexes:function(e,n){return n<e?1:e<n?-1:0},compareLabelNames:function(e,n){e=this.labels.indexOf(e),e=this.labelIndexes[e],n=this.labels.indexOf(n),n=this.labelIndexes[n];return n<e?1:e<n?-1:0},entity:null,setEntity:function(e){this.entity=e instanceof l?e:null},getEntity:function(){return this.entity},initializerName:null,unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offStartLabel(),this.offEndLabel()},__class__:Ci,__properties__:$extend(l.prototype.__properties__,{set_endPosition:"set_endPosition",set_startPosition:"set_startPosition",set_paused:"set_paused",set_autoUpdate:"set_autoUpdate"})}),(L["ceramic.TimelineKeyframe"]=Lc).__name__="ceramic.TimelineKeyframe",Lc.prototype={index:null,easing:null,__class__:Lc},(L["ceramic.TimelineBoolKeyframe"]=Mc).__name__="ceramic.TimelineBoolKeyframe",Mc.__super__=Lc,Mc.prototype=$extend(Lc.prototype,{value:null,__class__:Mc}),(L["ceramic.TimelineTrack"]=Nc).__name__="ceramic.TimelineTrack",Nc.__super__=l,Nc.prototype=$extend(l.prototype,{size:null,autoFitSize:null,loop:null,locked:null,timeline:null,position:null,keyframes:null,before:null,after:null,keyframeBeforeIndex:null,keyframeAfterIndex:null,destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.timeline&&0<=this.timeline._lifecycleState&&this.timeline.remove(this),this._lifecycleState=-1,l.prototype.destroy.call(this))},seek:function(e){if(e!=this.position&&(0<this.size?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),(e=e<0?0:e)!=this.position)){this.position=e;var n=null;if(-1!=(s=this.keyframeBeforeIndex))if((n=this.keyframes[s]).index<=this.position)for(var t=this.keyframes[s+1];null!=t&&t.index<=this.position;)n=t,t=this.keyframes[++s+1];else n=null;if(null==n){s=-1;for(var i=this.keyframes.length;s+1<i;){if((l=this.keyframes[s+1]).index>this.position)break;n=l,++s}}this.keyframeBeforeIndex=s,this.before=n;var l,n=null,s=this.keyframeAfterIndex;if(-1!=s&&null!=(n=this.keyframes[s]))if(n.index>this.position){if(0<s)for(var r=this.keyframes[s-1];null!=r&&r.index>this.position;)n=r,r=0<--s?this.keyframes[s-1]:null}else n=null;if(null==n){for(s=i=this.keyframes.length;0<=s-1;){if((l=this.keyframes[s-1]).index<=this.position)break;n=l,--s}i<=s&&(s=-1)}this.keyframeAfterIndex=s,this.after=n,this.apply(!1)}},inlineSeek:function(e,n,t){if(null==t&&(t=!1),((n=null==n?!1:n)||e!=this.position)&&(0<this.size?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),(e=e<0?0:e)!=this.position)){this.position=e;var i=null;if(-1!=(a=this.keyframeBeforeIndex))if((i=this.keyframes[a]).index<=this.position)for(var l=this.keyframes[a+1];null!=l&&l.index<=this.position;)i=l,l=this.keyframes[++a+1];else i=null;if(null==i){a=-1;for(var s=this.keyframes.length;a+1<s;){if((r=this.keyframes[a+1]).index>this.position)break;i=r,++a}}this.keyframeBeforeIndex=a,this.before=i;var r,i=null,a=this.keyframeAfterIndex;if(-1!=a&&null!=(i=this.keyframes[a]))if(i.index>this.position){if(0<a)for(var h=this.keyframes[a-1];null!=h&&h.index>this.position;)i=h,h=0<--a?this.keyframes[a-1]:null}else i=null;if(null==i){for(a=s=this.keyframes.length;0<=a-1;){if((r=this.keyframes[a-1]).index<=this.position)break;i=r,--a}s<=a&&(a=-1)}this.keyframeAfterIndex=a,this.after=i,this.apply(t)}},add:function(e){for(var n=this.keyframes,t=n.length,i=0,l=!1;i<t;){var s=n[i];if(s.index==e.index){he.app.logger.warning("Replacing existing keyframe at index "+e.index,{fileName:"../../../../ceramic/runtime/src/ceramic/TimelineTrack.hx",lineNumber:155,className:"ceramic.TimelineTrack",methodName:"add"}),n[i]=e,l=!0;break}if(s.index>e.index){n.splice(i,0,e),l=!0;break}++i}l||n.push(e),this.autoFitSize&&this.fitSize(),null!=this.timeline&&this.timeline.autoFitSize&&this.timeline.fitSize(),this.keyframeBeforeIndex=-1;var r=null;if((this.keyframeAfterIndex=-1)!=(h=this.keyframeBeforeIndex))if((r=this.keyframes[h]).index<=this.position)for(var a=this.keyframes[h+1];null!=a&&a.index<=this.position;)r=a,a=this.keyframes[++h+1];else r=null;if(null==r){h=-1;for(t=this.keyframes.length;h+1<t;){if((e=this.keyframes[h+1]).index>this.position)break;r=e,++h}}this.keyframeBeforeIndex=h,this.before=r;var r=null,h=this.keyframeAfterIndex;if(-1!=h&&null!=(r=this.keyframes[h]))if(r.index>this.position){if(0<h)for(var u=this.keyframes[h-1];null!=u&&u.index>this.position;)r=u,u=0<--h?this.keyframes[h-1]:null}else r=null;if(null==r){for(h=t=this.keyframes.length;0<=h-1;){if((e=this.keyframes[h-1]).index<=this.position)break;r=e,--h}t<=h&&(h=-1)}this.keyframeAfterIndex=h,this.after=r,this.apply(!0)},remove:function(e){if(-1!=(l=this.keyframes.indexOf(e))){this.keyframes.splice(l,1),this.autoFitSize&&this.fitSize(),null!=this.timeline&&this.timeline.autoFitSize&&this.timeline.fitSize(),this.keyframeBeforeIndex=-1;var n=null;if((this.keyframeAfterIndex=-1)!=(l=this.keyframeBeforeIndex))if((n=this.keyframes[l]).index<=this.position)for(var t=this.keyframes[l+1];null!=t&&t.index<=this.position;)n=t,t=this.keyframes[++l+1];else n=null;if(null==n){l=-1;for(var i=this.keyframes.length;l+1<i;){if((e=this.keyframes[l+1]).index>this.position)break;n=e,++l}}this.keyframeBeforeIndex=l,this.before=n;var n=null,l=this.keyframeAfterIndex;if(-1!=l&&null!=(n=this.keyframes[l]))if(n.index>this.position){if(0<l)for(var s=this.keyframes[l-1];null!=s&&s.index>this.position;)n=s,s=0<--l?this.keyframes[l-1]:null}else n=null;if(null==n){for(l=i=this.keyframes.length;0<=l-1;){if((e=this.keyframes[l-1]).index<=this.position)break;n=e,--l}i<=l&&(l=-1)}this.keyframeAfterIndex=l,this.after=n,this.apply(!0)}else he.app.logger.warning("Failed to remove keyframe: keyframe not found in list",{fileName:"../../../../ceramic/runtime/src/ceramic/TimelineTrack.hx",lineNumber:216,className:"ceramic.TimelineTrack",methodName:"remove"})},fitSize:function(){0<this.keyframes.length?this.size=this.keyframes[this.keyframes.length-1].index:this.size=0},apply:function(e){},findKeyframeAtIndex:function(e){var n=this.findKeyframeBefore(e);return null!=n&&n.index==e?n:null},findKeyframeBefore:function(e){for(var n=null,t=-1,i=this.keyframes.length;t+1<i;){var l=this.keyframes[t+1];if(l.index>e)break;n=l,++t}return n},findKeyframeAfter:function(e){for(var n=null,t=-1,i=this.keyframes.length;t+1<i;){var l=this.keyframes[t+1];if(l.index>e)break;n=l,++t}return n},computeKeyframeBefore:function(){var e=null;if(-1!=(t=this.keyframeBeforeIndex))if((e=this.keyframes[t]).index<=this.position)for(var n=this.keyframes[t+1];null!=n&&n.index<=this.position;)e=n,n=this.keyframes[++t+1];else e=null;if(null==e)for(var t=-1,i=this.keyframes.length;t+1<i;){var l=this.keyframes[t+1];if(l.index>this.position)break;e=l,++t}this.keyframeBeforeIndex=t,this.before=e},computeKeyframeAfter:function(){var e=null,n=this.keyframeAfterIndex;if(-1!=n&&null!=(e=this.keyframes[n]))if(e.index>this.position){if(0<n)for(var t=this.keyframes[n-1];null!=t&&t.index>this.position;)e=t,t=0<--n?this.keyframes[n-1]:null}else e=null;if(null==e){for(var i=this.keyframes.length,n=i;0<=n-1;){var l=this.keyframes[n-1];if(l.index<=this.position)break;e=l,--n}i<=n&&(n=-1)}this.keyframeAfterIndex=n,this.after=e},__class__:Nc}),(L["ceramic.TimelineBoolTrack"]=Oc).__name__="ceramic.TimelineBoolTrack",Oc.__super__=Nc,Oc.prototype=$extend(Nc.prototype,{__cbOnChange:null,__cbOnceChange:null,__cbOnOwnerUnbindChange:null,__cbOnceOwnerUnbindChange:null,emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnChange)for(var s=0,r=this.__cbOnChange.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnChange[a],++l):--n}if(null!=this.__cbOnceChange){for(var h=null,u=null,s=0,r=this.__cbOnceChange.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,c=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),u.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChange[n])&&s(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChange[n])&&s(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChange[l])&&s()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChange[l])&&s()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},value:null,apply:function(e){null==e&&(e=!1);var n,t=this.value;null!=this.before&&null!=this.after?(1<(n=(this.position-this.before.index)/(this.after.index-this.before.index))?n=1:n<0&&(n=0),this.value=(1<=n?this.after:this.before).value):null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value),!e&&t==this.value||this.emitChange(this)},unbindEvents:function(){Nc.prototype.unbindEvents.call(this),this.offChange()},__class__:Oc}),(L["ceramic.TimelineColorKeyframe"]=Pc).__name__="ceramic.TimelineColorKeyframe",Pc.__super__=Lc,Pc.prototype=$extend(Lc.prototype,{value:null,__class__:Pc}),(L["ceramic.TimelineColorTrack"]=Qc).__name__="ceramic.TimelineColorTrack",Qc.__super__=Nc,Qc.prototype=$extend(Nc.prototype,{__cbOnChange:null,__cbOnceChange:null,__cbOnOwnerUnbindChange:null,__cbOnceOwnerUnbindChange:null,emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnChange)for(var s=0,r=this.__cbOnChange.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnChange[a],++l):--n}if(null!=this.__cbOnceChange){for(var h=null,u=null,s=0,r=this.__cbOnceChange.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,c=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),u.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChange[n])&&s(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChange[n])&&s(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChange[l])&&s()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChange[l])&&s()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},value:null,apply:function(e){null==e&&(e=!1);var n,t,i,l,s=this.value;null!=this.before&&null!=this.after?(1<(i=(this.position-this.before.index)/(this.after.index-this.before.index))?i=1:i<0&&(i=0),n=this.before.value,l=(((t=this.after.value)>>16&255)-(n>>16&255))*(i=null==(i=P.ease(this.after.easing,i))?.5:i)+(n>>16&255)|0,this.value=((0&65535|(255<l?255:l<0?0:l)<<16)&16711935|(255<(l=((t>>8&255)-(n>>8&255))*i+(n>>8&255)|0)?255:l<0?0:l)<<8)&16776960|(255<(l=((255&t)-(255&n))*i+(255&n)|0)?255:l<0?0:l)):null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value),!e&&s==this.value||this.emitChange(this)},unbindEvents:function(){Nc.prototype.unbindEvents.call(this),this.offChange()},__class__:Qc}),(L["ceramic.TimelineDegreesTrack"]=Rc).__name__="ceramic.TimelineDegreesTrack",Rc.__super__=Nc,Rc.prototype=$extend(Nc.prototype,{__cbOnChange:null,__cbOnceChange:null,__cbOnOwnerUnbindChange:null,__cbOnceOwnerUnbindChange:null,emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnChange)for(var s=0,r=this.__cbOnChange.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnChange[a],++l):--n}if(null!=this.__cbOnceChange){for(var h=null,u=null,s=0,r=this.__cbOnceChange.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,c=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),u.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChange[n])&&s(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChange[n])&&s(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChange[l])&&s()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChange[l])&&s()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},value:null,apply:function(e){null==e&&(e=!1);var n,t,i,l,s=this.value,r=this.value;null!=this.before&&null!=this.after?(1<(n=(this.position-this.before.index)/(this.after.index-this.before.index))?n=1:n<0&&(n=0),t=lb.clampDegrees(this.before.value),180<(l=(i=lb.clampDegrees(this.after.value))-t)?i-=360:l<-180&&(i+=360),r=t+(i-t)*P.ease(this.after.easing,n),r=lb.clampDegrees(r)):null!=this.after?r=lb.clampDegrees(this.after.value):null!=this.before&&(r=lb.clampDegrees(this.before.value)),!e&&s==r||(this.value=r,this.emitChange(this))},unbindEvents:function(){Nc.prototype.unbindEvents.call(this),this.offChange()},__class__:Rc}),(L["ceramic.TimelineFloatArrayKeyframe"]=Sc).__name__="ceramic.TimelineFloatArrayKeyframe",Sc.__super__=Lc,Sc.prototype=$extend(Lc.prototype,{value:null,__class__:Sc}),(L["ceramic.TimelineFloatArrayTrack"]=Tc).__name__="ceramic.TimelineFloatArrayTrack",Tc.__super__=Nc,Tc.prototype=$extend(Nc.prototype,{__cbOnChange:null,__cbOnceChange:null,__cbOnOwnerUnbindChange:null,__cbOnceOwnerUnbindChange:null,emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnChange)for(var s=0,r=this.__cbOnChange.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnChange[a],++l):--n}if(null!=this.__cbOnceChange){for(var h=null,u=null,s=0,r=this.__cbOnceChange.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,c=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),u.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChange[n])&&s(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChange[n])&&s(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChange[l])&&s()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChange[l])&&s()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},value:null,apply:function(e){null==e&&(e=!1);var n=!1;if(null!=this.before&&null!=this.after){var t=(this.position-this.before.index)/(this.after.index-this.before.index);if(1<t?t=1:t<0&&(t=0),1<=t){var i=this.value,l=(O=this.after.value).length;if(i.length>l&&i.length!=l)if(i.length>l)i.splice(l,i.length-l);else for(var s=i;s.length<l;)s.push(null);for(var r=i.length,a=0,h=l;a<h;){var u=0,c=((f=a++)<r?u=i[f]:n=!0,O[f]);(i[f]=c)!=u&&(n=!0)}}else if(t<=0){i=this.value,l=(O=this.before.value).length;if(i.length>l&&i.length!=l)if(i.length>l)i.splice(l,i.length-l);else for(s=i;s.length<l;)s.push(null);for(r=i.length,a=0,h=l;a<h;){u=0,c=((f=a++)<r?u=i[f]:n=!0,O[f]);(i[f]=c)!=u&&(n=!0)}}else{var i=this.value,o=this.before.value,_=this.after.value,d=P.ease(this.after.easing,t),t=_.length,b=o.length,l=b<t?b:t;if(i.length>l&&i.length!=l)if(i.length>l)i.splice(l,i.length-l);else for(s=i;s.length<l;)s.push(null);for(r=i.length,a=0,h=l;a<h;){var u=0,g=((f=a++)<r?u=i[f]:n=!0,o[f]),c=g+(_[f]-g)*d;(i[f]=c)!=u&&(n=!0)}}}else if(null!=this.after){i=this.value,l=(O=this.after.value).length;if(i.length>l&&i.length!=l)if(i.length>l)i.splice(l,i.length-l);else for(s=i;s.length<l;)s.push(null);for(r=i.length,a=0,h=l;a<h;){u=0,c=((f=a++)<r?u=i[f]:n=!0,O[f]);(i[f]=c)!=u&&(n=!0)}}else if(null!=this.before){var O,i=this.value,l=(O=this.before.value).length;if(i.length>l&&i.length!=l)if(i.length>l)i.splice(l,i.length-l);else for(s=i;s.length<l;)s.push(null);for(r=i.length,a=0,h=l;a<h;){var f,u=0,c=((f=a++)<r?u=i[f]:n=!0,O[f]);(i[f]=c)!=u&&(n=!0)}}(e||n)&&this.emitChange(this)},unbindEvents:function(){Nc.prototype.unbindEvents.call(this),this.offChange()},__class__:Tc}),(L["ceramic.TimelineFloatKeyframe"]=Uc).__name__="ceramic.TimelineFloatKeyframe",Uc.__super__=Lc,Uc.prototype=$extend(Lc.prototype,{value:null,__class__:Uc}),(L["ceramic.TimelineFloatTrack"]=Vc).__name__="ceramic.TimelineFloatTrack",Vc.__super__=Nc,Vc.prototype=$extend(Nc.prototype,{__cbOnChange:null,__cbOnceChange:null,__cbOnOwnerUnbindChange:null,__cbOnceOwnerUnbindChange:null,emitChange:function(e){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnChange)for(var s=0,r=this.__cbOnChange.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnChange[a],++l):--n}if(null!=this.__cbOnceChange){for(var h=null,u=null,s=0,r=this.__cbOnceChange.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null,c=this.__cbOnceOwnerUnbindChange[a],(this.__cbOnceOwnerUnbindChange[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindChange[a]),u.push(this.__cbOnceChange[a]))}this.__cbOnceOwnerUnbindChange=h,this.__cbOnceChange=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(t)},onceChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event change because owner is destroyed!");var l=function(e){null!=t&&(i.offChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(t)},offChange:function(e){if(null!=e){var n;null!=this.__cbOnChange&&-1!=(n=this.__cbOnChange.indexOf(e))&&(this.__cbOnChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChange[n])&&s(),this.__cbOnOwnerUnbindChange.splice(n,1)),null!=this.__cbOnceChange&&-1!=(n=this.__cbOnceChange.indexOf(e))&&(this.__cbOnceChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChange[n])&&s(),this.__cbOnceOwnerUnbindChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChange[l])&&s()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChange[l])&&s()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&0<this.__cbOnChange.length||null!=this.__cbOnceChange&&0<this.__cbOnceChange.length},value:null,apply:function(e){null==e&&(e=!1);var n,t=this.value;null!=this.before&&null!=this.after?(1<(n=(this.position-this.before.index)/(this.after.index-this.before.index))?n=1:n<0&&(n=0),this.value=this.before.value+(this.after.value-this.before.value)*P.ease(this.after.easing,n)):null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value),!e&&t==this.value||this.emitChange(this)},unbindEvents:function(){Nc.prototype.unbindEvents.call(this),this.offChange()},__class__:Vc}),function(){l.call(this),this.onCreateTrack(this,$bind(this,this.handleCreateTrack)),this.onBindTrack(this,$bind(this,this.handleBindTrack)),this.onCreateKeyframe(this,$bind(this,this.handleCreateKeyframe))}),xi=((L["ceramic.Timelines"]=Ui).__name__="ceramic.Timelines",Ui.__super__=l,Ui.prototype=$extend(l.prototype,{__cbOnCreateTrack:null,__cbOnceCreateTrack:null,__cbOnOwnerUnbindCreateTrack:null,__cbOnceOwnerUnbindCreateTrack:null,emitCreateTrack:function(e,n,t){var i=0;if(null!=this.__cbOnCreateTrack&&(i+=this.__cbOnCreateTrack.length),null!=this.__cbOnceCreateTrack&&(i+=this.__cbOnceCreateTrack.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnCreateTrack)for(var a=0,h=this.__cbOnCreateTrack.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnCreateTrack[u],++r):--i}if(null!=this.__cbOnceCreateTrack){for(var c=null,o=null,a=0,h=this.__cbOnceCreateTrack.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceCreateTrack[u],this.__cbOnceCreateTrack[u]=null,_=this.__cbOnceOwnerUnbindCreateTrack[u],(this.__cbOnceOwnerUnbindCreateTrack[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindCreateTrack[u]),o.push(this.__cbOnceCreateTrack[u]))}this.__cbOnceOwnerUnbindCreateTrack=c,this.__cbOnceCreateTrack=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onCreateTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event createTrack because owner is destroyed!");var l=function(e){null!=t&&(i.offCreateTrack(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindCreateTrack&&(this.__cbOnOwnerUnbindCreateTrack=[]),this.__cbOnOwnerUnbindCreateTrack.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindCreateTrack&&(this.__cbOnOwnerUnbindCreateTrack=[]),this.__cbOnOwnerUnbindCreateTrack.push(null);null==this.__cbOnCreateTrack&&(this.__cbOnCreateTrack=[]),this.__cbOnCreateTrack.push(t)},onceCreateTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event createTrack because owner is destroyed!");var l=function(e){null!=t&&(i.offCreateTrack(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindCreateTrack&&(this.__cbOnceOwnerUnbindCreateTrack=[]),this.__cbOnceOwnerUnbindCreateTrack.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindCreateTrack&&(this.__cbOnceOwnerUnbindCreateTrack=[]),this.__cbOnceOwnerUnbindCreateTrack.push(null);null==this.__cbOnceCreateTrack&&(this.__cbOnceCreateTrack=[]),this.__cbOnceCreateTrack.push(t)},offCreateTrack:function(e){if(null!=e){var n;null!=this.__cbOnCreateTrack&&-1!=(n=this.__cbOnCreateTrack.indexOf(e))&&(this.__cbOnCreateTrack.splice(n,1),null!=(s=this.__cbOnOwnerUnbindCreateTrack[n])&&s(),this.__cbOnOwnerUnbindCreateTrack.splice(n,1)),null!=this.__cbOnceCreateTrack&&-1!=(n=this.__cbOnceCreateTrack.indexOf(e))&&(this.__cbOnceCreateTrack.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindCreateTrack[n])&&s(),this.__cbOnceOwnerUnbindCreateTrack.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindCreateTrack){for(var t=0,i=this.__cbOnOwnerUnbindCreateTrack.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindCreateTrack[l])&&s()}this.__cbOnOwnerUnbindCreateTrack=null}if(null!=this.__cbOnceOwnerUnbindCreateTrack){for(t=0,i=this.__cbOnceOwnerUnbindCreateTrack.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindCreateTrack[l])&&s()}this.__cbOnceOwnerUnbindCreateTrack=null}this.__cbOnCreateTrack=null,this.__cbOnceCreateTrack=null}},listensCreateTrack:function(){return null!=this.__cbOnCreateTrack&&0<this.__cbOnCreateTrack.length||null!=this.__cbOnceCreateTrack&&0<this.__cbOnceCreateTrack.length},__cbOnBindTrack:null,__cbOnceBindTrack:null,__cbOnOwnerUnbindBindTrack:null,__cbOnceOwnerUnbindBindTrack:null,emitBindTrack:function(e,n,t,i,l){var s=0;if(null!=this.__cbOnBindTrack&&(s+=this.__cbOnBindTrack.length),null!=this.__cbOnceBindTrack&&(s+=this.__cbOnceBindTrack.length),0<s){var r=f.pool(s),a=r.get(),h=0;if(null!=this.__cbOnBindTrack)for(var u=0,c=this.__cbOnBindTrack.length;u<c;){var o=u++;!0?(a.vector[h]=this.__cbOnBindTrack[o],++h):--s}if(null!=this.__cbOnceBindTrack){for(var _=null,d=null,u=0,c=this.__cbOnceBindTrack.length;u<c;){var b,o=u++;!0?(a.vector[h]=this.__cbOnceBindTrack[o],this.__cbOnceBindTrack[o]=null,b=this.__cbOnceOwnerUnbindBindTrack[o],(this.__cbOnceOwnerUnbindBindTrack[o]=null)!=b&&b(),++h):(--s,null==_&&(_=[],d=[],0),_.push(this.__cbOnceOwnerUnbindBindTrack[o]),d.push(this.__cbOnceBindTrack[o]))}this.__cbOnceOwnerUnbindBindTrack=_,this.__cbOnceBindTrack=d}for(u=0,c=s;u<c;){h=u++;(0,a.vector[h])(e,n,t,i,l)}r.release(a)}},onBindTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event bindTrack because owner is destroyed!");var l=function(e){null!=t&&(i.offBindTrack(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindBindTrack&&(this.__cbOnOwnerUnbindBindTrack=[]),this.__cbOnOwnerUnbindBindTrack.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindBindTrack&&(this.__cbOnOwnerUnbindBindTrack=[]),this.__cbOnOwnerUnbindBindTrack.push(null);null==this.__cbOnBindTrack&&(this.__cbOnBindTrack=[]),this.__cbOnBindTrack.push(t)},onceBindTrack:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event bindTrack because owner is destroyed!");var l=function(e){null!=t&&(i.offBindTrack(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindBindTrack&&(this.__cbOnceOwnerUnbindBindTrack=[]),this.__cbOnceOwnerUnbindBindTrack.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindBindTrack&&(this.__cbOnceOwnerUnbindBindTrack=[]),this.__cbOnceOwnerUnbindBindTrack.push(null);null==this.__cbOnceBindTrack&&(this.__cbOnceBindTrack=[]),this.__cbOnceBindTrack.push(t)},offBindTrack:function(e){if(null!=e){var n;null!=this.__cbOnBindTrack&&-1!=(n=this.__cbOnBindTrack.indexOf(e))&&(this.__cbOnBindTrack.splice(n,1),null!=(s=this.__cbOnOwnerUnbindBindTrack[n])&&s(),this.__cbOnOwnerUnbindBindTrack.splice(n,1)),null!=this.__cbOnceBindTrack&&-1!=(n=this.__cbOnceBindTrack.indexOf(e))&&(this.__cbOnceBindTrack.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindBindTrack[n])&&s(),this.__cbOnceOwnerUnbindBindTrack.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindBindTrack){for(var t=0,i=this.__cbOnOwnerUnbindBindTrack.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindBindTrack[l])&&s()}this.__cbOnOwnerUnbindBindTrack=null}if(null!=this.__cbOnceOwnerUnbindBindTrack){for(t=0,i=this.__cbOnceOwnerUnbindBindTrack.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindBindTrack[l])&&s()}this.__cbOnceOwnerUnbindBindTrack=null}this.__cbOnBindTrack=null,this.__cbOnceBindTrack=null}},listensBindTrack:function(){return null!=this.__cbOnBindTrack&&0<this.__cbOnBindTrack.length||null!=this.__cbOnceBindTrack&&0<this.__cbOnceBindTrack.length},__cbOnCreateKeyframe:null,__cbOnceCreateKeyframe:null,__cbOnOwnerUnbindCreateKeyframe:null,__cbOnceOwnerUnbindCreateKeyframe:null,emitCreateKeyframe:function(e,n,t,i,l,s,r){var a=0;if(null!=this.__cbOnCreateKeyframe&&(a+=this.__cbOnCreateKeyframe.length),null!=this.__cbOnceCreateKeyframe&&(a+=this.__cbOnceCreateKeyframe.length),0<a){var h=f.pool(a),u=h.get(),c=0;if(null!=this.__cbOnCreateKeyframe)for(var o=0,_=this.__cbOnCreateKeyframe.length;o<_;){var d=o++;!0?(u.vector[c]=this.__cbOnCreateKeyframe[d],++c):--a}if(null!=this.__cbOnceCreateKeyframe){for(var b=null,g=null,o=0,_=this.__cbOnceCreateKeyframe.length;o<_;){var O,d=o++;!0?(u.vector[c]=this.__cbOnceCreateKeyframe[d],this.__cbOnceCreateKeyframe[d]=null,O=this.__cbOnceOwnerUnbindCreateKeyframe[d],(this.__cbOnceOwnerUnbindCreateKeyframe[d]=null)!=O&&O(),++c):(--a,null==b&&(b=[],g=[],0),b.push(this.__cbOnceOwnerUnbindCreateKeyframe[d]),g.push(this.__cbOnceCreateKeyframe[d]))}this.__cbOnceOwnerUnbindCreateKeyframe=b,this.__cbOnceCreateKeyframe=g}for(o=0,_=a;o<_;){c=o++;(0,u.vector[c])(e,n,t,i,l,s,r)}h.release(u)}},onCreateKeyframe:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event createKeyframe because owner is destroyed!");var l=function(e){null!=t&&(i.offCreateKeyframe(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindCreateKeyframe&&(this.__cbOnOwnerUnbindCreateKeyframe=[]),this.__cbOnOwnerUnbindCreateKeyframe.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindCreateKeyframe&&(this.__cbOnOwnerUnbindCreateKeyframe=[]),this.__cbOnOwnerUnbindCreateKeyframe.push(null);null==this.__cbOnCreateKeyframe&&(this.__cbOnCreateKeyframe=[]),this.__cbOnCreateKeyframe.push(t)},onceCreateKeyframe:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event createKeyframe because owner is destroyed!");var l=function(e){null!=t&&(i.offCreateKeyframe(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindCreateKeyframe&&(this.__cbOnceOwnerUnbindCreateKeyframe=[]),this.__cbOnceOwnerUnbindCreateKeyframe.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindCreateKeyframe&&(this.__cbOnceOwnerUnbindCreateKeyframe=[]),this.__cbOnceOwnerUnbindCreateKeyframe.push(null);null==this.__cbOnceCreateKeyframe&&(this.__cbOnceCreateKeyframe=[]),this.__cbOnceCreateKeyframe.push(t)},offCreateKeyframe:function(e){if(null!=e){var n;null!=this.__cbOnCreateKeyframe&&-1!=(n=this.__cbOnCreateKeyframe.indexOf(e))&&(this.__cbOnCreateKeyframe.splice(n,1),null!=(s=this.__cbOnOwnerUnbindCreateKeyframe[n])&&s(),this.__cbOnOwnerUnbindCreateKeyframe.splice(n,1)),null!=this.__cbOnceCreateKeyframe&&-1!=(n=this.__cbOnceCreateKeyframe.indexOf(e))&&(this.__cbOnceCreateKeyframe.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindCreateKeyframe[n])&&s(),this.__cbOnceOwnerUnbindCreateKeyframe.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindCreateKeyframe){for(var t=0,i=this.__cbOnOwnerUnbindCreateKeyframe.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindCreateKeyframe[l])&&s()}this.__cbOnOwnerUnbindCreateKeyframe=null}if(null!=this.__cbOnceOwnerUnbindCreateKeyframe){for(t=0,i=this.__cbOnceOwnerUnbindCreateKeyframe.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindCreateKeyframe[l])&&s()}this.__cbOnceOwnerUnbindCreateKeyframe=null}this.__cbOnCreateKeyframe=null,this.__cbOnceCreateKeyframe=null}},listensCreateKeyframe:function(){return null!=this.__cbOnCreateKeyframe&&0<this.__cbOnCreateKeyframe.length||null!=this.__cbOnceCreateKeyframe&&0<this.__cbOnceCreateKeyframe.length},handleCreateTrack:function(e,n,t){null==t.value&&(null!=n&&1==n.degrees?t.value=new Rc:"Float"==e?t.value=new Vc:"ceramic.Color"==e?t.value=new Qc:"Bool"==e?t.value=new Oc:"Array<Float>"==e&&(t.value=new Tc))},handleBindTrack:function(e,n,t,u,c){var o;t instanceof Vc?t.onChange(u,function(e){N.setProperty(u,c,e.value)}):t instanceof Rc?t.onChange(u,function(e){N.setProperty(u,c,e.value)}):t instanceof Qc?t.onChange(u,function(e){N.setProperty(u,c,e.value)}):t instanceof Oc?t.onChange(u,function(e){N.setProperty(u,c,e.value)}):t instanceof Tc&&(o=null!=n&&1==n.copyArray,t.onChange(u,function(e){var n=null,t=((o||null==(n=N.getProperty(u,c)))&&(n=[]),e.value),i=t.length;if(n.length!=i&&n.length!=i)if(n.length>i)n.splice(i,n.length-i);else for(var l=n;l.length<i;)l.push(null);for(var s=0,r=i;s<r;){var a=s++,h=t[a];n[a]=h}N.setProperty(u,c,n)}))},handleCreateKeyframe:function(e,n,t,i,l,s,r){var a;null==r.value&&("Float"==e?null!=s&&s instanceof Uc?((a=s).value=t,a.index=i,a.easing=l,r.value=a):r.value=new Uc(t,i,l):"ceramic.Color"==e?null!=s&&s instanceof Pc?((a=s).value=t,a.index=i,a.easing=l,r.value=a):r.value=new Pc(t,i,l):"Bool"==e?null!=s&&s instanceof Mc?((a=s).value=t,a.index=i,a.easing=l,r.value=a):r.value=new Mc(t,i,l):"Array<Float>"==e&&(null!=s&&s instanceof Sc?((a=s).value=[].concat(t),a.index=i,a.easing=l,r.value=a):r.value=new Sc(t,i,l)))},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offCreateTrack(),this.offBindTrack(),this.offCreateKeyframe()},__class__:Ui}),function(){}),Ti=((L["ceramic.Timer"]=xi).__name__="ceramic.Timer",xi.__properties__={get_timestamp:"get_timestamp"},xi.get_timestamp=function(){return xi.startTimestamp+xi.now},xi.update=function(e,n){xi.now+=e,xi.timestamp=xi.startTimestamp+xi.now+n,xi.next<=xi.now&&he.app.beginUpdateCallbacks.push(xi.flush)},xi.flush=function(){xi.next=999999999;for(var e=xi.callbacks,n=(xi.callbacks=[],0),t=e.length;n<t;){var i=e[n++];if(!i.cleared)if(null==i.owner||0<=i.owner._lifecycleState)if(i.time<=xi.now)if(0<=i.interval){for(;i.time<=xi.now&&!i.cleared&&(i.callback(),0!=i.interval);)i.time+=i.interval;i.cleared||(xi.callbacks.push(i),xi.next=Math.min(i.time,xi.next))}else i.callback();else xi.callbacks.push(i),xi.next=Math.min(i.time,xi.next);else i.cleared=!0}},xi.delay=function(e,n,t){return xi.schedule(e,n,t,-1)},xi.interval=function(e,n,t){return xi.schedule(e,n,t,n)},xi.schedule=function(e,n,t,i){var n=xi.now+n,l=(xi.next=Math.min(n,xi.next),new Ti);return l.owner=e,l.callback=t,l.time=n,l.interval=i,xi.callbacks.push(l),$bind(l,l.clear)},function(){this.cleared=!1,this.interval=-1,this.time=0,this.callback=null,this.owner=null}),Di=((L["ceramic.TimerCallback"]=Ti).__name__="ceramic.TimerCallback",Ti.prototype={owner:null,callback:null,time:null,interval:null,cleared:null,clear:function(){this.cleared=!0},__class__:Ti},function(e,n,t,i,l){this.index=e,this.x=n,this.y=t,this.deltaX=i,this.deltaY=l}),Ai=((L["ceramic.Touch"]=Di).__name__="ceramic.Touch",Di.prototype={index:null,x:null,y:null,deltaX:null,deltaY:null,toString:function(){return""+V.string({index:this.index,x:this.x,y:this.y,deltaX:this.deltaX,deltaY:this.deltaY})},__class__:Di},function(e,n,t,i,l){this.touchIndex=e,this.buttonId=n,this.x=t,this.y=i,this.hits=l}),e=((L["ceramic.TouchInfo"]=Ai).__name__="ceramic.TouchInfo",Ai.prototype={touchIndex:null,buttonId:null,x:null,y:null,hits:null,toString:function(){return""+V.string({touchIndex:this.touchIndex,buttonId:this.buttonId,x:this.x,y:this.y,hits:this.hits})},__class__:Ai},function(e){this.intMap=e,this.i=0,this.len=this.intMap.values.length}),Si=((L["ceramic.TouchesIterator"]=e).__name__="ceramic.TouchesIterator",e.prototype={intMap:null,i:null,len:null,hasNext:function(){for(;this.i<this.len&&null==this.intMap.values[this.i];)this.i++;return this.i<this.len},next:function(){var e=this.i++;return this.intMap.values[e]},__class__:e},function(){this.backgroundQueue=new t0}),P=((L["ceramic.TrackerBackend"]=Si).__name__="ceramic.TrackerBackend",Si.prototype={backgroundQueue:null,onceImmediate:function(e){he.app._onceImmediate(e)},readString:function(e){return he.app.backend.io.readString(e)},saveString:function(e,n){return he.app.backend.io.saveString(e,n)},appendString:function(e,n){return he.app.backend.io.appendString(e,n)},warning:function(e,n){he.app.logger.warning(e,n)},error:function(e,n){he.app.logger.error(e,n)},success:function(e,n){he.app.logger.success(e,n)},runInBackground:function(e){this.backgroundQueue.schedule(e)},runInMain:function(e){Nt.runInMain(e)},interval:function(e,n,t){return xi.schedule(e,n,t,n)},delay:function(e,n,t){return xi.schedule(e,n,t,-1)},storageDirectory:function(){return null},pathJoin:function(e){return At.join(e)},__class__:Si},function(e,n,t,i,s){this.didTickThisFrame=!1,this.didCallImmediateStart=!1,this.customEasing=null,l.call(this),this.owner=e,this.easing=n,this.duration=t,this.fromValue=i,this.toValue=s,this.value=i,this.time=0,this.init()}),_=((L["ceramic.Tween"]=P).__name__="ceramic.Tween",P.start=function(e,n,t,i,l,s){n=new P(e,null==n?pn.QUAD_EASE_IN_OUT:n,t,i,l);return null!=s&&n.onUpdate(e,s),n},P.eagerStart=function(e,n,t,i,l,s){n=new P(e,null==n?pn.QUAD_EASE_IN_OUT:n,t,i,l);return n.eager=!0,null!=s&&n.onUpdate(e,s),n},P.tick=function(e){for(var n=P._tweens.length,t=0,i=n;t<i;){var l=t++,s=P._tweens[l];P._iteratedTweens[l]=s}for(t=0,i=n;t<i;){var r,l=t++,s=P._iteratedTweens[l];P._iteratedTweens[l]=null,s.didTickThisFrame||0<=s._lifecycleState&&(s.didTickThisFrame=!0,null!=s.owner&&s.owner._lifecycleState<0?s.destroy():(s.remaining-=e,s.remaining<=0?(s.emitUpdate(s.toValue,s.duration),s.emitComplete(),s.destroy()):(r=s.duration-s.remaining,_.k=r/s.duration,_.k,_.customEasing=s.customEasing,null!=s.computedEasing&&s.computedEasing(),_.customEasing=null,s.emitUpdate(s.fromValue+(s.toValue-s.fromValue)*_.k,r))))}},P.endFrame=function(){for(var e=0,n=P._tweens.length;e<n;){var t=e++;P._tweens[t].didTickThisFrame=!1}},P.computeEasing=function(e){switch(e._hx_index){case 0:P._computedEasingFunction=_.none;break;case 1:P._computedEasingFunction=_.linear;break;case 2:P._computedEasingFunction=_.backEaseIn;break;case 3:P._computedEasingFunction=_.backEaseInOut;break;case 4:P._computedEasingFunction=_.backEaseOut;break;case 5:P._computedEasingFunction=_.quadEaseIn;break;case 6:P._computedEasingFunction=_.quadEaseInOut;break;case 7:P._computedEasingFunction=_.quadEaseOut;break;case 8:P._computedEasingFunction=_.cubicEaseIn;break;case 9:P._computedEasingFunction=_.cubicEaseInOut;break;case 10:P._computedEasingFunction=_.cubicEaseOut;break;case 11:P._computedEasingFunction=_.quartEaseIn;break;case 12:P._computedEasingFunction=_.quartEaseInOut;break;case 13:P._computedEasingFunction=_.quartEaseOut;break;case 14:P._computedEasingFunction=_.quintEaseIn;break;case 15:P._computedEasingFunction=_.quintEaseInOut;break;case 16:P._computedEasingFunction=_.quintEaseOut;break;case 17:P._computedEasingFunction=_.bounceEaseIn;break;case 18:P._computedEasingFunction=_.bounceEaseInOut;break;case 19:P._computedEasingFunction=_.bounceEaseOut;break;case 20:P._computedEasingFunction=_.elasticEaseIn;break;case 21:P._computedEasingFunction=_.elasticEaseInOut;break;case 22:P._computedEasingFunction=_.elasticEaseOut;break;case 23:P._computedEasingFunction=_.expoEaseIn;break;case 24:P._computedEasingFunction=_.expoEaseInOut;break;case 25:P._computedEasingFunction=_.expoEaseOut;break;case 26:P._computedEasingFunction=_.sineEaseIn;break;case 27:P._computedEasingFunction=_.sineEaseInOut;break;case 28:P._computedEasingFunction=_.sineEaseOut;break;case 29:var n=e.x1,t=e.y1,i=e.x2,l=e.y2;P._computedEasingFunction=_.custom,P._computedCustomEasing=$bind(b=u0.get(n,t,i,l),b.ease);break;case 30:n=e.easing;P._computedEasingFunction=_.custom,P._computedCustomEasing=n}},P.ease=function(e,n){switch(_.k=n,e._hx_index){case 0:_.none();break;case 1:_.linear();break;case 2:_.backEaseIn();break;case 3:_.backEaseInOut();break;case 4:_.backEaseOut();break;case 5:_.quadEaseIn();break;case 6:_.quadEaseInOut();break;case 7:_.quadEaseOut();break;case 8:_.cubicEaseIn();break;case 9:_.cubicEaseInOut();break;case 10:_.cubicEaseOut();break;case 11:_.quartEaseIn();break;case 12:_.quartEaseInOut();break;case 13:_.quartEaseOut();break;case 14:_.quintEaseIn();break;case 15:_.quintEaseInOut();break;case 16:_.quintEaseOut();break;case 17:_.bounceEaseIn();break;case 18:_.bounceEaseInOut();break;case 19:_.bounceEaseOut();break;case 20:_.elasticEaseIn();break;case 21:_.elasticEaseInOut();break;case 22:_.elasticEaseOut();break;case 23:_.expoEaseIn();break;case 24:_.expoEaseInOut();break;case 25:_.expoEaseOut();break;case 26:_.sineEaseIn();break;case 27:_.sineEaseInOut();break;case 28:_.sineEaseOut();break;case 29:var t=e.x1,i=e.y1,l=e.x2,s=e.y2;_.customEasing=$bind(b=u0.get(t,i,l,s),b.ease),_.custom(),_.customEasing=null;break;case 30:t=e.easing;_.customEasing=t,_.custom(),_.customEasing=null}return _.k},P.easingFunction=function(e){switch(e._hx_index){case 0:P._computedEasingFunction=_.none;break;case 1:P._computedEasingFunction=_.linear;break;case 2:P._computedEasingFunction=_.backEaseIn;break;case 3:P._computedEasingFunction=_.backEaseInOut;break;case 4:P._computedEasingFunction=_.backEaseOut;break;case 5:P._computedEasingFunction=_.quadEaseIn;break;case 6:P._computedEasingFunction=_.quadEaseInOut;break;case 7:P._computedEasingFunction=_.quadEaseOut;break;case 8:P._computedEasingFunction=_.cubicEaseIn;break;case 9:P._computedEasingFunction=_.cubicEaseInOut;break;case 10:P._computedEasingFunction=_.cubicEaseOut;break;case 11:P._computedEasingFunction=_.quartEaseIn;break;case 12:P._computedEasingFunction=_.quartEaseInOut;break;case 13:P._computedEasingFunction=_.quartEaseOut;break;case 14:P._computedEasingFunction=_.quintEaseIn;break;case 15:P._computedEasingFunction=_.quintEaseInOut;break;case 16:P._computedEasingFunction=_.quintEaseOut;break;case 17:P._computedEasingFunction=_.bounceEaseIn;break;case 18:P._computedEasingFunction=_.bounceEaseInOut;break;case 19:P._computedEasingFunction=_.bounceEaseOut;break;case 20:P._computedEasingFunction=_.elasticEaseIn;break;case 21:P._computedEasingFunction=_.elasticEaseInOut;break;case 22:P._computedEasingFunction=_.elasticEaseOut;break;case 23:P._computedEasingFunction=_.expoEaseIn;break;case 24:P._computedEasingFunction=_.expoEaseInOut;break;case 25:P._computedEasingFunction=_.expoEaseOut;break;case 26:P._computedEasingFunction=_.sineEaseIn;break;case 27:P._computedEasingFunction=_.sineEaseInOut;break;case 28:P._computedEasingFunction=_.sineEaseOut;break;case 29:var n=e.x1,t=e.y1,i=e.x2,l=e.y2;P._computedEasingFunction=_.custom,P._computedCustomEasing=$bind(b=u0.get(n,t,i,l),b.ease);break;case 30:n=e.easing;P._computedEasingFunction=_.custom,P._computedCustomEasing=n}var s=P._computedEasingFunction,r=P._computedCustomEasing;return function(e){return _.k=e,_.customEasing=r,s(),_.customEasing=null,_.k}},P.__super__=l,P.prototype=$extend(l.prototype,{__cbOnUpdate:null,__cbOnceUpdate:null,__cbOnOwnerUnbindUpdate:null,__cbOnceOwnerUnbindUpdate:null,emitUpdate:function(e,n){this.willEmitUpdate(e,n);var t=0;if(null!=this.__cbOnUpdate&&(t+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(t+=this.__cbOnceUpdate.length),0<t){var i=f.pool(t),l=i.get(),s=0;if(null!=this.__cbOnUpdate)for(var r=0,a=this.__cbOnUpdate.length;r<a;){var h=r++;!0?(l.vector[s]=this.__cbOnUpdate[h],++s):--t}if(null!=this.__cbOnceUpdate){for(var u=null,c=null,r=0,a=this.__cbOnceUpdate.length;r<a;){var o,h=r++;!0?(l.vector[s]=this.__cbOnceUpdate[h],this.__cbOnceUpdate[h]=null,o=this.__cbOnceOwnerUnbindUpdate[h],(this.__cbOnceOwnerUnbindUpdate[h]=null)!=o&&o(),++s):(--t,null==u&&(u=[],c=[],0),u.push(this.__cbOnceOwnerUnbindUpdate[h]),c.push(this.__cbOnceUpdate[h]))}this.__cbOnceOwnerUnbindUpdate=u,this.__cbOnceUpdate=c}for(r=0,a=t;r<a;){s=r++;(0,l.vector[s])(e,n)}i.release(l)}},onUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(t)},onceUpdate:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event update because owner is destroyed!");var l=function(e){null!=t&&(i.offUpdate(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(t)},offUpdate:function(e){if(null!=e){var n;null!=this.__cbOnUpdate&&-1!=(n=this.__cbOnUpdate.indexOf(e))&&(this.__cbOnUpdate.splice(n,1),null!=(s=this.__cbOnOwnerUnbindUpdate[n])&&s(),this.__cbOnOwnerUnbindUpdate.splice(n,1)),null!=this.__cbOnceUpdate&&-1!=(n=this.__cbOnceUpdate.indexOf(e))&&(this.__cbOnceUpdate.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindUpdate[n])&&s(),this.__cbOnceOwnerUnbindUpdate.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindUpdate[l])&&s()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindUpdate[l])&&s()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&0<this.__cbOnUpdate.length||null!=this.__cbOnceUpdate&&0<this.__cbOnceUpdate.length},__cbOnComplete:null,__cbOnceComplete:null,__cbOnOwnerUnbindComplete:null,__cbOnceOwnerUnbindComplete:null,emitComplete:function(){var e=0;if(null!=this.__cbOnComplete&&(e+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(e+=this.__cbOnceComplete.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnComplete)for(var l=0,s=this.__cbOnComplete.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnComplete[r],++i):--e}if(null!=this.__cbOnceComplete){for(var a=null,h=null,l=0,s=this.__cbOnceComplete.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceComplete[r],this.__cbOnceComplete[r]=null,u=this.__cbOnceOwnerUnbindComplete[r],(this.__cbOnceOwnerUnbindComplete[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindComplete[r]),h.push(this.__cbOnceComplete[r]))}this.__cbOnceOwnerUnbindComplete=a,this.__cbOnceComplete=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event complete because owner is destroyed!");var l=function(e){null!=t&&(i.offComplete(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(t)},onceComplete:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event complete because owner is destroyed!");var l=function(e){null!=t&&(i.offComplete(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(t)},offComplete:function(e){if(null!=e){var n;null!=this.__cbOnComplete&&-1!=(n=this.__cbOnComplete.indexOf(e))&&(this.__cbOnComplete.splice(n,1),null!=(s=this.__cbOnOwnerUnbindComplete[n])&&s(),this.__cbOnOwnerUnbindComplete.splice(n,1)),null!=this.__cbOnceComplete&&-1!=(n=this.__cbOnceComplete.indexOf(e))&&(this.__cbOnceComplete.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindComplete[n])&&s(),this.__cbOnceOwnerUnbindComplete.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindComplete[l])&&s()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindComplete[l])&&s()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&0<this.__cbOnComplete.length||null!=this.__cbOnceComplete&&0<this.__cbOnceComplete.length},owner:null,easing:null,duration:null,remaining:null,fromValue:null,toValue:null,eager:null,computedEasing:null,customEasing:null,didCallImmediateStart:null,didTickThisFrame:null,value:null,time:null,init:function(){if(this.duration<=0)he.app._onceImmediate($bind(this,this.immediateComplete));else{var e=this.easing;switch(e._hx_index){case 0:P._computedEasingFunction=_.none;break;case 1:P._computedEasingFunction=_.linear;break;case 2:P._computedEasingFunction=_.backEaseIn;break;case 3:P._computedEasingFunction=_.backEaseInOut;break;case 4:P._computedEasingFunction=_.backEaseOut;break;case 5:P._computedEasingFunction=_.quadEaseIn;break;case 6:P._computedEasingFunction=_.quadEaseInOut;break;case 7:P._computedEasingFunction=_.quadEaseOut;break;case 8:P._computedEasingFunction=_.cubicEaseIn;break;case 9:P._computedEasingFunction=_.cubicEaseInOut;break;case 10:P._computedEasingFunction=_.cubicEaseOut;break;case 11:P._computedEasingFunction=_.quartEaseIn;break;case 12:P._computedEasingFunction=_.quartEaseInOut;break;case 13:P._computedEasingFunction=_.quartEaseOut;break;case 14:P._computedEasingFunction=_.quintEaseIn;break;case 15:P._computedEasingFunction=_.quintEaseInOut;break;case 16:P._computedEasingFunction=_.quintEaseOut;break;case 17:P._computedEasingFunction=_.bounceEaseIn;break;case 18:P._computedEasingFunction=_.bounceEaseInOut;break;case 19:P._computedEasingFunction=_.bounceEaseOut;break;case 20:P._computedEasingFunction=_.elasticEaseIn;break;case 21:P._computedEasingFunction=_.elasticEaseInOut;break;case 22:P._computedEasingFunction=_.elasticEaseOut;break;case 23:P._computedEasingFunction=_.expoEaseIn;break;case 24:P._computedEasingFunction=_.expoEaseInOut;break;case 25:P._computedEasingFunction=_.expoEaseOut;break;case 26:P._computedEasingFunction=_.sineEaseIn;break;case 27:P._computedEasingFunction=_.sineEaseInOut;break;case 28:P._computedEasingFunction=_.sineEaseOut;break;case 29:var n=e.x1,t=e.y1,i=e.x2,l=e.y2;P._computedEasingFunction=_.custom,P._computedCustomEasing=$bind(b=u0.get(n,t,i,l),b.ease);break;case 30:n=e.easing;P._computedEasingFunction=_.custom,P._computedCustomEasing=n}this.computedEasing=P._computedEasingFunction,this.customEasing=P._computedCustomEasing,P._computedEasingFunction=null,P._computedCustomEasing=null,P._tweens.push(this),this.remaining=this.duration,he.app._onceImmediate($bind(this,this.immediateStart))}},updateFromTick:function(e){0<=this._lifecycleState&&(this.didTickThisFrame=!0,null!=this.owner&&this.owner._lifecycleState<0?this.destroy():(this.remaining-=e,this.remaining<=0?(this.emitUpdate(this.toValue,this.duration),this.emitComplete(),this.destroy()):(e=this.duration-this.remaining,_.k=e/this.duration,_.k,_.customEasing=this.customEasing,null!=this.computedEasing&&this.computedEasing(),_.customEasing=null,this.emitUpdate(this.fromValue+(this.toValue-this.fromValue)*_.k,e))))},willEmitUpdate:function(e,n){this.value=e,this.time=n},immediateComplete:function(){this.emitUpdate(this.toValue,0),this.emitComplete(),this.destroy()},immediateStart:function(){var e;this.didCallImmediateStart||(this.didCallImmediateStart=!0,this.didTickThisFrame)||(this.eager?(e=he.app.delta,0<=this._lifecycleState&&(this.didTickThisFrame=!0,null!=this.owner&&this.owner._lifecycleState<0?this.destroy():(this.remaining-=e,this.remaining<=0?(this.emitUpdate(this.toValue,this.duration),this.emitComplete(),this.destroy()):(e=this.duration-this.remaining,_.k=e/this.duration,_.k,_.customEasing=this.customEasing,null!=this.computedEasing&&this.computedEasing(),_.customEasing=null,this.emitUpdate(this.fromValue+(this.toValue-this.fromValue)*_.k,e))))):this.emitUpdate(this.fromValue,0))},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this.easing=null,this.owner=null,this.computedEasing=null,this.customEasing=null,h.remove(P._tweens,this),this._lifecycleState=-1,l.prototype.destroy.call(this))},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offUpdate(),this.offComplete()},__class__:P}),function(){}),Ei=((L["ceramic._Tween.TweenEasingFunction"]=_).__name__="ceramic._Tween.TweenEasingFunction",_.custom=function(){null!=_.customEasing&&(_.k=_.customEasing(_.k))},_.none=function(){_.k=1<=_.k?1:0},_.linear=function(){},_.backEaseIn=function(){_.k=_.k*_.k*(2.70158*_.k-1.70158)},_.backEaseInOut=function(){var e=1.70158,n=_;(n.k*=2)<1?_.k=_.k*_.k*((1+(e*=1.525))*_.k-e)*.5:(n=_).k=.5*((n.k-=2)*_.k*((1+(e*=1.525))*_.k+e)+2)},_.backEaseOut=function(){_.k=(_.k=_.k-1)*_.k*(2.70158*_.k+1.70158)+1},_.quadEaseIn=function(){_.k*=_.k},_.quadEaseInOut=function(){(_.k*=2)<1?_.k=.5*_.k*_.k:_.k=-.5*((_.k-1)*(_.k-3)-1)},_.quadEaseOut=function(){_.k=-_.k*(_.k-2)},_.cubicEaseIn=function(){_.k=_.k*_.k*_.k},_.cubicEaseInOut=function(){var e;e=(_.k/=.5)<1?.5*_.k*_.k*_.k:.5*((_.k-=2)*_.k*_.k+2),_.k=e},_.cubicEaseOut=function(){_.k=(_.k-1)*(_.k-1)*(_.k-1)+1},_.quartEaseIn=function(){_.k=_.k*_.k*_.k*_.k},_.quartEaseInOut=function(){var e=_;(e.k*=2)<1?_.k=.5*_.k*_.k*_.k*_.k:(e=_).k=-.5*((e.k-=2)*_.k*_.k*_.k-2)},_.quartEaseOut=function(){_.k=-((_.k-1)*(_.k-1)*(_.k-1)*(_.k-1)-1)},_.quintEaseIn=function(){_.k=_.k*_.k*_.k*_.k*_.k},_.quintEaseInOut=function(){var e=_;(e.k*=2)<1?_.k=.5*_.k*_.k*_.k*_.k*_.k:(e=_).k=.5*((e.k-=2)*_.k*_.k*_.k*_.k+2)},_.quintEaseOut=function(){_.k=(_.k-1)*(_.k-1)*(_.k-1)*(_.k-1)*(_.k-1)+1},_.bounceEaseIn=function(){var e=1-_.k,e=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375;_.k=1-e},_.bounceEaseInOut=function(){var e,n;_.k<.5?(e=1-2*_.k,n=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,_.k=.5*(1-n)):(e=2*_.k-1,n=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,_.k=.5*n+.5)},_.bounceEaseOut=function(){var e=_.k,e=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375;_.k=e},_._bounceEaseIn=function(e,n,t,i){e=i-e,i=(e/=i)<.36363636363636365?t*(7.5625*e*e):e<.7272727272727273?t*(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?t*(7.5625*(e-=.8181818181818182)*e+.9375):t*(7.5625*(e-=.9545454545454546)*e+.984375);return t-i+n},_._bounceEaseOut=function(e,n,t,i){i=(e/=i)<.36363636363636365?t*(7.5625*e*e)+n:e<.7272727272727273?t*(7.5625*(e-=.5454545454545454)*e+.75)+n:e<.9090909090909091?t*(7.5625*(e-=.8181818181818182)*e+.9375)+n:t*(7.5625*(e-=.9545454545454546)*e+.984375)+n;return i},_.elasticEaseIn=function(){var e,n;0!=_.k&&1!=_.k&&(n=(e=.1)<1?(e=1,.1):.4/(2*Math.PI)*Math.asin(1/e),_.k=-(e*Math.exp(6.931471805599453*--_.k)*Math.sin((_.k-n)*(2*Math.PI)/.4)))},_.elasticEaseInOut=function(){var e,n,t;0!=_.k&&(2==((t=_).k*=2)?_.k=1:(n=(e=.44999999999999996)/4,_.k<1?(t=_).k=Math.exp(6.931471805599453*--t.k)*Math.sin((_.k-n)*(2*Math.PI)/e)*-.5:(t=_).k=Math.exp(-6.931471805599453*--t.k)*Math.sin((_.k-n)*(2*Math.PI)/e)*.5+1))},_.elasticEaseOut=function(){var e,n;0!=_.k&&1!=_.k&&(n=(e=.1)<1?(e=1,.1):.4/(2*Math.PI)*Math.asin(1/e),_.k=e*Math.exp(-6.931471805599453*_.k)*Math.sin((_.k-n)*(2*Math.PI)/.4)+1)},_.expoEaseIn=function(){_.k=0==_.k?0:Math.exp(6.931471805599453*(_.k-1))},_.expoEaseInOut=function(){0!=_.k&&1!=_.k&&((_.k/=.5)<1?_.k=.5*Math.exp(6.931471805599453*(_.k-1)):_.k=.5*(2-Math.exp(-6.931471805599453*--_.k)))},_.expoEaseOut=function(){_.k=1==_.k?1:1-Math.exp(-6.931471805599453*_.k)},_.sineEaseIn=function(){_.k=1-Math.cos(_.k*(Math.PI/2))},_.sineEaseInOut=function(){_.k=-(Math.cos(Math.PI*_.k)-1)/2},_.sineEaseOut=function(){_.k=Math.sin(_.k*(Math.PI/2))},function(){}),Mi=((L["ceramic.Utils"]=Ei).__name__="ceramic.Utils",Ei.realPath=function(e){return e=At.isAbsolute(e)||B.startsWith(e,"http://")||B.startsWith(e,"https://")?e:At.join([he.app.settings.assetsPath,e])},Ei.getRtti=function(e){return kt.getRtti(e)},Ei.uniqueId=function(){switch(Ei._nextUniqueIntCursor){case 0:Ei._nextUniqueInt0=(Ei._nextUniqueInt0+1)%2147483647;break;case 1:Ei._nextUniqueInt1=(Ei._nextUniqueInt1+1)%2147483647;break;case 2:Ei._nextUniqueInt2=(Ei._nextUniqueInt2+1)%2147483647;break;case 3:Ei._nextUniqueInt3=(Ei._nextUniqueInt3+1)%2147483647}Ei._nextUniqueIntCursor=(Ei._nextUniqueIntCursor+1)%4;var e,n=Ei._nextUniqueInt0,t=(n=null==n?2147483646*Math.random()|0:n)%62|0,i=n/62|0;e=0<i?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(l=0<(i=n/62|0)?(s=Ei.base62Id(i))+(r=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(s=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(s)))+(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(l));var l,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;l=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(s=0<(i=n/62|0)?(r=Ei.base62Id(i))+(a=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(r=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(r)))+(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(s));var s,t=(n=null==(n=Ei._nextUniqueInt1)?2147483646*Math.random()|0:n)%62|0;s=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(r=0<(i=n/62|0)?(a=Ei.base62Id(i))+(h=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(a=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(a)))+(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(r));var r,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;r=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(a=0<(i=n/62|0)?(h=Ei.base62Id(i))+(u=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(h=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(h)))+(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(a));var a,t=(n=null==(n=Ei._nextUniqueInt2)?2147483646*Math.random()|0:n)%62|0;a=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(h=0<(i=n/62|0)?(u=Ei.base62Id(i))+(d=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(u=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(u)))+(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(h));var h,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;h=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(u=0<(i=n/62|0)?(d=Ei.base62Id(i))+(o=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(d=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(d)))+(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(u));var u,c,o,_,d,t=(n=null==(n=Ei._nextUniqueInt3)?2147483646*Math.random()|0:n)%62|0;return d=e+"-"+l+"-"+s+"-"+r+"-"+a+"-"+h+"-"+(u=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(d=0<(i=n/62|0)?(o=Ei.base62Id(i))+(9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(o=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(o)))+(o=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(d)))},Ei.randomId=function(e){null==e&&(e=32);for(var n=[];n.length<e;)for(var t,i,l=null,s=(l=null==l?2147483646*Math.random()|0:l)%62|0,l=l/62|0,r=0,a=(t=0<l?(i=(l=null==(l=l)?2147483646*Math.random()|0:l)%62|0,(0<(l=l/62|0)?Ei.base62Id(l)+(9<i?(90<(l=i-10+65)&&(l+=6),String.fromCodePoint(l)):V.string(i).charAt(0)):(l=9<i?(90<(l=i-10+65)&&(l+=6),String.fromCodePoint(l)):V.string(i).charAt(0),V.string(l)))+(9<s?(90<(i=s-10+65)&&(i+=6),String.fromCodePoint(i)):V.string(s).charAt(0))):(i=9<s?(90<(l=s-10+65)&&(l+=6),String.fromCodePoint(l)):V.string(s).charAt(0),V.string(i))).length;r<a;){var u=r++;n.push(t.charAt(u))}return wn.shuffle(n),h.substr(n.join(""),0,e)},Ei.persistentId=function(e,n){null==n&&(n=32),null==e&&(e=0),null==Ei._persistentIds&&(Ei._persistentIds=new Hl);var t=Ei._persistentIds.h[e];if(null==t){if(null!=(t=he.app.backend.io.readString("persistentId_"+e)))return Ei._persistentIds.h[e]=t;t=Ei.randomId(n),he.app.backend.io.saveString("persistentId_"+e,t)||he.app.logger.warning("Failed to save persistent id ("+t+") at slot "+e,{fileName:"../../../../ceramic/runtime/src/ceramic/Utils.hx",lineNumber:125,className:"ceramic.Utils",methodName:"persistentId"}),Ei._persistentIds.h[e]=t}return t},Ei.resetPersistentId=function(e){null==e&&(e=0),null!=Ei._persistentIds&&Ei._persistentIds.remove(e),he.app.backend.io.saveString("persistentId_"+e,null)},Ei.base62Id=function(e){var n,t,i=(e=null==e?2147483646*Math.random()|0:e)%62|0,e=e/62|0;return 0<e?(n=Ei.base62Id(e))+(9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0)):(n=9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0),V.string(n))},Ei.println=function(e){var n=null;null!=(n=ua.electronRunner)?n.consoleLog("[error] "+e):console.log(""+e)},Ei.printStackTrace=function(e){null==e&&(e=!1);var n="",t=null,i=null;try{throw new Error}catch(e){i=e}for(var l=(""+V.string(i.stack)).split("\n"),s=l.length-1,r=-1!=navigator.platform.indexOf("Win"),t=ua.electronRunner;2<=s;){var a=l[s],a=B.ltrim(a);null!=t&&(a=B.replace(a,"http://localhost:"+V.string(t.serverPort)+"/file:"+(r?"/":""),""),a=B.replace(a,"http://localhost:"+V.string(t.serverPort)+"/",V.string(t.appFiles)+"/"));e||(null!=t?t.consoleLog("[error] "+V.string(a)):console.log(""+V.string(a))),n=(n+=V.string(a))+String.fromCodePoint(10),--s}return n},Ei.stackItemToString=function(e){var n=window.sourceMapSupport,t="";switch(e._hx_index){case 0:t="a C function";break;case 1:var i=e.m,l=!1;Ei.RE_MODULE_AT.match(i)&&(s=Ei.RE_MODULE_AT.matched(1),r=Ei.RE_MODULE_AT.matched(2),a=Ei.RE_MODULE_AT.matched(3),t=s,null!=r&&(t+=":"+r),l=!0),l||(t="module "+i);break;case 2:var l=e.s,s=e.file,r=e.line,a=e.column;if(null!=n&&!B.endsWith(s,".hx"))try{var h={source:s,line:r,column:a},u=n.mapSourcePosition(h);null!=u&&(s=u.source,r=u.line,a=u.column)}catch(e){Al.lastError=e}null!=l&&(t=Ei.stackItemToString(l)+" ("),t=(t+=s)+" line "+r,null!=l&&(t+=")");break;case 3:t=(t+=e.classname)+"."+e.method;break;case 4:t=t+"local function #"+e.v}return t},Ei.radToDeg=function(e){return 57.29577951308232*e},Ei.degToRad=function(e){return.017453292519943295*e},Ei.round=function(e,n){if(0<(n=null==n?0:n)){for(var t=1;0<n--;)t*=10;return Math.round(e*t)/t}return Math.round(e)},Ei.hashCode=function(e){var n=0;if(0!=e.length)for(var t=0,i=e.length;t<i;){var l=t++,n=(n<<5)-n+h.cca(e,l);n&=n}return n},Ei.uniformFrequencyList=function(e,n,t){for(var i=[],l=[],s=0,r=e.length;s<r;)l[o=s++]=0;for(s=0,r=n.length;s<r;)l[o=s++]+=n[o];for(s=0,r=t;s<r;){s++;for(var a=0,h=0,u=0,c=e.length;u<c;){var o,_=l[o=u++];h<_&&(a=o,h=_)}i.push(e[a]),--l[a];for(var d=0,b=n.length;d<b;){var g=d++;l[g]+=n[g]}}return i},Ei.upperCaseToCamelCase=function(e,n){for(var t="",i=e.length,l=0,s=n=null==n?!0:n;l<i;){var r=e.charAt(l);"_"==r?s=!0:s?(s=!1,t+=V.string(r.toUpperCase())):t+=V.string(r.toLowerCase()),++l}return t},Ei.camelCaseToUpperCase=function(e,n){null==n&&(n=!0);for(var t="",i=e.length,l=0,s=!1;l<i;){var r,a=e.charAt(l),s="."!=a&&Ei.RE_ASCII_CHAR.match(a)?(r=a.toUpperCase(),a=a==r,s&&a&&(t+="_",s=!1),t+=null==r?"null":""+r,!a):(t+="_",!1);++l}for(var u=t;B.endsWith(u,"_");)u=h.substr(u,0,u.length-1);return u},Ei.functionEquals=function(e,n){return e==n},Ei.decodeUriParams=function(e){for(var n=new z,t=e.split("&"),i=0;i<t.length;){var l,s=t[i],r=(++i,s.indexOf("="));-1!=r&&(l=s.substring(0,r),l=decodeURIComponent(l.split("+").join(" ")),s=s.substring(r+1),r=decodeURIComponent(s.split("+").join(" ")),n.h[l]=r)}return n},Ei.sinRatio=function(e){return 1<=e&&(e%=1),.5*(Math.sin(e*Math.PI*2)+1)},Ei.cosRatio=function(e){return 1<=e&&(e%=1),.5*(Math.cos(e*Math.PI*2)+1)},Ei.valueFromInterpolatedKey=function(e,n,t){var i=e.length-1,l=0;if(t<e[0])l=n[0];else if(t>=e[i])l=n[i];else{for(var s=0,r=1;t>e[r];)++s,++r;i=(t-e[s])/(e[r]-e[s]),l=n[s]+(n[r]-n[s])*i}return l},Ei.yFromInterpolatedX=function(e,n){var t=e.length-2,i=0;if(n<e[0])i=e[1];else if(n>=e[t])i=e[1+t];else{for(var l=0,s=2;n>e[s];)l+=2,s+=2;var t=(n-e[l])/(e[s]-e[l]),r=l+1;i=e[r]+(e[s+1]-e[r])*t}return i},Ei.command=function(e,n,t,i){null==n&&(n=[]),i(-1,null,null)},Ei.replaceIdentifier=function(e,n,t){e=B.replace(e,"\n"," \n "),e=" "+(e=B.replace(e,"\r"," \r "))+" ";var i="(\\s|[^a-zA-Z0-9_])",n=new RegExp(i+n.replace(g.escapeRe,"\\$&")+i,"g".split("u").join("")),i="$1"+B.replace(t,"$","$$")+"$2";return e=(e=e.replace(n,i)).substring(1,e.length-1),e=B.replace(e," \r ","\r"),e=B.replace(e," \n ","\n")},Ei.imageTypeFromBytes=function(e){return 255==e.b[0]&&216==e.b[1]&&255==e.b[2]?"jpeg":137==e.b[0]&&80==e.b[1]&&78==e.b[2]&&71==e.b[3]&&13==e.b[4]&&10==e.b[5]&&26==e.b[6]&&10==e.b[7]?"png":null},Ei.lerp=function(e,n,t){return e+(n-e)*t},Ei.isIos=function(){var e;return-1==Ei.isIos_result&&(Ei.isIos_result=0,e=null!=ie.navigator?ie.navigator.userAgent:"",!!window.MSStream||-1==e.indexOf("iPhone")&&-1==e.indexOf("iPad")&&-1==e.indexOf("iPod")||(Ei.isIos_result=1)),0!=Ei.isIos_result},Ei.isAndroid=function(){return-1==Ei.isAndroid_result&&(Ei.isAndroid_result=0,-1!=(null!=ie.navigator?ie.navigator.userAgent:"").toLowerCase().indexOf("android"))&&(Ei.isAndroid_result=1),0!=Ei.isAndroid_result},Ei.sign=function(e){return 0<=e?1:-1},function(e){this.completionCallback=e,this.pending=0,this.complete=!1}),ki=((L["ceramic.WaitCallbacks"]=Mi).__name__="ceramic.WaitCallbacks",Mi.prototype={completionCallback:null,pending:null,complete:null,callback:function(){var e=this;if(this.complete)throw Q.thrown("Cannot register new callbacks after completion");this.pending++;var n=!1;return function(){n||(n=!0,e.pending--,0!=e.pending)||e.complete||(e.complete=!0,e.completionCallback())}},__class__:Mi},function(e){null==e&&(e=1),this.chokidarWatchers=null,this.chokidarUpdatedFilesByWatchedDirectory=null,this.startingToWatchDirectories=null,this.watchedDirectories=null,l.call(this),ki.didTryRequireChokidar||(ki.didTryRequireChokidar=!0,ki.fs=kt.nodeRequire("fs"),null!=ki.fs&&(ki.chokidar=kt.nodeRequire("chokidar"))),this.updateInterval=e,xi.schedule(this,e,$bind(this,this.tick),e)}),C=((L["ceramic.WatchDirectory"]=ki).__name__="ceramic.WatchDirectory",ki.__super__=l,ki.prototype=$extend(l.prototype,{__cbOnDirectoryChange:null,__cbOnceDirectoryChange:null,__cbOnOwnerUnbindDirectoryChange:null,__cbOnceOwnerUnbindDirectoryChange:null,emitDirectoryChange:function(e,n,t){var i=0;if(null!=this.__cbOnDirectoryChange&&(i+=this.__cbOnDirectoryChange.length),null!=this.__cbOnceDirectoryChange&&(i+=this.__cbOnceDirectoryChange.length),0<i){var l=f.pool(i),s=l.get(),r=0;if(null!=this.__cbOnDirectoryChange)for(var a=0,h=this.__cbOnDirectoryChange.length;a<h;){var u=a++;!0?(s.vector[r]=this.__cbOnDirectoryChange[u],++r):--i}if(null!=this.__cbOnceDirectoryChange){for(var c=null,o=null,a=0,h=this.__cbOnceDirectoryChange.length;a<h;){var _,u=a++;!0?(s.vector[r]=this.__cbOnceDirectoryChange[u],this.__cbOnceDirectoryChange[u]=null,_=this.__cbOnceOwnerUnbindDirectoryChange[u],(this.__cbOnceOwnerUnbindDirectoryChange[u]=null)!=_&&_(),++r):(--i,null==c&&(c=[],o=[],0),c.push(this.__cbOnceOwnerUnbindDirectoryChange[u]),o.push(this.__cbOnceDirectoryChange[u]))}this.__cbOnceOwnerUnbindDirectoryChange=c,this.__cbOnceDirectoryChange=o}for(a=0,h=i;a<h;){r=a++;(0,s.vector[r])(e,n,t)}l.release(s)}},onDirectoryChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event directoryChange because owner is destroyed!");var l=function(e){null!=t&&(i.offDirectoryChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindDirectoryChange&&(this.__cbOnOwnerUnbindDirectoryChange=[]),this.__cbOnOwnerUnbindDirectoryChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindDirectoryChange&&(this.__cbOnOwnerUnbindDirectoryChange=[]),this.__cbOnOwnerUnbindDirectoryChange.push(null);null==this.__cbOnDirectoryChange&&(this.__cbOnDirectoryChange=[]),this.__cbOnDirectoryChange.push(t)},onceDirectoryChange:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event directoryChange because owner is destroyed!");var l=function(e){null!=t&&(i.offDirectoryChange(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindDirectoryChange&&(this.__cbOnceOwnerUnbindDirectoryChange=[]),this.__cbOnceOwnerUnbindDirectoryChange.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindDirectoryChange&&(this.__cbOnceOwnerUnbindDirectoryChange=[]),this.__cbOnceOwnerUnbindDirectoryChange.push(null);null==this.__cbOnceDirectoryChange&&(this.__cbOnceDirectoryChange=[]),this.__cbOnceDirectoryChange.push(t)},offDirectoryChange:function(e){if(null!=e){var n;null!=this.__cbOnDirectoryChange&&-1!=(n=this.__cbOnDirectoryChange.indexOf(e))&&(this.__cbOnDirectoryChange.splice(n,1),null!=(s=this.__cbOnOwnerUnbindDirectoryChange[n])&&s(),this.__cbOnOwnerUnbindDirectoryChange.splice(n,1)),null!=this.__cbOnceDirectoryChange&&-1!=(n=this.__cbOnceDirectoryChange.indexOf(e))&&(this.__cbOnceDirectoryChange.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindDirectoryChange[n])&&s(),this.__cbOnceOwnerUnbindDirectoryChange.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindDirectoryChange){for(var t=0,i=this.__cbOnOwnerUnbindDirectoryChange.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindDirectoryChange[l])&&s()}this.__cbOnOwnerUnbindDirectoryChange=null}if(null!=this.__cbOnceOwnerUnbindDirectoryChange){for(t=0,i=this.__cbOnceOwnerUnbindDirectoryChange.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindDirectoryChange[l])&&s()}this.__cbOnceOwnerUnbindDirectoryChange=null}this.__cbOnDirectoryChange=null,this.__cbOnceDirectoryChange=null}},listensDirectoryChange:function(){return null!=this.__cbOnDirectoryChange&&0<this.__cbOnDirectoryChange.length||null!=this.__cbOnceDirectoryChange&&0<this.__cbOnceDirectoryChange.length},updateInterval:null,watchedDirectories:null,startingToWatchDirectories:null,chokidarUpdatedFilesByWatchedDirectory:null,chokidarWatchers:null,watchDirectory:function(t){var i=this;null==this.watchedDirectories&&(this.watchedDirectories=new z),null==this.startingToWatchDirectories&&(this.startingToWatchDirectories=new z),this.startingToWatchDirectories.h[t]=!0,Nt.runInBackground(function(){var n=i.computeFilesModificationTime(t);Nt.runInMain(function(){var e;Object.prototype.hasOwnProperty.call(i.startingToWatchDirectories.h,t)&&(e=i.startingToWatchDirectories,Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t],i.watchedDirectories.h[t]=n,null!=ki.chokidar)&&(null==i.chokidarUpdatedFilesByWatchedDirectory&&(i.chokidarUpdatedFilesByWatchedDirectory=new z),i.chokidarUpdatedFilesByWatchedDirectory.h[t]=[],i.watchWithChokidar(t))})})},watchWithChokidar:function(t){var i=this,e=ki.chokidar.watch(".",{ignoreInitial:!0,disableGlobbing:!0,cwd:t});null==this.chokidarWatchers&&(this.chokidarWatchers=new z),Object.prototype.hasOwnProperty.call(this.chokidarWatchers.h,t)&&this.chokidarWatchers.h[t].close(),(this.chokidarWatchers.h[t]=e).on("add",function(e){var n=ki.fs.statSync(At.join([t,e]));n.isDirectory()||i.chokidarUpdatedFilesByWatchedDirectory.h[t].push({status:0,lastModified:n.mtime.getTime()/1e3,name:e})}),e.on("change",function(e){var n=ki.fs.statSync(At.join([t,e]));n.isDirectory()||i.chokidarUpdatedFilesByWatchedDirectory.h[t].push({status:1,lastModified:n.mtime.getTime()/1e3,name:e})}),e.on("unlink",function(e){i.chokidarUpdatedFilesByWatchedDirectory.h[t].push({status:2,lastModified:-1,name:e})})},stopWatchingDirectory:function(e){var n;return null!=this.chokidarWatchers&&Object.prototype.hasOwnProperty.call(this.chokidarWatchers.h,e)&&(this.chokidarWatchers.h[e].close(),n=this.chokidarWatchers,Object.prototype.hasOwnProperty.call(n.h,e))&&delete n.h[e],null==this.watchedDirectories&&Object.prototype.hasOwnProperty.call(this.watchedDirectories.h,e)?(n=this.watchedDirectories,Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e],null!=this.startingToWatchDirectories&&Object.prototype.hasOwnProperty.call(this.startingToWatchDirectories.h,e)&&(n=this.startingToWatchDirectories,Object.prototype.hasOwnProperty.call(n.h,e))&&delete n.h[e],!0):!(null==this.startingToWatchDirectories||!Object.prototype.hasOwnProperty.call(this.startingToWatchDirectories.h,e)||(n=this.startingToWatchDirectories,Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e],0))},tick:function(){if(null!=this.watchedDirectories){for(var e=[],n=this.watchedDirectories.h,t=Object.keys(n),i=t.length,l=0;l<i;){var s=t[l++];e.push(s)}for(var r=0;r<e.length;){s=e[r];++r,this.checkWatchedDirectory(s)}}},checkWatchedDirectory:function(c){var o=this;if(null!=ki.chokidar){if(Object.prototype.hasOwnProperty.call(this.chokidarUpdatedFilesByWatchedDirectory.h,c)){var e=this.chokidarUpdatedFilesByWatchedDirectory.h[c];if(0<e.length){for(var _=this.watchedDirectories.h[c],n=new z,t=_.h,i=t,l=Object.keys(t),s=l.length,r=0;r<s;){var a=i[d=l[r++]];n.h[d]=a}for(var h=0;h<e.length;){var u=e[h];switch(++h,u.status){case 0:case 1:n.h[u.name]=u.lastModified;break;case 2:var d=u.name;Object.prototype.hasOwnProperty.call(n.h,d)&&delete n.h[d]}}Object.prototype.hasOwnProperty.call(this.watchedDirectories.h,c)&&(this.watchedDirectories.h[c]=n,this.emitDirectoryChange(c,n,_)),e.splice(0,e.length)}}}else{_=this.watchedDirectories.h[c];Nt.runInBackground(function(){for(var e=o.computeFilesModificationTime(c),n=!1,t=e.h,i=t,l=Object.keys(t),s=l.length,r=0;r<s;){var a=u=l[r++],h=i[u];if(!Object.prototype.hasOwnProperty.call(_.h,a)){n=!0;break}if(h!=_.h[a]){n=!0;break}}if(!n)for(i=t=_.h,s=(l=Object.keys(t)).length,r=0;r<s;){var u,a=u=l[r++],h=i[u];if(!Object.prototype.hasOwnProperty.call(e.h,a)){n=!0;break}}n&&Nt.runInMain(function(){Object.prototype.hasOwnProperty.call(o.watchedDirectories.h,c)&&(o.watchedDirectories.h[c]=e,o.emitDirectoryChange(c,e,_))})})}},computeFilesModificationTime:function(e){for(var n=new z,t=0,i=Cn.getFlatDirectory(e);t<i.length;){var l=i[t],s=(++t,Cn.getLastModified(At.join([e,l])));n.h[l]=s}return n},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offDirectoryChange()},__class__:ki}),(L["ceramic.macros.DefinesMacro"]=h2).__name__="ceramic.macros.DefinesMacro",h2._stringToBool=function(e){return null!=e&&("true"==(e=e.toLowerCase())||"1"==e)},(L["ceramic.macros.EnumAbstractMacro"]=i2).__name__="ceramic.macros.EnumAbstractMacro",(L["ceramic.macros.PluginsMacro"]=j2).__name__="ceramic.macros.PluginsMacro",(L["clay.BackgroundQueue"]=k2).__name__="clay.BackgroundQueue",k2.prototype={checkInterval:null,runsInBackground:null,stop:null,pending:null,schedule:function(e){he.app._onceImmediate(e)},destroy:function(){this.stop=!0},__class__:k2},function(e,n){this.windowInBackground=!1,this.ready=!1,this.freeze=!1,this.nextTick=0,this.immediateShutdown=!1,this.timestamp=-1,this.hasShutdown=!1,this.shuttingDown=!1,C.app=this,Gi.init(),this.extractAppId(),this.config=this.defaultConfig(),e(this.config),this.events=n,this.io=new il(this),Bi.flush(),this.assets=new Ji(this),Bi.flush(),this.audio=new el(this),Bi.flush(),this.input=new Li(this),Bi.flush(),this.runtime=new ll(this),Bi.flush(),this.backgroundQueue=new k2,this.init()}),Ii=((L["clay.Clay"]=C).__name__="clay.Clay",C.prototype={config:null,events:null,io:null,assets:null,audio:null,input:null,runtime:null,shuttingDown:null,hasShutdown:null,timestamp:null,appId:null,screenWidth:null,screenHeight:null,screenDensity:null,backgroundQueue:null,immediateShutdown:null,nextTick:null,freeze:null,set_freeze:function(e){return(this.freeze=e)?(this.events.freeze(),this.audio.suspend()):(this.events.unfreeze(),this.audio.resume()),e},ready:null,init:function(){Ni.debug("Clay / init",{fileName:"clay/Clay.hx",lineNumber:160,className:"clay.Clay",methodName:"init"}),this.io.init(),Bi.flush(),this.audio.init(),Bi.flush(),this.input.init(),Bi.flush(),this.runtime.init(),Bi.flush(),Ni.debug("Clay / ready",{fileName:"clay/Clay.hx",lineNumber:174,className:"clay.Clay",methodName:"init"}),this.runtime.ready(),Bi.flush(),this.audio.ready(),Bi.flush(),this.timestamp=window.performance.now()/1e3-ll.timestampStart,this.ready=!0,this.nextTick=this.timestamp,this.updateScreen(),this.events.ready(),!this.runtime.run()||this.hasShutdown||this.shuttingDown||this.shutdown()},shutdown:function(){if(this.shuttingDown)Ni.debug("Clay / shutdown() called again, already shutting down - ignoring",{fileName:"clay/Clay.hx",lineNumber:199,className:"clay.Clay",methodName:"shutdown"});else{if(this.hasShutdown)throw Q.thrown("Clay / calling shutdown() more than once is disallowed");this.shuttingDown=!0,this.io.shutdown(),this.audio.shutdown(),this.input.shutdown(),this.runtime.shutdown(this.immediateShutdown),Ni.debug("Clay / shutdown",{fileName:"clay/Clay.hx",lineNumber:215,className:"clay.Clay",methodName:"shutdown"}),this.hasShutdown=!0}},emitQuit:function(){this.shutdown()},shouldUpdate:function(e){if(0<this.config.updateRate){if(e<this.nextTick)return!1;for(;this.nextTick<=e;)this.nextTick+=this.config.updateRate}else this.nextTick=e;return!0},emitTick:function(e){var n;this.freeze||(Gi.tick(),Bi.flush(),this.updateScreen(),!this.shuttingDown&&this.ready&&(n=e-this.timestamp,this.timestamp=e,this.audio.tick(n),this.events.tick(n)))},emitRender:function(){this.freeze||!this.shuttingDown&&this.ready&&this.events.render()},emitWindowEvent:function(e,n,t,i,l){this.events.windowEvent(e,n,t,i,l)},emitAppEvent:function(e){this.events.appEvent(e)},windowInBackground:null,extractAppId:function(){var e='"ldtk-level"';B.startsWith(e,'"')?this.appId=JSON.parse(e):this.appId=e},defaultConfig:function(){var e=ll.defaultConfig();return new Pi(this.defaultWindowConfig(),this.defaultRenderConfig(),e,null)},defaultWindowConfig:function(){return new Fi(!1,!1,!0,!1,536805376,536805376,960,640,"clay app",!1,.06666666666666667)},defaultRenderConfig:function(){return new Ii(0,0,0,8,8,8,8,new Ki(0,0,0,1),null,new Ri(1,null,null,null,null,null,null,null,null))},defaultRuntimeConfig:function(){return new tl(null,null,null,null,null,null,null)},copyWindowConfig:function(e){return new Fi(e.fullscreen,e.trueFullscreen,e.resizable,e.borderless,e.x,e.y,e.width,e.height,""+e.title,e.noInput,e.backgroundSleep)},copyRenderConfig:function(e){return new Ii(e.depth,e.stencil,e.antialiasing,e.redBits,e.greenBits,e.blueBits,e.alphaBits,new Ki(e.defaultClear.r,e.defaultClear.g,e.defaultClear.b,e.defaultClear.a),null,new Ri(e.webgl.version,null,null,null,null,null,null,null,null))},updateScreen:function(){this.screenDensity=C.app.runtime.windowDevicePixelRatio();var e=C.app.runtime,e=(this.screenWidth=Math.round(Math.round(e.windowW*e.windowDevicePixelRatio())/this.screenDensity),C.app.runtime);this.screenHeight=Math.round(Math.round(e.windowH*e.windowDevicePixelRatio())/this.screenDensity)},__class__:C,__properties__:{set_freeze:"set_freeze"}},function(e,n,t,i,l,s,r,a,h,u){this.webgl=null,this.vsync=!0,this.defaultClear=new Ki(0,0,0,1),this.alphaBits=8,this.blueBits=8,this.greenBits=8,this.redBits=8,this.antialiasing=0,this.stencil=0,this.depth=0,null!=e&&(this.depth=e),null!=n&&(this.stencil=n),null!=t&&(this.antialiasing=t),null!=i&&(this.redBits=i),null!=l&&(this.greenBits=l),null!=s&&(this.blueBits=s),null!=r&&(this.alphaBits=r),null!=a&&(this.defaultClear=a),null!=h&&(this.vsync=h),null!=u&&(this.webgl=u)}),Ri=((L["clay.RenderConfig"]=Ii).__name__="clay.RenderConfig",Ii.prototype={depth:null,stencil:null,antialiasing:null,redBits:null,greenBits:null,blueBits:null,alphaBits:null,defaultClear:null,vsync:null,webgl:null,__class__:Ii},function(e,n,t,i,l,s,r,a,h){this.failIfMajorPerformanceCaveat=!1,this.preferLowPowerToHighPerformance=!1,this.preserveDrawingBuffer=!1,this.premultipliedAlpha=!1,this.antialias=!0,this.stencil=!1,this.depth=!0,this.alpha=!1,this.version=1,null!=e&&(this.version=e),null!=n&&(this.alpha=n),null!=t&&(this.depth=t),null!=i&&(this.stencil=i),null!=l&&(this.antialias=l),null!=s&&(this.premultipliedAlpha=s),null!=r&&(this.preserveDrawingBuffer=r),null!=a&&(this.preferLowPowerToHighPerformance=a),null!=h&&(this.failIfMajorPerformanceCaveat=h)}),Fi=((L["clay.RenderConfigWebGL"]=Ri).__name__="clay.RenderConfigWebGL",Ri.prototype={version:null,alpha:null,depth:null,stencil:null,antialias:null,premultipliedAlpha:null,preserveDrawingBuffer:null,preferLowPowerToHighPerformance:null,failIfMajorPerformanceCaveat:null,__class__:Ri},function(e,n,t,i,l,s,r,a,h,u,c){this.backgroundSleep=.06666666666666667,this.noInput=!1,this.title=null,this.height=640,this.width=960,this.y=0,this.x=0,this.borderless=!1,this.resizable=!0,this.trueFullscreen=!1,this.fullscreen=!1,null!=e&&(this.fullscreen=e),null!=n&&(this.trueFullscreen=n),null!=t&&(this.resizable=t),null!=i&&(this.borderless=i),null!=l&&(this.x=l),null!=s&&(this.y=s),null!=r&&(this.width=r),null!=a&&(this.height=a),null!=h&&(this.title=h),null!=u&&(this.noInput=u),null!=c&&(this.backgroundSleep=c)}),Pi=((L["clay.WindowConfig"]=Fi).__name__="clay.WindowConfig",Fi.prototype={fullscreen:null,trueFullscreen:null,resizable:null,borderless:null,x:null,y:null,width:null,height:null,title:null,noInput:null,backgroundSleep:null,__class__:Fi},function(e,n,t,i){this.updateRate=0,this.runtime=null,this.render=null,(this.window=null)!=e&&(this.window=e),null!=n&&(this.render=n),null!=t&&(this.runtime=t),null!=i&&(this.updateRate=i)}),Bi=((L["clay.Config"]=Pi).__name__="clay.Config",Pi.prototype={window:null,render:null,runtime:null,updateRate:null,__class__:Pi},(L["clay.Extensions"]=q2).__name__="clay.Extensions",q2.unsafeGet=function(e,n){return e[n]},q2.unsafeSet=function(e,n,t){e[n]=t},(L["clay.Image"]=r2).__name__="clay.Image",r2.prototype={width:null,height:null,widthActual:null,heightActual:null,bitsPerPixel:null,sourceBitsPerPixel:null,pixels:null,premultiplyAlpha:function(){4==this.bitsPerPixel?Wi.premultiplyAlpha(this.pixels):Ni.warning("Can only premultiply alpha on images with 4 bits per pixels (RGBA)",{fileName:"clay/Image.hx",lineNumber:29,className:"clay.Image",methodName:"premultiplyAlpha"})},reversePremultiplyAlpha:function(){4==this.bitsPerPixel?Wi.reversePremultiplyAlpha(this.pixels):Ni.warning("Can only reverse premultiply alpha on images with 4 bits per pixels (RGBA)",{fileName:"clay/Image.hx",lineNumber:40,className:"clay.Image",methodName:"reversePremultiplyAlpha"})},__class__:r2},function(){}),Li=((L["clay.Immediate"]=Bi).__name__="clay.Immediate",Bi.push=function(e){if(null==e)throw Q.thrown("Immediate callback should not be null!");Bi.immediateCallbacksLen<Bi.immediateCallbacksCapacity?(Bi.immediateCallbacks[Bi.immediateCallbacksLen]=e,Bi.immediateCallbacksLen++):(Bi.immediateCallbacks[Bi.immediateCallbacksLen++]=e,Bi.immediateCallbacksCapacity++)},Bi.flush=function(){for(var e=!1;0<Bi.immediateCallbacksLen;){for(var e=!0,n=f.pool(Bi.immediateCallbacksLen),t=n.get(),i=Bi.immediateCallbacksLen,l=Bi.immediateCallbacksLen=0,s=i;l<s;){var r=l++;t.vector[r]=Bi.immediateCallbacks[r],Bi.immediateCallbacks[r]=null}for(var a=0,h=i;a<h;){var u=a++;(0,t.vector[u])()}n.release(t)}return e},function(e){this.app=e,this.modState=new Hi,this.modState.none=!0}),O=((L["clay.Input"]=Li).__name__="clay.Input",Li.prototype={app:null,modState:null,init:function(){},shutdown:function(){},emitKeyDown:function(e,n,t,i,l,s){this.app.events.keyDown(e,n,t,i,l,s)},emitKeyUp:function(e,n,t,i,l,s){this.app.events.keyUp(e,n,t,i,l,s)},emitText:function(e,n,t,i,l,s){this.app.events.text(e,n,t,i,l,s)},emitMouseMove:function(e,n,t,i,l,s){this.app.events.mouseMove(e,n,t,i,l,s)},emitMouseDown:function(e,n,t,i,l){this.app.events.mouseDown(e,n,t,i,l)},emitMouseUp:function(e,n,t,i,l){this.app.events.mouseUp(e,n,t,i,l)},emitMouseWheel:function(e,n,t,i){this.app.events.mouseWheel(e,n,t,i)},emitTouchDown:function(e,n,t,i,l,s){this.app.events.touchDown(e,n,t,i,l,s)},emitTouchUp:function(e,n,t,i,l,s){this.app.events.touchUp(e,n,t,i,l,s)},emitTouchMove:function(e,n,t,i,l,s){this.app.events.touchMove(e,n,t,i,l,s)},emitGamepadAxis:function(e,n,t,i){this.app.events.gamepadAxis(e,n,t,i)},emitGamepadDown:function(e,n,t,i){this.app.events.gamepadDown(e,n,t,i)},emitGamepadUp:function(e,n,t,i){this.app.events.gamepadUp(e,n,t,i)},emitGamepadGyro:function(e,n,t,i,l){this.app.events.gamepadGyro(e,n,t,i,l)},emitGamepadDevice:function(e,n,t,i){this.app.events.gamepadDevice(e,n,t,i)},__class__:Li},{}),Ni=(O.$name=function(e){if(0!=(e&U.MASK))return U.$name(e&~U.MASK);switch(e){case 8:return U.$name(42);case 9:return U.$name(43);case 13:return U.$name(40);case 27:return U.$name(41);case 32:return U.$name(44);case 97:return U.$name(4);case 98:return U.$name(5);case 99:return U.$name(6);case 100:return U.$name(7);case 101:return U.$name(8);case 102:return U.$name(9);case 103:return U.$name(10);case 104:return U.$name(11);case 105:return U.$name(12);case 106:return U.$name(13);case 107:return U.$name(14);case 108:return U.$name(15);case 109:return U.$name(16);case 110:return U.$name(17);case 111:return U.$name(18);case 112:return U.$name(19);case 113:return U.$name(20);case 114:return U.$name(21);case 115:return U.$name(22);case 116:return U.$name(23);case 117:return U.$name(24);case 118:return U.$name(25);case 119:return U.$name(26);case 120:return U.$name(27);case 121:return U.$name(28);case 122:return U.$name(29);case 127:return U.$name(76);default:return String.fromCodePoint(e)}},O.toScanCode=function(e){if(0!=(e&U.MASK))return e&~U.MASK;switch(e){case 8:return 42;case 9:return 43;case 13:return 40;case 27:return 41;case 32:return 44;case 47:return 56;case 48:return 39;case 49:return 30;case 50:return 31;case 51:return 32;case 52:return 33;case 53:return 34;case 54:return 35;case 55:return 36;case 56:return 37;case 57:return 38;case 59:return 51;case 61:return 46;case 91:return 47;case 92:return 49;case 93:return 48;case 96:return 53;case 97:return 4;case 98:return 5;case 99:return 6;case 100:return 7;case 101:return 8;case 102:return 9;case 103:return 10;case 104:return 11;case 105:return 12;case 106:return 13;case 107:return 14;case 108:return 15;case 109:return 16;case 110:return 17;case 111:return 18;case 112:return 19;case 113:return 20;case 114:return 21;case 115:return 22;case 116:return 23;case 117:return 24;case 118:return 25;case 119:return 26;case 120:return 27;case 121:return 28;case 122:return 29}return 0},O.toString=function(e){return"KeyCode("+e+" "+O.$name(e)+")"},function(){}),Wi=((L["clay.Log"]=Ni).__name__="clay.Log",Ni.debug=function(e,n){},Ni.info=function(e,n){Dl.trace("[info] "+e,n)},Ni.warning=function(e,n){Dl.trace("[warning] "+e,n)},Ni.error=function(e,n){Dl.trace("[error] "+e,n)},Ni.success=function(e,n){Dl.trace("[success] "+e,n)},(L["clay.Macros"]=w2).__name__="clay.Macros",function(){}),Gi=((L["clay.PremultiplyAlpha"]=Wi).__name__="clay.PremultiplyAlpha",Wi.premultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],l=e[t+1],s=e[t+2],r=e[t+3]/255;e[t]=i*r|0,e[t+1]=l*r|0,e[t+2]=s*r|0,t+=4}},Wi.reversePremultiplyAlpha=function(e){for(var n=e.length,t=0;t<n;){var i=e[t],l=e[t+1],s=e[t+2],r=e[t+3]/255;0<r&&(e[t]=i/r|0,e[t+1]=l/r|0,e[t+2]=s/r|0),t+=4}},function(){}),U=((L["clay.Runner"]=Gi).__name__="clay.Runner",Gi.currentIsMainThread=function(){return!0},Gi.init=function(){},Gi.tick=function(){},Gi.isEmulatingBackgroundWithMain=function(){return!0},Gi.runInMain=function(e){Bi.push(e)},Gi.runInBackground=function(e){Bi.push(e)},{}),Hi=(U.$name=function(e){var n=null;return null!=(n=0<=e&&e<U.scanCodeNames.length?U.scanCodeNames[e]:n)?n:""},U.toString=function(e){return"ScanCode("+e+" "+U.$name(e)+")"},function(){this.meta=!1,this.alt=!1,this.shift=!1,this.ctrl=!1,this.mode=!1,this.caps=!1,this.num=!1,this.rmeta=!1,this.lmeta=!1,this.ralt=!1,this.lalt=!1,this.rctrl=!1,this.lctrl=!1,this.rshift=!1,this.lshift=!1,this.none=!1}),zi=((L["clay.ModState"]=Hi).__name__="clay.ModState",Hi.prototype={none:null,lshift:null,rshift:null,lctrl:null,rctrl:null,lalt:null,ralt:null,lmeta:null,rmeta:null,num:null,caps:null,mode:null,ctrl:null,shift:null,alt:null,meta:null,toString:function(){var e='{ "ModState":true ';return this.none?e+', "none":true }':(this.lshift&&(e+=', "lshift":true'),this.rshift&&(e+=', "rshift":true'),this.lctrl&&(e+=', "lctrl":true'),this.rctrl&&(e+=', "rctrl":true'),this.lalt&&(e+=', "lalt":true'),this.ralt&&(e+=', "ralt":true'),this.lmeta&&(e+=', "lmeta":true'),this.rmeta&&(e+=', "rmeta":true'),this.num&&(e+=', "num":true'),this.caps&&(e+=', "caps":true'),this.mode&&(e+=', "mode":true'),this.ctrl&&(e+=', "ctrl":true'),this.shift&&(e+=', "shift":true'),this.alt&&(e+=', "alt":true'),this.meta&&(e+=', "meta":true'),e+"}")},__class__:Hi},(L["clay.Utils"]=F2).__name__="clay.Utils",F2.uniqueId=function(){switch(F2._nextUniqueIntCursor){case 0:F2._nextUniqueInt0=(F2._nextUniqueInt0+1)%2147483647;break;case 1:F2._nextUniqueInt1=(F2._nextUniqueInt1+1)%2147483647;break;case 2:F2._nextUniqueInt2=(F2._nextUniqueInt2+1)%2147483647;break;case 3:F2._nextUniqueInt3=(F2._nextUniqueInt3+1)%2147483647}F2._nextUniqueIntCursor=(F2._nextUniqueIntCursor+1)%4;var e,n=F2._nextUniqueInt0,t=(n=null==n?2147483646*Math.random()|0:n)%62|0,i=n/62|0;e=0<i?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(l=0<(i=n/62|0)?(s=F2.base62Id(i))+(r=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(s=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(s)))+(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(l));var l,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;l=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(s=0<(i=n/62|0)?(r=F2.base62Id(i))+(a=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(r=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(r)))+(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(s));var s,t=(n=null==(n=F2._nextUniqueInt1)?2147483646*Math.random()|0:n)%62|0;s=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(r=0<(i=n/62|0)?(a=F2.base62Id(i))+(h=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(a=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(a)))+(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(r));var r,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;r=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(a=0<(i=n/62|0)?(h=F2.base62Id(i))+(u=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(h=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(h)))+(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(a));var a,t=(n=null==(n=F2._nextUniqueInt2)?2147483646*Math.random()|0:n)%62|0;a=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(h=0<(i=n/62|0)?(u=F2.base62Id(i))+(d=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(u=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(u)))+(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(h));var h,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;h=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(u=0<(i=n/62|0)?(d=F2.base62Id(i))+(o=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(d=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(d)))+(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(u));var u,c,o,_,d,t=(n=null==(n=F2._nextUniqueInt3)?2147483646*Math.random()|0:n)%62|0;return d=e+"-"+l+"-"+s+"-"+r+"-"+a+"-"+h+"-"+(u=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(d=0<(i=n/62|0)?(o=F2.base62Id(i))+(9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(o=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(o)))+(o=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(d)))},F2.base62Id=function(e){var n,t,i=(e=null==e?2147483646*Math.random()|0:e)%62|0,e=e/62|0;return 0<e?(n=F2.base62Id(e))+(9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0)):(n=9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0),V.string(n))},(L["clay.audio.AudioDataOptions"]=G2).__name__="clay.audio.AudioDataOptions",G2.prototype={id:null,rate:null,length:null,duration:null,channels:null,bitsPerSample:null,format:null,isStream:null,__class__:G2},(L["clay.audio.AudioData"]=H2).__name__="clay.audio.AudioData",H2.prototype={app:null,id:null,rate:null,length:null,duration:null,channels:null,bitsPerSample:null,format:null,isStream:null,destroyed:null,destroy:function(){this.destroyed||(Ni.debug("Audio / destroy AudioData `"+this.id+"`",{fileName:"clay/audio/AudioData.hx",lineNumber:95,className:"clay.audio.AudioData",methodName:"destroy"}),this.destroyed=!0,this.id=null)},seek:function(e){return!1},portion:function(e,n,t,i){return i},toString:function(){var e,n='{ "AudioData":true, "id":'+this.id+', "rate":'+this.rate+', "length":'+this.length+', "channels":'+this.channels+', "format":"';if(null==this.format)e="null";else{var t=this.format;if(null==t)e=""+t;else switch(t){case 0:e="UNKNOWN";break;case 1:e="CUSTOM";break;case 2:e="OGG";break;case 3:e="WAV";break;case 4:e="PCM";break;case 5:e="MP3";break;case 6:e="FLAC";break;default:e=""+t}}return n+e+'", "isStream":'+V.string(this.isStream)+" }"},__class__:H2},(L["clay.audio.AudioInstance"]=K2).__name__="clay.audio.AudioInstance",K2.prototype={source:null,handle:null,destroyed:null,hasEnded:function(){if(this.destroyed)throw Q.thrown("Audio / Instance hasEnded queried after being destroyed");return 2==this.source.app.audio.stateOf(this.handle)},destroy:function(){if(this.destroyed)throw Q.thrown("Audio / Instance being destroyed more than once");this.source.app.audio.handleInstanceDestroyed(this.handle),this.source.instanceKilled(this),this.destroyed=!0,this.source=null,this.handle=-1},dataGet:function(e,n,t,i){if(this.destroyed)throw Q.thrown("Audio / Instance dataGet queried after being destroyed");return this.source.data.portion(e,n,t,i)},dataSeek:function(e){if(this.destroyed)throw Q.thrown("Audio / Instance dataSeek queried after being destroyed");return this.source.data.seek(e)},__class__:K2},function(e,n){this.destroyed=!1,this.streamBufferCount=2,this.streamBufferLength=176400,this.app=e,this.data=n,this.sourceId=F2.uniqueId(),Ni.debug("AudioSource / `"+this.sourceId+"` / "+this.data.id,{fileName:"clay/audio/AudioSource.hx",lineNumber:34,className:"clay.audio.AudioSource",methodName:"new"}),this.instances=[],n.duration<=0&&(n.duration=this.bytesToSeconds(n.length))}),Ki=((L["clay.audio.AudioSource"]=zi).__name__="clay.audio.AudioSource",zi.prototype={app:null,data:null,streamBufferLength:null,streamBufferCount:null,destroyed:null,sourceId:null,instances:null,instance:function(e){e=new K2(this,e);return-1==this.instances.indexOf(e)&&this.instances.push(e),e},bytesToSeconds:function(e){var n=16==this.data.bitsPerSample?2:1;return e/(this.data.rate*this.data.channels*n)},secondsToBytes:function(e){var n=16==this.data.bitsPerSample?2:1;return e*(this.data.rate*this.data.channels*n)|0},getDuration:function(){return this.data.duration},destroy:function(){if(this.destroyed)Ni.debug("AudioSource / destroying already destroyed source!",{fileName:"clay/audio/AudioSource.hx",lineNumber:85,className:"clay.audio.AudioSource",methodName:"destroy"});else{this.destroyed=!0;var e=this.instances.length,n=0;for(Ni.debug("AudioSource / destroy / "+this.sourceId+" / "+this.data.id+", stream="+V.string(this.data.isStream)+", instances="+e,{fileName:"clay/audio/AudioSource.hx",lineNumber:94,className:"clay.audio.AudioSource",methodName:"destroy"});n<e;)this.instances.pop().destroy(),++n;this.app.audio.handleSourceDestroyed(this),this.data.destroy(),this.data=null,this.instances=null,this.app=null}},instanceKilled:function(e){h.remove(this.instances,e)},__class__:zi},(L["clay.base.BaseAssets"]=N2).__name__="clay.base.BaseAssets",N2.prototype={app:null,isSynchronous:function(){return!1},fullPath:function(e){return At.isAbsolute(e)?e:At.join([this.app.io.appPath(),e])},loadImage:function(e,n,t,i){return null==t&&(t=!1),null==n&&(n=4),null!=i&&Bi.push(function(){i(null)}),null},__class__:N2},(L["clay.base.BaseAudio"]=O2).__name__="clay.base.BaseAudio",O2.prototype={app:null,isSynchronous:function(){return!1},init:function(){},ready:function(){},tick:function(e){},shutdown:function(){},loadData:function(e,n,t,i,l){return null==i&&(i=!1),null!=l&&Bi.push(function(){l(null)}),null},emitAudioEvent:function(e,n){this.app.events.audioEvent(e,n)},__class__:O2},(L["clay.base.BaseIO"]=P2).__name__="clay.base.BaseIO",P2.prototype={app:null,init:function(){},shutdown:function(){},isSynchronous:function(){return!1},appPath:function(){return null},appPathPrefs:function(){return null},loadData:function(e,n,t,i){return null==t&&(t=!1),null==n&&(n=!1),null!=i&&Bi.push(function(){i(null)}),null},__class__:P2},(L["clay.base.BaseRuntime"]=Q2).__name__="clay.base.BaseRuntime",Q2.prototype={app:null,name:null,init:function(){},shutdown:function(e){},ready:function(){},run:function(){return!0},windowDevicePixelRatio:function(){return 1},windowWidth:function(){return 0},windowHeight:function(){return 0},__class__:Q2},function(e,n,t,i){this.a=1,this.b=0,this.g=0,this.r=0,null!=e&&(this.r=e),null!=n&&(this.g=n),null!=t&&(this.b=t),null!=i&&(this.a=i)}),Xi=((L["clay.graphics.Color"]=Ki).__name__="clay.graphics.Color",Ki.prototype={r:null,g:null,b:null,a:null,__class__:Ki},function(){this.wrapT=33071,this.wrapS=33071,this.filterMag=9729,this.filterMin=9729,this.pixels=null,this.heightActual=-1,this.widthActual=-1,this.height=-1,this.width=-1,this.dataType=5121,this.type=3553,this.format=6408,this.compressed=!1,this.textureId=null,Ea.call(this),this.index=Xi._nextIndex++}),Yi=((L["clay.graphics.Texture"]=Xi).__name__="clay.graphics.Texture",Xi.fromImage=function(e,n){null==n&&(n=!1);var t=new Xi;if(t.premultiplyAlpha=n,4!=e.bitsPerPixel)throw Q.thrown("Image must have 4 bits per pixels (RGBA format)");return t.width=e.width,t.height=e.height,t.widthActual=e.widthActual,t.heightActual=e.heightActual,t.pixels=e.pixels,t},Xi.__super__=Ea,Xi.prototype=$extend(Ea.prototype,{index:null,textureId:null,premultiplyAlpha:null,compressed:null,format:null,type:null,dataType:null,width:null,height:null,widthActual:null,heightActual:null,pixels:null,filterMin:null,set_filterMin:function(e){return null!=this.textureId&&(this.bind(),Y.gl.texParameteri(3553,10241,e)),this.filterMin=e},filterMag:null,set_filterMag:function(e){return null!=this.textureId&&(this.bind(),Y.gl.texParameteri(3553,10240,e)),this.filterMag=e},wrapS:null,set_wrapS:function(e){return null!=this.textureId&&(this.bind(),Y.gl.texParameteri(3553,10242,e)),this.wrapS=e},wrapT:null,set_wrapT:function(e){return null!=this.textureId&&(this.bind(),Y.gl.texParameteri(3553,10243,e)),this.wrapT=e},init:function(){if(this.textureId=Y.gl.createTexture(),0<this.width&&this.widthActual<=0&&(this.widthActual=this.width),0<this.height&&this.heightActual<=0&&(this.heightActual=this.height),this.bind(),Y.gl.texParameteri(3553,10241,this.filterMin),Y.gl.texParameteri(3553,10240,this.filterMag),Y.gl.texParameteri(3553,10243,this.wrapT),Y.gl.texParameteri(3553,10242,this.wrapS),null!=this.pixels){if(this.width<=0||this.height<=0)throw Q.thrown("Provided texture pixels with invalid size (width="+this.width+" height="+this.height+")");this.submit(this.pixels)}},destroy:function(){if(null!=this.textureId){for(var e=this.textureId,n=(Y.gl.deleteTexture(e),0),t=T._boundTexture2D.length;n<t;){var i=n++;T._boundTexture2D[i]==e&&(T._boundTexture2D[i]=null)}this.textureId=null}},bind:function(e){if(-1!=(e=null==e?0:e)&&T._activeTextureSlot!=e){for(T._activeTextureSlot=e;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984+e)}3553==this.type&&(e=this.textureId,T._boundTexture2D[T._activeTextureSlot]!=e)&&(T._boundTexture2D[T._activeTextureSlot]=e,Y.gl.bindTexture(3553,e))},submit:function(e){var n,t,i,l=Y.gl.getParameter(3379),l=l=l<=0?4096:l;if(null==(e=null==e?this.pixels:e))throw Q.thrown("Cannot submit texture pixels: pixels is null");if(this.widthActual>l)throw Q.thrown("Texture actual width bigger than maximum hardware size (width="+this.widthActual+" max="+l+")");if(this.heightActual>l)throw Q.thrown("Texture actual height bigger than maximum hardware size (height="+this.heightActual+" max="+l+")");this.bind(),3553==this.type&&(this.compressed?(n=this.format,t=this.widthActual,i=this.heightActual,Y.gl.pixelStorei(37441,this.premultiplyAlpha?1:0),Y.gl.compressedTexImage2D(3553,0,n,t,i,0,e)):(n=this.format,t=this.widthActual,i=this.heightActual,l=this.dataType,Y.gl.pixelStorei(37441,this.premultiplyAlpha?1:0),Y.gl.texImage2D(3553,0,n,t,i,0,n,l,e)))},fetch:function(e,n,t,i,l){return null==t&&(t=0),null==n&&(n=0),(i=null==i?-1:i)<=0&&(i=this.width),(l=null==l?-1:l)<=0&&(l=this.height),this.bind(),3553==this.type&&T.fetchTexture2dPixels(e,n,t,i,l),e},__class__:Xi,__properties__:{set_wrapT:"set_wrapT",set_wrapS:"set_wrapS",set_filterMag:"set_filterMag",set_filterMin:"set_filterMin"}}),function(){this.antialiasing=0,this.stencil=!1,this.depth=!1,Xi.call(this)}),Vi=((L["clay.graphics.RenderTexture"]=Yi).__name__="clay.graphics.RenderTexture",Yi.__super__=Xi,Yi.prototype=$extend(Xi.prototype,{renderTarget:null,depth:null,stencil:null,antialiasing:null,init:function(){Xi.prototype.init.call(this);var e=Y.gl.getParameter(3379),e=e=e<=0?4096:e;if(this.widthActual>e)throw Q.thrown("RenderTexture actual width bigger than maximum hardware size (width="+this.widthActual+" max="+e+")");if(this.heightActual>e)throw Q.thrown("RenderTexture actual height bigger than maximum hardware size (height="+this.heightActual+" max="+e+")");this.bind(),this.renderTarget=T.createRenderTarget(this.textureId,this.width,this.height,this.depth,this.stencil,this.antialiasing,0,this.format,this.dataType)},destroy:function(){Xi.prototype.destroy.call(this),null!=this.renderTarget&&(T.deleteRenderTarget(this.renderTarget),this.renderTarget=null)},__class__:Yi}),(L["clay.graphics.TextureAndSlot"]=Y2).__name__="clay.graphics.TextureAndSlot",Y2.prototype={texture:null,slot:null,__class__:Y2},function(e){this.dirtyTextures=[],this.dirtyColors=[],this.dirtyMatrix4s=[],this.dirtyVector4s=[],this.dirtyVector3s=[],this.dirtyVector2s=[],this.dirtyFloatArrays=[],this.dirtyFloats=[],this.dirtyIntArrays=[],this.dirtyInts=[],this.textures=new z,this.colors=new z,this.matrix4s=new z,this.vector4s=new z,this.vector3s=new z,this.vector2s=new z,this.floatArrays=new z,this.floats=new z,this.intArrays=new z,this.ints=new z,this.gpuShader=e}),qi=((L["clay.graphics.Uniforms"]=Vi).__name__="clay.graphics.Uniforms",Vi.prototype={ints:null,intArrays:null,floats:null,floatArrays:null,vector2s:null,vector3s:null,vector4s:null,matrix4s:null,colors:null,textures:null,dirtyInts:null,dirtyIntArrays:null,dirtyFloats:null,dirtyFloatArrays:null,dirtyVector2s:null,dirtyVector3s:null,dirtyVector4s:null,dirtyMatrix4s:null,dirtyColors:null,dirtyTextures:null,gpuShader:null,setInt:function(e,n){Y.gl.getUniformLocation(this.gpuShader.program,e);this.ints.h[e]=n,this.dirtyInts.push(e)},setIntArray:function(e,n){Y.gl.getUniformLocation(this.gpuShader.program,e);this.intArrays.h[e]=n,this.dirtyIntArrays.push(e)},setFloat:function(e,n){Y.gl.getUniformLocation(this.gpuShader.program,e);this.floats.h[e]=n,this.dirtyFloats.push(e)},setFloatArray:function(e,n){Y.gl.getUniformLocation(this.gpuShader.program,e);this.floatArrays.h[e]=n,this.dirtyFloatArrays.push(e)},setVector2:function(e,n,t){Y.gl.getUniformLocation(this.gpuShader.program,e);var i=this.vector2s.h[e];null!=i?(i.x=n,i.y=t):(i=this.vector2s,n=new qi(n,t),i.h[e]=n),this.dirtyVector2s.push(e)},setVector3:function(e,n,t,i){Y.gl.getUniformLocation(this.gpuShader.program,e);var l=this.vector3s.h[e];null!=l?(l.x=n,l.y=t,l.z=i):(l=this.vector3s,n=new ji(n,t,i),l.h[e]=n),this.dirtyVector3s.push(e)},setVector4:function(e,n,t,i,l){Y.gl.getUniformLocation(this.gpuShader.program,e);var s=this.vector4s.h[e];null!=s?(s.x=n,s.y=t,s.z=i,s.w=l):(s=this.vector4s,n=new Qi(n,t,i,l),s.h[e]=n),this.dirtyVector4s.push(e)},setMatrix4:function(e,n){Y.gl.getUniformLocation(this.gpuShader.program,e);var t=this.matrix4s.h[e];null==t&&(t=new Float32Array(16),this.matrix4s.h[e]=t),t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this.dirtyMatrix4s.push(e)},setColor:function(e,n,t,i,l){Y.gl.getUniformLocation(this.gpuShader.program,e);var s=this.colors.h[e];null!=s?(s.r=n,s.g=t,s.b=i,s.a=l):(s=this.colors,n=new Ki(n,t,i,l),s.h[e]=n),this.dirtyColors.push(e)},setTexture:function(e,n,t){Y.gl.getUniformLocation(this.gpuShader.program,e);var i=this.textures.h[e];null!=i?(i.texture=t,i.slot=n):(i=this.textures,t=new Y2(t,n),i.h[e]=t),-1==this.dirtyTextures.indexOf(e)&&this.dirtyTextures.push(e)},apply:function(){var e=this.gpuShader;for(T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program));0<this.dirtyInts.length;){var n=this.dirtyInts.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),e=this.gpuShader,i=this.ints.h[n];T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1i(t,i)}for(;0<this.dirtyIntArrays.length;){n=this.dirtyIntArrays.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),e=this.gpuShader,i=this.intArrays.h[n];T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1iv(t,i)}for(;0<this.dirtyFloats.length;){n=this.dirtyFloats.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),e=this.gpuShader,i=this.floats.h[n];T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1f(t,i)}for(;0<this.dirtyFloatArrays.length;){n=this.dirtyFloatArrays.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),e=this.gpuShader,i=this.floatArrays.h[n];T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1fv(t,i)}for(;0<this.dirtyVector2s.length;){var n=this.dirtyVector2s.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),i=this.vector2s.h[n],e=this.gpuShader,l=i.x,s=i.y;T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform2f(t,l,s)}for(;0<this.dirtyVector3s.length;){var n=this.dirtyVector3s.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),i=this.vector3s.h[n],e=this.gpuShader,l=i.x,s=i.y,r=i.z;T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform3f(t,l,s,r)}for(;0<this.dirtyVector4s.length;){var n=this.dirtyVector4s.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),i=this.vector4s.h[n],e=this.gpuShader,l=i.x,s=i.y,r=i.z,a=i.w;T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform4f(t,l,s,r,a)}for(;0<this.dirtyMatrix4s.length;){n=this.dirtyMatrix4s.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),e=this.gpuShader,i=this.matrix4s.h[n];T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniformMatrix4fv(t,!1,i)}for(;0<this.dirtyColors.length;){var n=this.dirtyColors.pop(),t=Y.gl.getUniformLocation(this.gpuShader.program,n),i=this.colors.h[n],e=this.gpuShader,h=i.r,u=i.g,c=i.b,o=i.a;T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform4f(t,h,u,c,o)}for(var _=0,d=this.dirtyTextures.length;_<d;){var b=_++,n=this.dirtyTextures[b],t=Y.gl.getUniformLocation(this.gpuShader.program,n);3553==(i=this.textures.h[n]).texture.type&&T.setTexture2dUniform(this.gpuShader,t,i.slot,i.texture.textureId)}},clone:function(){return new Vi(this.gpuShader)},__class__:Vi},function(e,n){this.y=0,this.x=0,null!=e&&(this.x=e),null!=n&&(this.y=n)}),ji=((L["clay.graphics.Vector2"]=qi).__name__="clay.graphics.Vector2",qi.prototype={x:null,y:null,__class__:qi},function(e,n,t){this.z=0,this.y=0,this.x=0,null!=e&&(this.x=e),null!=n&&(this.y=n),null!=t&&(this.z=t)}),Qi=((L["clay.graphics.Vector3"]=ji).__name__="clay.graphics.Vector3",ji.prototype={x:null,y:null,z:null,__class__:ji},function(e,n,t,i){this.w=0,this.z=0,this.y=0,this.x=0,null!=e&&(this.x=e),null!=n&&(this.y=n),null!=t&&(this.z=t),null!=i&&(this.w=i)}),T=((L["clay.graphics.Vector4"]=Qi).__name__="clay.graphics.Vector4",Qi.prototype={x:null,y:null,z:null,w:null,__class__:Qi},function(){}),$i=((L["clay.opengl.GLGraphics"]=T).__name__="clay.opengl.GLGraphics",T.setup=function(){T._defaultFramebuffer=Y.gl.getParameter(36006),T._defaultRenderbuffer=Y.gl.getParameter(36007),T._didFetchDefaultBuffers=!0},T.clear=function(e,n,t,i,l){null==l&&(l=!0),Y.gl.clearColor(e,n,t,i),l&&0<C.app.config.render.depth?(Y.gl.clear(16640),Y.gl.clearDepth(1)):Y.gl.clear(16384)},T.createTextureId=function(){return Y.gl.createTexture()},T.setActiveTexture=function(e){if(T._activeTextureSlot!=e){for(T._activeTextureSlot=e;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984+e)}},T.deleteTexture=function(e){Y.gl.deleteTexture(e);for(var n=0,t=T._boundTexture2D.length;n<t;){var i=n++;T._boundTexture2D[i]==e&&(T._boundTexture2D[i]=null)}},T.setViewport=function(e,n,t,i){Y.gl.viewport(e,n,t,i)},T.bindTexture2d=function(e){T._boundTexture2D[T._activeTextureSlot]!=e&&(T._boundTexture2D[T._activeTextureSlot]=e,Y.gl.bindTexture(3553,e))},T.maxTextureSize=function(){var e=Y.gl.getParameter(3379);return e=e<=0?4096:e},T.needsPreprocessedPremultipliedAlpha=function(){return!1},T.submitCompressedTexture2dPixels=function(e,n,t,i,l,s){Y.gl.pixelStorei(37441,s?1:0),Y.gl.compressedTexImage2D(3553,e,n,t,i,0,l)},T.submitTexture2dPixels=function(e,n,t,i,l,s,r){Y.gl.pixelStorei(37441,r?1:0),Y.gl.texImage2D(3553,e,n,t,i,0,n,l,s)},T.fetchTexture2dPixels=function(e,n,t,i,l){if(null==e)throw Q.thrown("Texture fetch requires a valid buffer to store the pixels.");var s=T._boundTexture2D[T._activeTextureSlot],r=i*l*4;if(e.length<r)throw Q.thrown("Texture fetch requires at least "+r+" (w * h * 4) bytes for the pixels, you have "+e.length+"!");r=Y.gl.createFramebuffer();if(Y.gl.bindFramebuffer(36160,r),Y.gl.framebufferTexture2D(36160,36064,3553,s,0),36053!=Y.gl.checkFramebufferStatus(36160))throw Q.thrown("Incomplete framebuffer");Y.gl.readPixels(n,t,i,l,6408,5121,e),Y.gl.bindFramebuffer(36160,null),Y.gl.deleteFramebuffer(r)},T.createFramebuffer=function(){return Y.gl.createFramebuffer()},T.bindFramebuffer=function(e){T._boundFramebuffer!=e&&(null==(T._boundFramebuffer=e)&&(e=T._defaultFramebuffer),Y.gl.bindFramebuffer(36160,e))},T.createRenderbuffer=function(){return Y.gl.createRenderbuffer()},T.bindRenderbuffer=function(e){T._boundRenderbuffer!=e&&(null==(T._boundRenderbuffer=e)&&(e=T._defaultRenderbuffer),Y.gl.bindRenderbuffer(36161,e))},T.setTexture2dMinFilter=function(e){Y.gl.texParameteri(3553,10241,e)},T.setTexture2dMagFilter=function(e){Y.gl.texParameteri(3553,10240,e)},T.setTexture2dWrapS=function(e){Y.gl.texParameteri(3553,10242,e)},T.setTexture2dWrapT=function(e){Y.gl.texParameteri(3553,10243,e)},T.configureRenderTargetBuffersStorage=function(e,n,t,i,l,s,r){1<r?(T.bindRenderbuffer(e.renderbuffer),Y.gl.renderbufferStorageMultisample(36161,r,32856,t,i),(l||s)&&(T.bindRenderbuffer(e.msDepthStencilRenderbuffer),s?Y.gl.renderbufferStorageMultisample(36161,r,35056,t,i):Y.gl.renderbufferStorageMultisample(36161,r,33189,t,i)),T.bindFramebuffer(e.framebuffer),Y.gl.framebufferRenderbuffer(36160,36064,36161,e.renderbuffer),(l||s)&&(s?Y.gl.framebufferRenderbuffer(36160,33306,36161,e.msDepthStencilRenderbuffer):Y.gl.framebufferRenderbuffer(36160,36096,36161,e.msDepthStencilRenderbuffer)),T.bindRenderbuffer(e.msResolveColorRenderbuffer),Y.gl.renderbufferStorage(36161,32856,t,i),T.bindFramebuffer(e.msResolveFramebuffer),Y.gl.framebufferTexture2D(36160,36064,3553,n,0)):(T.bindRenderbuffer(e.renderbuffer),s?Y.gl.renderbufferStorage(36161,34041,t,i):l?Y.gl.renderbufferStorage(36161,33189,t,i):Y.gl.renderbufferStorage(36161,6408,t,i),T.bindFramebuffer(e.framebuffer),Y.gl.framebufferTexture2D(36160,36064,3553,n,0),(l||s)&&(s?Y.gl.framebufferRenderbuffer(36160,33306,36161,e.renderbuffer):Y.gl.framebufferRenderbuffer(36160,36096,36161,e.renderbuffer)));var a=Y.gl.checkFramebufferStatus(36160);switch(a){case 36053:break;case 36054:throw Q.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case 36055:throw Q.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case 36057:throw Q.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case 36059:throw Q.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER");case 36060:throw Q.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_READ_BUFFER");case 36061:throw Q.thrown("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");case 36182:throw Q.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");default:throw Q.thrown("Incomplete framebuffer: "+a)}T.bindFramebuffer(null),T.bindRenderbuffer(null)},T.blitRenderTargetBuffers=function(e,n,t){Y.gl.bindFramebuffer(36008,e.framebuffer),Y.gl.bindFramebuffer(36009,e.msResolveFramebuffer),Y.gl.clearBufferfv(6144,0,T.clearBufferForBlitValues,0),Y.gl.blitFramebuffer(0,0,n,t,0,0,n,t,16384,9728),Y.gl.bindFramebuffer(36008,null),Y.gl.bindFramebuffer(36009,null)},T.createRenderTarget=function(e,n,t,i,l,s,r,a,h){var u=new $i;return Y.gl.texImage2D(3553,r,a,n,t,0,a,h,null),u.framebuffer=Y.gl.createFramebuffer(),u.renderbuffer=Y.gl.createRenderbuffer(),1<s?(u.msResolveFramebuffer=Y.gl.createFramebuffer(),u.msResolveColorRenderbuffer=Y.gl.createRenderbuffer(),u.msDepthStencilRenderbuffer=i||l?Y.gl.createRenderbuffer():null):(u.msResolveFramebuffer=null,u.msResolveColorRenderbuffer=null,u.msDepthStencilRenderbuffer=null),T.configureRenderTargetBuffersStorage(u,e,n,t,i,l,s),u},T.deleteRenderTarget=function(e){null!=e.framebuffer&&(T._boundFramebuffer==e.framebuffer&&(T._boundFramebuffer=null),Y.gl.deleteFramebuffer(e.framebuffer),e.framebuffer=null),null!=e.renderbuffer&&(T._boundRenderbuffer==e.renderbuffer&&(T._boundRenderbuffer=null),Y.gl.deleteRenderbuffer(e.renderbuffer),e.renderbuffer=null),null!=e.msDepthStencilRenderbuffer&&(T._boundRenderbuffer==e.msDepthStencilRenderbuffer&&(T._boundRenderbuffer=null),Y.gl.deleteRenderbuffer(e.msDepthStencilRenderbuffer),e.msDepthStencilRenderbuffer=null),null!=e.msResolveColorRenderbuffer&&(T._boundRenderbuffer==e.msResolveColorRenderbuffer&&(T._boundRenderbuffer=null),Y.gl.deleteRenderbuffer(e.msResolveColorRenderbuffer),e.msResolveColorRenderbuffer=null),null!=e.msResolveFramebuffer&&(T._boundFramebuffer==e.msResolveFramebuffer&&(T._boundFramebuffer=null),Y.gl.deleteFramebuffer(e.msResolveFramebuffer),e.msResolveFramebuffer=null)},T.setRenderTarget=function(e){null!=e?(T.bindFramebuffer(e.framebuffer),T.bindRenderbuffer(e.renderbuffer)):(T.bindFramebuffer(null),T.bindRenderbuffer(null))},T.enableBlending=function(){Y.gl.enable(3042)},T.disableBlending=function(){Y.gl.disable(3042)},T.createShader=function(e,n,t,i){if(null==e)throw Q.thrown("Cannot create shader: vertSource is null!");if(null==n)throw Q.thrown("Cannot create shader: fragSource is null!");var l=new Zi;return l.vertShader=T.compileGLShader(35633,e),null!=l.vertShader&&(l.fragShader=T.compileGLShader(35632,n),null!=l.fragShader)&&T.linkShader(l,t)?(null!=i&&T.configureShaderTextureSlots(l,i),l):(T.deleteShader(l),null)},T.linkShader=function(e,n){var t=Y.gl.createProgram();if(Y.gl.attachShader(t,e.vertShader),Y.gl.attachShader(t,e.fragShader),null!=n)for(var i=0,l=n.length;i<l;){var s=i++;Y.gl.bindAttribLocation(t,s,n[s])}if(Y.gl.linkProgram(t),0!=Y.gl.getProgramParameter(t,35714))return e.program=t,!0;Ni.error("\tFailed to link shader program:",{fileName:"clay/opengl/GLGraphics.hx",lineNumber:684,className:"clay.opengl.GLGraphics",methodName:"linkShader"});for(var i=[],l=0,r=h=Y.gl.getProgramInfoLog(t).split("\n");l<r.length;){var a=r[l];++l,""!=B.trim(a)&&i.push(a)}for(var h=i,u=new Array(h.length),i=0,l=h.length;i<l;)u[s=i++]="\t\t"+B.trim(h[s]);return Ni.error((h=u).join("\n"),{fileName:"clay/opengl/GLGraphics.hx",lineNumber:685,className:"clay.opengl.GLGraphics",methodName:"linkShader"}),Y.gl.deleteProgram(t),!1},T.configureShaderTextureSlots=function(e,n){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program));for(var t=0,i=n.length;t<i;){var l=t++,s=n[l],r=Y.gl.getUniformLocation(e.program,s);null!=r&&(Y.gl.uniform1i(r,l),e.textures[l]=s)}},T.useShader=function(e){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program))},T.deleteShader=function(e){T._boundProgram==e.program&&(T._boundProgram=null),null!=e.vertShader&&(Y.gl.deleteShader(e.vertShader),e.vertShader=null),null!=e.fragShader&&(Y.gl.deleteShader(e.fragShader),e.fragShader=null),null!=e.program&&(Y.gl.deleteProgram(e.program),e.program=null)},T.compileGLShader=function(e,n){var t,i=Y.gl.createShader(e),n=(Y.gl.shaderSource(i,n),Y.gl.compileShader(i),Y.gl.getShaderInfoLog(i)),l="";if(null!=n&&0<n.length){l+="\n\t// start -- ("+(35632==e?"frag":"vert")+") compile log --\n";for(var s=[],r=0,a=c=n.split("\n");r<a.length;){var h=a[r];++r,""!=B.trim(h)&&s.push(h)}c=s;for(var u=new Array(c.length),s=0,r=c.length;s<r;)u[o=s++]="\t\t"+B.trim(c[o]);l=l+(c=u).join("\n")+"\n\t// end --\n"}if(0==Y.gl.getShaderParameter(i,35713)){if(Ni.error("GL / Failed to compile shader:",{fileName:"clay/opengl/GLGraphics.hx",lineNumber:772,className:"clay.opengl.GLGraphics",methodName:"compileGLShader"}),0==l.length){for(var c,s=[],r=0,a=c=Y.gl.getShaderInfoLog(i).split("\n");r<a.length;){h=a[r];++r,""!=B.trim(h)&&s.push(h)}c=s;for(var o,u=new Array(c.length),s=0,r=c.length;s<r;)u[o=s++]="\t\t"+B.trim(c[o]);t=(c=u).join("\n")}else t=l;Ni.error(t,{fileName:"clay/opengl/GLGraphics.hx",lineNumber:773,className:"clay.opengl.GLGraphics",methodName:"compileGLShader"}),Y.gl.deleteShader(i),i=null}return i},T.getUniformLocation=function(e,n){return Y.gl.getUniformLocation(e.program,n)},T.setIntUniform=function(e,n,t){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1i(n,t)},T.setIntArrayUniform=function(e,n,t){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1iv(n,t)},T.setFloatUniform=function(e,n,t){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1f(n,t)},T.setFloatArrayUniform=function(e,n,t){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1fv(n,t)},T.setVector2Uniform=function(e,n,t,i){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform2f(n,t,i)},T.setVector3Uniform=function(e,n,t,i,l){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform3f(n,t,i,l)},T.setVector4Uniform=function(e,n,t,i,l,s){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform4f(n,t,i,l,s)},T.setColorUniform=function(e,n,t,i,l,s){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform4f(n,t,i,l,s)},T.setMatrix4Uniform=function(e,n,t){T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniformMatrix4fv(n,!1,t)},T.setTexture2dUniform=function(e,n,t,i){if(T._boundProgram!=e.program&&(T._boundProgram=e.program,Y.gl.useProgram(e.program)),Y.gl.uniform1i(n,t),T._activeTextureSlot!=t){for(T._activeTextureSlot=t;T._boundTexture2D.length<=T._activeTextureSlot;)T._boundTexture2D.push(null);Y.gl.activeTexture(33984+t)}T._boundTexture2D[T._activeTextureSlot]!=i&&(T._boundTexture2D[T._activeTextureSlot]=i,Y.gl.bindTexture(3553,i))},T.setBlendFuncSeparate=function(e,n,t,i){Y.gl.blendFuncSeparate(e,n,t,i)},T.ensureNoError=function(){var e=Y.gl.getError();if(0!=e)throw Q.thrown("Failed with GL error: "+e)},function(){}),Zi=((L["clay.opengl.GLGraphics_RenderTarget"]=$i).__name__="clay.opengl.GLGraphics_RenderTarget",$i.prototype={framebuffer:null,renderbuffer:null,msResolveFramebuffer:null,msResolveColorRenderbuffer:null,msDepthStencilRenderbuffer:null,__class__:$i},function(){this.textures=[]}),Y=((L["clay.opengl.GLGraphics_GpuShader"]=Zi).__name__="clay.opengl.GLGraphics_GpuShader",Zi.prototype={vertShader:null,fragShader:null,program:null,textures:null,__class__:Zi},function(){}),Ji=((L["clay.opengl.web.GL"]=Y).__name__="clay.opengl.web.GL",Y.__properties__={get_version:"get_version"},Y.versionString=function(){return"/ "+Y.gl.getParameter(7938)+" / "+Y.gl.getParameter(35724)+" / "+Y.gl.getParameter(7937)+" / "+Y.gl.getParameter(7936)+" /"},Y.activeTexture=function(e){Y.gl.activeTexture(e)},Y.attachShader=function(e,n){Y.gl.attachShader(e,n)},Y.bindAttribLocation=function(e,n,t){Y.gl.bindAttribLocation(e,n,t)},Y.bindBuffer=function(e,n){Y.gl.bindBuffer(e,n)},Y.bindFramebuffer=function(e,n){Y.gl.bindFramebuffer(e,n)},Y.bindRenderbuffer=function(e,n){Y.gl.bindRenderbuffer(e,n)},Y.bindTexture=function(e,n){Y.gl.bindTexture(e,n)},Y.blendColor=function(e,n,t,i){Y.gl.blendColor(e,n,t,i)},Y.blendEquation=function(e){Y.gl.blendEquation(e)},Y.blendEquationSeparate=function(e,n){Y.gl.blendEquationSeparate(e,n)},Y.blendFunc=function(e,n){Y.gl.blendFunc(e,n)},Y.blendFuncSeparate=function(e,n,t,i){Y.gl.blendFuncSeparate(e,n,t,i)},Y.bufferData=function(e,n,t){Y.gl.bufferData(e,n,t)},Y.bufferSubData=function(e,n,t){Y.gl.bufferSubData(e,n,t)},Y.checkFramebufferStatus=function(e){return Y.gl.checkFramebufferStatus(e)},Y.clear=function(e){Y.gl.clear(e)},Y.clearColor=function(e,n,t,i){Y.gl.clearColor(e,n,t,i)},Y.clearDepth=function(e){Y.gl.clearDepth(e)},Y.clearStencil=function(e){Y.gl.clearStencil(e)},Y.colorMask=function(e,n,t,i){Y.gl.colorMask(e,n,t,i)},Y.compileShader=function(e){Y.gl.compileShader(e)},Y.compressedTexImage2D=function(e,n,t,i,l,s,r){Y.gl.compressedTexImage2D(e,n,t,i,l,s,r)},Y.compressedTexSubImage2D=function(e,n,t,i,l,s,r,a){Y.gl.compressedTexSubImage2D(e,n,t,i,l,s,r,a)},Y.copyTexImage2D=function(e,n,t,i,l,s,r,a){Y.gl.copyTexImage2D(e,n,t,i,l,s,r,a)},Y.copyTexSubImage2D=function(e,n,t,i,l,s,r,a){Y.gl.copyTexSubImage2D(e,n,t,i,l,s,r,a)},Y.createBuffer=function(){return Y.gl.createBuffer()},Y.createFramebuffer=function(){return Y.gl.createFramebuffer()},Y.createProgram=function(){return Y.gl.createProgram()},Y.createRenderbuffer=function(){return Y.gl.createRenderbuffer()},Y.createShader=function(e){return Y.gl.createShader(e)},Y.createTexture=function(){return Y.gl.createTexture()},Y.cullFace=function(e){Y.gl.cullFace(e)},Y.deleteBuffer=function(e){Y.gl.deleteBuffer(e)},Y.deleteFramebuffer=function(e){Y.gl.deleteFramebuffer(e)},Y.deleteProgram=function(e){Y.gl.deleteProgram(e)},Y.deleteRenderbuffer=function(e){Y.gl.deleteRenderbuffer(e)},Y.deleteShader=function(e){Y.gl.deleteShader(e)},Y.deleteTexture=function(e){Y.gl.deleteTexture(e)},Y.depthFunc=function(e){Y.gl.depthFunc(e)},Y.depthMask=function(e){Y.gl.depthMask(e)},Y.depthRange=function(e,n){Y.gl.depthRange(e,n)},Y.detachShader=function(e,n){Y.gl.detachShader(e,n)},Y.disable=function(e){Y.gl.disable(e)},Y.disableVertexAttribArray=function(e){Y.gl.disableVertexAttribArray(e)},Y.drawArrays=function(e,n,t){Y.gl.drawArrays(e,n,t)},Y.drawElements=function(e,n,t,i){Y.gl.drawElements(e,n,t,i)},Y.enable=function(e){Y.gl.enable(e)},Y.enableVertexAttribArray=function(e){Y.gl.enableVertexAttribArray(e)},Y.finish=function(){Y.gl.finish()},Y.flush=function(){Y.gl.flush()},Y.framebufferRenderbuffer=function(e,n,t,i){Y.gl.framebufferRenderbuffer(e,n,t,i)},Y.framebufferTexture2D=function(e,n,t,i,l){Y.gl.framebufferTexture2D(e,n,t,i,l)},Y.frontFace=function(e){Y.gl.frontFace(e)},Y.generateMipmap=function(e){Y.gl.generateMipmap(e)},Y.getActiveAttrib=function(e,n){return Y.gl.getActiveAttrib(e,n)},Y.getActiveUniform=function(e,n){return Y.gl.getActiveUniform(e,n)},Y.getAttachedShaders=function(e){return Y.gl.getAttachedShaders(e)},Y.getAttribLocation=function(e,n){return Y.gl.getAttribLocation(e,n)},Y.getBufferParameter=function(e,n){return Y.gl.getBufferParameter(e,n)},Y.getContextAttributes=function(){return Y.gl.getContextAttributes()},Y.getError=function(){return Y.gl.getError()},Y.getExtension=function(e){return Y.gl.getExtension(e)},Y.getFramebufferAttachmentParameter=function(e,n,t){return Y.gl.getFramebufferAttachmentParameter(e,n,t)},Y.getParameter=function(e){return Y.gl.getParameter(e)},Y.getProgramInfoLog=function(e){return Y.gl.getProgramInfoLog(e)},Y.getProgramParameter=function(e,n){return Y.gl.getProgramParameter(e,n)},Y.getRenderbufferParameter=function(e,n){return Y.gl.getRenderbufferParameter(e,n)},Y.getShaderInfoLog=function(e){return Y.gl.getShaderInfoLog(e)},Y.getShaderParameter=function(e,n){return Y.gl.getShaderParameter(e,n)},Y.getShaderPrecisionFormat=function(e,n){return Y.gl.getShaderPrecisionFormat(e,n)},Y.getShaderSource=function(e){return Y.gl.getShaderSource(e)},Y.getSupportedExtensions=function(){return Y.gl.getSupportedExtensions()},Y.getTexParameter=function(e,n){return Y.gl.getTexParameter(e,n)},Y.getUniform=function(e,n){return Y.gl.getUniform(e,n)},Y.getUniformLocation=function(e,n){return Y.gl.getUniformLocation(e,n)},Y.getVertexAttrib=function(e,n){return Y.gl.getVertexAttrib(e,n)},Y.getVertexAttribOffset=function(e,n){return Y.gl.getVertexAttribOffset(e,n)},Y.hint=function(e,n){Y.gl.hint(e,n)},Y.isBuffer=function(e){return Y.gl.isBuffer(e)},Y.isEnabled=function(e){return Y.gl.isEnabled(e)},Y.isFramebuffer=function(e){return Y.gl.isFramebuffer(e)},Y.isProgram=function(e){return Y.gl.isProgram(e)},Y.isRenderbuffer=function(e){return Y.gl.isRenderbuffer(e)},Y.isShader=function(e){return Y.gl.isShader(e)},Y.isTexture=function(e){return Y.gl.isTexture(e)},Y.lineWidth=function(e){Y.gl.lineWidth(e)},Y.linkProgram=function(e){Y.gl.linkProgram(e)},Y.pixelStorei=function(e,n){Y.gl.pixelStorei(e,n)},Y.polygonOffset=function(e,n){Y.gl.polygonOffset(e,n)},Y.readPixels=function(e,n,t,i,l,s,r){Y.gl.readPixels(e,n,t,i,l,s,r)},Y.renderbufferStorage=function(e,n,t,i){Y.gl.renderbufferStorage(e,n,t,i)},Y.renderbufferStorageMultisample=function(e,n,t,i,l){Y.gl.renderbufferStorageMultisample(e,n,t,i,l)},Y.clearBufferfv=function(e,n,t,i){Y.gl.clearBufferfv(e,n,t,i=null==i?0:i)},Y.blitFramebuffer=function(e,n,t,i,l,s,r,a,h,u){Y.gl.blitFramebuffer(e,n,t,i,l,s,r,a,h,u)},Y.sampleCoverage=function(e,n){Y.gl.sampleCoverage(e,n)},Y.scissor=function(e,n,t,i){Y.gl.scissor(e,n,t,i)},Y.shaderSource=function(e,n){Y.gl.shaderSource(e,n)},Y.stencilFunc=function(e,n,t){Y.gl.stencilFunc(e,n,t)},Y.stencilFuncSeparate=function(e,n,t,i){Y.gl.stencilFuncSeparate(e,n,t,i)},Y.stencilMask=function(e){Y.gl.stencilMask(e)},Y.stencilMaskSeparate=function(e,n){Y.gl.stencilMaskSeparate(e,n)},Y.stencilOp=function(e,n,t){Y.gl.stencilOp(e,n,t)},Y.stencilOpSeparate=function(e,n,t,i){Y.gl.stencilOpSeparate(e,n,t,i)},Y.texImage2D=function(e,n,t,i,l,s,r,a,h){Y.gl.texImage2D(e,n,t,i,l,s,r,a,h)},Y.texParameterf=function(e,n,t){Y.gl.texParameterf(e,n,t)},Y.texParameteri=function(e,n,t){Y.gl.texParameteri(e,n,t)},Y.texSubImage2D=function(e,n,t,i,l,s,r,a,h){Y.gl.texSubImage2D(e,n,t,i,l,s,r,a,h)},Y.uniform1f=function(e,n){Y.gl.uniform1f(e,n)},Y.uniform1fv=function(e,n){Y.gl.uniform1fv(e,n)},Y.uniform1i=function(e,n){Y.gl.uniform1i(e,n)},Y.uniform1iv=function(e,n){Y.gl.uniform1iv(e,n)},Y.uniform2f=function(e,n,t){Y.gl.uniform2f(e,n,t)},Y.uniform2fv=function(e,n){Y.gl.uniform2fv(e,n)},Y.uniform2i=function(e,n,t){Y.gl.uniform2i(e,n,t)},Y.uniform2iv=function(e,n){Y.gl.uniform2iv(e,n)},Y.uniform3f=function(e,n,t,i){Y.gl.uniform3f(e,n,t,i)},Y.uniform3fv=function(e,n){Y.gl.uniform3fv(e,n)},Y.uniform3i=function(e,n,t,i){Y.gl.uniform3i(e,n,t,i)},Y.uniform3iv=function(e,n){Y.gl.uniform3iv(e,n)},Y.uniform4f=function(e,n,t,i,l){Y.gl.uniform4f(e,n,t,i,l)},Y.uniform4fv=function(e,n){Y.gl.uniform4fv(e,n)},Y.uniform4i=function(e,n,t,i,l){Y.gl.uniform4i(e,n,t,i,l)},Y.uniform4iv=function(e,n){Y.gl.uniform4iv(e,n)},Y.uniformMatrix2fv=function(e,n,t){Y.gl.uniformMatrix2fv(e,n,t)},Y.uniformMatrix3fv=function(e,n,t){Y.gl.uniformMatrix3fv(e,n,t)},Y.uniformMatrix4fv=function(e,n,t){Y.gl.uniformMatrix4fv(e,n,t)},Y.useProgram=function(e){Y.gl.useProgram(e)},Y.validateProgram=function(e){Y.gl.validateProgram(e)},Y.vertexAttrib1f=function(e,n){Y.gl.vertexAttrib1f(e,n)},Y.vertexAttrib1fv=function(e,n){Y.gl.vertexAttrib1fv(e,n)},Y.vertexAttrib2f=function(e,n,t){Y.gl.vertexAttrib2f(e,n,t)},Y.vertexAttrib2fv=function(e,n){Y.gl.vertexAttrib2fv(e,n)},Y.vertexAttrib3f=function(e,n,t,i){Y.gl.vertexAttrib3f(e,n,t,i)},Y.vertexAttrib3fv=function(e,n){Y.gl.vertexAttrib3fv(e,n)},Y.vertexAttrib4f=function(e,n,t,i,l){Y.gl.vertexAttrib4f(e,n,t,i,l)},Y.vertexAttrib4fv=function(e,n){Y.gl.vertexAttrib4fv(e,n)},Y.vertexAttribPointer=function(e,n,t,i,l,s){Y.gl.vertexAttribPointer(e,n,t,i,l,s)},Y.viewport=function(e,n,t,i){Y.gl.viewport(e,n,t,i)},Y.get_version=function(){return 7938},function(e){N2.call(this,e)}),el=((L["clay.web.WebAssets"]=Ji).__name__="clay.web.WebAssets",Ji.__super__=N2,Ji.prototype=$extend(N2.prototype,{isSynchronous:function(){return!1},loadImage:function(e,n,t,i){null==t&&(t=!1),null==n&&(n=4);var l=this;if(null==e)throw Q.thrown("Image path is null!");var s=At.extension(e);return this.app.io.loadData(e,!0,null,function(e){null==e?null!=i&&Bi.push(function(){i(null)}):l.imageFromBytesUsingImageElement(e,s,4,null,function(e){null!=i&&Bi.push(function(){i(e)})})}),null},decodeImageFromElement:function(e,n){var t=(n=null==n?!0:n)?this.nearestPowerOfTwo(e.width):e.width,n=n?this.nearestPowerOfTwo(e.height):e.height,i=this.paddedBytesFromElement(e.width,e.height,t,n,e),e=new r2(e.width,e.height,t,n,4,4,i);return e},imageFromBytes:function(e,n,t,i,l){return this.imageFromBytesUsingImageElement(e,n,t=null==t?4:t,i=null==i?!0:i,l)},imageFromBytesUsingImageElement:function(e,n,t,i,l){null==i&&(i=!0),null==t&&(t=4);var s=this;if(null==e)throw Q.thrown("Image bytes are null!");for(var r="",a=0,h=e.length;a<h;){var u=255&e[a++];r+=String.fromCodePoint(u)}var t="data:image/"+n+";base64,"+window.btoa(r),c=new Image;return c.onload=function(e){var n=s.decodeImageFromElement(c,i);null!=l&&Bi.push(function(){l(n)})},c.onerror=function(e){Ni.error("failed to load image from bytes, on error: "+e,{fileName:"clay/web/WebAssets.hx",lineNumber:216,className:"clay.web.WebAssets",methodName:"imageFromBytesUsingImageElement"})},c.src=t,null},pixelsToPngData:function(n,e,t,i){var l=window.document.createElement("canvas"),s=(l.width=n,l.height=e,l.getContext("2d",null)),t=(s.clearRect(0,0,l.width,l.height),new Uint8ClampedArray(t.buffer)),r=s.createImageData(n,e);r.data.set(t);try{s.putImageData(r,0,0),l.toBlob(function(e){e.arrayBuffer().then(function(e){e=new Uint8Array(e,0,e.byteLength);i(e),r=s=l=null})},"image/png")}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();throw Q.thrown(n)}},paddedBytesFromPixels:function(e,n,t,i,l){var s=window.document.createElement("canvas"),t=(s.width=t,s.height=i,s.getContext("2d",null)),i=(t.clearRect(0,0,s.width,s.height),null),l=new Uint8ClampedArray(l.buffer),e=t.createImageData(e,n);e.data.set(l);try{t.putImageData(e,0,0),i=t.getImageData(0,0,s.width,s.height)}catch(e){Al.lastError=e;n=Q.caught(e).unwrap();throw Q.thrown(n)}return e=t=s=null,new Uint8Array(i.data)},paddedBytesFromElement:function(e,n,t,i,l){var s=window.document.createElement("canvas"),t=(s.width=t,s.height=i,s.getContext("2d",null)),i=(t.clearRect(0,0,s.width,s.height),t.drawImage(l,0,0,e,n),null);try{i=t.getImageData(0,0,s.width,s.height)}catch(e){Al.lastError=e;l=Q.caught(e).unwrap();throw Ni.info("- textures served from file:/// throw security errors\n- textures served over http:// work for cross origin byte requests",{fileName:"clay/web/WebAssets.hx",lineNumber:333,className:"clay.web.WebAssets",methodName:"paddedBytesFromElement"}),Q.thrown(l)}return t=s=null,new Uint8Array(i.data)},nearestPowerOfTwo:function(e){return Ji.POT?(--e,e=(e=(e=(e=(e|=e>>1)|e>>2)|e>>4)|e>>8)|e>>16,++e):e},__class__:Ji}),function(e){this.active=!1,this.workletMessageCallbacks=[],this.pendingBusWorkletCallbacks=[],this.ignoreEndedSoundsTick1=[],this.ignoreEndedSoundsTick0=[],this.handleSeq=0,this.suspended=!1,O2.call(this,e),this.instances=new Hl,this.busses=new Hl,this.workletModules=new z}),nl=((L["clay.web.WebAudio"]=el).__name__="clay.web.WebAudio",el.__super__=O2,el.prototype=$extend(O2.prototype,{suspended:null,handleSeq:null,instances:null,buffers:null,busses:null,workletModules:null,ignoreEndedSoundsTick0:null,ignoreEndedSoundsTick1:null,pendingBusWorkletCallbacks:null,workletMessageCallbacks:null,context:null,active:null,init:function(){this.initWebAudio(),this.createDefaultBus()},tick:function(e){for(var n=this.instances,t=n,i=n.keys();i.hasNext();){var l=i.next(),l={value:t.get(l),key:l},s=l.key,r=l.value;if(r.loop&&1==r.state){var a=1==r.state?r.timeResume+(this.app.timestamp-r.timeResumeAppTime)*r.pitch:0,h=r.source.getDuration();if(0<h&&h<=a)for(this.app.events.audioEvent(0,s);h<=a;)a-=h,r.timeResumeAppTime+=h/r.pitch}}for(;0<this.ignoreEndedSoundsTick1.length;)0<(r=this.ignoreEndedSoundsTick1.shift()).ignoreNextEnded&&r.ignoreNextEnded--;for(;0<this.ignoreEndedSoundsTick0.length;){r=this.ignoreEndedSoundsTick0.shift();this.ignoreEndedSoundsTick1.push(r)}},initWebAudio:function(e){null==e&&(e=44100);try{this.context=new AudioContext({sampleRate:44100})}catch(e){Al.lastError=e;try{this.context=new window.webkitAudioContext}catch(e){return void Ni.debug("Audio / webaudio / no AudioContext could be created! No audio loading or playback will be available.",{fileName:"clay/web/WebAudio.hx",lineNumber:138,className:"clay.web.WebAudio",methodName:"initWebAudio"})}}if(null==this.context)throw Q.thrown("Audio / webaudio / no AudioContext could be created, is the Web Audio API supported?");e="channelCount: "+this.context.destination.channelCount+', channelCountMode: "'+this.context.destination.channelCountMode+'", channelInterpretation: "'+this.context.destination.channelInterpretation+'", maxChannelCount: '+this.context.destination.maxChannelCount+", numberOfInputs: "+this.context.destination.numberOfInputs+", numberOfOutputs: "+this.context.destination.numberOfOutputs;Ni.debug("Audio / webaudio: "+V.string(this.context)+" / sampleRate: "+this.context.sampleRate+" / destination: "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:154,className:"clay.web.WebAudio",methodName:"initWebAudio"}),this.active=!0},shutdown:function(){for(var e=this.busses.iterator();e.hasNext();){var n=e.next();null!=n.workletNode&&n.workletNode.disconnect(),null!=n.silentSource&&(n.silentSource.stop(),n.silentSource.disconnect()),n.gainNode.disconnect()}this.busses.h={},this.context.close()},createDefaultBus:function(){this.createBus(0,null,1)},createBus:function(e,n,t){if(null==t&&(t=1),null==n&&(n=""),this.busses.h.hasOwnProperty(e))Ni.warning("Audio / Bus "+e+" already exists",{fileName:"clay/web/WebAudio.hx",lineNumber:185,className:"clay.web.WebAudio",methodName:"createBus"});else{for(var i=this.context.createGain(),n=(i.gain.value=t,i.connect(this.context.destination),0<n.length?n:"bus-"+e),l=[],s=0;s<128;){s++;l.push(0)}i={ready:!1,index:e,gainNode:i,workletNode:null,silentSource:null,volume:t,active:!0,name:n,parameterValues:l};this.busses.h[e]=i,Ni.debug("Audio / Created bus "+e+": "+i.name,{fileName:"clay/web/WebAudio.hx",lineNumber:206,className:"clay.web.WebAudio",methodName:"createBus"})}},destroyBus:function(e){if(0==e)Ni.warning("Audio / Cannot destroy default bus",{fileName:"clay/web/WebAudio.hx",lineNumber:211,className:"clay.web.WebAudio",methodName:"destroyBus"});else{var n=this.busses.h[e];if(null!=n){for(var t=this.instances,i=t,l=t.keys();l.hasNext();){var s=l.next(),s={value:i.get(s),key:s};s.value.bus==e&&this.stop(s.key)}null!=n.workletNode&&n.workletNode.disconnect(),null!=n.silentSource&&(n.silentSource.stop(),n.silentSource.disconnect()),n.gainNode.disconnect(),this.busses.remove(e),Ni.debug("Audio / Destroyed bus "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:238,className:"clay.web.WebAudio",methodName:"destroyBus"})}}},setBusVolume:function(e,n){var t=this.busses.h[e];null!=t&&(t.volume=n,t.gainNode.gain.value=n,Ni.debug("Audio / Set bus "+e+" volume to "+n,{fileName:"clay/web/WebAudio.hx",lineNumber:247,className:"clay.web.WebAudio",methodName:"setBusVolume"}))},getBusVolume:function(e){e=this.busses.h[e];return null!=e?e.volume:0},setBusActive:function(e,n){var t=this.busses.h[e];null!=t&&(t.active=n,t.gainNode.gain.value=n?t.volume:0,Ni.debug("Audio / Set bus "+e+" active: "+(null==n?"null":""+n),{fileName:"clay/web/WebAudio.hx",lineNumber:261,className:"clay.web.WebAudio",methodName:"setBusActive"}))},loadWorkletModule:function(n,e,t){var i=this;Object.prototype.hasOwnProperty.call(this.workletModules.h,n)?(Ni.debug("Audio / Worklet module "+n+" already loaded",{fileName:"clay/web/WebAudio.hx",lineNumber:268,className:"clay.web.WebAudio",methodName:"loadWorkletModule"}),null!=t&&t(!0)):N.field(this.context,"audioWorklet").addModule(e).then(function(e){i.workletModules.h[n]=!0,Ni.debug("Audio / Loaded worklet module: "+n,{fileName:"clay/web/WebAudio.hx",lineNumber:275,className:"clay.web.WebAudio",methodName:"loadWorkletModule"}),null!=t&&t(!0)}).catch(function(e){Ni.error("Audio / Failed to load worklet module "+n+": "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:279,className:"clay.web.WebAudio",methodName:"loadWorkletModule"}),null!=t&&t(!1)})},attachWorkletToBus:function(l,e,n,s){var r=this,a=this.busses.h[l];if(null==a)return Ni.error("Audio / Bus "+l+" does not exist",{fileName:"clay/web/WebAudio.hx",lineNumber:287,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),!1;if(!Object.prototype.hasOwnProperty.call(this.workletModules.h,e))return Ni.error("Audio / Worklet module "+e+" not loaded",{fileName:"clay/web/WebAudio.hx",lineNumber:292,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),!1;null!=a.workletNode&&(a.workletNode.disconnect(),null!=a.silentSource)&&(a.silentSource.stop(),a.silentSource.disconnect(),a.silentSource=null);try{var h=new AudioWorkletNode(this.context,e,n);if(null!=a.parameterValues)for(var t=0;t<128;){var i=t++,u=h.parameters.get("param"+i);null!=u&&(u.value=a.parameterValues[i])}var c=this.context.createConstantSource(),o=(c.offset.value=0,this.context.createGain()),_=(o.gain.value=1,o.channelCount=2,o.channelCountMode="explicit",o.channelInterpretation="speakers",this.context.createChannelMerger(2));return c.connect(_,0,0),c.connect(_,0,1),a.gainNode.disconnect(),a.gainNode.connect(o),_.connect(o),o.connect(h),h.connect(this.context.destination),c.start(),a.workletNode=h,a.silentSource=c,h.port.onmessage=function(e){var n=null!=e?e.data:null,n=null!=n?n.type:null;if(null!=n)switch(n){case"addBusFilterWorklet":for(var t=r.workletMessageCallbacks.length-1;0<=t;){var i=r.workletMessageCallbacks[t];"addBusFilterWorklet"==i.type&&i.bus==e.data.bus&&i.filterId==e.data.filterId&&(r.workletMessageCallbacks.splice(t,1),i.callback()),--t}break;case"ready":a.ready=!0,r.flushBusWorkletReadyCallbacks(l),null!=s&&(s(),s=null,h.port.postMessage({type:"ready"}));break;case"trace":Dl.trace(e.data,{fileName:"clay/web/WebAudio.hx",lineNumber:357,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"})}},Ni.debug("Audio / Attached worklet "+e+" to bus "+l+" with stereo silent source",{fileName:"clay/web/WebAudio.hx",lineNumber:382,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),!0}catch(t){Al.lastError=t;n=Q.caught(t).unwrap();return Ni.error("Audio / Failed to create worklet node: "+V.string(n),{fileName:"clay/web/WebAudio.hx",lineNumber:386,className:"clay.web.WebAudio",methodName:"attachWorkletToBus"}),a.gainNode.connect(this.context.destination),!1}},detachWorkletFromBus:function(e){var n=this.busses.h[e];null!=n&&null!=n.workletNode&&n.ready&&(n.workletNode.disconnect(),null!=n.silentSource&&(n.silentSource.stop(),n.silentSource.disconnect(),n.silentSource=null),n.gainNode.disconnect(),n.gainNode.connect(this.context.destination),n.workletNode=null,Ni.debug("Audio / Detached worklet from bus "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:411,className:"clay.web.WebAudio",methodName:"detachWorkletFromBus"}))},sendMessageToWorklet:function(e,n){e=this.busses.h[e];null!=e&&null!=e.workletNode&&e.ready&&e.workletNode.port.postMessage(n)},flushBusWorkletReadyCallbacks:function(e){var n=this.pendingBusWorkletCallbacks[e];if(null!=n){this.pendingBusWorkletCallbacks[e]=null;for(var t=0,i=n.length;t<i;)(0,n[t++])()}},scheduleWhenBusWorkletReady:function(e,n){var t=this.busses.h[e];null!=t&&null!=t.workletNode&&t.ready?n():(null==(t=this.pendingBusWorkletCallbacks[e])&&(this.pendingBusWorkletCallbacks[e]=t=[]),t.push(n))},setWorkletParameterWhenReady:function(e,n,t){var i=this,l=this.busses.h[e];null!=l&&null!=l.workletNode&&l.ready?this.setWorkletParameter(e,n,t):this.scheduleWhenBusWorkletReady(e,function(){i.setWorkletParameter(e,n,t)})},setWorkletParameter:function(e,n,t){var i,l=this.busses.h[e];null!=l&&null!=l.workletNode&&l.ready&&(null!=(i=l.workletNode.parameters.get(n))?(i.value=t,B.startsWith(n,"param")&&null!=(i=V.parseInt(h.substr(n,5,null)))&&0<=i&&i<128&&(l.parameterValues[i]=t)):Ni.warning('Audio / Unknown worklet parameter named "'+n+'" for bus '+e,{fileName:"clay/web/WebAudio.hx",lineNumber:480,className:"clay.web.WebAudio",methodName:"setWorkletParameter"}))},setWorkletParameterByIndexWhenReady:function(e,n,t){var i=this,l=this.busses.h[e];null!=l&&null!=l.workletNode&&l.ready?this.setWorkletParameterByIndex(e,n,t):this.scheduleWhenBusWorkletReady(e,function(){i.setWorkletParameterByIndex(e,n,t)})},setWorkletParameterByIndex:function(e,n,t){n<0||128<=n?Ni.warning("Audio / Parameter index "+n+" out of range (0-127)",{fileName:"clay/web/WebAudio.hx",lineNumber:498,className:"clay.web.WebAudio",methodName:"setWorkletParameterByIndex"}):this.setWorkletParameter(e,"param"+n,t)},getWorkletParameterByIndex:function(e,n){return n<0||128<=n||null==(e=this.busses.h[e])||null==e.parameterValues?0:e.parameterValues[n]},soundOf:function(e){return this.instances.h[e]},getBusGainNode:function(e){var n=this.busses.h[e];return null==n&&(Ni.debug("Audio / Bus "+e+" does not exist, creating it automatically",{fileName:"clay/web/WebAudio.hx",lineNumber:524,className:"clay.web.WebAudio",methodName:"getBusGainNode"}),this.createBus(e),n=this.busses.h[e]),n.gainNode},playBuffer:function(e){var n=this.context.createBufferSource();return n.buffer=e.buffer,n},playBufferAgain:function(e,n,t){var i=this,l=(n.bufferNode=this.playBuffer(n.source.data),n.bufferNode.playbackRate.value=n.pitch,n.bufferNode.connect(n.panNode),n.bufferNode.loop=n.loop,n.panNode.connect(n.gainNode),this.getBusGainNode(n.bus));n.gainNode.connect(l),n.bufferNode.start(0,t),n.bufferNode.onended=function(){i.soundEnded(n)}},playInstance:function(e,n,t,i,l,s,r,a){null==a&&(a=0);var h=this,u=this.context.createGain(),c=this.context.createPanner(),o=null,s=(u.gain.value=s,c.panningModel="equalpower",c.setPosition(Math.cos(-1.5707),0,Math.sin(1.5707)),null!=l&&((o=l).loop=r),null!=i.mediaNode&&(o=i.mediaNode,i.mediaElem.loop=r),o.connect(c),c.connect(u),this.getBusGainNode(a)),_=(u.connect(s),{handle:e,source:n,instance:t,bus:a,bufferNode:l,mediaNode:i.mediaNode,mediaElem:i.mediaElem,gainNode:u,panNode:c,state:1,loop:r,pan:0,pitch:1,ignoreNextEnded:0,timeResumeAppTime:window.performance.now()/1e3-ll.timestampStart,timeResume:0,timePause:null});this.instances.h[e]=_,null!=l&&(l.start(0),l.onended=function(){h.soundEnded(_)}),null!=i.mediaNode&&(i.mediaElem.play(),i.mediaElem.onended=function(){h.soundEnded(_)})},play:function(e,n,t,i){null==i&&(i=0);var l=e.data,s=this.handleSeq,r=e.instance(s);return e.data.isStream?(l.mediaElem.play(),l.mediaElem.volume=1,this.playInstance(s,e,r,l,null,n,!1,i)):this.playInstance(s,e,r,l,this.playBuffer(l),n,!1,i),this.handleSeq++,t&&this.pause(s),s},loop:function(e,n,t,i){null==i&&(i=0);var l=e.data,s=this.handleSeq,r=e.instance(s);return e.data.isStream?(l.mediaElem.play(),l.mediaElem.volume=1,this.playInstance(s,e,r,l,null,n,!0,i)):this.playInstance(s,e,r,l,this.playBuffer(l),n,!0,i),this.handleSeq++,t&&this.pause(s),s},stopBuffer:function(e){e.bufferNode.stop(),e.bufferNode.disconnect(),e.gainNode.disconnect(),e.panNode.disconnect(),e.bufferNode=null},pause:function(e){var n=this.instances.h[e];null!=n&&1==n.state&&(Ni.debug("Audio / pause handle="+e+", "+n.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:692,className:"clay.web.WebAudio",methodName:"pause"}),e=this.positionOf(e),n.timePause=e,n.state=0,null!=n.bufferNode?this.stopBuffer(n):null!=n.mediaNode&&n.mediaElem.pause())},unPause:function(e){var n=this.instances.h[e];null!=n&&0==n.state&&(Ni.debug("Audio / unpause handle="+e+", "+n.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:713,className:"clay.web.WebAudio",methodName:"unPause"}),n.timeResume=null!=n.timePause?n.timePause:0,n.timeResumeAppTime=window.performance.now()/1e3-ll.timestampStart,null==n.mediaNode?this.playBufferAgain(e,n,n.timePause):n.mediaElem.play(),n.state=1)},soundEnded:function(e){0<e.ignoreNextEnded?e.ignoreNextEnded--:0!=e.state&&(1!=e.state||this.positionOf(e.handle)+.1>=e.source.getDuration())&&this.destroySound(e)},destroySound:function(e){null!=e.source&&this.instances.h.hasOwnProperty(e.handle)&&this.positionOf(e.handle)+.1>=e.source.getDuration()&&this.app.events.audioEvent(0,e.handle),null!=e.bufferNode&&(e.bufferNode.stop(),e.bufferNode.disconnect(),e.gainNode.disconnect(),e.panNode.disconnect(),e.bufferNode=null),null!=e.mediaNode&&(e.mediaElem.pause(),e.mediaElem.currentTime=0,e.mediaNode.disconnect(),e.mediaElem=null,e.mediaNode=null),null!=e.gainNode&&(e.gainNode.disconnect(),e.gainNode=null),null!=e.panNode&&(e.panNode.disconnect(),e.panNode=null),this.instances.h.hasOwnProperty(e.handle)&&(this.instances.remove(e.handle),this.app.events.audioEvent(1,e.handle))},stop:function(e){var n=this.instances.h[e];null!=n&&(2!=n.state&&Ni.debug("Audio / stop handle="+e+(null!=n.source&&null!=n.source.data?", "+n.source.data.id:""),{fileName:"clay/web/WebAudio.hx",lineNumber:781,className:"clay.web.WebAudio",methodName:"stop"}),this.destroySound(n),n.state=2)},volume:function(e,n){var t=this.instances.h[e];null!=t&&(Ni.debug("Audio / volume="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:792,className:"clay.web.WebAudio",methodName:"volume"}),t.gainNode.gain.value=n)},pan:function(e,n){var t=this.instances.h[e];null!=t&&(Ni.debug("Audio / pan="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:802,className:"clay.web.WebAudio",methodName:"pan"}),t.pan=n,t.panNode.setPosition(Math.cos(1.5707*(n-1)),0,Math.sin(1.5707*(n+1))))},pitch:function(e,n){var t=this.instances.h[e];null!=t&&(Ni.debug("Audio / pitch="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:816,className:"clay.web.WebAudio",methodName:"pitch"}),null==t.mediaNode&&(e=this.positionOf(e),t.pitch=n,1==t.state)&&(t.timeResumeAppTime=t.timeResume+(window.performance.now()/1e3-ll.timestampStart)-e/t.pitch),null!=t.bufferNode?t.bufferNode.playbackRate.value=n:t.mediaNode)},position:function(e,n){var t=this.instances.h[e];null!=t&&(Ni.debug("Audio / position="+n+" handle="+e+", "+t.source.data.id,{fileName:"clay/web/WebAudio.hx",lineNumber:839,className:"clay.web.WebAudio",methodName:"position"}),0==t.state?t.timePause=n:(t.timeResume=n,t.timeResumeAppTime=window.performance.now()/1e3-ll.timestampStart,null!=t.bufferNode?(t.ignoreNextEnded++,this.ignoreEndedSoundsTick0.push(t),this.stopBuffer(t),this.playBufferAgain(e,t,n)):t.mediaElem.currentTime=n))},volumeOf:function(e){e=this.instances.h[e];return null==e?0:e.gainNode.gain.value},panOf:function(e){e=this.instances.h[e];return null==e?0:e.pan},pitchOf:function(e){e=this.instances.h[e];return null==e?1:e.pitch},positionOf:function(e){var n,t=this.instances.h[e];if(null==t)return 0;if(null!=t.mediaElem)return t.mediaElem.currentTime;switch(t.state){case 0:case 1:switch(t.state){case 0:n=t.timePause;break;case 1:n=t.timeResume+(window.performance.now()/1e3-ll.timestampStart-t.timeResumeAppTime)*t.pitch;break;default:n=0}var i=t.source.getDuration();return 0<i&&(t.loop?n%=i:i<n&&(n=i)),n;case-1:case 2:return 0}},stateOf:function(e){e=this.instances.h[e];return null==e?-1:e.state},loopOf:function(e){e=this.instances.h[e];return null!=e&&e.loop},instanceOf:function(e){e=this.instances.h[e];return null==e?null:e.instance},suspend:function(){!this.active||this.suspended||(this.suspended=!0,this.active=!1,this.context.suspend())},resume:function(){this.active||this.suspended&&(this.suspended=!1,this.active=!0,this.context.resume())},getSoundBus:function(e){e=this.instances.h[e];return null!=e?e.bus:-1},moveSoundToBus:function(e,n){var t,i=this.instances.h[e];return null!=i&&null!=(t=this.busses.h[n])&&(i.gainNode.disconnect(),i.gainNode.connect(t.gainNode),i.bus=n,Ni.debug("Audio / Moved sound "+e+" to bus "+n,{fileName:"clay/web/WebAudio.hx",lineNumber:975,className:"clay.web.WebAudio",methodName:"moveSoundToBus"}),!0)},listBusses:function(){for(var e=[],n=this.busses.keys();n.hasNext();){var t=n.next();e.push(t)}return e},getBusName:function(e){e=this.busses.h[e];return null!=e?e.name:""},createBusFilter:function(e,n,t,i){var l=this;this.busses.h.hasOwnProperty(n)||(Ni.debug("Audio / Bus "+n+" does not exist for filter, creating it automatically",{fileName:"clay/web/WebAudio.hx",lineNumber:996,className:"clay.web.WebAudio",methodName:"createBusFilter"}),this.createBus(n)),this.loadWorkletModule("bus-worklet",e,function(e){e?l.attachWorkletToBus(n,"bus-worklet",{},function(){Ni.debug("Audio / Worklet attached to bus #"+n+" is now ready!",{fileName:"clay/web/WebAudio.hx",lineNumber:1003,className:"clay.web.WebAudio",methodName:"createBusFilter"}),t(n,n)})||Ni.error("Audio / Failed to attach worklet to bus #"+n,{fileName:"clay/web/WebAudio.hx",lineNumber:1008,className:"clay.web.WebAudio",methodName:"createBusFilter"}):Ni.error("Audio / Failed to load create bus filter #"+n,{fileName:"clay/web/WebAudio.hx",lineNumber:1012,className:"clay.web.WebAudio",methodName:"createBusFilter"})})},addBusFilterWorklet:function(e,n,t,i){this.busses.h.hasOwnProperty(e)||(Ni.debug("Audio / Bus "+e+" does not exist for filter worklet, creating it automatically",{fileName:"clay/web/WebAudio.hx",lineNumber:1022,className:"clay.web.WebAudio",methodName:"addBusFilterWorklet"}),this.createBus(e));var l=this.busses.h[e];null==l?Ni.error("Audio / Cannot add bus filter worklet: bus #"+e+" creation failed",{fileName:"clay/web/WebAudio.hx",lineNumber:1028,className:"clay.web.WebAudio",methodName:"addBusFilterWorklet"}):null==l.workletNode?Ni.error("Audio / Cannot add bus filter worklet: bus #"+e+" has no worklet node",{fileName:"clay/web/WebAudio.hx",lineNumber:1032,className:"clay.web.WebAudio",methodName:"addBusFilterWorklet"}):(t={type:"addBusFilterWorklet",bus:e,filterId:n,workletClass:t.__name__},null!=i&&this.workletMessageCallbacks.push({type:"addBusFilterWorklet",bus:e,filterId:n,callback:i}),l.workletNode.port.postMessage(t))},destroyBusFilterWorklet:function(e,n){var t=this.busses.h[e];null==t?Ni.warning("Audio / Cannot destroy bus filter worklet: bus #"+e+" does not exist",{fileName:"clay/web/WebAudio.hx",lineNumber:1058,className:"clay.web.WebAudio",methodName:"destroyBusFilterWorklet"}):null==t.workletNode?Ni.warning("Audio / Cannot destroy bus filter worklet: bus #"+e+" has no worklet node",{fileName:"clay/web/WebAudio.hx",lineNumber:1062,className:"clay.web.WebAudio",methodName:"destroyBusFilterWorklet"}):t.workletNode.port.postMessage({type:"destroyBusFilterWorklet",bus:e,filterId:n})},ensureBusExists:function(e){return!!this.busses.h.hasOwnProperty(e)||(Ni.debug("Audio / Auto-creating bus "+e,{fileName:"clay/web/WebAudio.hx",lineNumber:1077,className:"clay.web.WebAudio",methodName:"ensureBusExists"}),this.createBus(e),this.busses.h.hasOwnProperty(e))},loadData:function(e,n,t,i,l){if(null==i&&(i=!1),null==e)throw Q.thrown("path is null!");return this.active?n?this.loadDataFromStream(e,t,l):this.loadDataFromSound(e,t,l):(Ni.error("Audio / WebAudio context unavailable",{fileName:"clay/web/WebAudio.hx",lineNumber:1091,className:"clay.web.WebAudio",methodName:"loadData"}),null!=l&&Bi.push(function(){l(null)})),null},dataFromBytes:function(t,e,i,l){var s=this;if(this.active){if(null==t)throw Q.thrown("id is null!");if(null==e)throw Q.thrown("bytes is null!");this.context.decodeAudioData(e.buffer,function(e){var n=new nl(s.app,e,null,null,new G2(t,0|e.sampleRate,e.length,e.duration,e.numberOfChannels,null,i,!1));null!=l&&Bi.push(function(){l(n)})},function(){Ni.error("Audio / failed to decode audio for `"+t+"`",{fileName:"clay/web/WebAudio.hx",lineNumber:1141,className:"clay.web.WebAudio",methodName:"dataFromBytes"}),null!=l&&Bi.push(function(){l(null)})})}else null!=l&&Bi.push(function(){l(null)})},dataFromPCM:function(e,n,t,i,l,s,r,a){if(null==s&&(s=!0),this.active){if(null==e)throw Q.thrown("id is null!");if(null==n)throw Q.thrown("pcmData is null!");if(t<=0)throw Q.thrown("sampleFrames must be positive!");if(l<=0)throw Q.thrown("sampleRate must be positive!");if(i<=0)throw Q.thrown("channels must be positive!");try{var h=this.context.createBuffer(i,t,l);if(s)for(var u=0,c=i;u<c;)for(var o=u++,_=h.getChannelData(o),d=0,b=t;d<b;)(f=(O=d++)*i+o)<n.length?_[O]=n[f]:_[O]=0;else for(var g=n.length/i|0,u=0,c=i;u<c;)for(var O,f,o=u++,_=h.getChannelData(o),p=o*g,d=0,b=t;d<b;)(f=p+(O=d++))<n.length?_[O]=n[f]:_[O]=0;var m=new nl(this.app,h,null,null,new G2(e,0|h.sampleRate,h.length,h.duration,h.numberOfChannels,null,r,!1));return Ni.debug("Audio / Created AudioData from PCM: "+e+" ("+i+" channels, "+t+" frames, "+l+"Hz, "+(s?"interleaved":"planar")+")",{fileName:"clay/web/WebAudio.hx",lineNumber:1231,className:"clay.web.WebAudio",methodName:"dataFromPCM"}),null!=a&&Bi.push(function(){a(m)}),m}catch(u){Al.lastError=u;r=Q.caught(u).unwrap();Ni.error("Audio / Failed to create audio buffer from PCM data for `"+e+"`: "+V.string(r),{fileName:"clay/web/WebAudio.hx",lineNumber:1242,className:"clay.web.WebAudio",methodName:"dataFromPCM"}),null!=a&&Bi.push(function(){a(null)})}}else null!=a&&Bi.push(function(){a(null)});return null},handleSourceDestroyed:function(e){},handleInstanceDestroyed:function(e){this.stop(e)},loadDataFromSound:function(n,t,i){var l=this;this.app.io.loadData(n,!0,null,function(e){null!=e?l.dataFromBytes(n,e,t,i):null!=i&&Bi.push(function(){i(null)})})},loadDataFromStream:function(r,a,h){var u=this,c=new Audio(r);c.autoplay=!1,c.controls=!1,c.preload="auto",c.onerror=function(e){var n;switch(c.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE";break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="unknown error"}Ni.error("Audio / failed to load `"+r+"` as stream : `"+n+"`",{fileName:"clay/web/WebAudio.hx",lineNumber:1295,className:"clay.web.WebAudio",methodName:"loadDataFromStream"}),null!=h&&Bi.push(function(){h(null)})},c.onloadedmetadata=function(e){var n=u.context.createMediaElementSource(c),t=0|u.context.sampleRate,i=n.channelCount,l=c.duration*(t*i*2)|0,s=new nl(u.app,null,n,c,new G2(r,t,l,c.duration,i,null,a,!0));null!=h&&Bi.push(function(){h(s)})}},__class__:el}),function(e,n,t,i,l){this.buffer=n,this.mediaNode=t,this.mediaElem=i,H2.call(this,e,l)}),tl=((L["clay.web._WebAudio.WebAudioData"]=nl).__name__="clay.web._WebAudio.WebAudioData",nl.__super__=H2,nl.prototype=$extend(H2.prototype,{buffer:null,mediaNode:null,mediaElem:null,destroy:function(){this.buffer=null,this.mediaNode=null,this.mediaElem=null,H2.prototype.destroy.call(this)},__class__:nl}),function(e,n,t,i,l,s,r){this.mouseUseBrowserWindowEvents=!0,this.preventDefaultKeys=[1073741904,1073741903,1073741906,1073741905,8,9,127,32],this.preventDefaultTouches=!0,this.preventDefaultMouseWheel=!0,this.preventDefaultContextMenu=!0,this.windowParent=window.document.body,this.windowId="app",null!=e&&(this.windowId=e),null!=n&&(this.windowParent=n),null!=t&&(this.preventDefaultContextMenu=t),null!=i&&(this.preventDefaultMouseWheel=i),null!=l&&(this.preventDefaultTouches=l),null!=s&&(this.preventDefaultKeys=s),null!=r&&(this.mouseUseBrowserWindowEvents=r)}),il=((L["clay.web.WebConfig"]=tl).__name__="clay.web.WebConfig",tl.prototype={windowId:null,windowParent:null,preventDefaultContextMenu:null,preventDefaultMouseWheel:null,preventDefaultTouches:null,preventDefaultKeys:null,mouseUseBrowserWindowEvents:null,__class__:tl},function(e){P2.call(this,e)}),ll=((L["clay.web.WebIO"]=il).__name__="clay.web.WebIO",il.__super__=P2,il.prototype=$extend(P2.prototype,{isSynchronous:function(){return!1},loadData:function(e,n,t,i){if(null==t&&(t=!1),null==n&&(n=!1),null==e)throw Q.thrown("Path is null!");var l=new XMLHttpRequest;return l.open("GET",e,!0),n?l.overrideMimeType("text/plain; charset=x-user-defined"):l.overrideMimeType("text/plain; charset=UTF-8"),l.responseType="arraybuffer",l.onload=function(e){var n;200==l.status?(n=new Uint8Array(l.response),null!=i&&Bi.push(function(){i(n)})):(Ni.error("Request status was "+l.status+" / "+l.statusText,{fileName:"clay/web/WebIO.hx",lineNumber:136,className:"clay.web.WebIO",methodName:"loadData"}),null!=i&&Bi.push(function(){i(e)}))},l.send(),null},__class__:il}),function(e){this.nextFrameCallbacks=[],this.didEmitTickOnce=!1,this.keyDownStates=new Kn,this.pendingKeyUps=[],this.touches=new Kn,this.windowDpr=1,this.windowY=0,this.windowX=0,this.skipKeyboardEvents=!1,this.skipMouseEvents=!1,this.webglVersion=1,this.gamepadsSupported=!1,Q2.call(this,e)}),sl=((L["clay.web.WebRuntime"]=ll).__name__="clay.web.WebRuntime",ll.timestamp=function(){return window.performance.now()/1e3-ll.timestampStart},ll.defaultConfig=function(){return new tl("app",window.document.body,!0,!0,!0,[1073741904,1073741903,1073741906,1073741905,8,9,127,32],!0)},ll.__super__=Q2,ll.prototype=$extend(Q2.prototype,{gamepadsSupported:null,window:null,webglVersion:null,skipMouseEvents:null,skipKeyboardEvents:null,windowX:null,windowY:null,windowW:null,windowH:null,windowDpr:null,touches:null,gamepadButtonCache:null,gamepadAxisCache:null,pendingKeyUps:null,keyDownStates:null,didEmitTickOnce:null,nextFrameCallbacks:null,init:function(){ll.timestampStart=window.performance.now()/1e3,this.name="web",this.initGamepads()},ready:function(){this.createWindow(),Ni.debug("Web / ready",{fileName:"clay/web/WebRuntime.hx",lineNumber:87,className:"clay.web.WebRuntime",methodName:"ready"})},run:function(){return Ni.debug("Web / run",{fileName:"clay/web/WebRuntime.hx",lineNumber:93,className:"clay.web.WebRuntime",methodName:"run"}),this.loop(0),!1},loop:function(e){if(null==e&&(e=.016),this.app.hasShutdown)return!1;if(this.app.shuttingDown||window.requestAnimationFrame($bind(this,this.loop)),0<this.nextFrameCallbacks.length){for(var n=[];0<this.nextFrameCallbacks.length;)n.push(this.nextFrameCallbacks.shift());for(var t=0,i=n.length;t<i;)n[t++]()}this.app.ready&&(this.gamepadsSupported&&this.pollGamepads(),this.updateWindowBounds());e=window.performance.now()/1e3-ll.timestampStart;return this.app.shouldUpdate(e)&&(this.didEmitTickOnce=!0,this.app.emitTick(e)),this.clearPendingKeyUps(),this.app.emitRender(),!0},createWindow:function(){var e=this.app.config.window;this.window=window.document.createElement("canvas"),this.windowDpr=this.windowDevicePixelRatio(),this.window.width=Math.floor(e.width*this.windowDpr),this.window.height=Math.floor(e.height*this.windowDpr),this.windowW=e.width,this.windowH=e.height,this.window.style.width=e.width+"px",this.window.style.height=e.height+"px",this.window.style.background="#000000",Ni.debug("Web / Created window at "+this.windowX+","+this.windowY+" - "+this.window.width+"x"+this.window.height+" pixels ("+e.width+"x"+e.height+"@"+this.windowDpr+"x)",{fileName:"clay/web/WebRuntime.hx",lineNumber:167,className:"clay.web.WebRuntime",methodName:"createWindow"}),this.window.id=this.app.config.runtime.windowId,this.app.config.runtime.windowParent.appendChild(this.window),null!=e.title&&(window.document.title=e.title),this.createRenderContext(this.window)?(this.postRenderContext(this.window),this.setupEvents()):this.createRenderContextFailed()},createRenderContext:function(e){var n=this.app.config.render,t=this.applyGLAttributes(n),i=null;return 1!=n.webgl.version&&null!=(i=null==(i=e.getContext("webgl"+n.webgl.version,t))?e.getContext("experimental-webgl"+n.webgl.version,t):i)&&(this.webglVersion=n.webgl.version),null==i&&(i=Cs.getContextWebGL(e,t),this.webglVersion=1),Y.gl=i,Ni.debug("GL / context: "+V.string(null!=i),{fileName:"clay/web/WebRuntime.hx",lineNumber:213,className:"clay.web.WebRuntime",methodName:"createRenderContext"}),null!=i},createRenderContextFailed:function(){var e=window.document.createElement("div"),n=window.document.createElement("div");throw e.style.marginLeft="auto",e.style.marginRight="auto",e.style.color="#d3d3d3",e.style.marginTop="5em",e.style.fontSize="1.4em",e.style.fontFamily="Helvetica, sans-serif",e.innerHTML='WebGL is required to run this!<br/><br/>visit <a style="color:#06b4fb; text-decoration:none;" href="http://get.webgl.org/">get.webgl.com</a> for info<br/>and contact the developer of this app',n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.display="block",n.style.minWidth="100%",n.style.minHeight="100%",n.style.textAlign="center",n.style.position="absolute",n.style.background="rgba(1,1,1,0.90)",n.appendChild(e),window.document.body.appendChild(n),Q.thrown("Web / Failed to create render context")},applyGLAttributes:function(e){var n={alpha:e.webgl.alpha,antialias:e.webgl.antialias,depth:e.webgl.depth,stencil:e.webgl.stencil,failIfMajorPerformanceCaveat:e.webgl.failIfMajorPerformanceCaveat,premultipliedAlpha:e.webgl.premultipliedAlpha,preserveDrawingBuffer:e.webgl.preserveDrawingBuffer};return 0<e.antialiasing&&(n.antialias=!0),0<e.depth&&(n.depth=!0),0<e.stencil&&(n.stencil=!0),n},postRenderContext:function(e){var n=this.app.config.render.defaultClear;Y.gl.clearDepth(1),Y.gl.clearStencil(0),Y.gl.clearColor(n.r,n.g,n.b,n.a),Y.gl.clear(17664)},setupEvents:function(){window.document.addEventListener("fullscreenchange",$bind(this,this.handleFullscreenChange)),window.document.addEventListener("fullscreenerror",$bind(this,this.handleFullscreenError)),this.window.addEventListener("mouseenter",$bind(this,this.handleMouseEnter)),this.window.addEventListener("mouseleave",$bind(this,this.handleMouseLeave)),window.document.addEventListener("visibilitychange",$bind(this,this.handleVisibilityChange)),window.document.addEventListener("keydown",$bind(this,this.handleKeyDown)),window.document.addEventListener("keyup",$bind(this,this.handleKeyUp)),window.document.addEventListener("keypress",$bind(this,this.handleKeyPress)),this.window.addEventListener("contextmenu",$bind(this,this.handleContextMenu));var e=this.app.config.runtime.mouseUseBrowserWindowEvents?window:this.window;e.addEventListener("mousedown",$bind(this,this.handleMouseDown)),e.addEventListener("mouseup",$bind(this,this.handleMouseUp)),e.addEventListener("mousemove",$bind(this,this.handleMouseMove)),this.window.addEventListener("wheel",$bind(this,this.handleWheel)),this.window.addEventListener("touchstart",$bind(this,this.handleTouchStart)),this.window.addEventListener("touchend",$bind(this,this.handleTouchEnd)),this.window.addEventListener("touchmove",$bind(this,this.handleTouchMove)),window.addEventListener("gamepadconnected",$bind(this,this.handleGamepadConnected)),window.addEventListener("gamepaddisconnected",$bind(this,this.handleGamepadDisconnected))},handleVisibilityChange:function(e){window.document.hidden?(this.app.emitWindowEvent(2,window.performance.now()/1e3-ll.timestampStart,1,0,0),this.app.emitWindowEvent(7,window.performance.now()/1e3-ll.timestampStart,1,0,0),this.app.emitWindowEvent(13,window.performance.now()/1e3-ll.timestampStart,1,0,0)):(this.app.emitWindowEvent(1,window.performance.now()/1e3-ll.timestampStart,1,0,0),this.app.emitWindowEvent(9,window.performance.now()/1e3-ll.timestampStart,1,0,0),this.app.emitWindowEvent(12,window.performance.now()/1e3-ll.timestampStart,1,0,0))},bindCustomElementTouchEvents:function(e){e.addEventListener("touchstart",$bind(this,this.handleTouchStart)),e.addEventListener("touchend",$bind(this,this.handleTouchEnd)),e.addEventListener("touchmove",$bind(this,this.handleTouchMove))},handleContextMenu:function(e){this.app.config.runtime.preventDefaultContextMenu&&e.preventDefault()},handleFullscreenChange:function(e){var n=window.document.fullscreenElement;null!=n?(Ni.debug("Web / Entering fullscreen (id="+n.id+")",{fileName:"clay/web/WebRuntime.hx",lineNumber:388,className:"clay.web.WebRuntime",methodName:"handleFullscreenChange"}),this.app.config.window.fullscreen=!0,this.app.emitWindowEvent(15,window.performance.now()/1e3-ll.timestampStart,1,0,0)):(Ni.debug("Web / Leaving fullscreen",{fileName:"clay/web/WebRuntime.hx",lineNumber:393,className:"clay.web.WebRuntime",methodName:"handleFullscreenChange"}),this.app.config.window.fullscreen=!1,this.app.emitWindowEvent(16,window.performance.now()/1e3-ll.timestampStart,1,0,0))},handleFullscreenError:function(e){Ni.warning("Web / Failed to change fullscreen setting: "+V.string(e),{fileName:"clay/web/WebRuntime.hx",lineNumber:402,className:"clay.web.WebRuntime",methodName:"handleFullscreenError"})},handleMouseEnter:function(e){this.app.emitWindowEvent(10,window.performance.now()/1e3-ll.timestampStart,1,0,0)},handleMouseLeave:function(e){this.app.emitWindowEvent(11,window.performance.now()/1e3-ll.timestampStart,1,0,0)},handleMouseDown:function(e){var n,t,i,l,s,r=this;this.skipMouseEvents||(e.preventDefault(),n=this.app.input,i=Math.floor(this.windowDpr*(e.pageX-this.windowX)),l=Math.floor(this.windowDpr*(e.pageY-this.windowY)),s=e.button,t=window.performance.now()/1e3-ll.timestampStart,n.app.events.mouseDown(i,l,s,t,1),2==e.button&&(i=Math.floor(this.windowDpr*(e.pageX-this.windowX)),l=Math.floor(this.windowDpr*(e.pageY-this.windowY)),s=e.button,this.nextFrameCallbacks.push(function(){r.nextFrameCallbacks.push(function(){var e=r.app.input,n=window.performance.now()/1e3-ll.timestampStart;e.app.events.mouseUp(i,l,s,n,1)})})))},handleMouseUp:function(e){var n,t,i,l;this.skipMouseEvents||(e.preventDefault(),n=this.app.input,t=Math.floor(this.windowDpr*(e.pageX-this.windowX)),i=Math.floor(this.windowDpr*(e.pageY-this.windowY)),e=e.button,l=window.performance.now()/1e3-ll.timestampStart,n.app.events.mouseUp(t,i,e,l,1))},handleMouseMove:function(e){var n,t,i,l,s;this.skipMouseEvents||(e.preventDefault(),n=null==e.movementX?0:e.movementX,t=null==e.movementY?0:e.movementY,n=Math.floor(n*this.windowDpr),t=Math.floor(t*this.windowDpr),i=this.app.input,l=Math.floor(this.windowDpr*(e.pageX-this.windowX)),e=Math.floor(this.windowDpr*(e.pageY-this.windowY)),s=window.performance.now()/1e3-ll.timestampStart,i.app.events.mouseMove(l,e,n,t,s,1))},handleWheel:function(e){var n,t,i;this.app.config.runtime.preventDefaultMouseWheel&&e.preventDefault(),this.skipMouseEvents||(n=this.app.input,t=Math.round(.1*e.deltaX),e=Math.round(.1*e.deltaY),i=window.performance.now()/1e3-ll.timestampStart,n.app.events.mouseWheel(t,e,i,1))},handleTouchStart:function(e){this.app.config.runtime.preventDefaultTouches&&e.preventDefault();for(var n=this.window.getBoundingClientRect(),t=0,i=e.changedTouches;t<i.length;){var l=i[t],s=(++t,l.clientX-n.left),r=l.clientY-n.top,a=(s/=n.width,r/=n.height,this.touches.get(l.identifier)),a=(null==a?this.touches.set(l.identifier,a={x:s,y:r}):(a.x=s,a.y=r),this.app.input),l=l.identifier,h=window.performance.now()/1e3-ll.timestampStart;a.app.events.touchDown(s,r,0,0,l,h)}},handleTouchEnd:function(e){this.app.config.runtime.preventDefaultTouches&&e.preventDefault();for(var n=this.window.getBoundingClientRect(),t=0,i=e.changedTouches;t<i.length;){var l=i[t],s=(++t,l.clientX-n.left),r=l.clientY-n.top,a=(s/=n.width,r/=n.height,this.touches.get(l.identifier)),h=(null==a&&this.touches.set(l.identifier,a={x:s,y:r}),this.app.input),u=s-a.x,c=r-a.y,l=l.identifier,o=window.performance.now()/1e3-ll.timestampStart;h.app.events.touchUp(s,r,u,c,l,o),a.x=s,a.y=r}},handleTouchMove:function(e){this.app.config.runtime.preventDefaultTouches&&e.preventDefault();for(var n=this.window.getBoundingClientRect(),t=0,i=e.changedTouches;t<i.length;){var l=i[t],s=(++t,l.clientX-n.left),r=l.clientY-n.top,a=(s/=n.width,r/=n.height,this.touches.get(l.identifier)),h=(null==a&&this.touches.set(l.identifier,a={x:s,y:r}),this.app.input),u=s-a.x,c=r-a.y,l=l.identifier,o=window.performance.now()/1e3-ll.timestampStart;h.app.events.touchMove(s,r,u,c,l,o),a.x=s,a.y=r}},clearPendingKeyUps:function(){for(;0<this.pendingKeyUps.length;){var e,n,t,i,l,s,r=this.pendingKeyUps.shift();1==this.keyDownStates.get(r.keyCode)&&(this.keyDownStates.set(r.keyCode,!1),e=this.app.input,n=r.keyCode,t=r.scanCode,i=r.repeat,l=r.modState,s=window.performance.now()/1e3-ll.timestampStart,e.app.events.keyUp(n,t,i,l,s,r.windowId))}},handleKeyDown:function(e){if(!this.skipKeyboardEvents){var n=this.convertKeyCode(e.keyCode),t=this.convertScanCode(e.code,n),i=this.modStateFromEvent(e);if(!i.none)switch(n){case 1073742048:case 1073742049:case 1073742050:case 1073742051:case 1073742052:case 1073742053:case 1073742054:case 1073742055:break;default:(i.lctrl||i.rctrl||i.lalt||i.ralt||i.lmeta||i.rmeta)&&this.pendingKeyUps.push({keyCode:n,scanCode:t,repeat:e.repeat,modState:i,windowId:1})}-1!=this.app.config.runtime.preventDefaultKeys.indexOf(n)&&e.preventDefault(),this.keyDownStates.set(n,!0);var l=this.app.input,s=e.repeat,r=window.performance.now()/1e3-ll.timestampStart;l.app.events.keyDown(n,t,s,i,r,1)}},handleKeyUp:function(e){var n,t,i,l,s;this.skipKeyboardEvents||(n=this.convertKeyCode(e.keyCode),t=this.convertScanCode(e.code,n),i=this.modStateFromEvent(e),-1!=this.app.config.runtime.preventDefaultKeys.indexOf(n)&&e.preventDefault(),1==this.keyDownStates.get(n)&&(this.keyDownStates.set(n,!1),l=this.app.input,e=e.repeat,s=window.performance.now()/1e3-ll.timestampStart,l.app.events.keyUp(n,t,e,i,s,1)))},handleKeyPress:function(e){var n,t,i;this.skipKeyboardEvents||0!=e.which&&8!=e.keyCode&&13!=e.keyCode&&(e=e.charCode,e=String.fromCodePoint(e),n=this.app.input,t=e.length,i=window.performance.now()/1e3-ll.timestampStart,n.app.events.text(e,0,t,2,i,1))},handleGamepadConnected:function(e){Ni.debug("Gamepad connected at index "+e.gamepad.index+": "+e.gamepad.id+". "+e.gamepad.buttons.length+" buttons, "+e.gamepad.axes.length+" axes",{fileName:"clay/web/WebRuntime.hx",lineNumber:748,className:"clay.web.WebRuntime",methodName:"handleGamepadConnected"});var n=e.gamepad;if(null==this.gamepadButtonCache[n.index]){this.gamepadButtonCache[n.index]=[];for(var t=0,i=n.buttons.length;t<i;){t++;this.gamepadButtonCache[n.index].push(0)}this.gamepadAxisCache[n.index]=[];for(t=0,i=n.axes.length;t<i;){t++;this.gamepadAxisCache[n.index].push(0)}}var l=this.app.input,n=e.gamepad.index,e=e.gamepad.id,s=window.performance.now()/1e3-ll.timestampStart;l.app.events.gamepadDevice(n,e,1,s)},handleGamepadDisconnected:function(e){Ni.debug("Gamepad disconnected at index "+e.gamepad.index+": "+e.gamepad.id,{fileName:"clay/web/WebRuntime.hx",lineNumber:763,className:"clay.web.WebRuntime",methodName:"handleGamepadDisconnected"});var n=e.gamepad,t=(this.gamepadButtonCache[n.index]=null,this.gamepadAxisCache[n.index]=null,this.app.input),n=e.gamepad.index,e=e.gamepad.id,i=window.performance.now()/1e3-ll.timestampStart;t.app.events.gamepadDevice(n,e,2,i)},convertKeyCode:function(e){return 65<=e&&e<=90?e+32:sl.domKeyToKeyCode(e)},convertScanCode:function(e,n){if(null==e)return O.toScanCode(n);switch(e){case"AltLeft":return 226;case"AltRight":return 230;case"ArrowDown":return 81;case"ArrowLeft":return 80;case"ArrowRight":return 79;case"ArrowUp":return 82;case"AudioVolumeDown":case"VolumeDown":return 129;case"AudioVolumeMute":return 262;case"AudioVolumeUp":case"VolumeUp":return 128;case"Backquote":return 53;case"Backslash":return 49;case"Backspace":return 42;case"BracketLeft":return 47;case"BracketRight":return 48;case"BrowserBack":return 270;case"BrowserFavorites":return 274;case"BrowserForward":return 271;case"BrowserHome":return 269;case"BrowserRefresh":return 273;case"BrowserSearch":return 268;case"BrowserStop":return 272;case"Cancel":return 155;case"CapsLock":return 57;case"Comma":return 54;case"ContextMenu":return 118;case"ControlLeft":return 224;case"ControlRight":return 228;case"Delete":return 76;case"Digit0":return 39;case"Digit1":return 30;case"Digit2":return 31;case"Digit3":return 32;case"Digit4":return 33;case"Digit5":return 34;case"Digit6":return 35;case"Digit7":return 36;case"Digit8":return 37;case"Digit9":return 38;case"End":return 77;case"Enter":return 40;case"Equal":return 46;case"Escape":return 41;case"F1":return 58;case"F10":return 67;case"F11":return 68;case"F12":return 69;case"F2":return 59;case"F3":return 60;case"F4":return 61;case"F5":return 62;case"F6":return 63;case"F7":return 64;case"F8":return 65;case"F9":return 66;case"Help":case"Insert":return 73;case"Home":return 74;case"IntlBackslash":return 100;case"KanaMode":case"Lang1":return 144;case"KeyA":return 4;case"KeyB":return 5;case"KeyC":return 6;case"KeyD":return 7;case"KeyE":return 8;case"KeyF":return 9;case"KeyG":return 10;case"KeyH":return 11;case"KeyI":return 12;case"KeyJ":return 13;case"KeyK":return 14;case"KeyL":return 15;case"KeyM":return 16;case"KeyN":return 17;case"KeyO":return 18;case"KeyP":return 19;case"KeyQ":return 20;case"KeyR":return 21;case"KeyS":return 22;case"KeyT":return 23;case"KeyU":return 24;case"KeyV":return 25;case"KeyW":return 26;case"KeyX":return 27;case"KeyY":return 28;case"KeyZ":return 29;case"Lang2":return 145;case"Lang3":return 146;case"Lang4":return 147;case"Lang5":return 148;case"Lang6":return 149;case"Lang7":return 150;case"Lang8":return 151;case"Lang9":return 152;case"LaunchApp1":return 283;case"LaunchApp2":return 284;case"LaunchMail":return 265;case"MediaPlayPause":return 261;case"MediaSelect":return 263;case"MediaStop":return 260;case"MediaTrackNext":return 258;case"MediaTrackPrevious":return 259;case"MetaLeft":case"OSLeft":return 227;case"MetaRight":case"OSRight":return 231;case"Minus":return 45;case"NumLock":return 83;case"Numpad0":return 98;case"Numpad1":return 89;case"Numpad2":return 90;case"Numpad3":return 91;case"Numpad4":return 92;case"Numpad5":return 93;case"Numpad6":return 94;case"Numpad7":return 95;case"Numpad8":return 96;case"Numpad9":return 97;case"NumpadAdd":return 87;case"NumpadComma":return 133;case"NumpadDecimal":return 220;case"NumpadDivide":return 84;case"NumpadEnter":return 88;case"NumpadEqual":return 103;case"NumpadMultiply":return 85;case"NumpadSubtract":return 86;case"PageDown":return 78;case"PageUp":return 75;case"Pause":return 72;case"Period":return 55;case"Power":return 102;case"PrintScreen":return 70;case"Quote":return 52;case"ScrollLock":return 71;case"Semicolon":return 51;case"ShiftLeft":return 225;case"ShiftRight":return 229;case"Slash":return 56;case"Space":return 44;case"Tab":return 43;default:return O.toScanCode(n)}},modStateFromEvent:function(e){var n=!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey);return this.app.input.modState.none=n,this.app.input.modState.lshift=e.shiftKey,this.app.input.modState.rshift=e.shiftKey,this.app.input.modState.lctrl=e.ctrlKey,this.app.input.modState.rctrl=e.ctrlKey,this.app.input.modState.lalt=e.altKey,this.app.input.modState.ralt=e.altKey,this.app.input.modState.lmeta=e.metaKey,this.app.input.modState.rmeta=e.metaKey,this.app.input.modState.num=!1,this.app.input.modState.caps=!1,this.app.input.modState.mode=!1,this.app.input.modState.ctrl=e.ctrlKey,this.app.input.modState.shift=e.shiftKey,this.app.input.modState.alt=e.altKey,this.app.input.modState.meta=e.metaKey,this.app.input.modState},getWindowX:function(e){return Math.round(e.left+window.pageXOffset-window.document.body.clientTop)},getWindowY:function(e){return Math.round(e.top+window.pageYOffset-window.document.body.clientLeft)},translateMouseX:function(e){return Math.floor(this.windowDpr*(e.pageX-this.windowX))},translateMouseY:function(e){return Math.floor(this.windowDpr*(e.pageY-this.windowY))},updateWindowBounds:function(){var e=this.windowDpr,n=(this.windowDpr=this.windowDevicePixelRatio(),this.window.getBoundingClientRect()),t=Math.round(n.left+window.pageXOffset-window.document.body.clientTop),i=Math.round(n.top+window.pageYOffset-window.document.body.clientLeft),l=Math.round(n.width),n=Math.round(n.height);t==this.windowX&&i==this.windowY||(this.windowX=t,this.windowY=i,this.app.emitWindowEvent(4,window.performance.now()/1e3-ll.timestampStart,1,this.windowX,this.windowY)),l==this.windowW&&n==this.windowH&&e==this.windowDpr||(this.windowW=l,this.windowH=n,this.window.width=Math.floor(this.windowW*this.windowDpr),this.window.height=Math.floor(this.windowH*this.windowDpr),this.app.emitWindowEvent(6,window.performance.now()/1e3-ll.timestampStart,1,this.window.width,this.window.height))},initGamepads:function(){var e=this.getGamepadList();if(null!=e){this.gamepadsSupported=!0,this.gamepadButtonCache=[],this.gamepadAxisCache=[];for(var n=0;n<e.length;){var t=e[n];if(++n,null!=t&&null==this.gamepadButtonCache[t.index]){this.gamepadButtonCache[t.index]=[];for(var i=0,l=t.buttons.length;i<l;){i++;this.gamepadButtonCache[t.index].push(0)}this.gamepadAxisCache[t.index]=[];for(var s=0,r=t.axes.length;s<r;){s++;this.gamepadAxisCache[t.index].push(0)}}}}else Ni.warning("Gamepads are not supported in this browser :(",{fileName:"clay/web/WebRuntime.hx",lineNumber:1031,className:"clay.web.WebRuntime",methodName:"initGamepads"})},getGamepadList:function(){return null!=ie.navigator.getGamepads?ie.navigator.getGamepads():null!=ie.navigator.webkitGetGamepads?ie.navigator.webkitGetGamepads():null},initGamepadCacheIfNeeded:function(e){if(null==this.gamepadButtonCache[e.index]){this.gamepadButtonCache[e.index]=[];for(var n=0,t=e.buttons.length;n<t;){n++;this.gamepadButtonCache[e.index].push(0)}this.gamepadAxisCache[e.index]=[];for(n=0,t=e.axes.length;n<t;){n++;this.gamepadAxisCache[e.index].push(0)}}},deleteGamepadCache:function(e){this.gamepadButtonCache[e.index]=null,this.gamepadAxisCache[e.index]=null},pollGamepads:function(){var e=this.getGamepadList();if(null!=e)for(var n=e.length,t=0;t<n;){var i=e[t];if(null==i);else{if(null==this.gamepadButtonCache[i.index]){this.gamepadButtonCache[i.index]=[];for(var l=0,s=i.buttons.length;l<s;){l++;this.gamepadButtonCache[i.index].push(0)}this.gamepadAxisCache[i.index]=[];for(var r=0,a=i.axes.length;r<a;){r++;this.gamepadAxisCache[i.index].push(0)}}for(var h=this.gamepadAxisCache[i.index],u=0,c=i.axes.length;u<c;){var o,_,d,b=u++,g=i.axes[b];g!=h[b]&&(h[b]=g,o=this.app.input,_=i.index,d=window.performance.now()/1e3-ll.timestampStart,o.app.events.gamepadAxis(_,b,g,d))}for(var O=this.gamepadButtonCache[i.index],f=0,p=i.buttons.length;f<p;){var m,w,v,y,C=f++,U=i.buttons[C];U.value!=O[C]&&(O[C]=U.value,U.pressed?(m=this.app.input,w=i.index,v=U.value,y=window.performance.now()/1e3-ll.timestampStart,m.app.events.gamepadDown(w,C,v,y)):(m=this.app.input,w=i.index,v=U.value,y=window.performance.now()/1e3-ll.timestampStart,m.app.events.gamepadUp(w,C,v,y)))}}++t}},windowDevicePixelRatio:function(){return null==window.devicePixelRatio?1:window.devicePixelRatio},windowWidth:function(){return Math.round(this.windowW*this.windowDevicePixelRatio())},windowHeight:function(){return Math.round(this.windowH*this.windowDevicePixelRatio())},setWindowFullscreen:function(e){return e?this.window.requestFullscreen():window.document.exitFullscreen(),!0},setWindowTitle:function(e){this.app.config.window.title=e,window.document.title=e},clamp:function(e){return Math.max(0,Math.min(e,1))},startGamepadRumble:function(e,n,t,i){var e=this.getGamepadList()[e];null!=e&&null!=(e=e.vibrationActuator)&&e.playEffect("dual-rumble",{duration:1e3*i,weakMagnitude:Math.max(0,Math.min(n,1)),strongMagnitude:Math.max(0,Math.min(t,1))})},stopGamepadRumble:function(e){var e=this.getGamepadList()[e];null!=e&&null!=(e=e.vibrationActuator)&&e.playEffect("dual-rumble",{duration:1,weakMagnitude:0,strongMagnitude:0})},getGamepadName:function(e){var n=this.getGamepadList();if(null!=n)for(var t=0;t<n.length;){var i=n[t];if(++t,null!=i&&i.index==e)return i.id}return null},__class__:ll}),function(){}),rl=((L["clay.web._WebRuntime.DOMKeys"]=sl).__name__="clay.web._WebRuntime.DOMKeys",sl.domKeyToKeyCode=function(e){switch(e){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 93:return 1073742055;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 109:return 1073741910;case 110:return 1073742044;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 160:return 94;case 161:return 33;case 162:return 34;case 163:return 35;case 164:return 36;case 165:return 37;case 166:return 38;case 167:return 95;case 168:return 40;case 169:return 41;case 170:return 42;case 171:return 43;case 172:return 92;case 173:return 45;case 174:return 91;case 175:return 93;case 176:return 96;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 188:return 44;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 224:return 1073742051}return e},(L["format.gz.Reader"]=md).__name__="format.gz.Reader",md.prototype={i:null,read:function(){var e=this.readHeader(),n=new Zl;return this.readData(n),{file:e.fileName,data:n.getBytes()}},readHeader:function(){if(31!=this.i.readByte()||139!=this.i.readByte())throw Q.thrown("Invalid GZ header");if(8!=this.i.readByte())throw Q.thrown("Invalid compression method");var e,n=this.i.readByte(),t=(this.i.read(4),this.i.readByte(),this.i.readByte(),null),i=null,l=null;return 0!=(4&n)&&(e=this.i.readUInt16(),l=this.i.read(e)),0!=(8&n)&&(t=this.i.readUntil(0)),0!=(16&n)&&(i=this.i.readUntil(0)),0!=(2&n)&&this.i.readUInt16(),{fileName:t,comments:i,extraData:l}},readData:function(e,n){null==n&&(n=65536);for(var t=new kl(new ArrayBuffer(n)),i=0,l=new vs(this.i,!1,!1);;){var s=l.readBytes(t,0,n);if(e.writeFullBytes(t,0,s),s<n)break;i+=s}return i},refill:function(e,n){try{for(;n!=e.length;)n+=this.i.readBytes(e,n,e.length-n)}catch(e){if(Al.lastError=e,!(Q.caught(e).unwrap()instanceof Jl))throw e}if(0==n)throw Q.thrown(new Jl);return e=n!=e.length?e.sub(0,n):e},__class__:md},I["format.tmx.TmxOrientation"]={__ename__:"format.tmx.TmxOrientation",__constructs__:null,Orthogonal:{_hx_name:"Orthogonal",_hx_index:0,__enum__:"format.tmx.TmxOrientation",toString:d},Isometric:{_hx_name:"Isometric",_hx_index:1,__enum__:"format.tmx.TmxOrientation",toString:d},Staggered:{_hx_name:"Staggered",_hx_index:2,__enum__:"format.tmx.TmxOrientation",toString:d},Hexagonal:{_hx_name:"Hexagonal",_hx_index:3,__enum__:"format.tmx.TmxOrientation",toString:d},Unknown:((b=function(e){return{_hx_index:4,value:e,__enum__:"format.tmx.TmxOrientation",toString:d}})._hx_name="Unknown",b.__params__=["value"],b)}),al=(rl.__constructs__=[rl.Orthogonal,rl.Isometric,rl.Staggered,rl.Hexagonal,rl.Unknown],I["format.tmx.TmxRenderOrder"]={__ename__:"format.tmx.TmxRenderOrder",__constructs__:null,RightDown:{_hx_name:"RightDown",_hx_index:0,__enum__:"format.tmx.TmxRenderOrder",toString:d},RightUp:{_hx_name:"RightUp",_hx_index:1,__enum__:"format.tmx.TmxRenderOrder",toString:d},LeftDown:{_hx_name:"LeftDown",_hx_index:2,__enum__:"format.tmx.TmxRenderOrder",toString:d},LeftUp:{_hx_name:"LeftUp",_hx_index:3,__enum__:"format.tmx.TmxRenderOrder",toString:d},Unknown:((b=function(e){return{_hx_index:4,value:e,__enum__:"format.tmx.TmxRenderOrder",toString:d}})._hx_name="Unknown",b.__params__=["value"],b)}),hl=(al.__constructs__=[al.RightDown,al.RightUp,al.LeftDown,al.LeftUp,al.Unknown],I["format.tmx.TmxStaggerIndex"]={__ename__:"format.tmx.TmxStaggerIndex",__constructs__:null,Even:{_hx_name:"Even",_hx_index:0,__enum__:"format.tmx.TmxStaggerIndex",toString:d},Odd:{_hx_name:"Odd",_hx_index:1,__enum__:"format.tmx.TmxStaggerIndex",toString:d},Unknown:((b=function(e){return{_hx_index:2,value:e,__enum__:"format.tmx.TmxStaggerIndex",toString:d}})._hx_name="Unknown",b.__params__=["value"],b)}),ul=(hl.__constructs__=[hl.Even,hl.Odd,hl.Unknown],I["format.tmx.TmxStaggerAxis"]={__ename__:"format.tmx.TmxStaggerAxis",__constructs__:null,AxisX:{_hx_name:"AxisX",_hx_index:0,__enum__:"format.tmx.TmxStaggerAxis",toString:d},AxisY:{_hx_name:"AxisY",_hx_index:1,__enum__:"format.tmx.TmxStaggerAxis",toString:d},Unknown:((b=function(e){return{_hx_index:2,value:e,__enum__:"format.tmx.TmxStaggerAxis",toString:d}})._hx_name="Unknown",b.__params__=["value"],b)}),cl=(ul.__constructs__=[ul.AxisX,ul.AxisY,ul.Unknown],(L["format.tmx.TmxMap"]=rd).__name__="format.tmx.TmxMap",rd.prototype={version:null,tiledVersion:null,orientation:null,width:null,height:null,tileWidth:null,tileHeight:null,backgroundColor:null,renderOrder:null,staggerIndex:null,staggerAxis:null,hexSideLength:null,nextObjectId:null,nextLayerId:null,properties:null,tilesets:null,layers:null,infinite:null,localPath:null,__class__:rd},function(e,n,t,i,l,s,r,a,h,u,c,o,_,d,b,g){this.firstGID=e,this.source=n,this.name=t,this.tileWidth=i,this.tileHeight=l,this.spacing=s,this.margin=r,this.tileCount=a,this.columns=h,this.tileOffset=u,this.properties=c,this.image=o,this.terrainTypes=_,this.tiles=d,this.grid=b,this.wangSets=g}),ol=((L["format.tmx.TmxTileset"]=cl).__name__="format.tmx.TmxTileset",cl.prototype={firstGID:null,source:null,name:null,tileWidth:null,tileHeight:null,spacing:null,margin:null,tileCount:null,columns:null,tileOffset:null,properties:null,image:null,terrainTypes:null,tiles:null,grid:null,wangSets:null,__class__:cl},function(e,n,t){this.orientation=e,this.width=n,this.height=t}),_l=((L["format.tmx.TmxTilesetGrid"]=ol).__name__="format.tmx.TmxTilesetGrid",ol.prototype={orientation:null,width:null,height:null,__class__:ol},function(e,n){this.x=e,this.y=n}),dl=((L["format.tmx.TmxTileOffset"]=_l).__name__="format.tmx.TmxTileOffset",_l.prototype={x:null,y:null,__class__:_l},(L["format.tmx.TmxWangSet"]=vd).__name__="format.tmx.TmxWangSet",vd.prototype={name:null,tile:null,corners:null,edges:null,tiles:null,__class__:vd},(L["format.tmx.TmxWangSetColor"]=wd).__name__="format.tmx.TmxWangSetColor",wd.prototype={name:null,color:null,tile:null,probability:null,__class__:wd},(L["format.tmx.TmxWangSetTile"]=xd).__name__="format.tmx.TmxWangSetTile",xd.prototype={tileID:null,wangID:null,__class__:xd},(L["format.tmx.TmxImage"]=yd).__name__="format.tmx.TmxImage",yd.prototype={format:null,id:null,source:null,transparent:null,width:null,height:null,data:null,__class__:yd},function(e,n,t){this.name=e,this.tile=n,this.properties=t}),bl=((L["format.tmx.TmxTerrain"]=dl).__name__="format.tmx.TmxTerrain",dl.prototype={name:null,tile:null,properties:null,__class__:dl},function(e,n,t,i,l,s,r,a){this.id=e,this.type=n,this.terrain=t,this.probability=i,this.properties=l,this.image=s,this.objectGroup=r,this.animation=a}),gl=((L["format.tmx.TmxTilesetTile"]=bl).__name__="format.tmx.TmxTilesetTile",bl.prototype={id:null,type:null,terrain:null,probability:null,properties:null,image:null,objectGroup:null,animation:null,__class__:bl},function(e,n){this.tileId=e,this.duration=n}),Ol=((L["format.tmx.TmxTilesetTileFrame"]=gl).__name__="format.tmx.TmxTilesetTileFrame",gl.prototype={tileId:null,duration:null,__class__:gl},I["format.tmx.TmxLayer"]={__ename__:"format.tmx.TmxLayer",__constructs__:null,LTileLayer:((b=function(e){return{_hx_index:0,layer:e,__enum__:"format.tmx.TmxLayer",toString:d}})._hx_name="LTileLayer",b.__params__=["layer"],b),LObjectGroup:((b=function(e){return{_hx_index:1,group:e,__enum__:"format.tmx.TmxLayer",toString:d}})._hx_name="LObjectGroup",b.__params__=["group"],b),LImageLayer:((b=function(e){return{_hx_index:2,layer:e,__enum__:"format.tmx.TmxLayer",toString:d}})._hx_name="LImageLayer",b.__params__=["layer"],b),LGroup:((b=function(e){return{_hx_index:3,group:e,__enum__:"format.tmx.TmxLayer",toString:d}})._hx_name="LGroup",b.__params__=["group"],b)}),fl=(Ol.__constructs__=[Ol.LTileLayer,Ol.LObjectGroup,Ol.LImageLayer,Ol.LGroup],(L["format.tmx.TmxGroup"]=Dd).__name__="format.tmx.TmxGroup",Dd.prototype={id:null,name:null,offsetX:null,offsetY:null,opacity:null,visible:null,properties:null,layers:null,__class__:Dd},(L["format.tmx.TmxBaseLayer"]=Ed).__name__="format.tmx.TmxBaseLayer",Ed.prototype={id:null,name:null,x:null,y:null,width:null,height:null,opacity:null,visible:null,offsetX:null,offsetY:null,properties:null,__class__:Ed},(L["format.tmx.TmxImageLayer"]=Fd).__name__="format.tmx.TmxImageLayer",Fd.__super__=Ed,Fd.prototype=$extend(Ed.prototype,{image:null,__class__:Fd}),(L["format.tmx.TmxTileLayer"]=Gd).__name__="format.tmx.TmxTileLayer",Gd.__super__=Ed,Gd.prototype=$extend(Ed.prototype,{data:null,__class__:Gd}),I["format.tmx.TmxDataEncoding"]={__ename__:"format.tmx.TmxDataEncoding",__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"format.tmx.TmxDataEncoding",toString:d},Base64:{_hx_name:"Base64",_hx_index:1,__enum__:"format.tmx.TmxDataEncoding",toString:d},CSV:{_hx_name:"CSV",_hx_index:2,__enum__:"format.tmx.TmxDataEncoding",toString:d},Unknown:((b=function(e){return{_hx_index:3,value:e,__enum__:"format.tmx.TmxDataEncoding",toString:d}})._hx_name="Unknown",b.__params__=["value"],b)}),pl=(fl.__constructs__=[fl.None,fl.Base64,fl.CSV,fl.Unknown],I["format.tmx.TmxDataCompression"]={__ename__:"format.tmx.TmxDataCompression",__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"format.tmx.TmxDataCompression",toString:d},GZip:{_hx_name:"GZip",_hx_index:1,__enum__:"format.tmx.TmxDataCompression",toString:d},ZLib:{_hx_name:"ZLib",_hx_index:2,__enum__:"format.tmx.TmxDataCompression",toString:d},Unknown:((b=function(e){return{_hx_index:3,value:e,__enum__:"format.tmx.TmxDataCompression",toString:d}})._hx_name="Unknown",b.__params__=["value"],b)}),ml=(pl.__constructs__=[pl.None,pl.GZip,pl.ZLib,pl.Unknown],(L["format.tmx.TmxData"]=Jd).__name__="format.tmx.TmxData",Jd.prototype={encoding:null,compression:null,tiles:null,chunks:null,data:null,__class__:Jd},(L["format.tmx.TmxChunk"]=Kd).__name__="format.tmx.TmxChunk",Kd.prototype={x:null,y:null,width:null,height:null,tiles:null,__class__:Kd},I["format.tmx.TmxObjectGroupDrawOrder"]={__ename__:"format.tmx.TmxObjectGroupDrawOrder",__constructs__:null,Index:{_hx_name:"Index",_hx_index:0,__enum__:"format.tmx.TmxObjectGroupDrawOrder",toString:d},Topdown:{_hx_name:"Topdown",_hx_index:1,__enum__:"format.tmx.TmxObjectGroupDrawOrder",toString:d},Unknown:((b=function(e){return{_hx_index:2,value:e,__enum__:"format.tmx.TmxObjectGroupDrawOrder",toString:d}})._hx_name="Unknown",b.__params__=["value"],b)}),wl=(ml.__constructs__=[ml.Index,ml.Topdown,ml.Unknown],(L["format.tmx.TmxObjectGroup"]=Nd).__name__="format.tmx.TmxObjectGroup",Nd.__super__=Ed,Nd.prototype=$extend(Ed.prototype,{color:null,drawOrder:null,objects:null,__class__:Nd}),(L["format.tmx.TmxPoint"]=Od).__name__="format.tmx.TmxPoint",Od.prototype={x:null,y:null,__class__:Od},I["format.tmx.TmxObjectType"]={__ename__:"format.tmx.TmxObjectType",__constructs__:null,OTRectangle:{_hx_name:"OTRectangle",_hx_index:0,__enum__:"format.tmx.TmxObjectType",toString:d},OTTile:((b=function(e){return{_hx_index:1,gid:e,__enum__:"format.tmx.TmxObjectType",toString:d}})._hx_name="OTTile",b.__params__=["gid"],b),OTExternalTile:((b=function(e,n){return{_hx_index:2,gid:e,tileset:n,__enum__:"format.tmx.TmxObjectType",toString:d}})._hx_name="OTExternalTile",b.__params__=["gid","tileset"],b),OTEllipse:{_hx_name:"OTEllipse",_hx_index:3,__enum__:"format.tmx.TmxObjectType",toString:d},OTPoint:{_hx_name:"OTPoint",_hx_index:4,__enum__:"format.tmx.TmxObjectType",toString:d},OTPolygon:((b=function(e){return{_hx_index:5,points:e,__enum__:"format.tmx.TmxObjectType",toString:d}})._hx_name="OTPolygon",b.__params__=["points"],b),OTText:((b=function(e){return{_hx_index:6,text:e,__enum__:"format.tmx.TmxObjectType",toString:d}})._hx_name="OTText",b.__params__=["text"],b),OTPolyline:((b=function(e){return{_hx_index:7,points:e,__enum__:"format.tmx.TmxObjectType",toString:d}})._hx_name="OTPolyline",b.__params__=["points"],b)}),vl=(wl.__constructs__=[wl.OTRectangle,wl.OTTile,wl.OTExternalTile,wl.OTEllipse,wl.OTPoint,wl.OTPolygon,wl.OTText,wl.OTPolyline],(L["format.tmx.TmxObject"]=Qd).__name__="format.tmx.TmxObject",Qd.prototype={id:null,name:null,type:null,x:null,y:null,width:null,height:null,rotation:null,visible:null,objectType:null,properties:null,flippedHorizontally:null,flippedVertically:null,template:null,__class__:Qd},(L["format.tmx.TmxText"]=Rd).__name__="format.tmx.TmxText",Rd.prototype={fontFamily:null,pixelSize:null,wrap:null,color:null,bold:null,italic:null,underline:null,strikeout:null,kerning:null,halign:null,valign:null,text:null,__class__:Rd},I["format.tmx.TmxPropertyType"]={__ename__:"format.tmx.TmxPropertyType",__constructs__:null,PTString:{_hx_name:"PTString",_hx_index:0,__enum__:"format.tmx.TmxPropertyType",toString:d},PTInt:{_hx_name:"PTInt",_hx_index:1,__enum__:"format.tmx.TmxPropertyType",toString:d},PTBool:{_hx_name:"PTBool",_hx_index:2,__enum__:"format.tmx.TmxPropertyType",toString:d},PTFloat:{_hx_name:"PTFloat",_hx_index:3,__enum__:"format.tmx.TmxPropertyType",toString:d},PTFile:{_hx_name:"PTFile",_hx_index:4,__enum__:"format.tmx.TmxPropertyType",toString:d},PTColor:{_hx_name:"PTColor",_hx_index:5,__enum__:"format.tmx.TmxPropertyType",toString:d}}),yl=(vl.__constructs__=[vl.PTString,vl.PTInt,vl.PTBool,vl.PTFloat,vl.PTFile,vl.PTColor],function(){this.names=[],this.types=[],this.strings=[],this.cache=[],this.ints=[],this.floats=[]}),Cl=((L["format.tmx._Data.ImplTmxProperties"]=yl).__name__="format.tmx._Data.ImplTmxProperties",yl.prototype={names:null,types:null,strings:null,cache:null,ints:null,floats:null,propertyCount:function(){return this.names.length},exists:function(e){return-1!=this.names.indexOf(e)},existsType:function(e,n){e=this.names.indexOf(e);return-1!=e&&this.types[e]==n},setRaw:function(e,n,t){var i=this.names.indexOf(e);-1==i?(this.names.push(e),this.strings.push(n),this.types.push(t)):(this.strings[i]=n,this.types[i]=t,this.cache[i]=null)},setString:function(e,n){var t=this.names.indexOf(e);-1==t?(this.names.push(e),this.types.push(vl.PTString),this.strings.push(n)):(this.types[t]=vl.PTString,this.cache[t]=null,this.strings[t]=n)},setFile:function(e,n){var t=this.names.indexOf(e);-1==t?(this.names.push(e),this.types.push(vl.PTFile),this.strings.push(n)):(this.types[t]=vl.PTFile,this.strings[t]=n,this.cache[t]=null)},setInt:function(e,n){var t,i=this.names.indexOf(e);-1==i?(i=this.names.push(e)-1,this.types.push(vl.PTInt),this.strings.push(null==n?"null":""+n),this.cache[i]=this.ints.push(n)-1):(e=this.types[i],this.types[i]=vl.PTInt,this.strings[i]=null==n?"null":""+n,t=this.cache[i],e!=vl.PTInt&&e!=vl.PTColor||null==t?this.cache[i]=this.ints.push(n)-1:this.ints[t]=n)},setColor:function(e,n){var t,i=this.names.indexOf(e);-1==i?(i=this.names.push(e)-1,this.types.push(vl.PTColor),this.strings.push(null==n?"null":""+n),this.cache[i]=this.ints.push(n)-1):(e=this.types[i],this.types[i]=vl.PTColor,this.strings[i]=null==n?"null":""+n,t=this.cache[i],e!=vl.PTColor&&e!=vl.PTInt||null==t?this.cache[i]=this.ints.push(n)-1:this.ints[t]=n)},setFloat:function(e,n){var t,i=this.names.indexOf(e);-1==i?(e=this.names.push(e)-1,this.types.push(vl.PTFloat),this.strings.push(null==n?"null":""+n),this.cache[e]=this.floats.push(n)-1):(e=this.types[i],this.types[i]=vl.PTFloat,this.strings[i]=null==n?"null":""+n,t=this.cache[i],e==vl.PTFloat&&null!=t?this.floats[t]=n:this.cache[i]=this.floats.push(n)-1)},setBool:function(e,n){var t=this.names.indexOf(e);-1==t?(this.names.push(e),this.types.push(vl.PTBool),this.strings.push(n?"true":"false")):(this.types[t]=vl.PTBool,this.strings[t]=n?"true":"false",this.cache[t]=null)},getType:function(e){e=this.names.indexOf(e);return-1==e?null:this.types[e]},get:function(e){return this.getString(e)},keys:function(){return new ls(this.names)},getString:function(e){e=this.names.indexOf(e);return-1==e?null:this.strings[e]},getFile:function(e){return this.getString(e)},getInt:function(e){var n,e=this.names.indexOf(e);return-1==e||(n=this.types[e])!=vl.PTInt&&n!=vl.PTColor?null:null==(n=this.cache[e])?(n=V.parseInt(this.strings[e]),this.cache[e]=this.ints.push(n)-1,n):this.ints[n]},getColor:function(e){return this.getInt(e)},getFloat:function(e){var n,t=this.names.indexOf(e);return-1==t?NaN:(n=this.types[t])==vl.PTInt||n==vl.PTColor?this.getInt(e):n!=vl.PTFloat?NaN:null==(e=this.cache[t])?(n=parseFloat(this.strings[t]),this.cache[t]=this.floats.push(n)-1,n):this.floats[e]},getBool:function(e){e=this.names.indexOf(e);return-1!=e&&"true"==this.strings[e]},propagateTo:function(e,n){null==n&&(n=!1);for(var t=0;t<this.names.length;)-1!=e.names.indexOf(this.names[t])&&!n||e.setRaw(this.names[t],this.strings[t],this.types[t]),++t},__class__:yl},(L["format.tmx.TmxObjectTemplate"]=Vd).__name__="format.tmx.TmxObjectTemplate",Vd.prototype={tileset:null,object:null,__class__:Vd},(L["format.tmx.TmxObjectTypeTemplate"]=Wd).__name__="format.tmx.TmxObjectTypeTemplate",Wd.prototype={name:null,color:null,properties:null,__class__:Wd},(L["format.tmx.TmxObjectTypeProperty"]=Xd).__name__="format.tmx.TmxObjectTypeProperty",Xd.prototype={name:null,type:null,defaultValue:null,__class__:Xd},function(){}),Ul=((L["format.tmx.Reader"]=Cl).__name__="format.tmx.Reader",Cl.prototype={customUncompressors:null,customEncoders:null,width:null,height:null,resolveTSX:null,resolveTemplate:null,resolveTypeTemplate:null,read:function(e,n){if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==e.nodeType?"null":le.toString(e.nodeType)));for(var e=_s.resolve(e,"map"),L=this.resolveProperties(e),t=[],i=[],l=e.elements();l.hasNext();){var s=l.next();if(s.nodeType==F.Document)P="Document";else{if(s.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":le.toString(s.nodeType)));P=s.nodeName}switch(P){case"group":i.push(Ol.LGroup(this.resolveGroup(s)));break;case"imagelayer":i.push(Ol.LImageLayer(this.resolveImageLayer(s)));break;case"layer":i.push(Ol.LTileLayer(this.resolveTileLayer(s)));break;case"objectgroup":i.push(Ol.LObjectGroup(this.resolveObjectGroup(s)));break;case"tileset":var N=this.resolveProperties(s),r=[],a=ds.resolve(s,"terraintypes"),u=[],c=ds.resolve(s,"tile"),o=null,_=ds.resolve(s,"tileoffset"),d=[],b=ds.resolve(s,"wangsets"),g=null,O=ds.resolve(s,"grid");if(_&&(_=_s.resolve(s,"tileoffset"),o=new _l(V.parseInt($.resolve(_,"x")),V.parseInt($.resolve(_,"y")))),a)for(var f=0,p=bs.resolve(_s.resolve(s,"terraintypes"),"terrain");f<p.length;){var m=p[f];++f,r.push(new dl($.resolve(m,"name"),V.parseInt($.resolve(m,"tile")),this.resolveProperties(m)))}if(b)for(var w=0,v=bs.resolve(_s.resolve(s,"wangsets"),"wangset");w<v.length;){var W=v[w];++w,d.push(this.resolveWangSet(W))}if(O){var y,_=_s.resolve(s,"grid"),C=V.parseInt($.resolve(_,"width")),U=V.parseInt($.resolve(_,"height"));switch(B=$.resolve(_,"orientation")){case"hexagonal":y=rl.Hexagonal;break;case"isometric":y=rl.Isometric;break;case"orthogonal":y=rl.Orthogonal;break;case"staggered":y=rl.Staggered;break;default:y=rl.Unknown(B)}g=new ol(y,C,U)}if(c)for(var x=0,T=bs.resolve(s,"tile");x<T.length;){var D=T[x],A=(++x,null);if(ds.resolve(D,"animation"))for(var A=[],S=0,E=bs.resolve(_s.resolve(D,"animation"),"frame");S<E.length;){var M=E[S];++S,A.push(new gl(V.parseInt($.resolve(M,"tileid")),V.parseInt($.resolve(M,"duration"))))}var k=V.parseInt($.resolve(D,"id")),I=ee.resolve(D,"terrain")?$.resolve(D,"terrain"):null,R=ee.resolve(D,"probability")?parseFloat($.resolve(D,"probability")):0,G=this.resolveProperties(D),H=ds.resolve(D,"image")?this.resolveImage(_s.resolve(D,"image")):null,z=ds.resolve(D,"objectgroup")?this.resolveObjectGroup(_s.resolve(D,"objectgroup")):null;u.push(new bl(k,ee.resolve(D,"type")?$.resolve(D,"type"):null,I,R,G,H,z,A))}var a=ee.resolve(s,"firstgid")?V.parseInt($.resolve(s,"firstgid")):null,b=ee.resolve(s,"source")?$.resolve(s,"source"):null,O=ee.resolve(s,"name")?$.resolve(s,"name"):null,_=ee.resolve(s,"tilewidth")?V.parseInt($.resolve(s,"tilewidth")):0,c=ee.resolve(s,"tileheight")?V.parseInt($.resolve(s,"tileheight")):0,K=ee.resolve(s,"spacing")?V.parseInt($.resolve(s,"spacing")):0,X=ee.resolve(s,"margin")?V.parseInt($.resolve(s,"margin")):0,Y=ds.resolve(s,"image")?this.resolveImage(_s.resolve(s,"image")):null,a=new cl(a,b,O,_,c,K,X,ee.resolve(s,"tilecount")?V.parseInt($.resolve(s,"tilecount")):0,ee.resolve(s,"columns")?V.parseInt($.resolve(s,"columns")):0,o,N,Y,r,u,g,d);null!=a.source&&null!=this.resolveTSX&&(b=this.resolveTSX(a.source),Ul.applyTSX(b,a)),t.push(a)}}this.width=V.parseInt($.resolve(e,"width")),this.height=V.parseInt($.resolve(e,"height"));var P=$.resolve(e,"version"),f=ee.resolve(e,"tiledversion")?$.resolve(e,"tiledversion"):"";switch(B=$.resolve(e,"orientation")){case"hexagonal":p=rl.Hexagonal;break;case"isometric":p=rl.Isometric;break;case"orthogonal":p=rl.Orthogonal;break;case"staggered":p=rl.Staggered;break;default:p=rl.Unknown(B)}w=this.width,v=this.height,C=V.parseInt($.resolve(e,"tilewidth")),U=V.parseInt($.resolve(e,"tileheight"));if(x=ee.resolve(e,"backgroundcolor")?(B=$.resolve(e,"backgroundcolor"),35==h.cca(B,0)?7==B.length?V.parseInt("0x"+h.substr(B,1,null))+-16777216:V.parseInt("0x"+h.substr(B,1,null)):6==B.length?V.parseInt("0x"+B)+-16777216:V.parseInt("0x"+B)):0,ee.resolve(e,"renderorder"))switch(B=$.resolve(e,"renderorder")){case"left-down":T=al.LeftDown;break;case"left-up":T=al.LeftUp;break;case"right-down":T=al.RightDown;break;case"right-up":T=al.RightUp;break;default:T=al.Unknown(B)}else T=al.RightDown;var B,S=L,E=t,k=i;if(ee.resolve(e,"staggerindex"))switch(B=$.resolve(e,"staggerindex")){case"even":I=hl.Even;break;case"odd":I=hl.Odd;break;default:I=hl.Unknown(B)}else I=null;if(ee.resolve(e,"staggeraxis"))switch(B=$.resolve(e,"staggeraxis")){case"x":R=ul.AxisX;break;case"y":R=ul.AxisY;break;default:R=ul.Unknown(B)}else R=null;return new rd(P,f,p,w,v,C,U,x,T,I,R,ee.resolve(e,"hexsidelength")?V.parseInt($.resolve(e,"hexsidelength")):0,ee.resolve(e,"nextobjectid")?V.parseInt($.resolve(e,"nextobjectid")):0,ee.resolve(e,"nextlayerid")?V.parseInt($.resolve(e,"nextlayerid")):0,S,E,k,ee.resolve(e,"infinite")&&"1"==$.resolve(e,"infinite"),n)},readTSX:function(e,n){if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==e.nodeType?"null":le.toString(e.nodeType)));var e=_s.resolve(e,"tileset"),t=this.resolveProperties(e),i=[],l=ds.resolve(e,"terraintypes"),s=[],r=ds.resolve(e,"tile"),a=null,h=ds.resolve(e,"tileoffset"),u=[],c=ds.resolve(e,"wangsets"),o=null,_=ds.resolve(e,"grid");if(h&&(g=_s.resolve(e,"tileoffset"),a=new _l(V.parseInt($.resolve(g,"x")),V.parseInt($.resolve(g,"y")))),l)for(var d=0,b=bs.resolve(_s.resolve(e,"terraintypes"),"terrain");d<b.length;){var g=b[d];++d,i.push(new dl($.resolve(g,"name"),V.parseInt($.resolve(g,"tile")),this.resolveProperties(g)))}if(c)for(var d=0,b=bs.resolve(_s.resolve(e,"wangsets"),"wangset");d<b.length;){g=b[d];++d,u.push(this.resolveWangSet(g))}if(_){var O,f=_s.resolve(e,"grid"),d=V.parseInt($.resolve(f,"width")),b=V.parseInt($.resolve(f,"height")),p=$.resolve(f,"orientation");switch(p){case"hexagonal":O=rl.Hexagonal;break;case"isometric":O=rl.Isometric;break;case"orthogonal":O=rl.Orthogonal;break;case"staggered":O=rl.Staggered;break;default:O=rl.Unknown(p)}o=new ol(O,d,b)}if(r)for(d=0,b=bs.resolve(e,"tile");d<b.length;){var g=b[d],m=(++d,null);if(ds.resolve(g,"animation"))for(var m=[],w=0,v=bs.resolve(_s.resolve(g,"animation"),"frame");w<v.length;){var y=v[w];++w,m.push(new gl(V.parseInt($.resolve(y,"tileid")),V.parseInt($.resolve(y,"duration"))))}var C=V.parseInt($.resolve(g,"id")),U=ee.resolve(g,"terrain")?$.resolve(g,"terrain"):null,x=ee.resolve(g,"probability")?parseFloat($.resolve(g,"probability")):0,T=this.resolveProperties(g),D=ds.resolve(g,"image")?this.resolveImage(_s.resolve(g,"image")):null,A=ds.resolve(g,"objectgroup")?this.resolveObjectGroup(_s.resolve(g,"objectgroup")):null;s.push(new bl(C,ee.resolve(g,"type")?$.resolve(g,"type"):null,U,x,T,D,A,m))}return null!=n?(n.firstGID=ee.resolve(e,"firstgid")?V.parseInt($.resolve(e,"firstgid")):n.firstGID,n.source=ee.resolve(e,"source")?$.resolve(e,"source"):n.source,n.name=ee.resolve(e,"name")?$.resolve(e,"name"):n.name,n.tileWidth=ee.resolve(e,"tilewidth")?V.parseInt($.resolve(e,"tilewidth")):n.tileWidth,n.tileHeight=ee.resolve(e,"tileheight")?V.parseInt($.resolve(e,"tileheight")):n.tileHeight,n.spacing=ee.resolve(e,"spacing")?V.parseInt($.resolve(e,"spacing")):n.spacing,n.margin=ee.resolve(e,"margin")?V.parseInt($.resolve(e,"margin")):n.margin,n.properties=ds.resolve(e,"properties")?t:n.properties,n.image=ds.resolve(e,"image")?this.resolveImage(_s.resolve(e,"image")):n.image,n.tileCount=ee.resolve(e,"tilecount")?V.parseInt($.resolve(e,"tilecount")):0,n.columns=ee.resolve(e,"columns")?V.parseInt($.resolve(e,"columns")):0,l&&(n.terrainTypes=i),r&&(n.tiles=s),h&&(n.tileOffset=a),c&&(n.wangSets=u),_&&(n.grid=o),n):(d=ee.resolve(e,"firstgid")?V.parseInt($.resolve(e,"firstgid")):null,b=ee.resolve(e,"source")?$.resolve(e,"source"):null,w=ee.resolve(e,"name")?$.resolve(e,"name"):null,v=ee.resolve(e,"tilewidth")?V.parseInt($.resolve(e,"tilewidth")):0,C=ee.resolve(e,"tileheight")?V.parseInt($.resolve(e,"tileheight")):0,U=ee.resolve(e,"spacing")?V.parseInt($.resolve(e,"spacing")):0,x=ee.resolve(e,"margin")?V.parseInt($.resolve(e,"margin")):0,T=ds.resolve(e,"image")?this.resolveImage(_s.resolve(e,"image")):null,null!=(f=new cl(d,b,w,v,C,U,x,ee.resolve(e,"tilecount")?V.parseInt($.resolve(e,"tilecount")):0,ee.resolve(e,"columns")?V.parseInt($.resolve(e,"columns")):0,a,t,T,i,s,o,u)).source&&null!=this.resolveTSX&&(l=this.resolveTSX(f.source),Ul.applyTSX(l,f)),f)},readObjectTypes:function(e,n){var t=new z;if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==e.nodeType?"null":le.toString(e.nodeType)));if(ds.resolve(e,"objecttypes")){for(var i=0,l=bs.resolve(_s.resolve(e,"objecttypes"),"objecttype");i<l.length;){for(var s=l[i],r=(++i,[]),a=0,u=bs.resolve(s,"property");a<u.length;){var c,o=u[a];if(++a,ee.resolve(o,"type"))switch($.resolve(o,"type")){case"bool":c=vl.PTBool;break;case"color":c=vl.PTColor;break;case"file":c=vl.PTFile;break;case"float":c=vl.PTFloat;break;case"int":c=vl.PTInt;break;default:c=vl.PTString}else c=vl.PTString;r.push(new Xd($.resolve(o,"name"),c,ee.resolve(o,"default")?$.resolve(o,"default"):null))}var _=$.resolve(s,"name"),s=new Wd($.resolve(s,"name"),V.parseInt("0x"+h.substr($.resolve(s,"color"),1,null)),r);t.h[_]=s}null!=n&&Ul.propagateObjectTypes(n,t)}return t},readTemplate:function(e){if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==e.nodeType?"null":le.toString(e.nodeType)));if(!ds.resolve(e,"template"))return null;e=_s.resolve(e,"template");if(ds.resolve(e,"tileset")){var n=_s.resolve(e,"tileset"),t=this.resolveProperties(n),i=[],l=ds.resolve(n,"terraintypes"),s=[],r=ds.resolve(n,"tile"),a=null,h=ds.resolve(n,"tileoffset"),u=[],c=ds.resolve(n,"wangsets"),o=null,_=ds.resolve(n,"grid");if(h&&(g=_s.resolve(n,"tileoffset"),a=new _l(V.parseInt($.resolve(g,"x")),V.parseInt($.resolve(g,"y")))),l)for(var d=0,b=bs.resolve(_s.resolve(n,"terraintypes"),"terrain");d<b.length;){var g=b[d];++d,i.push(new dl($.resolve(g,"name"),V.parseInt($.resolve(g,"tile")),this.resolveProperties(g)))}if(c)for(d=0,b=bs.resolve(_s.resolve(n,"wangsets"),"wangset");d<b.length;){g=b[d];++d,u.push(this.resolveWangSet(g))}if(_){var O,h=_s.resolve(n,"grid"),d=V.parseInt($.resolve(h,"width")),b=V.parseInt($.resolve(h,"height")),f=$.resolve(h,"orientation");switch(f){case"hexagonal":O=rl.Hexagonal;break;case"isometric":O=rl.Isometric;break;case"orthogonal":O=rl.Orthogonal;break;case"staggered":O=rl.Staggered;break;default:O=rl.Unknown(f)}o=new ol(O,d,b)}if(r)for(d=0,b=bs.resolve(n,"tile");d<b.length;){var g=b[d],p=(++d,null);if(ds.resolve(g,"animation"))for(var p=[],m=0,w=bs.resolve(_s.resolve(g,"animation"),"frame");m<w.length;){var v=w[m];++m,p.push(new gl(V.parseInt($.resolve(v,"tileid")),V.parseInt($.resolve(v,"duration"))))}var y=V.parseInt($.resolve(g,"id")),C=ee.resolve(g,"terrain")?$.resolve(g,"terrain"):null,U=ee.resolve(g,"probability")?parseFloat($.resolve(g,"probability")):0,x=this.resolveProperties(g),T=ds.resolve(g,"image")?this.resolveImage(_s.resolve(g,"image")):null,D=ds.resolve(g,"objectgroup")?this.resolveObjectGroup(_s.resolve(g,"objectgroup")):null;s.push(new bl(y,ee.resolve(g,"type")?$.resolve(g,"type"):null,C,U,x,T,D,p))}d=ee.resolve(n,"firstgid")?V.parseInt($.resolve(n,"firstgid")):null,b=ee.resolve(n,"source")?$.resolve(n,"source"):null,m=ee.resolve(n,"name")?$.resolve(n,"name"):null,w=ee.resolve(n,"tilewidth")?V.parseInt($.resolve(n,"tilewidth")):0,y=ee.resolve(n,"tileheight")?V.parseInt($.resolve(n,"tileheight")):0,C=ee.resolve(n,"spacing")?V.parseInt($.resolve(n,"spacing")):0,U=ee.resolve(n,"margin")?V.parseInt($.resolve(n,"margin")):0,x=ds.resolve(n,"image")?this.resolveImage(_s.resolve(n,"image")):null,l=new cl(d,b,m,w,y,C,U,ee.resolve(n,"tilecount")?V.parseInt($.resolve(n,"tilecount")):0,ee.resolve(n,"columns")?V.parseInt($.resolve(n,"columns")):0,a,t,x,i,s,o,u);null!=l.source&&null!=this.resolveTSX&&(c=this.resolveTSX(l.source),Ul.applyTSX(c,l)),_=l}else _=null;return new Vd(_,this.resolveObject(_s.resolve(e,"object"),!1))},resolveGroup:function(e){for(var n=[],t=e.elements();t.hasNext();){var i,l=t.next();if(l.nodeType==F.Document)i="Document";else{if(l.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==l.nodeType?"null":le.toString(l.nodeType)));i=l.nodeName}switch(i){case"group":n.push(Ol.LGroup(this.resolveGroup(l)));break;case"imagelayer":n.push(Ol.LImageLayer(this.resolveImageLayer(l)));break;case"layer":n.push(Ol.LTileLayer(this.resolveTileLayer(l)));break;case"objectgroup":n.push(Ol.LObjectGroup(this.resolveObjectGroup(l)))}}return new Dd(ee.resolve(e,"id")?V.parseInt($.resolve(e,"id")):0,$.resolve(e,"name"),ee.resolve(e,"offsetx")?V.parseInt($.resolve(e,"offsetx")):0,ee.resolve(e,"offsety")?V.parseInt($.resolve(e,"offsety")):0,ee.resolve(e,"opacity")?parseFloat($.resolve(e,"opacity")):1,!ee.resolve(e,"visible")||"1"==$.resolve(e,"visible"),this.resolveProperties(e),n)},resolveStaggerIndex:function(e){switch(e){case"even":return hl.Even;case"odd":return hl.Odd;default:return hl.Unknown(e)}},resolveStaggerAxis:function(e){switch(e){case"x":return ul.AxisX;case"y":return ul.AxisY;default:return ul.Unknown(e)}},resolveOrientation:function(e){switch(e){case"hexagonal":return rl.Hexagonal;case"isometric":return rl.Isometric;case"orthogonal":return rl.Orthogonal;case"staggered":return rl.Staggered;default:return rl.Unknown(e)}},resolveColor:function(e){return 35==h.cca(e,0)?7==e.length?V.parseInt("0x"+h.substr(e,1,null))+-16777216:V.parseInt("0x"+h.substr(e,1,null)):6==e.length?V.parseInt("0x"+e)+-16777216:V.parseInt("0x"+e)},resolveRenderOrder:function(e){switch(e){case"left-down":return al.LeftDown;case"left-up":return al.LeftUp;case"right-down":return al.RightDown;case"right-up":return al.RightUp;default:return al.Unknown(e)}},resolveTileset:function(e,n){var t=this.resolveProperties(e),i=[],l=ds.resolve(e,"terraintypes"),s=[],r=ds.resolve(e,"tile"),a=null,h=ds.resolve(e,"tileoffset"),u=[],c=ds.resolve(e,"wangsets"),o=null,_=ds.resolve(e,"grid");if(h&&(g=_s.resolve(e,"tileoffset"),a=new _l(V.parseInt($.resolve(g,"x")),V.parseInt($.resolve(g,"y")))),l)for(var d=0,b=bs.resolve(_s.resolve(e,"terraintypes"),"terrain");d<b.length;){var g=b[d];++d,i.push(new dl($.resolve(g,"name"),V.parseInt($.resolve(g,"tile")),this.resolveProperties(g)))}if(c)for(var d=0,b=bs.resolve(_s.resolve(e,"wangsets"),"wangset");d<b.length;){g=b[d];++d,u.push(this.resolveWangSet(g))}if(_){var O,f=_s.resolve(e,"grid"),d=V.parseInt($.resolve(f,"width")),b=V.parseInt($.resolve(f,"height")),p=$.resolve(f,"orientation");switch(p){case"hexagonal":O=rl.Hexagonal;break;case"isometric":O=rl.Isometric;break;case"orthogonal":O=rl.Orthogonal;break;case"staggered":O=rl.Staggered;break;default:O=rl.Unknown(p)}o=new ol(O,d,b)}if(r)for(d=0,b=bs.resolve(e,"tile");d<b.length;){var g=b[d],m=(++d,null);if(ds.resolve(g,"animation"))for(var m=[],w=0,v=bs.resolve(_s.resolve(g,"animation"),"frame");w<v.length;){var y=v[w];++w,m.push(new gl(V.parseInt($.resolve(y,"tileid")),V.parseInt($.resolve(y,"duration"))))}var C=V.parseInt($.resolve(g,"id")),U=ee.resolve(g,"terrain")?$.resolve(g,"terrain"):null,x=ee.resolve(g,"probability")?parseFloat($.resolve(g,"probability")):0,T=this.resolveProperties(g),D=ds.resolve(g,"image")?this.resolveImage(_s.resolve(g,"image")):null,A=ds.resolve(g,"objectgroup")?this.resolveObjectGroup(_s.resolve(g,"objectgroup")):null;s.push(new bl(C,ee.resolve(g,"type")?$.resolve(g,"type"):null,U,x,T,D,A,m))}return null!=n?(n.firstGID=ee.resolve(e,"firstgid")?V.parseInt($.resolve(e,"firstgid")):n.firstGID,n.source=ee.resolve(e,"source")?$.resolve(e,"source"):n.source,n.name=ee.resolve(e,"name")?$.resolve(e,"name"):n.name,n.tileWidth=ee.resolve(e,"tilewidth")?V.parseInt($.resolve(e,"tilewidth")):n.tileWidth,n.tileHeight=ee.resolve(e,"tileheight")?V.parseInt($.resolve(e,"tileheight")):n.tileHeight,n.spacing=ee.resolve(e,"spacing")?V.parseInt($.resolve(e,"spacing")):n.spacing,n.margin=ee.resolve(e,"margin")?V.parseInt($.resolve(e,"margin")):n.margin,n.properties=ds.resolve(e,"properties")?t:n.properties,n.image=ds.resolve(e,"image")?this.resolveImage(_s.resolve(e,"image")):n.image,n.tileCount=ee.resolve(e,"tilecount")?V.parseInt($.resolve(e,"tilecount")):0,n.columns=ee.resolve(e,"columns")?V.parseInt($.resolve(e,"columns")):0,l&&(n.terrainTypes=i),r&&(n.tiles=s),h&&(n.tileOffset=a),c&&(n.wangSets=u),_&&(n.grid=o),n):(d=ee.resolve(e,"firstgid")?V.parseInt($.resolve(e,"firstgid")):null,b=ee.resolve(e,"source")?$.resolve(e,"source"):null,w=ee.resolve(e,"name")?$.resolve(e,"name"):null,v=ee.resolve(e,"tilewidth")?V.parseInt($.resolve(e,"tilewidth")):0,C=ee.resolve(e,"tileheight")?V.parseInt($.resolve(e,"tileheight")):0,U=ee.resolve(e,"spacing")?V.parseInt($.resolve(e,"spacing")):0,x=ee.resolve(e,"margin")?V.parseInt($.resolve(e,"margin")):0,T=ds.resolve(e,"image")?this.resolveImage(_s.resolve(e,"image")):null,null!=(f=new cl(d,b,w,v,C,U,x,ee.resolve(e,"tilecount")?V.parseInt($.resolve(e,"tilecount")):0,ee.resolve(e,"columns")?V.parseInt($.resolve(e,"columns")):0,a,t,T,i,s,o,u)).source&&null!=this.resolveTSX&&(l=this.resolveTSX(f.source),Ul.applyTSX(l,f)),f)},resolveWangSet:function(e){for(var n=[],t=[],i=[],l=0,s=bs.resolve(e,"wangcornercolor");l<s.length;){var r=s[l],a=(++l,ee.resolve(r,"name")?$.resolve(r,"name"):null);u=ee.resolve(r,"color")?(c=$.resolve(r,"color"),35==h.cca(c,0)?7==c.length?V.parseInt("0x"+h.substr(c,1,null))+-16777216:V.parseInt("0x"+h.substr(c,1,null)):6==c.length?V.parseInt("0x"+c)+-16777216:V.parseInt("0x"+c)):0,n.push(new wd(a,u,ee.resolve(r,"tile")?V.parseInt($.resolve(r,"tile")):0,ee.resolve(r,"probability")?parseFloat($.resolve(r,"probability")):0))}for(l=0,s=bs.resolve(e,"wangedgecolor");l<s.length;){var u,c,r=s[l],a=(++l,ee.resolve(r,"name")?$.resolve(r,"name"):null);u=ee.resolve(r,"color")?(c=$.resolve(r,"color"),35==h.cca(c,0)?7==c.length?V.parseInt("0x"+h.substr(c,1,null))+-16777216:V.parseInt("0x"+h.substr(c,1,null)):6==c.length?V.parseInt("0x"+c)+-16777216:V.parseInt("0x"+c)):0,t.push(new wd(a,u,ee.resolve(r,"tile")?V.parseInt($.resolve(r,"tile")):0,ee.resolve(r,"probability")?parseFloat($.resolve(r,"probability")):0))}for(l=0,s=bs.resolve(e,"wangtile");l<s.length;){r=s[l];++l,i.push(new xd(ee.resolve(r,"tileid")?V.parseInt($.resolve(r,"tileid")):0,ee.resolve(r,"wangid")?V.parseInt($.resolve(r,"wangid")):0))}return new vd(ee.resolve(e,"name")?$.resolve(e,"name"):null,ee.resolve(e,"tile")?V.parseInt($.resolve(e,"tile")):0,n,t,i)},resolveWangSetColor:function(e){var n,t=ee.resolve(e,"name")?$.resolve(e,"name"):null;return n=ee.resolve(e,"color")?(n=$.resolve(e,"color"),35==h.cca(n,0)?7==n.length?V.parseInt("0x"+h.substr(n,1,null))+-16777216:V.parseInt("0x"+h.substr(n,1,null)):6==n.length?V.parseInt("0x"+n)+-16777216:V.parseInt("0x"+n)):0,new wd(t,n,ee.resolve(e,"tile")?V.parseInt($.resolve(e,"tile")):0,ee.resolve(e,"probability")?parseFloat($.resolve(e,"probability")):0)},resolveImage:function(e){var n,t=ee.resolve(e,"format")?$.resolve(e,"format"):"",i=ee.resolve(e,"id")?$.resolve(e,"id"):"",l=ee.resolve(e,"source")?$.resolve(e,"source"):"";return n=ee.resolve(e,"transparent")?(n=$.resolve(e,"transparent"),35==h.cca(n,0)?7==n.length?V.parseInt("0x"+h.substr(n,1,null))+-16777216:V.parseInt("0x"+h.substr(n,1,null)):6==n.length?V.parseInt("0x"+n)+-16777216:V.parseInt("0x"+n)):null,new yd(t,i,l,n,ee.resolve(e,"width")?V.parseInt($.resolve(e,"width")):null,ee.resolve(e,"height")?V.parseInt($.resolve(e,"height")):null,ds.resolve(e,"data")?this.resolveData(_s.resolve(e,"data"),!1):null)},resolveData:function(e,n){null==n&&(n=!0);var t=fl.None;if(ee.resolve(e,"encoding"))switch($.resolve(e,"encoding")){case"base64":t=fl.Base64;break;case"csv":t=fl.CSV;break;default:throw Q.thrown('Unknown encoding "'+$.resolve(e,"encoding")+'"')}var i=pl.None;if(ee.resolve(e,"compression"))switch($.resolve(e,"compression")){case"gzip":i=pl.GZip;break;case"zlib":i=pl.ZLib;break;default:throw Q.thrown('Unknown compression "'+$.resolve(e,"compression")+'"')}var l=null,s=null,r=null;switch(t._hx_index){case 0:if(n)if(ds.resolve(e,"chunk"))for(var l=[],a=0,h=bs.resolve(e,"chunk");a<h.length;){var u=h[a];++a;for(var c=(f=new Kd(ee.resolve(u,"x")?V.parseInt($.resolve(u,"x")):0,ee.resolve(u,"y")?V.parseInt($.resolve(u,"y")):0,ee.resolve(u,"width")?V.parseInt($.resolve(u,"width")):0,ee.resolve(u,"height")?V.parseInt($.resolve(u,"height")):0,[])).tiles,o=0,_=bs.resolve(u,"tile");o<_.length;){var d=_[o];++o,c.push(V.parseInt($.resolve(d,"gid")))}l.push(f)}else for(s=[],a=0,h=bs.resolve(e,"tile");a<h.length;){var b=h[a];++a,s.push(V.parseInt($.resolve(b,"gid")))}else r=i==pl.None?kl.ofString(B.trim(gs.get_innerData(e))):this.uncompressData(new is(B.trim(gs.get_innerData(e))),i);break;case 1:if(n&&ds.resolve(e,"chunk")){l=[];for(a=0,h=bs.resolve(e,"chunk");a<h.length;){u=h[a];++a;for(var c=(f=new Kd(ee.resolve(u,"x")?V.parseInt($.resolve(u,"x")):0,ee.resolve(u,"y")?V.parseInt($.resolve(u,"y")):0,ee.resolve(u,"width")?V.parseInt($.resolve(u,"width")):0,ee.resolve(u,"height")?V.parseInt($.resolve(u,"height")):0,[])).tiles,r=Rl.decode(B.trim(gs.get_innerData(u))),g=(r=i!=pl.None?this.uncompressData(new $l(r),i):r).length/4|0,o=((O=new $l(r)).set_bigEndian(!1),0),_=g;o<_;){o++;d=O.readInt32(),c.push(d)}l.push(f)}r=null}else if(r=Rl.decode(B.trim(gs.get_innerData(e))),i!=pl.None&&(r=this.uncompressData(new $l(r),i)),n){s=[];for(var O,g=r.length/4|0,a=((O=new $l(r)).set_bigEndian(!1),0),h=g;a<h;){a++;d=O.readInt32(),s.push(d)}r=null}break;case 2:if(!n)throw Q.thrown("CSV encoding available only for tile data");if(ds.resolve(e,"chunk")){l=[];for(a=0,h=bs.resolve(e,"chunk");a<h.length;){u=h[a];++a;for(var f,c=(f=new Kd(ee.resolve(u,"x")?V.parseInt($.resolve(u,"x")):0,ee.resolve(u,"y")?V.parseInt($.resolve(u,"y")):0,ee.resolve(u,"width")?V.parseInt($.resolve(u,"width")):0,ee.resolve(u,"height")?V.parseInt($.resolve(u,"height")):0,[])).tiles,p=B.trim(gs.get_innerData(u)).split(","),o=0;o<p.length;){var m=p[o];++o,c.push(V.parseInt(m))}l.push(f)}}else{s=[];for(p=B.trim(gs.get_innerData(e)).split(","),a=0;a<p.length;){m=p[a];++a,s.push(V.parseInt(m))}}break;case 3:var w=t.value;throw Q.thrown("Unknown data encoding: "+w)}return new Jd(t,i,s,l,r)},uncompressData:function(e,n){switch(n._hx_index){case 0:return e.readAll();case 1:var t=new Zl;return new md(e).readData(t),t.getBytes();case 2:return vs.run(e);case 3:t=n.value;throw Q.thrown("Unknown compression method: "+t)}},resolveTileLayer:function(e){return new Gd(ds.resolve(e,"data")?this.resolveData(_s.resolve(e,"data")):null,ee.resolve(e,"id")?V.parseInt($.resolve(e,"id")):0,ee.resolve(e,"name")?$.resolve(e,"name"):"",ee.resolve(e,"x")?parseFloat($.resolve(e,"x")):0,ee.resolve(e,"y")?parseFloat($.resolve(e,"y")):0,ee.resolve(e,"offsetx")?V.parseInt($.resolve(e,"offsetx")):0,ee.resolve(e,"offsety")?V.parseInt($.resolve(e,"offsety")):0,ee.resolve(e,"width")?V.parseInt($.resolve(e,"width")):this.width,ee.resolve(e,"height")?V.parseInt($.resolve(e,"height")):this.height,ee.resolve(e,"opacity")?parseFloat($.resolve(e,"opacity")):1,!ee.resolve(e,"visible")||"1"==$.resolve(e,"visible"),this.resolveProperties(e))},resolveDraworder:function(e){switch(e){case"index":return ml.Index;case"topdown":return ml.Topdown;default:return ml.Unknown(e)}},resolveObjectGroup:function(e){for(var n,t=[],i=0,l=bs.resolve(e,"object");i<l.length;){var s=l[i];++i,t.push(this.resolveObject(s))}if(ee.resolve(e,"draworder")){var r=$.resolve(e,"draworder");switch(r){case"index":n=ml.Index;break;case"topdown":n=ml.Topdown;break;default:n=ml.Unknown(r)}}else n=ml.Topdown;return new Nd(n,t,ee.resolve(e,"color")?V.parseInt($.resolve(e,"color")):null,ee.resolve(e,"id")?V.parseInt($.resolve(e,"id")):0,ee.resolve(e,"name")?$.resolve(e,"name"):"",ee.resolve(e,"x")?parseFloat($.resolve(e,"x")):0,ee.resolve(e,"y")?parseFloat($.resolve(e,"y")):0,ee.resolve(e,"offsetx")?V.parseInt($.resolve(e,"offsetx")):0,ee.resolve(e,"offsety")?V.parseInt($.resolve(e,"offsety")):0,ee.resolve(e,"width")?V.parseInt($.resolve(e,"width")):this.width,ee.resolve(e,"height")?V.parseInt($.resolve(e,"height")):this.height,ee.resolve(e,"opacity")?parseFloat($.resolve(e,"opacity")):1,!ee.resolve(e,"visible")||"1"==$.resolve(e,"visible"),this.resolveProperties(e))},resolveObject:function(e,n){null==n&&(n=!0);var t,i,l=!1,s=!1,r=(r=ds.resolve(e,"ellipse")?wl.OTEllipse:ee.resolve(e,"gid")?(l=1073741824==(1073741824&(t=(s=-2147483648==(-2147483648&(t=V.parseInt($.resolve(e,"gid")))))&&t<0?-t:t)),wl.OTTile(1073741823&t)):ds.resolve(e,"polygon")?wl.OTPolygon(this.readPoints(_s.resolve(e,"polygon"))):ds.resolve(e,"polyline")?wl.OTPolyline(this.readPoints(_s.resolve(e,"polyline"))):ds.resolve(e,"text")?wl.OTText(this.resolveText(_s.resolve(e,"text"))):ds.resolve(e,"point")?wl.OTPoint:wl.OTRectangle,new Qd(ee.resolve(e,"id")?V.parseInt($.resolve(e,"id")):0,ee.resolve(e,"name")?$.resolve(e,"name"):"",ee.resolve(e,"type")?$.resolve(e,"type"):"",ee.resolve(e,"x")?parseFloat($.resolve(e,"x")):0,ee.resolve(e,"y")?parseFloat($.resolve(e,"y")):0,ee.resolve(e,"width")?parseFloat($.resolve(e,"width")):0,ee.resolve(e,"height")?parseFloat($.resolve(e,"height")):0,ee.resolve(e,"rotation")?parseFloat($.resolve(e,"rotation")):0,!ee.resolve(e,"visible")||"1"==$.resolve(e,"visible"),r,this.resolveProperties(e),s,l,ee.resolve(e,"template")?$.resolve(e,"template"):null));return null!=r.template&&null!=this.resolveTemplate&&(i=this.resolveTemplate($.resolve(e,"template")),ee.resolve(e,"name")||(r.name=i.object.name),ee.resolve(e,"type")||(r.type=i.object.type),ee.resolve(e,"x")||(r.x=i.object.x),ee.resolve(e,"y")||(r.x=i.object.y),ee.resolve(e,"width")||(r.width=i.object.width),ee.resolve(e,"height")||(r.height=i.object.height),ee.resolve(e,"rotation")||(r.rotation=i.object.rotation),ee.resolve(e,"gid")||(r.flippedHorizontally=i.object.flippedHorizontally,r.flippedVertically=i.object.flippedVertically),i.object.properties.propagateTo(r.properties),l=1==(s=i.object.objectType)._hx_index?(t=s.gid,wl.OTExternalTile(t,i.tileset)):i.object.objectType,r.objectType=l),n&&null!=r.type&&""!=r.type&&null!=this.resolveTypeTemplate&&(i=this.resolveTypeTemplate(r.type),Ul.applyObjectTypeTemplate(r,i)),r},readPoints:function(e){var n=[];if(ee.resolve(e,"points"))for(var t=$.resolve(e,"points").split(" "),i=0;i<t.length;){var l=t[i],s=(++i,l.indexOf(","));n.push(new Od(parseFloat(h.substr(l,0,s)),parseFloat(h.substr(l,s+1,null))))}return n},resolveText:function(e){var n,t=ee.resolve(e,"fontfamily")?$.resolve(e,"fontfamily"):"sans-serif",i=ee.resolve(e,"pixelsize")?V.parseInt($.resolve(e,"pixelsize")):16,l=ee.resolve(e,"wrap")&&"1"==$.resolve(e,"wrap");return n=ee.resolve(e,"color")?(n=$.resolve(e,"color"),35==h.cca(n,0)?7==n.length?V.parseInt("0x"+h.substr(n,1,null))+-16777216:V.parseInt("0x"+h.substr(n,1,null)):6==n.length?V.parseInt("0x"+n)+-16777216:V.parseInt("0x"+n)):0,new Rd(t,i,l,n,ee.resolve(e,"bold")&&"1"==$.resolve(e,"bold"),ee.resolve(e,"italic")&&"1"==$.resolve(e,"italic"),ee.resolve(e,"underline")&&"1"==$.resolve(e,"underline"),ee.resolve(e,"strikeout")&&"1"==$.resolve(e,"strikeout"),!ee.resolve(e,"kerning")||"1"==$.resolve(e,"kerning"),ee.resolve(e,"halign")?$.resolve(e,"halign"):"left",ee.resolve(e,"valign")?$.resolve(e,"valign"):"top",gs.get_innerData(e))},resolveImageLayer:function(e){return new Fd(ds.resolve(e,"image")?this.resolveImage(_s.resolve(e,"image")):null,ee.resolve(e,"id")?V.parseInt($.resolve(e,"id")):0,ee.resolve(e,"name")?$.resolve(e,"name"):"",ee.resolve(e,"x")?parseFloat($.resolve(e,"x")):0,ee.resolve(e,"y")?parseFloat($.resolve(e,"y")):0,ee.resolve(e,"offsetx")?V.parseInt($.resolve(e,"offsetx")):0,ee.resolve(e,"offsety")?V.parseInt($.resolve(e,"offsety")):0,ee.resolve(e,"width")?V.parseInt($.resolve(e,"width")):this.width,ee.resolve(e,"height")?V.parseInt($.resolve(e,"height")):this.height,ee.resolve(e,"opacity")?parseFloat($.resolve(e,"opacity")):1,!ee.resolve(e,"visible")||"1"==$.resolve(e,"visible"),this.resolveProperties(e))},resolveProperties:function(e){var n,t=new yl;if(ds.resolve(e,"properties"))for(var i=0,l=bs.resolve(_s.resolve(e,"properties"),"property");i<l.length;){var s=l[i];if(++i,n=ee.resolve(s,"value")?$.resolve(s,"value"):gs.get_innerData(s),ee.resolve(s,"type"))switch($.resolve(s,"type")){case"bool":t.setRaw($.resolve(s,"name"),n,vl.PTBool);break;case"color":t.setRaw($.resolve(s,"name"),n,vl.PTColor);break;case"file":t.setRaw($.resolve(s,"name"),n,vl.PTFile);break;case"float":t.setRaw($.resolve(s,"name"),n,vl.PTFloat);break;case"int":t.setRaw($.resolve(s,"name"),n,vl.PTInt);break;default:t.setRaw($.resolve(s,"name"),n,vl.PTString)}else t.setRaw($.resolve(s,"name"),n,vl.PTString)}return t},__class__:Cl},function(){}),xl=((L["format.tmx.Tools"]=Ul).__name__="format.tmx.Tools",Ul.applyTSX=function(e,n){n.properties=e.properties,n.name=e.name,n.columns=e.columns,n.grid=e.grid,n.image=e.image,n.margin=e.margin,n.spacing=e.spacing,n.tileOffset=e.tileOffset,n.tileCount=e.tileCount,n.tileHeight=e.tileHeight,n.tileWidth=e.tileWidth,n.terrainTypes=e.terrainTypes,n.tiles=e.tiles,n.wangSets=e.wangSets},Ul.applyObjectTypeTemplate=function(e,n){for(var t=e.properties,i=0,l=n.properties;i<l.length;){var s=l[i];++i,null==s.defaultValue||t.exists(s.name)||t.setRaw(s.name,s.defaultValue,s.type)}},Ul.resolveOTExternalTile=function(e,n){for(var t=[],i=(n=null==n?null==e.localPath?"":ts.directory(e.localPath):ts.directory(n),0),l=e.tilesets;i<l.length;){var s=l[i];++i,null!=s.source?t.push(ts.join([n,s.source])):t.push("")}for(i=0,l=e.layers;i<l.length;){var r=l[i];switch(++i,r._hx_index){case 1:r.group;Ul.resolveOTExternalTileInternal(e,r,n,t);break;case 3:r.group;Ul.resolveOTExternalTileInternal(e,r,n,t)}}},Ul.resolveOTExternalTileInternal=function(e,n,t,i){switch(n._hx_index){case 1:for(var l=0,s=n.group.objects;l<s.length;){var r=s[l],a=(++l,r.objectType);if(2==a._hx_index)for(var h=a.gid,u=a.tileset,c=ts.join([t,ts.directory(r.template),u.source]),o=0,_=i.length;o<_;){var d=o++;if(i[d]==c){r.objectType=wl.OTTile(e.tilesets[d].firstGID+h-u.firstGID);break}}}break;case 3:for(l=0,s=n.group.layers;l<s.length;){n=s[l];++l,Ul.resolveOTExternalTileInternal(e,n,t,i)}}},Ul.linearLayers=function(e){for(var n=[],t=0,i=e.layers;t<i.length;){var l,s=i[t];++t,3==s._hx_index?(l=s.group,Ul.linearLayersInternal(l,n)):n.push(s)}return n},Ul.linearLayersInternal=function(e,n){for(var t=0,i=e.layers;t<i.length;){var l=i[t];switch(++t,l._hx_index){case 0:var s=l.layer;s.offsetX+=e.offsetX,s.offsetY+=e.offsetY,s.visible=e.visible,s.opacity*=e.opacity,n.push(l);break;case 1:s=l.group;s.offsetX+=e.offsetX,s.offsetY+=e.offsetY,s.visible=e.visible,s.opacity*=e.opacity,n.push(l);break;case 2:var r=l.layer;r.offsetX+=e.offsetX,r.offsetY+=e.offsetY,r.visible=e.visible,r.opacity*=e.opacity,n.push(l);break;case 3:r=l.group;r.offsetX+=e.offsetX,r.offsetY+=e.offsetY,r.visible=e.visible,r.opacity*=e.opacity,Ul.linearLayersInternal(r,n)}}},Ul.propagateObjectTypeToObject=function(e,n){if(null!=e.type){n=n.h[e.type];if(null!=n)for(var t=e.properties,i=0,l=n.properties;i<l.length;){var s=l[i];++i,t.exists(s.name)||null==s.defaultValue||t.setRaw(s.name,s.defaultValue,s.type)}}},Ul.propagateTilePropertiesToObject=function(e,n,t){n=Ul.getTilesetByGid(n,t);if(null!=n&&null!=n.tiles)for(var i=t-n.firstGID,l=0,s=n.tiles;l<s.length;){var r=s[l];++l,r.id==i&&(r.properties.propagateTo(e.properties),null==r.type||null!=e.type&&""!=e.type||(e.type=r.type))}},Ul.propagateTileProperties=function(e){for(var n=0,t=e.layers;n<t.length;){var i=t[n];++n,Ul.propagateTilePropertiesLayer(e,i)}},Ul.propagateTilePropertiesLayer=function(e,n){switch(n._hx_index){case 1:for(var t=0,i=n.group.objects;t<i.length;){var l=i[t],s=(++t,l.objectType);if(1==s._hx_index)for(var s=s.gid,r=s-(s=Ul.getTilesetByGid(e,s)).firstGID,a=0,h=s.tiles;a<h.length;){var u=h[a];++a,u.id==r&&(u.properties.propagateTo(l.properties),null==u.type||null!=l.type&&""!=l.type||(l.type=u.type))}}break;case 3:for(t=0,i=n.group.layers;t<i.length;){var c=i[t];++t,Ul.propagateTilePropertiesLayer(e,c)}}},Ul.propagateObjectTypes=function(e,h,n,t){null==n&&(n=!0);var u=function(e){switch(e._hx_index){case 1:for(var n=0,t=e.group.objects;n<t.length;){var i=t[n];if(++n,null!=i.type){var l=h.h[i.type];if(null!=l)for(var s=0,r=l.properties;s<r.length;){var a=r[s];++s,i.properties.exists(a.name)||null==a.defaultValue||i.properties.setRaw(a.name,a.defaultValue,a.type)}}}break;case 3:for(n=0,t=e.group.layers;n<t.length;){e=t[n];++n,u(e)}}};if(t=null==t?!0:t)for(var i=0,l=e.tilesets;i<l.length;){var s=l[i];if(++i,null!=s.tiles)for(var r=0,a=s.tiles;r<a.length;){var c=a[r];if(++r,null!=c.objectGroup)for(var o=0,_=c.objectGroup.objects;o<_.length;){var d=_[o];if(++o,null!=d.type){var b=h.h[d.type];if(null!=b)for(var g=0,O=b.properties;g<O.length;){var f=O[g];++g,d.properties.exists(f.name)||null==f.defaultValue||d.properties.setRaw(f.name,f.defaultValue,f.type)}}}}}if(n)for(i=0,l=e.layers;i<l.length;){var p=l[i];++i,u(p)}},Ul.getTileByGid=function(e,n){e=Ul.getTilesetByGid(e,n);if(null!=e&&null!=e.tiles)for(var t=n-e.firstGID,i=0,l=e.tiles;i<l.length;){var s=l[i];if(++i,s.id==t)return s}return null},Ul.getTilesetByGid=function(e,n){if(n<=0)return null;for(var t=0;t<e.tilesets.length;){if(e.tilesets[t].firstGID>n)return e.tilesets[t-1];++t}return e.tilesets[t-1]},Ul.getTilesetIndexByGid=function(e,n){if(n<=0)return-1;for(var t=0;t<e.tilesets.length;){if(e.tilesets[t].firstGID>n)return t-1;++t}return t-1},Ul.getTileUVByLidUnsafe=function(e,n,t){var i=Ul.getTilesCountInLineOnTileset(e);N.setProperty(t,"x",n%i*(e.tileWidth+e.spacing)+e.margin),N.setProperty(t,"y",Math.floor(n/i)*(e.tileHeight+e.spacing)+e.margin)},Ul.fixObjectPlacement=function(e){Ul.topLeftObjectOrigin(e)},Ul.topLeftObjectOrigin=function(e){for(var n=Math.PI/180,t=0,i=e.layers;t<i.length;){var l=i[t];if(++t,1==l._hx_index)for(var s=0,r=l.group.objects;s<r.length;){var a=r[s],h=(++s,a.height),u=(null!=h&&0!=h||(h=(1==(u=a.objectType)._hx_index&&(u=u.gid,null!=(u=Ul.getTilesetByGid(e,u)))&&null!=u.tileHeight?u:e).tileHeight),a.rotation*n);a.x+=Math.sin(u)*h,a.y-=Math.cos(u)*h}}},Ul.getTilesCountInLineOnTileset=function(e){return Math.floor((e.image.width-2*e.margin+e.spacing)/(e.tileWidth+e.spacing))},Ul.getTilesCountInColumnOnTileset=function(e){return Math.floor((e.image.height-2*e.margin+e.spacing)/(e.tileHeight+e.spacing))},Ul.getTilesCountInTileset=function(e){return Math.floor((e.image.width-2*e.margin+e.spacing)/(e.tileWidth+e.spacing))*Math.floor((e.image.height-2*e.margin+e.spacing)/(e.tileHeight+e.spacing))},Ul.tilePosition=function(e,n,t,i,l){var s,r=0,a=0;if(null==i)s=e.tileHeight;else if(s=i.tileHeight,null!=i.tileOffset&&(r=i.tileOffset.x,a=i.tileOffset.y),0==s&&(s=e.tileHeight),null!=l)for(var h=0,u=i.tiles;h<u.length;){var c=u[h];if(++h,c.id==l&&null!=c.image){s=c.image.height;break}}switch(s-=e.tileHeight,(h=e.orientation)._hx_index){case 0:return{x:e.tileWidth*n+r,y:e.tileHeight*t-s+a};case 1:var o=.5*e.tileWidth;return{x:n*o-t*o+r,y:(t+n)*(.5*e.tileHeight)-s+a};case 2:case 3:return null;case 4:u=h.value;return{x:e.tileWidth*n+r,y:e.tileHeight*t-s+a}}},I["haxe.StackItem"]={__ename__:"haxe.StackItem",__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:d},Module:((b=function(e){return{_hx_index:1,m:e,__enum__:"haxe.StackItem",toString:d}})._hx_name="Module",b.__params__=["m"],b),FilePos:((b=function(e,n,t,i){return{_hx_index:2,s:e,file:n,line:t,column:i,__enum__:"haxe.StackItem",toString:d}})._hx_name="FilePos",b.__params__=["s","file","line","column"],b),Method:((b=function(e,n){return{_hx_index:3,classname:e,method:n,__enum__:"haxe.StackItem",toString:d}})._hx_name="Method",b.__params__=["classname","method"],b),LocalFunction:((b=function(e){return{_hx_index:4,v:e,__enum__:"haxe.StackItem",toString:d}})._hx_name="LocalFunction",b.__params__=["v"],b)}),Tl=(xl.__constructs__=[xl.CFunction,xl.Module,xl.FilePos,xl.Method,xl.LocalFunction],{}),Q=(Tl.callStack=function(){return Al.toHaxe(Al.callStack())},Tl.exceptionStack=function(e){null==e&&(e=!1);var n=Al.toHaxe(Al.exceptionStack());return e?n:Tl.subtract(n,Tl.callStack())},Tl.subtract=function(e,n){for(var t=-1,i=-1;++i<e.length;){for(var l=0,s=n.length;l<s;){var r=l++;if(Tl.equalItems(e[i],n[r])){if(t<0&&(t=i),++i>=e.length)break}else t=-1}if(0<=t)break}return 0<=t?e.slice(0,t):e},Tl.equalItems=function(e,n){if(null==e)return null==n;switch(e._hx_index){case 0:return null!=n&&0==n._hx_index;case 1:return null!=n&&1==n._hx_index&&(t=n.m,e.m==t);case 2:var t,i,l,s;return null!=n&&2==n._hx_index&&(t=n.s,a=n.file,u=n.line,i=n.column,l=e.column,h=e.line,r=e.file,s=e.s,r==a)&&h==u&&l==i&&Tl.equalItems(s,t);case 3:var r,a,h;return null!=n&&3==n._hx_index&&(r=n.classname,a=n.method,h=e.method,e.classname==r)&&h==a;case 4:var u;return null!=n&&4==n._hx_index&&(u=n.v,e.v==u)}},(L["haxe.IMap"]=a3).__name__="haxe.IMap",a3.__isInterface__=!0,a3.prototype={get:null,keys:null,iterator:null,keyValueIterator:null,__class__:a3},function(e,n,t){Error.call(this,e),this.message=e,this.__previousException=n,this.__nativeException=null!=t?t:this,this.__skipStack=0;e=Error.prepareStackTrace;if(Error.prepareStackTrace=function(e){return e.stack},t instanceof Error)this.stack=t.stack;else{n=null;if(Error.captureStackTrace)Error.captureStackTrace(this,Q),n=this;else if(void 0===(n=new Error).stack){try{throw n}catch(e){}this.__skipStack++}this.stack=n.stack}Error.prepareStackTrace=e}),Dl=((L["haxe.Exception"]=Q).__name__="haxe.Exception",Q.caught=function(e){return e instanceof Q?e:e instanceof Error?new Q(e.message,null,e):new Ml(e,null,e)},Q.thrown=function(e){return e instanceof Q?e.get_native():e instanceof Error?e:((e=new Ml(e)).__skipStack++,e)},Q.__super__=Error,Q.prototype=$extend(Error.prototype,{__skipStack:null,__nativeException:null,__previousException:null,unwrap:function(){return this.__nativeException},toString:function(){return this.get_message()},__shiftStack:function(){this.__skipStack++},get_message:function(){return this.message},get_native:function(){return this.__nativeException},get_stack:function(){var e,n=this.__exceptionStack;return null==n?(e=Al.toHaxe(Al.normalize(this.stack),this.__skipStack),this.setProperty("__exceptionStack",e),e):n},setProperty:function(n,t){try{Object.defineProperty(this,n,{value:t})}catch(e){this[n]=t}},__class__:Q,__properties__:{get_native:"get_native",get_stack:"get_stack",get_message:"get_message"}}),function(){}),Al=((L["haxe.Log"]=Dl).__name__="haxe.Log",Dl.formatOutput=function(e,n){var t=V.string(e);if(null==n)return t;var i=n.fileName+":"+n.lineNumber;if(null!=n.customParams)for(var l=0,s=n.customParams;l<s.length;){e=s[l];++l,t+=", "+V.string(e)}return i+": "+t},Dl.trace=function(e,n){e=Dl.formatOutput(e,n);"undefined"!=typeof console&&null!=console.log&&console.log(e)},function(){}),Sl=((L["haxe.NativeStackTrace"]=Al).__name__="haxe.NativeStackTrace",Al.saveStack=function(e){Al.lastError=e},Al.callStack=function(){var e=new Error(""),n=Al.tryHaxeStack(e);if(void 0===n){try{throw e}catch(e){}n=e.stack}return Al.normalize(n,2)},Al.exceptionStack=function(){return Al.normalize(Al.tryHaxeStack(Al.lastError))},Al.toHaxe=function(e,n){if(null==n&&(n=0),null==e)return[];if("string"!=typeof e)return 0<n&&Array.isArray(e)?e.slice(n):e;for(var t=e.split("\n"),i=("Error"==t[0]&&t.shift(),[]),l=0,s=t.length;l<s;){var r,a,h,u,c,o=l++;o<n||(null!=(c=(o=t[o]).match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/))?("$hxClasses"==(r=c[1].split("."))[0]&&r.shift(),a=r.pop(),h=c[2],u=V.parseInt(c[3]),c=V.parseInt(c[4]),i.push(xl.FilePos("Anonymous function"==a?xl.LocalFunction():"Global code"==a?null:xl.Method(r.join("."),a),h,u,c))):i.push(xl.Module(B.trim(o))))}return i},Al.tryHaxeStack=function(e){var n;return null==e?[]:(n=Error.prepareStackTrace,Error.prepareStackTrace=Al.prepareHxStackTrace,e=e.stack,Error.prepareStackTrace=n,e)},Al.prepareHxStackTrace=function(e,n){for(var t=[],i=0;i<n.length;){var l=n[i],s=(++i,null),r=(l=null!=Al.wrapCallSite?Al.wrapCallSite(l):l).getFunctionName(),a=(null!=r&&(s=0<=(h=r.lastIndexOf("."))?(a=r.substring(0,h),h=r.substring(h+1),xl.Method(a,h)):xl.Method(null,r)),l.getFileName()),h=null==a?-1:a.indexOf("file:");null!=Al.wrapCallSite&&0<h&&(a=a.substring(h+6)),t.push(xl.FilePos(s,a,l.getLineNumber(),l.getColumnNumber()))}return t},Al.normalize=function(e,n){if(null==n&&(n=0),Array.isArray(e)&&0<n)return e.slice(n);if("string"!=typeof e)return e;switch(e.substring(0,6)){case"Error\n":case"Error:":++n}return Al.skipLines(e,n)},Al.skipLines=function(e,n,t){return null==t&&(t=0),0<n?(t=e.indexOf("\n",t))<0?"":Al.skipLines(e,--n,t+1):e.substring(t)},function(){this.buf=new A,this.cache=[],this.useCache=Sl.USE_CACHE,this.useEnumIndex=Sl.USE_ENUM_INDEX,this.shash=new z,this.scount=0}),El=((L["haxe.Serializer"]=Sl).__name__="haxe.Serializer",Sl.prototype={buf:null,cache:null,shash:null,scount:null,useCache:null,useEnumIndex:null,toString:function(){return this.buf.b},serializeString:function(e){var n=this.shash.h[e];null!=n?(this.buf.b+="R",this.buf.b+=null==n?"null":""+n):(this.shash.h[e]=this.scount++,this.buf.b+="y",e=encodeURIComponent(e),this.buf.b+=V.string(e.length),this.buf.b+=":",this.buf.b+=null==e?"null":""+e)},serializeRef:function(e){for(var n=typeof e,t=0,i=this.cache.length;t<i;){var l=t++,s=this.cache[l];if(typeof s==n&&s==e)return this.buf.b+="r",this.buf.b+=null==l?"null":""+l,!0}return this.cache.push(e),!1},serializeFields:function(e){for(var n=0,t=N.fields(e);n<t.length;){var i=t[n];++n,this.serializeString(i),this.serialize(N.field(e,i))}this.buf.b+="g"},serialize:function(e){switch((x=D.typeof(e))._hx_index){case 0:this.buf.b+="n";break;case 1:0==(n=e)?this.buf.b+="z":(this.buf.b+="i",this.buf.b+=null==n?"null":""+n);break;case 2:var n=e;isNaN(n)?this.buf.b+="k":isFinite(n)?(this.buf.b+="d",this.buf.b+=null==n?"null":""+n):this.buf.b+=n<0?"m":"p";break;case 3:this.buf.b+=e?"t":"f";break;case 4:if(ys.__instanceof(e,Es)){var t=e.__name__;this.buf.b+="A",this.serializeString(t)}else if(ys.__instanceof(e,Ms))this.buf.b+="B",this.serializeString(e.__ename__);else{if(this.useCache&&this.serializeRef(e))return;this.buf.b+="o",this.serializeFields(e)}break;case 5:throw Q.thrown("Cannot serialize function");case 6:var i=x.c;if(i==String)this.serializeString(e);else if(!this.useCache||!this.serializeRef(e))switch(i){case Array:var l=0;this.buf.b+="a";for(var s=0,r=e.length;s<r;)null==e[d=s++]?++l:(0<l&&(1==l?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==l?"null":""+l),l=0),this.serialize(e[d]));0<l&&(1==l?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==l?"null":""+l)),this.buf.b+="h";break;case Date:var a=e;this.buf.b+="v",this.buf.b+=V.string(a.getTime());break;case Hl:this.buf.b+="q";for(var u=(n=e).keys();u.hasNext();){var c=u.next();this.buf.b+=":",this.buf.b+=null==c?"null":""+c,this.serialize(n.h[c])}this.buf.b+="h";break;case zl:this.buf.b+="l";for(var o=(n=e).h;null!=o;){var _=o.item,o=o.next,d=_;this.serialize(d)}this.buf.b+="h";break;case Xl:this.buf.b+="M";for(u=(n=e).keys();u.hasNext();){var c=u.next(),b=N.field(c,"__id__");N.deleteField(c,"__id__"),this.serialize(c),c.__id__=b,this.serialize(n.h[c.__id__])}this.buf.b+="h";break;case z:this.buf.b+="b";for(var a=(n=e).h,g=Object.keys(a),O=g.length,f=0;f<O;){u=g[f++];this.serializeString(u),this.serialize(n.h[u])}this.buf.b+="h";break;case kl:var n=e,d=(this.buf.b+="s",this.buf.b+=V.string(Math.ceil(8*n.length/6)),this.buf.b+=":",0),p=n.length-2;if(null==(m=Sl.BASE64_CODES)){for(var m=new Array(Sl.BASE64.length),s=0,r=Sl.BASE64.length;s<r;){var w=s++;m[w]=h.cca(Sl.BASE64,w)}Sl.BASE64_CODES=m}for(;d<p;){var v=n.b[d++],y=n.b[d++],C=n.b[d++];this.buf.b+=String.fromCodePoint(m[v>>2]),this.buf.b+=String.fromCodePoint(m[63&(v<<4|y>>4)]),this.buf.b+=String.fromCodePoint(m[63&(y<<2|C>>6)]),this.buf.b+=String.fromCodePoint(m[63&C])}d==p?(v=n.b[d++],y=n.b[d++],this.buf.b+=String.fromCodePoint(m[v>>2]),this.buf.b+=String.fromCodePoint(m[63&(v<<4|y>>4)]),this.buf.b+=String.fromCodePoint(m[y<<2&63])):d==1+p&&(v=n.b[d++],this.buf.b+=String.fromCodePoint(m[v>>2]),this.buf.b+=String.fromCodePoint(m[v<<4&63]));break;default:this.useCache&&this.cache.pop(),null!=e.hxSerialize?(this.buf.b+="C",this.serializeString(i.__name__),this.useCache&&this.cache.push(e),e.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(i.__name__),this.useCache&&this.cache.push(e),this.serializeFields(e))}break;case 7:t=x.e;if(this.useCache){if(this.serializeRef(e))return;this.cache.pop()}this.buf.b+=V.string(this.useEnumIndex?"j":"w"),this.serializeString(t.__ename__),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=V.string(e._hx_index)):this.serializeString(I[(t=e).__enum__].__constructs__[e._hx_index]._hx_name),this.buf.b+=":";for(var U=D.enumParameters(e),x=(this.buf.b+=V.string(U.length),0);x<U.length;){var T=U[x];++x,this.serialize(T)}this.useCache&&this.cache.push(e);break;default:throw Q.thrown("Cannot serialize "+V.string(e))}},__class__:Sl},(L["haxe._Unserializer.DefaultResolver"]=f3).__name__="haxe._Unserializer.DefaultResolver",f3.prototype={resolveClass:function(e){return L[e]},resolveEnum:function(e){return I[e]},__class__:f3},function(e){this.buf=e,this.length=this.buf.length,this.pos=0,this.scache=[],this.cache=[];e=El.DEFAULT_RESOLVER;null==e&&(e=new f3,El.DEFAULT_RESOLVER=e),this.resolver=e}),Ml=((L["haxe.Unserializer"]=El).__name__="haxe.Unserializer",El.initCodes=function(){for(var e=[],n=0,t=El.BASE64.length;n<t;){var i=n++;e[El.BASE64.charCodeAt(i)]=i}return e},El.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,readDigits:function(){for(var e=0,n=!1,t=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45==i){if(this.pos!=t)break;n=!0}else{if(i<48||57<i)break;e=10*e+(i-48)}this.pos++}return n&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var n=this.buf.charCodeAt(this.pos);if(n!=n)break;if(!(43<=n&&n<58||101==n||69==n))break;this.pos++}return parseFloat(h.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw Q.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var n=this.unserialize();if("string"!=typeof n)throw Q.thrown("Invalid object key");var t=this.unserialize();e[n]=t}this.pos++},unserializeEnum:function(e,n){if(58!=this.buf.charCodeAt(this.pos++))throw Q.thrown("Invalid enum format");var t=this.readDigits();if(0==t)return D.createEnum(e,n);for(var i=[];0<t--;)i.push(this.unserialize());return D.createEnum(e,n,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize();if(null==(a=this.resolver.resolveClass(e)))throw Q.thrown("Class not found "+e);return a;case 66:e=this.unserialize();if(null==(b=this.resolver.resolveEnum(e)))throw Q.thrown("Enum not found "+e);return b;case 67:e=this.unserialize();if(null==(a=this.resolver.resolveClass(e)))throw Q.thrown("Class not found "+e);var n=Object.create(a.prototype);if(this.cache.push(n),n.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw Q.thrown("Invalid custom data");return n;case 77:for(var t=new Xl,i=(this.cache.push(t),this.buf);104!=this.buf.charCodeAt(this.pos);){var l=this.unserialize();t.set(l,this.unserialize())}return this.pos++,t;case 82:if((p=this.readDigits())<0||p>=this.scache.length)throw Q.thrown("Invalid string reference");return this.scache[p];case 97:var i=this.buf,s=[];for(this.cache.push(s);;){if(104==(O=this.buf.charCodeAt(this.pos))){this.pos++;break}117==O?(this.pos++,p=this.readDigits(),s[s.length+p-1]=null):s.push(this.unserialize())}return s;case 98:for(t=new z,i=(this.cache.push(t),this.buf);104!=this.buf.charCodeAt(this.pos);){var l=this.unserialize(),r=this.unserialize();t.h[l]=r}return this.pos++,t;case 99:var e=this.unserialize();if(null==(a=this.resolver.resolveClass(e)))throw Q.thrown("Class not found "+e);n=Object.create(a.prototype);return this.cache.push(n),this.unserializeObject(n),n;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:e=this.unserialize();if(null==(S=this.resolver.resolveEnum(e)))throw Q.thrown("Enum not found "+e);this.pos++;for(var a=this.readDigits(),u=S.__constructs__,c=new Array(u.length),o=0,_=u.length;o<_;)c[f=o++]=u[f]._hx_name;var d=c[a];if(null==d)throw Q.thrown("Unknown enum index "+e+"@"+a);var b=this.unserializeEnum(S,d);return this.cache.push(b),b;case 107:return NaN;case 108:for(var g=new zl,i=(this.cache.push(g),this.buf);104!=this.buf.charCodeAt(this.pos);)g.add(this.unserialize());return this.pos++,g;case 109:return-1/0;case 110:return null;case 111:n={};return this.cache.push(n),this.unserializeObject(n),n;case 112:return 1/0;case 113:for(var t=new Hl,i=(this.cache.push(t),this.buf),O=this.buf.charCodeAt(this.pos++);58==O;){var f=this.readDigits(),r=this.unserialize();t.h[f]=r,O=this.buf.charCodeAt(this.pos++)}if(104!=O)throw Q.thrown("Invalid IntMap format");return t;case 114:var p;if((p=this.readDigits())<0||p>=this.cache.length)throw Q.thrown("Invalid reference");return this.cache[p];case 115:var m=this.readDigits(),i=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<m)throw Q.thrown("Invalid bytes length");var w=El.CODES;null==w&&(w=El.initCodes(),El.CODES=w);for(var a=3&m,v=(f=this.pos)+(m-a),y=new kl(new ArrayBuffer(3*(m>>2)+(2<=a?a-1:0))),C=0;f<v;){var U=w[i.charCodeAt(f++)],x=w[i.charCodeAt(f++)],T=(y.b[C++]=U<<2|x>>4,w[i.charCodeAt(f++)]),D=(y.b[C++]=x<<4|T>>2,w[i.charCodeAt(f++)]);y.b[C++]=T<<6|D}return 2<=a&&(U=w[i.charCodeAt(f++)],x=w[i.charCodeAt(f++)],y.b[C++]=U<<2|x>>4,3==a)&&(T=w[i.charCodeAt(f++)],y.b[C++]=x<<4|T>>2),this.pos+=m,this.cache.push(y),y;case 116:return!0;case 118:var A;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(A=h.strDate(h.substr(this.buf,this.pos,19)),this.pos+=19):A=new Date(this.readFloat()),this.cache.push(A),A;case 119:var S,e=this.unserialize();if(null==(S=this.resolver.resolveEnum(e)))throw Q.thrown("Enum not found "+e);b=this.unserializeEnum(S,this.unserialize());return this.cache.push(b),b;case 120:throw Q.thrown(this.unserialize());case 121:m=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<m)throw Q.thrown("Invalid string length");l=h.substr(this.buf,this.pos,m);return this.pos+=m,l=decodeURIComponent(l.split("+").join(" ")),this.scache.push(l),l;case 122:return 0}throw this.pos--,Q.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:El},function(e,n,t){Q.call(this,String(e),n,t),this.value=e,this.__skipStack++}),kl=((L["haxe.ValueException"]=Ml).__name__="haxe.ValueException",Ml.__super__=Q,Ml.prototype=$extend(Q.prototype,{value:null,unwrap:function(){return this.value},__class__:Ml}),(L["haxe.crypto.Adler32"]=i3).__name__="haxe.crypto.Adler32",i3.read=function(e){var n=new i3,t=e.readByte(),i=e.readByte(),l=e.readByte(),e=e.readByte();return n.a1=l<<8|e,n.a2=t<<8|i,n},i3.prototype={a1:null,a2:null,update:function(e,n,t){for(var i=this.a1,l=this.a2,s=n,r=n+t;s<r;)var a=s++,l=(l+(i=(i+e.b[a])%65521))%65521;this.a1=i,this.a2=l},equals:function(e){return e.a1==this.a1&&e.a2==this.a2},__class__:i3},function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b}),Il=((L["haxe.io.Bytes"]=kl).__name__="haxe.io.Bytes",kl.ofString=function(e,n){if(n==Il.RawNative){for(var t=new Uint8Array(e.length<<1),i=0,l=e.length;i<l;){var s=i++,r=e.charCodeAt(s);t[s<<1]=255&r,t[s<<1|1]=r>>8}return new kl(t.buffer)}for(var a=[],s=0;s<e.length;)(r=55296<=(r=e.charCodeAt(s++))&&r<=56319?r-55232<<10|1023&e.charCodeAt(s++):r)<=127?a.push(r):(r<=2047?a.push(192|r>>6):(r<=65535?a.push(224|r>>12):(a.push(240|r>>18),a.push(128|r>>12&63)),a.push(128|r>>6&63)),a.push(128|63&r));return new kl(new Uint8Array(a).buffer)},kl.ofHex=function(e){if(0!=(1&e.length))throw Q.thrown("Not a hex string (odd number of digits)");for(var n=[],t=0,i=e.length>>1;t<i;){var l=e.charCodeAt(2*t),s=e.charCodeAt(2*t+1);n.push(255&((15&l)+9*((64&l)>>6)<<4|(15&s)+9*((64&s)>>6))),++t}return new kl(new Uint8Array(n).buffer)},kl.prototype={length:null,b:null,data:null,blit:function(e,n,t,i){if(e<0||t<0||i<0||e+i>this.length||t+i>n.length)throw Q.thrown(es.OutsideBounds);0==t&&i==n.b.byteLength?this.b.set(n.b,e):this.b.set(n.b.subarray(t,t+i),e)},fill:function(e,n,t){for(var i=0,l=n;i<l;){i++;this.b[e++]=t}},sub:function(e,n){if(e<0||n<0||e+n>this.length)throw Q.thrown(es.OutsideBounds);return new kl(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+n))},compare:function(e){for(var n=this.b,t=e.b,i=0,l=(this.length<e.length?this:e).length;i<l;){var s=i++;if(n[s]!=t[s])return n[s]-t[s]}return this.length-e.length},getUInt16:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)},setUInt16:function(e,n){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setUint16(e,n,!0)},getInt32:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)},setInt32:function(e,n){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,n,!0)},getString:function(e,n,t){if(e<0||n<0||e+n>this.length)throw Q.thrown(es.OutsideBounds);null==t&&(t=Il.UTF8);var i="",l=this.b,s=e,r=e+n;switch(t._hx_index){case 0:for(var a,h;s<r;)if((u=l[s++])<128){if(0==u)break;i+=String.fromCodePoint(u)}else u<224?(a=(63&u)<<6|127&l[s++],i+=String.fromCodePoint(a)):u<240?(a=(31&u)<<12|(127&l[s++])<<6|127&l[s++],i+=String.fromCodePoint(a)):(h=(15&u)<<18|(127&l[s++])<<12|(127&l[s++])<<6|127&l[s++],i+=String.fromCodePoint(h));break;case 1:for(;s<r;){var u=l[s++]|l[s++]<<8;i+=String.fromCodePoint(u)}}return i},toString:function(){return this.getString(0,this.length)},__class__:kl},I["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:d},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:d}}),Rl=(Il.__constructs__=[Il.UTF8,Il.RawNative],function(){}),Fl=((L["haxe.crypto.Base64"]=Rl).__name__="haxe.crypto.Base64",Rl.decode=function(e,n){if(n=null==n?!0:n)for(;61==h.cca(e,e.length-1);)e=h.substr(e,0,-1);return new Fl(Rl.BYTES).decodeBytes(kl.ofString(e))},function(e){for(var n=e.length,t=1;1<<t<n;)++t;if(8<t||n!=1<<t)throw Q.thrown("BaseCode : base length must be a power of two.");this.base=e,this.nbits=t}),Pl=((L["haxe.crypto.BaseCode"]=Fl).__name__="haxe.crypto.BaseCode",Fl.prototype={base:null,nbits:null,tbl:null,initTable:function(){for(var e=[],n=0;n<256;)e[i=n++]=-1;for(var n=0,t=this.base.length;n<t;){var i=n++;e[this.base.b[i]]=i}this.tbl=e},decodeBytes:function(e){for(var n=this.nbits,t=(this.base,null==this.tbl&&this.initTable(),this.tbl),i=e.length*n>>3,l=new kl(new ArrayBuffer(i)),s=0,r=0,a=0,h=0;h<i;){for(;r<8;){r+=n,s<<=n;var u=t[e.b[a++]];if(-1==u)throw Q.thrown("BaseCode : invalid encoded char");s|=u}r-=8,l.b[h++]=s>>r&255}return l},__class__:Fl},I["haxe.crypto.HashMethod"]={__ename__:"haxe.crypto.HashMethod",__constructs__:null,MD5:{_hx_name:"MD5",_hx_index:0,__enum__:"haxe.crypto.HashMethod",toString:d},SHA1:{_hx_name:"SHA1",_hx_index:1,__enum__:"haxe.crypto.HashMethod",toString:d},SHA256:{_hx_name:"SHA256",_hx_index:2,__enum__:"haxe.crypto.HashMethod",toString:d}}),Bl=(Pl.__constructs__=[Pl.MD5,Pl.SHA1,Pl.SHA256],function(e){var n;switch(this.method=e,this.blockSize=64,e._hx_index){case 0:n=16;break;case 1:n=20;break;case 2:n=32}this.length=n}),Ll=((L["haxe.crypto.Hmac"]=Bl).__name__="haxe.crypto.Hmac",Bl.prototype={method:null,blockSize:null,length:null,nullPad:function(e,n){var t=n-e.length%n;if(t==n&&0!=e.length)return e;for(var i=new Ql,l=(i.add(e),0),s=t;l<s;){l++;i.addByte(0)}return i.getBytes()},make:function(e,n){if(e.length>this.blockSize)switch(this.method._hx_index){case 0:e=Ll.make(e);break;case 1:e=Nl.make(e);break;case 2:e=Wl.make(e)}e=this.nullPad(e,this.blockSize);for(var t=new Ql,i=new Ql,l=0,s=e.length;l<s;){var r=l++;i.addByte(92^e.b[r]),t.addByte(54^e.b[r])}t.add(n);var a,h=t.getBytes();switch(this.method._hx_index){case 0:a=Ll.make(h);break;case 1:a=Nl.make(h);break;case 2:a=Wl.make(h)}i.add(a);h=i.getBytes();switch(this.method._hx_index){case 0:return Ll.make(h);case 1:return Nl.make(h);case 2:return Wl.make(h)}},__class__:Bl},function(){}),Nl=((L["haxe.crypto.Md5"]=Ll).__name__="haxe.crypto.Md5",Ll.encode=function(e){var n=new Ll,e=n.doEncode(Ll.str2blks(e));return n.hex(e)},Ll.make=function(e){var e=(new Ll).doEncode(Ll.bytes2blks(e)),n=new kl(new ArrayBuffer(16)),t=0;return n.b[t++]=255&e[0],n.b[t++]=e[0]>>8&255,n.b[t++]=e[0]>>16&255,n.b[t++]=e[0]>>>24,n.b[t++]=255&e[1],n.b[t++]=e[1]>>8&255,n.b[t++]=e[1]>>16&255,n.b[t++]=e[1]>>>24,n.b[t++]=255&e[2],n.b[t++]=e[2]>>8&255,n.b[t++]=e[2]>>16&255,n.b[t++]=e[2]>>>24,n.b[t++]=255&e[3],n.b[t++]=e[3]>>8&255,n.b[+t]=e[3]>>16&255,n.b[15]=e[3]>>>24,n},Ll.bytes2blks=function(e){for(var n=1+(e.length+8>>6),t=[],i=0,l=16*n;i<l;)t[s=i++]=0;for(var s=0;s<e.length;)t[s>>2]|=e.b[s]<<(((e.length<<3)+s&3)<<3),++s;t[s>>2]|=128<<(8*e.length+s)%4*8;var r=8*e.length,n=16*n-2;return t[n]=255&r,t[n]|=(r>>>8&255)<<8,t[n]|=(r>>>16&255)<<16,t[n]|=(r>>>24&255)<<24,t},Ll.str2blks=function(e){for(var n=kl.ofString(e),e=1+(n.length+8>>6),t=[],i=0,l=16*e;i<l;)t[s=i++]=0;for(var s=0,r=n.length,a=8*r;s<r;)t[s>>2]|=n.b[s]<<(a+s)%4*8,++s;t[s>>2]|=128<<(a+s)%4*8;e=16*e-2;return t[e]=255&a,t[e]|=(a>>>8&255)<<8,t[e]|=(a>>>16&255)<<16,t[e]|=(a>>>24&255)<<24,t},Ll.prototype={bitOR:function(e,n){return(e>>>1|n>>>1)<<1|(1&e|1&n)},bitXOR:function(e,n){return(e>>>1^n>>>1)<<1|1&e^1&n},bitAND:function(e,n){return(e>>>1&n>>>1)<<1|1&e&n},addme:function(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t},hex:function(e){for(var n="",t="0123456789abcdef",i=0;i<e.length;){var l=e[i];++i,n=(n=(n=(n+=t.charAt(l>>4&15)+t.charAt(15&l))+(t.charAt(l>>12&15)+t.charAt(l>>8&15)))+(t.charAt(l>>20&15)+t.charAt(l>>16&15)))+(t.charAt(l>>28&15)+t.charAt(l>>24&15))}return n},rol:function(e,n){return e<<n|e>>>32-n},cmn:function(e,n,t,i,l,s){return this.addme(this.rol(this.addme(this.addme(n,e),this.addme(i,s)),l),t)},ff:function(e,n,t,i,l,s,r){return this.cmn(this.bitOR(this.bitAND(n,t),this.bitAND(~n,i)),e,n,l,s,r)},gg:function(e,n,t,i,l,s,r){return this.cmn(this.bitOR(this.bitAND(n,i),this.bitAND(t,~i)),e,n,l,s,r)},hh:function(e,n,t,i,l,s,r){return this.cmn(this.bitXOR(this.bitXOR(n,t),i),e,n,l,s,r)},ii:function(e,n,t,i,l,s,r){return this.cmn(this.bitXOR(t,this.bitOR(n,~i)),e,n,l,s,r)},doEncode:function(e){for(var n=1732584193,t=-271733879,i=-1732584194,l=271733878,s=0;s<e.length;){var r=n,a=t,h=i,u=l,n=this.ff(n,t,i,l,e[s],7,-680876936),l=this.ff(l,n,t,i,e[s+1],12,-389564586),i=this.ff(i,l,n,t,e[s+2],17,606105819),t=this.ff(t,i,l,n,e[s+3],22,-1044525330);n=this.ff(n,t,i,l,e[s+4],7,-176418897),l=this.ff(l,n,t,i,e[s+5],12,1200080426),i=this.ff(i,l,n,t,e[s+6],17,-1473231341),t=this.ff(t,i,l,n,e[s+7],22,-45705983),n=this.ff(n,t,i,l,e[s+8],7,1770035416),l=this.ff(l,n,t,i,e[s+9],12,-1958414417),i=this.ff(i,l,n,t,e[s+10],17,-42063),t=this.ff(t,i,l,n,e[s+11],22,-1990404162),n=this.ff(n,t,i,l,e[s+12],7,1804603682),l=this.ff(l,n,t,i,e[s+13],12,-40341101),i=this.ff(i,l,n,t,e[s+14],17,-1502002290),t=this.ff(t,i,l,n,e[s+15],22,1236535329),n=this.gg(n,t,i,l,e[s+1],5,-165796510),l=this.gg(l,n,t,i,e[s+6],9,-1069501632),i=this.gg(i,l,n,t,e[s+11],14,643717713),t=this.gg(t,i,l,n,e[s],20,-373897302),n=this.gg(n,t,i,l,e[s+5],5,-701558691),l=this.gg(l,n,t,i,e[s+10],9,38016083),i=this.gg(i,l,n,t,e[s+15],14,-660478335),t=this.gg(t,i,l,n,e[s+4],20,-405537848),n=this.gg(n,t,i,l,e[s+9],5,568446438),l=this.gg(l,n,t,i,e[s+14],9,-1019803690),i=this.gg(i,l,n,t,e[s+3],14,-187363961),t=this.gg(t,i,l,n,e[s+8],20,1163531501),n=this.gg(n,t,i,l,e[s+13],5,-1444681467),l=this.gg(l,n,t,i,e[s+2],9,-51403784),i=this.gg(i,l,n,t,e[s+7],14,1735328473),t=this.gg(t,i,l,n,e[s+12],20,-1926607734),n=this.hh(n,t,i,l,e[s+5],4,-378558),l=this.hh(l,n,t,i,e[s+8],11,-2022574463),i=this.hh(i,l,n,t,e[s+11],16,1839030562),t=this.hh(t,i,l,n,e[s+14],23,-35309556),n=this.hh(n,t,i,l,e[s+1],4,-1530992060),l=this.hh(l,n,t,i,e[s+4],11,1272893353),i=this.hh(i,l,n,t,e[s+7],16,-155497632),t=this.hh(t,i,l,n,e[s+10],23,-1094730640),n=this.hh(n,t,i,l,e[s+13],4,681279174),l=this.hh(l,n,t,i,e[s],11,-358537222),i=this.hh(i,l,n,t,e[s+3],16,-722521979),t=this.hh(t,i,l,n,e[s+6],23,76029189),n=this.hh(n,t,i,l,e[s+9],4,-640364487),l=this.hh(l,n,t,i,e[s+12],11,-421815835),i=this.hh(i,l,n,t,e[s+15],16,530742520),t=this.hh(t,i,l,n,e[s+2],23,-995338651),n=this.ii(n,t,i,l,e[s],6,-198630844),l=this.ii(l,n,t,i,e[s+7],10,1126891415),i=this.ii(i,l,n,t,e[s+14],15,-1416354905),t=this.ii(t,i,l,n,e[s+5],21,-57434055),n=this.ii(n,t,i,l,e[s+12],6,1700485571),l=this.ii(l,n,t,i,e[s+3],10,-1894986606),i=this.ii(i,l,n,t,e[s+10],15,-1051523),t=this.ii(t,i,l,n,e[s+1],21,-2054922799),n=this.ii(n,t,i,l,e[s+8],6,1873313359),l=this.ii(l,n,t,i,e[s+15],10,-30611744),i=this.ii(i,l,n,t,e[s+6],15,-1560198380),t=this.ii(t,i,l,n,e[s+13],21,1309151649),n=this.ii(n,t,i,l,e[s+4],6,-145523070),l=this.ii(l,n,t,i,e[s+11],10,-1120210379),i=this.ii(i,l,n,t,e[s+2],15,718787259),t=this.ii(t,i,l,n,e[s+9],21,-343485551),n=this.addme(n,r),t=this.addme(t,a),i=this.addme(i,h),l=this.addme(l,u),s+=16}return[n,t,i,l]},__class__:Ll},function(){}),Wl=((L["haxe.crypto.Sha1"]=Nl).__name__="haxe.crypto.Sha1",Nl.make=function(e){var e=(new Nl).doEncode(Nl.bytes2blks(e)),n=new kl(new ArrayBuffer(20)),t=0;return n.b[t++]=e[0]>>>24,n.b[t++]=e[0]>>16&255,n.b[t++]=e[0]>>8&255,n.b[t++]=255&e[0],n.b[t++]=e[1]>>>24,n.b[t++]=e[1]>>16&255,n.b[t++]=e[1]>>8&255,n.b[t++]=255&e[1],n.b[t++]=e[2]>>>24,n.b[t++]=e[2]>>16&255,n.b[t++]=e[2]>>8&255,n.b[t++]=255&e[2],n.b[t++]=e[3]>>>24,n.b[t++]=e[3]>>16&255,n.b[t++]=e[3]>>8&255,n.b[t++]=255&e[3],n.b[t++]=e[4]>>>24,n.b[t++]=e[4]>>16&255,n.b[+t]=e[4]>>8&255,n.b[19]=255&e[4],n},Nl.bytes2blks=function(e){for(var n=1+(e.length+8>>6),t=[],i=0,l=16*n;i<l;)t[s=i++]=0;for(var s,i=0,l=e.length;i<l;)t[(s=i++)>>2]|=e.b[s]<<24-((3&s)<<3);return t[(s=e.length)>>2]|=128<<24-((3&s)<<3),t[16*n-1]=8*e.length,t},Nl.prototype={doEncode:function(e){for(var n=[],t=1732584193,i=-271733879,l=-1732584194,s=271733878,r=-1009589776,a=0;a<e.length;){for(var h=t,u=i,c=l,o=s,_=r,d=0;d<80;){n[d]=d<16?e[a+d]:(b=n[d-3]^n[d-8]^n[d-14]^n[d-16])<<1|b>>>31;var b=(t<<5|t>>>27)+this.ft(d,i,l,s)+r+n[d]+this.kt(d),r=s,s=l,l=i<<30|i>>>2,i=t,t=b;++d}t+=h,i+=u,l+=c,s+=o,r+=_,a+=16}return[t,i,l,s,r]},ft:function(e,n,t,i){return e<20?n&t|~n&i:!(e<40)&&e<60?n&t|n&i|t&i:n^t^i},kt:function(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514},__class__:Nl},function(){}),Gl=((L["haxe.crypto.Sha256"]=Wl).__name__="haxe.crypto.Sha256",Wl.make=function(e){for(var n=(new Wl).doEncode(Wl.bytes2blks(e),8*e.length),t=new kl(new ArrayBuffer(32)),i=0,l=0;l<8;){var s=l++;t.b[i++]=n[s]>>>24,t.b[i++]=n[s]>>16&255,t.b[i++]=n[s]>>8&255,t.b[i++]=255&n[s]}return t},Wl.bytes2blks=function(e){for(var n=1+(e.length+8>>6),t=[],i=0,l=16*n;i<l;)t[s=i++]=0;for(var s,i=0,l=e.length;i<l;)t[(s=i++)>>2]|=e.b[s]<<24-((3&s)<<3);return t[(s=e.length)>>2]|=128<<24-((3&s)<<3),t[16*n-1]=8*e.length,t},Wl.prototype={doEncode:function(e,n){for(var t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],i=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],l=[],s=(l[64]=0,e[n>>5]|=128<<24-n%32,e[15+(n+64>>9<<4)]=n,0);s<e.length;){y=i[0],v=i[1],w=i[2],m=i[3],p=i[4],f=i[5],O=i[6],g=i[7];for(var r=0;r<64;)var a=r++,h=(l[a]=a<16?e[a+s]:((u=((h=((u=((u=l[a-2])>>>17|u<<15)^(u>>>19|u<<13)^u>>>10)>>16)+((h=l[a-7])>>16)+((u=(65535&u)+(65535&h))>>16)<<16|65535&u)>>16)+((u=((u=l[a-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3)>>16)+((h=(65535&h)+(65535&u))>>16)<<16|65535&h)>>16)+((h=l[a-16])>>16)+((u=(65535&u)+(65535&h))>>16)<<16|65535&u,(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7)),u=(65535&g)+(65535&h),c=(g>>16)+(h>>16)+(u>>16)<<16|65535&u,o=p&f^~p&O,_=(65535&c)+(65535&o),c=(c>>16)+(o>>16)+(_>>16)<<16|65535&_,o=t[a],_=(65535&c)+(65535&o),c=(c>>16)+(o>>16)+(_>>16)<<16|65535&_,o=l[a],_=(65535&c)+(65535&o),a=(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10),d=y&v^y&w^v&w,b=(65535&a)+(65535&d),g=O,O=f,f=p,o=(65535&m)+(65535&(c=(c>>16)+(o>>16)+(_>>16)<<16|65535&_)),p=(m>>16)+(c>>16)+(o>>16)<<16|65535&o,m=w,w=v,v=y,o=(65535&c)+(65535&(_=(a>>16)+(d>>16)+(b>>16)<<16|65535&b)),y=(c>>16)+(_>>16)+(o>>16)<<16|65535&o;var C=i[0],U=(65535&y)+(65535&C),C=(i[0]=(y>>16)+(C>>16)+(U>>16)<<16|65535&U,i[1]),U=(65535&v)+(65535&C),C=(i[1]=(v>>16)+(C>>16)+(U>>16)<<16|65535&U,i[2]),U=(65535&w)+(65535&C),C=(i[2]=(w>>16)+(C>>16)+(U>>16)<<16|65535&U,i[3]),U=(65535&m)+(65535&C),C=(i[3]=(m>>16)+(C>>16)+(U>>16)<<16|65535&U,i[4]),U=(65535&p)+(65535&C),C=(i[4]=(p>>16)+(C>>16)+(U>>16)<<16|65535&U,i[5]),U=(65535&f)+(65535&C),C=(i[5]=(f>>16)+(C>>16)+(U>>16)<<16|65535&U,i[6]),U=(65535&O)+(65535&C),C=(i[6]=(O>>16)+(C>>16)+(U>>16)<<16|65535&U,i[7]),U=(65535&g)+(65535&C);i[7]=(g>>16)+(C>>16)+(U>>16)<<16|65535&U,s+=16}return i},__class__:Wl},function(){}),Hl=((L["haxe.ds.ArraySort"]=Gl).__name__="haxe.ds.ArraySort",Gl.sort=function(e,n){Gl.rec(e,n,0,e.length)},Gl.rec=function(e,n,t,i){var l=t+i>>1;if(i-t<12){if(!(i<=t))for(var s=t+1,r=i;s<r;)for(var a=s++;t<a&&n(e[a],e[a-1])<0;)Gl.swap(e,a-1,a),--a}else Gl.rec(e,n,t,l),Gl.rec(e,n,l,i),Gl.doMerge(e,n,t,l,i,l-t,i-l)},Gl.doMerge=function(e,n,t,i,l,s,r){var a,h,u,c;0!=s&&0!=r&&(s+r==2?n(e[i],e[t])<0&&Gl.swap(e,i,t):(r<s?c=(h=Gl.lower(e,n,i,l,a=t+(u=s>>1)))-i:u=(a=Gl.upper(e,n,t,i,h=i+(c=r>>1)))-t,Gl.rotate(e,n,a,i,h),Gl.doMerge(e,n,t,a,i=a+c,u,c),Gl.doMerge(e,n,i,h,l,s-u,r-c)))},Gl.rotate=function(e,n,t,i,l){if(t!=i&&i!=l)for(var s=Gl.gcd(l-t,i-t);0!=s--;){for(var r=e[t+s],a=i-t,h=t+s,u=t+s+a;u!=t+s;)e[h]=e[u],a<l-(h=u)?u+=a:u=t+(a-(l-u));e[h]=r}},Gl.gcd=function(e,n){for(;0!=n;){var t=e%n;e=n,n=t}return e},Gl.upper=function(e,n,t,i,l){for(var s,r,a=i-t;0<a;)a=n(e[l],e[r=t+(s=a>>1)])<0?s:(t=r+1,a-s-1);return t},Gl.lower=function(e,n,t,i,l){for(var s,r,a=i-t;0<a;)a=n(e[r=t+(s=a>>1)],e[l])<0?(t=r+1,a-s-1):s;return t},Gl.swap=function(e,n,t){var i=e[n];e[n]=e[t],e[t]=i},function(){this.h={}}),zl=((L["haxe.ds.IntMap"]=Hl).__name__="haxe.ds.IntMap",Hl.__interfaces__=[a3],Hl.prototype={h:null,get:function(e){return this.h[e]},remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e,n=[];for(e in this.h)this.h.hasOwnProperty(e)&&n.push(+e);return new ls(n)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},keyValueIterator:function(){return new ss(this)},copy:function(){for(var e=new Hl,n=this.keys();n.hasNext();){var t=n.next();e.h[t]=this.h[t]}return e},__class__:Hl},function(){this.length=0}),Kl=((L["haxe.ds.List"]=zl).__name__="haxe.ds.List",zl.prototype={h:null,q:null,length:null,add:function(e){e=new Kl(e,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},__class__:zl},function(e,n){this.item=e,this.next=n}),Xl=((L["haxe.ds._List.ListNode"]=Kl).__name__="haxe.ds._List.ListNode",Kl.prototype={item:null,next:null,__class__:Kl},function(){this.h={__keys__:{}}}),z=((L["haxe.ds.ObjectMap"]=Xl).__name__="haxe.ds.ObjectMap",Xl.__interfaces__=[a3],Xl.prototype={h:null,set:function(e,n){var t=e.__id__;null==t&&(t=e.__id__=ie.$haxeUID++),this.h[t]=n,this.h.__keys__[t]=e},get:function(e){return this.h[e.__id__]},keys:function(){var e,n=[];for(e in this.h.__keys__)this.h.hasOwnProperty(e)&&n.push(this.h.__keys__[e]);return new ls(n)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e.__id__]}}},keyValueIterator:function(){return new ss(this)},__class__:Xl},function(){this.h=Object.create(null)}),Yl=((L["haxe.ds.StringMap"]=z).__name__="haxe.ds.StringMap",z.__interfaces__=[a3],z.prototype={h:null,get:function(e){return this.h[e]},keys:function(){return new Yl(this.h)},iterator:function(){return new Vl(this.h)},keyValueIterator:function(){return new ql(this.h)},__class__:z},function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),Vl=((L["haxe.ds._StringMap.StringMapKeyIterator"]=Yl).__name__="haxe.ds._StringMap.StringMapKeyIterator",Yl.prototype={h:null,keys:null,length:null,current:null,hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:Yl},function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),ql=((L["haxe.ds._StringMap.StringMapValueIterator"]=Vl).__name__="haxe.ds._StringMap.StringMapValueIterator",Vl.prototype={h:null,keys:null,length:null,current:null,hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:Vl},function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),jl=((L["haxe.ds._StringMap.StringMapKeyValueIterator"]=ql).__name__="haxe.ds._StringMap.StringMapKeyValueIterator",ql.prototype={h:null,keys:null,length:null,current:null,hasNext:function(){return this.current<this.length},next:function(){var e=this.keys[this.current++];return{key:e,value:this.h[e]}},__class__:ql},{}),Ql=(jl.blit=function(e,n,t,i,l){if(e==t){if(n<i)for(var s=n+l,r=i+l,a=0,h=l;a<h;){a++;--s,e[--r]=e[s]}else if(i<n)for(s=n,r=i,a=0,h=l;a<h;){a++;e[r]=e[s],++s,++r}}else for(a=0,h=l;a<h;)t[i+(s=a++)]=e[n+s]},(L["haxe.exceptions.PosException"]=C3).__name__="haxe.exceptions.PosException",C3.__super__=Q,C3.prototype=$extend(Q.prototype,{posInfos:null,toString:function(){return Q.prototype.toString.call(this)+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber},__class__:C3}),(L["haxe.exceptions.NotImplementedException"]=D3).__name__="haxe.exceptions.NotImplementedException",D3.__super__=C3,D3.prototype=$extend(C3.prototype,{__class__:D3}),function(){this.pos=0,this.size=0}),$l=((L["haxe.io.BytesBuffer"]=Ql).__name__="haxe.io.BytesBuffer",Ql.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(e){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,e)},add:function(e){var n;this.pos+e.length>this.size&&this.grow(e.length),0!=this.size&&(n=new Uint8Array(e.b.buffer,e.b.byteOffset,e.length),this.u8.set(n,this.pos),this.pos+=e.length)},addInt32:function(e){this.pos+4>this.size&&this.grow(4),this.view.setInt32(this.pos,e,!0),this.pos+=4},addBytes:function(e,n,t){if(n<0||t<0||n+t>e.length)throw Q.thrown(es.OutsideBounds);this.pos+t>this.size&&this.grow(t),0!=this.size&&(e=new Uint8Array(e.b.buffer,e.b.byteOffset+n,t),this.u8.set(e,this.pos),this.pos+=t)},grow:function(e){for(var n=this.pos+e,t=0==this.size?16:this.size;t<n;)t=3*t>>1;var e=new ArrayBuffer(t),i=new Uint8Array(e);0<this.size&&i.set(this.u8),this.size=t,this.buffer=e,this.u8=i,this.view=new DataView(this.buffer)},getBytes:function(){var e;return 0==this.size?new kl(new ArrayBuffer(0)):((e=new kl(this.buffer)).length=this.pos,e)},__class__:Ql},(L["haxe.io.Input"]=F3).__name__="haxe.io.Input",F3.prototype={bigEndian:null,readByte:function(){throw new D3(null,null,{fileName:"haxe/io/Input.hx",lineNumber:53,className:"haxe.io.Input",methodName:"readByte"})},readBytes:function(e,n,t){var i=t,l=e.b;if(n<0||t<0||n+t>e.length)throw Q.thrown(es.OutsideBounds);try{for(;0<i;)l[n]=this.readByte(),++n,--i}catch(e){if(Al.lastError=e,!(Q.caught(e).unwrap()instanceof Jl))throw e}return t-i},close:function(){},set_bigEndian:function(e){return this.bigEndian=e},readAll:function(e){null==e&&(e=16384);var n=new kl(new ArrayBuffer(e)),t=new Ql;try{for(;;){var i=this.readBytes(n,0,e);if(0==i)throw Q.thrown(es.Blocked);t.addBytes(n,0,i)}}catch(e){if(Al.lastError=e,!(Q.caught(e).unwrap()instanceof Jl))throw e}return t.getBytes()},readFullBytes:function(e,n,t){for(;0<t;){var i=this.readBytes(e,n,t);if(0==i)throw Q.thrown(es.Blocked);n+=i,t-=i}},read:function(e){for(var n=new kl(new ArrayBuffer(e)),t=0;0<e;){var i=this.readBytes(n,t,e);if(0==i)throw Q.thrown(es.Blocked);t+=i,e-=i}return n},readUntil:function(e){for(var n,t=new Ql;(n=this.readByte())!=e;)t.addByte(n);return t.getBytes().toString()},readFloat:function(){return ns.i32ToFloat(this.readInt32())},readInt16:function(){var e=this.readByte(),n=this.readByte(),e=this.bigEndian?n|e<<8:e|n<<8;return 0!=(32768&e)?e-65536:e},readUInt16:function(){var e=this.readByte(),n=this.readByte();return this.bigEndian?n|e<<8:e|n<<8},readInt24:function(){var e=this.readByte(),n=this.readByte(),t=this.readByte(),e=this.bigEndian?t|n<<8|e<<16:e|n<<8|t<<16;return 0!=(8388608&e)?e-16777216:e},readInt32:function(){var e=this.readByte(),n=this.readByte(),t=this.readByte(),i=this.readByte();return this.bigEndian?i|t<<8|n<<16|e<<24:e|n<<8|t<<16|i<<24},readString:function(e,n){var t=new kl(new ArrayBuffer(e));return this.readFullBytes(t,0,e),t.getString(0,e,n)},__class__:F3,__properties__:{set_bigEndian:"set_bigEndian"}},function(e,n,t){if(null==n&&(n=0),null==t&&(t=e.length-n),n<0||t<0||n+t>e.length)throw Q.thrown(es.OutsideBounds);this.b=e.b,this.pos=n,this.len=t,this.totlen=t}),Zl=((L["haxe.io.BytesInput"]=$l).__name__="haxe.io.BytesInput",$l.__super__=F3,$l.prototype=$extend(F3.prototype,{b:null,pos:null,len:null,totlen:null,readByte:function(){if(0==this.len)throw Q.thrown(new Jl);return this.len--,this.b[this.pos++]},readBytes:function(e,n,t){if(n<0||t<0||n+t>e.length)throw Q.thrown(es.OutsideBounds);if(0==this.len&&0<t)throw Q.thrown(new Jl);this.len<t&&(t=this.len);for(var i=this.b,l=e.b,s=0,r=t;s<r;){var a=s++;l[n+a]=i[this.pos+a]}return this.pos+=t,this.len-=t,t},__class__:$l}),(L["haxe.io.Output"]=H3).__name__="haxe.io.Output",H3.prototype={bigEndian:null,writeByte:function(e){throw new D3(null,null,{fileName:"haxe/io/Output.hx",lineNumber:47,className:"haxe.io.Output",methodName:"writeByte"})},writeBytes:function(e,n,t){if(n<0||t<0||n+t>e.length)throw Q.thrown(es.OutsideBounds);for(var i=e.b,l=t;0<l;)this.writeByte(i[n]),++n,--l;return t},writeFullBytes:function(e,n,t){for(;0<t;){var i=this.writeBytes(e,n,t);n+=i,t-=i}},writeFloat:function(e){this.writeInt32(ns.floatToI32(e))},writeInt16:function(e){if(e<-32768||32768<=e)throw Q.thrown(es.Overflow);this.writeUInt16(65535&e)},writeUInt16:function(e){if(e<0||65536<=e)throw Q.thrown(es.Overflow);this.bigEndian?(this.writeByte(e>>8),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8))},writeInt24:function(e){if(e<-8388608||8388608<=e)throw Q.thrown(es.Overflow);this.writeUInt24(16777215&e)},writeUInt24:function(e){if(e<0||16777216<=e)throw Q.thrown(es.Overflow);this.bigEndian?(this.writeByte(e>>16),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16))},writeInt32:function(e){this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},writeString:function(e,n){e=kl.ofString(e,n);this.writeFullBytes(e,0,e.length)},__class__:H3},function(){this.b=new Ql}),Jl=((L["haxe.io.BytesOutput"]=Zl).__name__="haxe.io.BytesOutput",Zl.__super__=H3,Zl.prototype=$extend(H3.prototype,{b:null,writeByte:function(e){this.b.addByte(e)},writeBytes:function(e,n,t){return this.b.addBytes(e,n,t),t},getBytes:function(){return this.b.getBytes()},__class__:Zl}),function(){}),es=((L["haxe.io.Eof"]=Jl).__name__="haxe.io.Eof",Jl.prototype={toString:function(){return"Eof"},__class__:Jl},I["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:d},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:d},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:d},Custom:((b=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:d}})._hx_name="Custom",b.__params__=["e"],b)}),ns=(es.__constructs__=[es.Blocked,es.Overflow,es.OutsideBounds,es.Custom],function(){}),ts=((L["haxe.io.FPHelper"]=ns).__name__="haxe.io.FPHelper",ns.i32ToFloat=function(e){return ns.helper.setInt32(0,e,!0),ns.helper.getFloat32(0,!0)},ns.floatToI32=function(e){return ns.helper.setFloat32(0,e,!0),ns.helper.getInt32(0,!0)},function(e){switch(e){case".":case"..":return this.dir=e,void(this.file="")}var n=e.lastIndexOf("/"),t=e.lastIndexOf("\\"),t=(n<t?(this.dir=h.substr(e,0,t),e=h.substr(e,t+1,null),this.backslash=!0):t<n?(this.dir=h.substr(e,0,n),e=h.substr(e,n+1,null)):this.dir=null,e.lastIndexOf("."));-1!=t?(this.ext=h.substr(e,t+1,null),this.file=h.substr(e,0,t)):(this.ext=null,this.file=e)}),is=((L["haxe.io.Path"]=ts).__name__="haxe.io.Path",ts.directory=function(e){e=new ts(e);return null==e.dir?"":e.dir},ts.join=function(e){for(var n=[],t=0,i=e;t<i.length;){var l=i[t];++t,null!=l&&""!=l&&n.push(l)}if(0==(e=n).length)return"";for(var s=e[0],n=1,t=e.length;n<t;){var r=n++,s=ts.addTrailingSlash(s);s+=e[r]}return ts.normalize(s)},ts.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var n=[],t=0,i=e.split("/");t<i.length;){var l=i[t];++t,".."==l&&0<n.length&&".."!=n[n.length-1]?n.pop():""==l?(0<n.length||47==h.cca(e,0))&&n.push(l):"."!=l&&n.push(l)}for(var s="",r=!1,a=!1,u=0,c=n.join("/");u<c.length;){var o=c,_=u++,d=o.charCodeAt(_),b=(d=55296<=d&&d<=56319?d-55232<<10|1023&o.charCodeAt(1+_):d,65536<=d&&++u,d);switch(b){case 47:r?(r=!1,a&&(s+="/",a=!1),s+=String.fromCodePoint(b)):a=!0;break;case 58:s+=":",r=!0;break;default:r=!1,a&&(s+="/",a=!1),s+=String.fromCodePoint(b)}}return s},ts.addTrailingSlash=function(e){var n,t;return 0==e.length?"/":(n=e.lastIndexOf("/"))<(t=e.lastIndexOf("\\"))?t!=e.length-1?e+"\\":e:n!=e.length-1?e+"/":e},ts.prototype={dir:null,file:null,ext:null,backslash:null,__class__:ts},function(e){$l.call(this,kl.ofString(e))}),ls=((L["haxe.io.StringInput"]=is).__name__="haxe.io.StringInput",is.__super__=$l,is.prototype=$extend($l.prototype,{__class__:is}),function(e){this.current=0,this.array=e}),ss=((L["haxe.iterators.ArrayIterator"]=ls).__name__="haxe.iterators.ArrayIterator",ls.prototype={array:null,current:null,hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:ls},function(e){this.map=e,this.keys=e.keys()}),rs=((L["haxe.iterators.MapKeyValueIterator"]=ss).__name__="haxe.iterators.MapKeyValueIterator",ss.prototype={map:null,keys:null,hasNext:function(){return this.keys.hasNext()},next:function(){var e=this.keys.next();return{value:this.map.get(e),key:e}},__class__:ss},I["haxe.rtti.CType"]={__ename__:"haxe.rtti.CType",__constructs__:null,CUnknown:{_hx_name:"CUnknown",_hx_index:0,__enum__:"haxe.rtti.CType",toString:d},CEnum:((b=function(e,n){return{_hx_index:1,name:e,params:n,__enum__:"haxe.rtti.CType",toString:d}})._hx_name="CEnum",b.__params__=["name","params"],b),CClass:((b=function(e,n){return{_hx_index:2,name:e,params:n,__enum__:"haxe.rtti.CType",toString:d}})._hx_name="CClass",b.__params__=["name","params"],b),CTypedef:((b=function(e,n){return{_hx_index:3,name:e,params:n,__enum__:"haxe.rtti.CType",toString:d}})._hx_name="CTypedef",b.__params__=["name","params"],b),CFunction:((b=function(e,n){return{_hx_index:4,args:e,ret:n,__enum__:"haxe.rtti.CType",toString:d}})._hx_name="CFunction",b.__params__=["args","ret"],b),CAnonymous:((b=function(e){return{_hx_index:5,fields:e,__enum__:"haxe.rtti.CType",toString:d}})._hx_name="CAnonymous",b.__params__=["fields"],b),CDynamic:((b=function(e){return{_hx_index:6,t:e,__enum__:"haxe.rtti.CType",toString:d}})._hx_name="CDynamic",b.__params__=["t"],b),CAbstract:((b=function(e,n){return{_hx_index:7,name:e,params:n,__enum__:"haxe.rtti.CType",toString:d}})._hx_name="CAbstract",b.__params__=["name","params"],b)}),as=(rs.__constructs__=[rs.CUnknown,rs.CEnum,rs.CClass,rs.CTypedef,rs.CFunction,rs.CAnonymous,rs.CDynamic,rs.CAbstract],I["haxe.rtti.Rights"]={__ename__:"haxe.rtti.Rights",__constructs__:null,RNormal:{_hx_name:"RNormal",_hx_index:0,__enum__:"haxe.rtti.Rights",toString:d},RNo:{_hx_name:"RNo",_hx_index:1,__enum__:"haxe.rtti.Rights",toString:d},RCall:((b=function(e){return{_hx_index:2,m:e,__enum__:"haxe.rtti.Rights",toString:d}})._hx_name="RCall",b.__params__=["m"],b),RMethod:{_hx_name:"RMethod",_hx_index:3,__enum__:"haxe.rtti.Rights",toString:d},RDynamic:{_hx_name:"RDynamic",_hx_index:4,__enum__:"haxe.rtti.Rights",toString:d},RInline:{_hx_name:"RInline",_hx_index:5,__enum__:"haxe.rtti.Rights",toString:d}}),hs=(as.__constructs__=[as.RNormal,as.RNo,as.RCall,as.RMethod,as.RDynamic,as.RInline],I["haxe.rtti.TypeTree"]={__ename__:"haxe.rtti.TypeTree",__constructs__:null,TPackage:((b=function(e,n,t){return{_hx_index:0,name:e,full:n,subs:t,__enum__:"haxe.rtti.TypeTree",toString:d}})._hx_name="TPackage",b.__params__=["name","full","subs"],b),TClassdecl:((b=function(e){return{_hx_index:1,c:e,__enum__:"haxe.rtti.TypeTree",toString:d}})._hx_name="TClassdecl",b.__params__=["c"],b),TEnumdecl:((b=function(e){return{_hx_index:2,e:e,__enum__:"haxe.rtti.TypeTree",toString:d}})._hx_name="TEnumdecl",b.__params__=["e"],b),TTypedecl:((b=function(e){return{_hx_index:3,t:e,__enum__:"haxe.rtti.TypeTree",toString:d}})._hx_name="TTypedecl",b.__params__=["t"],b),TAbstractdecl:((b=function(e){return{_hx_index:4,a:e,__enum__:"haxe.rtti.TypeTree",toString:d}})._hx_name="TAbstractdecl",b.__params__=["a"],b)}),us=(hs.__constructs__=[hs.TPackage,hs.TClassdecl,hs.TEnumdecl,hs.TTypedecl,hs.TAbstractdecl],function(){}),cs=((L["haxe.rtti.Meta"]=us).__name__="haxe.rtti.Meta",us.getMeta=function(e){return e.__meta__},us.getFields=function(e){e=us.getMeta(e);return null==e||null==e.fields?{}:e.fields},function(){}),os=((L["haxe.rtti.Rtti"]=cs).__name__="haxe.rtti.Rtti",cs.getRtti=function(e){var n=N.field(e,"__rtti");if(null==n)throw Q.thrown("Class "+e.__name__+" has no RTTI information, consider adding @:rtti");n=F.parse(n).firstElement(),n=(new os).processElement(n);if(1==n._hx_index)return e=n.c;throw Q.thrown("Enum mismatch: expected TClassDecl but found "+V.string(n))},function(){this.root=[]}),_s=((L["haxe.rtti.XmlParser"]=os).__name__="haxe.rtti.XmlParser",os.prototype={root:null,curplatform:null,mkPath:function(e){return e},mkTypeParams:function(e){e=e.split(":");return""==e[0]?[]:e},mkRights:function(e){switch(e){case"dynamic":return as.RDynamic;case"inline":return as.RInline;case"method":return as.RMethod;case"null":return as.RNo;default:return as.RCall(e)}},xerror:function(e){var n;if(e.nodeType==F.Document)n="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));n=e.nodeName}throw Q.thrown("Invalid "+n)},processElement:function(e){if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==e.nodeType?"null":le.toString(e.nodeType)));var n,t=e;if(t.nodeType==F.Document)n="Document";else{if(t.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":le.toString(t.nodeType)));n=t.nodeName}switch(n){case"abstract":return hs.TAbstractdecl(this.xabstract(t));case"class":return hs.TClassdecl(this.xclass(t));case"enum":return hs.TEnumdecl(this.xenum(t));case"typedef":return hs.TTypedecl(this.xtypedef(t));default:return this.xerror(t)}},xmeta:function(e){for(var n=[],t=0,i=bs.resolve(e,"m");t<i.length;){for(var l=i[t],s=(++t,[]),r=0,a=bs.resolve(l,"e");r<a.length;){var h=a[r];++r,s.push(gs.get_innerHTML(h))}n.push({name:$.resolve(l,"n"),params:s})}return n},xoverloads:function(e){for(var n=[],t=e.elements();t.hasNext();){var i=t.next();n.push(this.xclassfield(i))}return n},xpath:function(e){for(var n=this.mkPath($.resolve(e,"path")),t=[],i=e.elements();i.hasNext();){var l=i.next();t.push(this.xtype(l))}return{path:n,params:t}},xclass:function(e){for(var n=null,t=null,i=null,l=[],s=[],r=[],a=[],h=e.exists("interface"),u=e.elements();u.hasNext();){var c,o=u.next();if(o.nodeType==F.Document)c="Document";else{if(o.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==o.nodeType?"null":le.toString(o.nodeType)));c=o.nodeName}switch(c){case"extends":h?l.push(this.xpath(o)):n=this.xpath(o);break;case"haxe_doc":t=gs.get_innerData(o);break;case"haxe_dynamic":var _=o.firstElement();if(_.nodeType!=F.Document&&_.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==_.nodeType?"null":le.toString(_.nodeType)));i=this.xtype(_);break;case"implements":l.push(this.xpath(o));break;case"meta":a=this.xmeta(o);break;default:(o.exists("static")?r:s).push(this.xclassfield(o))}}return{file:ee.resolve(e,"file")?$.resolve(e,"file"):null,path:this.mkPath($.resolve(e,"path")),module:ee.resolve(e,"module")?this.mkPath($.resolve(e,"module")):null,doc:t,isPrivate:e.exists("private"),isExtern:e.exists("extern"),isFinal:e.exists("final"),isInterface:h,params:this.mkTypeParams($.resolve(e,"params")),superClass:n,interfaces:l,fields:s,statics:r,tdynamic:i,platforms:this.defplat(),meta:a}},xclassfield:function(e,n){null==n&&(n=!1);for(var t,i=e.elements(),l=this.xtype(i.next()),s=null,r=[],a=null,h=i;h.hasNext();){var u,c=h.next();if(c.nodeType==F.Document)u="Document";else{if(c.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==c.nodeType?"null":le.toString(c.nodeType)));u=c.nodeName}switch(u){case"haxe_doc":s=gs.get_innerData(c);break;case"meta":r=this.xmeta(c);break;case"overloads":a=this.xoverloads(c);break;default:this.xerror(c)}}if(e.nodeType==F.Document)t="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));t=e.nodeName}return{name:t,type:l,isPublic:e.exists("public")||n,isFinal:e.exists("final"),isOverride:e.exists("override"),line:ee.resolve(e,"line")?V.parseInt($.resolve(e,"line")):null,doc:s,get:ee.resolve(e,"get")?this.mkRights($.resolve(e,"get")):as.RNormal,set:ee.resolve(e,"set")?this.mkRights($.resolve(e,"set")):as.RNormal,params:ee.resolve(e,"params")?this.mkTypeParams($.resolve(e,"params")):[],platforms:this.defplat(),meta:r,overloads:a,expr:ee.resolve(e,"expr")?$.resolve(e,"expr"):null}},xenum:function(e){for(var n=[],t=null,i=[],l=e.elements();l.hasNext();){var s,r,a=l.next();if(a.nodeType==F.Document)s="Document";else{if(a.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":le.toString(a.nodeType)));s=a.nodeName}if("haxe_doc"==s)t=gs.get_innerData(a);else{if(a.nodeType==F.Document)r="Document";else{if(a.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":le.toString(a.nodeType)));r=a.nodeName}"meta"==r?i=this.xmeta(a):n.push(this.xenumfield(a))}}return{file:ee.resolve(e,"file")?$.resolve(e,"file"):null,path:this.mkPath($.resolve(e,"path")),module:ee.resolve(e,"module")?this.mkPath($.resolve(e,"module")):null,doc:t,isPrivate:e.exists("private"),isExtern:e.exists("extern"),params:this.mkTypeParams($.resolve(e,"params")),constructors:n,platforms:this.defplat(),meta:i}},xenumfield:function(e){var n,t,i=null,l=e.elementsNamed("haxe_doc"),l=l.hasNext()?l.next():null,s=ds.resolve(e,"meta")?this.xmeta(_s.resolve(e,"meta")):[];if(ee.resolve(e,"a"))for(var r=$.resolve(e,"a").split(":"),a=e.elements(),i=[],u=0;u<r.length;){var c=r[u],o=(++u,!1);"?"==c.charAt(0)&&(o=!0,c=h.substr(c,1,null)),i.push({name:c,opt:o,t:this.xtype(a.next())})}if(e.nodeType==F.Document)n="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));n=e.nodeName}if(null==l)t=null;else{if(l.nodeType!=F.Document&&l.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==l.nodeType?"null":le.toString(l.nodeType)));t=gs.get_innerData(l)}return{name:n,args:i,doc:t,meta:s,platforms:this.defplat()}},xabstract:function(e){for(var n=null,t=null,i=null,l=[],s=[],r=[],a=e.elements();a.hasNext();){var h,u=a.next();if(u.nodeType==F.Document)h="Document";else{if(u.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==u.nodeType?"null":le.toString(u.nodeType)));h=u.nodeName}switch(h){case"from":for(var c=u.elements();c.hasNext();){var o=c.next(),_=o.firstElement();if(_.nodeType!=F.Document&&_.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==_.nodeType?"null":le.toString(_.nodeType)));r.push({t:this.xtype(_),field:ee.resolve(o,"field")?$.resolve(o,"field"):null})}break;case"haxe_doc":n=gs.get_innerData(u);break;case"impl":t=this.xclass(_s.resolve(u,"class"));break;case"meta":l=this.xmeta(u);break;case"this":var d=u.firstElement();if(d.nodeType!=F.Document&&d.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==d.nodeType?"null":le.toString(d.nodeType)));i=this.xtype(d);break;case"to":for(var b=u.elements();b.hasNext();){var g=b.next(),O=g.firstElement();if(O.nodeType!=F.Document&&O.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==O.nodeType?"null":le.toString(O.nodeType)));s.push({t:this.xtype(O),field:ee.resolve(g,"field")?$.resolve(g,"field"):null})}break;default:this.xerror(u)}}return{file:ee.resolve(e,"file")?$.resolve(e,"file"):null,path:this.mkPath($.resolve(e,"path")),module:ee.resolve(e,"module")?this.mkPath($.resolve(e,"module")):null,doc:n,isPrivate:e.exists("private"),params:this.mkTypeParams($.resolve(e,"params")),platforms:this.defplat(),meta:l,athis:i,to:s,from:r,impl:t}},xtypedef:function(e){for(var n=null,t=null,i=[],l=e.elements();l.hasNext();){var s,r,a=l.next();if(a.nodeType==F.Document)s="Document";else{if(a.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":le.toString(a.nodeType)));s=a.nodeName}if("haxe_doc"==s)n=gs.get_innerData(a);else{if(a.nodeType==F.Document)r="Document";else{if(a.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":le.toString(a.nodeType)));r=a.nodeName}"meta"==r?i=this.xmeta(a):t=this.xtype(a)}}var h=new z;return null!=this.curplatform&&(h.h[this.curplatform]=t),{file:ee.resolve(e,"file")?$.resolve(e,"file"):null,path:this.mkPath($.resolve(e,"path")),module:ee.resolve(e,"module")?this.mkPath($.resolve(e,"module")):null,doc:n,isPrivate:e.exists("private"),params:this.mkTypeParams($.resolve(e,"params")),type:t,types:h,platforms:this.defplat(),meta:i}},xtype:function(e){var n;if(e.nodeType==F.Document)n="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));n=e.nodeName}switch(n){case"a":for(var t=[],i=e.elements();i.hasNext();){var l=i.next(),l=this.xclassfield(l,!0);l.platforms=[],t.push(l)}return rs.CAnonymous(t);case"c":return rs.CClass(this.mkPath($.resolve(e,"path")),this.xtypeparams(e));case"d":var s=null,r=e.firstElement();if(null!=r){if(r.nodeType!=F.Document&&r.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==r.nodeType?"null":le.toString(r.nodeType)));s=this.xtype(r)}return rs.CDynamic(s);case"e":return rs.CEnum(this.mkPath($.resolve(e,"path")),this.xtypeparams(e));case"f":for(var a=[],u=0,c=$.resolve(e,"a").split(":"),o=ee.resolve(e,"v")?new ls($.resolve(e,"v").split(":")):null,_=e.elements();_.hasNext();){var d=_.next(),b=!1,g=u<c.length?c[u++]:null,O=("?"==(g=null==g?"":g).charAt(0)&&(b=!0,g=h.substr(g,1,null)),null==o||o.current>=o.array.length?null:o.array[o.current++]);a.push({name:g,opt:b,t:this.xtype(d),value:""==O?null:O})}r=a[a.length-1];return h.remove(a,r),rs.CFunction(a,r.t);case"t":return rs.CTypedef(this.mkPath($.resolve(e,"path")),this.xtypeparams(e));case"unknown":return rs.CUnknown;case"x":return rs.CAbstract(this.mkPath($.resolve(e,"path")),this.xtypeparams(e));default:return this.xerror(e)}},xtypeparams:function(e){for(var n=[],t=e.elements();t.hasNext();){var i=t.next();n.push(this.xtype(i))}return n},defplat:function(){var e=[];return null!=this.curplatform&&e.push(this.curplatform),e},__class__:os},{}),$=(_s.resolve=function(e,n){var t,i=e.elementsNamed(n).next();if(null==i){if(e.nodeType==F.Document)t="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));t=e.nodeName}throw Q.thrown(t+" is missing element "+n)}if(i.nodeType!=F.Document&&i.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==i.nodeType?"null":le.toString(i.nodeType)));return i},{}),ee=($.resolve=function(e,n){if(e.nodeType==F.Document)throw Q.thrown("Cannot access document attribute "+n);var t=e.get(n);if(null!=t)return t;if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));throw Q.thrown(e.nodeName+" is missing attribute "+n)},{}),ds=(ee.resolve=function(e,n){if(e.nodeType==F.Document)throw Q.thrown("Cannot access document attribute "+n);return e.exists(n)},{}),bs=(ds.resolve=function(e,n){return e.elementsNamed(n).hasNext()},{}),gs=(bs.resolve=function(e,n){for(var t=[],i=e.elementsNamed(n);i.hasNext();){var l=i.next();if(l.nodeType!=F.Document&&l.nodeType!=F.Element)throw Q.thrown("Invalid nodeType "+(null==l.nodeType?"null":le.toString(l.nodeType)));t.push(l)}return t},{}),Os=(gs.__properties__={get_innerHTML:"get_innerHTML",get_innerData:"get_innerData"},gs.get_innerData=function(e){if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));var n=0,t=e.children;if(t.length<=0){if(e.nodeType==F.Document)s="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));s=e.nodeName}throw Q.thrown(s+" does not have data")}var i=t[n++];if(1<t.length){var l=t[n++];if(i.nodeType==F.PCData&&l.nodeType==F.CData){if(i.nodeType==F.Document||i.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":le.toString(i.nodeType)));s=""==B.trim(i.nodeValue)}else s=!1;if(s){if(t.length<=2){if(l.nodeType==F.Document||l.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==l.nodeType?"null":le.toString(l.nodeType)));return l.nodeValue}var s,n=t[+n];if(n.nodeType==F.PCData){if(n.nodeType==F.Document||n.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":le.toString(n.nodeType)));s=""==B.trim(n.nodeValue)}else s=!1;if(s&&t.length<=3){if(l.nodeType==F.Document||l.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==l.nodeType?"null":le.toString(l.nodeType)));return l.nodeValue}}if(e.nodeType==F.Document)s="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));s=e.nodeName}throw Q.thrown(s+" does not only have data")}if(i.nodeType!=F.PCData&&i.nodeType!=F.CData){if(e.nodeType==F.Document)s="Document";else{if(e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));s=e.nodeName}throw Q.thrown(s+" does not have data")}if(i.nodeType==F.Document||i.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":le.toString(i.nodeType)));return i.nodeValue},gs.get_innerHTML=function(e){var n="";if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));for(var t=0,i=e.children;t<i.length;){var l=i[t++];n+=V.string(fs.print(l))}return n},(L["haxe.xml.XmlParserException"]=ae).__name__="haxe.xml.XmlParserException",ae.prototype={message:null,lineNumber:null,positionAtLine:null,position:null,xml:null,toString:function(){return ys.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:ae},function(){}),fs=((L["haxe.xml.Parser"]=Os).__name__="haxe.xml.Parser",Os.parse=function(e,n){null==n&&(n=!1);var t=F.createDocument();return Os.doParse(e,n,0,t),t},Os.doParse=function(e,n,t,i){null==t&&(t=0);for(var l=null,s=1,r=1,a=null,u=0,c=0,o=0,_=new A,d=1,b=-1;t<e.length;){var g,O,f,p,m=e.charCodeAt(t);switch(s){case 0:switch(m){case 9:case 10:case 13:case 32:break;default:s=r;continue}break;case 1:if(60!=m){u=t,s=13;continue}s=0,r=2;break;case 2:switch(m){case 33:if(91==e.charCodeAt(t+1)){if("CDATA["!=h.substr(e,t+=2,6).toUpperCase())throw Q.thrown(new ae("Expected <![CDATA[",e,t));s=17,u=(t+=5)+1}else if(68==e.charCodeAt(t+1)||100==e.charCodeAt(t+1)){if("OCTYPE"!=h.substr(e,t+2,6).toUpperCase())throw Q.thrown(new ae("Expected <!DOCTYPE",e,t));s=16,u=(t+=8)+1}else{if(45!=e.charCodeAt(t+1)||45!=e.charCodeAt(t+2))throw Q.thrown(new ae("Expected \x3c!--",e,t));s=15,u=(t+=2)+1}break;case 47:if(null==i)throw Q.thrown(new ae("Expected node name",e,t));u=t+1,s=0,r=10;break;case 63:s=14,u=t;break;default:s=3,u=t;continue}break;case 3:if(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)break;if(t==u)throw Q.thrown(new ae("Expected node name",e,t));l=F.createElement(h.substr(e,u,t-u)),i.addChild(l),++c,s=0,r=4;continue;case 4:switch(m){case 47:s=11;break;case 62:s=9;break;default:s=5,u=t;continue}break;case 5:if(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)break;if(u==t)throw Q.thrown(new ae("Expected attribute name",e,t));a=h.substr(e,u,t-u);if(l.exists(a))throw Q.thrown(new ae("Duplicate attribute ["+a+"]",e,t));s=0,r=6;continue;case 6:if(61!=m)throw Q.thrown(new ae("Expected =",e,t));s=0,r=7;break;case 7:switch(m){case 34:case 39:_=new A,s=8,u=t+1,b=m;break;default:throw Q.thrown(new ae('Expected "',e,t))}break;case 8:switch(m){case 38:var w=t-u;_.b+=h.substr(e,u,null==w?null:w),s=18,d=8,u=t+1;break;case 60:case 62:if(n)throw Q.thrown(new ae("Invalid unescaped "+String.fromCodePoint(m)+" in attribute value",e,t));m==b&&(_.b+=h.substr(e,u,null==(g=t-u)?null:g),g=_.b,_=new A,l.set(a,g),s=0,r=4);break;default:m==b&&(_.b+=h.substr(e,u,null==(g=t-u)?null:g),O=_.b,_=new A,l.set(a,O),s=0,r=4)}break;case 9:u=t=Os.doParse(e,n,t,l),s=1;break;case 10:if(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)break;if(u==t)throw Q.thrown(new ae("Expected node name",e,t));var v=h.substr(e,u,t-u);if(null==i||0!=i.nodeType)throw Q.thrown(new ae("Unexpected </"+v+">, tag is not open",e,t));if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));if(v!=i.nodeName){if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));throw Q.thrown(new ae("Expected </"+i.nodeName+">",e,t))}s=0,r=12;continue;case 11:if(62!=m)throw Q.thrown(new ae("Expected >",e,t));s=1;break;case 12:if(62==m)return 0==c&&i.addChild(F.createPCData("")),t;throw Q.thrown(new ae("Expected >",e,t));case 13:60==m?(_.b+=h.substr(e,u,null==(v=t-u)?null:v),f=F.createPCData(_.b),_=new A,i.addChild(f),++c,s=0,r=2):38==m&&(_.b+=h.substr(e,u,null==(f=t-u)?null:f),s=18,d=13,u=t+1);break;case 14:63==m&&62==e.charCodeAt(t+1)&&(p=h.substr(e,u+1,++t-u-2),i.addChild(F.createProcessingInstruction(p)),++c,s=1);break;case 15:45==m&&45==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)&&(i.addChild(F.createComment(h.substr(e,u,t-u))),++c,t+=2,s=1);break;case 16:91==m?++o:93==m?--o:62==m&&0==o&&(i.addChild(F.createDocType(h.substr(e,u,t-u))),++c,s=1);break;case 17:93==m&&93==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)&&(p=F.createCData(h.substr(e,u,t-u)),i.addChild(p),++c,t+=2,s=1);break;case 18:if(59==m){var y=h.substr(e,u,t-u);if(35==y.charCodeAt(0)){var C=120==y.charCodeAt(1)?V.parseInt("0"+h.substr(y,1,y.length-1)):V.parseInt(h.substr(y,1,y.length-1));_.b+=String.fromCodePoint(C)}else if(Object.prototype.hasOwnProperty.call(Os.escapes.h,y))_.b+=V.string(Os.escapes.h[y]);else{if(n)throw Q.thrown(new ae("Undefined entity: "+y,e,t));_.b+=V.string("&"+y+";")}u=t+1,s=d}else if(!(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)&&35!=m){if(n)throw Q.thrown(new ae("Invalid character in entity: "+String.fromCodePoint(m),e,t));_.b+=String.fromCodePoint(38);C=t-u;_.b+=h.substr(e,u,null==C?null:C),u=--t+1,s=d}}++t}if(1==s&&(u=t,s=13),13==s){if(0==i.nodeType){if(i.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":le.toString(i.nodeType)));throw Q.thrown(new ae("Unclosed node <"+i.nodeName+">",e,t))}t==u&&0!=c||(_.b+=h.substr(e,u,null==(w=t-u)?null:w),i.addChild(F.createPCData(_.b)),++c)}else{if(n||18!=s||13!=d)throw Q.thrown(new ae("Unexpected end",e,t));_.b+=String.fromCodePoint(38),_.b+=h.substr(e,u,null==(w=t-u)?null:w),i.addChild(F.createPCData(_.b)),++c}return t},function(e){this.output=new A,this.pretty=e}),ps=((L["haxe.xml.Printer"]=fs).__name__="haxe.xml.Printer",fs.print=function(e,n){n=new fs(n=null==n?!1:n);return n.writeNode(e,""),n.output.b},fs.prototype={output:null,pretty:null,writeNode:function(e,n){switch(e.nodeType){case 0:if(this.output.b+=V.string(n+"<"),e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));this.output.b+=V.string(e.nodeName);for(var t=e.attributes();t.hasNext();){var i=t.next(),l=(this.output.b+=V.string(" "+i+'="'),B.htmlEscape(e.get(i),!0));this.output.b+=V.string(l),this.output.b+='"'}if(this.hasChildren(e)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));for(var s=0,r=e.children;s<r.length;){var a=r[s++];this.writeNode(a,this.pretty?n+"\t":n)}if(this.output.b+=V.string(n+"</"),e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));this.output.b+=V.string(e.nodeName),this.output.b+=">"}else this.output.b+="/>";this.pretty&&(this.output.b+="\n");break;case 1:if(e.nodeType==F.Document||e.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":le.toString(e.nodeType)));var h=e.nodeValue;0!=h.length&&(l=n+B.htmlEscape(h),this.output.b+=V.string(l),this.pretty)&&(this.output.b+="\n");break;case 2:if(this.output.b+=V.string(n+"<![CDATA["),e.nodeType==F.Document||e.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":le.toString(e.nodeType)));this.output.b+=V.string(e.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(e.nodeType==F.Document||e.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":le.toString(e.nodeType)));var h=e.nodeValue,u=new RegExp("[\n\r\t]+","g".split("u").join("")),l=(h="\x3c!--"+(h=h.replace(u,""))+"--\x3e",this.output.b+=null==n?"null":""+n,B.trim(h));this.output.b+=V.string(l),this.pretty&&(this.output.b+="\n");break;case 4:if(e.nodeType==F.Document||e.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":le.toString(e.nodeType)));this.output.b+=V.string("<!DOCTYPE "+e.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(e.nodeType==F.Document||e.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":le.toString(e.nodeType)));this.output.b+=V.string("<?"+e.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));for(s=0,r=e.children;s<r.length;){a=r[s++];this.writeNode(a,n)}}},hasChildren:function(e){if(e.nodeType!=F.Document&&e.nodeType!=F.Element)throw Q.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":le.toString(e.nodeType)));for(var n=0,t=e.children;n<t.length;){var i=t[n++];switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==F.Document||i.nodeType==F.Element)throw Q.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":le.toString(i.nodeType)));if(0!=B.ltrim(i.nodeValue).length)return!0}}return!1},__class__:fs},function(){}),ms=((L["haxe.zip.Compress"]=ps).__name__="haxe.zip.Compress",ps.run=function(e,n){throw new D3("Not implemented for this platform",null,{fileName:"haxe/zip/Compress.hx",lineNumber:39,className:"haxe.zip.Compress",methodName:"run"})},I["haxe.zip.Huffman"]={__ename__:"haxe.zip.Huffman",__constructs__:null,Found:((b=function(e){return{_hx_index:0,i:e,__enum__:"haxe.zip.Huffman",toString:d}})._hx_name="Found",b.__params__=["i"],b),NeedBit:((b=function(e,n){return{_hx_index:1,left:e,right:n,__enum__:"haxe.zip.Huffman",toString:d}})._hx_name="NeedBit",b.__params__=["left","right"],b),NeedBits:((b=function(e,n){return{_hx_index:2,n:e,table:n,__enum__:"haxe.zip.Huffman",toString:d}})._hx_name="NeedBits",b.__params__=["n","table"],b)}),ws=(ms.__constructs__=[ms.Found,ms.NeedBit,ms.NeedBits],(L["haxe.zip.HuffTools"]=fe).__name__="haxe.zip.HuffTools",fe.prototype={treeDepth:function(e){switch(e._hx_index){case 0:e.i;return 0;case 1:var n=e.left,t=e.right,n=this.treeDepth(n),t=this.treeDepth(t);return 1+(n<t?n:t);case 2:e.n,e.table;throw Q.thrown("assert")}},treeCompress:function(e){var n,t,i=this.treeDepth(e);if(0==i)return e;if(1==i){if(1==e._hx_index)return n=e.left,t=e.right,ms.NeedBit(this.treeCompress(n),this.treeCompress(t));throw Q.thrown("assert")}for(var l=[],s=0,r=1<<i;s<r;){s++;l.push(ms.Found(-1))}return this.treeWalk(l,0,0,i,e),ms.NeedBits(i,l)},treeWalk:function(e,n,t,i,l){var s,r;1==l._hx_index&&(s=l.left,r=l.right,0<i)?(this.treeWalk(e,n,t+1,i-1,s),this.treeWalk(e,n|1<<t,t+1,i-1,r)):e[n]=this.treeCompress(l)},treeMake:function(e,n,t,i){if(n<i)throw Q.thrown("Invalid huffman");var l=t<<5|i;return e.h.hasOwnProperty(l)?ms.Found(e.h[l]):ms.NeedBit(this.treeMake(e,n,t<<=1,++i),this.treeMake(e,n,1|t,i))},make:function(e,n,t,i){if(1==t)return ms.NeedBit(ms.Found(0),ms.Found(0));var l=[],s=[];if(32<i)throw Q.thrown("Invalid huffman");for(var r=0,a=i;r<a;){var h=r++;l.push(0),s.push(0)}for(r=0,a=t;r<a;){var u=e[(h=r++)+n];if(i<=u)throw Q.thrown("Invalid huffman");l[u]++}for(var c=0,r=1,a=i-1;r<a;){c=c+l[h=r++]<<1;s[h]=c}for(var o=new Hl,r=0,a=t;r<a;){var _,d=e[(h=r++)+n];0!=d&&(s[d-1]=(_=s[d-1])+1,o.h[_<<5|d]=h)}return this.treeCompress(ms.NeedBit(this.treeMake(o,i,0,1),this.treeMake(o,i,1,1)))},__class__:fe},(L["haxe.zip._InflateImpl.Window"]=ge).__name__="haxe.zip._InflateImpl.Window",ge.prototype={buffer:null,pos:null,crc:null,slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var e=new kl(new ArrayBuffer(65536));this.pos-=32768,e.blit(0,this.buffer,32768,this.pos),this.buffer=e},addBytes:function(e,n,t){65536<this.pos+t&&this.slide(),this.buffer.blit(this.pos,e,n,t),this.pos+=t},addByte:function(e){65536==this.pos&&this.slide(),this.buffer.b[this.pos]=e,this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){return null!=this.crc&&this.crc.update(this.buffer,0,this.pos),this.crc},__class__:ge},I["haxe.zip._InflateImpl.State"]={__ename__:"haxe.zip._InflateImpl.State",__constructs__:null,Head:{_hx_name:"Head",_hx_index:0,__enum__:"haxe.zip._InflateImpl.State",toString:d},Block:{_hx_name:"Block",_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:d},CData:{_hx_name:"CData",_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:d},Flat:{_hx_name:"Flat",_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:d},Crc:{_hx_name:"Crc",_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:d},Dist:{_hx_name:"Dist",_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:d},DistOne:{_hx_name:"DistOne",_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",toString:d},Done:{_hx_name:"Done",_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",toString:d}}),vs=(ws.__constructs__=[ws.Head,ws.Block,ws.CData,ws.Flat,ws.Crc,ws.Dist,ws.DistOne,ws.Done],function(e,n,t){null==t&&(t=!0),null==n&&(n=!0),this.isFinal=!1,this.htools=new fe,this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.len=0,this.dist=0,this.state=n?ws.Head:ws.Block,this.input=e,this.bits=0,this.nbits=0,this.needed=0,this.output=null,this.outpos=0,this.lengths=[],this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.window=new ge(t)}),S=((L["haxe.zip.InflateImpl"]=vs).__name__="haxe.zip.InflateImpl",vs.run=function(e,n){null==n&&(n=65536);for(var t=new kl(new ArrayBuffer(n)),i=new Ql,l=new vs(e);;){var s=l.readBytes(t,0,n);if(i.addBytes(t,0,s),s<n)break}return i.getBytes()},vs.prototype={nbits:null,bits:null,state:null,isFinal:null,huffman:null,huffdist:null,htools:null,len:null,dist:null,needed:null,output:null,outpos:null,input:null,lengths:null,window:null,buildFixedHuffman:function(){if(null==vs.FIXED_HUFFMAN){for(var e=[],n=0;n<288;){var t=n++;e.push(t<=143?8:t<=255?9:t<=279?7:8)}vs.FIXED_HUFFMAN=this.htools.make(e,0,288,10)}return vs.FIXED_HUFFMAN},readBytes:function(e,n,t){if(this.needed=t,this.outpos=n,this.output=e,0<t)for(;this.inflateLoop(););return t-this.needed},getBits:function(e){for(;this.nbits<e;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var n=this.bits&(1<<e)-1;return this.nbits-=e,this.bits>>=e,n},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var e=1==(1&this.bits);return this.nbits--,this.bits>>=1,e},getRevBits:function(e){return 0==e?0:this.getBit()?1<<e-1|this.getRevBits(e-1):this.getRevBits(e-1)},resetBits:function(){this.bits=0,this.nbits=0},addBytes:function(e,n,t){this.window.addBytes(e,n,t),this.output.blit(this.outpos,e,n,t),this.needed-=t,this.outpos+=t},addByte:function(e){this.window.addByte(e),this.output.b[this.outpos]=e,this.needed--,this.outpos++},addDistOne:function(e){for(var n=this.window.getLastChar(),t=0,i=e;t<i;){t++;this.addByte(n)}},addDist:function(e,n){this.addBytes(this.window.buffer,this.window.pos-e,n)},applyHuffman:function(e){switch(e._hx_index){case 0:return i=e.i;case 1:var n=e.left,t=e.right;return this.applyHuffman(this.getBit()?t:n);case 2:var i=e.n,t=e.table;return this.applyHuffman(t[this.getBits(i)])}},inflateLengths:function(e,n){for(var t=0,i=0;t<n;){var l=this.applyHuffman(this.huffman);switch(l){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:e[t]=i=l,++t;break;case 16:var s=t+3+this.getBits(2);if(n<s)throw Q.thrown("Invalid data");for(;t<s;)e[t]=i,++t;break;case 17:if(n<(t+=3+this.getBits(3)))throw Q.thrown("Invalid data");break;case 18:if(n<(t+=11+this.getBits(7)))throw Q.thrown("Invalid data");break;default:throw Q.thrown("Invalid data")}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var e=this.input.readByte();if(8!=(15&e))throw Q.thrown("Invalid data");var n=this.input.readByte(),t=0!=(32&n);if(((e<<8)+n)%31!=0)throw Q.thrown("Invalid data");if(t)throw Q.thrown("Unsupported dictionary");return this.state=ws.Block,!0;case 1:switch(this.isFinal=this.getBit(),this.getBits(2)){case 0:if(this.len=this.input.readUInt16(),this.input.readUInt16()!=65535-this.len)throw Q.thrown("Invalid data");this.state=ws.Flat;var i=this.inflateLoop();return this.resetBits(),i;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=ws.CData,!0;case 2:for(var i=this.getBits(5)+257,l=this.getBits(5)+1,s=this.getBits(4)+4,r=0,a=s;r<a;){var h=r++;this.lengths[vs.CODE_LENGTHS_POS[h]]=this.getBits(3)}for(r=s,a=19;r<a;){h=r++;this.lengths[vs.CODE_LENGTHS_POS[h]]=0}this.huffman=this.htools.make(this.lengths,0,19,8);for(var u=[],r=0,a=i+l;r<a;){h=r++;u.push(0)}return this.inflateLengths(u,i+l),this.huffdist=this.htools.make(u,i,l,16),this.huffman=this.htools.make(u,0,i,16),this.state=ws.CData,!0;default:throw Q.thrown("Invalid data")}break;case 2:e=this.applyHuffman(this.huffman);if(e<256)return this.addByte(e),0<this.needed;if(256==e)this.state=this.isFinal?ws.Crc:ws.Block;else{n=vs.LEN_EXTRA_BITS_TBL[e-=257];if(-1==n)throw Q.thrown("Invalid data");this.len=vs.LEN_BASE_VAL_TBL[e]+this.getBits(n);t=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);if(-1==(n=vs.DIST_EXTRA_BITS_TBL[t]))throw Q.thrown("Invalid data");if(this.dist=vs.DIST_BASE_VAL_TBL[t]+this.getBits(n),this.dist>this.window.available())throw Q.thrown("Invalid data");this.state=1==this.dist?ws.DistOne:ws.Dist}return!0;case 3:var c=this.len<this.needed?this.len:this.needed,e=this.input.read(c);return this.len-=c,this.addBytes(e,0,c),0==this.len&&(this.state=this.isFinal?ws.Crc:ws.Block),0<this.needed;case 4:t=this.window.checksum();if(null==t);else{n=i3.read(this.input);if(!t.equals(n))throw Q.thrown("Invalid CRC")}return this.state=ws.Done,!0;case 5:for(;0<this.len&&0<this.needed;){var o=this.len<this.dist?this.len:this.dist,c=this.needed<o?this.needed:o;this.addDist(this.dist,c),this.len-=c}return 0==this.len&&(this.state=ws.CData),0<this.needed;case 6:c=this.len<this.needed?this.len:this.needed;return this.addDistOne(c),this.len-=c,0==this.len&&(this.state=ws.CData),0<this.needed;case 7:return!1}},__class__:vs},(L["hsluv.Geometry"]=je).__name__="hsluv.Geometry",je.intersectLineLine=function(e,n){n=(e.intercept-n.intercept)/(n.slope-e.slope);return{x:n,y:e.slope*n+e.intercept}},je.distanceFromOrigin=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},je.distanceLineFromOrigin=function(e){return Math.abs(e.intercept)/Math.sqrt(Math.pow(e.slope,2)+1)},je.perpendicularThroughPoint=function(e,n){e=-1/e.slope;return{slope:e,intercept:n.y-e*n.x}},je.angleFromOrigin=function(e){return Math.atan2(e.y,e.x)},je.normalizeAngle=function(e){var n=2*Math.PI;return(e%n+n)%n},je.lengthOfRayUntilIntersect=function(e,n){return n.intercept/(Math.sin(e)-n.slope*Math.cos(e))},function(){}),ys=((L["hsluv.Hsluv"]=S).__name__="hsluv.Hsluv",S.getBounds=function(e){for(var n=[],t=Math.pow(e+16,3)/1560896,i=t>S.epsilon?t:e/S.kappa,l=0;l<3;){var s=l++,r=S.m[s][0],a=S.m[s][1],s=S.m[s][2],h=(632260*s-126452*a)*i,h=(n.push({slope:(284517*r-94839*s)*i/h,intercept:((838422*s+769860*a+731718*r)*e*i-0*e)/h}),(284517*r-94839*s)*i),u=(632260*s-126452*a)*i+126452;n.push({slope:h/u,intercept:((838422*s+769860*a+731718*r)*e*i-769860*e)/u})}return n},S.maxSafeChromaForL=function(e){for(var n=S.getBounds(e),t=1/0,i=0;i<n.length;)var l=n[i],l=(++i,je.distanceLineFromOrigin(l)),t=Math.min(t,l);return t},S.maxChromaForLH=function(e,n){for(var t=n/360*Math.PI*2,i=S.getBounds(e),l=1/0,s=0;s<i.length;){var r=i[s],r=(++s,je.lengthOfRayUntilIntersect(t,r));0<=r&&(l=Math.min(l,r))}return l},S.dotProduct=function(e,n){for(var t=0,i=0,l=e.length;i<l;){var s=i++;t+=e[s]*n[s]}return t},S.fromLinear=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055},S.toLinear=function(e){return.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92},S.xyzToRgb=function(e,n){var t=S.fromLinear(S.dotProduct(S.m[0],e)),i=S.fromLinear(S.dotProduct(S.m[1],e)),e=S.fromLinear(S.dotProduct(S.m[2],e));return(n=null==n?[0,0,0]:n)[0]=t,n[1]=i,n[2]=e,n},S.rgbToXyz=function(e,n){var t=e[0],i=e[1],e=e[2],t=((n=null==n?[0,0,0]:n)[0]=S.toLinear(t),n[1]=S.toLinear(i),n[2]=S.toLinear(e),S.dotProduct(S.minv[0],n)),i=S.dotProduct(S.minv[1],n),e=S.dotProduct(S.minv[2],n);return n[0]=t,n[1]=i,n[2]=e,n},S.yToL=function(e){return e<=S.epsilon?e/S.refY*S.kappa:116*Math.pow(e/S.refY,.3333333333333333)-16},S.lToY=function(e){return e<=8?S.refY*e/S.kappa:S.refY*Math.pow((e+16)/116,3)},S.xyzToLuv=function(e,n){var t=e[0],i=e[1],e=(null==n&&(n=[0,0,0]),t+15*i+3*e[2]),t=4*t,l=9*i,e=(0!=e?(t/=e,l/=e):l=t=NaN,S.yToL(i));return 0==e?(n[0]=0,n[1]=0,n[2]=0):(i=13*e*(t-S.refU),t=13*e*(l-S.refV),n[0]=e,n[1]=i,n[2]=t),n},S.luvToXyz=function(e,n){null==n&&(n=[0,0,0]);var t=e[0],i=e[1],e=e[2];return 0==t?(n[0]=0,n[1]=1,n[2]=2):(i=i/(13*t)+S.refU,e=e/(13*t)+S.refV,e=(9*(t=S.lToY(t))-15*e*t-e*(i=0-9*t*i/((i-4)*e-i*e)))/(3*e),n[0]=i,n[1]=t,n[2]=e),n},S.luvToLch=function(e,n){var t,i=e[0],l=e[1],e=e[2],s=(null==n&&(n=[0,0,0]),Math.sqrt(l*l+e*e));return s<1e-8?t=0:(t=180*Math.atan2(e,l)/Math.PI)<0&&(t=360+t),n[0]=i,n[1]=s,n[2]=t,n},S.lchToLuv=function(e,n){var t=e[0],i=e[1],e=(null==n&&(n=[0,0,0]),e[2]/360*2*Math.PI),l=Math.cos(e)*i,e=Math.sin(e)*i;return n[0]=t,n[1]=l,n[2]=e,n},S.hsluvToLch=function(e,n){var t=e[0],i=e[1],e=e[2];return null==n&&(n=[0,0,0]),99.9999999<e?(n[0]=100,n[1]=0,n[2]=t):(e<1e-8?(n[0]=0,n[1]=0):(i=S.maxChromaForLH(e,t)/100*i,n[0]=e,n[1]=i),n[2]=t),n},S.lchToHsluv=function(e,n){var t=e[0],i=e[1],e=e[2];return null==n&&(n=[0,0,0]),99.9999999<t?(n[0]=e,n[1]=0,n[2]=100):t<1e-8?(n[0]=e,n[1]=0,n[2]=0):(i=i/S.maxChromaForLH(t,e)*100,n[0]=e,n[1]=i,n[2]=t),n},S.hpluvToLch=function(e){var n=e[0],t=e[1],e=e[2];return 99.9999999<e?[100,0,n]:e<1e-8?[0,0,n]:[e,S.maxSafeChromaForL(e)/100*t,n]},S.lchToHpluv=function(e){var n=e[0],t=e[1],e=e[2];return 99.9999999<n?[e,0,100]:n<1e-8?[e,0,0]:[e,t/S.maxSafeChromaForL(n)*100,n]},S.rgbToHex=function(e){var n="#",t=e[0],i=(l=Math.round(255*t))%16,t=(n+=S.hexChars.charAt((l-i)/16|0)+S.hexChars.charAt(i),e[1]),l=Math.round(255*t),t=(n+=S.hexChars.charAt((l-(i=l%16))/16|0)+S.hexChars.charAt(i),e[2]),l=Math.round(255*t);return n+=S.hexChars.charAt((l-(i=l%16))/16|0)+S.hexChars.charAt(i)},S.hexToRgb=function(e){e=e.toLowerCase();var n=[],t=S.hexChars.indexOf(e.charAt(1)),i=S.hexChars.indexOf(e.charAt(2)),t=(n.push((16*t+i)/255),S.hexChars.indexOf(e.charAt(3))),i=S.hexChars.indexOf(e.charAt(4)),t=(n.push((16*t+i)/255),S.hexChars.indexOf(e.charAt(5))),i=S.hexChars.indexOf(e.charAt(6));return n.push((16*t+i)/255),n},S.lchToRgb=function(e,n){return S.lchToLuv(e,n=null==n?[0,0,0]:n),S.luvToXyz(n,n),S.xyzToRgb(n,n),n},S.rgbToLch=function(e,n){return S.rgbToXyz(e,n=null==n?[0,0,0]:n),S.xyzToLuv(n,n),S.luvToLch(n,n),n},S.hsluvToRgb=function(e,n){return S.hsluvToLch(e,n=null==n?[0,0,0]:n),S.lchToRgb(n,n),n},S.rgbToHsluv=function(e,n){return S.rgbToLch(e,n=null==n?[0,0,0]:n),S.lchToHsluv(n,n),n},S.hpluvToRgb=function(e){return S.lchToRgb(S.hpluvToLch(e))},S.rgbToHpluv=function(e){return S.lchToHpluv(S.rgbToLch(e))},S.hsluvToHex=function(e){return S.rgbToHex(S.hsluvToRgb(e))},S.hpluvToHex=function(e){return S.rgbToHex(S.hpluvToRgb(e))},S.hexToHsluv=function(e){return S.rgbToHsluv(S.hexToRgb(e))},S.hexToHpluv=function(e){return S.rgbToHpluv(S.hexToRgb(e))},function(){}),Cs=((L["js.Boot"]=ys).__name__="js.Boot",ys.getClass=function(e){var n;return null==e?null:e instanceof Array?Array:null!=(n=e.__class__)?n:null!=(n=ys.__nativeClassName(e))?ys.__resolveNativeClass(n):null},ys.__string_rec=function(l,s){if(null==l)return"null";if(5<=s.length)return"<...>";var r,e,n=typeof l;switch(n="function"==n&&(l.__name__||l.__ename__)?"object":n){case"function":return"<function>";case"object":if(l.__enum__)return u=(r=I[l.__enum__].__constructs__[l._hx_index])._hx_name,r.__params__?(s+="\t",u+"("+function(){for(var e=[],n=0,t=r.__params__;n<t.length;){var i=t[n];n+=1,e.push(ys.__string_rec(l[i],s))}return e}().join(",")+")"):u;if(l instanceof Array){for(var t="[",i=(s+="\t",0),a=l.length;i<a;){var h=i++;t+=(0<h?",":"")+ys.__string_rec(l[h],s)}return t+="]"}try{e=l.toString}catch(i){return Al.lastError=i,"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e){var u=l.toString();if("[object Object]"!=u)return u}var t="{\n",c=(s+="\t",null!=l.hasOwnProperty),o=null;for(o in l)c&&!l.hasOwnProperty(o)||"prototype"!=o&&"__class__"!=o&&"__super__"!=o&&"__interfaces__"!=o&&"__properties__"!=o&&(2!=t.length&&(t+=", \n"),t+=s+o+" : "+ys.__string_rec(l[o],s));return t+="\n"+(s=s.substring(1))+"}";case"string":return l;default:return String(l)}},ys.__interfLoop=function(e,n){if(null==e)return!1;if(e==n)return!0;var t=e.__interfaces__;if(null!=t)for(var i=0,l=t.length;i<l;){var s=t[i++];if(s==n||ys.__interfLoop(s,n))return!0}return ys.__interfLoop(e.__super__,n)},ys.__instanceof=function(e,n){if(null==n)return!1;switch(n){case Array:return e instanceof Array;case Ss:return"boolean"==typeof e;case Ds:return null!=e;case As:return"number"==typeof e;case Ts:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof n){if(ys.__downcastCheck(e,n))return!0}else if("object"==typeof n&&ys.__isNativeObj(n)&&e instanceof n)return!0;return n==Es&&null!=e.__name__?!0:n==Ms&&null!=e.__ename__||null!=e.__enum__&&I[e.__enum__]==n}},ys.__downcastCheck=function(e,n){return e instanceof n||!!n.__isInterface__&&ys.__interfLoop(ys.getClass(e),n)},ys.__implements=function(e,n){return ys.__interfLoop(ys.getClass(e),n)},ys.__cast=function(e,n){if(null==e||ys.__instanceof(e,n))return e;throw Q.thrown("Cannot cast "+V.string(e)+" to "+V.string(n))},ys.__nativeClassName=function(e){e=ys.__toStr.call(e).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},ys.__isNativeObj=function(e){return null!=ys.__nativeClassName(e)},ys.__resolveNativeClass=function(e){return ie[e]},function(){}),M=((L["js.html._CanvasElement.CanvasUtil"]=Cs).__name__="js.html._CanvasElement.CanvasUtil",Cs.getContextWebGL=function(e,n){var t=e.getContext("webgl",n);return null!=t||null!=(t=e.getContext("experimental-webgl",n))?t:null},(L["js.lib._ArrayBuffer.ArrayBufferCompat"]=ne).__name__="js.lib._ArrayBuffer.ArrayBufferCompat",ne.sliceImpl=function(e,n){n=new Uint8Array(this,e,null==n?null:n-e),e=new Uint8Array(n.byteLength);return e.set(n),e.buffer},(L["tracker.Assert"]=oe).__name__="tracker.Assert",function(e,n){this.invalidated=!1,this.boundAutorunArrays=null,this.owner=null,this.afterRun=null,this.onRun=null,l.call(this),this.onRun=e,this.afterRun=n,null!=e&&this.run()}),W=((L["tracker.Autorun"]=M).__name__="tracker.Autorun",M.unobserve=function(){M.prevCurrent.push(M.current),M.current=null},M.reobserve=function(){M.current=M.prevCurrent.pop()},M.cease=function(){var e;null!=M.current?(M.current.destroy(),M.current=null):0<M.prevCurrent.length&&null!=(e=M.prevCurrent[M.prevCurrent.length-1])&&(e.destroy(),M.prevCurrent[M.prevCurrent.length-1]=null)},M.unobserved=function(e){M.unobserve(),e(),M.reobserve()},M.invalidateAutorunArray=function(e){for(var n=0,t=e.length;n<t;){var i=e[n++];null==i||i.invalidated||i._lifecycleState<0||(i.invalidated=!0,i.unbindFromAllAutorunArrays(),Us.backend,he.app._onceImmediate($bind(i,i.run)))}e.splice(0,e.length),M._autorunArrays[M._autorunArraysLen]=e,M._autorunArraysLen++},M.getAutorunArray=function(){var e;return 0<M._autorunArraysLen?(M._autorunArraysLen--,e=M._autorunArrays[M._autorunArraysLen],M._autorunArrays[M._autorunArraysLen]=null,e):[]},M.recycleAutorunArray=function(e){e.splice(0,e.length),M._autorunArrays[M._autorunArraysLen]=e,M._autorunArraysLen++},M.getArrayOfAutorunArrays=function(){var e;return 0<M._arrayOfAutorunArraysLen?(M._arrayOfAutorunArraysLen--,e=M._arrayOfAutorunArrays[M._arrayOfAutorunArraysLen],M._arrayOfAutorunArrays[M._arrayOfAutorunArraysLen]=null,e):[]},M.recycleArrayOfAutorunArrays=function(e){e.splice(0,e.length),M._arrayOfAutorunArrays[M._arrayOfAutorunArraysLen]=e,M._arrayOfAutorunArraysLen++},M.__super__=l,M.prototype=$extend(l.prototype,{__cbOnReset:null,__cbOnceReset:null,__cbOnOwnerUnbindReset:null,__cbOnceOwnerUnbindReset:null,emitReset:function(){this.unbindFromAllAutorunArrays();var e=0;if(null!=this.__cbOnReset&&(e+=this.__cbOnReset.length),null!=this.__cbOnceReset&&(e+=this.__cbOnceReset.length),0<e){var n=f.pool(e),t=n.get(),i=0;if(null!=this.__cbOnReset)for(var l=0,s=this.__cbOnReset.length;l<s;){var r=l++;!0?(t.vector[i]=this.__cbOnReset[r],++i):--e}if(null!=this.__cbOnceReset){for(var a=null,h=null,l=0,s=this.__cbOnceReset.length;l<s;){var u,r=l++;!0?(t.vector[i]=this.__cbOnceReset[r],this.__cbOnceReset[r]=null,u=this.__cbOnceOwnerUnbindReset[r],(this.__cbOnceOwnerUnbindReset[r]=null)!=u&&u(),++i):(--e,null==a&&(a=[],h=[],0),a.push(this.__cbOnceOwnerUnbindReset[r]),h.push(this.__cbOnceReset[r]))}this.__cbOnceOwnerUnbindReset=a,this.__cbOnceReset=h}for(l=0,s=e;l<s;){i=l++;(0,t.vector[i])()}n.release(t)}},onReset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event reset because owner is destroyed!");var l=function(e){null!=t&&(i.offReset(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindReset&&(this.__cbOnOwnerUnbindReset=[]),this.__cbOnOwnerUnbindReset.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindReset&&(this.__cbOnOwnerUnbindReset=[]),this.__cbOnOwnerUnbindReset.push(null);null==this.__cbOnReset&&(this.__cbOnReset=[]),this.__cbOnReset.push(t)},onceReset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event reset because owner is destroyed!");var l=function(e){null!=t&&(i.offReset(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindReset&&(this.__cbOnceOwnerUnbindReset=[]),this.__cbOnceOwnerUnbindReset.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindReset&&(this.__cbOnceOwnerUnbindReset=[]),this.__cbOnceOwnerUnbindReset.push(null);null==this.__cbOnceReset&&(this.__cbOnceReset=[]),this.__cbOnceReset.push(t)},offReset:function(e){if(null!=e){var n;null!=this.__cbOnReset&&-1!=(n=this.__cbOnReset.indexOf(e))&&(this.__cbOnReset.splice(n,1),null!=(s=this.__cbOnOwnerUnbindReset[n])&&s(),this.__cbOnOwnerUnbindReset.splice(n,1)),null!=this.__cbOnceReset&&-1!=(n=this.__cbOnceReset.indexOf(e))&&(this.__cbOnceReset.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindReset[n])&&s(),this.__cbOnceOwnerUnbindReset.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindReset){for(var t=0,i=this.__cbOnOwnerUnbindReset.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindReset[l])&&s()}this.__cbOnOwnerUnbindReset=null}if(null!=this.__cbOnceOwnerUnbindReset){for(t=0,i=this.__cbOnceOwnerUnbindReset.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindReset[l])&&s()}this.__cbOnceOwnerUnbindReset=null}this.__cbOnReset=null,this.__cbOnceReset=null}},listensReset:function(){return null!=this.__cbOnReset&&0<this.__cbOnReset.length||null!=this.__cbOnceReset&&0<this.__cbOnceReset.length},onRun:null,afterRun:null,owner:null,boundAutorunArrays:null,invalidated:null,destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this.emitReset(),this.onRun=null,this.afterRun=null,this._lifecycleState=-1,l.prototype.destroy.call(this))},willEmitReset:function(){this.unbindFromAllAutorunArrays()},run:function(){if(!(this._lifecycleState<0||null!=this.owner&&this.owner._lifecycleState<0)){this.invalidated=!1,this.emitReset();var e=M.current,n=(M.current=this,M.prevCurrent.length);for(this.onRun(),null!=this.afterRun&&(M.unobserve(),this.afterRun(),M.reobserve());n<M.prevCurrent.length;)M.prevCurrent.pop();M.current=e}},invalidate:function(){this.invalidated||this._lifecycleState<0||(this.invalidated=!0,this.unbindFromAllAutorunArrays(),Us.backend,he.app._onceImmediate($bind(this,this.run)))},bindToAutorunArray:function(e){if(!(this.invalidated||this._lifecycleState<0)){var n=!1;if(null==this.boundAutorunArrays){var t=0<M._arrayOfAutorunArraysLen?(M._arrayOfAutorunArraysLen--,t=M._arrayOfAutorunArrays[M._arrayOfAutorunArraysLen],M._arrayOfAutorunArrays[M._arrayOfAutorunArraysLen]=null,t):[];this.boundAutorunArrays=t}else for(var i=0,l=this.boundAutorunArrays.length;i<l;){var s=i++;if(this.boundAutorunArrays[s]==e){n=!0;break}}if(!n){for(var r=-1,t=e.length,s=t-1;0<=s;){if(null==(h=e[s])){r=s;break}--s}if(-1==r)e.push(this);else{var a=t-1;if(r<a)for(i=r+1,l=t;i<l;){var h=e[s=i++];e[s-1]=h}e[a]=this}this.boundAutorunArrays.push(e)}}},unbindFromAllAutorunArrays:function(){if(null!=this.boundAutorunArrays){for(var e=0,n=this.boundAutorunArrays.length;e<n;)for(var t=e++,i=this.boundAutorunArrays[t],l=0,s=i.length;l<s;){var r=l++,a=i[r];if(null!=a&&a==this){i[r]=null;break}}var h=this.boundAutorunArrays;h.splice(0,h.length),M._arrayOfAutorunArrays[M._arrayOfAutorunArraysLen]=h,M._arrayOfAutorunArraysLen++,this.boundAutorunArrays=null}},unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offReset()},__class__:M}),(L["tracker.Equal"]=qe).__name__="tracker.Equal",qe.equal=function(e,n){return e==n||(e instanceof Array?n instanceof Array&&qe._arrayEqual(e,n):!(!N.isObject(e)||null!=ys.getClass(e)||!N.isObject(n)||null!=ys.getClass(n))&&qe.objectFieldsEqual(e,n))},qe.objectFieldsEqual=function(e,n){for(var t=0,i=N.fields(e);t<i.length;){var l=i[t];if(++t,!Object.prototype.hasOwnProperty.call(n,l)||!qe.equal(N.field(e,l),N.field(n,l)))return!1}for(t=0,i=N.fields(n);t<i.length;){l=i[t];if(++t,!Object.prototype.hasOwnProperty.call(e,l))return!1}return!0},qe._arrayEqual=function(e,n){var t=e.length;if(t!=n.length)return!1;for(var i=0,l=t;i<l;){var s=i++;if(e[s]!=n[s])return!1}return!0},(L["tracker.Extensions"]=re).__name__="tracker.Extensions",re.unsafeGet=function(e,n){return e[n]},re.unsafeSet=function(e,n,t){e[n]=t},re.setArrayLength=function(e,n){if(e.length!=n)if(e.length>n)e.splice(n,e.length-n);else for(var t=e;t.length<n;)t.push(null)},re.setProperty=function(e,n,t){N.setProperty(e,n,t)},re.getProperty=function(e,n){return N.getProperty(e,n)},function(){}),Us=((L["tracker.Serialize"]=W).__name__="tracker.Serialize",W.serialize=function(e){W._serializedMap=new z;var e=W.serializeValue(e),n=new Sl,e=(n.serialize(e),n.serialize(W._serializedMap),n.toString());return W._serializedMap=null,e},W.deserialize=function(e,n){var t=W._serializedMap,i=W._deserializedMap,n=new El(n),l=n.unserialize(),n=(W._serializedMap=n.unserialize(),W._deserializedMap=new z,W.deserializeValue(l,e));return W._serializedMap=t,W._deserializedMap=i,n},W.serializeValue=function(e){if(null==e)return null;if(null==W._serializedMap)return null;if(e instanceof l){var n=e;if(n._lifecycleState<0)return Us.backend,v=ys.getClass(n),n="Entity destroyed: "+V.string(n)+" "+v.__name__,he.app.logger.error(n,{fileName:"tracker/Serialize.hx",lineNumber:90,className:"tracker.Serialize",methodName:"serializeValue"}),null}if(ys.__implements(e,sc)){var n=ys.getClass(e),t=n.__name__,i=e._serializeId;if(!Object.prototype.hasOwnProperty.call(W._cachedEnumInfoBySerializableType.h,t)&&(W._cachedEnumInfoBySerializableType.h[t]=!0,Object.prototype.hasOwnProperty.call(n,"_serializeEnumInfo"))){t=N.field(n,"_serializeEnumInfo");if(null!=t)for(var s=x=t.h,r=(T=Object.keys(x)).length,a=0;a<r;){var u=y=T[a++],c=s[y];W._enumInfo.h[u]=c}}if(null!=W._deserializedMap&&(W._deserializedMap.h[i]=e),null!=W._onCheckSerializable&&W._onCheckSerializable(e),!Object.prototype.hasOwnProperty.call(W._serializedMap.h,i)){var o={id:i,type:n.__name__,props:{}};W._serializedMap.h[i]=o;e.willSerialize();for(var _="unobserved".length,d=n;null!=d;){for(var b=us.getFields(d),g=0,O=N.fields(b);g<O.length;){var f=O[g],p=(++g,N.field(b,f));Object.prototype.hasOwnProperty.call(p,"serialize")&&(B.startsWith(p=f,"unobserved")&&(p=p.charAt(_).toLowerCase()+h.substr(p,_+1,null)),f=N.getProperty(e,f),c=W.serializeValue(f),o.props[p]=c)}if(null!=(d=d.__super__)&&"tracker.Model"==d.__name__)break}null!=W._onAddSerializable&&W._onAddSerializable(e)}return{id:i}}if(e instanceof Array){for(var o=[],m=e,g=0;g<m.length;){var w=m[g];++g,o.push(W.serializeValue(w))}return o}if("string"==typeof e||"number"==typeof e&&(0|e)===e||"number"==typeof e||"boolean"==typeof e)return e;var v,g=D.typeof(e);if(null!=g&&6==g._hx_index&&null!=(v=g.c))switch(v){case Hl:for(var o={im:C=[]},y=(U=e).keys();y.hasNext();){u=y.next();C.push(u),C.push(W.serializeValue(U.h[u]))}return o;case z:for(var C,U,x,T,o={sm:C=[]},s=x=(U=e).h,r=(T=Object.keys(x)).length,a=0;a<r;){y=T[a++];C.push(y),C.push(W.serializeValue(U.h[y]))}return o}return null!=W.customHxSerialize?{hx:W.customHxSerialize(e)}:((t=new Sl).useCache=!0,t.serialize(e),{hx:t.toString()})},W.deserializeValue=function(e,n,t){if(null==t&&(t=!1),null==e)return null;if(null==W._serializedMap)return null;if(null==W._deserializedMap)return null;var i=null!=n;if(e instanceof Array){for(var l=[],s=e,r=0;r<s.length;){var a=s[r];++r,l.push(W.deserializeValue(a))}return l}if("string"==typeof e||"number"==typeof e&&(0|e)===e||"number"==typeof e||"boolean"==typeof e)return e;if(null!=e.id){if(Object.prototype.hasOwnProperty.call(W._deserializedMap.h,e.id)){var u=W._deserializedMap.h[e.id];if(t&&null!=e.props&&null!=e.type){var c=e.type;if(null==(I=L[c]))return Us.backend,he.app.logger.warning("Failed to resolve class for serialized type: "+V.string(e.type),{fileName:"tracker/Serialize.hx",lineNumber:314,className:"tracker.Serialize",methodName:"deserializeValue"}),null;for(var o=us.getFields(I),_="unobserved".length,d=Object.create(null),r=0,b=D.getInstanceFields(I);r<b.length;){var g=b[r];++r,d[g]=!0}for(var O=I.__super__,f=null;null!=O&&((f=null==f?[]:f).push(us.getFields(O)),"tracker.Model"!=O.__name__);){for(r=0,b=D.getInstanceFields(O);r<b.length;){g=b[r];++r,d[g]=!0}O=O.__super__}R=d;for(var p=(A=Object.keys(R)).length,m=0;m<p;){var w=A[m++];if(null==(S=N.field(o,w))&&null!=f)for(r=0,b=f.length;r<b;){var v=r++;if(null!=(S=N.field(f[v],w)))break}var y=null!=S&&Object.prototype.hasOwnProperty.call(S,"serialize"),C=w;B.startsWith(C,"unobserved")&&(C=C.charAt(_).toLowerCase()+h.substr(C,_+1,null)),y&&Object.prototype.hasOwnProperty.call(e.props,C)&&(E=W.deserializeValue(N.field(e.props,C)),N.setProperty(u,C,E))}}return u}if(Object.prototype.hasOwnProperty.call(W._serializedMap.h,e.id)){var U=W._serializedMap.h[e.id],c=U.type;if(null==(I=L[c]))return Us.backend,he.app.logger.warning("Failed to resolve class for serialized type: "+U.type,{fileName:"tracker/Serialize.hx",lineNumber:376,className:"tracker.Serialize",methodName:"deserializeValue"}),null;if(null!=n&&ys.getClass(n)!=I)throw Q.thrown("Type mismatch when deserializing object expected "+V.string(I)+", got "+V.string(ys.getClass(n)));for(var x=null,T=!1,t=!1,o=(null!=W._deserializedCacheMap&&Object.prototype.hasOwnProperty.call(W._deserializedCacheMap.h,e.id)?(x=W._deserializedCacheMap.h[e.id],T=!0):null!=n&&ys.getClass(n)==I?x=n:(x=Object.create(I.prototype),t=!0),x._serializeId=e.id,W._deserializedMap.h[e.id]=x,us.getFields(I)),_="unobserved".length,d=Object.create(null),r=0,b=D.getInstanceFields(I);r<b.length;){g=b[r];++r,d[g]=!0}for(O=I.__super__,f=null;null!=O&&((f=null==f?[]:f).push(us.getFields(O)),"tracker.Model"!=O.__name__);){for(r=0,b=D.getInstanceFields(O);r<b.length;){g=b[r];++r,d[g]=!0}O=O.__super__}R=d;for(var A,p=(A=Object.keys(R)).length,m=0;m<p;){var S,w=A[m++];if(null==(S=N.field(o,w))&&null!=f)for(r=0,b=f.length;r<b;){v=r++;if(null!=(S=N.field(f[v],w)))break}var E,M,y=null!=S&&Object.prototype.hasOwnProperty.call(S,"serialize"),C=w;B.startsWith(C,"unobserved")&&(C=C.charAt(_).toLowerCase()+h.substr(C,_+1,null)),y&&Object.prototype.hasOwnProperty.call(U.props,C)?(E=W.deserializeValue(N.field(U.props,C)),N.setProperty(x,T||i?C:w,E)):i||T||!Object.prototype.hasOwnProperty.call(d,"_default_"+C)||(M=N.field(x,"_default_"+C).apply(x,[]),N.setProperty(x,w,M))}var k,c=W._serializedMap,n=W._deserializedMap,I=W._deserializedCacheMap,R=W._createdInstances;return W._serializedMap=null,W._deserializedMap=null,W._deserializedCacheMap=null,W._createdInstances=null,x.didDeserialize(),t&&(null!=R?R.push(x):null!=(k=N.field(x,"_autorunMarkedMethods"))&&(Us.backend,he.app._onceImmediate(function(){k.apply(x,[])}))),W._serializedMap=c,W._deserializedMap=n,W._deserializedCacheMap=I,W._createdInstances=R,x}return null}if(null!=e.sm){for(var F=e.sm,v=0,l=new z;v<F.length;){var P=W.deserializeValue(F[v+1]);l.h[F[v]]=P,v+=2}return l}if(null!=e.im){for(F=e.im,v=0,l=new Hl;v<F.length;){P=W.deserializeValue(F[v+1]);l.h[F[v]]=P,v+=2}return l}if(null==e.hx)return null;if(null!=W.customHxDeserialize)return W.customHxDeserialize(e.hx);t=new El(e.hx);try{return t.unserialize()}catch(r){Al.lastError=r;Us.backend;return he.app.logger.warning("Failed to deserialize: "+V.string(e.hx),{fileName:"tracker/Serialize.hx",lineNumber:606,className:"tracker.Serialize",methodName:"deserializeValue"}),null}},(L["tracker.SerializeChangeset"]=te).__name__="tracker.SerializeChangeset",te.prototype={data:null,append:null,toString:function(){return""+V.string({append:this.append,data:this.data})},__class__:te},(L["tracker.SerializeModel"]=ue).__name__="tracker.SerializeModel",ue.__interfaces__=[H0],ue.loadFromData=function(e,n,t){if(null==t&&(t=!1),null==n)return!1;W._serializedMap=new z,W._deserializedMap=new z,W._deserializedCacheMap=null,W.serializeValue(e);for(var i=W._deserializedMap,n=(W._serializedMap=null,W._deserializedMap=null,W._deserializedCacheMap=null,xs.decodeChangesetData(n)),l=(W._serializedMap=n.serializedMap,W._deserializedMap=new z,W._deserializedCacheMap=t?i:null,W._createdInstances=[],W.deserializeValue(n.serialized,e),W._deserializedMap,W._createdInstances),s=(W._createdInstances=null,0),r=l.length;s<r;){var a=l[s++],h=N.field(a,"_autorunMarkedMethods");null!=h&&h.apply(a,[])}W._deserializedMap=null,W._serializedMap=null,W._deserializedCacheMap=null,W._serializedMap=new z,W._deserializedMap=new z,W._deserializedCacheMap=null,W.serializeValue(e);for(var u=W._deserializedMap,t=(W._serializedMap=null,W._deserializedMap=null,W._deserializedCacheMap=null,i.h),c=t,o=Object.keys(t),_=o.length,d=0;d<_;){var b=o[d++],g=c[b];u.h[b]!=g&&g instanceof tc&&(b=g)!=e&&b.serializeShouldDestroy()&&b.destroy()}return!0},ue.__super__=l,ue.prototype=$extend(l.prototype,{__cbOnChangeset:null,__cbOnceChangeset:null,__cbOnOwnerUnbindChangeset:null,__cbOnceOwnerUnbindChangeset:null,emitChangeset:function(e){var n=0;if(null!=this.__cbOnChangeset&&(n+=this.__cbOnChangeset.length),null!=this.__cbOnceChangeset&&(n+=this.__cbOnceChangeset.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnChangeset)for(var s=0,r=this.__cbOnChangeset.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnChangeset[a],++l):--n}if(null!=this.__cbOnceChangeset){for(var h=null,u=null,s=0,r=this.__cbOnceChangeset.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceChangeset[a],this.__cbOnceChangeset[a]=null,c=this.__cbOnceOwnerUnbindChangeset[a],(this.__cbOnceOwnerUnbindChangeset[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindChangeset[a]),u.push(this.__cbOnceChangeset[a]))}this.__cbOnceOwnerUnbindChangeset=h,this.__cbOnceChangeset=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onChangeset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event changeset because owner is destroyed!");var l=function(e){null!=t&&(i.offChangeset(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChangeset&&(this.__cbOnOwnerUnbindChangeset=[]),this.__cbOnOwnerUnbindChangeset.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChangeset&&(this.__cbOnOwnerUnbindChangeset=[]),this.__cbOnOwnerUnbindChangeset.push(null);null==this.__cbOnChangeset&&(this.__cbOnChangeset=[]),this.__cbOnChangeset.push(t)},onceChangeset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event changeset because owner is destroyed!");var l=function(e){null!=t&&(i.offChangeset(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChangeset&&(this.__cbOnceOwnerUnbindChangeset=[]),this.__cbOnceOwnerUnbindChangeset.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChangeset&&(this.__cbOnceOwnerUnbindChangeset=[]),this.__cbOnceOwnerUnbindChangeset.push(null);null==this.__cbOnceChangeset&&(this.__cbOnceChangeset=[]),this.__cbOnceChangeset.push(t)},offChangeset:function(e){if(null!=e){var n;null!=this.__cbOnChangeset&&-1!=(n=this.__cbOnChangeset.indexOf(e))&&(this.__cbOnChangeset.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChangeset[n])&&s(),this.__cbOnOwnerUnbindChangeset.splice(n,1)),null!=this.__cbOnceChangeset&&-1!=(n=this.__cbOnceChangeset.indexOf(e))&&(this.__cbOnceChangeset.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChangeset[n])&&s(),this.__cbOnceOwnerUnbindChangeset.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChangeset){for(var t=0,i=this.__cbOnOwnerUnbindChangeset.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChangeset[l])&&s()}this.__cbOnOwnerUnbindChangeset=null}if(null!=this.__cbOnceOwnerUnbindChangeset){for(t=0,i=this.__cbOnceOwnerUnbindChangeset.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChangeset[l])&&s()}this.__cbOnceOwnerUnbindChangeset=null}this.__cbOnChangeset=null,this.__cbOnceChangeset=null}},listensChangeset:function(){return null!=this.__cbOnChangeset&&0<this.__cbOnChangeset.length||null!=this.__cbOnceChangeset&&0<this.__cbOnceChangeset.length},checkInterval:null,compactInterval:null,destroyModelOnUntrack:null,serializedMap:null,model:null,get_model:function(){return this.entity},entity:null,bindAsComponent:function(){0<this.checkInterval&&(Us.backend,e=this.checkInterval,xi.schedule(this,e,$bind(this,this.synchronize),e)),0<this.compactInterval&&(Us.backend,e=this.compactInterval,xi.schedule(this,e,$bind(this,this.compactIfNeeded),e));var e=this.entity;0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(this.trackedModels.h,e._serializeId)&&((this.trackedModels.h[e._serializeId]=e).onModelDirty(this,$bind(this,this.explicitModelDirty)),e.onObservedDirty(this,$bind(this,this.modelDirty)),e.onceDestroy(this,$bind(this,this.trackedModelDestroyed))),this.compact()},compact:function(e){var n=this,t=this.serializedMap,i=(W._serializedMap=new z,W._onAddSerializable=function(e){e instanceof tc&&((e=e).observedDirty=!1,0<=e._lifecycleState)&&!Object.prototype.hasOwnProperty.call(n.trackedModels.h,e._serializeId)&&((n.trackedModels.h[e._serializeId]=e).onModelDirty(n,$bind(n,n.explicitModelDirty)),e.onObservedDirty(n,$bind(n,n.modelDirty)),e.onceDestroy(n,$bind(n,n.trackedModelDestroyed)))},W.serializeValue(this.entity)),t=(this.serializedMap=W._serializedMap,W._onAddSerializable=null,W._serializedMap=null,this.cleanTrackingFromPrevSerializedMap(t),new Sl),i=(t.serialize(i),t.serialize(this.serializedMap),t.toString());this.emitChangeset(new te(i,!1)),null!=e&&e(i)},trackedModels:null,willCleanDestroyedTrackedModels:null,dirtyModels:null,canCompact:null,dirty:null,track:function(e){0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(this.trackedModels.h,e._serializeId)&&((this.trackedModels.h[e._serializeId]=e).onModelDirty(this,$bind(this,this.explicitModelDirty)),e.onObservedDirty(this,$bind(this,this.modelDirty)),e.onceDestroy(this,$bind(this,this.trackedModelDestroyed)))},untrack:function(e){var n,t;Object.prototype.hasOwnProperty.call(this.trackedModels.h,e._serializeId)&&(n=e._serializeId,t=this.trackedModels,Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],e.offModelDirty($bind(this,this.explicitModelDirty)),e.offObservedDirty($bind(this,this.modelDirty)),e.offDestroy($bind(this,this.trackedModelDestroyed)),this.destroyModelOnUntrack)&&e.destroy()},trackedModelDestroyed:function(e){var c=this;this.willCleanDestroyedTrackedModels||(this.willCleanDestroyedTrackedModels=!0,Us.backend,he.app._onceImmediate(function(){for(var e=[],n=c.trackedModels.h,t=Object.keys(n),i=t.length,l=0;l<i;){var s=t[l++];e.push(s)}for(var r=0;r<e.length;){var a,h,s=e[r],u=(++r,c.trackedModels.h[s]);u._lifecycleState<0&&Object.prototype.hasOwnProperty.call(c.trackedModels.h,u._serializeId)&&(a=u._serializeId,h=c.trackedModels,Object.prototype.hasOwnProperty.call(h.h,a)&&delete h.h[a],u.offModelDirty($bind(c,c.explicitModelDirty)),u.offObservedDirty($bind(c,c.modelDirty)),u.offDestroy($bind(c,c.trackedModelDestroyed)),c.destroyModelOnUntrack)&&u.destroy()}c.willCleanDestroyedTrackedModels=!1}))},cleanTrackingFromPrevSerializedMap:function(e){for(var n=[],e=e.h,t=Object.keys(e),i=t.length,l=0;l<i;){var s=t[l++];Object.prototype.hasOwnProperty.call(this.serializedMap.h,s)||n.push(s)}for(var r=0;r<n.length;){var a,h,s=n[r],u=(++r,this.trackedModels.h[s]);null!=u&&Object.prototype.hasOwnProperty.call(this.trackedModels.h,u._serializeId)&&(a=u._serializeId,h=this.trackedModels,Object.prototype.hasOwnProperty.call(h.h,a)&&delete h.h[a],u.offModelDirty($bind(this,this.explicitModelDirty)),u.offObservedDirty($bind(this,this.modelDirty)),u.offDestroy($bind(this,this.trackedModelDestroyed)),this.destroyModelOnUntrack)&&u.destroy()}},modelDirty:function(e,n){n?(this.dirtyModels.h[e._serializeId]=e,this.dirty=!0):e.observedDirty=!1},explicitModelDirty:function(e){this.dirtyModels.h[e._serializeId]=e,this.dirty=!0},synchronize:function(){if(this.dirty){this.dirty=!1;for(var e=[],n=this.dirtyModels.h,t=Object.keys(n),i=t.length,l=0;l<i;){var s,r,a,h=t[l++],h=this.dirtyModels.h[h];0<=h._lifecycleState&&Object.prototype.hasOwnProperty.call(this.trackedModels.h,h._serializeId)&&(0!=h.dirty&&(h.dirty=!1),s=[this],r=h._serializeId,a=this.serializedMap,Object.prototype.hasOwnProperty.call(a.h,r)&&delete a.h[r],W._serializedMap=this.serializedMap,W._onCheckSerializable=function(i){return function(e){var n=e._serializeId,t=i[0].trackedModels.h[n];null!=t&&t!=e&&(t=i[0].serializedMap,Object.prototype.hasOwnProperty.call(t.h,n))&&delete t.h[n]}}(s),W._onAddSerializable=function(n,t){return function(e){e instanceof tc&&((e=e).observedDirty=!1,t[0].push(n[0].serializedMap.h[e._serializeId]),0<=e._lifecycleState)&&!Object.prototype.hasOwnProperty.call(n[0].trackedModels.h,e._serializeId)&&((n[0].trackedModels.h[e._serializeId]=e).onModelDirty(n[0],$bind(b=n[0],b.explicitModelDirty)),e.onObservedDirty(n[0],$bind(b=n[0],b.modelDirty)),e.onceDestroy(n[0],$bind(b=n[0],b.trackedModelDestroyed)))}}(s,[e]),W.serializeValue(h),W._onCheckSerializable=null,W._onAddSerializable=null,W._serializedMap=null)}this.dirtyModels=new z,0<e.length&&((n=new Sl).serialize(e),n=n.toString(),this.canCompact=!0,this.emitChangeset(new te(n,!0)))}},compactIfNeeded:function(){this.canCompact&&(this.canCompact=!1,this.compact())},serializeModel:function(e,n){var i=this,t=e._serializeId,l=this.serializedMap;Object.prototype.hasOwnProperty.call(l.h,t)&&delete l.h[t],W._serializedMap=this.serializedMap,W._onCheckSerializable=function(e){var n=e._serializeId,t=i.trackedModels.h[n];null!=t&&t!=e&&(t=i.serializedMap,Object.prototype.hasOwnProperty.call(t.h,n))&&delete t.h[n]},W._onAddSerializable=function(e){e instanceof tc&&((e=e).observedDirty=!1,n.push(i.serializedMap.h[e._serializeId]),0<=e._lifecycleState)&&!Object.prototype.hasOwnProperty.call(i.trackedModels.h,e._serializeId)&&((i.trackedModels.h[e._serializeId]=e).onModelDirty(i,$bind(i,i.explicitModelDirty)),e.onObservedDirty(i,$bind(i,i.modelDirty)),e.onceDestroy(i,$bind(i,i.trackedModelDestroyed)))},W.serializeValue(e),W._onCheckSerializable=null,W._onAddSerializable=null,W._serializedMap=null},setEntity:function(e){this.entity=e instanceof tc?e:null},getEntity:function(){return this.entity},initializerName:null,unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offChangeset()},__class__:ue,__properties__:$extend(l.prototype.__properties__,{get_model:"get_model"})}),(L["tracker.ShareChangeset"]=ve).__name__="tracker.ShareChangeset",ve.prototype={items:null,toString:function(){for(var e=[],n=0,t=this.items;n<t.length;){var i=t[n];++n,e.push(i)}return""+V.string({items:e})},__class__:ve},(L["tracker.ShareItem"]=xe).__name__="tracker.ShareItem",xe.prototype={id:null,action:null,type:null,props:null,__class__:xe},(L["tracker.ShareModel"]=ye).__name__="tracker.ShareModel",ye.__interfaces__=[H0],ye.autoShare=function(e,n,t,i){null==n&&(n=.032);var l=e.sharer;return null!=l?(l.checkInterval!=n&&(Us.backend,he.app.logger.warning("A sharer is already assigned with different checkInterval",{fileName:"tracker/ShareModel.hx",lineNumber:561,className:"tracker.ShareModel",methodName:"autoShare"})),l.onChangeset(t,i),l.shareAll()):((l=new ye).checkInterval=n,l.onChangeset(t,i),e.set_sharer(l)),l},ye.__super__=l,ye.prototype=$extend(l.prototype,{__cbOnChangeset:null,__cbOnceChangeset:null,__cbOnOwnerUnbindChangeset:null,__cbOnceOwnerUnbindChangeset:null,emitChangeset:function(e){var n=0;if(null!=this.__cbOnChangeset&&(n+=this.__cbOnChangeset.length),null!=this.__cbOnceChangeset&&(n+=this.__cbOnceChangeset.length),0<n){var t=f.pool(n),i=t.get(),l=0;if(null!=this.__cbOnChangeset)for(var s=0,r=this.__cbOnChangeset.length;s<r;){var a=s++;!0?(i.vector[l]=this.__cbOnChangeset[a],++l):--n}if(null!=this.__cbOnceChangeset){for(var h=null,u=null,s=0,r=this.__cbOnceChangeset.length;s<r;){var c,a=s++;!0?(i.vector[l]=this.__cbOnceChangeset[a],this.__cbOnceChangeset[a]=null,c=this.__cbOnceOwnerUnbindChangeset[a],(this.__cbOnceOwnerUnbindChangeset[a]=null)!=c&&c(),++l):(--n,null==h&&(h=[],u=[],0),h.push(this.__cbOnceOwnerUnbindChangeset[a]),u.push(this.__cbOnceChangeset[a]))}this.__cbOnceOwnerUnbindChangeset=h,this.__cbOnceChangeset=u}for(s=0,r=n;s<r;){l=s++;(0,i.vector[l])(e)}t.release(i)}},onChangeset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event changeset because owner is destroyed!");var l=function(e){null!=t&&(i.offChangeset(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnOwnerUnbindChangeset&&(this.__cbOnOwnerUnbindChangeset=[]),this.__cbOnOwnerUnbindChangeset.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnOwnerUnbindChangeset&&(this.__cbOnOwnerUnbindChangeset=[]),this.__cbOnOwnerUnbindChangeset.push(null);null==this.__cbOnChangeset&&(this.__cbOnChangeset=[]),this.__cbOnChangeset.push(t)},onceChangeset:function(n,t){var i=this;if(null!=n){if(n._lifecycleState<0)throw Q.thrown("Failed to bind event changeset because owner is destroyed!");var l=function(e){null!=t&&(i.offChangeset(t),t=null),l=n=null};n.onceDestroy(null,l),null==this.__cbOnceOwnerUnbindChangeset&&(this.__cbOnceOwnerUnbindChangeset=[]),this.__cbOnceOwnerUnbindChangeset.push(function(){null!=n&&null!=l&&n.offDestroy(l),t=l=n=null})}else null==this.__cbOnceOwnerUnbindChangeset&&(this.__cbOnceOwnerUnbindChangeset=[]),this.__cbOnceOwnerUnbindChangeset.push(null);null==this.__cbOnceChangeset&&(this.__cbOnceChangeset=[]),this.__cbOnceChangeset.push(t)},offChangeset:function(e){if(null!=e){var n;null!=this.__cbOnChangeset&&-1!=(n=this.__cbOnChangeset.indexOf(e))&&(this.__cbOnChangeset.splice(n,1),null!=(s=this.__cbOnOwnerUnbindChangeset[n])&&s(),this.__cbOnOwnerUnbindChangeset.splice(n,1)),null!=this.__cbOnceChangeset&&-1!=(n=this.__cbOnceChangeset.indexOf(e))&&(this.__cbOnceChangeset.splice(n,1),null!=(s=this.__cbOnceOwnerUnbindChangeset[n])&&s(),this.__cbOnceOwnerUnbindChangeset.splice(n,1))}else{if(null!=this.__cbOnOwnerUnbindChangeset){for(var t=0,i=this.__cbOnOwnerUnbindChangeset.length;t<i;){var l=t++;null!=(s=this.__cbOnOwnerUnbindChangeset[l])&&s()}this.__cbOnOwnerUnbindChangeset=null}if(null!=this.__cbOnceOwnerUnbindChangeset){for(t=0,i=this.__cbOnceOwnerUnbindChangeset.length;t<i;){var s,l=t++;null!=(s=this.__cbOnceOwnerUnbindChangeset[l])&&s()}this.__cbOnceOwnerUnbindChangeset=null}this.__cbOnChangeset=null,this.__cbOnceChangeset=null}},listensChangeset:function(){return null!=this.__cbOnChangeset&&0<this.__cbOnChangeset.length||null!=this.__cbOnceChangeset&&0<this.__cbOnceChangeset.length},serializedMap:null,deserializedMap:null,destroysToDispatch:null,model:null,get_model:function(){return this.entity},entity:null,lastCheckedFrame:null,destroyModelOnUntrack:null,checkInterval:null,bindAsComponent:function(){0<this.checkInterval&&(Us.backend,e=this.checkInterval,xi.schedule(this,e,$bind(this,this.synchronizeIfNeeded),e));var e=this.entity;0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(this.trackedModels.h,e._serializeId)&&(this.trackedModels.h[e._serializeId]=e,(this.deserializedMap.h[e._serializeId]=e).onModelDirty(this,$bind(this,this.explicitModelDirty)),e.onObservedDirty(this,$bind(this,this.modelDirty)),e.onceDestroy(this,$bind(this,this.trackedModelDestroyed))),this.shareAll()},trackedModels:null,willCleanDestroyedTrackedModels:null,dirtyModels:null,dirty:null,paused:null,pause:function(){this.paused++},resume:function(){this.paused--},track:function(e){0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(this.trackedModels.h,e._serializeId)&&(this.trackedModels.h[e._serializeId]=e,(this.deserializedMap.h[e._serializeId]=e).onModelDirty(this,$bind(this,this.explicitModelDirty)),e.onObservedDirty(this,$bind(this,this.modelDirty)),e.onceDestroy(this,$bind(this,this.trackedModelDestroyed)))},untrack:function(e){var n,t;Object.prototype.hasOwnProperty.call(this.trackedModels.h,e._serializeId)&&(n=e._serializeId,t=this.trackedModels,Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],n=e._serializeId,t=this.deserializedMap,Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],e.offModelDirty($bind(this,this.explicitModelDirty)),e.offObservedDirty($bind(this,this.modelDirty)),e.offDestroy($bind(this,this.trackedModelDestroyed)),this.destroyModelOnUntrack)&&e.destroy()},encodeValue:function(e){return JSON.stringify(e)},decodeValue:function(e){return JSON.parse(e)},trackedModelDestroyed:function(e){var c=this;this.willCleanDestroyedTrackedModels||(this.willCleanDestroyedTrackedModels=!0,Us.backend,he.app._onceImmediate(function(){for(var e=[],n=c.trackedModels.h,t=Object.keys(n),i=t.length,l=0;l<i;){var s=t[l++];e.push(s)}for(var r=0;r<e.length;){var a,h,s=e[r],u=(++r,c.trackedModels.h[s]);u._lifecycleState<0&&(null==c.destroysToDispatch&&(c.destroysToDispatch=[]),-1==c.destroysToDispatch.indexOf(u._serializeId)&&c.destroysToDispatch.push(u._serializeId),Object.prototype.hasOwnProperty.call(c.trackedModels.h,u._serializeId))&&(h=u._serializeId,a=c.trackedModels,Object.prototype.hasOwnProperty.call(a.h,h)&&delete a.h[h],a=u._serializeId,h=c.deserializedMap,Object.prototype.hasOwnProperty.call(h.h,a)&&delete h.h[a],u.offModelDirty($bind(c,c.explicitModelDirty)),u.offObservedDirty($bind(c,c.modelDirty)),u.offDestroy($bind(c,c.trackedModelDestroyed)),c.destroyModelOnUntrack)&&u.destroy()}c.willCleanDestroyedTrackedModels=!1}))},cleanTrackingFromPrevSerializedMap:function(e){for(var n=[],e=e.h,t=Object.keys(e),i=t.length,l=0;l<i;){var s=t[l++];Object.prototype.hasOwnProperty.call(this.serializedMap.h,s)||n.push(s)}for(var r=0;r<n.length;){var a,h,s=n[r],u=(++r,this.trackedModels.h[s]);null!=u&&Object.prototype.hasOwnProperty.call(this.trackedModels.h,u._serializeId)&&(h=u._serializeId,a=this.trackedModels,Object.prototype.hasOwnProperty.call(a.h,h)&&delete a.h[h],a=u._serializeId,h=this.deserializedMap,Object.prototype.hasOwnProperty.call(h.h,a)&&delete h.h[a],u.offModelDirty($bind(this,this.explicitModelDirty)),u.offObservedDirty($bind(this,this.modelDirty)),u.offDestroy($bind(this,this.trackedModelDestroyed)),this.destroyModelOnUntrack)&&u.destroy()}},modelDirty:function(e,n){n?(this.dirtyModels.h[e._serializeId]=e,this.dirty=!0):e.observedDirty=!1},explicitModelDirty:function(e){this.dirtyModels.h[e._serializeId]=e,this.dirty=!0},synchronizeIfNeeded:function(){var e=he.app.frame;this.lastCheckedFrame!=e&&(this.lastCheckedFrame=e,this.synchronize())},synchronize:function(){if(this.dirty&&!(0<this.paused)){this.dirty=!1;var e=[];if(null!=this.destroysToDispatch)for(;0<this.destroysToDispatch.length;)e.push(new xe(this.destroysToDispatch.shift(),2,null,null));for(var n=this.dirtyModels.h,t=Object.keys(n),i=t.length,l=0;l<i;){var s,r,a,h,u,c=t[l++],c=this.dirtyModels.h[c];0<=c._lifecycleState&&Object.prototype.hasOwnProperty.call(this.trackedModels.h,c._serializeId)&&(0!=c.dirty&&(c.dirty=!1),s=[this],r=[c._serializeId],a=[this.serializedMap.h[r[0]]],h=c._serializeId,u=this.serializedMap,Object.prototype.hasOwnProperty.call(u.h,h)&&delete u.h[h],W._serializedMap=this.serializedMap,W._onCheckSerializable=function(i){return function(e){var n=e._serializeId,t=i[0].trackedModels.h[n];null!=t&&t!=e&&(t=i[0].serializedMap,Object.prototype.hasOwnProperty.call(t.h,n))&&delete t.h[n]}}(s),W._onAddSerializable=function(c,o,_,d){return function(e){if(e instanceof tc){e.observedDirty=!1;var n=W._serializedMap.h[e._serializeId],t=n.props,i={},l=!1,s=0;if(e._serializeId==o[0]&&null!=c[0]&&null!=c[0].props)for(var s=1,r=c[0].props,a=0,h=N.fields(t);a<h.length;){var u=h[a];++a,qe.equal(N.field(t,u),N.field(r,u))||(l=!0,i[u]=_[0].encodeValue(N.field(t,u)))}else for(l=!0,a=0,h=N.fields(t);a<h.length;){u=h[a];++a,i[u]=_[0].encodeValue(N.field(t,u))}l&&(s=new xe(n.id,s,n.type,i),d[0].push(s)),0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(_[0].trackedModels.h,e._serializeId)&&(_[0].trackedModels.h[e._serializeId]=e,(_[0].deserializedMap.h[e._serializeId]=e).onModelDirty(_[0],$bind(b=_[0],b.explicitModelDirty)),e.onObservedDirty(_[0],$bind(b=_[0],b.modelDirty)),e.onceDestroy(_[0],$bind(b=_[0],b.trackedModelDestroyed)))}}}(a,r,s,[e]),W.serializeValue(c),W._onCheckSerializable=null,W._onAddSerializable=null,W._serializedMap=null)}this.dirtyModels=new z,0<e.length&&this.emitChangeset(new ve(e))}},shareAll:function(e,n){null==e&&(e=!1);var c=this,o=this.serializedMap,_=[];W._serializedMap=new z,W._onAddSerializable=e?function(e){if(e instanceof tc){e.observedDirty=!1,0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(c.trackedModels.h,e._serializeId)&&(c.trackedModels.h[e._serializeId]=e,(c.deserializedMap.h[e._serializeId]=e).onModelDirty(c,$bind(c,c.explicitModelDirty)),e.onObservedDirty(c,$bind(c,c.modelDirty)),e.onceDestroy(c,$bind(c,c.trackedModelDestroyed)));var n=o.h[e._serializeId],e=W._serializedMap.h[e._serializeId],t=e.props,i={},l=!1,s=0;if(null!=n&&null!=n.props)for(var s=1,r=n.props,a=0,h=N.fields(t);a<h.length;){var u=h[a];++a,qe.equal(N.field(t,u),N.field(r,u))||(l=!0,i[u]=c.encodeValue(N.field(t,u)))}else for(l=!0,a=0,h=N.fields(t);a<h.length;){u=h[a];++a,i[u]=c.encodeValue(N.field(t,u))}l&&(n=new xe(e.id,s,e.type,i),_.push(n))}}:function(e){if(e instanceof tc){e.observedDirty=!1,0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(c.trackedModels.h,e._serializeId)&&(c.trackedModels.h[e._serializeId]=e,(c.deserializedMap.h[e._serializeId]=e).onModelDirty(c,$bind(c,c.explicitModelDirty)),e.onObservedDirty(c,$bind(c,c.modelDirty)),e.onceDestroy(c,$bind(c,c.trackedModelDestroyed)));for(var n={},e=W._serializedMap.h[e._serializeId],t=e.props,i=0,l=N.fields(t);i<l.length;){var s=l[i];++i,n[s]=c.encodeValue(N.field(t,s))}e=new xe(e.id,0,e.type,n);_.push(e)}},W.serializeValue(this.entity),this.serializedMap=W._serializedMap,W._onAddSerializable=null,W._serializedMap=null,this.cleanTrackingFromPrevSerializedMap(o),Us.backend;he.app._onceImmediate(function(){if(null!=c.destroysToDispatch)for(;0<c.destroysToDispatch.length;)_.push(new xe(c.destroysToDispatch.shift(),2,null,null));null!=n&&n(_),0<_.length&&c.emitChangeset(new ve(_))})},receiveShared:function(e){W._serializedMap=this.serializedMap,W._deserializedMap=this.deserializedMap,W._createdInstances=[];try{for(var n=0,t=e.items;n<t.length;){var i=t[n];switch(++n,i.action){case 0:case 1:if(null==(u=this.serializedMap.h[i.id])&&(u={id:i.id,type:i.type,props:{}},this.serializedMap.h[i.id]=u),null!=i.props)for(var l=0,s=N.fields(i.props);l<s.length;){var r=s[l];++l,u.props[r]=this.decodeValue(N.field(i.props,r))}}}for(n=0,t=e.items;n<t.length;){i=t[n];switch(++n,i.action){case 0:var a,h=this.deserializedMap.h[i.id],u=this.serializedMap.h[i.id],c=W.deserializeValue(u,h,!0);h!=c&&null!=c&&c instanceof tc&&0<=(a=c)._lifecycleState&&!Object.prototype.hasOwnProperty.call(this.trackedModels.h,a._serializeId)&&(this.trackedModels.h[a._serializeId]=a,(this.deserializedMap.h[a._serializeId]=a).onModelDirty(this,$bind(this,this.explicitModelDirty)),a.onObservedDirty(this,$bind(this,this.modelDirty)),a.onceDestroy(this,$bind(this,this.trackedModelDestroyed)));break;case 1:var o=this.deserializedMap.h[i.id],_=this.serializedMap.h[i.id],d={};if(null!=i.props)for(l=0,s=N.fields(i.props);l<s.length;){var r=s[l],b=(++l,N.field(_.props,r));d[r]=b}var g,O=W.deserializeValue({id:i.id,type:_.type,props:d},o,!0);o!=O&&null!=O&&O instanceof tc&&0<=(g=O)._lifecycleState&&!Object.prototype.hasOwnProperty.call(this.trackedModels.h,g._serializeId)&&(this.trackedModels.h[g._serializeId]=g,(this.deserializedMap.h[g._serializeId]=g).onModelDirty(this,$bind(this,this.explicitModelDirty)),g.onObservedDirty(this,$bind(this,this.modelDirty)),g.onceDestroy(this,$bind(this,this.trackedModelDestroyed)));break;case 2:var f=this.deserializedMap.h[i.id];f instanceof tc&&(null!=f?f.destroy():(Us.backend,he.app.logger.warning("Trying to destroy item "+i.id+", but item was not found!",{fileName:"tracker/ShareModel.hx",lineNumber:435,className:"tracker.ShareModel",methodName:"receiveShared"})))}}}catch(n){Al.lastError=n;e=Q.caught(n).unwrap();Us.backend;he.app.logger.error("Failed to receive shared data: "+V.string(e),{fileName:"tracker/ShareModel.hx",lineNumber:444,className:"tracker.ShareModel",methodName:"receiveShared"})}for(var p=W._createdInstances,n=(W._createdInstances=null,0),t=p.length;n<t;){var m=p[n++],w=N.field(m,"_autorunMarkedMethods");null!=w&&w.apply(m,[])}W._serializedMap=null,W._deserializedMap=null},serializeModel:function(e,c){var o=this,_=e._serializeId,d=this.serializedMap.h[_],n=e._serializeId,t=this.serializedMap;Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],W._serializedMap=this.serializedMap,W._onCheckSerializable=function(e){var n=e._serializeId,t=o.trackedModels.h[n];null!=t&&t!=e&&(t=o.serializedMap,Object.prototype.hasOwnProperty.call(t.h,n))&&delete t.h[n]},W._onAddSerializable=function(e){if(e instanceof tc){e.observedDirty=!1;var n=W._serializedMap.h[e._serializeId],t=n.props,i={},l=!1,s=0;if(e._serializeId==_&&null!=d&&null!=d.props)for(var s=1,r=d.props,a=0,h=N.fields(t);a<h.length;){var u=h[a];++a,qe.equal(N.field(t,u),N.field(r,u))||(l=!0,i[u]=o.encodeValue(N.field(t,u)))}else for(l=!0,a=0,h=N.fields(t);a<h.length;){u=h[a];++a,i[u]=o.encodeValue(N.field(t,u))}l&&(s=new xe(n.id,s,n.type,i),c.push(s)),0<=e._lifecycleState&&!Object.prototype.hasOwnProperty.call(o.trackedModels.h,e._serializeId)&&(o.trackedModels.h[e._serializeId]=e,(o.deserializedMap.h[e._serializeId]=e).onModelDirty(o,$bind(o,o.explicitModelDirty)),e.onObservedDirty(o,$bind(o,o.modelDirty)),e.onceDestroy(o,$bind(o,o.trackedModelDestroyed)))}},W.serializeValue(e),W._onCheckSerializable=null,W._onAddSerializable=null,W._serializedMap=null},setEntity:function(e){this.entity=e instanceof tc?e:null},getEntity:function(){return this.entity},initializerName:null,unbindEvents:function(){l.prototype.unbindEvents.call(this),this.offChangeset()},__class__:ye,__properties__:$extend(l.prototype.__properties__,{get_model:"get_model"})}),function(){}),xs=((L["tracker.Tracker"]=Us).__name__="tracker.Tracker",function(){});function $getIterator(e){return e instanceof Array?new ls(e):e.iterator()}function $bind(e,n){var t;return null==n?null:(null==n.__id__&&(n.__id__=ie.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:t=e.hx__closures__[n.__id__],null==t&&(t=n.bind(e),e.hx__closures__[n.__id__]=t),t)}(L["tracker.Utils"]=xs).__name__="tracker.Utils",xs.uniformFrequencyList=function(e,n,t){for(var i=[],l=[],s=0,r=e.length;s<r;)l[o=s++]=0;for(s=0,r=n.length;s<r;)l[o=s++]+=n[o];for(s=0,r=t;s<r;){s++;for(var a=0,h=0,u=0,c=e.length;u<c;){var o,_=l[o=u++];h<_&&(a=o,h=_)}i.push(e[a]),--l[a];for(var d=0,b=n.length;d<b;){var g=d++;l[g]+=n[g]}}return i},xs.uniqueId=function(){switch(xs._nextUniqueIntCursor){case 0:xs._nextUniqueInt0=(xs._nextUniqueInt0+1)%2147483647;break;case 1:xs._nextUniqueInt1=(xs._nextUniqueInt1+1)%2147483647;break;case 2:xs._nextUniqueInt2=(xs._nextUniqueInt2+1)%2147483647;break;case 3:xs._nextUniqueInt3=(xs._nextUniqueInt3+1)%2147483647}xs._nextUniqueIntCursor=(xs._nextUniqueIntCursor+1)%4;var e,n=xs._nextUniqueInt0,t=(n=null==n?2147483646*Math.random()|0:n)%62|0,i=n/62|0;e=0<i?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(l=0<(i=n/62|0)?(s=xs.base62Id(i))+(r=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(s=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(s)))+(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(l=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(l));var l,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;l=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(s=0<(i=n/62|0)?(r=xs.base62Id(i))+(a=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(r=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(r)))+(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(s=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(s));var s,t=(n=null==(n=xs._nextUniqueInt1)?2147483646*Math.random()|0:n)%62|0;s=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(r=0<(i=n/62|0)?(a=xs.base62Id(i))+(h=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(a=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(a)))+(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(r=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(r));var r,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;r=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(a=0<(i=n/62|0)?(h=xs.base62Id(i))+(u=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(h=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(h)))+(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(a=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(a));var a,t=(n=null==(n=xs._nextUniqueInt2)?2147483646*Math.random()|0:n)%62|0;a=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(h=0<(i=n/62|0)?(u=xs.base62Id(i))+(d=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(u=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(u)))+(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(h=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(h));var h,t=(n=null==(n=null)?2147483646*Math.random()|0:n)%62|0;h=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(u=0<(i=n/62|0)?(d=xs.base62Id(i))+(o=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(d=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(d)))+(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(u=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(u));var u,c,o,_,d,t=(n=null==(n=xs._nextUniqueInt3)?2147483646*Math.random()|0:n)%62|0;return d=e+"-"+l+"-"+s+"-"+r+"-"+a+"-"+h+"-"+(u=0<(i=n/62|0)?(c=(n=null==(n=i)?2147483646*Math.random()|0:n)%62|0,(d=0<(i=n/62|0)?(o=xs.base62Id(i))+(9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0)):(o=9<c?(90<(_=c-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(c).charAt(0),V.string(o)))+(o=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0))):(d=9<t?(90<(_=t-10+65)&&(_+=6),String.fromCodePoint(_)):V.string(t).charAt(0),V.string(d)))},xs.base62Id=function(e){var n,t,i=(e=null==e?2147483646*Math.random()|0:e)%62|0,e=e/62|0;return 0<e?(n=xs.base62Id(e))+(9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0)):(n=9<i?(90<(t=i-10+65)&&(t+=6),String.fromCodePoint(t)):(null==i?"null":""+i).charAt(0),V.string(n))},xs.encodeChangesetData=function(e){return e.length+":"+e},xs.decodeChangesetData=function(e){for(var n=new z,t=null,i=[];;){var l=e.indexOf(":");if(-1==l)break;var s=V.parseInt(h.substr(e,0,l)),r=h.substr(e,l+1,s);i.push(r),e=h.substr(e,l+1+s,null)}for(var a=i.length-1;0<=a;){var u=i[a];if(0==a)for(var c=new El(u),t=c.unserialize(),c=c.unserialize().h,o=c,_=Object.keys(c),d=_.length,b=0;b<d;){var g=o[_[b++]],O=g.id;Object.prototype.hasOwnProperty.call(n.h,O)||(n.h[O]=g)}else for(var f=new El(u).unserialize(),p=0;p<f.length;){var m=f[p],w=(++p,m.id);Object.prototype.hasOwnProperty.call(n.h,w)||(n.h[w]=m)}--a}return{serialized:t,serializedMap:n}},xs.equalAny=function(e,n){return e==n},ie.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(h.now=performance.now.bind(performance)),L.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:L.String=String,enumerable:!1,writable:!0}),String.__name__="String",(L.Array=Array).__name__="Array",(Date.prototype.__class__=L.Date=Date).__name__="Date";var Ts={},Ds={},As=Number,Ss=Boolean,Es={},Ms={};da.bind(),ys.__toStr={}.toString,null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=ne.sliceImpl),g.escapeRe=new RegExp("[.*+?^${}()|[\\]\\\\]","g"),n._decomposed1=new m,n._decomposed2=new m,n._tmp=new n,p.pool=new o,q.DEPTH_FACTOR=1e3,q.DEPTH_MARGIN=.01,q.FLAG_NOT_ACTIVE=1,q.FLAG_VISIBLE_WHEN_ACTIVE=2,q.FLAG_TOUCHABLE_WHEN_ACTIVE=4,q.FLAG_IS_HIT_VISUAL=8,q._degToRad=.017453292519943295,q._matrix=new n,q._point=new p,q._minDepth=0,q._maxDepth=0,r.FLAG_TRANSPARENT=16,r.FLAG_ROTATE_FRAME=32,r._matrix=q._matrix,r._degToRad=.017453292519943295,v.__meta__={fields:{unobservedStatus:{observe:null}}},F.Element=0,F.PCData=1,F.CData=2,F.Comment=3,F.DocType=4,F.ProcessingInstruction=5,F.Document=6,se.ASEPRITE_MAGIC=42464,se.SIZE=128,_e.BYTE_SIZE=16,_e.MAGIC=61946,be.DB32=[255,572536063,1160264959,1715024383,-1890173953,-546232577,-643799297,-289170689,-68012289,-1713024769,1790849279,932474623,1265184767,1380656383,842807807,1061123327,811631359,1533993471,1671167999,1607329023,-874775297,-1,-1683113985,-2072082433,1768581887,1498829567,1984072447,-1405996289,-648584193,-679757057,-1885910273,-1972424449],we.BYTE_SIZE=6,X.SIZE=6,Re.instances=[],Re.all=[],Re.allDirs=[],Re.allByName=new z,Re.allDirsByName=new z,Re.customAssetKinds=new z,Re._instances=[],da.all=["atlas/SunnyLand_by_Ansimuz-extended.png","WorldMap_GridVania_layout.ldtk","gaussianBlur.frag","outline.frag","innerLight.frag","pixelArt.vert","fxaa.vert","blur.vert","blur.frag","tintBlack.vert","glow.vert","bloom.vert","textured.frag","bloom.frag","glow.frag","textured.vert","outline.vert","fxaa.frag","pixelArt.frag","msdf.frag","tintBlack.frag","msdf.vert","RobotoMedium.png","RobotoMedium.fnt","white.png"],da.allDirs=["atlas"],da.allByName=((e=new z).h.white=["white.png"],e.h.tintBlack=["tintBlack.vert","tintBlack.frag"],e.h.textured=["textured.frag","textured.vert"],e.h.pixelArt=["pixelArt.vert","pixelArt.frag"],e.h.outline=["outline.frag","outline.vert"],e.h.msdf=["msdf.frag","msdf.vert"],e.h.innerLight=["innerLight.frag"],e.h.glow=["glow.vert","glow.frag"],e.h.gaussianBlur=["gaussianBlur.frag"],e.h.fxaa=["fxaa.vert","fxaa.frag"],e.h.blur=["blur.vert","blur.frag"],e.h.bloom=["bloom.vert","bloom.frag"],e.h["atlas/SunnyLand_by_Ansimuz-extended"]=["atlas/SunnyLand_by_Ansimuz-extended.png"],e.h.WorldMap_GridVania_layout=["WorldMap_GridVania_layout.ldtk"],e.h.RobotoMedium=["RobotoMedium.png","RobotoMedium.fnt"],e),da.allDirsByName=((e=new z).h.atla=["atlas"],e),Fe.WORLD_MAP_GRID_VANIA_LAYOUT="tilemap:WorldMap_GridVania_layout",ga.filterIdsByBus=[],ga.activeBusFilters=[],ga.busFilterReadyCallbacks=[],ga.postWorkletSyncCallbacks=[],pa.GAMEPAD_STORAGE_SIZE=32,K.MAX_VERTS_SIZE=65536,K.MAX_INDICES=16384,K.MAX_BUFFERS=64,K.ATTRIBUTE_POS=0,K.ATTRIBUTE_UV=1,K.ATTRIBUTE_COLOR=2,K._posListArray=[],K._indiceListArray=[],K._uvListArray=[],K._colorListArray=[],K._activeTextureSlot=0,K._batchMultiTexture=!1,K._posSize=0,K._customGLBuffers=[],K._didUpdateCurrentRenderTarget=!1,K._projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),K._modelViewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),K._modelViewTransform=new n,K._renderTargetTransform=new n,K._viewportDensity=1,K._viewportWidth=0,K._viewportHeight=0,K._blackTransparentColor=(e=0)|(255<(e=null==e?255:e)?255:e<0?0:e)<<24,K._whiteTransparentColor=16777215|(255<(e=null==(e=0)?255:e)?255:e<0?0:e)<<24,K._maxVerts=0,K._vertexSize=0,K._numIndices=0,K._numPos=0,K._posIndex=0,K._floatAttributesSize=0,K._numUVs=0,K._uvIndex=0,K._numColors=0,K._colorIndex=0,K._drawingInStencilBuffer=!1,K._primitiveType=4,We.RE_OPERA=new g("OPR/([0-6].)","g"),We.RE_SAFARI_VERSION=new g("Version/(.*?) ",""),Ba.lastResizeTime=-1,Ba.lastNewWidth=-1,Ba.lastNewHeight=-1,Ba.readyToDisplay=!1,Ba.resizing=0,Ba.containerWidth=0,Ba.containerHeight=0,Ba.containerPixelRatio=0,Ba._displayReady=!1,ze.SHADER_ATTRIBUTES=["vertexPosition","vertexTCoord","vertexColor"],ze.SHADER_ATTRIBUTES_MULTITEXTURE=["vertexPosition","vertexTCoord","vertexColor","vertexTextureId"],ze._maxIfStatementsByFragmentShader=-1,Ye._maxTexturesByBatch=-1,f.ALLOC_STEP=10,f.dynPool10=new f(10),f.dynPool100=new f(100),f.dynPool1000=new f(1e3),f.dynPool10000=new f(1e4),f.dynPool100000=new f(1e5),f.didNotifyLargePool=!1,a0._float_r=0,a0._float_g=0,a0._float_b=0,a0.A_MASK=-16777216,a0.RGB_MASK=16777215,a0.A_SHIFT=24,i0.__meta__={fields:{unobservedStatus:{observe:null}}},en.__meta__={fields:{unobservedAtlas:{observe:null},unobservedText:{observe:null}}},u0.SAMPLE_STEP_SIZE=(p0._nextFilterId=1)/((u0.SPLINE_TABLE_SIZE=11)-1),u0.NEWTON_ITERATIONS=4,u0.NEWTON_MIN_SLOPE=.001,u0.SUBDIVISION_PRECISION=1e-7,u0.SUBDIVISION_MAX_ITERATIONS=10,u0.TWO_THIRD=.6666666666666666,u0.CACHE_SIZE=1e4,u0.numCachedInstances=0,ln.__meta__={fields:{unobservedBytes:{observe:null}}},sn._nextInternalId=0,E0._nextId=1,E0._nextIndex=1,E0._fieldInfo={name:{type:"String"},id:{type:"String"},index:{type:"Int"}},E.NONE=-1,E.WHITE=16777215,E.GRAY=8421504,E.BLACK=0,E.GREEN=32768,E.LIME=65280,E.YELLOW=16776960,E.ORANGE=16753920,E.RED=16711680,E.PURPLE=8388736,E.BLUE=255,E.BROWN=9127187,E.PINK=16761035,E.MAGENTA=16711935,E.CYAN=65535,E.CORNFLOWERBLUE=6591981,E.MEDIUMVIOLETRED=13047173,E.DEEPPINK=16716947,E.PALEVIOLETRED=14381203,E.HOTPINK=16738740,E.LIGHTPINK=16758465,E.DARKRED=9109504,E.FIREBRICK=11674146,E.CRIMSON=14423100,E.INDIANRED=13458524,E.LIGHTCORAL=15761536,E.SALMON=16416882,E.DARKSALMON=15308410,E.LIGHTSALMON=16752762,E.ORANGERED=16729344,E.TOMATO=16737095,E.DARKORANGE=16747520,E.CORAL=16744272,E.DARKKHAKI=12433259,E.GOLD=16766720,E.KHAKI=15787660,E.PEACHPUFF=16767673,E.PALEGOLDENROD=15657130,E.MOCCASIN=16770229,E.PAPAYAWHIP=16773077,E.LEMONCHIFFON=16775885,E.LIGHTYELLOW=16777184,E.SIENNA=10506797,E.CHOCOLATE=13789470,E.PERU=13468991,E.TAN=13808780,E.DARKOLIVEGREEN=5597999,E.OLIVE=8421376,E.TEAL=32896,E.TURQUOISE=4251856,E.NAVY=128,E.INDIGO=4915330,E.ORCHID=14315734,E.LAVENDER=15132410,E.AZURE=15794175,E.IVORY=16777200,E.DIMGREY=6908265,E.SLATEGREY=7372944,E.SNOW=16775930,E.colorLookup=((e=new z).h.NONE=-1,e.h.WHITE=16777215,e.h.GRAY=8421504,e.h.BLACK=0,e.h.GREEN=32768,e.h.LIME=65280,e.h.YELLOW=16776960,e.h.ORANGE=16753920,e.h.RED=16711680,e.h.PURPLE=8388736,e.h.BLUE=255,e.h.BROWN=9127187,e.h.PINK=16761035,e.h.MAGENTA=16711935,e.h.CYAN=65535,e.h.CORNFLOWERBLUE=6591981,e.h.MEDIUMVIOLETRED=13047173,e.h.DEEPPINK=16716947,e.h.PALEVIOLETRED=14381203,e.h.HOTPINK=16738740,e.h.LIGHTPINK=16758465,e.h.DARKRED=9109504,e.h.FIREBRICK=11674146,e.h.CRIMSON=14423100,e.h.INDIANRED=13458524,e.h.LIGHTCORAL=15761536,e.h.SALMON=16416882,e.h.DARKSALMON=15308410,e.h.LIGHTSALMON=16752762,e.h.ORANGERED=16729344,e.h.TOMATO=16737095,e.h.DARKORANGE=16747520,e.h.CORAL=16744272,e.h.DARKKHAKI=12433259,e.h.GOLD=16766720,e.h.KHAKI=15787660,e.h.PEACHPUFF=16767673,e.h.PALEGOLDENROD=15657130,e.h.MOCCASIN=16770229,e.h.PAPAYAWHIP=16773077,e.h.LEMONCHIFFON=16775885,e.h.LIGHTYELLOW=16777184,e.h.SIENNA=10506797,e.h.CHOCOLATE=13789470,e.h.PERU=13468991,e.h.TAN=13808780,e.h.DARKOLIVEGREEN=5597999,e.h.OLIVE=8421376,e.h.TEAL=32896,e.h.TURQUOISE=4251856,e.h.NAVY=128,e.h.INDIGO=4915330,e.h.ORCHID=14315734,e.h.LAVENDER=15132410,e.h.AZURE=15794175,e.h.IVORY=16777200,e.h.DIMGREY=6908265,e.h.SLATEGREY=7372944,e.h.SNOW=16775930,e),E._hsluvTuple=[0,0,0],E._hsluvResult=[0,0,0],E._hsluvCacheMap=new rn,E._hsluvCacheValues=[],fn.__meta__={fields:{unobservedDatabase:{observe:null}}},Y0._emptyArray=[],vn.fieldInfoMap=new z,yn.metaMap=new z,yn.metaMapRecursive=new z,Un.__meta__={fields:{unobservedRenderTexture:{observe:null}}},Un._matrix=q._matrix,xn.__meta__={fields:{unobservedFont:{observe:null}}},hb.basicTypes=((e=new z).h.Bool=!0,e.h.Int=!0,e.h.Float=!0,e.h.String=!0,e.h["ceramic.Color"]=!0,e.h["ceramic.ScriptContent"]=!0,e),hb.cachedFragmentData=new z,hb._trackResult=new gb,hb._keyframeResult=new gb,hb._usedKeyframes=[],Tn.__meta__={fields:{unobservedFragments:{observe:null}}},An._lastDecodeIncomplete=!15,Sn.__meta__={fields:{unobservedTexture:{observe:null}}},kn.GAMEPAD_STORAGE_SIZE=32,Kn.NO_VALUE=0,Kn.NULL_VALUE=1,Kn.RESERVED_GAP=2,a.UNKNOWN=0,a.ENTER=13,a.ESCAPE=27,a.BACKSPACE=8,a.TAB=9,a.SPACE=32,a.EXCLAIM=33,a.QUOTEDBL=34,a.HASH=35,a.PERCENT=37,a.DOLLAR=36,a.AMPERSAND=38,a.QUOTE=39,a.LEFTPAREN=40,a.RIGHTPAREN=41,a.ASTERISK=42,a.PLUS=43,a.COMMA=44,a.MINUS=45,a.PERIOD=46,a.SLASH=47,a.KEY_0=48,a.KEY_1=49,a.KEY_2=50,a.KEY_3=51,a.KEY_4=52,a.KEY_5=53,a.KEY_6=54,a.KEY_7=55,a.KEY_8=56,a.KEY_9=57,a.COLON=58,a.SEMICOLON=59,a.LESS=60,a.EQUALS=61,a.GREATER=62,a.QUESTION=63,a.AT=64,a.LEFTBRACKET=91,a.BACKSLASH=92,a.RIGHTBRACKET=93,a.CARET=94,a.UNDERSCORE=95,a.BACKQUOTE=96,a.KEY_A=97,a.KEY_B=98,a.KEY_C=99,a.KEY_D=100,a.KEY_E=101,a.KEY_F=102,a.KEY_G=103,a.KEY_H=104,a.KEY_I=105,a.KEY_J=106,a.KEY_K=107,a.KEY_L=108,a.KEY_M=109,a.KEY_N=110,a.KEY_O=111,a.KEY_P=112,a.KEY_Q=113,a.KEY_R=114,a.KEY_S=115,a.KEY_T=116,a.KEY_U=117,a.KEY_V=118,a.KEY_W=119,a.KEY_X=120,a.KEY_Y=121,a.KEY_Z=122,a.CAPSLOCK=1073741881,a.F1=1073741882,a.F2=1073741883,a.F3=1073741884,a.F4=1073741885,a.F5=1073741886,a.F6=1073741887,a.F7=1073741888,a.F8=1073741889,a.F9=1073741890,a.F10=1073741891,a.F11=1073741892,a.F12=1073741893,a.PRINTSCREEN=1073741894,a.SCROLLLOCK=1073741895,a.PAUSE=1073741896,a.INSERT=1073741897,a.HOME=1073741898,a.PAGEUP=1073741899,a.DELETE=127,a.END=1073741901,a.PAGEDOWN=1073741902,a.RIGHT=1073741903,a.LEFT=1073741904,a.DOWN=1073741905,a.UP=1073741906,a.NUMLOCKCLEAR=1073741907,a.KP_DIVIDE=1073741908,a.KP_MULTIPLY=1073741909,a.KP_MINUS=1073741910,a.KP_PLUS=1073741911,a.KP_ENTER=1073741912,a.KP_1=1073741913,a.KP_2=1073741914,a.KP_3=1073741915,a.KP_4=1073741916,a.KP_5=1073741917,a.KP_6=1073741918,a.KP_7=1073741919,a.KP_8=1073741920,a.KP_9=1073741921,a.KP_0=1073741922,a.KP_PERIOD=1073741923,a.APPLICATION=1073741925,a.POWER=1073741926,a.KP_EQUALS=1073741927,a.F13=1073741928,a.F14=1073741929,a.F15=1073741930,a.F16=1073741931,a.F17=1073741932,a.F18=1073741933,a.F19=1073741934,a.F20=1073741935,a.F21=1073741936,a.F22=1073741937,a.F23=1073741938,a.F24=1073741939,a.EXECUTE=1073741940,a.HELP=1073741941,a.MENU=1073741942,a.SELECT=1073741943,a.STOP=1073741944,a.AGAIN=1073741945,a.UNDO=1073741946,a.CUT=1073741947,a.COPY=1073741948,a.PASTE=1073741949,a.FIND=1073741950,a.MUTE=1073741951,a.VOLUMEUP=1073741952,a.VOLUMEDOWN=1073741953,a.KP_COMMA=1073741957,a.KP_EQUALSAS400=1073741958,a.ALTERASE=1073741977,a.SYSREQ=1073741978,a.CANCEL=1073741979,a.CLEAR=1073741980,a.PRIOR=1073741981,a.RETURN2=1073741982,a.SEPARATOR=1073741983,a.OUT=1073741984,a.OPER=1073741985,a.CLEARAGAIN=1073741986,a.CRSEL=1073741987,a.EXSEL=1073741988,a.KP_00=1073742e3,a.KP_000=1073742001,a.THOUSANDSSEPARATOR=1073742002,a.DECIMALSEPARATOR=1073742003,a.CURRENCYUNIT=1073742004,a.CURRENCYSUBUNIT=1073742005,a.KP_LEFTPAREN=1073742006,a.KP_RIGHTPAREN=1073742007,a.KP_LEFTBRACE=1073742008,a.KP_RIGHTBRACE=1073742009,a.KP_TAB=1073742010,a.KP_BACKSPACE=1073742011,a.KP_A=1073742012,a.KP_B=1073742013,a.KP_C=1073742014,a.KP_D=1073742015,a.KP_E=1073742016,a.KP_F=1073742017,a.KP_XOR=1073742018,a.KP_POWER=1073742019,a.KP_PERCENT=1073742020,a.KP_LESS=1073742021,a.KP_GREATER=1073742022,a.KP_AMPERSAND=1073742023,a.KP_DBLAMPERSAND=1073742024,a.KP_VERTICALBAR=1073742025,a.KP_DBLVERTICALBAR=1073742026,a.KP_COLON=1073742027,a.KP_HASH=1073742028,a.KP_SPACE=1073742029,a.KP_AT=1073742030,a.KP_EXCLAM=1073742031,a.KP_MEMSTORE=1073742032,a.KP_MEMRECALL=1073742033,a.KP_MEMCLEAR=1073742034,a.KP_MEMADD=1073742035,a.KP_MEMSUBTRACT=1073742036,a.KP_MEMMULTIPLY=1073742037,a.KP_MEMDIVIDE=1073742038,a.KP_PLUSMINUS=1073742039,a.KP_CLEAR=1073742040,a.KP_CLEARENTRY=1073742041,a.KP_BINARY=1073742042,a.KP_OCTAL=1073742043,a.KP_DECIMAL=1073742044,a.KP_HEXADECIMAL=1073742045,a.LCTRL=1073742048,a.LSHIFT=1073742049,a.LALT=1073742050,a.LMETA=1073742051,a.RCTRL=1073742052,a.RSHIFT=1073742053,a.RALT=1073742054,a.RMETA=1073742055,a.MODE=1073742081,a.AUDIONEXT=1073742082,a.AUDIOPREV=1073742083,a.AUDIOSTOP=1073742084,a.AUDIOPLAY=1073742085,a.AUDIOMUTE=1073742086,a.MEDIASELECT=1073742087,a.WWW=1073742088,a.MAIL=1073742089,a.CALCULATOR=1073742090,a.COMPUTER=1073742091,a.AC_SEARCH=1073742092,a.AC_HOME=1073742093,a.AC_BACK=1073742094,a.AC_FORWARD=1073742095,a.AC_STOP=1073742096,a.AC_REFRESH=1073742097,a.AC_BOOKMARKS=1073742098,a.BRIGHTNESSDOWN=1073742099,a.BRIGHTNESSUP=1073742100,a.DISPLAYSWITCH=1073742101,a.KBDILLUMTOGGLE=1073742102,a.KBDILLUMDOWN=1073742103,a.KBDILLUMUP=1073742104,a.EJECT=1073742105,a.SLEEP=1073742106,Zn.None=0,Zn.Free=1,Zn.GridVania=2,Zn.LinearHorizontal=3,Zn.LinearVertical=4,tt.Rectangle=1,tt.Ellipse=2,tt.Tile=3,tt.Cross=4,it.Cover=1,it.FitInside=2,it.Repeat=3,it.Stretch=4,it.FullSizeCropped=5,it.FullSizeUncropped=6,it.NineSlice=7,rt.IntGrid=1,rt.Entities=2,rt.Tiles=3,rt.AutoLayer=4,ot.None=0,ot.LdtkIcons=1,gt.None=0,gt.Horizontal=1,gt.Vertical=2,Ot.Single=1,Ot.Stamp=2,vt.North=1,vt.West=2,vt.South=3,vt.East=4,vt.NorthEast=5,vt.NorthWest=6,vt.SouthEast=7,vt.SouthWest=8,y.TO_STRING_MAX_ITEM_LENGTH=128,y.HIDDEN_VALUE="...",y._objectToStringCount=0,Tt._hasElectronRunner=!1,Tt.didInitOnce=!1,r1._matrix=q._matrix,kt.exec__execDidLogError=!1,kt._isWindowsValue=0,kt._execDidLogError=!1,Rt._nextIndex=1,c.MASK=1073741824,c.UNKNOWN=0,c.KEY_A=4,c.KEY_B=5,c.KEY_C=6,c.KEY_D=7,c.KEY_E=8,c.KEY_F=9,c.KEY_G=10,c.KEY_H=11,c.KEY_I=12,c.KEY_J=13,c.KEY_K=14,c.KEY_L=15,c.KEY_M=16,c.KEY_N=17,c.KEY_O=18,c.KEY_P=19,c.KEY_Q=20,c.KEY_R=21,c.KEY_S=22,c.KEY_T=23,c.KEY_U=24,c.KEY_V=25,c.KEY_W=26,c.KEY_X=27,c.KEY_Y=28,c.KEY_Z=29,c.KEY_1=30,c.KEY_2=31,c.KEY_3=32,c.KEY_4=33,c.KEY_5=34,c.KEY_6=35,c.KEY_7=36,c.KEY_8=37,c.KEY_9=38,c.KEY_0=39,c.ENTER=40,c.ESCAPE=41,c.BACKSPACE=42,c.TAB=43,c.SPACE=44,c.MINUS=45,c.EQUALS=46,c.LEFTBRACKET=47,c.RIGHTBRACKET=48,c.BACKSLASH=49,c.NONUSHASH=50,c.SEMICOLON=51,c.APOSTROPHE=52,c.GRAVE=53,c.COMMA=54,c.PERIOD=55,c.SLASH=56,c.CAPSLOCK=57,c.F1=58,c.F2=59,c.F3=60,c.F4=61,c.F5=62,c.F6=63,c.F7=64,c.F8=65,c.F9=66,c.F10=67,c.F11=68,c.F12=69,c.PRINTSCREEN=70,c.SCROLLLOCK=71,c.PAUSE=72,c.INSERT=73,c.HOME=74,c.PAGEUP=75,c.DELETE=76,c.END=77,c.PAGEDOWN=78,c.RIGHT=79,c.LEFT=80,c.DOWN=81,c.UP=82,c.NUMLOCKCLEAR=83,c.KP_DIVIDE=84,c.KP_MULTIPLY=85,c.KP_MINUS=86,c.KP_PLUS=87,c.KP_ENTER=88,c.KP_1=89,c.KP_2=90,c.KP_3=91,c.KP_4=92,c.KP_5=93,c.KP_6=94,c.KP_7=95,c.KP_8=96,c.KP_9=97,c.KP_0=98,c.KP_PERIOD=99,c.NONUSBACKSLASH=100,c.APPLICATION=101,c.POWER=102,c.KP_EQUALS=103,c.F13=104,c.F14=105,c.F15=106,c.F16=107,c.F17=108,c.F18=109,c.F19=110,c.F20=111,c.F21=112,c.F22=113,c.F23=114,c.F24=115,c.EXECUTE=116,c.HELP=117,c.MENU=118,c.SELECT=119,c.STOP=120,c.AGAIN=121,c.UNDO=122,c.CUT=123,c.COPY=124,c.PASTE=125,c.FIND=126,c.MUTE=127,c.VOLUMEUP=128,c.VOLUMEDOWN=129,c.KP_COMMA=133,c.KP_EQUALSAS400=134,c.INTERNATIONAL1=135,c.INTERNATIONAL2=136,c.INTERNATIONAL3=137,c.INTERNATIONAL4=138,c.INTERNATIONAL5=139,c.INTERNATIONAL6=140,c.INTERNATIONAL7=141,c.INTERNATIONAL8=142,c.INTERNATIONAL9=143,c.LANG1=144,c.LANG2=145,c.LANG3=146,c.LANG4=147,c.LANG5=148,c.LANG6=149,c.LANG7=150,c.LANG8=151,c.LANG9=152,c.ALTERASE=153,c.SYSREQ=154,c.CANCEL=155,c.CLEAR=156,c.PRIOR=157,c.RETURN2=158,c.SEPARATOR=159,c.OUT=160,c.OPER=161,c.CLEARAGAIN=162,c.CRSEL=163,c.EXSEL=164,c.KP_00=176,c.KP_000=177,c.THOUSANDSSEPARATOR=178,c.DECIMALSEPARATOR=179,c.CURRENCYUNIT=180,c.CURRENCYSUBUNIT=181,c.KP_LEFTPAREN=182,c.KP_RIGHTPAREN=183,c.KP_LEFTBRACE=184,c.KP_RIGHTBRACE=185,c.KP_TAB=186,c.KP_BACKSPACE=187,c.KP_A=188,c.KP_B=189,c.KP_C=190,c.KP_D=191,c.KP_E=192,c.KP_F=193,c.KP_XOR=194,c.KP_POWER=195,c.KP_PERCENT=196,c.KP_LESS=197,c.KP_GREATER=198,c.KP_AMPERSAND=199,c.KP_DBLAMPERSAND=200,c.KP_VERTICALBAR=201,c.KP_DBLVERTICALBAR=202,c.KP_COLON=203,c.KP_HASH=204,c.KP_SPACE=205,c.KP_AT=206,c.KP_EXCLAM=207,c.KP_MEMSTORE=208,c.KP_MEMRECALL=209,c.KP_MEMCLEAR=210,c.KP_MEMADD=211,c.KP_MEMSUBTRACT=212,c.KP_MEMMULTIPLY=213,c.KP_MEMDIVIDE=214,c.KP_PLUSMINUS=215,c.KP_CLEAR=216,c.KP_CLEARENTRY=217,c.KP_BINARY=218,c.KP_OCTAL=219,c.KP_DECIMAL=220,c.KP_HEXADECIMAL=221,c.LCTRL=224,c.LSHIFT=225,c.LALT=226,c.LMETA=227,c.RCTRL=228,c.RSHIFT=229,c.RALT=230,c.RMETA=231,c.MODE=257,c.AUDIONEXT=258,c.AUDIOPREV=259,c.AUDIOSTOP=260,c.AUDIOPLAY=261,c.AUDIOMUTE=262,c.MEDIASELECT=263,c.WWW=264,c.MAIL=265,c.CALCULATOR=266,c.COMPUTER=267,c.AC_SEARCH=268,c.AC_HOME=269,c.AC_BACK=270,c.AC_FORWARD=271,c.AC_STOP=272,c.AC_REFRESH=273,c.AC_BOOKMARKS=274,c.BRIGHTNESSDOWN=275,c.BRIGHTNESSUP=276,c.DISPLAYSWITCH=277,c.KBDILLUMTOGGLE=278,c.KBDILLUMDOWN=279,c.KBDILLUMUP=280,c.EJECT=281,c.SLEEP=282,c.APP1=283,c.APP2=284,c.scanCodeNames=[null,null,null,null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","Enter","Escape","Backspace","Tab","Space","-","=","[","]","\\","#",";","'","`",",",".","/","CapsLock","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrintScreen","ScrollLock","Pause","Insert","Home","PageUp","Delete","End","PageDown","Right","Left","Down","Up","Numlock","Keypad /","Keypad *","Keypad -","Keypad +","Keypad Enter","Keypad 1","Keypad 2","Keypad 3","Keypad 4","Keypad 5","Keypad 6","Keypad 7","Keypad 8","Keypad 9","Keypad 0","Keypad .",null,"Application","Power","Keypad =","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Execute","Help","Menu","Select","Stop","Again","Undo","Cut","Copy","Paste","Find","Mute","VolumeUp","VolumeDown",null,null,null,"Keypad ,","Keypad = (AS400)",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"AltErase","SysReq","Cancel","Clear","Prior","Enter","Separator","Out","Oper","Clear / Again","CrSel","ExSel",null,null,null,null,null,null,null,null,null,null,null,"Keypad 00","Keypad 000","ThousandsSeparator","DecimalSeparator","CurrencyUnit","CurrencySubUnit","Keypad (","Keypad )","Keypad {","Keypad }","Keypad Tab","Keypad Backspace","Keypad A","Keypad B","Keypad C","Keypad D","Keypad E","Keypad F","Keypad XOR","Keypad ^","Keypad %","Keypad <","Keypad >","Keypad &","Keypad &&","Keypad |","Keypad ||","Keypad :","Keypad #","Keypad Space","Keypad @","Keypad !","Keypad MemStore","Keypad MemRecall","Keypad MemClear","Keypad MemAdd","Keypad MemSubtract","Keypad MemMultiply","Keypad MemDivide","Keypad +/-","Keypad Clear","Keypad ClearEntry","Keypad Binary","Keypad Octal","Keypad Decimal","Keypad Hexadecimal",null,null,"Left Ctrl","Left Shift","Left Alt","Left Meta","Right Ctrl","Right Shift","Right Alt","Right Meta",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ModeSwitch","AudioNext","AudioPrev","AudioStop","AudioPlay","AudioMute","MediaSelect","WWW","Mail","Calculator","Computer","AC Search","AC Home","AC Back","AC Forward","AC Stop","AC Refresh","AC Bookmarks","BrightnessDown","BrightnessUp","DisplaySwitch","KBDIllumToggle","KBDIllumDown","KBDIllumUp","Eject","Sleep"],Gt.NONE=0,Gt.PRELOAD=1,Gt.LOAD=2,Gt.CREATE=3,Gt.FADE_IN=4,Gt.READY=5,Gt.FADE_OUT=6,Gt.DISABLED=7,Ht.lazyShared=!0,zt.__meta__={fields:{unobservedFocusedVisual:{observe:null},unobservedTexturesDensity:{observe:null}}},Xt.__meta__={fields:{unobservedTargetWidth:{observe:null},unobservedTargetHeight:{observe:null},unobservedWindowWidth:{observe:null},unobservedWindowHeight:{observe:null},unobservedTargetDensity:{observe:null},unobservedBackground:{observe:null},unobservedScaling:{observe:null},unobservedTitle:{observe:null},unobservedFullscreen:{observe:null},unobservedTargetFps:{observe:null},unobservedMaxDelta:{observe:null},unobservedOverrideDelta:{observe:null},unobservedPreventDefaultMouseWheel:{observe:null},unobservedPreventDefaultTouches:{observe:null}}},Yt.__meta__={fields:{unobservedShader:{observe:null}}},Qt.__meta__={fields:{unobservedSound:{observe:null}}},ei.__meta__={fields:{unobservedText:{observe:null}}},ec.MIN_TEXTURE_SIZE=32,ec.MAX_TEXTURE_SIZE=2048,li.__meta__={fields:{unobservedName:{observe:null},unobservedWidth:{observe:null},unobservedHeight:{observe:null},unobservedFilter:{observe:null},unobservedTexture:{observe:null}}},rc.__meta__={fields:{unobservedTmxMap:{observe:null},unobservedLdtkData:{observe:null},unobservedTilemapData:{observe:null}}},uc.__meta__={fields:{unobservedLdtkLevel:{observe:null},unobservedName:{serialize:null},unobservedOrientation:{serialize:null},unobservedWidth:{serialize:null},unobservedHeight:{serialize:null},unobservedRenderOrder:{serialize:null},unobservedHexSideLength:{serialize:null},unobservedStaggerAxis:{serialize:null},unobservedStaggerIndex:{serialize:null},unobservedBackgroundColor:{serialize:null},unobservedTilesets:{serialize:null},unobservedLayers:{serialize:null}}},wc.__meta__={fields:{unobservedLdtkLayer:{observe:null},unobservedName:{serialize:null},unobservedX:{serialize:null},unobservedY:{serialize:null},unobservedColumns:{serialize:null},unobservedRows:{serialize:null},unobservedOpacity:{serialize:null},unobservedVisible:{serialize:null},unobservedOffsetX:{serialize:null},unobservedOffsetY:{serialize:null},unobservedExplicitDepth:{serialize:null},unobservedBlending:{serialize:null},unobservedColor:{serialize:null},unobservedExtraBlending:{serialize:null},unobservedExtraOpacity:{serialize:null},unobservedTiles:{serialize:null},unobservedTilesAlpha:{serialize:null},unobservedTilesOffsetX:{serialize:null},unobservedTilesOffsetY:{serialize:null},unobservedComputedTiles:{observe:null},unobservedComputedTilesAlpha:{observe:null},unobservedComputedTilesOffsetX:{observe:null},unobservedComputedTilesOffsetY:{observe:null},unobservedShouldRenderTiles:{serialize:null},unobservedTileWidth:{serialize:null},unobservedTileHeight:{serialize:null}}};wi.__meta__={fields:{unobservedLdtkTileset:{observe:null},unobservedFirstGid:{serialize:null},unobservedName:{serialize:null},unobservedTileWidth:{serialize:null},unobservedTileHeight:{serialize:null},unobservedSpacing:{serialize:null},unobservedMargin:{serialize:null},unobservedTileCount:{serialize:null},unobservedColumns:{serialize:null},unobservedImage:{serialize:null},unobservedGridOrientation:{serialize:null},unobservedGridCellWidth:{serialize:null},unobservedGridCellHeight:{serialize:null},unobservedSlopes:{serialize:null}}},yi.__meta__={fields:{unobservedWidth:{serialize:null},unobservedHeight:{serialize:null},unobservedSource:{serialize:null}}},xi.callbacks=[],xi.next=999999999,xi.now=0,xi.startTimestamp=(new Date).getTime()/1e3,P._tweens=[],P._iteratedTweens=[],_.k=0,Ei.isAndroid_result=-1,Ei.isIos_result=-1,Ei.RE_ASCII_CHAR=new g("^[a-zA-Z0-9]$",""),Ei._nextUniqueIntCursor=0,Ei._nextUniqueInt0=2147483646*Math.random()|0,Ei._nextUniqueInt1=1e-4*(new Date).getTime()|0,Ei._nextUniqueInt2=2147483646*Math.random()|0,Ei._nextUniqueInt3=2147483646*Math.random()|0,Ei.RE_MODULE_AT=new g("^\\s*(?:at\\s*)?([^\\s]+\\.js)(?:\\s*:\\s*([0-9]+)(?:\\s*:\\s*([0-9]+))?)?\\s*$",""),ki.didTryRequireChokidar=!1,Bi.immediateCallbacks=[],Bi.immediateCallbacksCapacity=0,Bi.immediateCallbacksLen=0,O.UNKNOWN=0,O.ENTER=13,O.ESCAPE=27,O.BACKSPACE=8,O.TAB=9,O.SPACE=32,O.EXCLAIM=33,O.QUOTEDBL=34,O.HASH=35,O.PERCENT=37,O.DOLLAR=36,O.AMPERSAND=38,O.QUOTE=39,O.LEFTPAREN=40,O.RIGHTPAREN=41,O.ASTERISK=42,O.PLUS=43,O.COMMA=44,O.MINUS=45,O.PERIOD=46,O.SLASH=47,O.KEY_0=48,O.KEY_1=49,O.KEY_2=50,O.KEY_3=51,O.KEY_4=52,O.KEY_5=53,O.KEY_6=54,O.KEY_7=55,O.KEY_8=56,O.KEY_9=57,O.COLON=58,O.SEMICOLON=59,O.LESS=60,O.EQUALS=61,O.GREATER=62,O.QUESTION=63,O.AT=64,O.LEFTBRACKET=91,O.BACKSLASH=92,O.RIGHTBRACKET=93,O.CARET=94,O.UNDERSCORE=95,O.BACKQUOTE=96,O.KEY_A=97,O.KEY_B=98,O.KEY_C=99,O.KEY_D=100,O.KEY_E=101,O.KEY_F=102,O.KEY_G=103,O.KEY_H=104,O.KEY_I=105,O.KEY_J=106,O.KEY_K=107,O.KEY_L=108,O.KEY_M=109,O.KEY_N=110,O.KEY_O=111,O.KEY_P=112,O.KEY_Q=113,O.KEY_R=114,O.KEY_S=115,O.KEY_T=116,O.KEY_U=117,O.KEY_V=118,O.KEY_W=119,O.KEY_X=120,O.KEY_Y=121,O.KEY_Z=122,O.CAPSLOCK=1073741881,O.F1=1073741882,O.F2=1073741883,O.F3=1073741884,O.F4=1073741885,O.F5=1073741886,O.F6=1073741887,O.F7=1073741888,O.F8=1073741889,O.F9=1073741890,O.F10=1073741891,O.F11=1073741892,O.F12=1073741893,O.PRINTSCREEN=1073741894,O.SCROLLLOCK=1073741895,O.PAUSE=1073741896,O.INSERT=1073741897,O.HOME=1073741898,O.PAGEUP=1073741899,O.DELETE=127,O.END=1073741901,O.PAGEDOWN=1073741902,O.RIGHT=1073741903,O.LEFT=1073741904,O.DOWN=1073741905,O.UP=1073741906,O.NUMLOCKCLEAR=1073741907,O.KP_DIVIDE=1073741908,O.KP_MULTIPLY=1073741909,O.KP_MINUS=1073741910,O.KP_PLUS=1073741911,O.KP_ENTER=1073741912,O.KP_1=1073741913,O.KP_2=1073741914,O.KP_3=1073741915,O.KP_4=1073741916,O.KP_5=1073741917,O.KP_6=1073741918,O.KP_7=1073741919,O.KP_8=1073741920,O.KP_9=1073741921,O.KP_0=1073741922,O.KP_PERIOD=1073741923,O.APPLICATION=1073741925,O.POWER=1073741926,O.KP_EQUALS=1073741927,O.F13=1073741928,O.F14=1073741929,O.F15=1073741930,O.F16=1073741931,O.F17=1073741932,O.F18=1073741933,O.F19=1073741934,O.F20=1073741935,O.F21=1073741936,O.F22=1073741937,O.F23=1073741938,O.F24=1073741939,O.EXECUTE=1073741940,O.HELP=1073741941,O.MENU=1073741942,O.SELECT=1073741943,O.STOP=1073741944,O.AGAIN=1073741945,O.UNDO=1073741946,O.CUT=1073741947,O.COPY=1073741948,O.PASTE=1073741949,O.FIND=1073741950,O.MUTE=1073741951,O.VOLUMEUP=1073741952,O.VOLUMEDOWN=1073741953,O.KP_COMMA=1073741957,O.KP_EQUALSAS400=1073741958,O.ALTERASE=1073741977,O.SYSREQ=1073741978,O.CANCEL=1073741979,O.CLEAR=1073741980,O.PRIOR=1073741981,O.RETURN2=1073741982,O.SEPARATOR=1073741983,O.OUT=1073741984,O.OPER=1073741985,O.CLEARAGAIN=1073741986,O.CRSEL=1073741987,O.EXSEL=1073741988,O.KP_00=1073742e3,O.KP_000=1073742001,O.THOUSANDSSEPARATOR=1073742002,O.DECIMALSEPARATOR=1073742003,O.CURRENCYUNIT=1073742004,O.CURRENCYSUBUNIT=1073742005,O.KP_LEFTPAREN=1073742006,O.KP_RIGHTPAREN=1073742007,O.KP_LEFTBRACE=1073742008,O.KP_RIGHTBRACE=1073742009,O.KP_TAB=1073742010,O.KP_BACKSPACE=1073742011,O.KP_A=1073742012,O.KP_B=1073742013,O.KP_C=1073742014,O.KP_D=1073742015,O.KP_E=1073742016,O.KP_F=1073742017,O.KP_XOR=1073742018,O.KP_POWER=1073742019,O.KP_PERCENT=1073742020,O.KP_LESS=1073742021,O.KP_GREATER=1073742022,O.KP_AMPERSAND=1073742023,O.KP_DBLAMPERSAND=1073742024,O.KP_VERTICALBAR=1073742025,O.KP_DBLVERTICALBAR=1073742026,O.KP_COLON=1073742027,O.KP_HASH=1073742028,O.KP_SPACE=1073742029,O.KP_AT=1073742030,O.KP_EXCLAM=1073742031,O.KP_MEMSTORE=1073742032,O.KP_MEMRECALL=1073742033,O.KP_MEMCLEAR=1073742034,O.KP_MEMADD=1073742035,O.KP_MEMSUBTRACT=1073742036,O.KP_MEMMULTIPLY=1073742037,O.KP_MEMDIVIDE=1073742038,O.KP_PLUSMINUS=1073742039,O.KP_CLEAR=1073742040,O.KP_CLEARENTRY=1073742041,O.KP_BINARY=1073742042,O.KP_OCTAL=1073742043,O.KP_DECIMAL=1073742044,O.KP_HEXADECIMAL=1073742045,O.LCTRL=1073742048,O.LSHIFT=1073742049,O.LALT=1073742050,O.LMETA=1073742051,O.RCTRL=1073742052,O.RSHIFT=1073742053,O.RALT=1073742054,O.RMETA=1073742055,O.MODE=1073742081,O.AUDIONEXT=1073742082,O.AUDIOPREV=1073742083,O.AUDIOSTOP=1073742084,O.AUDIOPLAY=1073742085,O.AUDIOMUTE=1073742086,O.MEDIASELECT=1073742087,O.WWW=1073742088,O.MAIL=1073742089,O.CALCULATOR=1073742090,O.COMPUTER=1073742091,O.AC_SEARCH=1073742092,O.AC_HOME=1073742093,O.AC_BACK=1073742094,O.AC_FORWARD=1073742095,O.AC_STOP=1073742096,O.AC_REFRESH=1073742097,O.AC_BOOKMARKS=1073742098,O.BRIGHTNESSDOWN=1073742099,O.BRIGHTNESSUP=1073742100,O.DISPLAYSWITCH=1073742101,O.KBDILLUMTOGGLE=1073742102,O.KBDILLUMDOWN=1073742103,O.KBDILLUMUP=1073742104,O.EJECT=1073742105,O.SLEEP=1073742106,U.MASK=1073741824,U.UNKNOWN=0,U.KEY_A=4,U.KEY_B=5,U.KEY_C=6,U.KEY_D=7,U.KEY_E=8,U.KEY_F=9,U.KEY_G=10,U.KEY_H=11,U.KEY_I=12,U.KEY_J=13,U.KEY_K=14,U.KEY_L=15,U.KEY_M=16,U.KEY_N=17,U.KEY_O=18,U.KEY_P=19,U.KEY_Q=20,U.KEY_R=21,U.KEY_S=22,U.KEY_T=23,U.KEY_U=24,U.KEY_V=25,U.KEY_W=26,U.KEY_X=27,U.KEY_Y=28,U.KEY_Z=29,U.KEY_1=30,U.KEY_2=31,U.KEY_3=32,U.KEY_4=33,U.KEY_5=34,U.KEY_6=35,U.KEY_7=36,U.KEY_8=37,U.KEY_9=38,U.KEY_0=39,U.ENTER=40,U.ESCAPE=41,U.BACKSPACE=42,U.TAB=43,U.SPACE=44,U.MINUS=45,U.EQUALS=46,U.LEFTBRACKET=47,U.RIGHTBRACKET=48,U.BACKSLASH=49,U.NONUSHASH=50,U.SEMICOLON=51,U.APOSTROPHE=52,U.GRAVE=53,U.COMMA=54,U.PERIOD=55,U.SLASH=56,U.CAPSLOCK=57,U.F1=58,U.F2=59,U.F3=60,U.F4=61,U.F5=62,U.F6=63,U.F7=64,U.F8=65,U.F9=66,U.F10=67,U.F11=68,U.F12=69,U.PRINTSCREEN=70,U.SCROLLLOCK=71,U.PAUSE=72,U.INSERT=73,U.HOME=74,U.PAGEUP=75,U.DELETE=76,U.END=77,U.PAGEDOWN=78,U.RIGHT=79,U.LEFT=80,U.DOWN=81,U.UP=82,U.NUMLOCKCLEAR=83,U.KP_DIVIDE=84,U.KP_MULTIPLY=85,U.KP_MINUS=86,U.KP_PLUS=87,U.KP_ENTER=88,U.KP_1=89,U.KP_2=90,U.KP_3=91,U.KP_4=92,U.KP_5=93,U.KP_6=94,U.KP_7=95,U.KP_8=96,U.KP_9=97,U.KP_0=98,U.KP_PERIOD=99,U.NONUSBACKSLASH=100,U.APPLICATION=101,U.POWER=102,U.KP_EQUALS=103,U.F13=104,U.F14=105,U.F15=106,U.F16=107,U.F17=108,U.F18=109,U.F19=110,U.F20=111,U.F21=112,U.F22=113,U.F23=114,U.F24=115,U.EXECUTE=116,U.HELP=117,U.MENU=118,U.SELECT=119,U.STOP=120,U.AGAIN=121,U.UNDO=122,U.CUT=123,U.COPY=124,U.PASTE=125,U.FIND=126,U.MUTE=127,U.VOLUMEUP=128,U.VOLUMEDOWN=129,U.KP_COMMA=133,U.KP_EQUALSAS400=134,U.INTERNATIONAL1=135,U.INTERNATIONAL2=136,U.INTERNATIONAL3=137,U.INTERNATIONAL4=138,U.INTERNATIONAL5=139,U.INTERNATIONAL6=140,U.INTERNATIONAL7=141,U.INTERNATIONAL8=142,U.INTERNATIONAL9=143,U.LANG1=144,U.LANG2=145,U.LANG3=146,U.LANG4=147,U.LANG5=148,U.LANG6=149,U.LANG7=150,U.LANG8=151,U.LANG9=152,U.ALTERASE=153,U.SYSREQ=154,U.CANCEL=155,U.CLEAR=156,U.PRIOR=157,U.RETURN2=158,U.SEPARATOR=159,U.OUT=160,U.OPER=161,U.CLEARAGAIN=162,U.CRSEL=163,U.EXSEL=164,U.KP_00=176,U.KP_000=177,U.THOUSANDSSEPARATOR=178,U.DECIMALSEPARATOR=179,U.CURRENCYUNIT=180,U.CURRENCYSUBUNIT=181,U.KP_LEFTPAREN=182,U.KP_RIGHTPAREN=183,U.KP_LEFTBRACE=184,U.KP_RIGHTBRACE=185,U.KP_TAB=186,U.KP_BACKSPACE=187,U.KP_A=188,U.KP_B=189,U.KP_C=190,U.KP_D=191,U.KP_E=192,U.KP_F=193,U.KP_XOR=194,U.KP_POWER=195,U.KP_PERCENT=196,U.KP_LESS=197,U.KP_GREATER=198,U.KP_AMPERSAND=199,U.KP_DBLAMPERSAND=200,U.KP_VERTICALBAR=201,U.KP_DBLVERTICALBAR=202,U.KP_COLON=203,U.KP_HASH=204,U.KP_SPACE=205,U.KP_AT=206,U.KP_EXCLAM=207,U.KP_MEMSTORE=208,U.KP_MEMRECALL=209,U.KP_MEMCLEAR=210,U.KP_MEMADD=211,U.KP_MEMSUBTRACT=212,U.KP_MEMMULTIPLY=213,U.KP_MEMDIVIDE=214,U.KP_PLUSMINUS=215,U.KP_CLEAR=216,U.KP_CLEARENTRY=217,U.KP_BINARY=218,U.KP_OCTAL=219,U.KP_DECIMAL=220,U.KP_HEXADECIMAL=221,U.LCTRL=224,U.LSHIFT=225,U.LALT=226,U.LMETA=227,U.RCTRL=228,U.RSHIFT=229,U.RALT=230,U.RMETA=231,U.MODE=257,U.AUDIONEXT=258,U.AUDIOPREV=259,U.AUDIOSTOP=260,U.AUDIOPLAY=261,U.AUDIOMUTE=262,U.MEDIASELECT=263,U.WWW=264,U.MAIL=265,U.CALCULATOR=266,U.COMPUTER=267,U.AC_SEARCH=268,U.AC_HOME=269,U.AC_BACK=270,U.AC_FORWARD=271,U.AC_STOP=272,U.AC_REFRESH=273,U.AC_BOOKMARKS=274,U.BRIGHTNESSDOWN=275,U.BRIGHTNESSUP=276,U.DISPLAYSWITCH=277,U.KBDILLUMTOGGLE=278,U.KBDILLUMDOWN=279,U.KBDILLUMUP=280,U.EJECT=281,U.SLEEP=282,U.APP1=283,U.APP2=284,U.scanCodeNames=[null,null,null,null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","Enter","Escape","Backspace","Tab","Space","-","=","[","]","\\","#",";","'","`",",",".","/","CapsLock","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrintScreen","ScrollLock","Pause","Insert","Home","PageUp","Delete","End","PageDown","Right","Left","Down","Up","Numlock","Keypad /","Keypad *","Keypad -","Keypad +","Keypad Enter","Keypad 1","Keypad 2","Keypad 3","Keypad 4","Keypad 5","Keypad 6","Keypad 7","Keypad 8","Keypad 9","Keypad 0","Keypad .",null,"Application","Power","Keypad =","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Execute","Help","Menu","Select","Stop","Again","Undo","Cut","Copy","Paste","Find","Mute","VolumeUp","VolumeDown",null,null,null,"Keypad ,","Keypad = (AS400)",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"AltErase","SysReq","Cancel","Clear","Prior","Enter","Separator","Out","Oper","Clear / Again","CrSel","ExSel",null,null,null,null,null,null,null,null,null,null,null,"Keypad 00","Keypad 000","ThousandsSeparator","DecimalSeparator","CurrencyUnit","CurrencySubUnit","Keypad (","Keypad )","Keypad {","Keypad }","Keypad Tab","Keypad Backspace","Keypad A","Keypad B","Keypad C","Keypad D","Keypad E","Keypad F","Keypad XOR","Keypad ^","Keypad %","Keypad <","Keypad >","Keypad &","Keypad &&","Keypad |","Keypad ||","Keypad :","Keypad #","Keypad Space","Keypad @","Keypad !","Keypad MemStore","Keypad MemRecall","Keypad MemClear","Keypad MemAdd","Keypad MemSubtract","Keypad MemMultiply","Keypad MemDivide","Keypad +/-","Keypad Clear","Keypad ClearEntry","Keypad Binary","Keypad Octal","Keypad Decimal","Keypad Hexadecimal",null,null,"Left Ctrl","Left Shift","Left Alt","Left Meta","Right Ctrl","Right Shift","Right Alt","Right Meta",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ModeSwitch","AudioNext","AudioPrev","AudioStop","AudioPlay","AudioMute","MediaSelect","WWW","Mail","Calculator","Computer","AC Search","AC Home","AC Back","AC Forward","AC Stop","AC Refresh","AC Bookmarks","BrightnessDown","BrightnessUp","DisplaySwitch","KBDIllumToggle","KBDIllumDown","KBDIllumUp","Eject","Sleep"],F2._nextUniqueIntCursor=0,F2._nextUniqueInt0=2147483646*Math.random()|0,F2._nextUniqueInt1=1e-4*(new Date).getTime()|0,F2._nextUniqueInt2=2147483646*Math.random()|0,F2._nextUniqueInt3=2147483646*Math.random()|0,Xi._nextIndex=1,T.DEPTH24_STENCIL8=35056,T.DEPTH_COMPONENT24=33190,T.TEXTURE_2D_MULTISAMPLE=37120,T.READ_FRAMEBUFFER=36008,T.DRAW_FRAMEBUFFER=36009,T.RGBA8=32856,T.COLOR=6144,T._boundTexture2D=[],T._activeTextureSlot=-1,T._didFetchDefaultBuffers=!1,T.clearBufferForBlitValues=new Float32Array([0,0,0,1]),Y.DEPTH_BUFFER_BIT=256,Y.STENCIL_BUFFER_BIT=1024,Y.COLOR_BUFFER_BIT=16384,Y.POINTS=0,Y.LINES=1,Y.LINE_LOOP=2,Y.LINE_STRIP=3,Y.TRIANGLES=4,Y.TRIANGLE_STRIP=5,Y.TRIANGLE_FAN=6,Y.ZERO=0,Y.ONE=1,Y.SRC_COLOR=768,Y.ONE_MINUS_SRC_COLOR=769,Y.SRC_ALPHA=770,Y.ONE_MINUS_SRC_ALPHA=771,Y.DST_ALPHA=772,Y.ONE_MINUS_DST_ALPHA=773,Y.DST_COLOR=774,Y.ONE_MINUS_DST_COLOR=775,Y.SRC_ALPHA_SATURATE=776,Y.FUNC_ADD=32774,Y.BLEND_EQUATION=32777,Y.BLEND_EQUATION_RGB=32777,Y.BLEND_EQUATION_ALPHA=34877,Y.FUNC_SUBTRACT=32778,Y.FUNC_REVERSE_SUBTRACT=32779,Y.BLEND_DST_RGB=32968,Y.BLEND_SRC_RGB=32969,Y.BLEND_DST_ALPHA=32970,Y.BLEND_SRC_ALPHA=32971,Y.CONSTANT_COLOR=32769,Y.ONE_MINUS_CONSTANT_COLOR=32770,Y.CONSTANT_ALPHA=32771,Y.ONE_MINUS_CONSTANT_ALPHA=32772,Y.BLEND_COLOR=32773,Y.ARRAY_BUFFER=34962,Y.ELEMENT_ARRAY_BUFFER=34963,Y.ARRAY_BUFFER_BINDING=34964,Y.ELEMENT_ARRAY_BUFFER_BINDING=34965,Y.STREAM_DRAW=35040,Y.STATIC_DRAW=35044,Y.DYNAMIC_DRAW=35048,Y.BUFFER_SIZE=34660,Y.BUFFER_USAGE=34661,Y.CURRENT_VERTEX_ATTRIB=34342,Y.FRONT=1028,Y.BACK=1029,Y.FRONT_AND_BACK=1032,Y.CULL_FACE=2884,Y.BLEND=3042,Y.DITHER=3024,Y.STENCIL_TEST=2960,Y.DEPTH_TEST=2929,Y.SCISSOR_TEST=3089,Y.POLYGON_OFFSET_FILL=32823,Y.SAMPLE_ALPHA_TO_COVERAGE=32926,Y.SAMPLE_COVERAGE=32928,Y.NO_ERROR=0,Y.INVALID_ENUM=1280,Y.INVALID_VALUE=1281,Y.INVALID_OPERATION=1282,Y.OUT_OF_MEMORY=1285,Y.CW=2304,Y.CCW=2305,Y.LINE_WIDTH=2849,Y.ALIASED_POINT_SIZE_RANGE=33901,Y.ALIASED_LINE_WIDTH_RANGE=33902,Y.CULL_FACE_MODE=2885,Y.FRONT_FACE=2886,Y.DEPTH_RANGE=2928,Y.DEPTH_WRITEMASK=2930,Y.DEPTH_CLEAR_VALUE=2931,Y.DEPTH_FUNC=2932,Y.STENCIL_CLEAR_VALUE=2961,Y.STENCIL_FUNC=2962,Y.STENCIL_FAIL=2964,Y.STENCIL_PASS_DEPTH_FAIL=2965,Y.STENCIL_PASS_DEPTH_PASS=2966,Y.STENCIL_REF=2967,Y.STENCIL_VALUE_MASK=2963,Y.STENCIL_WRITEMASK=2968,Y.STENCIL_BACK_FUNC=34816,Y.STENCIL_BACK_FAIL=34817,Y.STENCIL_BACK_PASS_DEPTH_FAIL=34818,Y.STENCIL_BACK_PASS_DEPTH_PASS=34819,Y.STENCIL_BACK_REF=36003,Y.STENCIL_BACK_VALUE_MASK=36004,Y.STENCIL_BACK_WRITEMASK=36005,Y.VIEWPORT=2978,Y.SCISSOR_BOX=3088,Y.COLOR_CLEAR_VALUE=3106,Y.COLOR_WRITEMASK=3107,Y.UNPACK_ALIGNMENT=3317,Y.PACK_ALIGNMENT=3333,Y.MAX_TEXTURE_SIZE=3379,Y.MAX_VIEWPORT_DIMS=3386,Y.SUBPIXEL_BITS=3408,Y.RED_BITS=3410,Y.GREEN_BITS=3411,Y.BLUE_BITS=3412,Y.ALPHA_BITS=3413,Y.DEPTH_BITS=3414,Y.STENCIL_BITS=3415,Y.POLYGON_OFFSET_UNITS=10752,Y.POLYGON_OFFSET_FACTOR=32824,Y.TEXTURE_BINDING_2D=32873,Y.SAMPLE_BUFFERS=32936,Y.SAMPLES=32937,Y.SAMPLE_COVERAGE_VALUE=32938,Y.SAMPLE_COVERAGE_INVERT=32939,Y.COMPRESSED_TEXTURE_FORMATS=34467,Y.DONT_CARE=4352,Y.FASTEST=4353,Y.NICEST=4354,Y.GENERATE_MIPMAP_HINT=33170,Y.BYTE=5120,Y.UNSIGNED_BYTE=5121,Y.SHORT=5122,Y.UNSIGNED_SHORT=5123,Y.INT=5124,Y.UNSIGNED_INT=5125,Y.FLOAT=5126,Y.DEPTH_COMPONENT=6402,Y.ALPHA=6406,Y.RGB=6407,Y.RGBA=6408,Y.LUMINANCE=6409,Y.LUMINANCE_ALPHA=6410,Y.UNSIGNED_SHORT_4_4_4_4=32819,Y.UNSIGNED_SHORT_5_5_5_1=32820,Y.UNSIGNED_SHORT_5_6_5=33635,Y.FRAGMENT_SHADER=35632,Y.VERTEX_SHADER=35633,Y.MAX_VERTEX_ATTRIBS=34921,Y.MAX_VERTEX_UNIFORM_VECTORS=36347,Y.MAX_VARYING_VECTORS=36348,Y.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,Y.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,Y.MAX_TEXTURE_IMAGE_UNITS=34930,Y.MAX_FRAGMENT_UNIFORM_VECTORS=36349,Y.SHADER_TYPE=35663,Y.DELETE_STATUS=35712,Y.LINK_STATUS=35714,Y.VALIDATE_STATUS=35715,Y.ATTACHED_SHADERS=35717,Y.ACTIVE_UNIFORMS=35718,Y.ACTIVE_ATTRIBUTES=35721,Y.SHADING_LANGUAGE_VERSION=35724,Y.CURRENT_PROGRAM=35725,Y.NEVER=512,Y.LESS=513,Y.EQUAL=514,Y.LEQUAL=515,Y.GREATER=516,Y.NOTEQUAL=517,Y.GEQUAL=518,Y.ALWAYS=519,Y.KEEP=7680,Y.REPLACE=7681,Y.INCR=7682,Y.DECR=7683,Y.INVERT=5386,Y.INCR_WRAP=34055,Y.DECR_WRAP=34056,Y.VENDOR=7936,Y.RENDERER=7937,Y.VERSION=7938,Y.NEAREST=9728,Y.LINEAR=9729,Y.NEAREST_MIPMAP_NEAREST=9984,Y.LINEAR_MIPMAP_NEAREST=9985,Y.NEAREST_MIPMAP_LINEAR=9986,Y.LINEAR_MIPMAP_LINEAR=9987,Y.TEXTURE_MAG_FILTER=10240,Y.TEXTURE_MIN_FILTER=10241,Y.TEXTURE_WRAP_S=10242,Y.TEXTURE_WRAP_T=10243,Y.TEXTURE_2D=3553,Y.TEXTURE=5890,Y.TEXTURE_CUBE_MAP=34067,Y.TEXTURE_BINDING_CUBE_MAP=34068,Y.TEXTURE_CUBE_MAP_POSITIVE_X=34069,Y.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,Y.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,Y.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,Y.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,Y.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,Y.MAX_CUBE_MAP_TEXTURE_SIZE=34076,Y.TEXTURE0=33984,Y.TEXTURE1=33985,Y.TEXTURE2=33986,Y.TEXTURE3=33987,Y.TEXTURE4=33988,Y.TEXTURE5=33989,Y.TEXTURE6=33990,Y.TEXTURE7=33991,Y.TEXTURE8=33992,Y.TEXTURE9=33993,Y.TEXTURE10=33994,Y.TEXTURE11=33995,Y.TEXTURE12=33996,Y.TEXTURE13=33997,Y.TEXTURE14=33998,Y.TEXTURE15=33999,Y.TEXTURE16=34e3,Y.TEXTURE17=34001,Y.TEXTURE18=34002,Y.TEXTURE19=34003,Y.TEXTURE20=34004,Y.TEXTURE21=34005,Y.TEXTURE22=34006,Y.TEXTURE23=34007,Y.TEXTURE24=34008,Y.TEXTURE25=34009,Y.TEXTURE26=34010,Y.TEXTURE27=34011,Y.TEXTURE28=34012,Y.TEXTURE29=34013,Y.TEXTURE30=34014,Y.TEXTURE31=34015,Y.ACTIVE_TEXTURE=34016,Y.REPEAT=10497,Y.CLAMP_TO_EDGE=33071,Y.MIRRORED_REPEAT=33648,Y.FLOAT_VEC2=35664,Y.FLOAT_VEC3=35665,Y.FLOAT_VEC4=35666,Y.INT_VEC2=35667,Y.INT_VEC3=35668,Y.INT_VEC4=35669,Y.BOOL=35670,Y.BOOL_VEC2=35671,Y.BOOL_VEC3=35672,Y.BOOL_VEC4=35673,Y.FLOAT_MAT2=35674,Y.FLOAT_MAT3=35675,Y.FLOAT_MAT4=35676,Y.SAMPLER_2D=35678,Y.SAMPLER_CUBE=35680,Y.VERTEX_ATTRIB_ARRAY_ENABLED=34338,Y.VERTEX_ATTRIB_ARRAY_SIZE=34339,Y.VERTEX_ATTRIB_ARRAY_STRIDE=34340,Y.VERTEX_ATTRIB_ARRAY_TYPE=34341,Y.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,Y.VERTEX_ATTRIB_ARRAY_POINTER=34373,Y.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,Y.VERTEX_PROGRAM_POINT_SIZE=34370,Y.POINT_SPRITE=34913,Y.COMPILE_STATUS=35713,Y.LOW_FLOAT=36336,Y.MEDIUM_FLOAT=36337,Y.HIGH_FLOAT=36338,Y.LOW_INT=36339,Y.MEDIUM_INT=36340,Y.HIGH_INT=36341,Y.FRAMEBUFFER=36160,Y.RENDERBUFFER=36161,Y.RGBA4=32854,Y.RGB5_A1=32855,Y.RGB565=36194,Y.DEPTH_COMPONENT16=33189,Y.STENCIL_INDEX=6401,Y.STENCIL_INDEX8=36168,Y.DEPTH_STENCIL=34041,Y.RENDERBUFFER_WIDTH=36162,Y.RENDERBUFFER_HEIGHT=36163,Y.RENDERBUFFER_INTERNAL_FORMAT=36164,Y.RENDERBUFFER_RED_SIZE=36176,Y.RENDERBUFFER_GREEN_SIZE=36177,Y.RENDERBUFFER_BLUE_SIZE=36178,Y.RENDERBUFFER_ALPHA_SIZE=36179,Y.RENDERBUFFER_DEPTH_SIZE=36180,Y.RENDERBUFFER_STENCIL_SIZE=36181,Y.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,Y.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,Y.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,Y.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,Y.COLOR_ATTACHMENT0=36064,Y.DEPTH_ATTACHMENT=36096,Y.STENCIL_ATTACHMENT=36128,Y.DEPTH_STENCIL_ATTACHMENT=33306,Y.NONE=0,Y.FRAMEBUFFER_COMPLETE=36053,Y.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,Y.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,Y.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,Y.FRAMEBUFFER_UNSUPPORTED=36061,Y.FRAMEBUFFER_BINDING=36006,Y.RENDERBUFFER_BINDING=36007,Y.MAX_RENDERBUFFER_SIZE=34024,Y.INVALID_FRAMEBUFFER_OPERATION=1286,Y.UNPACK_FLIP_Y_WEBGL=37440,Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,Y.CONTEXT_LOST_WEBGL=37442,Y.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,Y.BROWSER_DEFAULT_WEBGL=37444,Ji.POT=!0,el.HALF_PI=1.5707,el.DEFAULT_BUS=0,el.MAX_WORKLET_PARAMS=128,ll.timestampStart=0,ll.webWindowId=1,sl.dom_shift=16,sl.dom_ctrl=17,sl.dom_alt=18,sl.dom_capslock=20,sl.dom_pageup=33,sl.dom_pagedown=34,sl.dom_end=35,sl.dom_home=36,sl.dom_left=37,sl.dom_up=38,sl.dom_right=39,sl.dom_down=40,sl.dom_printscr=44,sl.dom_insert=45,sl.dom_delete=46,sl.dom_lmeta=91,sl.dom_rmeta=93,sl.dom_kp_0=96,sl.dom_kp_1=97,sl.dom_kp_2=98,sl.dom_kp_3=99,sl.dom_kp_4=100,sl.dom_kp_5=101,sl.dom_kp_6=102,sl.dom_kp_7=103,sl.dom_kp_8=104,sl.dom_kp_9=105,sl.dom_kp_multiply=106,sl.dom_kp_plus=107,sl.dom_kp_minus=109,sl.dom_kp_decimal=110,sl.dom_kp_divide=111,sl.dom_kp_numlock=144,sl.dom_f1=112,sl.dom_f2=113,sl.dom_f3=114,sl.dom_f4=115,sl.dom_f5=116,sl.dom_f6=117,sl.dom_f7=118,sl.dom_f8=119,sl.dom_f9=120,sl.dom_f10=121,sl.dom_f11=122,sl.dom_f12=123,sl.dom_f13=124,sl.dom_f14=125,sl.dom_f15=126,sl.dom_f16=127,sl.dom_f17=128,sl.dom_f18=129,sl.dom_f19=130,sl.dom_f20=131,sl.dom_f21=132,sl.dom_f22=133,sl.dom_f23=134,sl.dom_f24=135,sl.dom_caret=160,sl.dom_exclaim=161,sl.dom_quotedbl=162,sl.dom_hash=163,sl.dom_dollar=164,sl.dom_percent=165,sl.dom_ampersand=166,sl.dom_underscore=167,sl.dom_leftparen=168,sl.dom_rightparen=169,sl.dom_asterisk=170,sl.dom_plus=171,sl.dom_pipe=172,sl.dom_minus=173,sl.dom_leftbrace=174,sl.dom_rightbrace=175,sl.dom_tilde=176,sl.dom_audiomute=181,sl.dom_volumedown=182,sl.dom_volumeup=183,sl.dom_comma=188,sl.dom_period=190,sl.dom_slash=191,sl.dom_backquote=192,sl.dom_leftbracket=219,sl.dom_rightbracket=221,sl.dom_backslash=220,sl.dom_quote=222,sl.dom_meta=224,Sl.USE_CACHE=!-536870912,Sl.USE_ENUM_INDEX=!1,Sl.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",El.DEFAULT_RESOLVER=new f3,El.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",Rl.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rl.BYTES=kl.ofString(Rl.CHARS),ns.helper=new DataView(new ArrayBuffer(8)),Os.escapes=((e=new z).h.lt="<",e.h.gt=">",e.h.amp="&",e.h.quot='"',e.h.apos="'",e),vs.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1],vs.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],vs.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1],vs.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],vs.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S.m=[[3.240969941904521,-1.537383177570093,-.498610760293],[-.96924363628087,1.87596750150772,.041555057407175],[.055630079696993,-.20397695888897,1.056971514242878]],S.minv=[[.41239079926595,.35758433938387,.18048078840183],[.21263900587151,.71516867876775,.072192315360733],[.019330818715591,.11919477979462,.95053215224966]],S.refY=1,S.refU=.19783000664283,S.refV=.46831999493879,S.kappa=903.2962962,S.epsilon=.0088564516,S.hexChars="0123456789abcdef",M.prevCurrent=[],M._autorunArrays=[],M._autorunArraysLen=0,M._arrayOfAutorunArrays=[],M._arrayOfAutorunArraysLen=0,W._appendSerialize=!1,W._cachedEnumInfoBySerializableType=new z,W._enumInfo=new z,xs._nextUniqueIntCursor=0,xs._nextUniqueInt0=2147483646*Math.random()|0,xs._nextUniqueInt1=1e-4*(new Date).getTime()|0,xs._nextUniqueInt2=2147483646*Math.random()|0,xs._nextUniqueInt3=2147483646*Math.random()|0,Ba.main()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);